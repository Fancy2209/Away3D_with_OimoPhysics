/*
 howler.js v2.1.1 | (c) 2013-2018, James Simpson of GoldFire Studios | MIT License | howlerjs.com  Spatial Plugin  @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(X,x,J){X!=Array.prototype&&X!=Object.prototype&&(X[x]=J.value)};$jscomp.getGlobal=function(X){return"undefined"!=typeof window&&window===X?X:"undefined"!=typeof global&&null!=global?global:X};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(X,x,J,D){if(x){J=$jscomp.global;X=X.split(".");for(D=0;D<X.length-1;D++){var N=X[D];N in J||(J[N]={});J=J[N]}X=X[X.length-1];D=J[X];x=x(D);x!=D&&null!=x&&$jscomp.defineProperty(J,X,{configurable:!0,writable:!0,value:x})}};
$jscomp.polyfill("String.fromCodePoint",function(X){return X?X:function(x){for(var J="",D=0;D<arguments.length;D++){var N=Number(arguments[D]);if(0>N||1114111<N||N!==Math.floor(N))throw new RangeError("invalid_code_point "+N);65535>=N?J+=String.fromCharCode(N):(N-=65536,J+=String.fromCharCode(N>>>10&1023|55296),J+=String.fromCharCode(N&1023|56320))}return J}},"es6","es3");$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var X=0;return function(x){return $jscomp.SYMBOL_PREFIX+(x||"")+X++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var X=$jscomp.global.Symbol.iterator;X||(X=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[X]&&$jscomp.defineProperty(Array.prototype,X,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(X){var x=0;return $jscomp.iteratorPrototype(function(){return x<X.length?{done:!1,value:X[x++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(X){$jscomp.initSymbolIterator();X={next:X};X[$jscomp.global.Symbol.iterator]=function(){return this};return X};$jscomp.iteratorFromArray=function(X,x){$jscomp.initSymbolIterator();X instanceof String&&(X+="");var J=0,D={next:function(){if(J<X.length){var N=J++;return{value:x(N,X[N]),done:!1}}D.next=function(){return{done:!0,value:void 0}};return D.next()}};D[Symbol.iterator]=function(){return D};return D};
$jscomp.polyfill("Array.prototype.keys",function(X){return X?X:function(){return $jscomp.iteratorFromArray(this,function(x){return x})}},"es6","es3");$jscomp.checkStringArgs=function(X,x,J){if(null==X)throw new TypeError("The 'this' value for String.prototype."+J+" must not be null or undefined");if(x instanceof RegExp)throw new TypeError("First argument to String.prototype."+J+" must not be a regular expression");return X+""};
$jscomp.polyfill("String.prototype.startsWith",function(X){return X?X:function(x,J){var D=$jscomp.checkStringArgs(this,x,"startsWith");x+="";var N=D.length,T=x.length;J=Math.max(0,Math.min(J|0,D.length));for(var v=0;v<T&&J<N;)if(D[J++]!=x[v++])return!1;return v>=T}},"es6","es3");
$jscomp.polyfill("String.prototype.endsWith",function(X){return X?X:function(x,J){var D=$jscomp.checkStringArgs(this,x,"endsWith");x+="";void 0===J&&(J=D.length);J=Math.max(0,Math.min(J|0,D.length));for(var N=x.length;0<N&&0<J;)if(D[--J]!=x[--N])return!1;return 0>=N}},"es6","es3");
$jscomp.polyfill("Array.prototype.fill",function(X){return X?X:function(x,J,D){var N=this.length||0;0>J&&(J=Math.max(0,N+J));if(null==D||D>N)D=N;D=Number(D);0>D&&(D=Math.max(0,N+D));for(J=Number(J||0);J<D;J++)this[J]=x;return this}},"es6","es3");
$jscomp.polyfill("String.prototype.repeat",function(X){return X?X:function(x){var J=$jscomp.checkStringArgs(this,null,"repeat");if(0>x||1342177279<x)throw new RangeError("Invalid count value");x|=0;for(var D="";x;)if(x&1&&(D+=J),x>>>=1)J+=J;return D}},"es6","es3");
(function(X,x){X.lime=X.lime||{};X.lime.$scripts=X.lime.$scripts||{};X.lime.$scripts.View=function(x,D){(function(x,D){function v(a,b){a=Object.create(a);for(var c in b)a[c]=b[c];b.toString!==Object.prototype.toString&&(a.toString=b.toString);return a}function N(a){return a instanceof Array?ra.iter(a):a.iterator()}function u(a,b){if(null==b)return null;null==b.__id__&&(b.__id__=D.$haxeUID++);var c;null==a.hx__closures__?a.hx__closures__={}:c=a.hx__closures__[b.__id__];null==c&&(c=b.bind(a),a.hx__closures__[b.__id__]=
c);return c}x.lime=x.lime||{};var g={},p=function(){return Ka.__string_rec(this,"")},t=t||{},q,qa=function(){};g["lime.app.IModule"]=qa;qa.__name__="lime.app.IModule";qa.__isInterface__=!0;qa.prototype={__registerLimeModule:null,__class__:qa};var Ca=function(){this.onExit=new yf};g["lime.app.Module"]=Ca;Ca.__name__="lime.app.Module";Ca.__interfaces__=[qa];Ca.prototype={onExit:null,__registerLimeModule:function(a){},__class__:Ca};var Ia=function(a){this.gameDeviceCache=new Zb;this.parent=a;this.nextUpdate=
this.lastUpdate=this.currentUpdate=0;this.framePeriod=-1;ve.init();this.accelerometer=De.registerSensor(Hm.ACCELEROMETER,0)};g["lime._internal.backend.html5.HTML5Application"]=Ia;Ia.__name__="lime._internal.backend.html5.HTML5Application";Ia.prototype={gameDeviceCache:null,accelerometer:null,currentUpdate:null,deltaTime:null,framePeriod:null,lastUpdate:null,nextUpdate:null,parent:null,convertKeyCode:function(a){if(65<=a&&90>=a)return a+32;switch(a){case 12:return 1073741980;case 16:return 1073742049;
case 17:return 1073742048;case 18:return 1073742050;case 19:return 1073741896;case 20:return 1073741881;case 33:return 1073741899;case 34:return 1073741902;case 35:return 1073741901;case 36:return 1073741898;case 37:return 1073741904;case 38:return 1073741906;case 39:return 1073741903;case 40:return 1073741905;case 41:return 1073741943;case 43:return 1073741940;case 44:return 1073741894;case 45:return 1073741897;case 46:return 127;case 91:return 1073742051;case 92:return 1073742055;case 93:return 1073742055;
case 95:return 1073742106;case 96:return 1073741922;case 97:return 1073741913;case 98:return 1073741914;case 99:return 1073741915;case 100:return 1073741916;case 101:return 1073741917;case 102:return 1073741918;case 103:return 1073741919;case 104:return 1073741920;case 105:return 1073741921;case 106:return 1073741909;case 107:return 1073741911;case 108:return 1073741923;case 109:return 1073741910;case 110:return 1073741923;case 111:return 1073741908;case 112:return 1073741882;case 113:return 1073741883;
case 114:return 1073741884;case 115:return 1073741885;case 116:return 1073741886;case 117:return 1073741887;case 118:return 1073741888;case 119:return 1073741889;case 120:return 1073741890;case 121:return 1073741891;case 122:return 1073741892;case 123:return 1073741893;case 124:return 1073741928;case 125:return 1073741929;case 126:return 1073741930;case 127:return 1073741931;case 128:return 1073741932;case 129:return 1073741933;case 130:return 1073741934;case 131:return 1073741935;case 132:return 1073741936;
case 133:return 1073741937;case 134:return 1073741938;case 135:return 1073741939;case 144:return 1073741907;case 145:return 1073741895;case 160:return 94;case 161:return 33;case 163:return 35;case 164:return 36;case 166:return 1073742094;case 167:return 1073742095;case 168:return 1073742097;case 169:return 41;case 170:return 42;case 171:return 96;case 172:return 1073741898;case 173:return 45;case 174:return 1073741953;case 175:return 1073741952;case 176:return 1073742082;case 177:return 1073742083;
case 178:return 1073742084;case 179:return 1073742085;case 180:return 1073742089;case 181:return 1073742086;case 182:return 1073741953;case 183:return 1073741952;case 186:return 59;case 187:return 61;case 188:return 44;case 189:return 45;case 190:return 46;case 191:return 47;case 192:return 96;case 193:return 63;case 194:return 1073741923;case 219:return 91;case 220:return 92;case 221:return 93;case 222:return 39;case 223:return 96;case 224:return 1073742051;case 226:return 92}return a},exec:function(){window.addEventListener("keydown",
u(this,this.handleKeyEvent),!1);window.addEventListener("keyup",u(this,this.handleKeyEvent),!1);window.addEventListener("focus",u(this,this.handleWindowEvent),!1);window.addEventListener("blur",u(this,this.handleWindowEvent),!1);window.addEventListener("resize",u(this,this.handleWindowEvent),!1);window.addEventListener("beforeunload",u(this,this.handleWindowEvent),!1);window.addEventListener("devicemotion",u(this,this.handleSensorEvent),!1);CanvasRenderingContext2D.prototype.isPointInStroke||(CanvasRenderingContext2D.prototype.isPointInStroke=
function(a,b,c){return!1});CanvasRenderingContext2D.prototype.isPointInPath||(CanvasRenderingContext2D.prototype.isPointInPath=function(a,b,c){return!1});0=="performance"in window&&(window.performance={});if(0=="now"in window.performance){var a=Date.now();performance.timing&&performance.timing.navigationStart&&(a=performance.timing.navigationStart);window.performance.now=function(){return Date.now()-a}}for(var b=0,c=["ms","moz","webkit","o"],d=0;d<c.length&&!window.requestAnimationFrame;++d)window.requestAnimationFrame=
window[c[d]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[c[d]+"CancelAnimationFrame"]||window[c[d]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(a,c){var d=(new Date).getTime(),e=Math.max(0,16-(d-b));c=window.setTimeout(function(){a(d+e)},e);b=d+e;return c});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)});window.requestAnimFrame=window.requestAnimationFrame;this.lastUpdate=(new Date).getTime();
this.handleApplicationEvent();return 0},exit:function(){},handleApplicationEvent:function(a){a=0;for(var b=this.parent.__windows;a<b.length;){var c=b[a];++a;c.__backend.updateSize()}this.updateGameDevices();this.currentUpdate=(new Date).getTime();if(this.currentUpdate>=this.nextUpdate){this.deltaTime=this.currentUpdate-this.lastUpdate;a=0;for(b=this.parent.__windows;a<b.length;)c=b[a],++a,this.parent.onUpdate.dispatch(this.deltaTime|0),null!=c.context&&c.onRender.dispatch(c.context);this.nextUpdate=
0>this.framePeriod?this.currentUpdate:this.currentUpdate-this.currentUpdate%this.framePeriod+this.framePeriod;this.lastUpdate=this.currentUpdate}window.requestAnimationFrame(u(this,this.handleApplicationEvent))},handleKeyEvent:function(a){if(null!=this.parent.__window){var b=this.convertKeyCode(null!=a.keyCode?a.keyCode:a.which),c=(a.shiftKey?3:0)|(a.ctrlKey?192:0)|(a.altKey?768:0)|(a.metaKey?3072:0);"keydown"==a.type?(this.parent.__window.onKeyDown.dispatch(b,c),this.parent.__window.onKeyDown.canceled&&
a.cancelable&&a.preventDefault()):(this.parent.__window.onKeyUp.dispatch(b,c),this.parent.__window.onKeyUp.canceled&&a.cancelable&&a.preventDefault())}},handleSensorEvent:function(a){this.accelerometer.onUpdate.dispatch(a.accelerationIncludingGravity.x,a.accelerationIncludingGravity.y,a.accelerationIncludingGravity.z)},handleWindowEvent:function(a){if(null!=this.parent.__window)switch(a.type){case "blur":this.parent.__window.onFocusOut.dispatch();this.parent.__window.onDeactivate.dispatch();break;
case "focus":this.parent.__window.onFocusIn.dispatch();this.parent.__window.onActivate.dispatch();break;case "resize":this.parent.__window.__backend.handleResizeEvent(a)}},updateGameDevices:function(){var a=sc.__getDeviceData();if(null!=a)for(var b,c,d,e,f,k=0,m=a.length;k<m;)if(b=k++,e=a[b],null!=e){if(!this.gameDeviceCache.h.hasOwnProperty(b)){f=new Ih;f.id=b;f.connected=e.connected;c=0;for(d=e.buttons.length;c<d;){var h=c++;f.buttons.push(e.buttons[h].value)}c=0;for(d=e.axes.length;c<d;)h=c++,
f.axes.push(e.axes[h]);"standard"==e.mapping&&(f.isGamepad=!0);this.gameDeviceCache.h[b]=f;e.connected&&(sc.__connect(b),f.isGamepad&&lc.__connect(b))}f=this.gameDeviceCache.h[b];d=sc.devices.h[b];c=lc.devices.h[b];if(e.connected){for(var n=0,K=e.buttons.length;n<K;){var l=n++;h=e.buttons[l].value;if(h!=f.buttons[l]){if(6==l)d.onAxisMove.dispatch(e.axes.length,h),null!=c&&c.onAxisMove.dispatch(4,h);else if(7==l)d.onAxisMove.dispatch(e.axes.length+1,h),null!=c&&c.onAxisMove.dispatch(5,h);else if(0<
h?d.onButtonDown.dispatch(l):d.onButtonUp.dispatch(l),null!=c){switch(l){case 0:b=0;break;case 1:b=1;break;case 2:b=2;break;case 3:b=3;break;case 4:b=9;break;case 5:b=10;break;case 8:b=4;break;case 9:b=6;break;case 10:b=7;break;case 11:b=8;break;case 12:b=11;break;case 13:b=12;break;case 14:b=13;break;case 15:b=14;break;case 16:b=5;break;default:continue}0<h?c.onButtonDown.dispatch(b):c.onButtonUp.dispatch(b)}f.buttons[l]=h}}b=0;for(h=e.axes.length;b<h;)n=b++,e.axes[n]!=f.axes[n]&&(d.onAxisMove.dispatch(n,
e.axes[n]),null!=c&&c.onAxisMove.dispatch(n,e.axes[n]),f.axes[n]=e.axes[n])}else f.connected&&(f.connected=!1,sc.__disconnect(b),lc.__disconnect(b))}},__class__:Ia};var ha=function(){this.onCreateWindow=new Jh;this.onUpdate=new yf;this.onExit=new yf;null==ha.current&&(ha.current=this);this.meta=new Ra;this.modules=[];this.__windowByID=new Zb;this.__windows=[];this.__backend=new Ia(this);this.__registerLimeModule(this);this.__preloader=new Kh;this.__preloader.onProgress.add(u(this,this.onPreloadProgress));
this.__preloader.onComplete.add(u(this,this.onPreloadComplete))};g["lime.app.Application"]=ha;ha.__name__="lime.app.Application";ha.__super__=Ca;ha.prototype=v(Ca.prototype,{meta:null,modules:null,onUpdate:null,onCreateWindow:null,__backend:null,__preloader:null,__window:null,__windowByID:null,__windows:null,addModule:function(a){a.__registerLimeModule(this);this.modules.push(a)},exec:function(){ha.current=this;return this.__backend.exec()},onGamepadAxisMove:function(a,b,c){},onGamepadButtonDown:function(a,
b){},onGamepadButtonUp:function(a,b){},onGamepadConnect:function(a){},onGamepadDisconnect:function(a){},onJoystickAxisMove:function(a,b,c){},onJoystickButtonDown:function(a,b){},onJoystickButtonUp:function(a,b){},onJoystickConnect:function(a){},onJoystickDisconnect:function(a){},onJoystickHatMove:function(a,b,c){},onJoystickTrackballMove:function(a,b,c,d){},onKeyDown:function(a,b){},onKeyUp:function(a,b){},onModuleExit:function(a){},onMouseDown:function(a,b,c){},onMouseMove:function(a,b){},onMouseMoveRelative:function(a,
b){},onMouseUp:function(a,b,c){},onMouseWheel:function(a,b,c){},onPreloadComplete:function(){},onPreloadProgress:function(a,b){},onRenderContextLost:function(){},onRenderContextRestored:function(a){},onTextEdit:function(a,b,c){},onTextInput:function(a){},onTouchCancel:function(a){},onTouchEnd:function(a){},onTouchMove:function(a){},onTouchStart:function(a){},onWindowActivate:function(){},onWindowClose:function(){},onWindowCreate:function(){},onWindowDeactivate:function(){},onWindowDropFile:function(a){},
onWindowEnter:function(){},onWindowExpose:function(){},onWindowFocusIn:function(){},onWindowFocusOut:function(){},onWindowFullscreen:function(){},onWindowLeave:function(){},onWindowMove:function(a,b){},onWindowMinimize:function(){},onWindowResize:function(a,b){},onWindowRestore:function(){},render:function(a){},update:function(a){},__registerLimeModule:function(a){a.onUpdate.add(u(this,this.update));a.onExit.add(u(this,this.onModuleExit),!1,0);a.onExit.add(u(this,this.__onModuleExit),!1,0);for(a=
lc.devices.iterator();a.hasNext();){var b=a.next();this.__onGamepadConnect(b)}lc.onConnect.add(u(this,this.__onGamepadConnect));for(a=sc.devices.iterator();a.hasNext();)b=a.next(),this.__onJoystickConnect(b);sc.onConnect.add(u(this,this.__onJoystickConnect));Fc.onCancel.add(u(this,this.onTouchCancel));Fc.onStart.add(u(this,this.onTouchStart));Fc.onMove.add(u(this,this.onTouchMove));Fc.onEnd.add(u(this,this.onTouchEnd))},__removeWindow:function(a){null!=a&&this.__windowByID.h.hasOwnProperty(a.id)&&
(this.__window==a&&(this.__window=null),ra.remove(this.__windows,a),this.__windowByID.remove(a.id),a.close(),0==this.__windows.length&&jc.exit(0))},__onGamepadConnect:function(a){this.onGamepadConnect(a);var b=u(this,this.onGamepadAxisMove);a.onAxisMove.add(function(c,d){b(a,c,d)});var c=u(this,this.onGamepadButtonDown);a.onButtonDown.add(function(b){c(a,b)});var d=u(this,this.onGamepadButtonUp);a.onButtonUp.add(function(b){d(a,b)});var e=u(this,this.onGamepadDisconnect);a.onDisconnect.add(function(){e(a)})},
__onJoystickConnect:function(a){this.onJoystickConnect(a);var b=u(this,this.onJoystickAxisMove);a.onAxisMove.add(function(c,d){b(a,c,d)});var c=u(this,this.onJoystickButtonDown);a.onButtonDown.add(function(b){c(a,b)});var d=u(this,this.onJoystickButtonUp);a.onButtonUp.add(function(b){d(a,b)});var e=u(this,this.onJoystickDisconnect);a.onDisconnect.add(function(){e(a)});var f=u(this,this.onJoystickHatMove);a.onHatMove.add(function(b,c){f(a,b,c)});var k=u(this,this.onJoystickTrackballMove);a.onTrackballMove.add(function(b,
c,d){k(a,b,c,d)})},__onModuleExit:function(a){this.__backend.exit()},__onWindowClose:function(a){if(this.__window==a)this.onWindowClose();this.__removeWindow(a)},__class__:ha});var J=function(){};g.ApplicationMain=J;J.__name__="ApplicationMain";J.main=function(){jc.__registerEntryPoint("View",J.create)};J.create=function(a){var b=new Lh;tc.init(a);var c=b.meta;null!=F.build?c.setReserved("build","2"):c.h.build="2";c=b.meta;null!=F.company?c.setReserved("company",""):c.h.company="";c=b.meta;null!=
F.file?c.setReserved("file","View"):c.h.file="View";c=b.meta;null!=F.name?c.setReserved("name","Away3D Basic View"):c.h.name="Away3D Basic View";c=b.meta;null!=F.packageName?c.setReserved("packageName","away3d.samples.basicview"):c.h.packageName="away3d.samples.basicview";c=b.meta;null!=F.version?c.setReserved("version","1.0.0"):c.h.version="1.0.0";c={allowHighDPI:!1,alwaysOnTop:!1,borderless:!1,element:null,frameRate:60,height:0,hidden:!1,maximized:!1,minimized:!1,parameters:{},resizable:!0,title:"Away3D Basic View",
width:0,x:null,y:null,context:{antialiasing:0,background:0,colorDepth:32,depth:!0,hardware:!0,stencil:!0,type:null,vsync:!1}};if(null==b.__window&&null!=a)for(var d=0,e=Na.fields(a);d<e.length;){var f=e[d];++d;Object.prototype.hasOwnProperty.call(c,f)?c[f]=Na.field(a,f):Object.prototype.hasOwnProperty.call(c.context,f)&&(c.context[f]=Na.field(a,f))}b.createWindow(c);var k=new Mh(new Nh);b.__preloader.onProgress.add(function(a,b){k.update(a,b)});b.__preloader.onComplete.add(function(){k.start()});
var m=Ka.__cast(b.__window,Ee).stage;k.onComplete.add(function(){J.start(m)});a=0;for(c=tc.preloadLibraries;a<c.length;)d=c[a],++a,b.__preloader.addLibrary(d);a=0;for(c=tc.preloadLibraryNames;a<c.length;)d=c[a],++a,b.__preloader.addLibraryName(d);b.__preloader.load();b.exec()};J.start=function(a){try{var b=a.getChildAt(0);null!=b&&b instanceof ma||(b=new yd,a.addChild(b));new Xb(b);a.dispatchEvent(new R("resize",!1,!1));a.window.__fullscreen&&a.dispatchEvent(new Fe("fullScreen",!1,!1,!0,!0))}catch(c){ab.lastException=
c,a.__handleError(c instanceof W?c.val:c)}};var T=function(){};g["openfl.events.IEventDispatcher"]=T;T.__name__="openfl.events.IEventDispatcher";T.__isInterface__=!0;var aa=function(a){null!=a&&(this.__targetDispatcher=a)};g["openfl.events.EventDispatcher"]=aa;aa.__name__="openfl.events.EventDispatcher";aa.__interfaces__=[T];aa.prototype={__eventMap:null,__iterators:null,__targetDispatcher:null,addEventListener:function(a,b,c,d,e){null==d&&(d=0);null==c&&(c=!1);if(null!=b)if(null==this.__eventMap&&
(this.__eventMap=new Ra,this.__iterators=new Ra),e=this.__eventMap,null!=F[a]?e.existsReserved(a):e.h.hasOwnProperty(a)){e=this.__eventMap;e=null!=F[a]?e.getReserved(a):e.h[a];for(var f=0,k=e.length;f<k;){var m=f++;if(e[m].match(b,c))return}f=this.__iterators;a=null!=F[a]?f.getReserved(a):f.h[a];for(f=0;f<a.length;)k=a[f],++f,k.active&&k.copy();this.__addListenerByPriority(e,new dg(b,c,d))}else e=[],e.push(new dg(b,c,d)),b=new eg(e),c=this.__eventMap,null!=F[a]?c.setReserved(a,e):c.h[a]=e,c=this.__iterators,
b=[b],null!=F[a]?c.setReserved(a,b):c.h[a]=b},dispatchEvent:function(a){a.target=null!=this.__targetDispatcher?this.__targetDispatcher:this;return this.__dispatchEvent(a)},hasEventListener:function(a){if(null==this.__eventMap)return!1;var b=this.__eventMap;return null!=F[a]?b.existsReserved(a):b.h.hasOwnProperty(a)},removeEventListener:function(a,b,c){null==c&&(c=!1);if(null!=this.__eventMap&&null!=b){var d=this.__eventMap;d=null!=F[a]?d.getReserved(a):d.h[a];if(null!=d){var e=this.__iterators;e=
null!=F[a]?e.getReserved(a):e.h[a];for(var f=0,k=d.length;f<k;){var m=f++;if(d[m].match(b,c)){for(b=0;b<e.length;)c=e[b],++b,c.remove(d[m],m);d.splice(m,1);break}}0==d.length&&(this.__eventMap.remove(a),this.__iterators.remove(a));a=this.__eventMap;(new ij(a,a.arrayKeys())).hasNext()||(this.__iterators=this.__eventMap=null)}}},__dispatchEvent:function(a){if(null==this.__eventMap||null==a)return!0;var b=a.type,c=this.__eventMap;c=null!=F[b]?c.getReserved(b):c.h[b];if(null==c)return!0;null==a.target&&
(a.target=null!=this.__targetDispatcher?this.__targetDispatcher:this);a.currentTarget=this;var d=1==a.eventPhase,e=this.__iterators;b=null!=F[b]?e.getReserved(b):e.h[b];e=b[0];e.active&&(e=new eg(c),b.push(e));e.start();for(var f=e;f.hasNext();){var k=f.next();if(null!=k&&k.useCapture==d&&(k.callback(a),a.__isCanceledNow))break}e.stop();e!=b[0]?ra.remove(b,e):e.reset(c);return!a.isDefaultPrevented()},__addListenerByPriority:function(a,b){for(var c=a.length,d=c,e=0;e<c;){var f=e++;if(a[f].priority<
b.priority){d=f;break}}a.splice(d,0,b)},__class__:aa};var X=function(){};g["openfl.display.IBitmapDrawable"]=X;X.__name__="openfl.display.IBitmapDrawable";X.__isInterface__=!0;X.prototype={__renderTransform:null,__worldAlpha:null,__worldColorTransform:null,__getBounds:null,__renderCairo:null,__renderCanvas:null,__renderDOM:null,__renderGL:null,__update:null,__mask:null,__scrollRect:null,__class__:X};var M={};g["openfl._Vector.Vector_Impl_"]=M;M.__name__="openfl._Vector.Vector_Impl_";M.toBoolVector=
function(a,b,c,d){return new fg(b,c,d)};M.toIntVector=function(a,b,c,d){return new Se(b,c,d)};M.toFloatVector=function(a,b,c,d){return new cf(b,c,d,!0)};M.toObjectVector=function(a,b,c,d){return new Zd(b,c,d,!0)};M.toNullVector=function(a,b,c,d){return new Zd(b,c,d,!0)};var ua=function(a,b,c){this.__pool=new ja;this.inactiveObjects=this.activeObjects=0;this.__inactiveObject1=this.__inactiveObject0=null;this.__inactiveObjectList=new ia;null!=a&&(this.create=a);null!=b&&(this.clean=b);null!=c&&this.set_size(c)};
g["lime.utils.ObjectPool"]=ua;ua.__name__="lime.utils.ObjectPool";ua.prototype={activeObjects:null,inactiveObjects:null,__inactiveObject0:null,__inactiveObject1:null,__inactiveObjectList:null,__pool:null,__size:null,clean:function(a){},create:function(){return null},get:function(){var a=null;if(0<this.inactiveObjects)null!=this.__inactiveObject0?(a=this.__inactiveObject0,this.__inactiveObject0=null):null!=this.__inactiveObject1?(a=this.__inactiveObject1,this.__inactiveObject1=null):(a=this.__inactiveObjectList.pop(),
0<this.__inactiveObjectList.length&&(this.__inactiveObject0=this.__inactiveObjectList.pop()),0<this.__inactiveObjectList.length&&(this.__inactiveObject1=this.__inactiveObjectList.pop())),this.inactiveObjects--,this.activeObjects++;else if(null==this.__size||this.activeObjects<this.__size)a=this.create(),null!=a&&(this.__pool.set(a,!0),this.activeObjects++);return a},release:function(a){this.activeObjects--;null==this.__size||this.activeObjects+this.inactiveObjects<this.__size?(this.clean(a),null==
this.__inactiveObject0?this.__inactiveObject0=a:null==this.__inactiveObject1?this.__inactiveObject1=a:this.__inactiveObjectList.add(a),this.inactiveObjects++):this.__pool.remove(a)},__removeInactive:function(a){if(!(0>=a||0==this.inactiveObjects)&&(null!=this.__inactiveObject0&&(this.__pool.remove(this.__inactiveObject0),this.__inactiveObject0=null,this.inactiveObjects--,--a),0!=a&&0!=this.inactiveObjects&&(null!=this.__inactiveObject1&&(this.__pool.remove(this.__inactiveObject1),this.__inactiveObject1=
null,this.inactiveObjects--,--a),0!=a&&0!=this.inactiveObjects)))for(var b=this.__inactiveObjectList.h;null!=b;){var c=b.item;b=b.next;this.__pool.remove(c);this.__inactiveObjectList.remove(c);this.inactiveObjects--;--a;if(0==a||0==this.inactiveObjects)break}},set_size:function(a){if(null==a)this.__size=null;else{var b=this.inactiveObjects+this.activeObjects;this.__size=a;if(b>a)this.__removeInactive(b-a);else if(a>b)for(var c=0,d=a-b;c<d;)if(c++,b=this.create(),null!=b)this.__pool.set(b,!1),this.__inactiveObjectList.add(b),
this.inactiveObjects++;else break}return a},__class__:ua};var $b=function(){};g["haxe.IMap"]=$b;$b.__name__="haxe.IMap";$b.__isInterface__=!0;$b.prototype={set:null,remove:null,__class__:$b};var ja=function(){this.h={__keys__:{}}};g["haxe.ds.ObjectMap"]=ja;ja.__name__="haxe.ds.ObjectMap";ja.__interfaces__=[$b];ja.prototype={h:null,set:function(a,b){var c=a.__id__;null==c&&(c=a.__id__=D.$haxeUID++);this.h[c]=b;this.h.__keys__[c]=a},remove:function(a){a=a.__id__;if(null==this.h.__keys__[a])return!1;
delete this.h[a];delete this.h.__keys__[a];return!0},keys:function(){var a=[],b;for(b in this.h.__keys__)this.h.hasOwnProperty(b)&&a.push(this.h.__keys__[b]);return ra.iter(a)},__class__:ja};var ia=function(){this.length=0};g["haxe.ds.List"]=ia;ia.__name__="haxe.ds.List";ia.prototype={h:null,q:null,length:null,add:function(a){a=new Oh(a,null);null==this.h?this.h=a:this.q.next=a;this.q=a;this.length++},push:function(a){this.h=a=new Oh(a,this.h);null==this.q&&(this.q=a);this.length++},pop:function(){if(null==
this.h)return null;var a=this.h.item;this.h=this.h.next;null==this.h&&(this.q=null);this.length--;return a},clear:function(){this.q=this.h=null;this.length=0},remove:function(a){for(var b=null,c=this.h;null!=c;){if(c.item==a)return null==b?this.h=c.next:b.next=c.next,this.q==c&&(this.q=b),this.length--,!0;b=c;c=c.next}return!1},iterator:function(){return new jj(this.h)},__class__:ia};var ba=function(){aa.call(this);this.__alpha=1;this.__blendMode=10;this.__cacheAsBitmap=!1;this.__transform=new va;
this.__visible=!0;this.__rotationSine=this.__rotation=0;this.__worldAlpha=this.__scaleY=this.__scaleX=this.__rotationCosine=1;this.__worldBlendMode=10;this.__worldTransform=new va;this.__worldColorTransform=new Nb;this.__renderTransform=new va;this.__worldVisible=!0;this.set_name("instance"+ ++ba.__instanceCount);null!=ba.__initStage&&(this.stage=ba.__initStage,ba.__initStage=null,this.stage.addChild(this))};g["openfl.display.DisplayObject"]=ba;ba.__name__="openfl.display.DisplayObject";ba.__interfaces__=
[X];ba.__super__=aa;ba.prototype=v(aa.prototype,{opaqueBackground:null,parent:null,stage:null,__alpha:null,__blendMode:null,__cacheAsBitmap:null,__cacheAsBitmapMatrix:null,__cacheBitmap:null,__cacheBitmapBackground:null,__cacheBitmapColorTransform:null,__cacheBitmapData:null,__cacheBitmapData2:null,__cacheBitmapData3:null,__cacheBitmapMatrix:null,__cacheBitmapRenderer:null,__cairo:null,__children:null,__customRenderClear:null,__customRenderEvent:null,__filters:null,__graphics:null,__isCacheBitmapRender:null,
__isMask:null,__loaderInfo:null,__mask:null,__maskTarget:null,__name:null,__objectTransform:null,__renderable:null,__renderDirty:null,__renderParent:null,__renderTransform:null,__renderTransformCache:null,__renderTransformChanged:null,__rotation:null,__rotationCosine:null,__rotationSine:null,__scale9Grid:null,__scaleX:null,__scaleY:null,__scrollRect:null,__shader:null,__tempPoint:null,__transform:null,__transformDirty:null,__visible:null,__worldAlpha:null,__worldAlphaChanged:null,__worldBlendMode:null,
__worldClip:null,__worldClipChanged:null,__worldColorTransform:null,__worldShader:null,__worldScale9Grid:null,__worldTransform:null,__worldVisible:null,__worldVisibleChanged:null,__worldTransformInvalid:null,__worldZ:null,__canvas:null,__context:null,__style:null,addEventListener:function(a,b,c,d,e){null==e&&(e=!1);null==d&&(d=0);null==c&&(c=!1);switch(a){case "activate":case "deactivate":case "enterFrame":case "exitFrame":case "frameConstructed":case "render":var f=ba.__broadcastEvents;if(null!=
F[a]?!f.existsReserved(a):!f.h.hasOwnProperty(a)){f=ba.__broadcastEvents;var k=[];null!=F[a]?f.setReserved(a,k):f.h[a]=k}f=ba.__broadcastEvents;f=null!=F[a]?f.getReserved(a):f.h[a];-1==f.indexOf(this)&&f.push(this);break;case "clearDOM":case "renderCairo":case "renderCanvas":case "renderDOM":case "renderOpenGL":null==this.__customRenderEvent&&(this.__customRenderEvent=new Ge(null),this.__customRenderEvent.objectColorTransform=new Nb,this.__customRenderEvent.objectMatrix=new va,this.__customRenderClear=
!0)}aa.prototype.addEventListener.call(this,a,b,c,d,e)},dispatchEvent:function(a){if(a instanceof Gb){var b=this.__getRenderTransform();a.stageX=a.localX*b.a+a.localY*b.c+b.tx;b=this.__getRenderTransform();a.stageY=a.localX*b.b+a.localY*b.d+b.ty}else a instanceof oc&&(b=this.__getRenderTransform(),a.stageX=a.localX*b.a+a.localY*b.c+b.tx,b=this.__getRenderTransform(),a.stageY=a.localX*b.b+a.localY*b.d+b.ty);a.target=this;return this.__dispatchWithCapture(a)},getBounds:function(a){var b=va.__pool.get();
if(null!=a&&a!=this){b.copyFrom(this.__getWorldTransform());var c=va.__pool.get();c.copyFrom(a.__getWorldTransform());c.invert();b.concat(c);va.__pool.release(c)}else b.identity();a=new ya;this.__getBounds(a,b);va.__pool.release(b);return a},globalToLocal:function(a){return this.__globalToLocal(a,new ob)},localToGlobal:function(a){return this.__getRenderTransform().transformPoint(a)},removeEventListener:function(a,b,c){null==c&&(c=!1);aa.prototype.removeEventListener.call(this,a,b,c);switch(a){case "activate":case "deactivate":case "enterFrame":case "exitFrame":case "frameConstructed":case "render":!this.hasEventListener(a)&&
(b=ba.__broadcastEvents,null!=F[a]?b.existsReserved(a):b.h.hasOwnProperty(a))&&(b=ba.__broadcastEvents,ra.remove(null!=F[a]?b.getReserved(a):b.h[a],this));break;case "clearDOM":case "renderCairo":case "renderCanvas":case "renderDOM":case "renderOpenGL":this.hasEventListener("clearDOM")||this.hasEventListener("renderCairo")||this.hasEventListener("renderCanvas")||this.hasEventListener("renderDOM")||this.hasEventListener("renderOpenGL")||(this.__customRenderEvent=null)}},__cleanup:function(){this.__context=
this.__canvas=this.__cairo=null;null!=this.__graphics&&this.__graphics.__cleanup();null!=this.__cacheBitmap&&(this.__cacheBitmap.__cleanup(),this.__cacheBitmap=null);null!=this.__cacheBitmapData&&(this.__cacheBitmapData.dispose(),this.__cacheBitmapData=null)},__dispatch:function(a){if(null!=this.__eventMap&&this.hasEventListener(a.type)){var b=aa.prototype.__dispatchEvent.call(this,a);return a.__isCanceled?!0:b}return!0},__dispatchChildren:function(a){},__dispatchEvent:function(a){var b=a.bubbles?
this.parent:null,c=aa.prototype.__dispatchEvent.call(this,a);if(a.__isCanceled)return!0;null!=b&&b!=this&&(a.eventPhase=3,null==a.target&&(a.target=this),b.__dispatchEvent(a));return c},__dispatchWithCapture:function(a){null==a.target&&(a.target=this);if(null!=this.parent)if(a.eventPhase=1,this.parent==this.stage)this.parent.__dispatch(a);else{for(var b=ba.__tempStack.get(),c=this.parent,d=0;null!=c;)b.set(d,c),c=c.parent,++d;c=0;for(var e=d;c<e;){var f=c++;b.get(d-f-1).__dispatch(a)}ba.__tempStack.release(b)}a.eventPhase=
2;return this.__dispatchEvent(a)},__enterFrame:function(a){},__getBounds:function(a,b){null!=this.__graphics&&this.__graphics.__getBounds(a,b)},__getCursor:function(){return null},__getFilterBounds:function(a,b){this.__getRenderBounds(a,b);if(null!=this.__filters){b=ya.__pool.get();for(var c=0,d=this.__filters;c<d.length;){var e=d[c];++c;b.__expand(-e.__leftExtension,-e.__topExtension,e.__leftExtension+e.__rightExtension,e.__topExtension+e.__bottomExtension)}a.width+=b.width;a.height+=b.height;a.x+=
b.x;a.y+=b.y;ya.__pool.release(b)}},__getInteractive:function(a){return!1},__getLocalBounds:function(a){this.__getBounds(a,this.__transform);a.x-=this.__transform.tx;a.y-=this.__transform.ty},__getRenderBounds:function(a,b){if(null==this.__scrollRect)this.__getBounds(a,b);else{var c=ya.__pool.get();c.copyFrom(this.__scrollRect);c.__transform(c,b);a.__expand(c.x,c.y,c.width,c.height);ya.__pool.release(c)}},__getRenderTransform:function(){this.__getWorldTransform();return this.__renderTransform},__getWorldTransform:function(){if(this.__transformDirty||
this.__worldTransformInvalid){var a=[],b=this;if(null==this.parent)this.__update(!0,!1);else for(;b!=this.stage&&(a.push(b),b=b.parent,null!=b););for(var c=a.length;0<=--c;)b=a[c],b.__update(!0,!1)}return this.__worldTransform},__globalToLocal:function(a,b){this.__getRenderTransform();if(a==b){var c=this.__renderTransform,d=c.a*c.d-c.b*c.c;if(0==d)a.x=-c.tx,a.y=-c.ty;else{var e=1/d*(c.c*(c.ty-a.y)+c.d*(a.x-c.tx));a.y=1/d*(c.a*(a.y-c.ty)+c.b*(c.tx-a.x));a.x=e}}else c=this.__renderTransform,d=c.a*c.d-
c.b*c.c,b.x=0==d?-c.tx:1/d*(c.c*(c.ty-a.y)+c.d*(a.x-c.tx)),c=this.__renderTransform,d=c.a*c.d-c.b*c.c,b.y=0==d?-c.ty:1/d*(c.a*(a.y-c.ty)+c.b*(c.tx-a.x));return b},__hitTest:function(a,b,c,d,e,f){if(null!=this.__graphics){if(!f.__visible||this.__isMask||null!=this.get_mask()&&!this.get_mask().__hitTestMask(a,b))return!1;if(this.__graphics.__hitTest(a,b,c,this.__getRenderTransform()))return null==d||e||d.push(f),!0}return!1},__hitTestMask:function(a,b){return null!=this.__graphics&&this.__graphics.__hitTest(a,
b,!0,this.__getRenderTransform())?!0:!1},__renderCairo:function(a){},__renderCairoMask:function(a){},__renderCanvas:function(a){if(null==this.get_mask()||0<this.get_mask().get_width()&&0<this.get_mask().get_height())if(this.__updateCacheBitmap(a,!1),null!=this.__cacheBitmap&&!this.__isCacheBitmapRender){var b=this.__cacheBitmap;if(b.__renderable){var c=a.__getAlpha(b.__worldAlpha);if(0<c&&null!=b.__bitmapData&&b.__bitmapData.__isValid&&b.__bitmapData.readable){var d=a.context;a.__setBlendMode(b.__worldBlendMode);
a.__pushMaskObject(b,!1);La.convertToCanvas(b.__bitmapData.image);d.globalAlpha=c;c=b.__scrollRect;a.setTransform(b.__renderTransform,d);a.__allowSmoothing&&b.smoothing||(d.imageSmoothingEnabled=!1);null==c?d.drawImage(b.__bitmapData.image.get_src(),0,0,b.__bitmapData.image.width,b.__bitmapData.image.height):d.drawImage(b.__bitmapData.image.get_src(),c.x,c.y,c.width,c.height);a.__allowSmoothing&&b.smoothing||(d.imageSmoothingEnabled=!0);a.__popMaskObject(b,!1)}}}else if(!(null==this.opaqueBackground&&
null==this.__graphics||!this.__renderable||0>=a.__getAlpha(this.__worldAlpha))&&(null!=this.opaqueBackground&&!this.__isCacheBitmapRender&&0<this.get_width()&&0<this.get_height()&&(a.__setBlendMode(this.__worldBlendMode),a.__pushMaskObject(this),b=a.context,a.setTransform(this.__renderTransform,b),d=this.opaqueBackground,b.fillStyle="rgb("+(d>>>16&255)+","+(d>>>8&255)+","+(d&255)+")",b.fillRect(0,0,this.get_width(),this.get_height()),a.__popMaskObject(this)),null!=this.__graphics&&this.__renderable)){var e=
a.__getAlpha(this.__worldAlpha);if(!(0>=e)){var f=this.__graphics;if(null!=f){A.render(f,a);c=f.__width;var k=f.__height;b=f.__canvas;if(null!=b&&f.__visible&&1<=c&&1<=k){var m=f.__worldTransform;d=a.context;var h=this.__scrollRect,n=this.__worldScale9Grid;if(null==h||0<h.width&&0<h.height){a.__setBlendMode(this.__worldBlendMode);a.__pushMaskObject(this);d.globalAlpha=e;if(null!=n&&0==m.b&&0==m.c){d.setTransform(1,0,0,1,m.tx,m.ty);var K=f.__bounds,l=f.__renderTransform.a,Bb=f.__renderTransform.d,
zd=m.a,H=m.d;m=Math.max(1,Math.round(n.x*l));f=Math.round(n.y*Bb);e=Math.max(1,Math.round((K.get_right()-n.get_right())*l));h=Math.round((K.get_bottom()-n.get_bottom())*Bb);l=Math.round(n.width*l);Bb=Math.round(n.height*Bb);var C=Math.round(n.x*zd),g=Math.round(n.y*H),p=Math.round((K.get_right()-n.get_right())*zd);n=Math.round((K.get_bottom()-n.get_bottom())*H);K=Math.round(c*zd)-C-p;zd=Math.round(k*H)-g-n;a.applySmoothing(d,!1);0!=l&&0!=Bb?(d.drawImage(b,0,0,m,f,0,0,C,g),d.drawImage(b,m,0,l,f,C,
0,K,g),d.drawImage(b,m+l,0,e,f,C+K,0,p,g),d.drawImage(b,0,f,m,Bb,0,g,C,zd),d.drawImage(b,m,f,l,Bb,C,g,K,zd),d.drawImage(b,m+l,f,e,Bb,C+K,g,p,zd),d.drawImage(b,0,f+Bb,m,h,0,g+zd,C,n),d.drawImage(b,m,f+Bb,l,h,C,g+zd,K,n),d.drawImage(b,m+l,f+Bb,e,h,C+K,g+zd,p,n)):0==l&&0!=Bb?(k=C+K+p,d.drawImage(b,0,0,c,f,0,0,k,g),d.drawImage(b,0,f,c,Bb,0,g,k,zd),d.drawImage(b,0,f+Bb,c,h,0,g+zd,k,n)):0==Bb&&0!=l&&(c=g+zd+n,d.drawImage(b,0,0,m,k,0,0,C,c),d.drawImage(b,m,0,l,k,C,0,K,c),d.drawImage(b,m+l,0,e,k,C+K,0,p,
c))}else a.setTransform(m,d),a.__isDOM&&(n=1/a.pixelRatio,d.scale(n,n)),d.drawImage(b,0,0,c,k);a.__popMaskObject(this)}}}}}this.__renderEvent(a)},__renderCanvasMask:function(a){null!=this.__graphics&&A.renderMask(this.__graphics,a)},__renderDOM:function(a){this.__updateCacheBitmap(a,!1);if(null==this.__cacheBitmap||this.__isCacheBitmapRender){null!=this.opaqueBackground&&!this.__isCacheBitmapRender&&0<this.get_width()&&this.get_height();var b=this.__graphics;if(null!=this.stage&&this.__worldVisible&&
this.__renderable&&null!=b){A.render(b,a.__canvasRenderer);if(b.__softwareDirty||this.__worldAlphaChanged||this.__canvas!=b.__canvas)null!=b.__canvas?this.__canvas!=b.__canvas&&(null!=this.__canvas&&a.element.removeChild(this.__canvas),this.__canvas=b.__canvas,this.__context=b.__context,a.__initializeElement(this,this.__canvas)):zf.clear(this,a);if(null!=this.__canvas){a.__pushMaskObject(this);var c=this.__renderTransform;this.__renderTransform=b.__worldTransform;b.__transformDirty&&(b.__transformDirty=
!1,this.__renderTransformChanged=!0);a.__updateClip(this);a.__applyStyle(this,!0,!0,!0);this.__renderTransform=c;a.__popMaskObject(this)}}else zf.clear(this,a)}else this.__renderDOMClear(a),this.__cacheBitmap.stage=this.stage,b=this.__cacheBitmap,null!=b.stage&&b.__worldVisible&&b.__renderable&&null!=b.__bitmapData&&b.__bitmapData.__isValid&&b.__bitmapData.readable?(a.__pushMaskObject(b),null!=b.__bitmapData.image.buffer.__srcImage?Lb.renderImage(b,a):Lb.renderCanvas(b,a),a.__popMaskObject(b)):Lb.clear(b,
a);this.__renderEvent(a)},__renderDOMClear:function(a){kj.clear(this,a)},__renderEvent:function(a){if(null!=this.__customRenderEvent&&this.__renderable){this.__customRenderEvent.allowSmoothing=a.__allowSmoothing;this.__customRenderEvent.objectMatrix.copyFrom(this.__renderTransform);this.__customRenderEvent.objectColorTransform.__copyFrom(this.__worldColorTransform);this.__customRenderEvent.renderer=a;switch(a.__type){case "cairo":this.__customRenderEvent.type="renderCairo";break;case "canvas":this.__customRenderEvent.type=
"renderCanvas";break;case "dom":this.__customRenderEvent.type=null!=this.stage&&this.__worldVisible?"renderDOM":"clearDOM";break;case "opengl":a.__cleared||a.__clear();a.setShader(this.__worldShader);a.__context3D.__flushGL();this.__customRenderEvent.type="renderOpenGL";break;default:return}a.__setBlendMode(this.__worldBlendMode);a.__pushMaskObject(this);this.dispatchEvent(this.__customRenderEvent);a.__popMaskObject(this);"opengl"==a.__type&&a.setViewport()}},__renderGL:function(a){this.__updateCacheBitmap(a,
!1);if(null!=this.__cacheBitmap&&!this.__isCacheBitmapRender)df.render(this.__cacheBitmap,a);else if(!(null==this.opaqueBackground&&null==this.__graphics||!this.__renderable||0>=this.__worldAlpha)){if(null!=this.opaqueBackground&&!this.__isCacheBitmapRender&&0<this.get_width()&&0<this.get_height()){a.__setBlendMode(this.__worldBlendMode);a.__pushMaskObject(this);var b=a.__context3D,c=ya.__pool.get();c.setTo(0,0,this.get_width(),this.get_height());a.__pushMaskRect(c,this.__renderTransform);var d=this.opaqueBackground;
b.clear((d>>>16&255)/255,(d>>>8&255)/255,(d&255)/255,1,0,0,1);a.__popMaskRect();a.__popMaskObject(this);ya.__pool.release(c)}null!=this.__graphics&&Te.render(this,a)}this.__renderEvent(a)},__renderGLMask:function(a){null!=this.__graphics&&Te.renderMask(this,a)},__setParentRenderDirty:function(){var a=null!=this.__renderParent?this.__renderParent:this.parent;null==a||a.__renderDirty||(a.__renderDirty=!0,a.__setParentRenderDirty())},__setStageReference:function(a){this.stage=a},__setTransformDirty:function(){this.__transformDirty||
(this.__transformDirty=!0,this.__setWorldTransformInvalid(),this.__setParentRenderDirty())},__setWorldTransformInvalid:function(){this.__worldTransformInvalid=!0},__shouldCacheHardware:function(a){return 1==a||null!=this.__filters?!0:0==a||null!=this.__graphics&&!ub.isCompatible(this.__graphics)?!1:null},__update:function(a,b){var c=null!=this.__renderParent?this.__renderParent:this.parent;this.__isMask&&null==c&&(c=this.__maskTarget);this.__renderable=this.__visible&&0!=this.__scaleX&&0!=this.__scaleY&&
!this.__isMask&&(null==c||!c.__isMask);this.__updateTransforms();this.__worldTransformInvalid=this.__transformDirty=!1;if(!a)if(ba.__supportDOM&&(this.__renderTransformChanged=!this.__renderTransform.equals(this.__renderTransformCache),null==this.__renderTransformCache?this.__renderTransformCache=this.__renderTransform.clone():this.__renderTransformCache.copyFrom(this.__renderTransform)),null!=c){if(ba.__supportDOM){var d=c.__worldVisible&&this.__visible;this.__worldVisibleChanged=this.__worldVisible!=
d;this.__worldVisible=d;d=this.get_alpha()*c.__worldAlpha;this.__worldAlphaChanged=this.__worldAlpha!=d;this.__worldAlpha=d}else this.__worldAlpha=this.get_alpha()*c.__worldAlpha;null!=this.__objectTransform?(this.__worldColorTransform.__copyFrom(this.__objectTransform.get_colorTransform()),this.__worldColorTransform.__combine(c.__worldColorTransform)):this.__worldColorTransform.__copyFrom(c.__worldColorTransform);this.__worldBlendMode=null==this.__blendMode||10==this.__blendMode?c.__worldBlendMode:
this.__blendMode;this.__worldShader=null==this.__shader?c.__shader:this.__shader;this.__worldScale9Grid=null==this.__scale9Grid?c.__scale9Grid:this.__scale9Grid}else this.__worldAlpha=this.get_alpha(),ba.__supportDOM&&(this.__worldVisibleChanged=this.__worldVisible!=this.__visible,this.__worldVisible=this.__visible,this.__worldAlphaChanged=this.__worldAlpha!=this.get_alpha()),null!=this.__objectTransform?this.__worldColorTransform.__copyFrom(this.__objectTransform.get_colorTransform()):this.__worldColorTransform.__identity(),
this.__worldBlendMode=this.__blendMode,this.__worldShader=this.__shader,this.__worldScale9Grid=this.__scale9Grid;b&&null!=this.get_mask()&&this.get_mask().__update(a,!0)},__updateCacheBitmap:function(a,b){if(this.__isCacheBitmapRender)return!1;var c=Nb.__pool.get();c.__copyFrom(this.__worldColorTransform);null!=a.__worldColorTransform&&c.__combine(a.__worldColorTransform);var d=!1;if(this.get_cacheAsBitmap()||"opengl"!=a.__type&&!c.__isDefault(!0)){d=null;var e=(b=null==this.__cacheBitmap||this.__renderDirty&&
(b||null!=this.__children&&0<this.__children.length)||this.opaqueBackground!=this.__cacheBitmapBackground)||null!=this.__graphics&&this.__graphics.__softwareDirty||!this.__cacheBitmapColorTransform.__equals(c,!0),f=b||null!=this.__graphics&&this.__graphics.__hardwareDirty,k=a.__type;if(e||f)"opengl"==k&&0==this.__shouldCacheHardware(null)&&(k="canvas"),!e||"canvas"!=k&&"cairo"!=k||(b=!0),f&&"opengl"==k&&(b=!0);e=b||!this.__cacheBitmap.__worldTransform.equals(this.__worldTransform);var m=null!=this.__filters;
if(m&&!b){f=0;for(var h=this.__filters;f<h.length;){var n=h[f];++f;if(n.__renderDirty){b=!0;break}}}null==this.__cacheBitmapMatrix&&(this.__cacheBitmapMatrix=new va);var K=null!=this.__cacheAsBitmapMatrix?this.__cacheAsBitmapMatrix:this.__renderTransform;b||K.a==this.__cacheBitmapMatrix.a&&K.b==this.__cacheBitmapMatrix.b&&K.c==this.__cacheBitmapMatrix.c&&K.d==this.__cacheBitmapMatrix.d||(b=!0);!b&&"opengl"!=a.__type&&null!=this.__cacheBitmapData&&null!=this.__cacheBitmapData.image&&this.__cacheBitmapData.image.version<
this.__cacheBitmapData.__textureVersion&&(b=!0);this.__cacheBitmapMatrix.copyFrom(K);this.__cacheBitmapMatrix.tx=0;var l=n=h=f=this.__cacheBitmapMatrix.ty=0,Bb=0,zd=0;if(e||b)d=ya.__pool.get(),this.__getFilterBounds(d,this.__cacheBitmapMatrix),n=Math.ceil(d.width),l=Math.ceil(d.height),Bb=0<d.x?Math.ceil(d.x):Math.floor(d.x),zd=0<d.y?Math.ceil(d.y):Math.floor(d.y),null!=this.__cacheBitmapData?n>this.__cacheBitmapData.width||l>this.__cacheBitmapData.height?(f=Math.ceil(Math.max(1.25*n,this.__cacheBitmapData.width)),
h=Math.ceil(Math.max(1.25*l,this.__cacheBitmapData.height)),b=!0):(f=this.__cacheBitmapData.width,h=this.__cacheBitmapData.height):(f=n,h=l);if(b)if(e=!0,this.__cacheBitmapBackground=this.opaqueBackground,.5<=n&&.5<=l){var g=null!=this.opaqueBackground&&(f!=n||h!=l),C=null!=this.opaqueBackground?-16777216|this.opaqueBackground:0,p=g?0:C,I="opengl"==a.__type;null==this.__cacheBitmapData||f>this.__cacheBitmapData.width||h>this.__cacheBitmapData.height?(this.__cacheBitmapData=new Mb(f,h,!0,p),null==
this.__cacheBitmap&&(this.__cacheBitmap=new ef),this.__cacheBitmap.__bitmapData=this.__cacheBitmapData,this.__cacheBitmapRenderer=null):this.__cacheBitmapData.__fillRect(this.__cacheBitmapData.rect,p,I);g&&(d.setTo(0,0,n,l),this.__cacheBitmapData.__fillRect(d,C,I))}else return Nb.__pool.release(c),this.__cacheBitmapRenderer=this.__cacheBitmapData3=this.__cacheBitmapData2=this.__cacheBitmapData=this.__cacheBitmap=null,!0;else this.__cacheBitmapData=this.__cacheBitmap.get_bitmapData(),this.__cacheBitmapData3=
this.__cacheBitmapData2=null;if(e||b)this.__cacheBitmap.__worldTransform.copyFrom(this.__worldTransform),K==this.__renderTransform?(this.__cacheBitmap.__renderTransform.identity(),this.__cacheBitmap.__renderTransform.tx=this.__renderTransform.tx+Bb,this.__cacheBitmap.__renderTransform.ty=this.__renderTransform.ty+zd):(this.__cacheBitmap.__renderTransform.copyFrom(this.__cacheBitmapMatrix),this.__cacheBitmap.__renderTransform.invert(),this.__cacheBitmap.__renderTransform.concat(this.__renderTransform),
this.__cacheBitmap.__renderTransform.tx+=Bb,this.__cacheBitmap.__renderTransform.ty+=zd);this.__cacheBitmap.smoothing=a.__allowSmoothing;this.__cacheBitmap.__renderable=this.__renderable;this.__cacheBitmap.__worldAlpha=this.__worldAlpha;this.__cacheBitmap.__worldBlendMode=this.__worldBlendMode;this.__cacheBitmap.__worldShader=this.__worldShader;this.__cacheBitmap.set_mask(this.__mask);if(b){if(null==this.__cacheBitmapRenderer||k!=this.__cacheBitmapRenderer.__type)"opengl"==k?this.__cacheBitmapRenderer=
new Ya(Ka.__cast(a,Ya).__context3D,this.__cacheBitmapData):(null==this.__cacheBitmapData.image&&(this.__cacheBitmapData=new Mb(f,h,!0,null!=this.opaqueBackground?-16777216|this.opaqueBackground:0),this.__cacheBitmap.__bitmapData=this.__cacheBitmapData),La.convertToCanvas(this.__cacheBitmapData.image),this.__cacheBitmapRenderer=new fe(this.__cacheBitmapData.image.buffer.__srcContext)),this.__cacheBitmapRenderer.__worldTransform=new va,this.__cacheBitmapRenderer.__worldColorTransform=new Nb;null==this.__cacheBitmapColorTransform&&
(this.__cacheBitmapColorTransform=new Nb);this.__cacheBitmapRenderer.__stage=this.stage;this.__cacheBitmapRenderer.__allowSmoothing=a.__allowSmoothing;this.__cacheBitmapRenderer.__setBlendMode(10);this.__cacheBitmapRenderer.__worldAlpha=1/this.__worldAlpha;this.__cacheBitmapRenderer.__worldTransform.copyFrom(this.__renderTransform);this.__cacheBitmapRenderer.__worldTransform.invert();this.__cacheBitmapRenderer.__worldTransform.concat(this.__cacheBitmapMatrix);this.__cacheBitmapRenderer.__worldTransform.tx-=
Bb;this.__cacheBitmapRenderer.__worldTransform.ty-=zd;this.__cacheBitmapRenderer.__worldColorTransform.__copyFrom(c);this.__cacheBitmapRenderer.__worldColorTransform.__invert();this.__isCacheBitmapRender=!0;if("opengl"==this.__cacheBitmapRenderer.__type){k=this.__cacheBitmapRenderer;K=k.__context3D;Bb=K.__state.renderToTexture;zd=K.__state.renderToTextureDepthStencil;g=K.__state.renderToTextureAntiAlias;C=K.__state.renderToTextureSurfaceSelector;p=a.__blendMode;a.__suspendClipAndMask();k.__copyShader(a);
this.__cacheBitmapData.__setUVRect(K,0,0,n,l);k.__setRenderTarget(this.__cacheBitmapData);null!=this.__cacheBitmapData.image&&(this.__cacheBitmapData.__textureVersion=this.__cacheBitmapData.image.version+1);this.__cacheBitmapData.__drawGL(this,k);if(m){var Yb=!1;m=0;for(I=this.__filters;m<I.length;){var y=I[m];++m;y.__preserveObject&&(Yb=!0)}m=this.__cacheBitmapData;y=null;null==this.__cacheBitmapData2||f>this.__cacheBitmapData2.width||h>this.__cacheBitmapData2.height?this.__cacheBitmapData2=new Mb(f,
h,!0,0):(this.__cacheBitmapData2.fillRect(this.__cacheBitmapData2.rect,0),null!=this.__cacheBitmapData2.image&&(this.__cacheBitmapData2.__textureVersion=this.__cacheBitmapData2.image.version+1));this.__cacheBitmapData2.__setUVRect(K,0,0,n,l);I=this.__cacheBitmapData2;Yb&&(null==this.__cacheBitmapData3||f>this.__cacheBitmapData3.width||h>this.__cacheBitmapData3.height?this.__cacheBitmapData3=new Mb(f,h,!0,0):(this.__cacheBitmapData3.fillRect(this.__cacheBitmapData3.rect,0),null!=this.__cacheBitmapData3.image&&
(this.__cacheBitmapData3.__textureVersion=this.__cacheBitmapData3.image.version+1)),this.__cacheBitmapData3.__setUVRect(K,0,0,n,l),y=this.__cacheBitmapData3);k.__setBlendMode(10);k.__worldAlpha=1;k.__worldTransform.identity();k.__worldColorTransform.__identity();f=0;for(h=this.__filters;f<h.length;){n=h[f];++f;n.__preserveObject&&(k.__setRenderTarget(y),k.__renderFilterPass(m,k.__defaultDisplayShader,n.__smooth));l=0;for(Yb=n.__numShaderPasses;l<Yb;){var r=l++;r=n.__initShader(k,r);k.__setBlendMode(n.__shaderBlendMode);
k.__setRenderTarget(I);k.__renderFilterPass(m,r,n.__smooth);r=m;m=I;I=r}n.__preserveObject&&(k.__setBlendMode(10),k.__setRenderTarget(m),k.__renderFilterPass(y,k.__defaultDisplayShader,n.__smooth,!1));n.__renderDirty=!1}this.__cacheBitmap.__bitmapData=m}a.__blendMode=10;a.__setBlendMode(p);a.__copyShader(k);null!=Bb?K.setRenderToTexture(Bb,zd,g,C):K.setRenderToBackBuffer();a.__resumeClipAndMask(k);a.setViewport();this.__cacheBitmapColorTransform.__copyFrom(c)}else{this.__cacheBitmapData.__drawCanvas(this,
this.__cacheBitmapRenderer);if(m){K=a=!1;n=0;for(l=this.__filters;n<l.length;)k=l[n],++n,k.__needSecondBitmapData&&(a=!0),k.__preserveObject&&(K=!0);n=this.__cacheBitmapData;k=null;a?(null==this.__cacheBitmapData2||null==this.__cacheBitmapData2.image||f>this.__cacheBitmapData2.width||h>this.__cacheBitmapData2.height?this.__cacheBitmapData2=new Mb(f,h,!0,0):this.__cacheBitmapData2.fillRect(this.__cacheBitmapData2.rect,0),l=this.__cacheBitmapData2):l=n;K&&(null==this.__cacheBitmapData3||null==this.__cacheBitmapData3.image||
f>this.__cacheBitmapData3.width||h>this.__cacheBitmapData3.height?this.__cacheBitmapData3=new Mb(f,h,!0,0):this.__cacheBitmapData3.fillRect(this.__cacheBitmapData3.rect,0),k=this.__cacheBitmapData3);null==this.__tempPoint&&(this.__tempPoint=new ob);f=this.__tempPoint;h=0;for(K=this.__filters;h<K.length;)zd=K[h],++h,zd.__preserveObject&&k.copyPixels(n,n.rect,f),Bb=zd.__applyFilter(l,n,n.rect,f),zd.__preserveObject&&Bb.draw(k,null,null!=this.__objectTransform?this.__objectTransform.get_colorTransform():
null),zd.__renderDirty=!1,a&&Bb==l&&(Bb=n,n=l,l=Bb);this.__cacheBitmapData!=n&&(Bb=this.__cacheBitmapData,this.__cacheBitmapData=n,this.__cacheBitmapData2=Bb,this.__cacheBitmap.__bitmapData=this.__cacheBitmapData,this.__cacheBitmapRenderer=null);this.__cacheBitmap.__imageVersion=this.__cacheBitmapData.__textureVersion}this.__cacheBitmapColorTransform.__copyFrom(c);this.__cacheBitmapColorTransform.__isDefault(!0)||(this.__cacheBitmapColorTransform.alphaMultiplier=1,this.__cacheBitmapData.colorTransform(this.__cacheBitmapData.rect,
this.__cacheBitmapColorTransform))}this.__isCacheBitmapRender=!1}(e||b)&&ya.__pool.release(d);d=e}else null!=this.__cacheBitmap&&("dom"==a.__type&&this.__cacheBitmap.__renderDOMClear(a),this.__cacheBitmapRenderer=this.__cacheBitmapColorTransform=this.__cacheBitmapData3=this.__cacheBitmapData2=this.__cacheBitmapData=this.__cacheBitmap=null,d=!0);Nb.__pool.release(c);return d},__updateTransforms:function(a){var b=null!=a;a=b?a:this.__transform;null==this.__worldTransform&&(this.__worldTransform=new va);
null==this.__renderTransform&&(this.__renderTransform=new va);var c=null!=this.__renderParent?this.__renderParent:this.parent;if(b||null==this.parent)this.__worldTransform.copyFrom(a);else{var d=this.parent.__worldTransform,e=this.__worldTransform;e.a=a.a*d.a+a.b*d.c;e.b=a.a*d.b+a.b*d.d;e.c=a.c*d.a+a.d*d.c;e.d=a.c*d.b+a.d*d.d;e.tx=a.tx*d.a+a.ty*d.c+d.tx;e.ty=a.tx*d.b+a.ty*d.d+d.ty}b||null==c?this.__renderTransform.copyFrom(a):(b=c.__renderTransform,c=this.__renderTransform,c.a=a.a*b.a+a.b*b.c,c.b=
a.a*b.b+a.b*b.d,c.c=a.c*b.a+a.d*b.c,c.d=a.c*b.b+a.d*b.d,c.tx=a.tx*b.a+a.ty*b.c+b.tx,c.ty=a.tx*b.b+a.ty*b.d+b.ty);null!=this.__scrollRect&&(a=this.__renderTransform,b=-this.__scrollRect.x,c=-this.__scrollRect.y,a.tx=b*a.a+c*a.c+a.tx,a.ty=b*a.b+c*a.d+a.ty)},get_alpha:function(){return this.__alpha},set_alpha:function(a){1<a&&(a=1);0>a&&(a=0);a==this.__alpha||this.get_cacheAsBitmap()||this.__renderDirty||(this.__renderDirty=!0,this.__setParentRenderDirty());return this.__alpha=a},get_blendMode:function(){return this.__blendMode},
set_blendMode:function(a){null==a&&(a=10);a==this.__blendMode||this.__renderDirty||(this.__renderDirty=!0,this.__setParentRenderDirty());return this.__blendMode=a},get_cacheAsBitmap:function(){return null==this.__filters?this.__cacheAsBitmap:!0},set_cacheAsBitmap:function(a){a==this.__cacheAsBitmap||this.__renderDirty||(this.__renderDirty=!0,this.__setParentRenderDirty());return this.__cacheAsBitmap=a},set_filters:function(a){null!=a&&0<a.length?(this.__filters=a,this.__renderDirty||(this.__renderDirty=
!0,this.__setParentRenderDirty())):null!=this.__filters&&(this.__filters=null,this.__renderDirty||(this.__renderDirty=!0,this.__setParentRenderDirty()));return a},get_height:function(){var a=ya.__pool.get();this.__getLocalBounds(a);var b=a.height;ya.__pool.release(a);return b},set_height:function(a){var b=ya.__pool.get(),c=va.__pool.get();c.identity();this.__getBounds(b,c);a!=b.height?this.set_scaleY(a/b.height):this.set_scaleY(1);ya.__pool.release(b);va.__pool.release(c);return a},get_loaderInfo:function(){return null!=
this.stage?vd.current.__loaderInfo:null},get_mask:function(){return this.__mask},set_mask:function(a){if(a==this.__mask)return a;a!=this.__mask&&(this.__setTransformDirty(),this.__renderDirty||(this.__renderDirty=!0,this.__setParentRenderDirty()));if(null!=this.__mask){this.__mask.__isMask=!1;this.__mask.__maskTarget=null;this.__mask.__setTransformDirty();var b=this.__mask;b.__renderDirty||(b.__renderDirty=!0,b.__setParentRenderDirty())}null!=a&&(a.__isMask=!0,a.__maskTarget=this,a.__setWorldTransformInvalid());
null!=this.__cacheBitmap&&this.__cacheBitmap.get_mask()!=a&&this.__cacheBitmap.set_mask(a);return this.__mask=a},get_mouseX:function(){var a=null!=this.stage?this.stage.__mouseX:vd.current.stage.__mouseX,b=null!=this.stage?this.stage.__mouseY:vd.current.stage.__mouseY,c=this.__getRenderTransform(),d=c.a*c.d-c.b*c.c;return 0==d?-c.tx:1/d*(c.c*(c.ty-b)+c.d*(a-c.tx))},get_mouseY:function(){var a=null!=this.stage?this.stage.__mouseX:vd.current.stage.__mouseX,b=null!=this.stage?this.stage.__mouseY:vd.current.stage.__mouseY,
c=this.__getRenderTransform(),d=c.a*c.d-c.b*c.c;return 0==d?-c.ty:1/d*(c.a*(b-c.ty)+c.b*(c.tx-a))},get_name:function(){return this.__name},set_name:function(a){return this.__name=a},get_rotation:function(){return this.__rotation},set_rotation:function(a){if(a!=this.__rotation){this.__rotation=a;var b=Math.PI/180*this.__rotation;this.__rotationSine=Math.sin(b);this.__rotationCosine=Math.cos(b);this.__transform.a=this.__rotationCosine*this.__scaleX;this.__transform.b=this.__rotationSine*this.__scaleX;
this.__transform.c=-this.__rotationSine*this.__scaleY;this.__transform.d=this.__rotationCosine*this.__scaleY;this.__setTransformDirty()}return a},set_scale9Grid:function(a){if(null==a&&null==this.__scale9Grid||null!=a&&null!=this.__scale9Grid&&this.__scale9Grid.equals(a))return a;null!=a?(null==this.__scale9Grid&&(this.__scale9Grid=new ya),this.__scale9Grid.copyFrom(a)):this.__scale9Grid=null;this.__renderDirty||(this.__renderDirty=!0,this.__setParentRenderDirty());return a},get_scaleX:function(){return this.__scaleX},
set_scaleX:function(a){if(a!=this.__scaleX)if(this.__scaleX=a,0==this.__transform.b)a!=this.__transform.a&&this.__setTransformDirty(),this.__transform.a=a;else{var b=this.__rotationCosine*a,c=this.__rotationSine*a;this.__transform.a==b&&this.__transform.b==c||this.__setTransformDirty();this.__transform.a=b;this.__transform.b=c}return a},get_scaleY:function(){return this.__scaleY},set_scaleY:function(a){if(a!=this.__scaleY)if(this.__scaleY=a,0==this.__transform.c)a!=this.__transform.d&&this.__setTransformDirty(),
this.__transform.d=a;else{var b=-this.__rotationSine*a,c=this.__rotationCosine*a;this.__transform.d==c&&this.__transform.c==b||this.__setTransformDirty();this.__transform.c=b;this.__transform.d=c}return a},get_transform:function(){null==this.__objectTransform&&(this.__objectTransform=new Af(this));return this.__objectTransform},set_transform:function(a){if(null==a)throw new W(new Hg("Parameter transform must be non-null."));null==this.__objectTransform&&(this.__objectTransform=new Af(this));this.__setTransformDirty();
this.__objectTransform.set_matrix(a.get_matrix());if(!this.__objectTransform.get_colorTransform().__equals(a.get_colorTransform(),!0)||!this.get_cacheAsBitmap()&&this.__objectTransform.get_colorTransform().alphaMultiplier!=a.get_colorTransform().alphaMultiplier)this.__objectTransform.get_colorTransform().__copyFrom(a.get_colorTransform()),this.__renderDirty||(this.__renderDirty=!0,this.__setParentRenderDirty());return this.__objectTransform},get_visible:function(){return this.__visible},set_visible:function(a){a==
this.__visible||this.__renderDirty||(this.__renderDirty=!0,this.__setParentRenderDirty());return this.__visible=a},get_width:function(){var a=ya.__pool.get();this.__getLocalBounds(a);var b=a.width;ya.__pool.release(a);return b},set_width:function(a){var b=ya.__pool.get(),c=va.__pool.get();c.identity();this.__getBounds(b,c);a!=b.width?this.set_scaleX(a/b.width):this.set_scaleX(1);ya.__pool.release(b);va.__pool.release(c);return a},get_x:function(){return this.__transform.tx},set_x:function(a){a!=this.__transform.tx&&
this.__setTransformDirty();return this.__transform.tx=a},get_y:function(){return this.__transform.ty},set_y:function(a){a!=this.__transform.ty&&this.__setTransformDirty();return this.__transform.ty=a},__class__:ba});var fa=function(){ba.call(this);this.doubleClickEnabled=!1;this.mouseEnabled=!0;this.needsSoftKeyboard=!1;this.__tabEnabled=null;this.__tabIndex=-1};g["openfl.display.InteractiveObject"]=fa;fa.__name__="openfl.display.InteractiveObject";fa.__super__=ba;fa.prototype=v(ba.prototype,{doubleClickEnabled:null,
mouseEnabled:null,needsSoftKeyboard:null,__tabEnabled:null,__tabIndex:null,__allowMouseFocus:function(){return this.get_tabEnabled()},__getInteractive:function(a){null!=a&&(a.push(this),null!=this.parent&&this.parent.__getInteractive(a));return!0},__hitTest:function(a,b,c,d,e,f){return!f.get_visible()||this.__isMask||e&&!this.mouseEnabled?!1:ba.prototype.__hitTest.call(this,a,b,c,d,e,f)},__tabTest:function(a){this.get_tabEnabled()&&a.push(this)},get_tabEnabled:function(){return 1==this.__tabEnabled?
!0:!1},get_tabIndex:function(){return this.__tabIndex},__class__:fa});var ma=function(){fa.call(this);this.__tabChildren=this.mouseChildren=!0;this.__children=[];this.__removedChildren=M.toObjectVector(null)};g["openfl.display.DisplayObjectContainer"]=ma;ma.__name__="openfl.display.DisplayObjectContainer";ma.__super__=fa;ma.prototype=v(fa.prototype,{mouseChildren:null,__removedChildren:null,__tabChildren:null,addChild:function(a){return this.addChildAt(a,this.get_numChildren())},addChildAt:function(a,
b){if(null==a)throw a=new Hg("Error #2007: Parameter child must be non-null."),a.errorID=2007,new W(a);if(a.stage==a)throw a=new Ig("Error #3783: A Stage object cannot be added as the child of another object."),a.errorID=3783,new W(a);if(b>this.__children.length||0>b)throw new W("Invalid index position "+b);if(a.parent==this)this.__children[b]!=a&&(ra.remove(this.__children,a),this.__children.splice(b,0,a),this.__renderDirty||(this.__renderDirty=!0,this.__setParentRenderDirty()));else{null!=a.parent&&
a.parent.removeChild(a);this.__children.splice(b,0,a);a.parent=this;(b=null!=this.stage&&null==a.stage)&&this.__setStageReference(this.stage);a.__setTransformDirty();a.__renderDirty||(a.__renderDirty=!0,a.__setParentRenderDirty());this.__renderDirty||(this.__renderDirty=!0,this.__setParentRenderDirty());var c=R.__pool.get();c.type="added";c.bubbles=!0;c.target=a;a.__dispatchWithCapture(c);R.__pool.release(c);b&&(c=new R("addedToStage",!1,!1),a.__dispatchWithCapture(c),a.__dispatchChildren(c))}return a},
getChildAt:function(a){return 0<=a&&a<this.__children.length?this.__children[a]:null},removeChild:function(a){if(null!=a&&a.parent==this){a.__setTransformDirty();a.__renderDirty||(a.__renderDirty=!0,a.__setParentRenderDirty());this.__renderDirty||(this.__renderDirty=!0,this.__setParentRenderDirty());var b=new R("removed",!0);a.__dispatchWithCapture(b);null!=this.stage&&(null!=a.stage&&this.stage.get_focus()==a&&this.stage.set_focus(null),b=new R("removedFromStage",!1,!1),a.__dispatchWithCapture(b),
a.__dispatchChildren(b),a.__setStageReference(null));a.parent=null;ra.remove(this.__children,a);this.__removedChildren.push(a);a.__setTransformDirty()}return a},__cleanup:function(){fa.prototype.__cleanup.call(this);for(var a=0,b=this.__children;a<b.length;){var c=b[a];++a;c.__cleanup()}for(a=this.__removedChildren.iterator();a.hasNext();)b=a.next(),null==b.stage&&b.__cleanup();this.__removedChildren.set_length(0)},__dispatchChildren:function(a){if(null!=this.__children)for(var b=0,c=this.__children;b<
c.length;){var d=c[b];++b;a.target=d;if(!d.__dispatchWithCapture(a))break;d.__dispatchChildren(a)}},__enterFrame:function(a){for(var b=0,c=this.__children;b<c.length;){var d=c[b];++b;d.__enterFrame(a)}},__getBounds:function(a,b){fa.prototype.__getBounds.call(this,a,b);if(0!=this.__children.length){for(var c=va.__pool.get(),d=0,e=this.__children;d<e.length;){var f=e[d];++d;if(0!=f.__scaleX&&0!=f.__scaleY){var k=f.__transform;c.a=k.a*b.a+k.b*b.c;c.b=k.a*b.b+k.b*b.d;c.c=k.c*b.a+k.d*b.c;c.d=k.c*b.b+k.d*
b.d;c.tx=k.tx*b.a+k.ty*b.c+b.tx;c.ty=k.tx*b.b+k.ty*b.d+b.ty;f.__getBounds(a,c)}}va.__pool.release(c)}},__getFilterBounds:function(a,b){fa.prototype.__getFilterBounds.call(this,a,b);if(null==this.__scrollRect&&0!=this.__children.length){for(var c=va.__pool.get(),d=0,e=this.__children;d<e.length;){var f=e[d];++d;if(0!=f.__scaleX&&0!=f.__scaleY&&!f.__isMask){var k=f.__transform;c.a=k.a*b.a+k.b*b.c;c.b=k.a*b.b+k.b*b.d;c.c=k.c*b.a+k.d*b.c;c.d=k.c*b.b+k.d*b.d;c.tx=k.tx*b.a+k.ty*b.c+b.tx;c.ty=k.tx*b.b+k.ty*
b.d+b.ty;f.__getFilterBounds(a,c)}}va.__pool.release(c)}},__getRenderBounds:function(a,b){if(null!=this.__scrollRect)fa.prototype.__getRenderBounds.call(this,a,b);else if(fa.prototype.__getBounds.call(this,a,b),0!=this.__children.length){for(var c=va.__pool.get(),d=0,e=this.__children;d<e.length;){var f=e[d];++d;if(0!=f.__scaleX&&0!=f.__scaleY&&!f.__isMask){var k=f.__transform;c.a=k.a*b.a+k.b*b.c;c.b=k.a*b.b+k.b*b.d;c.c=k.c*b.a+k.d*b.c;c.d=k.c*b.b+k.d*b.d;c.tx=k.tx*b.a+k.ty*b.c+b.tx;c.ty=k.tx*b.b+
k.ty*b.d+b.ty;f.__getRenderBounds(a,c)}}va.__pool.release(c)}},__hitTest:function(a,b,c,d,e,f){if(!f.get_visible()||this.__isMask||e&&!this.mouseEnabled&&!this.mouseChildren||null!=this.get_mask()&&!this.get_mask().__hitTestMask(a,b))return!1;if(null!=this.__scrollRect){var k=ob.__pool.get();k.setTo(a,b);var m=this.__getRenderTransform(),h=m.a*m.d-m.b*m.c;if(0==h)k.x=-m.tx,k.y=-m.ty;else{var n=1/h*(m.c*(m.ty-k.y)+m.d*(k.x-m.tx));k.y=1/h*(m.a*(k.y-m.ty)+m.b*(m.tx-k.x));k.x=n}if(!this.__scrollRect.containsPoint(k))return ob.__pool.release(k),
!1;ob.__pool.release(k)}k=this.__children.length;if(e)if(null==d||!this.mouseChildren)for(;0<=--k;){if(this.__children[k].__hitTest(a,b,c,null,!0,this.__children[k]))return null!=d&&d.push(f),!0}else{if(null!=d){e=d.length;for(h=!1;0<=--k&&!(((m=this.__children[k].__getInteractive(null))||this.mouseEnabled&&!h)&&this.__children[k].__hitTest(a,b,c,d,!0,this.__children[k])&&(h=!0,m&&d.length>e)););if(h)return d.splice(e,0,f),!0}}else{for(f=!1;0<=--k&&(!this.__children[k].__hitTest(a,b,c,d,!1,this.__children[k])||
(f=!0,null!=d)););return f}return!1},__hitTestMask:function(a,b){for(var c=this.__children.length;0<=--c;)if(this.__children[c].__hitTestMask(a,b))return!0;return!1},__renderCairo:function(a){},__renderCairoMask:function(a){},__renderCanvas:function(a){for(var b=this.__removedChildren.iterator();b.hasNext();){var c=b.next();null==c.stage&&c.__cleanup()}this.__removedChildren.set_length(0);if(!(!this.__renderable||0>=this.__worldAlpha||null!=this.get_mask()&&(0>=this.get_mask().get_width()||0>=this.get_mask().get_height()))&&
(fa.prototype.__renderCanvas.call(this,a),null==this.__cacheBitmap||this.__isCacheBitmapRender)){a.__pushMaskObject(this);if(null!=a.__stage){b=0;for(c=this.__children;b<c.length;){var d=c[b];++b;d.__renderCanvas(a);d.__renderDirty=!1}this.__renderDirty=!1}else for(b=0,c=this.__children;b<c.length;)d=c[b],++b,d.__renderCanvas(a);a.__popMaskObject(this)}},__renderCanvasMask:function(a){for(var b=this.__removedChildren.iterator();b.hasNext();){var c=b.next();null==c.stage&&c.__cleanup()}this.__removedChildren.set_length(0);
null!=this.__graphics&&A.renderMask(this.__graphics,a);b=0;for(c=this.__children;b<c.length;){var d=c[b];++b;d.__renderCanvasMask(a)}},__renderDOM:function(a){for(var b=this.__removedChildren.iterator();b.hasNext();){var c=b.next();null==c.stage&&c.__renderDOM(a)}for(b=this.__removedChildren.iterator();b.hasNext();)c=b.next(),null==c.stage&&c.__cleanup();this.__removedChildren.set_length(0);fa.prototype.__renderDOM.call(this,a);if(null==this.__cacheBitmap||this.__isCacheBitmapRender){a.__pushMaskObject(this);
if(null!=a.__stage){b=0;for(c=this.__children;b<c.length;){var d=c[b];++b;d.__renderDOM(a);d.__renderDirty=!1}this.__renderDirty=!1}else for(b=0,c=this.__children;b<c.length;)d=c[b],++b,d.__renderDOM(a);a.__popMaskObject(this)}},__renderDOMClear:function(a){for(var b=this.__removedChildren.iterator();b.hasNext();){var c=b.next();null==c.stage&&c.__renderDOMClear(a)}for(b=this.__removedChildren.iterator();b.hasNext();)c=b.next(),null==c.stage&&c.__cleanup();this.__removedChildren.set_length(0);b=0;
for(c=this.__children;b<c.length;){var d=c[b];++b;d.__renderDOMClear(a)}},__renderGL:function(a){for(var b=this.__removedChildren.iterator();b.hasNext();){var c=b.next();null==c.stage&&c.__cleanup()}this.__removedChildren.set_length(0);if(this.__renderable&&!(0>=this.__worldAlpha)&&(fa.prototype.__renderGL.call(this,a),null==this.__cacheBitmap||this.__isCacheBitmapRender)){if(0<this.__children.length)if(a.__pushMaskObject(this),null!=a.__stage){b=0;for(c=this.__children;b<c.length;){var d=c[b];++b;
d.__renderGL(a);d.__renderDirty=!1}this.__renderDirty=!1}else for(b=0,c=this.__children;b<c.length;)d=c[b],++b,d.__renderGL(a);0<this.__children.length&&a.__popMaskObject(this)}},__renderGLMask:function(a){for(var b=this.__removedChildren.iterator();b.hasNext();){var c=b.next();null==c.stage&&c.__cleanup()}this.__removedChildren.set_length(0);null!=this.__graphics&&Te.renderMask(this,a);b=0;for(c=this.__children;b<c.length;){var d=c[b];++b;d.__renderGLMask(a)}},__setStageReference:function(a){fa.prototype.__setStageReference.call(this,
a);if(null!=this.__children)for(var b=0,c=this.__children;b<c.length;){var d=c[b];++b;d.__setStageReference(a)}},__setWorldTransformInvalid:function(){if(!this.__worldTransformInvalid&&(this.__worldTransformInvalid=!0,null!=this.__children))for(var a=0,b=this.__children;a<b.length;){var c=b[a];++a;c.__setWorldTransformInvalid()}},__shouldCacheHardware:function(a){if(1==a)return!0;a=fa.prototype.__shouldCacheHardware.call(this,a);if(1==a)return!0;if(null!=this.__children)for(var b=0,c=this.__children;b<
c.length;){var d=c[b];++b;a=d.__shouldCacheHardware(a);if(1==a)return!0}return a},__tabTest:function(a){fa.prototype.__tabTest.call(this,a);if(this.get_tabChildren())for(var b,c=0,d=this.__children;c<d.length;){var e=d[c];++c;if(b=e.__getInteractive(null))b=e,b.__tabTest(a)}},__update:function(a,b){fa.prototype.__update.call(this,a,b);if(b){b=0;for(var c=this.__children;b<c.length;){var d=c[b];++b;d.__update(a,!0)}}},get_numChildren:function(){return this.__children.length},get_tabChildren:function(){return this.__tabChildren},
__class__:ma});var ka=function(){ma.call(this);this.__buttonMode=!1;this.useHandCursor=!0};g["openfl.display.Sprite"]=ka;ka.__name__="openfl.display.Sprite";ka.__super__=ma;ka.prototype=v(ma.prototype,{dropTarget:null,hitArea:null,useHandCursor:null,__buttonMode:null,__getCursor:function(){return this.__buttonMode&&this.useHandCursor?"button":null},__hitTest:function(a,b,c,d,e,f){if(e&&!this.mouseEnabled&&!this.mouseChildren)return!1;if(!f.get_visible()||this.__isMask||null!=this.get_mask()&&!this.get_mask().__hitTestMask(a,
b))return this.__hitTestHitArea(a,b,c,d,e,f);if(null!=this.__scrollRect){var k=ob.__pool.get();k.setTo(a,b);var m=this.__getRenderTransform(),h=m.a*m.d-m.b*m.c;if(0==h)k.x=-m.tx,k.y=-m.ty;else{var n=1/h*(m.c*(m.ty-k.y)+m.d*(k.x-m.tx));k.y=1/h*(m.a*(k.y-m.ty)+m.b*(m.tx-k.x));k.x=n}if(!this.__scrollRect.containsPoint(k))return ob.__pool.release(k),this.__hitTestHitArea(a,b,c,d,!0,f);ob.__pool.release(k)}return ma.prototype.__hitTest.call(this,a,b,c,d,e,f)?null!=d?e:!0:null==this.hitArea&&null!=this.__graphics&&
this.__graphics.__hitTest(a,b,c,this.__getRenderTransform())?(null==d||e&&!this.mouseEnabled||d.push(f),!0):this.__hitTestHitArea(a,b,c,d,e,f)},__hitTestHitArea:function(a,b,c,d,e,f){return null==this.hitArea||this.hitArea.mouseEnabled?!1:(this.hitArea.mouseEnabled=!0,a=this.hitArea.__hitTest(a,b,c,null,!0,f),this.hitArea.mouseEnabled=!1,null!=d&&a&&(d[d.length]=f),a)},__hitTestMask:function(a,b){return ma.prototype.__hitTestMask.call(this,a,b)||null!=this.__graphics&&this.__graphics.__hitTest(a,
b,!0,this.__getRenderTransform())?!0:!1},get_graphics:function(){null==this.__graphics&&(this.__graphics=new pc(this));return this.__graphics},get_tabEnabled:function(){return null==this.__tabEnabled?this.__buttonMode:this.__tabEnabled},__class__:ka});var uc=function(){this.tmpVec3_1=new w;this.tmpVec3_0=new w;this.zeroVector3D=new hb;ka.call(this);this.stage.set_scaleMode(2);this.stage.align=6;var a=new gg;this.stage.addChild(a);this.oimo_world=new lj(null,new w(0,-9.80665,0));B.setWorld(this.oimo_world);
this.view=new Sd;this.addChild(this.view);this.view.get_camera().set_z(-2500);this.view.get_camera().set_y(2E3);this.view.get_camera().lookAt(this.zeroVector3D);this.view.get_camera().get_lens().set_far(1E5);this.view.set_backgroundColor(10066329);this.view.get_camera().get_transform().appendRotation(-70,new hb(0,1,0),this.zeroVector3D);var b=new Bf(Cf.bitmapTexture("assets/floor_diffuse.jpg"));b.set_repeat(!0);b.set_animateUVs(!0);var c=new Bf(Cf.bitmapTexture("assets/marble.jpg"));c.set_repeat(!0);
c.set_animateUVs(!0);var d=new Bf(Cf.bitmapTexture("assets/orange.jpg"));d.set_repeat(!0);d.set_animateUVs(!0);this.ground=new $d(new Td(1700,10,1700),c);this.ground.get_subMeshes().get(0).set_scaleU(8);this.ground.get_subMeshes().get(0).set_scaleV(8);this.view.get_scene().addChild(this.ground);var e=this.ground,f=ib.STATIC,k=null;null==f&&(f=0);null==k&&(k=[0,0,0]);B.tmpVec3_1.x=k[0];B.tmpVec3_1.y=k[1];B.tmpVec3_1.z=k[2];var m=null;if(e.get_geometry()instanceof Td){var h=e.get_geometry(),n=h.get_width();
B.tmpVec3_0.x=n/2;var K=h.get_height();B.tmpVec3_0.y=K/2;var l=h.get_depth();B.tmpVec3_0.z=l/2;m=B.addBox(B.oimoWorld,B.tmpVec3_1,B.tmpVec3_0,f)}else if(e.get_geometry()instanceof md){var Bb=e.get_geometry().get_radius();m=B.addSphere(B.oimoWorld,B.tmpVec3_1,Bb,f)}else if(e.get_geometry()instanceof Bd){var g=e.get_geometry(),H=g.get_topRadius(),C=g.get_height()/2;m=B.addCylinder(B.oimoWorld,B.tmpVec3_1,H,C,f)}else if(e.get_geometry()instanceof Ud){var p=e.get_geometry(),I=p.get_radius(),Yb=p.get_height()/
2;m=B.addCapsule(B.oimoWorld,B.tmpVec3_1,I,Yb,f)}switch(f){case ib.DYNAMIC:B.oimoDynamicBodies.push(m);B.awayDynamicBodies.push(e);break;case ib.KINEMATIC:B.oimoKinematicBodies.push(m);B.awayKinematicBodies.push(e);break;case ib.STATIC:B.oimoStaticBodies.push(m),B.awayStaticBodies.push(e)}var y=new $d(new md(150),d);y.get_subMeshes().get(0).set_scaleU(4);y.get_subMeshes().get(0).set_scaleV(4);y.moveTo(-400,300,-400);this.view.get_scene().addChild(y);var r=ib.STATIC,t=[-400,300,-400];null==r&&(r=0);
null==t&&(t=[0,0,0]);B.tmpVec3_1.x=t[0];B.tmpVec3_1.y=t[1];B.tmpVec3_1.z=t[2];var oa=null;if(y.get_geometry()instanceof Td){var z=y.get_geometry(),q=z.get_width();B.tmpVec3_0.x=q/2;var A=z.get_height();B.tmpVec3_0.y=A/2;var O=z.get_depth();B.tmpVec3_0.z=O/2;oa=B.addBox(B.oimoWorld,B.tmpVec3_1,B.tmpVec3_0,r)}else if(y.get_geometry()instanceof md){var v=y.get_geometry().get_radius();oa=B.addSphere(B.oimoWorld,B.tmpVec3_1,v,r)}else if(y.get_geometry()instanceof Bd){var F=y.get_geometry(),x=F.get_topRadius(),
qa=F.get_height()/2;oa=B.addCylinder(B.oimoWorld,B.tmpVec3_1,x,qa,r)}else if(y.get_geometry()instanceof Ud){var Ia=y.get_geometry(),ja=Ia.get_radius(),Ca=Ia.get_height()/2;oa=B.addCapsule(B.oimoWorld,B.tmpVec3_1,ja,Ca,r)}switch(r){case ib.DYNAMIC:B.oimoDynamicBodies.push(oa);B.awayDynamicBodies.push(y);break;case ib.KINEMATIC:B.oimoKinematicBodies.push(oa);B.awayKinematicBodies.push(y);break;case ib.STATIC:B.oimoStaticBodies.push(oa),B.awayStaticBodies.push(y)}var M=new $d(new md(170),d);M.get_subMeshes().get(0).set_scaleU(4);
M.get_subMeshes().get(0).set_scaleV(4);M.moveTo(400,300,-400);this.view.get_scene().addChild(M);var D=ib.STATIC,ha=[400,300,-400];null==D&&(D=0);null==ha&&(ha=[0,0,0]);B.tmpVec3_1.x=ha[0];B.tmpVec3_1.y=ha[1];B.tmpVec3_1.z=ha[2];var J=null;if(M.get_geometry()instanceof Td){var N=M.get_geometry(),S=N.get_width();B.tmpVec3_0.x=S/2;var W=N.get_height();B.tmpVec3_0.y=W/2;var ba=N.get_depth();B.tmpVec3_0.z=ba/2;J=B.addBox(B.oimoWorld,B.tmpVec3_1,B.tmpVec3_0,D)}else if(M.get_geometry()instanceof md){var Y=
M.get_geometry().get_radius();J=B.addSphere(B.oimoWorld,B.tmpVec3_1,Y,D)}else if(M.get_geometry()instanceof Bd){var mb=M.get_geometry(),L=mb.get_topRadius(),aa=mb.get_height()/2;J=B.addCylinder(B.oimoWorld,B.tmpVec3_1,L,aa,D)}else if(M.get_geometry()instanceof Ud){var V=M.get_geometry(),Q=V.get_radius(),Ja=V.get_height()/2;J=B.addCapsule(B.oimoWorld,B.tmpVec3_1,Q,Ja,D)}switch(D){case ib.DYNAMIC:B.oimoDynamicBodies.push(J);B.awayDynamicBodies.push(M);break;case ib.KINEMATIC:B.oimoKinematicBodies.push(J);
B.awayKinematicBodies.push(M);break;case ib.STATIC:B.oimoStaticBodies.push(J),B.awayStaticBodies.push(M)}var U=new $d(new md(100),d);U.get_subMeshes().get(0).set_scaleU(4);U.get_subMeshes().get(0).set_scaleV(4);U.moveTo(400,300,400);this.view.get_scene().addChild(U);var fa=ib.STATIC,Pa=[400,300,400];null==fa&&(fa=0);null==Pa&&(Pa=[0,0,0]);B.tmpVec3_1.x=Pa[0];B.tmpVec3_1.y=Pa[1];B.tmpVec3_1.z=Pa[2];var ge=null;if(U.get_geometry()instanceof Td){var ia=U.get_geometry(),T=ia.get_width();B.tmpVec3_0.x=
T/2;var pa=ia.get_height();B.tmpVec3_0.y=pa/2;var G=ia.get_depth();B.tmpVec3_0.z=G/2;ge=B.addBox(B.oimoWorld,B.tmpVec3_1,B.tmpVec3_0,fa)}else if(U.get_geometry()instanceof md){var Ma=U.get_geometry().get_radius();ge=B.addSphere(B.oimoWorld,B.tmpVec3_1,Ma,fa)}else if(U.get_geometry()instanceof Bd){var Ue=U.get_geometry(),bc=Ue.get_topRadius(),Z=Ue.get_height()/2;ge=B.addCylinder(B.oimoWorld,B.tmpVec3_1,bc,Z,fa)}else if(U.get_geometry()instanceof Ud){var ma=U.get_geometry(),R=ma.get_radius(),ta=ma.get_height()/
2;ge=B.addCapsule(B.oimoWorld,B.tmpVec3_1,R,ta,fa)}switch(fa){case ib.DYNAMIC:B.oimoDynamicBodies.push(ge);B.awayDynamicBodies.push(U);break;case ib.KINEMATIC:B.oimoKinematicBodies.push(ge);B.awayKinematicBodies.push(U);break;case ib.STATIC:B.oimoStaticBodies.push(ge),B.awayStaticBodies.push(U)}var ec=new $d(new md(200),d);ec.get_subMeshes().get(0).set_scaleU(4);ec.get_subMeshes().get(0).set_scaleV(4);ec.moveTo(-400,300,400);this.view.get_scene().addChild(ec);var $a=ib.STATIC,Ta=[-400,300,400];null==
$a&&($a=0);null==Ta&&(Ta=[0,0,0]);B.tmpVec3_1.x=Ta[0];B.tmpVec3_1.y=Ta[1];B.tmpVec3_1.z=Ta[2];var sa=null;if(ec.get_geometry()instanceof Td){var X=ec.get_geometry(),la=X.get_width();B.tmpVec3_0.x=la/2;var da=X.get_height();B.tmpVec3_0.y=da/2;var na=X.get_depth();B.tmpVec3_0.z=na/2;sa=B.addBox(B.oimoWorld,B.tmpVec3_1,B.tmpVec3_0,$a)}else if(ec.get_geometry()instanceof md){var yb=ec.get_geometry().get_radius();sa=B.addSphere(B.oimoWorld,B.tmpVec3_1,yb,$a)}else if(ec.get_geometry()instanceof Bd){var Aa=
ec.get_geometry(),ff=Aa.get_topRadius(),ra=Aa.get_height()/2;sa=B.addCylinder(B.oimoWorld,B.tmpVec3_1,ff,ra,$a)}else if(ec.get_geometry()instanceof Ud){var qb=ec.get_geometry(),xa=qb.get_radius(),ua=qb.get_height()/2;sa=B.addCapsule(B.oimoWorld,B.tmpVec3_1,xa,ua,$a)}switch($a){case ib.DYNAMIC:B.oimoDynamicBodies.push(sa);B.awayDynamicBodies.push(ec);break;case ib.KINEMATIC:B.oimoKinematicBodies.push(sa);B.awayKinematicBodies.push(ec);break;case ib.STATIC:B.oimoStaticBodies.push(sa),B.awayStaticBodies.push(ec)}var ea=
new $d(new Td(200,200,200),d);ea.get_subMeshes().get(0).set_scaleU(4);ea.get_subMeshes().get(0).set_scaleV(4);ea.moveTo(0,400,0);ea.get_transform().appendRotation(Math.PI/6*57.295,ea.get_rightVector(),ea.get_position());ea.get_transform().appendRotation(Math.PI/5*57.295,ea.get_upVector(),ea.get_position());ea.get_transform().appendRotation(Math.PI/3*57.295,ea.get_forwardVector(),ea.get_position());this.view.get_scene().addChild(ea);var ya=ib.STATIC,Ka=[0,400,0];null==ya&&(ya=0);null==Ka&&(Ka=[0,0,
0]);B.tmpVec3_1.x=Ka[0];B.tmpVec3_1.y=Ka[1];B.tmpVec3_1.z=Ka[2];var wa=null;if(ea.get_geometry()instanceof Td){var Da=ea.get_geometry(),Na=Da.get_width();B.tmpVec3_0.x=Na/2;var va=Da.get_height();B.tmpVec3_0.y=va/2;var Ba=Da.get_depth();B.tmpVec3_0.z=Ba/2;wa=B.addBox(B.oimoWorld,B.tmpVec3_1,B.tmpVec3_0,ya)}else if(ea.get_geometry()instanceof md){var Ga=ea.get_geometry().get_radius();wa=B.addSphere(B.oimoWorld,B.tmpVec3_1,Ga,ya)}else if(ea.get_geometry()instanceof Bd){var He=ea.get_geometry(),Vd=He.get_topRadius(),
La=He.get_height()/2;wa=B.addCylinder(B.oimoWorld,B.tmpVec3_1,Vd,La,ya)}else if(ea.get_geometry()instanceof Ud){var Oa=ea.get_geometry(),Pb=Oa.get_radius(),Va=Oa.get_height()/2;wa=B.addCapsule(B.oimoWorld,B.tmpVec3_1,Pb,Va,ya)}switch(ya){case ib.DYNAMIC:B.oimoDynamicBodies.push(wa);B.awayDynamicBodies.push(ea);break;case ib.KINEMATIC:B.oimoKinematicBodies.push(wa);B.awayKinematicBodies.push(ea);break;case ib.STATIC:B.oimoStaticBodies.push(wa),B.awayStaticBodies.push(ea)}var ca=wa,Qa=Math.PI/6,pm=
Math.PI/5,qm=Math.PI/3;null==qm&&(qm=0);null==pm&&(pm=0);null==Qa&&(Qa=0);var Ra=Qa,Sa=pm,Ve=qm;w.numCreations++;var yc=Math.sin(Ra),nk=Math.sin(Sa),ad=Math.sin(Ve),P=Math.cos(Ra),Vb=Math.cos(Sa),Fb=Math.cos(Ve);ca._transform._rotation00=Vb*Fb;ca._transform._rotation01=-Vb*ad;ca._transform._rotation02=nk;ca._transform._rotation10=P*ad+Fb*yc*nk;ca._transform._rotation11=P*Fb-yc*nk*ad;ca._transform._rotation12=-Vb*yc;ca._transform._rotation20=yc*ad-P*Fb*nk;ca._transform._rotation21=Fb*yc+P*nk*ad;ca._transform._rotation22=
P*Vb;var Za=ca._transform._rotation00*ca._invLocalInertia00+ca._transform._rotation01*ca._invLocalInertia10+ca._transform._rotation02*ca._invLocalInertia20;var Im=ca._transform._rotation00*ca._invLocalInertia01+ca._transform._rotation01*ca._invLocalInertia11+ca._transform._rotation02*ca._invLocalInertia21;var Ya=ca._transform._rotation00*ca._invLocalInertia02+ca._transform._rotation01*ca._invLocalInertia12+ca._transform._rotation02*ca._invLocalInertia22;var E=ca._transform._rotation10*ca._invLocalInertia00+
ca._transform._rotation11*ca._invLocalInertia10+ca._transform._rotation12*ca._invLocalInertia20;var Ea=ca._transform._rotation10*ca._invLocalInertia01+ca._transform._rotation11*ca._invLocalInertia11+ca._transform._rotation12*ca._invLocalInertia21;var za=ca._transform._rotation10*ca._invLocalInertia02+ca._transform._rotation11*ca._invLocalInertia12+ca._transform._rotation12*ca._invLocalInertia22;var Ib=ca._transform._rotation20*ca._invLocalInertia00+ca._transform._rotation21*ca._invLocalInertia10+
ca._transform._rotation22*ca._invLocalInertia20;var bb=ca._transform._rotation20*ca._invLocalInertia01+ca._transform._rotation21*ca._invLocalInertia11+ca._transform._rotation22*ca._invLocalInertia21;var gc=ca._transform._rotation20*ca._invLocalInertia02+ca._transform._rotation21*ca._invLocalInertia12+ca._transform._rotation22*ca._invLocalInertia22;ca._invInertia00=Za;ca._invInertia01=Im;ca._invInertia02=Ya;ca._invInertia10=E;ca._invInertia11=Ea;ca._invInertia12=za;ca._invInertia20=Ib;ca._invInertia21=
bb;ca._invInertia22=gc;var Xa=ca._invInertia00*ca._transform._rotation00+ca._invInertia01*ca._transform._rotation01+ca._invInertia02*ca._transform._rotation02;var Fa=ca._invInertia00*ca._transform._rotation10+ca._invInertia01*ca._transform._rotation11+ca._invInertia02*ca._transform._rotation12;var Ha=ca._invInertia00*ca._transform._rotation20+ca._invInertia01*ca._transform._rotation21+ca._invInertia02*ca._transform._rotation22;var Ie=ca._invInertia10*ca._transform._rotation00+ca._invInertia11*ca._transform._rotation01+
ca._invInertia12*ca._transform._rotation02;var ab=ca._invInertia10*ca._transform._rotation10+ca._invInertia11*ca._transform._rotation11+ca._invInertia12*ca._transform._rotation12;var Hb=ca._invInertia10*ca._transform._rotation20+ca._invInertia11*ca._transform._rotation21+ca._invInertia12*ca._transform._rotation22;var hg=ca._invInertia20*ca._transform._rotation00+ca._invInertia21*ca._transform._rotation01+ca._invInertia22*ca._transform._rotation02;var ob=ca._invInertia20*ca._transform._rotation10+
ca._invInertia21*ca._transform._rotation11+ca._invInertia22*ca._transform._rotation12;var Ua=ca._invInertia20*ca._transform._rotation20+ca._invInertia21*ca._transform._rotation21+ca._invInertia22*ca._transform._rotation22;ca._invInertia00=Xa;ca._invInertia01=Fa;ca._invInertia02=Ha;ca._invInertia10=Ie;ca._invInertia11=ab;ca._invInertia12=Hb;ca._invInertia20=hg;ca._invInertia21=ob;ca._invInertia22=Ua;ca._invInertia00*=ca._rotFactor.x;ca._invInertia01*=ca._rotFactor.x;ca._invInertia02*=ca._rotFactor.x;
ca._invInertia10*=ca._rotFactor.y;ca._invInertia11*=ca._rotFactor.y;ca._invInertia12*=ca._rotFactor.y;ca._invInertia20*=ca._rotFactor.z;ca._invInertia21*=ca._rotFactor.z;ca._invInertia22*=ca._rotFactor.z;var Cb=ca._ptransform,Jb=ca._transform;Cb._positionX=Jb._positionX;Cb._positionY=Jb._positionY;Cb._positionZ=Jb._positionZ;Cb._rotation00=Jb._rotation00;Cb._rotation01=Jb._rotation01;Cb._rotation02=Jb._rotation02;Cb._rotation10=Jb._rotation10;Cb._rotation11=Jb._rotation11;Cb._rotation12=Jb._rotation12;
Cb._rotation20=Jb._rotation20;Cb._rotation21=Jb._rotation21;Cb._rotation22=Jb._rotation22;for(var Wa=ca._shapeList;null!=Wa;){var we=Wa._next,Cc=Wa._ptransform,Eb=Wa._localTransform,Db=ca._ptransform;var nb=Db._rotation00*Eb._rotation00+Db._rotation01*Eb._rotation10+Db._rotation02*Eb._rotation20;var tb=Db._rotation00*Eb._rotation01+Db._rotation01*Eb._rotation11+Db._rotation02*Eb._rotation21;var eb=Db._rotation00*Eb._rotation02+Db._rotation01*Eb._rotation12+Db._rotation02*Eb._rotation22;var Kb=Db._rotation10*
Eb._rotation00+Db._rotation11*Eb._rotation10+Db._rotation12*Eb._rotation20;var kb=Db._rotation10*Eb._rotation01+Db._rotation11*Eb._rotation11+Db._rotation12*Eb._rotation21;var Xb=Db._rotation10*Eb._rotation02+Db._rotation11*Eb._rotation12+Db._rotation12*Eb._rotation22;var pb=Db._rotation20*Eb._rotation00+Db._rotation21*Eb._rotation10+Db._rotation22*Eb._rotation20;var lb=Db._rotation20*Eb._rotation01+Db._rotation21*Eb._rotation11+Db._rotation22*Eb._rotation21;var Ub=Db._rotation20*Eb._rotation02+Db._rotation21*
Eb._rotation12+Db._rotation22*Eb._rotation22;Cc._rotation00=nb;Cc._rotation01=tb;Cc._rotation02=eb;Cc._rotation10=Kb;Cc._rotation11=kb;Cc._rotation12=Xb;Cc._rotation20=pb;Cc._rotation21=lb;Cc._rotation22=Ub;var Ob=Db._rotation00*Eb._positionX+Db._rotation01*Eb._positionY+Db._rotation02*Eb._positionZ;var $b=Db._rotation10*Eb._positionX+Db._rotation11*Eb._positionY+Db._rotation12*Eb._positionZ;var zb=Db._rotation20*Eb._positionX+Db._rotation21*Eb._positionY+Db._rotation22*Eb._positionZ;Cc._positionX=
Ob;Cc._positionY=$b;Cc._positionZ=zb;Cc._positionX+=Db._positionX;Cc._positionY+=Db._positionY;Cc._positionZ+=Db._positionZ;var Jd=Wa._transform,Tb=Wa._localTransform,Wb=ca._transform;var db=Wb._rotation00*Tb._rotation00+Wb._rotation01*Tb._rotation10+Wb._rotation02*Tb._rotation20;var cb=Wb._rotation00*Tb._rotation01+Wb._rotation01*Tb._rotation11+Wb._rotation02*Tb._rotation21;var xb=Wb._rotation00*Tb._rotation02+Wb._rotation01*Tb._rotation12+Wb._rotation02*Tb._rotation22;var jb=Wb._rotation10*Tb._rotation00+
Wb._rotation11*Tb._rotation10+Wb._rotation12*Tb._rotation20;var Gb=Wb._rotation10*Tb._rotation01+Wb._rotation11*Tb._rotation11+Wb._rotation12*Tb._rotation21;var Mb=Wb._rotation10*Tb._rotation02+Wb._rotation11*Tb._rotation12+Wb._rotation12*Tb._rotation22;var vb=Wb._rotation20*Tb._rotation00+Wb._rotation21*Tb._rotation10+Wb._rotation22*Tb._rotation20;var wb=Wb._rotation20*Tb._rotation01+Wb._rotation21*Tb._rotation11+Wb._rotation22*Tb._rotation21;var sb=Wb._rotation20*Tb._rotation02+Wb._rotation21*Tb._rotation12+
Wb._rotation22*Tb._rotation22;Jd._rotation00=db;Jd._rotation01=cb;Jd._rotation02=xb;Jd._rotation10=jb;Jd._rotation11=Gb;Jd._rotation12=Mb;Jd._rotation20=vb;Jd._rotation21=wb;Jd._rotation22=sb;var fb=Wb._rotation00*Tb._positionX+Wb._rotation01*Tb._positionY+Wb._rotation02*Tb._positionZ;var Nb=Wb._rotation10*Tb._positionX+Wb._rotation11*Tb._positionY+Wb._rotation12*Tb._positionZ;var ub=Wb._rotation20*Tb._positionX+Wb._rotation21*Tb._positionY+Wb._rotation22*Tb._positionZ;Jd._positionX=fb;Jd._positionY=
Nb;Jd._positionZ=ub;Jd._positionX+=Wb._positionX;Jd._positionY+=Wb._positionY;Jd._positionZ+=Wb._positionZ;Wa._geom._computeAabb(Wa._aabb,Wa._ptransform);var ac=Wa._aabb._minX;var Qb=Wa._aabb._minY;var Rb=Wa._aabb._minZ;var rb=Wa._aabb._maxX;var Ab=Wa._aabb._maxY;var Zb=Wa._aabb._maxZ;Wa._geom._computeAabb(Wa._aabb,Wa._transform);Wa._aabb._minX=ac<Wa._aabb._minX?ac:Wa._aabb._minX;Wa._aabb._minY=Qb<Wa._aabb._minY?Qb:Wa._aabb._minY;Wa._aabb._minZ=Rb<Wa._aabb._minZ?Rb:Wa._aabb._minZ;Wa._aabb._maxX=rb>
Wa._aabb._maxX?rb:Wa._aabb._maxX;Wa._aabb._maxY=Ab>Wa._aabb._maxY?Ab:Wa._aabb._maxY;Wa._aabb._maxZ=Zb>Wa._aabb._maxZ?Zb:Wa._aabb._maxZ;if(null!=Wa._proxy){var uc=Wa._transform._positionX-Wa._ptransform._positionX;var mc=Wa._transform._positionY-Wa._ptransform._positionY;var tc=Wa._transform._positionZ-Wa._ptransform._positionZ;var dc=Wa.displacement;dc.x=uc;dc.y=mc;dc.z=tc;Wa._rigidBody._world._broadPhase.moveProxy(Wa._proxy,Wa._aabb,Wa.displacement)}Wa=we}ca._sleeping=!1;ca._sleepTime=0;for(var Sb=
new Td(100,100,100),nc=0;50>nc;){var sc=nc++,gb=new $d(Sb,b);this.view.get_scene().addChild(gb);var cc=ib.DYNAMIC,kc=[B.getRandomFloat(-500,500),300+201*sc,B.getRandomFloat(-500,500)];null==cc&&(cc=0);null==kc&&(kc=[0,0,0]);B.tmpVec3_1.x=kc[0];B.tmpVec3_1.y=kc[1];B.tmpVec3_1.z=kc[2];var lc=null;if(gb.get_geometry()instanceof Td){var vc=gb.get_geometry(),wc=vc.get_width();B.tmpVec3_0.x=wc/2;var fc=vc.get_height();B.tmpVec3_0.y=fc/2;var zc=vc.get_depth();B.tmpVec3_0.z=zc/2;lc=B.addBox(B.oimoWorld,B.tmpVec3_1,
B.tmpVec3_0,cc)}else if(gb.get_geometry()instanceof md){var xc=gb.get_geometry().get_radius();lc=B.addSphere(B.oimoWorld,B.tmpVec3_1,xc,cc)}else if(gb.get_geometry()instanceof Bd){var jc=gb.get_geometry(),Pc=jc.get_topRadius(),Qc=jc.get_height()/2;lc=B.addCylinder(B.oimoWorld,B.tmpVec3_1,Pc,Qc,cc)}else if(gb.get_geometry()instanceof Ud){var Nc=gb.get_geometry(),Ac=Nc.get_radius(),Fc=Nc.get_height()/2;lc=B.addCapsule(B.oimoWorld,B.tmpVec3_1,Ac,Fc,cc)}switch(cc){case ib.DYNAMIC:B.oimoDynamicBodies.push(lc);
B.awayDynamicBodies.push(gb);break;case ib.KINEMATIC:B.oimoKinematicBodies.push(lc);B.awayKinematicBodies.push(gb);break;case ib.STATIC:B.oimoStaticBodies.push(lc),B.awayStaticBodies.push(gb)}}for(var Mc=new Ud(50,100,16,11),rc=0;50>rc;){var Hc=rc++,Lb=new $d(Mc,b);this.view.get_scene().addChild(Lb);var hc=ib.DYNAMIC,Bc=[B.getRandomFloat(-500,500),3E3+201*Hc,B.getRandomFloat(-500,500)];null==hc&&(hc=0);null==Bc&&(Bc=[0,0,0]);B.tmpVec3_1.x=Bc[0];B.tmpVec3_1.y=Bc[1];B.tmpVec3_1.z=Bc[2];var ic=null;
if(Lb.get_geometry()instanceof Td){var qc=Lb.get_geometry(),sd=qc.get_width();B.tmpVec3_0.x=sd/2;var pd=qc.get_height();B.tmpVec3_0.y=pd/2;var Vc=qc.get_depth();B.tmpVec3_0.z=Vc/2;ic=B.addBox(B.oimoWorld,B.tmpVec3_1,B.tmpVec3_0,hc)}else if(Lb.get_geometry()instanceof md){var Yc=Lb.get_geometry().get_radius();ic=B.addSphere(B.oimoWorld,B.tmpVec3_1,Yc,hc)}else if(Lb.get_geometry()instanceof Bd){var vd=Lb.get_geometry(),Ic=vd.get_topRadius(),Jc=vd.get_height()/2;ic=B.addCylinder(B.oimoWorld,B.tmpVec3_1,
Ic,Jc,hc)}else if(Lb.get_geometry()instanceof Ud){var Kc=Lb.get_geometry(),Tc=Kc.get_radius(),Xc=Kc.get_height()/2;ic=B.addCapsule(B.oimoWorld,B.tmpVec3_1,Tc,Xc,hc)}switch(hc){case ib.DYNAMIC:B.oimoDynamicBodies.push(ic);B.awayDynamicBodies.push(Lb);break;case ib.KINEMATIC:B.oimoKinematicBodies.push(ic);B.awayKinematicBodies.push(Lb);break;case ib.STATIC:B.oimoStaticBodies.push(ic),B.awayStaticBodies.push(Lb)}}for(var gd=new md(50),Zc=0;50>Zc;){var kd=Zc++,ig=new $d(gd,b);this.view.get_scene().addChild(ig);
var Dc=ib.DYNAMIC,Gc=[B.getRandomFloat(-500,500),5E3+201*kd,B.getRandomFloat(-500,500)];null==Dc&&(Dc=0);null==Gc&&(Gc=[0,0,0]);B.tmpVec3_1.x=Gc[0];B.tmpVec3_1.y=Gc[1];B.tmpVec3_1.z=Gc[2];var Ec=null;if(ig.get_geometry()instanceof Td){var ud=ig.get_geometry(),wd=ud.get_width();B.tmpVec3_0.x=wd/2;var yd=ud.get_height();B.tmpVec3_0.y=yd/2;var oc=ud.get_depth();B.tmpVec3_0.z=oc/2;Ec=B.addBox(B.oimoWorld,B.tmpVec3_1,B.tmpVec3_0,Dc)}else if(ig.get_geometry()instanceof md){var pc=ig.get_geometry().get_radius();
Ec=B.addSphere(B.oimoWorld,B.tmpVec3_1,pc,Dc)}else if(ig.get_geometry()instanceof Bd){var nd=ig.get_geometry(),Dd=nd.get_topRadius(),Ed=nd.get_height()/2;Ec=B.addCylinder(B.oimoWorld,B.tmpVec3_1,Dd,Ed,Dc)}else if(ig.get_geometry()instanceof Ud){var Rc=ig.get_geometry(),ed=Rc.get_radius(),fd=Rc.get_height()/2;Ec=B.addCapsule(B.oimoWorld,B.tmpVec3_1,ed,fd,Dc)}switch(Dc){case ib.DYNAMIC:B.oimoDynamicBodies.push(Ec);B.awayDynamicBodies.push(ig);break;case ib.KINEMATIC:B.oimoKinematicBodies.push(Ec);B.awayKinematicBodies.push(ig);
break;case ib.STATIC:B.oimoStaticBodies.push(Ec),B.awayStaticBodies.push(ig)}}for(var Pd=new Bd(50,50,120),jd=0;50>jd;){var Jm=jd++,bd=new $d(Pd,b);this.view.get_scene().addChild(bd);var Kd=ib.DYNAMIC,je=[B.getRandomFloat(-500,500),7E3+201*Jm,B.getRandomFloat(-500,500)];null==Kd&&(Kd=0);null==je&&(je=[0,0,0]);B.tmpVec3_1.x=je[0];B.tmpVec3_1.y=je[1];B.tmpVec3_1.z=je[2];var Cd=null;if(bd.get_geometry()instanceof Td){var od=bd.get_geometry(),Uc=od.get_width();B.tmpVec3_0.x=Uc/2;var dd=od.get_height();
B.tmpVec3_0.y=dd/2;var xe=od.get_depth();B.tmpVec3_0.z=xe/2;Cd=B.addBox(B.oimoWorld,B.tmpVec3_1,B.tmpVec3_0,Kd)}else if(bd.get_geometry()instanceof md){var ye=bd.get_geometry().get_radius();Cd=B.addSphere(B.oimoWorld,B.tmpVec3_1,ye,Kd)}else if(bd.get_geometry()instanceof Bd){var se=bd.get_geometry(),hd=se.get_topRadius(),Ad=se.get_height()/2;Cd=B.addCylinder(B.oimoWorld,B.tmpVec3_1,hd,Ad,Kd)}else if(bd.get_geometry()instanceof Ud){var mj=bd.get_geometry(),Id=mj.get_radius(),Df=mj.get_height()/2;Cd=
B.addCapsule(B.oimoWorld,B.tmpVec3_1,Id,Df,Kd)}switch(Kd){case ib.DYNAMIC:B.oimoDynamicBodies.push(Cd);B.awayDynamicBodies.push(bd);break;case ib.KINEMATIC:B.oimoKinematicBodies.push(Cd);B.awayKinematicBodies.push(bd);break;case ib.STATIC:B.oimoStaticBodies.push(Cd),B.awayStaticBodies.push(bd)}}this.addEventListener("enterFrame",u(this,this._onEnterFrame));this.stage.addEventListener("resize",u(this,this.onResize));this.onResize()};g.Main=uc;uc.__name__="Main";uc.__super__=ka;uc.prototype=v(ka.prototype,
{view:null,ground:null,oimo_world:null,zeroVector3D:null,_onEnterFrame:function(a){B.updatePhysics();this.teleportRigidBodies(-800,1500,500,500);this.view.render()},tmpVec3_0:null,tmpVec3_1:null,teleportRigidBodies:function(a,b,c,d){var e=this.oimo_world._rigidBodyList;for(this.tmpVec3_0.zero();null!=e;){var f=this.tmpVec3_1;f.x=e._transform._positionX;f.y=e._transform._positionY;f.z=e._transform._positionZ;if(this.tmpVec3_1.y<a){this.tmpVec3_1.y=b;this.tmpVec3_1.x=(-1+2*Math.random())*c;this.tmpVec3_1.z=
(-1+2*Math.random())*d;f=this.tmpVec3_1;e._transform._positionX=f.x;e._transform._positionY=f.y;e._transform._positionZ=f.z;f=e._ptransform;var k=e._transform;f._positionX=k._positionX;f._positionY=k._positionY;f._positionZ=k._positionZ;f._rotation00=k._rotation00;f._rotation01=k._rotation01;f._rotation02=k._rotation02;f._rotation10=k._rotation10;f._rotation11=k._rotation11;f._rotation12=k._rotation12;f._rotation20=k._rotation20;f._rotation21=k._rotation21;f._rotation22=k._rotation22;for(f=e._shapeList;null!=
f;){k=f._next;var m=f._ptransform,h=f._localTransform,n=e._ptransform;var K=n._rotation00*h._rotation00+n._rotation01*h._rotation10+n._rotation02*h._rotation20;var l=n._rotation00*h._rotation01+n._rotation01*h._rotation11+n._rotation02*h._rotation21;var Bb=n._rotation00*h._rotation02+n._rotation01*h._rotation12+n._rotation02*h._rotation22;var g=n._rotation10*h._rotation00+n._rotation11*h._rotation10+n._rotation12*h._rotation20;var H=n._rotation10*h._rotation01+n._rotation11*h._rotation11+n._rotation12*
h._rotation21;var C=n._rotation10*h._rotation02+n._rotation11*h._rotation12+n._rotation12*h._rotation22;var p=n._rotation20*h._rotation00+n._rotation21*h._rotation10+n._rotation22*h._rotation20;var I=n._rotation20*h._rotation01+n._rotation21*h._rotation11+n._rotation22*h._rotation21;var Yb=n._rotation20*h._rotation02+n._rotation21*h._rotation12+n._rotation22*h._rotation22;m._rotation00=K;m._rotation01=l;m._rotation02=Bb;m._rotation10=g;m._rotation11=H;m._rotation12=C;m._rotation20=p;m._rotation21=
I;m._rotation22=Yb;K=n._rotation00*h._positionX+n._rotation01*h._positionY+n._rotation02*h._positionZ;l=n._rotation10*h._positionX+n._rotation11*h._positionY+n._rotation12*h._positionZ;h=n._rotation20*h._positionX+n._rotation21*h._positionY+n._rotation22*h._positionZ;m._positionX=K;m._positionY=l;m._positionZ=h;m._positionX+=n._positionX;m._positionY+=n._positionY;m._positionZ+=n._positionZ;m=f._transform;h=f._localTransform;n=e._transform;K=n._rotation00*h._rotation00+n._rotation01*h._rotation10+
n._rotation02*h._rotation20;l=n._rotation00*h._rotation01+n._rotation01*h._rotation11+n._rotation02*h._rotation21;Bb=n._rotation00*h._rotation02+n._rotation01*h._rotation12+n._rotation02*h._rotation22;g=n._rotation10*h._rotation00+n._rotation11*h._rotation10+n._rotation12*h._rotation20;H=n._rotation10*h._rotation01+n._rotation11*h._rotation11+n._rotation12*h._rotation21;C=n._rotation10*h._rotation02+n._rotation11*h._rotation12+n._rotation12*h._rotation22;p=n._rotation20*h._rotation00+n._rotation21*
h._rotation10+n._rotation22*h._rotation20;I=n._rotation20*h._rotation01+n._rotation21*h._rotation11+n._rotation22*h._rotation21;Yb=n._rotation20*h._rotation02+n._rotation21*h._rotation12+n._rotation22*h._rotation22;m._rotation00=K;m._rotation01=l;m._rotation02=Bb;m._rotation10=g;m._rotation11=H;m._rotation12=C;m._rotation20=p;m._rotation21=I;m._rotation22=Yb;K=n._rotation00*h._positionX+n._rotation01*h._positionY+n._rotation02*h._positionZ;l=n._rotation10*h._positionX+n._rotation11*h._positionY+n._rotation12*
h._positionZ;h=n._rotation20*h._positionX+n._rotation21*h._positionY+n._rotation22*h._positionZ;m._positionX=K;m._positionY=l;m._positionZ=h;m._positionX+=n._positionX;m._positionY+=n._positionY;m._positionZ+=n._positionZ;f._geom._computeAabb(f._aabb,f._ptransform);m=f._aabb._minX;n=f._aabb._minY;h=f._aabb._minZ;K=f._aabb._maxX;l=f._aabb._maxY;Bb=f._aabb._maxZ;f._geom._computeAabb(f._aabb,f._transform);f._aabb._minX=m<f._aabb._minX?m:f._aabb._minX;f._aabb._minY=n<f._aabb._minY?n:f._aabb._minY;f._aabb._minZ=
h<f._aabb._minZ?h:f._aabb._minZ;f._aabb._maxX=K>f._aabb._maxX?K:f._aabb._maxX;f._aabb._maxY=l>f._aabb._maxY?l:f._aabb._maxY;f._aabb._maxZ=Bb>f._aabb._maxZ?Bb:f._aabb._maxZ;null!=f._proxy&&(m=f._transform._positionX-f._ptransform._positionX,n=f._transform._positionY-f._ptransform._positionY,h=f._transform._positionZ-f._ptransform._positionZ,K=f.displacement,K.x=m,K.y=n,K.z=h,f._rigidBody._world._broadPhase.moveProxy(f._proxy,f._aabb,f.displacement));f=k}e._sleeping=!1;e._sleepTime=0;1==e._type?(e._velX=
0,e._velY=0,e._velZ=0):(f=this.tmpVec3_0,e._velX=f.x,e._velY=f.y,e._velZ=f.z);e._sleeping=!1;e._sleepTime=0}e=e._next}},onResize:function(a){this.view.set_width(this.stage.stageWidth);this.view.set_height(this.stage.stageHeight)},__class__:uc});var Xb=function(a){a.addChild(this);uc.call(this);this.dispatchEvent(new R("addedToStage",!1,!1))};g.DocumentClass=Xb;Xb.__name__="DocumentClass";Xb.__super__=uc;Xb.prototype=v(uc.prototype,{__class__:Xb});var Ba=function(a,b){this.r=new RegExp(a,b.split("u").join(""))};
g.EReg=Ba;Ba.__name__="EReg";Ba.prototype={r:null,match:function(a){this.r.global&&(this.r.lastIndex=0);this.r.m=this.r.exec(a);this.r.s=a;return null!=this.r.m},matched:function(a){if(null!=this.r.m&&0<=a&&a<this.r.m.length)return this.r.m[a];throw new W("EReg::matched");},matchedRight:function(){if(null==this.r.m)throw new W("No string matched");var a=this.r.m.index+this.r.m[0].length;return ra.substr(this.r.s,a,this.r.s.length-a)},matchedPos:function(){if(null==this.r.m)throw new W("No string matched");
return{pos:this.r.m.index,len:this.r.m[0].length}},matchSub:function(a,b,c){null==c&&(c=-1);if(this.r.global){this.r.lastIndex=b;this.r.m=this.r.exec(0>c?a:ra.substr(a,0,b+c));if(b=null!=this.r.m)this.r.s=a;return b}if(c=this.match(0>c?ra.substr(a,b,null):ra.substr(a,b,c)))this.r.s=a,this.r.m.index+=b;return c},split:function(a){return a.replace(this.r,"#__delim__#").split("#__delim__#")},__class__:Ba};var ra=function(){};g.HxOverrides=ra;ra.__name__="HxOverrides";ra.strDate=function(a){switch(a.length){case 8:a=
a.split(":");var b=new Date;b.setTime(0);b.setUTCHours(a[0]);b.setUTCMinutes(a[1]);b.setUTCSeconds(a[2]);return b;case 10:return a=a.split("-"),new Date(a[0],a[1]-1,a[2],0,0,0);case 19:return b=a.split(" "),a=b[0].split("-"),b=b[1].split(":"),new Date(a[0],a[1]-1,a[2],b[0],b[1],b[2]);default:throw new W("Invalid date format : "+a);}};ra.cca=function(a,b){a=a.charCodeAt(b);if(a==a)return a};ra.substr=function(a,b,c){if(null==c)c=a.length;else if(0>c)if(0==b)c=a.length+c;else return"";return a.substr(b,
c)};ra.remove=function(a,b){b=a.indexOf(b);if(-1==b)return!1;a.splice(b,1);return!0};ra.iter=function(a){return{cur:0,arr:a,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}};var Ub=function(){};g.Lambda=Ub;Ub.__name__="Lambda";Ub.array=function(a){var b=[];for(a=N(a);a.hasNext();){var c=a.next();b.push(c)}return b};var tc=function(){};g.ManifestResources=tc;tc.__name__="ManifestResources";tc.init=function(a){tc.preloadLibraries=[];tc.preloadLibraryNames=
[];tc.rootPath=null;null!=a&&Object.prototype.hasOwnProperty.call(a,"rootPath")&&(tc.rootPath=Na.field(a,"rootPath"));null==tc.rootPath&&(tc.rootPath="./");a=nd.parse('{"name":null,"assets":"aoy4:pathy26:assets%2Ffloor_diffuse.jpgy4:sizei139264y4:typey5:IMAGEy2:idR1y7:preloadtgoR0y19:assets%2Fmarble.jpgR2i184525R3R4R5R7R6tgoR0y19:assets%2Forange.jpgR2i94307R3R4R5R8R6tgh","rootPath":null,"version":2,"libraryArgs":[],"libraryType":null}',tc.rootPath);a=ac.fromManifest(a);Da.registerLibrary("default",
a);a=Da.getLibrary("default");null!=a?tc.preloadLibraries.push(a):tc.preloadLibraryNames.push("default")};Math.__name__="Math";var w=function(a,b,c){null==c&&(c=0);null==b&&(b=0);null==a&&(a=0);this.x=a;this.y=b;this.z=c;w.numCreations++};g["oimo.common.Vec3"]=w;w.__name__="oimo.common.Vec3";w.prototype={x:null,y:null,z:null,init:function(a,b,c){this.x=a;this.y=b;this.z=c;return this},zero:function(){this.z=this.y=this.x=0;return this},__class__:w};var B=function(){};g.OimoUtils=B;B.__name__="OimoUtils";
B.setWorld=function(a){if(null==B.oimoWorld)B.oimoWorld=a;else throw new W("Error: World already set.");};B.updatePhysics=function(){B.oimoWorld.step(.12);for(var a=0,b=B.oimoDynamicBodies.length;a<b;){var c=a++,d=B.oimoDynamicBodies[c];c=B.awayDynamicBodies[c];var e=d._transform,f=new Ld;f._positionX=e._positionX;f._positionY=e._positionY;f._positionZ=e._positionZ;f._rotation00=e._rotation00;f._rotation01=e._rotation01;f._rotation02=e._rotation02;f._rotation10=e._rotation10;f._rotation11=e._rotation11;
f._rotation12=e._rotation12;f._rotation20=e._rotation20;f._rotation21=e._rotation21;f._rotation22=e._rotation22;var k=f;Ef.numCreations++;e=k._rotation00;f=k._rotation01;var m=k._rotation02;var h=k._rotation11;var n=k._rotation12;var K=k._rotation21;k=k._rotation22;-1>=m?(e=Math.atan2(K,h),e=new w(.5*e,-1.570796326794895,.5*-e)):1<=m?(e=Math.atan2(K,h),e=new w(.5*e,1.570796326794895,.5*e)):e=new w(Math.atan2(-n,k),Math.asin(m),Math.atan2(-f,e));B.tmpVec3_0=e;w.numCreations++;e=d._transform._positionX;
w.numCreations++;f=d._transform._positionY;w.numCreations++;c.moveTo(e,f,d._transform._positionZ);c.get_transform().appendRotation(57.295*B.tmpVec3_0.x,c.get_rightVector(),c.get_position());c.get_transform().appendRotation(57.295*B.tmpVec3_0.y,c.get_upVector(),c.get_position());c.get_transform().appendRotation(57.295*B.tmpVec3_0.z,c.get_forwardVector(),c.get_position())}};B.getRandomFloat=function(a,b){return Math.random()*(b-a)+a};B.addSphere=function(a,b,c,d){return B.addRigidBody(a,b,new Ph(c),
d)};B.addBox=function(a,b,c,d){return B.addRigidBody(a,b,new nj(c),d)};B.addCylinder=function(a,b,c,d,e){return B.addRigidBody(a,b,new Qh(c,d),e)};B.addCapsule=function(a,b,c,d,e){return B.addRigidBody(a,b,new Rh(c,d),e)};B.addRigidBody=function(a,b,c,d){var e=new oj;e.geometry=c;c=new pj;c.type=d;c.position=b;b=new qj(c);b.addShape(new rj(e));a.addRigidBody(b);return b};var Na=function(){};g.Reflect=Na;Na.__name__="Reflect";Na.field=function(a,b){try{return a[b]}catch(c){return ab.lastException=
c,null}};Na.fields=function(a){var b=[];if(null!=a){var c=Object.prototype.hasOwnProperty,d;for(d in a)"__id__"!=d&&"hx__closures__"!=d&&c.call(a,d)&&b.push(d)}return b};Na.isFunction=function(a){return"function"==typeof a?!(a.__name__||a.__ename__):!1};Na.compare=function(a,b){return a==b?0:a>b?1:-1};Na.compareMethods=function(a,b){return a==b?!0:Na.isFunction(a)&&Na.isFunction(b)?a.scope==b.scope&&a.method==b.method?null!=a.method:!1:!1};Na.deleteField=function(a,b){if(!Object.prototype.hasOwnProperty.call(a,
b))return!1;delete a[b];return!0};var r=function(){};g.Std=r;r.__name__="Std";r.string=function(a){return Ka.__string_rec(a,"")};r.parseInt=function(a){if(null!=a)for(var b=0,c=a.length;b<c;){var d=b++,e=a.charCodeAt(d);if(8>=e||14<=e&&32!=e&&45!=e)if(a=parseInt(a,"x"==a[d+1]||"X"==a[d+1]?16:10),isNaN(a))break;else return a}return null};var Sa=function(){};g["_String.String_Impl_"]=Sa;Sa.__name__="_String.String_Impl_";Sa.fromCharCode=function(a){return String.fromCodePoint(a)};var Qa=function(){this.b=
""};g.StringBuf=Qa;Qa.__name__="StringBuf";Qa.prototype={b:null,__class__:Qa};var Y=function(){};g.StringTools=Y;Y.__name__="StringTools";Y.htmlEscape=function(a,b){for(var c="",d=0;d<a.length;){var e=a,f=d++,k=e.charCodeAt(f);55296<=k&&56319>=k&&(k=k-55232<<10|e.charCodeAt(f+1)&1023);e=k;65536<=e&&++d;switch(e){case 34:c=b?c+"&quot;":c+String.fromCodePoint(e);break;case 38:c+="&amp;";break;case 39:c=b?c+"&#039;":c+String.fromCodePoint(e);break;case 60:c+="&lt;";break;case 62:c+="&gt;";break;default:c+=
String.fromCodePoint(e)}}return c};Y.startsWith=function(a,b){return a.length>=b.length?0==a.lastIndexOf(b,0):!1};Y.endsWith=function(a,b){var c=b.length,d=a.length;return d>=c?a.indexOf(b,d-c)==d-c:!1};Y.isSpace=function(a,b){a=ra.cca(a,b);return 8<a&&14>a?!0:32==a};Y.ltrim=function(a){for(var b=a.length,c=0;c<b&&Y.isSpace(a,c);)++c;return 0<c?ra.substr(a,c,b-c):a};Y.rtrim=function(a){for(var b=a.length,c=0;c<b&&Y.isSpace(a,b-c-1);)++c;return 0<c?ra.substr(a,0,b-c):a};Y.trim=function(a){return Y.ltrim(Y.rtrim(a))};
Y.replace=function(a,b,c){return a.split(b).join(c)};Y.hex=function(a,b){for(var c="";c="0123456789ABCDEF".charAt(a&15)+c,a>>>=4,0<a;);if(null!=b)for(;c.length<b;)c="0"+c;return c};var U=t.ValueType={__ename__:"ValueType",__constructs__:"TNull TInt TFloat TBool TObject TFunction TClass TEnum TUnknown".split(" "),TNull:{_hx_index:0,__enum__:"ValueType",toString:p},TInt:{_hx_index:1,__enum__:"ValueType",toString:p},TFloat:{_hx_index:2,__enum__:"ValueType",toString:p},TBool:{_hx_index:3,__enum__:"ValueType",
toString:p},TObject:{_hx_index:4,__enum__:"ValueType",toString:p},TFunction:{_hx_index:5,__enum__:"ValueType",toString:p},TClass:(q=function(a){return{_hx_index:6,c:a,__enum__:"ValueType",toString:p}},q.__params__=["c"],q),TEnum:(q=function(a){return{_hx_index:7,e:a,__enum__:"ValueType",toString:p}},q.__params__=["e"],q),TUnknown:{_hx_index:8,__enum__:"ValueType",toString:p}},L=function(){};g.Type=L;L.__name__="Type";L.createInstance=function(a,b){return new (Function.prototype.bind.apply(a,[null].concat(b)))};
L.createEnum=function(a,b,c){var d=Na.field(a,b);if(null==d)throw new W("No such constructor "+b);if(Na.isFunction(d)){if(null==c)throw new W("Constructor "+b+" need parameters");return d.apply(a,c)}if(null!=c&&0!=c.length)throw new W("Constructor "+b+" does not need parameters");return d};L.getInstanceFields=function(a){var b=[],c;for(c in a.prototype)b.push(c);ra.remove(b,"__class__");ra.remove(b,"__properties__");return b};L.typeof=function(a){switch(typeof a){case "boolean":return U.TBool;case "function":return a.__name__||
a.__ename__?U.TObject:U.TFunction;case "number":return Math.ceil(a)==a%2147483648?U.TInt:U.TFloat;case "object":if(null==a)return U.TNull;var b=a.__enum__;if(null!=b)return U.TEnum(t[b]);a=Ka.getClass(a);return null!=a?U.TClass(a):U.TObject;case "string":return U.TClass(String);case "undefined":return U.TNull;default:return U.TUnknown}};L.enumParameters=function(a){var b=t[a.__enum__];b=b[b.__constructs__[a._hx_index]].__params__;if(null!=b){for(var c=[],d=0;d<b.length;){var e=b[d];++d;c.push(a[e])}return c}return[]};
var Xa={};g["_UInt.UInt_Impl_"]=Xa;Xa.__name__="_UInt.UInt_Impl_";Xa.gt=function(a,b){var c=0>a;return c!=0>b?c:a>b};Xa.gte=function(a,b){var c=0>a;return c!=0>b?c:a>=b};Xa.toFloat=function(a){return 0>a?4294967296+a:a+0};var wa=function(a){null==a&&(a="null");this._originalName=this._name=a;this.updateFullPath();aa.call(this)};g["away3d.library.assets.NamedAssetBase"]=wa;wa.__name__="away3d.library.assets.NamedAssetBase";wa.__super__=aa;wa.prototype=v(aa.prototype,{_originalName:null,_namespace:null,
_name:null,_full_path:null,get_name:function(){return this._name},set_name:function(a){var b=this._name;this._name=a;null==this._name&&(this._name="null");this.updateFullPath();this.hasEventListener("assetRename")&&this.dispatchEvent(new Jg("assetRename",Ka.__cast(this,zb),b));return a},updateFullPath:function(){this._full_path=[this._namespace,this._name]},__class__:wa});var zb=function(){};g["away3d.library.assets.IAsset"]=zb;zb.__name__="away3d.library.assets.IAsset";zb.__isInterface__=!0;zb.__interfaces__=
[T];zb.prototype={get_name:null,__class__:zb};var pb=function(a){this._animationSet=a;wa.call(this)};g["away3d.animators.AnimatorBase"]=pb;pb.__name__="away3d.animators.AnimatorBase";pb.__interfaces__=[zb];pb.__super__=wa;pb.prototype=v(wa.prototype,{_animationSet:null,__class__:pb});var y=function(){};g["away3d.animators.IAnimationSet"]=y;y.__name__="away3d.animators.IAnimationSet";y.__isInterface__=!0;y.prototype={get_usesCPU:null,resetGPUCompatibility:null,getAGALVertexCode:null,getAGALFragmentCode:null,
getAGALUVCode:null,doneAGALCode:null,activate:null,deactivate:null,__class__:y};var Ma=function(){};g["away3d.animators.IAnimator"]=Ma;Ma.__name__="away3d.animators.IAnimator";Ma.__isInterface__=!0;Ma.prototype={get_animationSet:null,setRenderState:null,testGPUCompatibility:null,__class__:Ma};var O=function(a){this._profile=a};g["away3d.materials.compilation.ShaderRegisterCache"]=O;O.__name__="away3d.materials.compilation.ShaderRegisterCache";O.prototype={_fragmentTempCache:null,_vertexTempCache:null,
_varyingCache:null,_fragmentConstantsCache:null,_vertexConstantsCache:null,_textureCache:null,_vertexAttributesCache:null,_vertexConstantOffset:null,_vertexAttributesOffset:null,_varyingsOffset:null,_fragmentConstantOffset:null,_fragmentOutputRegister:null,_vertexOutputRegister:null,_numUsedVertexConstants:null,_numUsedFragmentConstants:null,_numUsedStreams:null,_numUsedTextures:null,_numUsedVaryings:null,_profile:null,reset:function(){this._fragmentTempCache=new hc("ft",8,!1);this._vertexTempCache=
new hc("vt",8,!1);this._varyingCache=new hc("v",8);this._textureCache=new hc("fs",8);this._vertexAttributesCache=new hc("va",8);this._fragmentConstantsCache=new hc("fc",28);this._vertexConstantsCache=new hc("vc",128);this._fragmentOutputRegister=new Md("oc",-1);this._vertexOutputRegister=new Md("op",-1);for(var a=this._numUsedFragmentConstants=this._numUsedVaryings=this._numUsedTextures=this._numUsedStreams=this._numUsedVertexConstants=0,b=this._vertexAttributesOffset;a<b;)a++,this.getFreeVertexAttribute();
a=0;for(b=this._vertexConstantOffset;a<b;)a++,this.getFreeVertexConstant();a=0;for(b=this._varyingsOffset;a<b;)a++,this.getFreeVarying();a=0;for(b=this._fragmentConstantOffset;a<b;)a++,this.getFreeFragmentConstant()},dispose:function(){this._fragmentTempCache.dispose();this._vertexTempCache.dispose();this._varyingCache.dispose();this._fragmentConstantsCache.dispose();this._vertexAttributesCache.dispose();this._vertexOutputRegister=this._fragmentOutputRegister=this._vertexAttributesCache=this._fragmentConstantsCache=
this._varyingCache=this._vertexTempCache=this._fragmentTempCache=null},addFragmentTempUsages:function(a,b){this._fragmentTempCache.addUsage(a,b)},removeFragmentTempUsage:function(a){this._fragmentTempCache.removeUsage(a)},addVertexTempUsages:function(a,b){this._vertexTempCache.addUsage(a,b)},removeVertexTempUsage:function(a){this._vertexTempCache.removeUsage(a)},getFreeFragmentVectorTemp:function(){return this._fragmentTempCache.requestFreeVectorReg()},getFreeFragmentSingleTemp:function(){return this._fragmentTempCache.requestFreeRegComponent()},
getFreeVarying:function(){var a=this._varyingCache.requestFreeVectorReg();++this._numUsedVaryings;return a},getFreeFragmentConstant:function(){var a=this._fragmentConstantsCache.requestFreeVectorReg();++this._numUsedFragmentConstants;return a},getFreeVertexConstant:function(){var a=this._vertexConstantsCache.requestFreeVectorReg();++this._numUsedVertexConstants;return a},getFreeVertexVectorTemp:function(){return this._vertexTempCache.requestFreeVectorReg()},getFreeVertexAttribute:function(){var a=
this._vertexAttributesCache.requestFreeVectorReg();++this._numUsedStreams;return a},getFreeTextureReg:function(){var a=this._textureCache.requestFreeVectorReg();++this._numUsedTextures;return a},set_vertexAttributesOffset:function(a){return this._vertexAttributesOffset=a},get_fragmentOutputRegister:function(){return this._fragmentOutputRegister},get_numUsedVertexConstants:function(){return this._numUsedVertexConstants},get_numUsedFragmentConstants:function(){return this._numUsedFragmentConstants},
get_numUsedStreams:function(){return this._numUsedStreams},get_numUsedTextures:function(){return this._numUsedTextures},get_numUsedVaryings:function(){return this._numUsedVaryings},__class__:O};var z=function(){wa.call(this)};g["away3d.animators.nodes.AnimationNodeBase"]=z;z.__name__="away3d.animators.nodes.AnimationNodeBase";z.__interfaces__=[zb];z.__super__=wa;z.prototype=v(wa.prototype,{__class__:z});var mb=function(){};g["away3d.animators.states.IAnimationState"]=mb;mb.__name__="away3d.animators.states.IAnimationState";
mb.__isInterface__=!0;mb.prototype={__class__:mb};var Ja=function(){this._aabbPointsDirty=!0;this._min=new hb;this._max=new hb};g["away3d.bounds.BoundingVolumeBase"]=Ja;Ja.__name__="away3d.bounds.BoundingVolumeBase";Ja.prototype={_min:null,_max:null,_aabbPointsDirty:null,_boundingRenderable:null,nullify:function(){this._min.x=this._min.y=this._min.z=0;this._max.x=this._max.y=this._max.z=0;this._aabbPointsDirty=!0;null!=this._boundingRenderable&&this.updateBoundingRenderable()},fromGeometry:function(a){a=
a.get_subGeometries();var b=a.get_length(),c,d,e;if(0<b){var f=a.get(0),k=f.get_vertexData(),m=f.get_vertexOffset();var h=c=k.get(m);var n=d=k.get(m+1);var K=e=k.get(m+2);for(var l=0;l<b;){f=a.get(l++);k=f.get_vertexData();var Bb=k.get_length();m=f.get_vertexOffset();for(f=f.get_vertexStride();m<Bb;){var g=k.get(m);g<h?h=g:g>c&&(c=g);g=k.get(m+1);g<n?n=g:g>d&&(d=g);g=k.get(m+2);g<K?K=g:g>e&&(e=g);m+=f}}this.fromExtremes(h,n,K,c,d,e)}else this.fromExtremes(0,0,0,0,0,0)},fromSphere:function(a,b){this.fromExtremes(a.x-
b,a.y-b,a.z-b,a.x+b,a.y+b,a.z+b)},fromExtremes:function(a,b,c,d,e,f){this._min.x=a;this._min.y=b;this._min.z=c;this._max.x=d;this._max.y=e;this._max.z=f;this._aabbPointsDirty=!0;null!=this._boundingRenderable&&this.updateBoundingRenderable()},isInFrustum:function(a,b){throw new W(new tb);},rayIntersection:function(a,b,c){return-1},updateBoundingRenderable:function(){throw new W(new tb);},transformFrom:function(a,b){throw new W(new tb);},__class__:Ja};var Ta=function(){this._centerX=this._centerY=
this._centerZ=this._halfExtentsX=this._halfExtentsY=this._halfExtentsZ=0;Ja.call(this)};g["away3d.bounds.AxisAlignedBoundingBox"]=Ta;Ta.__name__="away3d.bounds.AxisAlignedBoundingBox";Ta.__super__=Ja;Ta.prototype=v(Ja.prototype,{_centerX:null,_centerY:null,_centerZ:null,_halfExtentsX:null,_halfExtentsY:null,_halfExtentsZ:null,nullify:function(){Ja.prototype.nullify.call(this);this._halfExtentsX=this._halfExtentsY=this._halfExtentsZ=this._centerX=this._centerY=this._centerZ=0},isInFrustum:function(a,
b){for(var c=0;c<b;){var d=c++;d=a.get(d);var e=d.a,f=d.b,k=d.c;if(0>e*(this._centerX+(0>e?-this._halfExtentsX:this._halfExtentsX))+f*(this._centerY+(0>f?-this._halfExtentsY:this._halfExtentsY))+k*(this._centerZ+(0>k?-this._halfExtentsZ:this._halfExtentsZ))-d.d)return!1}return!0},rayIntersection:function(a,b,c){if(this.containsPoint(a))return 0;var d=a.x-this._centerX,e=a.y-this._centerY;a=a.z-this._centerZ;var f=b.x,k=b.y;b=b.z;var m=0,h=!1;if(0>f&&(m=(this._halfExtentsX-d)/f,0<m)){var n=e+m*k;var K=
a+m*b;n>-this._halfExtentsY&&n<this._halfExtentsY&&K>-this._halfExtentsZ&&K<this._halfExtentsZ&&(c.x=1,c.y=0,c.z=0,h=!0)}!h&&0<f&&(m=(-this._halfExtentsX-d)/f,0<m&&(n=e+m*k,K=a+m*b,n>-this._halfExtentsY&&n<this._halfExtentsY&&K>-this._halfExtentsZ&&K<this._halfExtentsZ&&(c.x=-1,c.y=0,c.z=0,h=!0)));if(!h&&0>k&&(m=(this._halfExtentsY-e)/k,0<m)){var l=d+m*f;K=a+m*b;l>-this._halfExtentsX&&l<this._halfExtentsX&&K>-this._halfExtentsZ&&K<this._halfExtentsZ&&(c.x=0,c.y=1,c.z=0,h=!0)}!h&&0<k&&(m=(-this._halfExtentsY-
e)/k,0<m&&(l=d+m*f,K=a+m*b,l>-this._halfExtentsX&&l<this._halfExtentsX&&K>-this._halfExtentsZ&&K<this._halfExtentsZ&&(c.x=0,c.y=-1,c.z=0,h=!0)));!h&&0>b&&(m=(this._halfExtentsZ-a)/b,0<m&&(l=d+m*f,n=e+m*k,n>-this._halfExtentsY&&n<this._halfExtentsY&&l>-this._halfExtentsX&&l<this._halfExtentsX&&(c.x=0,c.y=0,c.z=1,h=!0)));!h&&0<b&&(m=(-this._halfExtentsZ-a)/b,0<m&&(l=d+m*f,n=e+m*k,n>-this._halfExtentsY&&n<this._halfExtentsY&&l>-this._halfExtentsX&&l<this._halfExtentsX&&(c.x=0,c.y=0,c.z=-1,h=!0)));return h?
m:-1},containsPoint:function(a){var b=a.x-this._centerX,c=a.y-this._centerY;a=a.z-this._centerZ;return b<=this._halfExtentsX&&b>=-this._halfExtentsX&&c<=this._halfExtentsY&&c>=-this._halfExtentsY&&a<=this._halfExtentsZ?a>=-this._halfExtentsZ:!1},fromExtremes:function(a,b,c,d,e,f){this._centerX=.5*(d+a);this._centerY=.5*(e+b);this._centerZ=.5*(f+c);this._halfExtentsX=.5*(d-a);this._halfExtentsY=.5*(e-b);this._halfExtentsZ=.5*(f-c);Ja.prototype.fromExtremes.call(this,a,b,c,d,e,f)},updateBoundingRenderable:function(){this._boundingRenderable.set_scaleX(Math.max(2*
this._halfExtentsX,.001));this._boundingRenderable.set_scaleY(Math.max(2*this._halfExtentsY,.001));this._boundingRenderable.set_scaleZ(Math.max(2*this._halfExtentsZ,.001));this._boundingRenderable.set_x(this._centerX);this._boundingRenderable.set_y(this._centerY);this._boundingRenderable.set_z(this._centerZ)},transformFrom:function(a,b){a=Ka.__cast(a,Ta);var c=a._centerX,d=a._centerY,e=a._centerZ,f=db.RAW_DATA_CONTAINER;b.copyRawDataTo(f);b=f.get(0);var k=f.get(4),m=f.get(8),h=f.get(12),n=f.get(1),
K=f.get(5),l=f.get(9),Bb=f.get(13),g=f.get(2),H=f.get(6),C=f.get(10);f=f.get(14);this._centerX=c*b+d*k+e*m+h;this._centerY=c*n+d*K+e*l+Bb;this._centerZ=c*g+d*H+e*C+f;0>b&&(b=-b);0>k&&(k=-k);0>m&&(m=-m);0>n&&(n=-n);0>K&&(K=-K);0>l&&(l=-l);0>g&&(g=-g);0>H&&(H=-H);0>C&&(C=-C);c=a._halfExtentsX;d=a._halfExtentsY;a=a._halfExtentsZ;this._halfExtentsX=c*b+d*k+a*m;this._halfExtentsY=c*n+d*K+a*l;this._halfExtentsZ=c*g+d*H+a*C;this._min.x=this._centerX-this._halfExtentsX;this._min.y=this._centerY-this._halfExtentsY;
this._min.z=this._centerZ-this._halfExtentsZ;this._max.x=this._centerX+this._halfExtentsX;this._max.y=this._centerY+this._halfExtentsY;this._max.z=this._centerZ+this._halfExtentsZ;this._aabbPointsDirty=!0},__class__:Ta});var Pa=function(){this._radius=this._centerX=this._centerY=this._centerZ=0;Ja.call(this)};g["away3d.bounds.BoundingSphere"]=Pa;Pa.__name__="away3d.bounds.BoundingSphere";Pa.__super__=Ja;Pa.prototype=v(Ja.prototype,{_radius:null,_centerX:null,_centerY:null,_centerZ:null,nullify:function(){Ja.prototype.nullify.call(this);
this._radius=this._centerX=this._centerY=this._centerZ=0},isInFrustum:function(a,b){for(var c=0;c<b;){var d=c++;d=a.get(d);if(0>d.a*(this._centerX+(0>d.a?-this._radius:this._radius))+d.b*(this._centerY+(0>d.b?-this._radius:this._radius))+d.c*(this._centerZ+(0>d.c?-this._radius:this._radius))-d.d)return!1}return!0},fromSphere:function(a,b){this._centerX=a.x;this._centerY=a.y;this._centerZ=a.z;this._radius=b;this._max.x=this._centerX+b;this._max.y=this._centerY+b;this._max.z=this._centerZ+b;this._min.x=
this._centerX-b;this._min.y=this._centerY-b;this._min.z=this._centerZ-b;this._aabbPointsDirty=!0;null!=this._boundingRenderable&&this.updateBoundingRenderable()},fromExtremes:function(a,b,c,d,e,f){this._centerX=.5*(d+a);this._centerY=.5*(e+b);this._centerZ=.5*(f+c);var k=d-a,m=e-b,h=f-c;m>k&&(k=m);h>k&&(k=h);this._radius=k*Math.sqrt(.5);Ja.prototype.fromExtremes.call(this,a,b,c,d,e,f)},rayIntersection:function(a,b,c){if(this.containsPoint(a))return 0;var d=a.x-this._centerX,e=a.y-this._centerY;a=
a.z-this._centerZ;var f=b.x,k=b.y;b=b.z;var m=f*f+k*k+b*b;var h=2*(d*f+e*k+a*b),n=h*h-4*m*(d*d+e*e+a*a-this._radius*this._radius);return 0<=n&&(m=(-h-Math.sqrt(n))/(2*m),0<=m)?(c.x=d+m*f,c.y=e+m*k,c.z=a+m*b,c.normalize(),m):-1},containsPoint:function(a){var b=a.x-this._centerX,c=a.y-this._centerY;a=a.z-this._centerZ;return Math.sqrt(b*b+c*c+a*a)<=this._radius},updateBoundingRenderable:function(){var a=this._radius;0==a&&(a=.001);this._boundingRenderable.set_scaleX(a);this._boundingRenderable.set_scaleY(a);
this._boundingRenderable.set_scaleZ(a);this._boundingRenderable.set_x(this._centerX);this._boundingRenderable.set_y(this._centerY);this._boundingRenderable.set_z(this._centerZ)},transformFrom:function(a,b){a=Ka.__cast(a,Pa);var c=a._centerX,d=a._centerY,e=a._centerZ,f=db.RAW_DATA_CONTAINER;b.copyRawDataTo(f);var k=f.get(0),m=f.get(4),h=f.get(8),n=f.get(12),K=f.get(1),l=f.get(5),Bb=f.get(9),g=f.get(13);b=f.get(2);var H=f.get(6),C=f.get(10);f=f.get(14);this._centerX=c*k+d*m+e*h+n;this._centerY=c*K+
d*l+e*Bb+g;this._centerZ=c*b+d*H+e*C+f;0>k&&(k=-k);0>m&&(m=-m);0>h&&(h=-h);0>K&&(K=-K);0>l&&(l=-l);0>Bb&&(Bb=-Bb);0>b&&(b=-b);0>H&&(H=-H);0>C&&(C=-C);c=k+m+h;d=K+l+Bb;b=b+H+C;this._radius=a._radius*Math.sqrt(c*c+d*d+b*b);this._min.x=this._centerX-this._radius;this._min.y=this._centerY-this._radius;this._min.z=this._centerZ-this._radius;this._max.x=this._centerX+this._radius;this._max.y=this._centerY+this._radius;this._max.z=this._centerZ+this._radius},__class__:Pa});var Fb=function(a,b){null==a&&
(a=!0);Ja.call(this);this._alwaysIn=a;this._renderable=b;this._max.x=this._max.y=this._max.z=Infinity;this._min.x=this._min.y=this._min.z=this._alwaysIn?-Infinity:Infinity};g["away3d.bounds.NullBounds"]=Fb;Fb.__name__="away3d.bounds.NullBounds";Fb.__super__=Ja;Fb.prototype=v(Ja.prototype,{_alwaysIn:null,_renderable:null,isInFrustum:function(a,b){return this._alwaysIn},fromGeometry:function(a){},fromSphere:function(a,b){},fromExtremes:function(a,b,c,d,e,f){},transformFrom:function(a,b){this._alwaysIn=
Ka.__cast(a,Fb)._alwaysIn},__class__:Fb});var qb=function(){this._sca=new hb;this._rot=new hb;this._pos=new hb;this._pivotZero=!0;this._pivotPoint=new hb;this._x=this._y=this._z=0;this._scaleX=this._scaleY=this._scaleZ=1;this._transform=new vc;this._zOffset=0;this._flipY=new vc;this._rotationX=this._rotationY=this._rotationZ=0;this._transformDirty=!0;this._smallestNumber=1E-22;this._transformComponents=M.toObjectVector(null,3,!0);this._transformComponents.set(0,this._pos);this._transformComponents.set(1,
this._rot);this._transformComponents.set(2,this._sca);this._transform.identity();this._flipY.appendScale(1,-1,1);wa.call(this)};g["away3d.core.base.Object3D"]=qb;qb.__name__="away3d.core.base.Object3D";qb.__super__=wa;qb.prototype=v(wa.prototype,{_controller:null,_smallestNumber:null,_transformDirty:null,_positionDirty:null,_rotationDirty:null,_scaleDirty:null,_positionChanged:null,_rotationChanged:null,_scaleChanged:null,_rotationX:null,_rotationY:null,_rotationZ:null,_flipY:null,_listenToPositionChanged:null,
_listenToRotationChanged:null,_listenToScaleChanged:null,_zOffset:null,invalidatePosition:function(){this._positionDirty||(this._positionDirty=!0,this.invalidateTransform(),this._listenToPositionChanged&&this.notifyPositionChanged())},notifyPositionChanged:function(){null==this._positionChanged&&(this._positionChanged=new jg("positionChanged",this));this.dispatchEvent(this._positionChanged)},addEventListener:function(a,b,c,d,e){null==e&&(e=!1);null==d&&(d=0);null==c&&(c=!1);wa.prototype.addEventListener.call(this,
a,b,c,d,e);switch(a){case "positionChanged":this._listenToPositionChanged=!0;break;case "rotationChanged":this._listenToRotationChanged=!0;break;case "scaleChanged":this._listenToScaleChanged=!0}},removeEventListener:function(a,b,c){null==c&&(c=!1);wa.prototype.removeEventListener.call(this,a,b,c);if(!this.hasEventListener(a))switch(a){case "positionChanged":this._listenToPositionChanged=!1;break;case "rotationChanged":this._listenToRotationChanged=!1;break;case "scaleChanged":this._listenToScaleChanged=
!1}},invalidateRotation:function(){this._rotationDirty||(this._rotationDirty=!0,this.invalidateTransform(),this._listenToRotationChanged&&this.notifyRotationChanged())},notifyRotationChanged:function(){null==this._rotationChanged&&(this._rotationChanged=new jg("rotationChanged",this));this.dispatchEvent(this._rotationChanged)},invalidateScale:function(){this._scaleDirty||(this._scaleDirty=!0,this.invalidateTransform(),this._listenToScaleChanged&&this.notifyScaleChanged())},notifyScaleChanged:function(){null==
this._scaleChanged&&(this._scaleChanged=new jg("scaleChanged",this));this.dispatchEvent(this._scaleChanged)},_transform:null,_scaleX:null,_scaleY:null,_scaleZ:null,_x:null,_y:null,_z:null,_pivotPoint:null,_pivotZero:null,_pos:null,_rot:null,_sca:null,_transformComponents:null,get_x:function(){return this._x},set_x:function(a){if(this._x==a)return a;this._x=a;this.invalidatePosition();return a},get_y:function(){return this._y},set_y:function(a){if(this._y==a)return a;this._y=a;this.invalidatePosition();
return a},get_z:function(){return this._z},set_z:function(a){if(this._z==a)return a;this._z=a;this.invalidatePosition();return a},get_rotationX:function(){return this._rotationX*kg.RADIANS_TO_DEGREES},set_rotationX:function(a){if(this.get_rotationX()==a)return a;this._rotationX=a*kg.DEGREES_TO_RADIANS;this.invalidateRotation();return a},get_rotationY:function(){return this._rotationY*kg.RADIANS_TO_DEGREES},set_rotationY:function(a){if(this.get_rotationY()==a)return a;this._rotationY=a*kg.DEGREES_TO_RADIANS;
this.invalidateRotation();return a},get_rotationZ:function(){return this._rotationZ*kg.RADIANS_TO_DEGREES},set_rotationZ:function(a){if(this.get_rotationZ()==a)return a;this._rotationZ=a*kg.DEGREES_TO_RADIANS;this.invalidateRotation();return a},set_scaleX:function(a){if(this._scaleX==a)return a;this._scaleX=a;this.invalidateScale();return a},set_scaleY:function(a){if(this._scaleY==a)return a;this._scaleY=a;this.invalidateScale();return a},set_scaleZ:function(a){if(this._scaleZ==a)return a;this._scaleZ=
a;this.invalidateScale();return a},get_transform:function(){this._transformDirty&&this.updateTransform();return this._transform},set_transform:function(a){if(0==a.rawData.get(0)){var b=db.RAW_DATA_CONTAINER;a.copyRawDataTo(b);b.set(0,this._smallestNumber);a.copyRawDataFrom(b)}b=db.decompose(a);var c=b.get(0);if(this._x!=c.x||this._y!=c.y||this._z!=c.z)this._x=c.x,this._y=c.y,this._z=c.z,this.invalidatePosition();c=b.get(1);if(this._rotationX!=c.x||this._rotationY!=c.y||this._rotationZ!=c.z)this._rotationX=
c.x,this._rotationY=c.y,this._rotationZ=c.z,this.invalidateRotation();c=b.get(2);if(this._scaleX!=c.x||this._scaleY!=c.y||this._scaleZ!=c.z)this._scaleX=c.x,this._scaleY=c.y,this._scaleZ=c.z,this.invalidateScale();return a},get_position:function(){this.get_transform().copyColumnTo(3,this._pos);return this._pos.clone()},set_position:function(a){this._x=a.x;this._y=a.y;this._z=a.z;this.invalidatePosition();return a},get_forwardVector:function(){return db.getForward(this.get_transform())},get_rightVector:function(){return db.getRight(this.get_transform())},
get_upVector:function(){return db.getUp(this.get_transform())},moveTo:function(a,b,c){if(this._x!=a||this._y!=b||this._z!=c)this._x=a,this._y=b,this._z=c,this.invalidatePosition()},lookAt:function(a,b){null==qb.tempAxeX&&(qb.tempAxeX=new hb);null==qb.tempAxeY&&(qb.tempAxeY=new hb);null==qb.tempAxeZ&&(qb.tempAxeZ=new hb);var c=qb.tempAxeX,d=qb.tempAxeY,e=qb.tempAxeZ;null==b&&(b=new hb(0,1,0));this._transformDirty&&this.updateTransform();e.x=a.x-this._x;e.y=a.y-this._y;e.z=a.z-this._z;e.normalize();
c.x=b.y*e.z-b.z*e.y;c.y=b.z*e.x-b.x*e.z;c.z=b.x*e.y-b.y*e.x;c.normalize();.05>c.get_length()&&(c.x=b.y,c.y=b.x,c.z=0,c.normalize());d.x=e.y*c.z-e.z*c.y;d.y=e.z*c.x-e.x*c.z;d.z=e.x*c.y-e.y*c.x;a=db.RAW_DATA_CONTAINER;a.set(0,this._scaleX*c.x);a.set(1,this._scaleX*c.y);a.set(2,this._scaleX*c.z);a.set(3,0);a.set(4,this._scaleY*d.x);a.set(5,this._scaleY*d.y);a.set(6,this._scaleY*d.z);a.set(7,0);a.set(8,this._scaleZ*e.x);a.set(9,this._scaleZ*e.y);a.set(10,this._scaleZ*e.z);a.set(11,0);a.set(12,this._x);
a.set(13,this._y);a.set(14,this._z);a.set(15,1);this._transform.copyRawDataFrom(a);this.set_transform(this.get_transform());0>e.z&&(this.set_rotationY(180-this.get_rotationY()),this.set_rotationX(this.get_rotationX()-180),this.set_rotationZ(this.get_rotationZ()-180))},invalidateTransform:function(){this._transformDirty=!0},updateTransform:function(){this._pos.x=this._x;this._pos.y=this._y;this._pos.z=this._z;this._rot.x=this._rotationX;this._rot.y=this._rotationY;this._rot.z=this._rotationZ;this._pivotZero?
(this._sca.x=this._scaleX,this._sca.y=this._scaleY,this._sca.z=this._scaleZ,this._transform.recompose(this._transformComponents)):(this._sca.x=1,this._sca.y=1,this._sca.z=1,this._transform.recompose(this._transformComponents),this._transform.appendTranslation(this._pivotPoint.x,this._pivotPoint.y,this._pivotPoint.z),this._transform.prependTranslation(-this._pivotPoint.x,-this._pivotPoint.y,-this._pivotPoint.z),this._transform.prependScale(this._scaleX,this._scaleY,this._scaleZ),this._sca.x=this._scaleX,
this._sca.y=this._scaleY,this._sca.z=this._scaleZ);this._scaleDirty=this._rotationDirty=this._positionDirty=this._transformDirty=!1},get_zOffset:function(){return this._zOffset},__class__:qb});var Ob=function(){this._ignoreTransform=!1;this._scenePositionDirty=this._explicitVisibility=this._implicitVisibility=!0;this._scenePosition=new hb;this._inverseSceneTransformDirty=!0;this._inverseSceneTransform=new vc;this._mouseChildren=!0;this._children=M.toObjectVector(null);this._sceneTransformDirty=!0;
this._sceneTransform=new vc;qb.call(this)};g["away3d.containers.ObjectContainer3D"]=Ob;Ob.__name__="away3d.containers.ObjectContainer3D";Ob.__interfaces__=[zb];Ob.__super__=qb;Ob.prototype=v(qb.prototype,{_ancestorsAllowMouseEnabled:null,_isRoot:null,_scene:null,_parent:null,_sceneTransform:null,_sceneTransformDirty:null,_explicitPartition:null,_implicitPartition:null,_mouseEnabled:null,_sceneTransformChanged:null,_scenechanged:null,_children:null,_mouseChildren:null,_oldScene:null,_inverseSceneTransform:null,
_inverseSceneTransformDirty:null,_scenePosition:null,_scenePositionDirty:null,_explicitVisibility:null,_implicitVisibility:null,_listenToSceneTransformChanged:null,_listenToSceneChanged:null,_ignoreTransform:null,get_implicitPartition:function(){return this._implicitPartition},set_implicitPartition:function(a){if(a==this._implicitPartition)return a;var b=0,c=this._children.get_length();for(this._implicitPartition=a;b<c;){var d=this._children.get(b++);null==d._explicitPartition&&d.set_implicitPartition(a)}return a},
get_isVisible:function(){return this._implicitVisibility?this._explicitVisibility:!1},setParent:function(a){this._parent=a;this.updateMouseChildren();null==a?this.set_scene(null):(this.notifySceneTransformChange(),this.notifySceneChange())},notifySceneTransformChange:function(){if(!this._sceneTransformDirty&&!this._ignoreTransform){this.invalidateSceneTransform();for(var a=0,b=this._children.get_length();a<b;)this._children.get(a++).notifySceneTransformChange();this._listenToSceneTransformChanged&&
(null==this._sceneTransformChanged&&(this._sceneTransformChanged=new jg("scenetransformChanged",this)),this.dispatchEvent(this._sceneTransformChanged))}},notifySceneChange:function(){this.notifySceneTransformChange();for(var a=0,b=this._children.get_length();a<b;)this._children.get(a++).notifySceneChange();this._listenToSceneChanged&&(null==this._scenechanged&&(this._scenechanged=new jg("sceneChanged",this)),this.dispatchEvent(this._scenechanged))},updateMouseChildren:function(){this._ancestorsAllowMouseEnabled=
null==this._parent||this._parent._isRoot?this.get_mouseChildren():this.get_parent()._ancestorsAllowMouseEnabled&&this._parent.get_mouseChildren();for(var a=0,b=this._children.get_length();a<b;){var c=a++;this._children.get(c).updateMouseChildren()}},get_mouseEnabled:function(){return this._mouseEnabled},set_mouseEnabled:function(a){this._mouseEnabled=a;this.updateMouseChildren();return a},invalidateTransform:function(){qb.prototype.invalidateTransform.call(this);this.notifySceneTransformChange()},
invalidateSceneTransform:function(){this._sceneTransformDirty=!this._ignoreTransform;this._inverseSceneTransformDirty=!this._ignoreTransform;this._scenePositionDirty=!this._ignoreTransform},updateSceneTransform:function(){null==this._parent||this._parent._isRoot?this._sceneTransform.copyFrom(this.get_transform()):(this._sceneTransform.copyFrom(this._parent.get_sceneTransform()),this._sceneTransform.prepend(this.get_transform()));this._sceneTransformDirty=!1},get_mouseChildren:function(){return this._mouseChildren},
set_mouseChildren:function(a){this._mouseChildren=a;this.updateMouseChildren();return a},get_scenePosition:function(){this._scenePositionDirty&&(this.get_sceneTransform().copyColumnTo(3,this._scenePosition),this._scenePositionDirty=!1);return this._scenePosition},get_partition:function(){return this._explicitPartition},set_partition:function(a){this._explicitPartition=a;this.set_implicitPartition(null!=a?a:null!=this._parent?this._parent.get_implicitPartition():null);return a},get_sceneTransform:function(){this._sceneTransformDirty&&
this.updateSceneTransform();return this._sceneTransform},set_scene:function(a){for(var b=0,c=this._children.get_length();b<c;)this._children.get(b++).set_scene(a);if(this._scene==a)return a;null==a&&(this._oldScene=this._scene);null!=this._explicitPartition&&null!=this._oldScene&&this._oldScene!=this._scene&&this.set_partition(null);null!=a&&(this._oldScene=null);this._scene=a;null!=this._scene?this._scene.dispatchEvent(new Kg("addedToScene",this)):null!=this._oldScene&&this._oldScene.dispatchEvent(new Kg("removedFromScene",
this));return a},get_inverseSceneTransform:function(){this._inverseSceneTransformDirty&&(this._inverseSceneTransform.copyFrom(this.get_sceneTransform()),this._inverseSceneTransform.invert(),this._inverseSceneTransformDirty=!1);return this._inverseSceneTransform},get_parent:function(){return this._parent},addChild:function(a){if(null==a)throw new W(new cb("Parameter child cannot be null."));null!=a._parent&&a._parent.removeChild(a);null==a._explicitPartition&&a.set_implicitPartition(this._implicitPartition);
a.setParent(this);a.set_scene(this._scene);a.notifySceneTransformChange();a.updateMouseChildren();a.updateImplicitVisibility();this._children.push(a);return a},removeChild:function(a){if(null==a)throw new W(new cb("Parameter child cannot be null"));var b=this._children.indexOf(a,0);if(-1==b)throw new W(new cb("Parameter is not a child of the caller"));this.removeChildInternal(b,a)},removeChildInternal:function(a,b){this._children.splice(a,1);b.setParent(null);null==b._explicitPartition&&b.set_implicitPartition(null)},
lookAt:function(a,b){qb.prototype.lookAt.call(this,a,b);this.notifySceneTransformChange()},dispose:function(){null!=this.get_parent()&&this.get_parent().removeChild(this)},dispatchEvent:function(a){var b=qb.prototype.dispatchEvent.call(this,a);a.bubbles&&(null!=this._parent?this._parent.dispatchEvent(a):null!=this._scene&&this._scene.dispatchEvent(a));return b},updateImplicitVisibility:function(){var a=this._children.get_length();this._implicitVisibility=this._parent._explicitVisibility&&this._parent._implicitVisibility;
for(var b=0;b<a;){var c=b++;this._children.get(c).updateImplicitVisibility()}},addEventListener:function(a,b,c,d,e){null==e&&(e=!1);null==d&&(d=0);null==c&&(c=!1);qb.prototype.addEventListener.call(this,a,b,c,d,e);switch(a){case "sceneChanged":this._listenToSceneChanged=!0;break;case "scenetransformChanged":this._listenToSceneTransformChanged=!0}},removeEventListener:function(a,b,c){null==c&&(c=!1);qb.prototype.removeEventListener.call(this,a,b,c);if(!this.hasEventListener(a))switch(a){case "sceneChanged":this._listenToSceneChanged=
!1;break;case "scenetransformChanged":this._listenToSceneTransformChanged=!1}},__class__:Ob});var Ha=function(){this._boundsInvalid=this._worldBoundsInvalid=!0;Ob.call(this);this._bounds=this.getDefaultBoundingVolume();this._worldBounds=this.getDefaultBoundingVolume()};g["away3d.entities.Entity"]=Ha;Ha.__name__="away3d.entities.Entity";Ha.__super__=Ob;Ha.prototype=v(Ob.prototype,{_partitionNode:null,_pickingCollisionVO:null,_pickingCollider:null,_bounds:null,_boundsInvalid:null,_worldBounds:null,
_worldBoundsInvalid:null,get_pickingCollisionVO:function(){null==this._pickingCollisionVO&&(this._pickingCollisionVO=new Sh(this));return this._pickingCollisionVO},collidesBefore:function(a,b){return!0},get_bounds:function(){this._boundsInvalid&&this.updateBounds();return this._bounds},get_worldBounds:function(){this._worldBoundsInvalid&&this.updateWorldBounds();return this._worldBounds},updateWorldBounds:function(){this._worldBounds.transformFrom(this.get_bounds(),this.get_sceneTransform());this._worldBoundsInvalid=
!1},set_implicitPartition:function(a){if(a==this._implicitPartition)return a;null!=this._implicitPartition&&this.notifyPartitionUnassigned();Ob.prototype.set_implicitPartition.call(this,a);this.notifyPartitionAssigned();return a},set_scene:function(a){if(a==this._scene)return a;null!=this._scene&&this._scene.unregisterEntity(this);null!=a&&a.registerEntity(this);Ob.prototype.set_scene.call(this,a);return a},get_pickingCollider:function(){return this._pickingCollider},set_pickingCollider:function(a){return this._pickingCollider=
a},getEntityPartitionNode:function(){null==this._partitionNode&&(this._partitionNode=this.createEntityPartitionNode());return this._partitionNode},isIntersectingRay:function(a,b){null==this.get_pickingCollisionVO().localRayPosition&&(this.get_pickingCollisionVO().localRayPosition=new hb);null==this.get_pickingCollisionVO().localRayDirection&&(this.get_pickingCollisionVO().localRayDirection=new hb);null==this.get_pickingCollisionVO().localNormal&&(this.get_pickingCollisionVO().localNormal=new hb);
var c=this.get_pickingCollisionVO().localRayPosition,d=this.get_pickingCollisionVO().localRayDirection;db.transformVector(this.get_inverseSceneTransform(),a,c);db.deltaTransformVector(this.get_inverseSceneTransform(),b,d);c=this.get_bounds().rayIntersection(c,d,this.get_pickingCollisionVO().localNormal);if(0>c)return!1;this.get_pickingCollisionVO().rayEntryDistance=c;this.get_pickingCollisionVO().rayPosition=a;this.get_pickingCollisionVO().rayDirection=b;this.get_pickingCollisionVO().rayOriginIsInsideBounds=
0==c;return!0},createEntityPartitionNode:function(){throw new W(new tb);},getDefaultBoundingVolume:function(){return new Ta},updateBounds:function(){throw new W(new tb);},invalidateSceneTransform:function(){this._ignoreTransform||(Ob.prototype.invalidateSceneTransform.call(this),this._worldBoundsInvalid=!0,this.notifySceneBoundsInvalid())},invalidateBounds:function(){this._worldBoundsInvalid=this._boundsInvalid=!0;this.notifySceneBoundsInvalid()},updateMouseChildren:function(){if(null==this._parent&&
null!=this.get_pickingCollider()&&this._parent instanceof Ha){var a=Ka.__cast(this._parent,Ha).get_pickingCollider();null!=a&&this.set_pickingCollider(a)}Ob.prototype.updateMouseChildren.call(this)},notifySceneBoundsInvalid:function(){null!=this._scene&&this._scene.invalidateEntityBounds(this)},notifyPartitionAssigned:function(){null!=this._scene&&this._scene.registerPartition(this)},notifyPartitionUnassigned:function(){null!=this._scene&&this._scene.unregisterPartition(this)},internalUpdate:function(){null!=
this._controller&&this._controller.update()},__class__:Ha});var je=function(a){this._viewProjectionDirty=this._frustumPlanesDirty=!0;this._viewProjection=new vc;Ha.call(this);this._lens=a;null==this._lens&&(this._lens=new Je);this._lens.addEventListener("matrixChanged",u(this,this.onLensMatrixChanged));this._frustumPlanes=M.toObjectVector(null,6,!0);this._frustumPlanes.set(0,new lg);this._frustumPlanes.set(1,new lg);this._frustumPlanes.set(2,new lg);this._frustumPlanes.set(3,new lg);this._frustumPlanes.set(4,
new lg);this._frustumPlanes.set(5,new lg);this.set_z(-1E3)};g["away3d.cameras.Camera3D"]=je;je.__name__="away3d.cameras.Camera3D";je.__super__=Ha;je.prototype=v(Ha.prototype,{_viewProjection:null,_viewProjectionDirty:null,_lens:null,_frustumPlanes:null,_frustumPlanesDirty:null,getDefaultBoundingVolume:function(){return new Fb},onLensMatrixChanged:function(a){this._frustumPlanesDirty=this._viewProjectionDirty=!0;this.dispatchEvent(a)},get_frustumPlanes:function(){this._frustumPlanesDirty&&this.updateFrustum();
return this._frustumPlanes},updateFrustum:function(){var a=db.RAW_DATA_CONTAINER;this.get_viewProjection().copyRawDataTo(a);var b=a.get(0),c=a.get(4),d=a.get(8),e=a.get(12),f=a.get(1),k=a.get(5),m=a.get(9),h=a.get(13),n=a.get(2),K=a.get(6),l=a.get(10),Bb=a.get(14),g=a.get(3),H=a.get(7),C=a.get(11);a=a.get(15);var p=this._frustumPlanes.get(0),I=g+b,Yb=H+c,y=C+d,r=1/Math.sqrt(I*I+Yb*Yb+y*y);p.a=I*r;p.b=Yb*r;p.c=y*r;p.d=-(a+e)*r;p=this._frustumPlanes.get(1);I=g-b;Yb=H-c;y=C-d;r=1/Math.sqrt(I*I+Yb*Yb+
y*y);p.a=I*r;p.b=Yb*r;p.c=y*r;p.d=(e-a)*r;p=this._frustumPlanes.get(2);I=g+f;Yb=H+k;y=C+m;r=1/Math.sqrt(I*I+Yb*Yb+y*y);p.a=I*r;p.b=Yb*r;p.c=y*r;p.d=-(a+h)*r;p=this._frustumPlanes.get(3);I=g-f;Yb=H-k;y=C-m;r=1/Math.sqrt(I*I+Yb*Yb+y*y);p.a=I*r;p.b=Yb*r;p.c=y*r;p.d=(h-a)*r;p=this._frustumPlanes.get(4);I=n;Yb=K;y=l;r=1/Math.sqrt(I*I+Yb*Yb+y*y);p.a=I*r;p.b=Yb*r;p.c=y*r;p.d=-Bb*r;p=this._frustumPlanes.get(5);I=g-n;Yb=H-K;y=C-l;r=1/Math.sqrt(I*I+Yb*Yb+y*y);p.a=I*r;p.b=Yb*r;p.c=y*r;p.d=(Bb-a)*r;this._frustumPlanesDirty=
!1},invalidateSceneTransform:function(){Ha.prototype.invalidateSceneTransform.call(this);this._frustumPlanesDirty=this._viewProjectionDirty=!0},updateBounds:function(){this._bounds.nullify();this._boundsInvalid=!1},createEntityPartitionNode:function(){return new Lg(this)},get_lens:function(){return this._lens},get_viewProjection:function(){this._viewProjectionDirty&&(this._viewProjection.copyFrom(this.get_inverseSceneTransform()),this._viewProjection.append(this._lens.get_matrix()),this._viewProjectionDirty=
!1);return this._viewProjection},unproject:function(a,b,c,d){return db.transformVector(this.get_sceneTransform(),this.get_lens().unproject(a,b,c,d),d)},__class__:je});var Cd=function(){this._unprojectionInvalid=!0;this._frustumCorners=M.toFloatVector(null,24,!0);this._matrixInvalid=!0;this._aspectRatio=1;this._far=3E3;this._near=20;this._viewPort=new ya;this._scissorRect=new ya;aa.call(this);this._matrix=new vc};g["away3d.cameras.lenses.LensBase"]=Cd;Cd.__name__="away3d.cameras.lenses.LensBase";Cd.__super__=
aa;Cd.prototype=v(aa.prototype,{_matrix:null,_scissorRect:null,_viewPort:null,_near:null,_far:null,_aspectRatio:null,_matrixInvalid:null,_frustumCorners:null,_unprojection:null,_unprojectionInvalid:null,get_frustumCorners:function(){return this._frustumCorners},get_matrix:function(){this._matrixInvalid&&(this.updateMatrix(),this._matrixInvalid=!1);return this._matrix},set_matrix:function(a){this._matrix=a;this.invalidateMatrix();return a},get_near:function(){return this._near},set_near:function(a){if(a==
this._near)return a;this._near=a;this.invalidateMatrix();return a},get_far:function(){return this._far},set_far:function(a){if(a==this._far)return a;this._far=a;this.invalidateMatrix();return a},get_unprojectionMatrix:function(){this._unprojectionInvalid&&(null==this._unprojection&&(this._unprojection=new vc),this._unprojection.copyFrom(this.get_matrix()),this._unprojection.invert(),this._unprojectionInvalid=!1);return this._unprojection},unproject:function(a,b,c,d){throw new W(new tb);},set_aspectRatio:function(a){if(this._aspectRatio==
a||0!=0*a)return a;this._aspectRatio=a;this.invalidateMatrix();return a},invalidateMatrix:function(){this._unprojectionInvalid=this._matrixInvalid=!0;this.dispatchEvent(new Mg("matrixChanged",this))},updateMatrix:function(){throw new W(new tb);},updateScissorRect:function(a,b,c,d){this._scissorRect.x=a;this._scissorRect.y=b;this._scissorRect.width=c;this._scissorRect.height=d;this.invalidateMatrix()},updateViewport:function(a,b,c,d){this._viewPort.x=a;this._viewPort.y=b;this._viewPort.width=c;this._viewPort.height=
d;this.invalidateMatrix()},__class__:Cd});var Th=function(){Cd.call(this);this._matrix.copyFrom((new Je).get_matrix())};g["away3d.cameras.lenses.FreeMatrixLens"]=Th;Th.__name__="away3d.cameras.lenses.FreeMatrixLens";Th.__super__=Cd;Th.prototype=v(Cd.prototype,{set_near:function(a){return this._near=a},set_far:function(a){return this._far=a},set_aspectRatio:function(a){return this._aspectRatio=a},updateMatrix:function(){this._matrixInvalid=!1},__class__:Th});var Je=function(a,b){null==b&&(b=0);null==
a&&(a=60);Cd.call(this);this.set_fieldOfView(a);this.set_coordinateSystem(b)};g["away3d.cameras.lenses.PerspectiveLens"]=Je;Je.__name__="away3d.cameras.lenses.PerspectiveLens";Je.__super__=Cd;Je.prototype=v(Cd.prototype,{_fieldOfView:null,_focalLength:null,_focalLengthInv:null,_yMax:null,_xMax:null,_coordinateSystem:null,set_fieldOfView:function(a){if(a==this._fieldOfView)return a;this._fieldOfView=a;this._focalLengthInv=Math.tan(this._fieldOfView*Math.PI/360);this._focalLength=1/this._focalLengthInv;
this.invalidateMatrix();return a},unproject:function(a,b,c,d){null==d&&(d=new hb);d.x=a;d.y=-b;d.z=c;d.w=1;d.x*=c;d.y*=c;db.transformVector(this.get_unprojectionMatrix(),d,d);d.z=c;return d},set_coordinateSystem:function(a){if(a==this._coordinateSystem)return a;this._coordinateSystem=a;this.invalidateMatrix();return a},updateMatrix:function(){var a=db.RAW_DATA_CONTAINER;this._yMax=this._near*this._focalLengthInv;this._xMax=this._yMax*this._aspectRatio;if(0==this._scissorRect.x&&0==this._scissorRect.y&&
this._scissorRect.width==this._viewPort.width&&this._scissorRect.height==this._viewPort.height){var b=-this._xMax;var c=this._xMax;var d=-this._yMax;var e=this._yMax;a.set(0,this._near/this._xMax);a.set(5,this._near/this._yMax);a.set(10,this._far/(this._far-this._near));a.set(11,1);a.set(1,a.set(2,a.set(3,a.set(4,a.set(6,a.set(7,a.set(8,a.set(9,a.set(12,a.set(13,a.set(15,0)))))))))));a.set(14,-this._near*a.get(10))}else{c=this._viewPort.width/this._scissorRect.width*this._xMax;e=this._viewPort.height/
this._scissorRect.height*this._yMax;d=this._xMax*(2*this._scissorRect.x-this._viewPort.width)/this._scissorRect.width+this._xMax;var f=-this._yMax*(2*this._scissorRect.y-this._viewPort.height)/this._scissorRect.height-this._yMax;b=d-c;c=d+c;d=f-e;e=f+e;a.set(0,2*this._near/(c-b));a.set(5,2*this._near/(e-d));a.set(8,(c+b)/(c-b));a.set(9,(e+d)/(e-d));a.set(10,(this._far+this._near)/(this._far-this._near));a.set(11,1);a.set(1,a.set(2,a.set(3,a.set(4,a.set(6,a.set(7,a.set(12,a.set(13,a.set(15,0)))))))));
a.set(14,-2*this._far*this._near/(this._far-this._near))}1==this._coordinateSystem&&a.set(5,-a.get(5));this._matrix.copyRawDataFrom(a);a=this._far*this._focalLengthInv;f=a*this._aspectRatio;this._frustumCorners.set(0,this._frustumCorners.set(9,b));this._frustumCorners.set(3,this._frustumCorners.set(6,c));this._frustumCorners.set(1,this._frustumCorners.set(4,d));this._frustumCorners.set(7,this._frustumCorners.set(10,e));this._frustumCorners.set(12,this._frustumCorners.set(21,-f));this._frustumCorners.set(15,
this._frustumCorners.set(18,f));this._frustumCorners.set(13,this._frustumCorners.set(16,-a));this._frustumCorners.set(19,this._frustumCorners.set(22,a));this._frustumCorners.set(2,this._frustumCorners.set(5,this._frustumCorners.set(8,this._frustumCorners.set(11,this._near))));this._frustumCorners.set(14,this._frustumCorners.set(17,this._frustumCorners.set(20,this._frustumCorners.set(23,this._far))));this._matrixInvalid=!1},__class__:Je});var Ff=function(){this._partitions=M.toObjectVector(null);this._sceneGraphRoot=
new Ob;this._sceneGraphRoot.set_scene(this);this._sceneGraphRoot._isRoot=!0;this._sceneGraphRoot.set_partition(new Uh(new We));aa.call(this)};g["away3d.containers.Scene3D"]=Ff;Ff.__name__="away3d.containers.Scene3D";Ff.__super__=aa;Ff.prototype=v(aa.prototype,{_sceneGraphRoot:null,_partitions:null,traversePartitions:function(a){var b=0,c=this._partitions.get_length();for(a.scene=this;b<c;)this._partitions.get(b++).traverse(a)},get_partition:function(){return this._sceneGraphRoot.get_partition()},
addChild:function(a){return this._sceneGraphRoot.addChild(a)},registerEntity:function(a){var b=a.get_implicitPartition();this.addPartitionUnique(b);b.markForUpdate(a)},unregisterEntity:function(a){a.get_implicitPartition().removeEntity(a)},invalidateEntityBounds:function(a){a.get_implicitPartition().markForUpdate(a)},registerPartition:function(a){this.addPartitionUnique(a.get_implicitPartition())},unregisterPartition:function(a){a.get_implicitPartition().removeEntity(a)},addPartitionUnique:function(a){-1==
this._partitions.indexOf(a,0)&&this._partitions.push(a)},__class__:Ff});var Sd=function(a,b,c,d,e,f){null==f&&(f=-1);null==e&&(e="baseline");null==d&&(d=!1);this._contextIndex=-1;this._layeredView=!1;this._scissorRectDirty=this._viewportDirty=!0;this._shareContext=!1;this._depthTextureInvalid=this._backBufferInvalid=!0;this._globalWidth=this._globalHeight=this._time=this._backgroundColor=0;this._globalPos=new ob;this._localBRPos=new ob;this._localTLPos=new ob;this._width=this._height=0;ka.call(this);
this._profile=e;this._scene=null!=a?a:new Ff;this._scene.addEventListener("partitionChanged",u(this,this.onScenePartitionChanged));this._camera=null!=b?b:new je;this._renderer=null!=c?c:new ae;this._depthRenderer=new Xe;this._forceSoftware=d;this._contextIndex=f;this._entityCollector=this._renderer.createEntityCollector();this._entityCollector.set_camera(this._camera);this._scissorRect=new ya;this.initHitField();this._mouse3DManager=new xa;this._mouse3DManager.enableMouseListeners(this);this._touch3DManager=
new Bc;this._touch3DManager.set_view(this);this._touch3DManager.enableTouchListeners(this);this.addEventListener("addedToStage",u(this,this.onAddedToStage),!1,0,!0);this.addEventListener("added",u(this,this.onAdded),!1,0,!0);this._camera.addEventListener("lensChanged",u(this,this.onLensChanged));this._camera.set_partition(this._scene.get_partition())};g["away3d.containers.View3D"]=Sd;Sd.__name__="away3d.containers.View3D";Sd.__super__=ka;Sd.prototype=v(ka.prototype,{_width:null,_height:null,_localTLPos:null,
_localBRPos:null,_globalPos:null,_globalWidth:null,_globalHeight:null,_globalPosDirty:null,_scene:null,_camera:null,_entityCollector:null,_aspectRatio:null,_time:null,_deltaTime:null,_backgroundColor:null,_mouse3DManager:null,_touch3DManager:null,_renderer:null,_depthRenderer:null,_addedToStage:null,_forceSoftware:null,_filter3DRenderer:null,_requireDepthRender:null,_depthRender:null,_depthTextureInvalid:null,_hitField:null,_parentIsStage:null,_stage3DProxy:null,_backBufferInvalid:null,_antiAlias:null,
_rttBufferManager:null,_shareContext:null,_scissorRect:null,_scissorRectDirty:null,_viewportDirty:null,_depthPrepass:null,_profile:null,_layeredView:null,_contextIndex:null,onScenePartitionChanged:function(a){null!=this._camera&&this._camera.set_partition(this.get_scene().get_partition())},get_stage3DProxy:function(){return this._stage3DProxy},onContext3DRecreated:function(a){this._depthTextureInvalid=!0},get_layeredView:function(){return this._layeredView},initHitField:function(){this._hitField=
new ka;this._hitField.set_alpha(0);this._hitField.doubleClickEnabled=!0;this._hitField.get_graphics().beginFill(0);this._hitField.get_graphics().drawRect(0,0,100,100);this.addChild(this._hitField)},set_backgroundColor:function(a){this._backgroundColor=a;this._renderer.set_backgroundR(Xa.toFloat(a>>>16&255)/Xa.toFloat(255));this._renderer.set_backgroundG(Xa.toFloat(a>>>8&255)/Xa.toFloat(255));this._renderer.set_backgroundB(Xa.toFloat(a&255)/Xa.toFloat(255));return a},get_camera:function(){return this._camera},
get_scene:function(){return this._scene},set_filters:function(a){throw new W(new cb("filters is not supported in View3D. Use filters3d instead."));},get_width:function(){return this._width},set_width:function(a){null!=this._stage3DProxy&&this._stage3DProxy.get_usesSoftwareRendering()&&2048<a&&(a=2048);if(this._width==a)return a;this._hitField.set_width(a);this._width=a;this._localBRPos.x=a+this._localTLPos.x;this._globalWidth=null!=this.parent?this.parent.localToGlobal(this._localBRPos).x-this._globalPos.x:
a;null!=this._rttBufferManager&&this._rttBufferManager.set_viewWidth(this._globalWidth|0);this._aspectRatio=this._globalWidth/this._globalHeight;this._camera.get_lens().set_aspectRatio(this._aspectRatio);this._depthTextureInvalid=!0;this._renderer.set_viewWidth(this._globalWidth);this._scissorRect.width=this._globalWidth;this._scissorRectDirty=this._backBufferInvalid=!0;return a},get_height:function(){return this._height},set_height:function(a){null!=this._stage3DProxy&&this._stage3DProxy.get_usesSoftwareRendering()&&
2048<a&&(a=2048);if(this._height==a)return a;this._hitField.set_height(a);this._height=a;this._localBRPos.y=a+this._localTLPos.y;this._globalHeight=null!=this.parent?this.parent.localToGlobal(this._localBRPos).y-this._globalPos.y:a;null!=this._rttBufferManager&&this._rttBufferManager.set_viewHeight(this._globalHeight|0);this._aspectRatio=this._globalWidth/this._globalHeight;this._camera.get_lens().set_aspectRatio(this._aspectRatio);this._depthTextureInvalid=!0;this._renderer.set_viewHeight(this._globalHeight);
this._scissorRect.height=this._globalHeight;this._scissorRectDirty=this._backBufferInvalid=!0;return a},set_x:function(a){if(this.get_x()==a)return a;ka.prototype.set_x.call(this,a);this._localTLPos.x=a;var b=null!=this.parent?this.parent.localToGlobal(this._localTLPos).x:a;this._globalPos.x=b;this._globalPosDirty=!0;return a},set_y:function(a){if(this.get_y()==a)return a;ka.prototype.set_y.call(this,a);this._localTLPos.y=a;var b=null!=this.parent?this.parent.localToGlobal(this._localTLPos).y:a;this._globalPos.y=
b;this._globalPosDirty=!0;return a},set_visible:function(a){ka.prototype.set_visible.call(this,a);null==this._stage3DProxy||this._shareContext||this._stage3DProxy.set_visible(a);return a},get_shareContext:function(){return this._shareContext},updateBackBuffer:function(){if(null!=this._stage3DProxy.get_context3D()&&!this._shareContext)if(0<this._globalWidth&&0<this._globalHeight)this._stage3DProxy.get_usesSoftwareRendering()&&(2048<this._globalWidth&&(this._globalWidth=2048),2048<this._globalHeight&&
(this._globalHeight=2048)),this._stage3DProxy.configureBackBuffer(this._globalWidth|0,this._globalHeight|0,this._antiAlias,!0),this._backBufferInvalid=!1;else{var a=new ob(this.stage.get_x()+this.stage.stageWidth,this.stage.get_y()+this.stage.stageHeight);this.set_width(null!=this.parent?this.parent.globalToLocal(a).x-this._localTLPos.x:this.stage.stageWidth);this.set_height(null!=this.parent?this.parent.globalToLocal(a).y-this._localTLPos.y:this.stage.stageHeight)}},render:function(){eb.drawTriangleCount=
0;if(null!=this.get_stage3DProxy().get_context3D()&&this.get_stage3DProxy().recoverFromDisposal()){this._backBufferInvalid&&this.updateBackBuffer();this._shareContext&&this._layeredView&&this.get_stage3DProxy().clearDepthBuffer();if(!this._parentIsStage){var a=this.parent.localToGlobal(this._localTLPos);if(this._globalPos.x!=a.x||this._globalPos.y!=a.y)this._globalPos=a,this._globalPosDirty=!0}this._globalPosDirty&&this.updateGlobalPos();this.updateTime();this.updateViewSizeData();this._entityCollector.clear();
this._scene.traversePartitions(this._entityCollector);this._mouse3DManager.updateCollider(this);this._touch3DManager.updateCollider();this._requireDepthRender&&this.renderSceneDepthToTexture(this._entityCollector);this._depthPrepass&&this.renderDepthPrepass(this._entityCollector);this._renderer.set_clearOnRender(!this._depthPrepass);null!=this._filter3DRenderer&&null!=this._stage3DProxy.get_context3D()?(this._renderer.render(this._entityCollector,this._filter3DRenderer.getMainInputTexture(this._stage3DProxy),
this._rttBufferManager.get_renderToTextureRect()),this._filter3DRenderer.render(this._stage3DProxy,this.get_camera(),this._depthRender)):(this._renderer.set_shareContext(this._shareContext),this._shareContext?this._renderer.render(this._entityCollector,null,this._scissorRect):this._renderer.render(this._entityCollector));this._shareContext||(this.get_stage3DProxy().present(),this._mouse3DManager.fireMouseEvents(),this._touch3DManager.fireTouchEvents());this._entityCollector.cleanUp();this.get_stage3DProxy().set_bufferClear(!1)}else this._backBufferInvalid=
!0},updateGlobalPos:function(){this._globalPosDirty=!1;if(null!=this._stage3DProxy){if(this._shareContext){var a=this._globalPos.x,b=this._stage3DProxy.get_x();this._scissorRect.x=a-b;a=this._globalPos.y;b=this._stage3DProxy.get_y();this._scissorRect.y=a-b}else this._scissorRect.x=0,this._scissorRect.y=0,this._stage3DProxy.set_x(this._globalPos.x),this._stage3DProxy.set_y(this._globalPos.y);this._scissorRectDirty=!0}},updateTime:function(){var a=Qb.getTimer();0==this._time&&(this._time=a);this._deltaTime=
a-this._time;this._time=a},updateViewSizeData:function(){this._camera.get_lens().set_aspectRatio(this._aspectRatio);this._scissorRectDirty&&(this._scissorRectDirty=!1,this._camera.get_lens().updateScissorRect(this._scissorRect.x,this._scissorRect.y,this._scissorRect.width,this._scissorRect.height));this._viewportDirty&&(this._viewportDirty=!1,this._camera.get_lens().updateViewport(this._stage3DProxy.get_viewPort().x,this._stage3DProxy.get_viewPort().y,this._stage3DProxy.get_viewPort().width,this._stage3DProxy.get_viewPort().height));
null!=this._filter3DRenderer||this._renderer.get_renderToTexture()?(this._renderer.set_textureRatioX(this._rttBufferManager.get_textureRatioX()),this._renderer.set_textureRatioY(this._rttBufferManager.get_textureRatioY())):(this._renderer.set_textureRatioX(1),this._renderer.set_textureRatioY(1))},renderDepthPrepass:function(a){this._depthRenderer.set_disableColor(!0);null!=this._filter3DRenderer||this._renderer.get_renderToTexture()?(this._depthRenderer.set_textureRatioX(this._rttBufferManager.get_textureRatioX()),
this._depthRenderer.set_textureRatioY(this._rttBufferManager.get_textureRatioY()),this._depthRenderer.render(a,this._filter3DRenderer.getMainInputTexture(this._stage3DProxy),this._rttBufferManager.get_renderToTextureRect())):(this._depthRenderer.set_textureRatioX(1),this._depthRenderer.set_textureRatioY(1),this._depthRenderer.render(a));this._depthRenderer.set_disableColor(!1)},renderSceneDepthToTexture:function(a){(this._depthTextureInvalid||null==this._depthRender)&&this.initDepthTexture(this._stage3DProxy.get_context3D());
this._depthRenderer.set_textureRatioX(this._rttBufferManager.get_textureRatioX());this._depthRenderer.set_textureRatioY(this._rttBufferManager.get_textureRatioY());this._depthRenderer.render(a,this._depthRender)},initDepthTexture:function(a){this._depthTextureInvalid=!1;null!=this._depthRender&&this._depthRender.dispose();this._depthRender=a.createTexture(this._rttBufferManager.get_textureWidth(),this._rttBufferManager.get_textureHeight(),1,!0)},unproject:function(a,b,c,d){return this._camera.unproject((2*
(a-this._globalPos.x)-this._globalWidth)/this._stage3DProxy.get_width(),(2*(b-this._globalPos.y)-this._globalHeight)/this._stage3DProxy.get_height(),c,d)},entityCollector:null,get_entityCollector:function(){return this._entityCollector},onLensChanged:function(a){this._viewportDirty=this._scissorRectDirty=!0},onAddedToStage:function(a){this._addedToStage||(this._addedToStage=!0,null==this._stage3DProxy&&(this._stage3DProxy=-1==this._contextIndex?cc.getInstance(this.stage).getFreeStage3DProxy(this._forceSoftware,
this._profile):cc.getInstance(this.stage).getStage3DProxy(this._contextIndex,this._forceSoftware,this._profile),this._stage3DProxy.addEventListener("ViewportUpdated",u(this,this.onViewportUpdated)),this._stage3DProxy.addEventListener("Context3DRecreated",u(this,this.onContext3DRecreated))),this._globalPosDirty=!0,this._rttBufferManager=Wd.getInstance(this._stage3DProxy),this._renderer.set_stage3DProxy(this._depthRenderer.set_stage3DProxy(this._stage3DProxy)),a=new ob(this.stage.get_x()+this.stage.stageWidth,
this.stage.get_y()+this.stage.stageHeight),0==this._globalWidth?this.set_width(null!=this.parent?this.parent.globalToLocal(a).x-this._localTLPos.x:this.stage.stageWidth):this._rttBufferManager.set_viewWidth(this._globalWidth|0),0==this._globalHeight?this.set_height(null!=this.parent?this.parent.globalToLocal(a).y-this._localTLPos.y:this.stage.stageHeight):this._rttBufferManager.set_viewHeight(this._globalHeight|0),this._shareContext&&this._mouse3DManager.addViewLayer(this))},onAdded:function(a){this._parentIsStage=
this.parent==this.stage;this._globalPos=this.parent.localToGlobal(this._localTLPos);this._globalPosDirty=!0},onViewportUpdated:function(a){if(this._shareContext){a=this._globalPos.x;var b=this._stage3DProxy.get_x();this._scissorRect.x=a-b;a=this._globalPos.y;b=this._stage3DProxy.get_y();this._scissorRect.y=a-b;this._scissorRect.width=this._globalWidth;this._scissorRect.height=this._globalHeight;this._scissorRectDirty=!0}this._viewportDirty=!0},__class__:Sd});var El=function(a){this._autoUpdate=!0;
this.set_targetObject(a)};g["away3d.controllers.ControllerBase"]=El;El.__name__="away3d.controllers.ControllerBase";El.prototype={_autoUpdate:null,_targetObject:null,notifyUpdate:function(){null!=this._targetObject&&null!=this._targetObject.get_implicitPartition()&&this._autoUpdate&&this._targetObject.get_implicitPartition().markForUpdate(this._targetObject)},set_targetObject:function(a){if(this._targetObject==a)return a;null!=this._targetObject&&this._autoUpdate&&(this._targetObject._controller=
null);this._targetObject=a;null!=this._targetObject&&this._autoUpdate&&(this._targetObject._controller=this);this.notifyUpdate();return a},update:function(a){throw new W(new tb);},__class__:El};var Ke=function(){this._uvsDirty=!0;this._scaleU=this._scaleV=1;this._vertexNormalsDirty=this._vertexTangentsDirty=!0;this._autoGenerateUVs=this._useFaceWeights=!1;this._autoDeriveVertexNormals=this._autoDeriveVertexTangents=!0;this._indicesInvalid=M.toBoolVector(null,8,!0);this._indexBufferContext=M.toObjectVector(null,
8);this._indexBuffer=M.toObjectVector(null,8);this._faceNormalsDirty=this._faceTangentsDirty=!0};g["away3d.core.base.SubGeometryBase"]=Ke;Ke.__name__="away3d.core.base.SubGeometryBase";Ke.prototype={_parentGeometry:null,_vertexData:null,_faceNormalsDirty:null,_faceTangentsDirty:null,_faceTangents:null,_indices:null,_indexBuffer:null,_numIndices:null,_indexBufferContext:null,_indicesInvalid:null,_numTriangles:null,_autoDeriveVertexNormals:null,_autoDeriveVertexTangents:null,_autoGenerateUVs:null,_useFaceWeights:null,
_vertexNormalsDirty:null,_vertexTangentsDirty:null,_faceNormals:null,_faceWeights:null,_scaleU:null,_scaleV:null,_uvsDirty:null,set_autoGenerateDummyUVs:function(a){return this._uvsDirty=this._autoGenerateUVs=a},get_numTriangles:function(){return this._numTriangles},getIndexBuffer:function(a){var b=a._stage3DIndex,c=a._context3D;if(null==this._indexBuffer.get(b)||this._indexBufferContext.get(b)!=c)this._indexBuffer.set(b,a.createIndexBuffer(this._numIndices)),this._indexBufferContext.set(b,c),this._indicesInvalid.set(b,
!0);this._indicesInvalid.get(b)&&(this._indexBuffer.get(b).uploadFromVector(this._indices,0,this._numIndices),this._indicesInvalid.set(b,!1));return this._indexBuffer.get(b)},updateFaceTangents:function(){var a=0,b=this._indices.get_length(),c=this._vertexData,d=this.get_UVData(),e=this.get_vertexStride(),f=this.get_vertexOffset(),k=this.get_UVStride(),m=this.get_UVOffset();null==this._faceTangents&&(this._faceTangents=M.toFloatVector(null,this._indices.get_length(),!0));for(;a<b;){var h=this._indices.get(a);
var n=this._indices.get(a+1);var K=this._indices.get(a+2);var l=m+h*k+1;var Bb=d.get(l);l=m+n*k+1;var g=d.get(l)-Bb;l=m+K*k+1;l=d.get(l)-Bb;Bb=f+h*e;var p=c.get(Bb);var C=c.get(Bb+1);var y=c.get(Bb+2);Bb=f+n*e;var I=c.get(Bb)-p;h=c.get(Bb+1)-C;n=c.get(Bb+2)-y;Bb=f+K*e;K=c.get(Bb)-p;C=c.get(Bb+1)-C;Bb=c.get(Bb+2)-y;K=l*I-g*K;h=l*h-g*C;l=l*n-g*Bb;g=1/Math.sqrt(K*K+h*h+l*l);this._faceTangents.set(a++,g*K);this._faceTangents.set(a++,g*h);this._faceTangents.set(a++,g*l)}this._faceTangentsDirty=!1},updateFaceNormals:function(){var a=
0,b=0,c=0,d=this._indices.get_length(),e=this._vertexData,f=this.get_vertexStride(),k=this.get_vertexOffset();null==this._faceNormals&&(this._faceNormals=M.toFloatVector(null,d,!0));null==this._faceWeights&&(this._faceWeights=M.toFloatVector(null,d/3|0,!0));for(;a<d;){var m=k+this._indices.get(a++)*f;var h=e.get(m);var n=e.get(m+1);var K=e.get(m+2);m=k+this._indices.get(a++)*f;var l=e.get(m);var Bb=e.get(m+1);var g=e.get(m+2);m=k+this._indices.get(a++)*f;var p=e.get(m);var C=e.get(m+1);m=e.get(m+
2);p-=h;C-=n;m-=K;h=l-h;n=Bb-n;g-=K;K=m*n-C*g;g=p*g-m*h;p=C*h-p*n;C=Math.sqrt(K*K+g*g+p*p);this._useFaceWeights&&(n=1E4*C,1>n&&(n=1),this._faceWeights.set(c++,n));C=1/C;this._faceNormals.set(b++,K*C);this._faceNormals.set(b++,g*C);this._faceNormals.set(b++,p*C)}this._faceNormalsDirty=!1},updateVertexNormals:function(a){this._faceNormalsDirty&&this.updateFaceNormals();var b=0,c=1,d=2,e=this._vertexData.get_length(),f=this.get_vertexNormalStride(),k=this.get_vertexNormalOffset();null==a&&(a=M.toFloatVector(null,
e,!0));for(var m=k;m<e;)a.set(m,0),a.set(m+1,0),a.set(m+2,0),m+=f;for(var h=m=0,n=this._indices.get_length(),K,l;m<n;){l=this._useFaceWeights?this._faceWeights.get(h++):1;K=k+this._indices.get(m++)*f;var g=K++,p=a;p.set(g,p.get(g)+this._faceNormals.get(b)*l);g=K++;p=a;p.set(g,p.get(g)+this._faceNormals.get(c)*l);g=a;g.set(K,g.get(K)+this._faceNormals.get(d)*l);K=k+this._indices.get(m++)*f;g=K++;p=a;p.set(g,p.get(g)+this._faceNormals.get(b)*l);g=K++;p=a;p.set(g,p.get(g)+this._faceNormals.get(c)*l);
g=a;g.set(K,g.get(K)+this._faceNormals.get(d)*l);K=k+this._indices.get(m++)*f;g=K++;p=a;p.set(g,p.get(g)+this._faceNormals.get(b)*l);g=K++;p=a;p.set(g,p.get(g)+this._faceNormals.get(c)*l);g=a;g.set(K,g.get(K)+this._faceNormals.get(d)*l);b+=3;c+=3;d+=3}for(m=k;m<e;)b=a.get(m),c=a.get(m+1),d=a.get(m+2),k=1/Math.sqrt(b*b+c*c+d*d),a.set(m,b*k),a.set(m+1,c*k),a.set(m+2,d*k),m+=f;this._vertexNormalsDirty=!1;return a},updateVertexTangents:function(a){this._faceTangentsDirty&&this.updateFaceTangents();var b,
c=this._vertexData.get_length(),d=this.get_vertexTangentStride(),e=this.get_vertexTangentOffset();null==a&&(a=M.toFloatVector(null,c,!0));for(b=e;b<c;)a.set(b,0),a.set(b+1,0),a.set(b+2,0),b+=d;var f=0,k=this._indices.get_length(),m=0,h=1,n=2;for(b=0;b<k;){var K=this._useFaceWeights?this._faceWeights.get(f++):1;var l=e+this._indices.get(b++)*d;var g=l++,p=a;p.set(g,p.get(g)+this._faceTangents.get(m)*K);g=l++;p=a;p.set(g,p.get(g)+this._faceTangents.get(h)*K);g=a;g.set(l,g.get(l)+this._faceTangents.get(n)*
K);l=e+this._indices.get(b++)*d;g=l++;p=a;p.set(g,p.get(g)+this._faceTangents.get(m)*K);g=l++;p=a;p.set(g,p.get(g)+this._faceTangents.get(h)*K);g=a;g.set(l,g.get(l)+this._faceTangents.get(n)*K);l=e+this._indices.get(b++)*d;g=l++;p=a;p.set(g,p.get(g)+this._faceTangents.get(m)*K);g=l++;p=a;p.set(g,p.get(g)+this._faceTangents.get(h)*K);g=a;g.set(l,g.get(l)+this._faceTangents.get(n)*K);m+=3;h+=3;n+=3}for(b=e;b<c;)e=a.get(b),f=a.get(b+1),k=a.get(b+2),K=1/Math.sqrt(e*e+f*f+k*k),a.set(b,e*K),a.set(b+1,f*
K),a.set(b+2,k*K),b+=d;this._vertexTangentsDirty=!1;return a},get_indexData:function(){return this._indices},updateIndexData:function(a){this._indices=a;this._numIndices=a.get_length();a=this._numIndices/3|0;this._numTriangles!=a&&this.disposeIndexBuffers(this._indexBuffer);this._numTriangles=a;this.invalidateBuffers(this._indicesInvalid);this._faceNormalsDirty=!0;this._autoDeriveVertexNormals&&(this._vertexNormalsDirty=!0);this._autoDeriveVertexTangents&&(this._vertexTangentsDirty=!0)},disposeIndexBuffers:function(a){null!=
a.get(0)&&(eb.disposeIndexBuffer(a.get(0)),a.set(0,null));null!=a.get(1)&&(eb.disposeIndexBuffer(a.get(1)),a.set(1,null));null!=a.get(2)&&(eb.disposeIndexBuffer(a.get(2)),a.set(2,null));null!=a.get(3)&&(eb.disposeIndexBuffer(a.get(3)),a.set(3,null));null!=a.get(4)&&(eb.disposeIndexBuffer(a.get(4)),a.set(4,null));null!=a.get(5)&&(eb.disposeIndexBuffer(a.get(5)),a.set(5,null));null!=a.get(6)&&(eb.disposeIndexBuffer(a.get(6)),a.set(6,null));null!=a.get(7)&&(eb.disposeIndexBuffer(a.get(7)),a.set(7,null))},
disposeVertexBuffers:function(a){null!=a.get(0)&&(eb.disposeVertexBuffer(a.get(0)),a.set(0,null));null!=a.get(1)&&(eb.disposeVertexBuffer(a.get(1)),a.set(1,null));null!=a.get(2)&&(eb.disposeVertexBuffer(a.get(2)),a.set(2,null));null!=a.get(3)&&(eb.disposeVertexBuffer(a.get(3)),a.set(3,null));null!=a.get(4)&&(eb.disposeVertexBuffer(a.get(4)),a.set(4,null));null!=a.get(5)&&(eb.disposeVertexBuffer(a.get(5)),a.set(5,null));null!=a.get(6)&&(eb.disposeVertexBuffer(a.get(6)),a.set(6,null));null!=a.get(7)&&
(eb.disposeVertexBuffer(a.get(7)),a.set(7,null))},invalidateBuffers:function(a){a.set(0,!0);a.set(1,!0);a.set(2,!0);a.set(3,!0);a.set(4,!0);a.set(5,!0);a.set(6,!0);a.set(7,!0)},get_UVStride:function(){throw new W(new tb);},get_UVData:function(){throw new W(new tb);},get_vertexStride:function(){throw new W(new tb);},get_vertexNormalStride:function(){throw new W(new tb);},get_vertexTangentStride:function(){throw new W(new tb);},get_vertexOffset:function(){throw new W(new tb);},get_vertexNormalOffset:function(){throw new W(new tb);
},get_vertexTangentOffset:function(){throw new W(new tb);},get_UVOffset:function(){throw new W(new tb);},invalidateBounds:function(){null!=this._parentGeometry&&this._parentGeometry.invalidateBounds(Ka.__cast(this,sj))},set_parentGeometry:function(a){return this._parentGeometry=a},get_scaleU:function(){return this._scaleU},get_scaleV:function(){return this._scaleV},updateDummyUVs:function(a){this._uvsDirty=!1;var b=this.get_UVStride(),c=b-2;b=this._vertexData.get_length()/this.get_vertexStride()*
b|0;null==a&&(a=M.toFloatVector(null));a.fixed=!1;a.set_length(b);a.fixed=!0;for(var d=this.get_UVOffset(),e=0;d<b;)a.set(d++,.5*e),a.set(d++,1-(e&1)),d+=c,3==++e&&(e=0);return a},__class__:Ke};var sj=function(){};g["away3d.core.base.ISubGeometry"]=sj;sj.__name__="away3d.core.base.ISubGeometry";sj.__isInterface__=!0;sj.prototype={get_numTriangles:null,get_vertexStride:null,get_vertexData:null,get_vertexOffset:null,set_parentGeometry:null,activateVertexBuffer:null,activateUVBuffer:null,activateSecondaryUVBuffer:null,
activateVertexNormalBuffer:null,activateVertexTangentBuffer:null,getIndexBuffer:null,__class__:sj};var tj=function(){this._bufferContext=M.toObjectVector(null,8);this._vertexBuffer=M.toObjectVector(null,8);this._vertexDataInvalid=M.toBoolVector(null,8,!0);Ke.call(this);this._autoDeriveVertexTangents=this._autoDeriveVertexNormals=!1};g["away3d.core.base.CompactSubGeometry"]=tj;tj.__name__="away3d.core.base.CompactSubGeometry";tj.__interfaces__=[sj];tj.__super__=Ke;tj.prototype=v(Ke.prototype,{_vertexDataInvalid:null,
_vertexBuffer:null,_bufferContext:null,_numVertices:null,_contextIndex:null,_activeBuffer:null,_activeContext:null,_activeDataInvalid:null,_isolatedVertexPositionDataDirty:null,get_numVertices:function(){return this._numVertices},updateData:function(a){this._autoDeriveVertexNormals&&(this._vertexNormalsDirty=!0);this._autoDeriveVertexTangents&&(this._vertexTangentsDirty=!0);this._isolatedVertexPositionDataDirty=this._faceTangentsDirty=this._faceNormalsDirty=!0;this._vertexData=a;a=this._vertexData.get_length()/
13|0;a!=this._numVertices&&this.disposeVertexBuffers(this._vertexBuffer);this._numVertices=a;if(0==this._numVertices)throw new W(new cb("Bad data: geometry can't have zero triangles"));this.invalidateBuffers(this._vertexDataInvalid);this.invalidateBounds()},activateVertexBuffer:function(a,b){var c=b._stage3DIndex,d=b._context3D;c!=this._contextIndex&&this.updateActiveBuffer(c);null!=this._activeBuffer&&this._activeContext==d||this.createBuffer(c,d,b);this._activeDataInvalid&&this.uploadData(c);d.setVertexBufferAt(a,
this._activeBuffer,0,3)},activateUVBuffer:function(a,b){var c=b._stage3DIndex,d=b._context3D;this._uvsDirty&&this._autoGenerateUVs&&(this._vertexData=this.updateDummyUVs(this._vertexData),this.invalidateBuffers(this._vertexDataInvalid));c!=this._contextIndex&&this.updateActiveBuffer(c);null!=this._activeBuffer&&this._activeContext==d||this.createBuffer(c,d,b);this._activeDataInvalid&&this.uploadData(c);d.setVertexBufferAt(a,this._activeBuffer,9,2)},activateSecondaryUVBuffer:function(a,b){var c=b._stage3DIndex,
d=b._context3D;c!=this._contextIndex&&this.updateActiveBuffer(c);null!=this._activeBuffer&&this._activeContext==d||this.createBuffer(c,d,b);this._activeDataInvalid&&this.uploadData(c);d.setVertexBufferAt(a,this._activeBuffer,11,2)},uploadData:function(a){this._activeBuffer.uploadFromVector(this._vertexData,0,this._numVertices);this._vertexDataInvalid.set(a,this._activeDataInvalid=!1)},activateVertexNormalBuffer:function(a,b){var c=b._stage3DIndex,d=b._context3D;c!=this._contextIndex&&this.updateActiveBuffer(c);
null!=this._activeBuffer&&this._activeContext==d||this.createBuffer(c,d,b);this._activeDataInvalid&&this.uploadData(c);d.setVertexBufferAt(a,this._activeBuffer,3,3)},activateVertexTangentBuffer:function(a,b){var c=b._stage3DIndex,d=b._context3D;c!=this._contextIndex&&this.updateActiveBuffer(c);null!=this._activeBuffer&&this._activeContext==d||this.createBuffer(c,d,b);this._activeDataInvalid&&this.uploadData(c);d.setVertexBufferAt(a,this._activeBuffer,6,3)},createBuffer:function(a,b,c){this._vertexBuffer.set(a,
this._activeBuffer=c.createVertexBuffer(this._numVertices,13));this._bufferContext.set(a,this._activeContext=b);this._vertexDataInvalid.set(a,this._activeDataInvalid=!0)},updateActiveBuffer:function(a){this._contextIndex=a;this._activeDataInvalid=this._vertexDataInvalid.get(a);this._activeBuffer=this._vertexBuffer.get(a);this._activeContext=this._bufferContext.get(a)},get_vertexData:function(){this._autoDeriveVertexNormals&&this._vertexNormalsDirty&&(this._vertexData=this.updateVertexNormals(this._vertexData));
this._autoDeriveVertexTangents&&this._vertexTangentsDirty&&(this._vertexData=this.updateVertexTangents(this._vertexData));this._uvsDirty&&this._autoGenerateUVs&&(this._vertexData=this.updateDummyUVs(this._vertexData));return this._vertexData},updateVertexNormals:function(a){this.invalidateBuffers(this._vertexDataInvalid);return Ke.prototype.updateVertexNormals.call(this,a)},updateVertexTangents:function(a){this._vertexNormalsDirty&&(this._vertexData=this.updateVertexNormals(this._vertexData));this.invalidateBuffers(this._vertexDataInvalid);
return Ke.prototype.updateVertexTangents.call(this,a)},get_UVData:function(){this._uvsDirty&&this._autoGenerateUVs&&(this._vertexData=this.updateDummyUVs(this._vertexData),this.invalidateBuffers(this._vertexDataInvalid));return this._vertexData},get_vertexStride:function(){return 13},get_vertexNormalStride:function(){return 13},get_vertexTangentStride:function(){return 13},get_UVStride:function(){return 13},get_vertexOffset:function(){return 0},get_vertexNormalOffset:function(){return 3},get_vertexTangentOffset:function(){return 6},
get_UVOffset:function(){return 9},disposeVertexBuffers:function(a){Ke.prototype.disposeVertexBuffers.call(this,a);this._activeBuffer=null},invalidateBuffers:function(a){Ke.prototype.invalidateBuffers.call(this,a);this._activeDataInvalid=!0},__class__:tj});var Le=function(){wa.call(this);this._subGeometries=M.toObjectVector(null)};g["away3d.core.base.Geometry"]=Le;Le.__name__="away3d.core.base.Geometry";Le.__interfaces__=[zb];Le.__super__=wa;Le.prototype=v(wa.prototype,{_subGeometries:null,get_subGeometries:function(){return this._subGeometries},
addSubGeometry:function(a){this._subGeometries.push(a);a.set_parentGeometry(this);this.hasEventListener("SubGeometryAdded")&&this.dispatchEvent(new uj("SubGeometryAdded",a));this.invalidateBounds(a)},validate:function(){},invalidateBounds:function(a){this.hasEventListener("BoundsInvalid")&&this.dispatchEvent(new uj("BoundsInvalid",a))},__class__:Le});var Ng=function(){};g["away3d.core.base.IMaterialOwner"]=Ng;Ng.__name__="away3d.core.base.IMaterialOwner";Ng.__isInterface__=!0;Ng.prototype={get_material:null,
get_animator:null,__class__:Ng};var mg=function(){};g["away3d.core.base.IRenderable"]=mg;mg.__name__="away3d.core.base.IRenderable";mg.__isInterface__=!0;mg.__interfaces__=[Ng];mg.prototype={get_inverseSceneTransform:null,get_mouseEnabled:null,get_sourceEntity:null,get_castsShadows:null,get_uvTransform:null,get_uvTransform2:null,get_numTriangles:null,getRenderSceneTransform:null,activateVertexBuffer:null,activateUVBuffer:null,activateSecondaryUVBuffer:null,activateVertexNormalBuffer:null,activateVertexTangentBuffer:null,
getIndexBuffer:null,__class__:mg};var Vh=function(a,b,c){this._offsetU2=this._offsetV2=0;this._scaleU2=this._scaleV2=1;this._offsetU=this._offsetV=this._uvRotation2=0;this._scaleU=this._scaleV=1;this._uvRotation=0;this._parentMesh=b;this._subGeometry=a;this.set_material(c)};g["away3d.core.base.SubMesh"]=Vh;Vh.__name__="away3d.core.base.SubMesh";Vh.__interfaces__=[mg];Vh.prototype={_material:null,_parentMesh:null,_subGeometry:null,_index:null,_uvTransform:null,_uvTransformDirty:null,_uvRotation:null,
_scaleU:null,_scaleV:null,_offsetU:null,_offsetV:null,_uvTransform2:null,_uvTransformDirty2:null,_uvRotation2:null,_scaleU2:null,_scaleV2:null,_offsetU2:null,_offsetV2:null,set_scaleU:function(a){if(a==this._scaleU)return a;this._scaleU=a;this._uvTransformDirty=!0;return a},set_scaleV:function(a){if(a==this._scaleV)return a;this._scaleV=a;this._uvTransformDirty=!0;return a},get_sourceEntity:function(){return this._parentMesh},get_subGeometry:function(){return this._subGeometry},get_material:function(){return null!=
this._material?this._material:this._parentMesh.get_material()},set_material:function(a){null!=this._material&&this._material.removeOwner(this);this._material=a;null!=this._material&&this._material.addOwner(this);return a},get_inverseSceneTransform:function(){return this._parentMesh.get_inverseSceneTransform()},activateVertexBuffer:function(a,b){this._subGeometry.activateVertexBuffer(a,b)},activateVertexNormalBuffer:function(a,b){this._subGeometry.activateVertexNormalBuffer(a,b)},activateVertexTangentBuffer:function(a,
b){this._subGeometry.activateVertexTangentBuffer(a,b)},activateUVBuffer:function(a,b){this._subGeometry.activateUVBuffer(a,b)},activateSecondaryUVBuffer:function(a,b){this._subGeometry.activateSecondaryUVBuffer(a,b)},getIndexBuffer:function(a){return this._subGeometry.getIndexBuffer(a)},get_numTriangles:function(){return this._subGeometry.get_numTriangles()},get_animator:function(){return this._parentMesh.get_animator()},get_mouseEnabled:function(){return this._parentMesh.get_mouseEnabled()?!0:this._parentMesh._ancestorsAllowMouseEnabled},
get_castsShadows:function(){return this._parentMesh.get_castsShadows()},get_uvTransform:function(){this._uvTransformDirty&&this.updateUVTransform();return this._uvTransform},get_uvTransform2:function(){this._uvTransformDirty2&&this.updateUVTransform2();return this._uvTransform2},updateUVTransform:function(){null==this._uvTransform&&(this._uvTransform=new va);this._uvTransform.identity();0!=this._uvRotation&&this._uvTransform.rotate(this._uvRotation);1==this._scaleU&&1==this._scaleV||this._uvTransform.scale(this._scaleU,
this._scaleV);this._uvTransform.translate(this._offsetU,this._offsetV);this._uvTransformDirty=!1},updateUVTransform2:function(){null==this._uvTransform2&&(this._uvTransform2=new va);this._uvTransform2.identity();0!=this._uvRotation2&&this._uvTransform2.rotate(this._uvRotation2);1==this._scaleU2&&1==this._scaleV2||this._uvTransform2.scale(this._scaleU2,this._scaleV2);this._uvTransform2.translate(this._offsetU2,this._offsetV2);this._uvTransformDirty2=!1},dispose:function(){this.set_material(null)},
getRenderSceneTransform:function(a){return this._parentMesh.get_sceneTransform()},__class__:Vh};var Wh=function(){};g["away3d.core.data.EntityListItem"]=Wh;Wh.__name__="away3d.core.data.EntityListItem";Wh.prototype={entity:null,next:null,__class__:Wh};var Xh=function(){this._poolSize=this._index=0;this._pool=M.toObjectVector(null)};g["away3d.core.data.EntityListItemPool"]=Xh;Xh.__name__="away3d.core.data.EntityListItemPool";Xh.prototype={_pool:null,_index:null,_poolSize:null,getItem:function(){if(this._index==
this._poolSize){var a=new Wh;this._pool.set(this._index++,a);++this._poolSize}else a=this._pool.get(this._index++);return a},freeAll:function(){this._index=0},__class__:Xh};var Yh=function(){};g["away3d.core.data.RenderableListItem"]=Yh;Yh.__name__="away3d.core.data.RenderableListItem";Yh.prototype={next:null,renderable:null,materialId:null,renderOrderId:null,zIndex:null,renderSceneTransform:null,cascaded:null,__class__:Yh};var Zh=function(){this._poolSize=this._index=0;this._pool=M.toObjectVector(null)};
g["away3d.core.data.RenderableListItemPool"]=Zh;Zh.__name__="away3d.core.data.RenderableListItemPool";Zh.prototype={_pool:null,_index:null,_poolSize:null,getItem:function(){if(this._index==this._poolSize){var a=new Yh;this._pool.set(this._index++,a);++this._poolSize;return a}return this._pool.get(this._index++)},freeAll:function(){this._index=0},__class__:Zh};var dc=function(a){this._stage3DProxy=a;this._program3Ds=new Ra;this._ids=new Ra;this._usages=[];this._keys=[]};g["away3d.core.managers.AGALProgram3DCache"]=
dc;dc.__name__="away3d.core.managers.AGALProgram3DCache";dc.getInstance=function(a){var b=a.get_stage3DIndex();null==dc._instances&&(dc._instances=M.toObjectVector(null,8,!0));null==dc._instances.get(b)&&(dc._instances.set(b,new dc(a)),a.addEventListener("Context3DDisposed",dc.onContext3DDisposed,!1,0,!0),a.addEventListener("Context3DCreated",dc.onContext3DDisposed,!1,0,!0),a.addEventListener("Context3DRecreated",dc.onContext3DDisposed,!1,0,!0));return dc._instances.get(b)};dc.onContext3DDisposed=
function(a){a=Ka.__cast(a.target,eb);var b=a._stage3DIndex;dc._instances.get(b).dispose();dc._instances.set(b,null);a.removeEventListener("Context3DDisposed",dc.onContext3DDisposed);a.removeEventListener("Context3DCreated",dc.onContext3DDisposed);a.removeEventListener("Context3DRecreated",dc.onContext3DDisposed)};dc.prototype={_stage3DProxy:null,_program3Ds:null,_ids:null,_usages:null,_keys:null,dispose:function(){for(var a=this._program3Ds.keys();a.hasNext();){var b=a.next();this.destroyProgram(b)}this._usages=
this._program3Ds=this._keys=null},setProgram3D:function(a,b,c,d){null==d&&(d=1);var e=this._stage3DProxy._stage3DIndex,f=b+"---"+c;var k=this._program3Ds;if(null!=F[f]?!k.existsReserved(f):!k.h.hasOwnProperty(f)){this._keys[dc._currentId]=f;this._usages[dc._currentId]=0;k=dc._currentId;var m=this._ids;null!=F[f]?m.setReserved(f,k):m.h[f]=k;++dc._currentId;k=this._stage3DProxy._context3D.createProgram();b=(new na(Me.active)).assemble(Ye.toString(1),b,d);c=(new na(Me.active)).assemble(Ye.toString(0),
c,d);k.upload(b,c);c=this._program3Ds;null!=F[f]?c.setReserved(f,k):c.h[f]=k}c=a._program3Dids.get(e);d=this._ids;d=null!=F[f]?d.getReserved(f):d.h[f];c!=d&&(0<=c&&this.freeProgram3D(c),this._usages[d]++);a._program3Dids.set(e,d);c=this._program3Ds;a._program3Ds.set(e,null!=F[f]?c.getReserved(f):c.h[f])},freeProgram3D:function(a){this._usages[a]--;0==this._usages[a]&&this.destroyProgram(this._keys[a])},destroyProgram:function(a){var b=this._program3Ds;(null!=F[a]?b.getReserved(a):b.h[a]).dispose();
this._program3Ds.remove(a);b=this._ids;null!=F[a]?b.setReserved(a,-1):b.h[a]=-1},__class__:dc};var R=function(a,b,c){null==c&&(c=!1);null==b&&(b=!1);this.type=a;this.bubbles=b;this.cancelable=c;this.eventPhase=2};g["openfl.events.Event"]=R;R.__name__="openfl.events.Event";R.prototype={bubbles:null,cancelable:null,currentTarget:null,eventPhase:null,target:null,type:null,__isCanceled:null,__isCanceledNow:null,__preventDefault:null,isDefaultPrevented:function(){return this.__preventDefault},preventDefault:function(){this.cancelable&&
(this.__preventDefault=!0)},__init:function(){this.currentTarget=this.target=null;this.cancelable=this.bubbles=!1;this.eventPhase=2;this.__preventDefault=this.__isCanceledNow=this.__isCanceled=!1},__class__:R};var he=function(a){R.call(this,a,!0,!0)};g["away3d.events.MouseEvent3D"]=he;he.__name__="away3d.events.MouseEvent3D";he.__super__=R;he.prototype=v(R.prototype,{screenX:null,screenY:null,object:null,renderable:null,uv:null,index:null,subGeometryIndex:null,localPosition:null,localNormal:null,
ctrlKey:null,altKey:null,shiftKey:null,delta:null,__class__:he});var xa=function(){this._childDepth=0;this._mousePicker=ok.RAYCAST_FIRST_ENCOUNTERED;this._mouseMoveEvent=new Gb("mouseMove");this._nullVector=new hb;this._updateDirty=!0;null==xa._view3Ds&&(xa._view3Ds=new ja,xa._view3DLookup=M.toObjectVector(null))};g["away3d.core.managers.Mouse3DManager"]=xa;xa.__name__="away3d.core.managers.Mouse3DManager";xa.prototype={_activeView:null,_updateDirty:null,_nullVector:null,_mouseMoveEvent:null,_forceMouseMove:null,
_mousePicker:null,_childDepth:null,updateCollider:function(a){xa._previousCollidingView=xa._collidingView;if(null!=a){a.get_stage3DProxy().get_bufferClear()&&(xa._collidingViewObjects=M.toObjectVector(null,xa._viewCount));var b=a.localToGlobal(new ob(a.get_mouseX(),a.get_mouseY()));a.get_shareContext()?(null==xa._collidingViewObjects&&(xa._collidingViewObjects=M.toObjectVector(null,xa._viewCount)),xa._collidingObject=xa._collidingViewObjects.set(xa._view3Ds.h[a.__id__],this._mousePicker.getViewCollision(b.x,
b.y,a))):a==this._activeView&&(this._forceMouseMove||this._updateDirty)&&(xa._collidingObject=this._mousePicker.getViewCollision(b.x,b.y,a))}},fireMouseEvents:function(){var a,b;if(null!=xa._collidingViewObjects){xa._collidingObject=null;var c=Infinity;for(a=xa._viewCount-1;0<=a;){var d=xa._view3DLookup.get(a);if(null!=xa._collidingViewObjects.get(a)&&(d.get_layeredView()||xa._collidingViewObjects.get(a).rayEntryDistance<c)&&(c=xa._collidingViewObjects.get(a).rayEntryDistance,xa._collidingObject=
xa._collidingViewObjects.get(a),d.get_layeredView()))break;--a}}xa._collidingObject!=xa._previousCollidingObject&&(null!=xa._previousCollidingObject&&this.queueDispatch(xa._mouseOut,this._mouseMoveEvent,xa._previousCollidingObject),null!=xa._collidingObject&&this.queueDispatch(xa._mouseOver,this._mouseMoveEvent,xa._collidingObject));this._forceMouseMove&&null!=xa._collidingObject&&this.queueDispatch(xa._mouseMove,this._mouseMoveEvent,xa._collidingObject);c=0;for(d=xa._queuedEvents.get_length();c<
d;){a=c++;a=xa._queuedEvents.get(a);for(b=a.object;null!=b&&!b._ancestorsAllowMouseEnabled;)b=b.get_parent();null!=b&&b.dispatchEvent(a)}xa._queuedEvents.set_length(0);this._updateDirty=!1;xa._previousCollidingObject=xa._collidingObject},addViewLayer:function(a){var b=a.stage;null==a.get_stage3DProxy().get_mouse3DManager()&&a.get_stage3DProxy().set_mouse3DManager(this);this.hasKey(a)||xa._view3Ds.set(a,0);this._childDepth=0;this.traverseDisplayObjects(b);xa._viewCount=this._childDepth},enableMouseListeners:function(a){a.addEventListener("click",
u(this,this.onClick));a.addEventListener("doubleClick",u(this,this.onDoubleClick));a.addEventListener("mouseDown",u(this,this.onMouseDown));a.addEventListener("mouseMove",u(this,this.onMouseMove));a.addEventListener("mouseUp",u(this,this.onMouseUp));a.addEventListener("mouseWheel",u(this,this.onMouseWheel));a.addEventListener("mouseOver",u(this,this.onMouseOver));a.addEventListener("mouseOut",u(this,this.onMouseOut))},queueDispatch:function(a,b,c){a.ctrlKey=b.ctrlKey;a.altKey=b.altKey;a.shiftKey=
b.shiftKey;a.delta=b.delta;a.screenX=b.localX;a.screenY=b.localY;null==c&&(c=xa._collidingObject);null!=c?(a.object=c.entity,a.renderable=c.renderable,a.uv=c.uv,a.localPosition=null!=c.localPosition?c.localPosition.clone():null,a.localNormal=null!=c.localNormal?c.localNormal.clone():null,a.index=c.index,a.subGeometryIndex=c.subGeometryIndex):(a.uv=null,a.object=null,a.localPosition=this._nullVector,a.localNormal=this._nullVector,a.index=0,a.subGeometryIndex=0);xa._queuedEvents.push(a)},reThrowEvent:function(a){if(null!=
this._activeView&&(null==this._activeView||this._activeView.get_shareContext()))for(var b=xa._view3Ds.keys();b.hasNext();){var c=b.next();c!=this._activeView&&xa._view3Ds.h[c.__id__]==xa._view3Ds.h[this._activeView.__id__]-1&&(1==a.bubbles?c.dispatchEvent(new Gb(a.type,!1,a.cancelable,a.localX,a.localY,a.relatedObject,a.ctrlKey,a.altKey,a.shiftKey,a.buttonDown,a.delta,a.commandKey,a.clickCount)):c.dispatchEvent(a))}},hasKey:function(a){return null!=xa._view3Ds.h.__keys__[a.__id__]},traverseDisplayObjects:function(a){for(var b,
c=0,d=a.get_numChildren();c<d;)b=c++,b=a.getChildAt(b),b instanceof Sd&&null!=xa._view3Ds.h.__keys__[b.__id__]&&(xa._view3Ds.set(b,this._childDepth),xa._view3DLookup.set(this._childDepth,b),this._childDepth++),b instanceof ma&&this.traverseDisplayObjects(Ka.__cast(b,ma))},onMouseMove:function(a){null!=xa._collidingObject?this.queueDispatch(xa._mouseMove,this._mouseMoveEvent=a):this.reThrowEvent(a);this._updateDirty=!0},onMouseOut:function(a){this._activeView=null;null!=xa._collidingObject&&this.queueDispatch(xa._mouseOut,
a,xa._collidingObject);this._updateDirty=!0},onMouseOver:function(a){this._activeView=Ka.__cast(a.currentTarget,Sd);null!=xa._collidingObject&&xa._previousCollidingObject!=xa._collidingObject?this.queueDispatch(xa._mouseOver,a,xa._collidingObject):this.reThrowEvent(a);this._updateDirty=!0},onClick:function(a){null!=xa._collidingObject?this.queueDispatch(xa._mouseClick,a):this.reThrowEvent(a);this._updateDirty=!0},onDoubleClick:function(a){null!=xa._collidingObject?this.queueDispatch(xa._mouseDoubleClick,
a):this.reThrowEvent(a);this._updateDirty=!0},onMouseDown:function(a){this._activeView=Ka.__cast(a.currentTarget,Sd);this.updateCollider(this._activeView);null!=xa._collidingObject?(this.queueDispatch(xa._mouseDown,a),xa._previousCollidingObject=xa._collidingObject):this.reThrowEvent(a);this._updateDirty=!0},onMouseUp:function(a){null!=xa._collidingObject?(this.queueDispatch(xa._mouseUp,a),xa._previousCollidingObject=xa._collidingObject):this.reThrowEvent(a);this._updateDirty=!0},onMouseWheel:function(a){null!=
xa._collidingObject?this.queueDispatch(xa._mouseWheel,a):this.reThrowEvent(a);this._updateDirty=!0},__class__:xa};var Wd=function(a){this._buffersInvalid=!0;this._viewWidth=this._viewHeight=this._textureWidth=this._textureHeight=-1;this._renderToTextureRect=new ya;this._stage3DProxy=a;this._stage3DProxy.addEventListener("Context3DRecreated",u(this,this.onContextRecreated));aa.call(this)};g["away3d.core.managers.RTTBufferManager"]=Wd;Wd.__name__="away3d.core.managers.RTTBufferManager";Wd.getInstance=
function(a){if(null==a)throw new W(new cb("stage3DProxy key cannot be null!"));null==Wd._instances&&(Wd._instances=new ja);var b=Wd._instances.h[a.__id__];null==b&&(b=new Wd(a),Wd._instances.set(a,b));return b};Wd.__super__=aa;Wd.prototype=v(aa.prototype,{_renderToTextureVertexBuffer:null,_renderToScreenVertexBuffer:null,_indexBuffer:null,_stage3DProxy:null,_viewWidth:null,_viewHeight:null,_textureWidth:null,_textureHeight:null,_renderToTextureRect:null,_buffersInvalid:null,_textureRatioX:null,_textureRatioY:null,
get_textureRatioX:function(){this._buffersInvalid&&this.updateRTTBuffers();return this._textureRatioX},get_textureRatioY:function(){this._buffersInvalid&&this.updateRTTBuffers();return this._textureRatioY},set_viewWidth:function(a){if(a==this._viewWidth)return a;this._viewWidth=a;this._buffersInvalid=!0;this._textureWidth=ke.getBestPowerOf2(this._viewWidth);this._textureWidth>this._viewWidth?(this._renderToTextureRect.x=.5*(this._textureWidth-this._viewWidth)|0,this._renderToTextureRect.width=this._viewWidth):
(this._renderToTextureRect.x=0,this._renderToTextureRect.width=this._textureWidth);this.dispatchEvent(new R("resize"));return a},set_viewHeight:function(a){if(a==this._viewHeight)return a;this._viewHeight=a;this._buffersInvalid=!0;this._textureHeight=ke.getBestPowerOf2(this._viewHeight);this._textureHeight>this._viewHeight?(this._renderToTextureRect.y=.5*(this._textureHeight-this._viewHeight)|0,this._renderToTextureRect.height=this._viewHeight):(this._renderToTextureRect.y=0,this._renderToTextureRect.height=
this._textureHeight);this.dispatchEvent(new R("resize"));return a},get_renderToTextureVertexBuffer:function(){this._buffersInvalid&&this.updateRTTBuffers();return this._renderToTextureVertexBuffer},get_renderToScreenVertexBuffer:function(){this._buffersInvalid&&this.updateRTTBuffers();return this._renderToScreenVertexBuffer},get_indexBuffer:function(){return this._indexBuffer},get_renderToTextureRect:function(){this._buffersInvalid&&this.updateRTTBuffers();return this._renderToTextureRect},get_textureWidth:function(){return this._textureWidth},
get_textureHeight:function(){return this._textureHeight},onContextRecreated:function(a){this._renderToScreenVertexBuffer=this._renderToTextureVertexBuffer=this._indexBuffer=null;this.updateRTTBuffers()},updateRTTBuffers:function(){this._stage3DProxy.get_context3D();null==this._renderToTextureVertexBuffer&&(this._renderToTextureVertexBuffer=this._stage3DProxy.createVertexBuffer(4,5));null==this._renderToScreenVertexBuffer&&(this._renderToScreenVertexBuffer=this._stage3DProxy.createVertexBuffer(4,5));
if(null==this._indexBuffer){this._indexBuffer=this._stage3DProxy.createIndexBuffer(6);for(var a=[2,1,0,3,2,0],b=M.toIntVector(null),c=0,d=a.length;c<d;){var e=c++;b.set(e,a[e])}this._indexBuffer.uploadFromVector(b,0,6)}this._textureRatioX=a=Math.min(this._viewWidth/this._textureWidth,1);var f=Math.min(this._viewHeight/this._textureHeight,1);this._textureRatioY=f;b=.5*(1-a);c=.5*(a+1);d=.5*(f+1);e=.5*(1-f);f=[-a,-f,b,d,0,a,-f,c,d,1,a,f,c,e,2,-a,f,b,e,3];a=M.toFloatVector(null);for(var k=0,m=f.length;k<
m;){var h=k++;a.set(h,f[h])}b=[-1,-1,b,d,0,1,-1,c,d,1,1,1,c,e,2,-1,1,b,e,3];c=M.toFloatVector(null);d=0;for(e=b.length;d<e;)f=d++,c.set(f,b[f]);this._renderToTextureVertexBuffer.uploadFromVector(a,0,4);this._renderToScreenVertexBuffer.uploadFromVector(c,0,4);this._buffersInvalid=!1},__class__:Wd});var cc=function(a){this._stage=a;null==cc._stageProxies&&(cc._stageProxies=M.toObjectVector(null,this._stage.stage3Ds.get_length(),!0))};g["away3d.core.managers.Stage3DManager"]=cc;cc.__name__="away3d.core.managers.Stage3DManager";
cc.getInstance=function(a){null==cc._instances&&(cc._instances=new ja);var b=cc._instances.h[a.__id__];null==b&&(b=new cc(a),cc._instances.set(a,b));return b};cc.prototype={_stage:null,getStage3DProxy:function(a,b,c){null==c&&(c="baseline");null==b&&(b=!1);null==cc._stageProxies.get(a)&&(cc._numStageProxies++,cc._stageProxies.set(a,new eb(a,this._stage.stage3Ds.get(a),this,b,c)));return cc._stageProxies.get(a)},getFreeStage3DProxy:function(a,b){null==b&&(b="baseline");null==a&&(a=!1);for(var c=0,
d=cc._stageProxies.get_length();c<d;){if(null==cc._stageProxies.get(c))return this.getStage3DProxy(c,a,b),cc._stageProxies.get(c).set_width(this._stage.stageWidth),cc._stageProxies.get(c).set_height(this._stage.stageHeight),cc._stageProxies.get(c);++c}throw new W(new cb("Too many Stage3D instances used!"));},__class__:cc};var Gf=function(){ba.call(this)};g["openfl.display.Shape"]=Gf;Gf.__name__="openfl.display.Shape";Gf.__super__=ba;Gf.prototype=v(ba.prototype,{get_graphics:function(){null==this.__graphics&&
(this.__graphics=new pc(this));return this.__graphics},__class__:Gf});var pk=function(a,b,c,d,e,f){null==f&&(f=0);null==e&&(e=0);null==d&&(d=1);null==c&&(c=0);null==b&&(b=0);null==a&&(a=1);this.a=a;this.b=b;this.c=c;this.d=d;this.tx=e;this.ty=f};g["lime.math.Matrix3"]=pk;pk.__name__="lime.math.Matrix3";pk.prototype={a:null,b:null,c:null,d:null,tx:null,ty:null,__class__:pk};var va=function(a,b,c,d,e,f){null==f&&(f=0);null==e&&(e=0);null==d&&(d=1);null==c&&(c=0);null==b&&(b=0);null==a&&(a=1);this.a=
a;this.b=b;this.c=c;this.d=d;this.tx=e;this.ty=f};g["openfl.geom.Matrix"]=va;va.__name__="openfl.geom.Matrix";va.prototype={a:null,b:null,c:null,d:null,tx:null,ty:null,clone:function(){return new va(this.a,this.b,this.c,this.d,this.tx,this.ty)},concat:function(a){var b=this.a*a.a+this.b*a.c;this.b=this.a*a.b+this.b*a.d;this.a=b;b=this.c*a.a+this.d*a.c;this.d=this.c*a.b+this.d*a.d;this.c=b;b=this.tx*a.a+this.ty*a.c+a.tx;this.ty=this.tx*a.b+this.ty*a.d+a.ty;this.tx=b},copyFrom:function(a){this.a=a.a;
this.b=a.b;this.c=a.c;this.d=a.d;this.tx=a.tx;this.ty=a.ty},equals:function(a){return null!=a&&this.tx==a.tx&&this.ty==a.ty&&this.a==a.a&&this.b==a.b&&this.c==a.c?this.d==a.d:!1},identity:function(){this.a=1;this.c=this.b=0;this.d=1;this.ty=this.tx=0},invert:function(){var a=this.a*this.d-this.b*this.c;if(0==a)this.a=this.b=this.c=this.d=0,this.tx=-this.tx,this.ty=-this.ty;else{a=1/a;var b=this.d*a;this.d=this.a*a;this.a=b;this.b*=-a;this.c*=-a;a=-this.a*this.tx-this.c*this.ty;this.ty=-this.b*this.tx-
this.d*this.ty;this.tx=a}return this},rotate:function(a){var b=Math.cos(a);a=Math.sin(a);var c=this.a*b-this.b*a;this.b=this.a*a+this.b*b;this.a=c;c=this.c*b-this.d*a;this.d=this.c*a+this.d*b;this.c=c;c=this.tx*b-this.ty*a;this.ty=this.tx*a+this.ty*b;this.tx=c},scale:function(a,b){this.a*=a;this.b*=b;this.c*=a;this.d*=b;this.tx*=a;this.ty*=b},setTo:function(a,b,c,d,e,f){this.a=a;this.b=b;this.c=c;this.d=d;this.tx=e;this.ty=f},transformPoint:function(a){return new ob(a.x*this.a+a.y*this.c+this.tx,
a.x*this.b+a.y*this.d+this.ty)},translate:function(a,b){this.tx+=a;this.ty+=b},__class__:va};var Nb=function(a,b,c,d,e,f,k,m){null==m&&(m=0);null==k&&(k=0);null==f&&(f=0);null==e&&(e=0);null==d&&(d=1);null==c&&(c=1);null==b&&(b=1);null==a&&(a=1);this.redMultiplier=a;this.greenMultiplier=b;this.blueMultiplier=c;this.alphaMultiplier=d;this.redOffset=e;this.greenOffset=f;this.blueOffset=k;this.alphaOffset=m};g["openfl.geom.ColorTransform"]=Nb;Nb.__name__="openfl.geom.ColorTransform";Nb.prototype={alphaMultiplier:null,
alphaOffset:null,blueMultiplier:null,blueOffset:null,greenMultiplier:null,greenOffset:null,redMultiplier:null,redOffset:null,__copyFrom:function(a){this.redMultiplier=a.redMultiplier;this.greenMultiplier=a.greenMultiplier;this.blueMultiplier=a.blueMultiplier;this.alphaMultiplier=a.alphaMultiplier;this.redOffset=a.redOffset;this.greenOffset=a.greenOffset;this.blueOffset=a.blueOffset;this.alphaOffset=a.alphaOffset},__combine:function(a){this.redMultiplier*=a.redMultiplier;this.greenMultiplier*=a.greenMultiplier;
this.blueMultiplier*=a.blueMultiplier;this.alphaMultiplier*=a.alphaMultiplier;this.redOffset+=a.redOffset;this.greenOffset+=a.greenOffset;this.blueOffset+=a.blueOffset;this.alphaOffset+=a.alphaOffset},__identity:function(){this.alphaMultiplier=this.blueMultiplier=this.greenMultiplier=this.redMultiplier=1;this.alphaOffset=this.blueOffset=this.greenOffset=this.redOffset=0},__invert:function(){this.redMultiplier=0!=this.redMultiplier?1/this.redMultiplier:1;this.greenMultiplier=0!=this.greenMultiplier?
1/this.greenMultiplier:1;this.blueMultiplier=0!=this.blueMultiplier?1/this.blueMultiplier:1;this.alphaMultiplier=0!=this.alphaMultiplier?1/this.alphaMultiplier:1;this.redOffset=-this.redOffset;this.greenOffset=-this.greenOffset;this.blueOffset=-this.blueOffset;this.alphaOffset=-this.alphaOffset},__equals:function(a,b){return null==a||this.redMultiplier!=a.redMultiplier||this.greenMultiplier!=a.greenMultiplier||this.blueMultiplier!=a.blueMultiplier||!b&&this.alphaMultiplier!=a.alphaMultiplier||this.redOffset!=
a.redOffset||this.greenOffset!=a.greenOffset||this.blueOffset!=a.blueOffset?!1:this.alphaOffset==a.alphaOffset},__isDefault:function(a){return a?1==this.redMultiplier&&1==this.greenMultiplier&&1==this.blueMultiplier&&0==this.redOffset&&0==this.greenOffset&&0==this.blueOffset?0==this.alphaOffset:!1:1==this.redMultiplier&&1==this.greenMultiplier&&1==this.blueMultiplier&&1==this.alphaMultiplier&&0==this.redOffset&&0==this.greenOffset&&0==this.blueOffset?0==this.alphaOffset:!1},__setArrays:function(a,
b){a[0]=this.redMultiplier;a[1]=this.greenMultiplier;a[2]=this.blueMultiplier;a[3]=this.alphaMultiplier;b[0]=this.redOffset;b[1]=this.greenOffset;b[2]=this.blueOffset;b[3]=this.alphaOffset},__toLimeColorMatrix:function(){if(null==Nb.__limeColorMatrix){var a=new Float32Array(20);Nb.__limeColorMatrix=a}Nb.__limeColorMatrix[0]=this.redMultiplier;Nb.__limeColorMatrix[4]=this.redOffset/255;Nb.__limeColorMatrix[6]=this.greenMultiplier;Nb.__limeColorMatrix[9]=this.greenOffset/255;Nb.__limeColorMatrix[12]=
this.blueMultiplier;Nb.__limeColorMatrix[14]=this.blueOffset/255;Nb.__limeColorMatrix[18]=this.alphaMultiplier;Nb.__limeColorMatrix[19]=this.alphaOffset/255;return Nb.__limeColorMatrix},__class__:Nb};var eb=function(a,b,c,d,e){null==e&&(e="baseline");null==d&&(d=!1);eb.vertexBufferCount=eb.indexBufferCount=eb.drawTriangleCount=0;this._stage3DIndex=a;this._stage3D=b;this._stage3D.set_x(0);this._stage3D.set_y(0);this._stage3D.visible=!0;this._stage3DManager=c;this._viewPort=new ya;this._enableDepthAndStencil=
!0;aa.call(this);this._stage3D.addEventListener("context3DCreate",u(this,this.onContext3DUpdate),!1,1E3,!1);this.forceSoftware=d;this._profile=e;if(null!=this._stage3D.context3D)this.onContext3DUpdate(null);else this.requestContext(d,this._profile)};g["away3d.core.managers.Stage3DProxy"]=eb;eb.__name__="away3d.core.managers.Stage3DProxy";eb.disposeVertexBuffer=function(a){a.dispose();eb.vertexBufferCount--};eb.disposeIndexBuffer=function(a){a.dispose();eb.indexBufferCount--};eb.__super__=aa;eb.prototype=
v(aa.prototype,{_context3D:null,_stage3DIndex:null,_usesSoftwareRendering:null,_profile:null,_stage3D:null,_activeProgram3D:null,_stage3DManager:null,_backBufferWidth:null,_backBufferHeight:null,_antiAlias:null,_enableDepthAndStencil:null,_contextRequested:null,_renderTarget:null,_renderSurfaceSelector:null,_scissorRect:null,_color:null,_backBufferDirty:null,_viewPort:null,_enterFrame:null,_exitFrame:null,_viewportUpdated:null,_viewportDirty:null,_bufferClear:null,_mouse3DManager:null,notifyViewportUpdated:function(){this._viewportDirty||
(this._viewportDirty=!0,this.hasEventListener("ViewportUpdated")&&(this._viewportUpdated=new Hf("ViewportUpdated"),this.dispatchEvent(this._viewportUpdated)))},notifyEnterFrame:function(){this.hasEventListener("enterFrame")&&(null==this._enterFrame&&(this._enterFrame=new R("enterFrame")),this.dispatchEvent(this._enterFrame))},notifyExitFrame:function(){this.hasEventListener("exitFrame")&&(null==this._exitFrame&&(this._exitFrame=new R("exitFrame")),this.dispatchEvent(this._exitFrame))},forceSoftware:null,
get_profile:function(){return this._profile},configureBackBuffer:function(a,b,c,d){50>a&&(a=50);50>b&&(b=50);var e=this._backBufferWidth,f=this._backBufferHeight;this._backBufferWidth=a;this._backBufferHeight=b;this._viewPort.width=a;this._viewPort.height=b;e==this._backBufferWidth&&f==this._backBufferHeight||this.notifyViewportUpdated();this._antiAlias=c;this._enableDepthAndStencil=d;null!=this._context3D&&this._context3D.configureBackBuffer(a,b,c,d)},get_enableDepthAndStencil:function(){return this._enableDepthAndStencil},
get_renderTarget:function(){return this._renderTarget},get_renderSurfaceSelector:function(){return this._renderSurfaceSelector},setRenderTarget:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);if(this._renderTarget!=a||c!=this._renderSurfaceSelector||this._enableDepthAndStencil!=b)this._renderTarget=a,this._renderSurfaceSelector=c,this._enableDepthAndStencil=b,null!=a?this._context3D.setRenderToTexture(a,b,this._antiAlias,c):this._context3D.setRenderToBackBuffer()},clear:function(){null!=this._context3D&&
(this._backBufferDirty&&(this.configureBackBuffer(this._backBufferWidth,this._backBufferHeight,this._antiAlias,this._enableDepthAndStencil),this._backBufferDirty=!1),this._context3D.clear((this._color>>16&255)/255,(this._color>>8&255)/255,(this._color&255)/255,(this._color>>24&255)/255),this._bufferClear=!0)},present:function(){null!=this._context3D&&(this._context3D.present(),this._activeProgram3D=null,null!=this._mouse3DManager&&this._mouse3DManager.fireMouseEvents())},addEventListener:function(a,
b,c,d,e){null==e&&(e=!1);null==d&&(d=0);null==c&&(c=!1);aa.prototype.addEventListener.call(this,a,b,c,d,e);"enterFrame"!=a&&"exitFrame"!=a||eb._frameEventDriver.hasEventListener("enterFrame")||eb._frameEventDriver.addEventListener("enterFrame",u(this,this.onEnterFrame),c,d,e)},removeEventListener:function(a,b,c){null==c&&(c=!1);aa.prototype.removeEventListener.call(this,a,b,c);this.hasEventListener("enterFrame")||this.hasEventListener("exitFrame")||!eb._frameEventDriver.hasEventListener("enterFrame")||
eb._frameEventDriver.removeEventListener("enterFrame",u(this,this.onEnterFrame),c)},get_scissorRect:function(){return this._scissorRect},set_scissorRect:function(a){this._scissorRect=a;this._context3D.setScissorRectangle(this._scissorRect);return a},get_stage3DIndex:function(){return this._stage3DIndex},get_context3D:function(){return this._context3D},get_usesSoftwareRendering:function(){return this._usesSoftwareRendering},get_x:function(){return this._stage3D.get_x()},set_x:function(a){if(this._viewPort.x==
a)return a;this._stage3D.set_x(this._viewPort.x=a);this.notifyViewportUpdated();return a},get_y:function(){return this._stage3D.get_y()},set_y:function(a){if(this._viewPort.y==a)return a;this._stage3D.set_y(this._viewPort.y=a);this.notifyViewportUpdated();return a},get_width:function(){return this._backBufferWidth},set_width:function(a){if(this._viewPort.width==a)return a;50>a&&(a=50);this._viewPort.width=this._backBufferWidth=a;this._backBufferDirty=!0;this.notifyViewportUpdated();return a},get_height:function(){return this._backBufferHeight},
set_height:function(a){if(this._viewPort.height==a)return a;50>a&&(a=50);this._viewPort.height=this._backBufferHeight=a;this._backBufferDirty=!0;this.notifyViewportUpdated();return a},get_viewPort:function(){this._viewportDirty=!1;return this._viewPort},set_visible:function(a){return this._stage3D.visible=a},get_bufferClear:function(){return this._bufferClear},set_bufferClear:function(a){return this._bufferClear=a},get_mouse3DManager:function(){return this._mouse3DManager},set_mouse3DManager:function(a){return this._mouse3DManager=
a},onContext3DUpdate:function(a){if(null!=this._stage3D.context3D)a=null!=this._context3D,this._context3D=this._stage3D.context3D,this._context3D.set_enableErrorChecking(Me.active),this._usesSoftwareRendering=0==this._context3D.driverInfo.indexOf("Software"),0<this._backBufferWidth&&0<this._backBufferHeight&&this._context3D.configureBackBuffer(this._backBufferWidth,this._backBufferHeight,this._antiAlias,this._enableDepthAndStencil),this.dispatchEvent(new Hf(a?"Context3DRecreated":"Context3DCreated"));
else throw new W(new cb("Rendering context lost!"));},requestContext:function(a,b){null==b&&(b="baseline");null==a&&(a=!1);this._usesSoftwareRendering||(this._usesSoftwareRendering=a);this._profile=b;a=a?1:0;if("baseline"==b)this._stage3D.requestContext3D(a);else try{this._stage3D.requestContext3D(a,Ll.fromString(b))}catch(c){throw ab.lastException=c,new W("An error occurred creating a context using the given profile. Profiles are not supported for the SDK this was compiled with.");}this._contextRequested=
!0},onEnterFrame:function(a){null!=this._context3D&&(this.clear(),this.notifyEnterFrame(),this.present(),this.notifyExitFrame())},recoverFromDisposal:function(){return null==this._context3D?!1:"Disposed"==this._context3D.driverInfo?(this._context3D=null,this.dispatchEvent(new Hf("Context3DDisposed")),!1):!0},clearDepthBuffer:function(){null!=this._context3D&&this._context3D.clear(0,0,0,1,1,0,2)},createVertexBuffer:function(a,b){eb.vertexBufferCount++;return this._context3D.createVertexBuffer(a,b)},
createIndexBuffer:function(a){eb.indexBufferCount++;return this._context3D.createIndexBuffer(a)},drawTriangles:function(a,b,c){null==c&&(c=-1);null==b&&(b=0);eb.drawTriangleCount++;this._context3D.drawTriangles(a,b,c)},__class__:eb});var Bc=function(){this._touchPicker=ok.RAYCAST_FIRST_ENCOUNTERED;this._touchMoveEvent=new oc("touchMove");this._nullVector=new hb;this._updateDirty=!0;this._touchPoints=M.toObjectVector(null);this._touchPointFromId=new Zb;Bc._collidingObjectFromTouchId=new Zb;Bc._previousCollidingObjectFromTouchId=
new Zb};g["away3d.core.managers.Touch3DManager"]=Bc;Bc.__name__="away3d.core.managers.Touch3DManager";Bc.prototype={_updateDirty:null,_nullVector:null,_numTouchPoints:null,_touchPoint:null,_collidingObject:null,_previousCollidingObject:null,_touchPoints:null,_touchPointFromId:null,_touchMoveEvent:null,_forceTouchMove:null,_touchPicker:null,_view:null,updateCollider:function(){if(this._forceTouchMove||this._updateDirty)for(var a=0,b=this._numTouchPoints;a<b;){var c=a++;this._touchPoint=this._touchPoints.get(c);
this._collidingObject=this._touchPicker.getViewCollision(this._touchPoint.x,this._touchPoint.y,this._view);Bc._collidingObjectFromTouchId.h[this._touchPoint.id]=this._collidingObject}},fireTouchEvents:function(){for(var a,b,c=0,d=this._numTouchPoints;c<d;)a=c++,this._touchPoint=this._touchPoints.get(a),this._collidingObject=Bc._collidingObjectFromTouchId.h[this._touchPoint.id],this._previousCollidingObject=Bc._previousCollidingObjectFromTouchId.h[this._touchPoint.id],this._collidingObject!=this._previousCollidingObject&&
(null!=this._previousCollidingObject&&this.queueDispatch("touchOut3d",this._touchMoveEvent,this._previousCollidingObject,this._touchPoint),null!=this._collidingObject&&this.queueDispatch("touchOver3d",this._touchMoveEvent,this._collidingObject,this._touchPoint)),this._forceTouchMove&&null!=this._collidingObject&&this.queueDispatch("touchMove3d",this._touchMoveEvent,this._collidingObject,this._touchPoint);c=0;for(d=Bc._queuedEvents.get_length();c<d;){a=c++;a=Bc._queuedEvents.get(a);for(b=a.object;null!=
b&&!b._ancestorsAllowMouseEnabled;)b=b.get_parent();null!=b&&b.dispatchEvent(a)}Bc._queuedEvents.set_length(0);this._updateDirty=!1;c=0;for(d=this._numTouchPoints;c<d;)a=c++,this._touchPoint=this._touchPoints.get(a),Bc._previousCollidingObjectFromTouchId.h[this._touchPoint.id]=Bc._collidingObjectFromTouchId.h[this._touchPoint.id]},enableTouchListeners:function(a){a.addEventListener("touchBegin",u(this,this.onTouchBegin));a.addEventListener("touchMove",u(this,this.onTouchMove));a.addEventListener("touchEnd",
u(this,this.onTouchEnd))},queueDispatch:function(a,b,c,d){a=new $h(a);a.ctrlKey=b.ctrlKey;a.altKey=b.altKey;a.shiftKey=b.shiftKey;a.screenX=d.x;a.screenY=d.y;a.touchPointID=d.id;null!=c?(a.object=c.entity,a.renderable=c.renderable,a.uv=c.uv,a.localPosition=null!=c.localPosition?c.localPosition.clone():null,a.localNormal=null!=c.localNormal?c.localNormal.clone():null,a.index=c.index,a.subGeometryIndex=c.subGeometryIndex):(a.uv=null,a.object=null,a.localPosition=this._nullVector,a.localNormal=this._nullVector,
a.index=0,a.subGeometryIndex=0);Bc._queuedEvents.push(a)},onTouchBegin:function(a){var b=new qk;b.id=a.touchPointID;b.x=a.stageX;b.y=a.stageY;this._numTouchPoints++;this._touchPoints.push(b);this._touchPointFromId.h[b.id]=b;this.updateCollider();this._collidingObject=Bc._collidingObjectFromTouchId.h[b.id];null!=this._collidingObject&&this.queueDispatch("touchBegin3d",a,this._collidingObject,b);this._updateDirty=!0},onTouchMove:function(a){var b=this._touchPointFromId.h[a.touchPointID];null!=b&&(b.x=
a.stageX,b.y=a.stageY,this._collidingObject=Bc._collidingObjectFromTouchId.h[b.id],null!=this._collidingObject&&this.queueDispatch("touchMove3d",this._touchMoveEvent=a,this._collidingObject,b),this._updateDirty=!0)},onTouchEnd:function(a){var b=this._touchPointFromId.h[a.touchPointID];null!=b&&(this._collidingObject=Bc._collidingObjectFromTouchId.h[b.id],null!=this._collidingObject&&this.queueDispatch("touchEnd3d",a,this._collidingObject,b),this._touchPointFromId.remove(b.id),this._numTouchPoints--,
this._touchPoints.splice(this._touchPoints.indexOf(b,0),1),this._updateDirty=!0)},set_view:function(a){return this._view=a},__class__:Bc};var qk=function(){};g["away3d.core.managers.TouchPoint"]=qk;qk.__name__="away3d.core.managers.TouchPoint";qk.prototype={id:null,x:null,y:null,__class__:qk};var kg=function(){};g["away3d.core.math.MathConsts"]=kg;kg.__name__="away3d.core.math.MathConsts";var hb=function(a,b,c,d){null==d&&(d=0);null==c&&(c=0);null==b&&(b=0);null==a&&(a=0);this.w=d;this.x=a;this.y=
b;this.z=c};g["openfl.geom.Vector3D"]=hb;hb.__name__="openfl.geom.Vector3D";hb.prototype={w:null,x:null,y:null,z:null,clone:function(){return new hb(this.x,this.y,this.z,this.w)},normalize:function(){var a=this.get_length();0!=a&&(this.x/=a,this.y/=a,this.z/=a);return a},get_length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},__class__:hb};var vc=function(a){null!=a&&16==a.get_length()?this.rawData=a.concat(null):this.rawData=M.toFloatVector(null,null,null,[1,0,0,0,0,1,
0,0,0,0,1,0,0,0,0,1])};g["openfl.geom.Matrix3D"]=vc;vc.__name__="openfl.geom.Matrix3D";vc.prototype={rawData:null,append:function(a){var b=this.rawData.get(0),c=this.rawData.get(4),d=this.rawData.get(8),e=this.rawData.get(12),f=this.rawData.get(1),k=this.rawData.get(5),m=this.rawData.get(9),h=this.rawData.get(13),n=this.rawData.get(2),K=this.rawData.get(6),l=this.rawData.get(10),g=this.rawData.get(14),p=this.rawData.get(3),H=this.rawData.get(7),C=this.rawData.get(11),y=this.rawData.get(15),I=a.rawData.get(0),
Yb=a.rawData.get(4),r=a.rawData.get(8),t=a.rawData.get(12),z=a.rawData.get(1),oa=a.rawData.get(5),q=a.rawData.get(9),u=a.rawData.get(13),w=a.rawData.get(2),A=a.rawData.get(6),O=a.rawData.get(10),v=a.rawData.get(14),F=a.rawData.get(3),x=a.rawData.get(7),B=a.rawData.get(11);a=a.rawData.get(15);this.rawData.set(0,b*I+f*Yb+n*r+p*t);this.rawData.set(1,b*z+f*oa+n*q+p*u);this.rawData.set(2,b*w+f*A+n*O+p*v);this.rawData.set(3,b*F+f*x+n*B+p*a);this.rawData.set(4,c*I+k*Yb+K*r+H*t);this.rawData.set(5,c*z+k*
oa+K*q+H*u);this.rawData.set(6,c*w+k*A+K*O+H*v);this.rawData.set(7,c*F+k*x+K*B+H*a);this.rawData.set(8,d*I+m*Yb+l*r+C*t);this.rawData.set(9,d*z+m*oa+l*q+C*u);this.rawData.set(10,d*w+m*A+l*O+C*v);this.rawData.set(11,d*F+m*x+l*B+C*a);this.rawData.set(12,e*I+h*Yb+g*r+y*t);this.rawData.set(13,e*z+h*oa+g*q+y*u);this.rawData.set(14,e*w+h*A+g*O+y*v);this.rawData.set(15,e*F+h*x+g*B+y*a)},appendRotation:function(a,b,c){var d=0,e=d,f=e;null!=c&&(f=c.x,e=c.y,d=c.z);c=a*Math.PI/180;a=Math.cos(c);c=Math.sin(c);
var k=b.x,m=b.y;b=b.z;var h=k*k,n=m*m,K=b*b,l=h+n+K;if(0!=l){var g=Math.sqrt(l);k/=g;m/=g;b/=g;h/=l;n/=l;K/=l}l=1-a;g=new vc;var p=g.rawData;p.set(0,h+(n+K)*a);p.set(1,k*m*l+b*c);p.set(2,k*b*l-m*c);p.set(4,k*m*l-b*c);p.set(5,n+(h+K)*a);p.set(6,m*b*l+k*c);p.set(8,k*b*l+m*c);p.set(9,m*b*l-k*c);p.set(10,K+(h+n)*a);p.set(12,(f*(n+K)-k*(e*m+d*b))*l+(e*b-d*m)*c);p.set(13,(e*(h+K)-m*(f*k+d*b))*l+(d*k-f*b)*c);p.set(14,(d*(h+n)-b*(f*k+e*m))*l+(f*m-e*k)*c);this.append(g)},appendScale:function(a,b,c){this.append(new vc(M.toFloatVector(null,
null,null,[a,0,0,0,0,b,0,0,0,0,c,0,0,0,0,1])))},appendTranslation:function(a,b,c){var d=this.rawData;d.set(12,d.get(12)+a);a=this.rawData;a.set(13,a.get(13)+b);b=this.rawData;b.set(14,b.get(14)+c)},copyColumnFrom:function(a,b){switch(a){case 0:this.rawData.set(0,b.x);this.rawData.set(1,b.y);this.rawData.set(2,b.z);this.rawData.set(3,b.w);break;case 1:this.rawData.set(4,b.x);this.rawData.set(5,b.y);this.rawData.set(6,b.z);this.rawData.set(7,b.w);break;case 2:this.rawData.set(8,b.x);this.rawData.set(9,
b.y);this.rawData.set(10,b.z);this.rawData.set(11,b.w);break;case 3:this.rawData.set(12,b.x),this.rawData.set(13,b.y),this.rawData.set(14,b.z),this.rawData.set(15,b.w)}},copyColumnTo:function(a,b){switch(a){case 0:b.x=this.rawData.get(0);b.y=this.rawData.get(1);b.z=this.rawData.get(2);b.w=this.rawData.get(3);break;case 1:b.x=this.rawData.get(4);b.y=this.rawData.get(5);b.z=this.rawData.get(6);b.w=this.rawData.get(7);break;case 2:b.x=this.rawData.get(8);b.y=this.rawData.get(9);b.z=this.rawData.get(10);
b.w=this.rawData.get(11);break;case 3:b.x=this.rawData.get(12),b.y=this.rawData.get(13),b.z=this.rawData.get(14),b.w=this.rawData.get(15)}},copyFrom:function(a){this.rawData=a.rawData.copy()},copyRawDataFrom:function(a,b,c){null==c&&(c=!1);null==b&&(b=0);c&&this.transpose();for(var d=0,e=a.get_length()-b;d<e;){var f=d++;this.rawData.set(f,a.get(f+b))}c&&this.transpose()},copyRawDataTo:function(a,b,c){null==c&&(c=!1);null==b&&(b=0);c&&this.transpose();for(var d=0,e=this.rawData.get_length();d<e;){var f=
d++;a.set(f+b,this.rawData.get(f))}c&&this.transpose()},copyRowFrom:function(a,b){switch(a){case 0:this.rawData.set(0,b.x);this.rawData.set(4,b.y);this.rawData.set(8,b.z);this.rawData.set(12,b.w);break;case 1:this.rawData.set(1,b.x);this.rawData.set(5,b.y);this.rawData.set(9,b.z);this.rawData.set(13,b.w);break;case 2:this.rawData.set(2,b.x);this.rawData.set(6,b.y);this.rawData.set(10,b.z);this.rawData.set(14,b.w);break;case 3:this.rawData.set(3,b.x),this.rawData.set(7,b.y),this.rawData.set(11,b.z),
this.rawData.set(15,b.w)}},copyRowTo:function(a,b){switch(a){case 0:b.x=this.rawData.get(0);b.y=this.rawData.get(4);b.z=this.rawData.get(8);b.w=this.rawData.get(12);break;case 1:b.x=this.rawData.get(1);b.y=this.rawData.get(5);b.z=this.rawData.get(9);b.w=this.rawData.get(13);break;case 2:b.x=this.rawData.get(2);b.y=this.rawData.get(6);b.z=this.rawData.get(10);b.w=this.rawData.get(14);break;case 3:b.x=this.rawData.get(3),b.y=this.rawData.get(7),b.z=this.rawData.get(11),b.w=this.rawData.get(15)}},identity:function(){this.rawData=
M.toFloatVector(null,null,null,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])},invert:function(){var a=this.get_determinant(),b=1E-11<Math.abs(a);if(b){a=1/a;var c=this.rawData.get(0),d=this.rawData.get(4),e=this.rawData.get(8),f=this.rawData.get(12),k=this.rawData.get(1),m=this.rawData.get(5),h=this.rawData.get(9),n=this.rawData.get(13),K=this.rawData.get(2),l=this.rawData.get(6),g=this.rawData.get(10),p=this.rawData.get(14),H=this.rawData.get(3),C=this.rawData.get(7),y=this.rawData.get(11),I=this.rawData.get(15);
this.rawData.set(0,a*(m*(g*I-p*y)-h*(l*I-p*C)+n*(l*y-g*C)));this.rawData.set(1,-a*(k*(g*I-p*y)-h*(K*I-p*H)+n*(K*y-g*H)));this.rawData.set(2,a*(k*(l*I-p*C)-m*(K*I-p*H)+n*(K*C-l*H)));this.rawData.set(3,-a*(k*(l*y-g*C)-m*(K*y-g*H)+h*(K*C-l*H)));this.rawData.set(4,-a*(d*(g*I-p*y)-e*(l*I-p*C)+f*(l*y-g*C)));this.rawData.set(5,a*(c*(g*I-p*y)-e*(K*I-p*H)+f*(K*y-g*H)));this.rawData.set(6,-a*(c*(l*I-p*C)-d*(K*I-p*H)+f*(K*C-l*H)));this.rawData.set(7,a*(c*(l*y-g*C)-d*(K*y-g*H)+e*(K*C-l*H)));this.rawData.set(8,
a*(d*(h*I-n*y)-e*(m*I-n*C)+f*(m*y-h*C)));this.rawData.set(9,-a*(c*(h*I-n*y)-e*(k*I-n*H)+f*(k*y-h*H)));this.rawData.set(10,a*(c*(m*I-n*C)-d*(k*I-n*H)+f*(k*C-m*H)));this.rawData.set(11,-a*(c*(m*y-h*C)-d*(k*y-h*H)+e*(k*C-m*H)));this.rawData.set(12,-a*(d*(h*p-n*g)-e*(m*p-n*l)+f*(m*g-h*l)));this.rawData.set(13,a*(c*(h*p-n*g)-e*(k*p-n*K)+f*(k*g-h*K)));this.rawData.set(14,-a*(c*(m*p-n*l)-d*(k*p-n*K)+f*(k*l-m*K)));this.rawData.set(15,a*(c*(m*g-h*l)-d*(k*g-h*K)+e*(k*l-m*K)))}return b},prepend:function(a){var b=
a.rawData.get(0),c=a.rawData.get(4),d=a.rawData.get(8),e=a.rawData.get(12),f=a.rawData.get(1),k=a.rawData.get(5),m=a.rawData.get(9),h=a.rawData.get(13),n=a.rawData.get(2),K=a.rawData.get(6),l=a.rawData.get(10),g=a.rawData.get(14),p=a.rawData.get(3),H=a.rawData.get(7),C=a.rawData.get(11);a=a.rawData.get(15);var y=this.rawData.get(0),I=this.rawData.get(4),Yb=this.rawData.get(8),r=this.rawData.get(12),t=this.rawData.get(1),z=this.rawData.get(5),oa=this.rawData.get(9),q=this.rawData.get(13),u=this.rawData.get(2),
w=this.rawData.get(6),A=this.rawData.get(10),O=this.rawData.get(14),v=this.rawData.get(3),F=this.rawData.get(7),x=this.rawData.get(11),B=this.rawData.get(15);this.rawData.set(0,b*y+f*I+n*Yb+p*r);this.rawData.set(1,b*t+f*z+n*oa+p*q);this.rawData.set(2,b*u+f*w+n*A+p*O);this.rawData.set(3,b*v+f*F+n*x+p*B);this.rawData.set(4,c*y+k*I+K*Yb+H*r);this.rawData.set(5,c*t+k*z+K*oa+H*q);this.rawData.set(6,c*u+k*w+K*A+H*O);this.rawData.set(7,c*v+k*F+K*x+H*B);this.rawData.set(8,d*y+m*I+l*Yb+C*r);this.rawData.set(9,
d*t+m*z+l*oa+C*q);this.rawData.set(10,d*u+m*w+l*A+C*O);this.rawData.set(11,d*v+m*F+l*x+C*B);this.rawData.set(12,e*y+h*I+g*Yb+a*r);this.rawData.set(13,e*t+h*z+g*oa+a*q);this.rawData.set(14,e*u+h*w+g*A+a*O);this.rawData.set(15,e*v+h*F+g*x+a*B)},prependScale:function(a,b,c){this.prepend(new vc(M.toFloatVector(null,null,null,[a,0,0,0,0,b,0,0,0,0,c,0,0,0,0,1])))},prependTranslation:function(a,b,c){var d=new vc;d.set_position(new hb(a,b,c));this.prepend(d)},recompose:function(a,b){null==b&&(b=1);if(3>a.get_length()||
0==a.get(2).x||0==a.get(2).y||0==a.get(2).z)return!1;this.identity();var c=[];c[0]=c[1]=c[2]=a.get(2).x;c[4]=c[5]=c[6]=a.get(2).y;c[8]=c[9]=c[10]=a.get(2).z;if(1==b){b=Math.cos(a.get(1).x);var d=Math.cos(a.get(1).y),e=Math.cos(a.get(1).z),f=Math.sin(a.get(1).x),k=Math.sin(a.get(1).y),m=Math.sin(a.get(1).z);this.rawData.set(0,d*e*c[0]);this.rawData.set(1,d*m*c[1]);this.rawData.set(2,-k*c[2]);this.rawData.set(3,0);this.rawData.set(4,(f*k*e-b*m)*c[4]);this.rawData.set(5,(f*k*m+b*e)*c[5]);this.rawData.set(6,
f*d*c[6]);this.rawData.set(7,0);this.rawData.set(8,(b*k*e+f*m)*c[8]);this.rawData.set(9,(b*k*m-f*e)*c[9]);this.rawData.set(10,b*d*c[10])}else d=a.get(1).x,e=a.get(1).y,f=a.get(1).z,k=a.get(1).w,0==b&&(d*=Math.sin(k/2),e*=Math.sin(k/2),f*=Math.sin(k/2),k=Math.cos(k/2)),this.rawData.set(0,(1-2*e*e-2*f*f)*c[0]),this.rawData.set(1,(2*d*e+2*k*f)*c[1]),this.rawData.set(2,(2*d*f-2*k*e)*c[2]),this.rawData.set(3,0),this.rawData.set(4,(2*d*e-2*k*f)*c[4]),this.rawData.set(5,(1-2*d*d-2*f*f)*c[5]),this.rawData.set(6,
(2*e*f+2*k*d)*c[6]),this.rawData.set(7,0),this.rawData.set(8,(2*d*f+2*k*e)*c[8]),this.rawData.set(9,(2*e*f-2*k*d)*c[9]),this.rawData.set(10,(1-2*d*d-2*e*e)*c[10]);this.rawData.set(11,0);this.rawData.set(12,a.get(0).x);this.rawData.set(13,a.get(0).y);this.rawData.set(14,a.get(0).z);this.rawData.set(15,1);0==a.get(2).x&&this.rawData.set(0,1E-15);0==a.get(2).y&&this.rawData.set(5,1E-15);0==a.get(2).z&&this.rawData.set(10,1E-15);return!(0==a.get(2).x||0==a.get(2).y||0==a.get(2).y)},transformVectors:function(a,
b){for(var c=0,d,e,f;c+3<=a.get_length();)d=a.get(c),e=a.get(c+1),f=a.get(c+2),b.set(c,d*this.rawData.get(0)+e*this.rawData.get(4)+f*this.rawData.get(8)+this.rawData.get(12)),b.set(c+1,d*this.rawData.get(1)+e*this.rawData.get(5)+f*this.rawData.get(9)+this.rawData.get(13)),b.set(c+2,d*this.rawData.get(2)+e*this.rawData.get(6)+f*this.rawData.get(10)+this.rawData.get(14)),c+=3},transpose:function(){var a=this.rawData.copy();this.rawData.set(1,a.get(4));this.rawData.set(2,a.get(8));this.rawData.set(3,
a.get(12));this.rawData.set(4,a.get(1));this.rawData.set(6,a.get(9));this.rawData.set(7,a.get(13));this.rawData.set(8,a.get(2));this.rawData.set(9,a.get(6));this.rawData.set(11,a.get(14));this.rawData.set(12,a.get(3));this.rawData.set(13,a.get(7));this.rawData.set(14,a.get(11))},get_determinant:function(){return(this.rawData.get(0)*this.rawData.get(5)-this.rawData.get(4)*this.rawData.get(1))*(this.rawData.get(10)*this.rawData.get(15)-this.rawData.get(14)*this.rawData.get(11))-(this.rawData.get(0)*
this.rawData.get(9)-this.rawData.get(8)*this.rawData.get(1))*(this.rawData.get(6)*this.rawData.get(15)-this.rawData.get(14)*this.rawData.get(7))+(this.rawData.get(0)*this.rawData.get(13)-this.rawData.get(12)*this.rawData.get(1))*(this.rawData.get(6)*this.rawData.get(11)-this.rawData.get(10)*this.rawData.get(7))+(this.rawData.get(4)*this.rawData.get(9)-this.rawData.get(8)*this.rawData.get(5))*(this.rawData.get(2)*this.rawData.get(15)-this.rawData.get(14)*this.rawData.get(3))-(this.rawData.get(4)*this.rawData.get(13)-
this.rawData.get(12)*this.rawData.get(5))*(this.rawData.get(2)*this.rawData.get(11)-this.rawData.get(10)*this.rawData.get(3))+(this.rawData.get(8)*this.rawData.get(13)-this.rawData.get(12)*this.rawData.get(9))*(this.rawData.get(2)*this.rawData.get(7)-this.rawData.get(6)*this.rawData.get(3))},set_position:function(a){this.rawData.set(12,a.x);this.rawData.set(13,a.y);this.rawData.set(14,a.z);return a},__class__:vc};var db=function(){};g["away3d.core.math.Matrix3DUtils"]=db;db.__name__="away3d.core.math.Matrix3DUtils";
db.getForward=function(a,b){null==b&&(b=new hb(0,0,0));a.copyColumnTo(2,b);b.normalize();return b};db.getUp=function(a,b){null==b&&(b=new hb(0,0,0));a.copyColumnTo(1,b);b.normalize();return b};db.getRight=function(a,b){null==b&&(b=new hb(0,0,0));a.copyColumnTo(0,b);b.normalize();return b};db.decompose=function(a,b){null==b&&(b=1);var c=db.RAW_DATA_CONTAINER;a.copyRawDataTo(c);var d=c.get(0),e=c.get(1),f=c.get(2),k=c.get(4),m=c.get(5),h=c.get(6),n=c.get(8),K=c.get(9),l=c.get(10);a=c.get(12);var g=
c.get(13);c=c.get(14);var p=Math.sqrt(d*d+e*e+f*f),H=Math.sqrt(k*k+m*m+h*h),C=Math.sqrt(n*n+K*K+l*l),y=0,I=p,Yb=H,r=C;0>d*(m*l-h*K)-e*(k*l-h*n)+f*(k*K-m*n)&&(r=-r);d/=I;e/=I;f/=I;k/=Yb;m/=Yb;h/=Yb;n/=r;K/=r;l/=r;1==b?(p=Math.atan2(h,l),H=Math.atan2(-f,Math.sqrt(d*d+e*e)),e=Math.sin(p),f=Math.cos(p),C=Math.atan2(e*n-f*k,f*m-e*K)):0==b?(y=Math.acos((d+m+l-1)/2),m=Math.sqrt((h-K)*(h-K)+(n-f)*(n-f)+(e-k)*(e-k)),p=(h-K)/m,H=(n-f)/m,C=(e-k)/m):(p=d+m+l,0<p?(y=Math.sqrt(1+p)/2,p=(h-K)/(4*y),H=(n-f)/(4*y),
C=(e-k)/(4*y)):d>m&&d>l?(p=Math.sqrt(1+d-m-l)/2,y=(h-K)/(4*p),H=(e+k)/(4*p),C=(n+f)/(4*p)):m>l?(H=Math.sqrt(1+m-d-l)/2,p=(e+k)/(4*H),y=(n-f)/(4*H),C=(h+K)/(4*H)):(C=Math.sqrt(1+l-d-m)/2,p=(n+f)/(4*C),H=(h+K)/(4*C),y=(e-k)/(4*C)));k=db.CALCULATION_DECOMPOSE;k.get(0).x=a;k.get(0).y=g;k.get(0).z=c;k.get(1).x=p;k.get(1).y=H;k.get(1).z=C;k.get(1).w=y;k.get(2).x=I;k.get(2).y=Yb;k.get(2).z=r;return k};db.transformVector=function(a,b,c){null==c&&(c=new hb);var d=db.RAW_DATA_CONTAINER;a.copyRawDataTo(d);a=
d.get(0);var e=d.get(1),f=d.get(2),k=d.get(3),m=d.get(4),h=d.get(5),n=d.get(6),K=d.get(7),l=d.get(8),g=d.get(9),p=d.get(10),H=d.get(11),C=d.get(12),y=d.get(13),I=d.get(14);d=d.get(15);var Yb=b.x,r=b.y;b=b.z;c.x=a*Yb+m*r+l*b+C;c.y=e*Yb+h*r+g*b+y;c.z=f*Yb+n*r+p*b+I;c.w=k*Yb+K*r+H*b+d;return c};db.deltaTransformVector=function(a,b,c){null==c&&(c=new hb);var d=db.RAW_DATA_CONTAINER;a.copyRawDataTo(d);a=d.get(0);var e=d.get(1),f=d.get(2),k=d.get(3),m=d.get(4),h=d.get(5),n=d.get(6),K=d.get(7),l=d.get(8),
g=d.get(9),p=d.get(10);d=d.get(11);var H=b.x,C=b.y;b=b.z;c.x=a*H+m*C+l*b;c.y=e*H+h*C+g*b;c.z=f*H+n*C+p*b;c.w=k*H+K*C+d*b;return c};var lg=function(a,b,c,d){null==d&&(d=0);null==c&&(c=0);null==b&&(b=0);null==a&&(a=0);this.a=a;this.b=b;this.c=c;this.d=d;this._alignment=0==a&&0==b?1:0==b&&0==c?2:0==a&&0==c?3:0};g["away3d.core.math.Plane3D"]=lg;lg.__name__="away3d.core.math.Plane3D";lg.prototype={a:null,b:null,c:null,d:null,_alignment:null,__class__:lg};var We=function(){this._childNodes=M.toObjectVector(null);
this._numChildNodes=this._collectionMark=this._numEntities=0};g["away3d.core.partition.NodeBase"]=We;We.__name__="away3d.core.partition.NodeBase";We.prototype={_parent:null,_childNodes:null,_numChildNodes:null,_debugPrimitive:null,_numEntities:null,_collectionMark:null,set_showDebugBounds:function(a){if(null!=this._debugPrimitive==a)return a;a?this._debugPrimitive=this.createDebugBounds():(this._debugPrimitive.dispose(),this._debugPrimitive=null);for(var b=0,c=this._numChildNodes;b<c;){var d=b++;
this._childNodes.get(d).set_showDebugBounds(a)}return a},get_parent:function(){return this._parent},addNode:function(a){a._parent=this;this._numEntities+=a._numEntities;this._childNodes.set(this._numChildNodes++,a);a.set_showDebugBounds(null!=this._debugPrimitive);var b=a._numEntities;for(a=this;a._numEntities+=b,a=a._parent,null!=a;);},removeNode:function(a){var b=this._childNodes.indexOf(a,0);this._childNodes.set(b,this._childNodes.get(--this._numChildNodes));this._childNodes.pop();b=a._numEntities;
for(a=this;a._numEntities-=b,a=a._parent,null!=a;);},isInFrustum:function(a,b){return!0},findPartitionForEntity:function(a){return this},acceptTraverser:function(a){if((0!=this._numEntities||null!=this._debugPrimitive)&&a.enterNode(this)){for(var b=0;b<this._numChildNodes;)this._childNodes.get(b++).acceptTraverser(a);null!=this._debugPrimitive&&a.applyRenderable(this._debugPrimitive)}},createDebugBounds:function(){return null},__class__:We};var Rb=function(a){We.call(this);this._entity=a;this._numEntities=
1};g["away3d.core.partition.EntityNode"]=Rb;Rb.__name__="away3d.core.partition.EntityNode";Rb.__super__=We;Rb.prototype=v(We.prototype,{_entity:null,_updateQueueNext:null,get_entity:function(){return this._entity},acceptTraverser:function(a){a.applyEntity(this._entity)},removeFromParent:function(){null!=this._parent&&this._parent.removeNode(this);this._parent=null},isInFrustum:function(a,b){return this._entity.get_isVisible()?this._entity.get_worldBounds().isInFrustum(a,b):!1},__class__:Rb});var Lg=
function(a){Rb.call(this,a)};g["away3d.core.partition.CameraNode"]=Lg;Lg.__name__="away3d.core.partition.CameraNode";Lg.__super__=Rb;Lg.prototype=v(Rb.prototype,{acceptTraverser:function(a){},__class__:Lg});var ai=function(a){Rb.call(this,a);this._light=a};g["away3d.core.partition.DirectionalLightNode"]=ai;ai.__name__="away3d.core.partition.DirectionalLightNode";ai.__super__=Rb;ai.prototype=v(Rb.prototype,{_light:null,acceptTraverser:function(a){a.enterNode(this)&&(Rb.prototype.acceptTraverser.call(this,
a),a.applyDirectionalLight(this._light))},__class__:ai});var bi=function(a){Rb.call(this,a);this._light=a};g["away3d.core.partition.LightNode"]=bi;bi.__name__="away3d.core.partition.LightNode";bi.__super__=Rb;bi.prototype=v(Rb.prototype,{_light:null,acceptTraverser:function(a){a.enterNode(this)&&(Rb.prototype.acceptTraverser.call(this,a),a.applyUnknownLight(this._light))},__class__:bi});var ci=function(a){Rb.call(this,a);this._light=a};g["away3d.core.partition.LightProbeNode"]=ci;ci.__name__="away3d.core.partition.LightProbeNode";
ci.__super__=Rb;ci.prototype=v(Rb.prototype,{_light:null,acceptTraverser:function(a){a.enterNode(this)&&(Rb.prototype.acceptTraverser.call(this,a),a.applyLightProbe(this._light))},__class__:ci});var di=function(a){Rb.call(this,a);this._mesh=a};g["away3d.core.partition.MeshNode"]=di;di.__name__="away3d.core.partition.MeshNode";di.__super__=Rb;di.prototype=v(Rb.prototype,{_mesh:null,acceptTraverser:function(a){if(a.enterNode(this)){Rb.prototype.acceptTraverser.call(this,a);for(var b=this._mesh.get_subMeshes(),
c=0,d=b.get_length();c<d;)a.applyRenderable(b.get(c++))}},__class__:di});var ei=function(){We.call(this)};g["away3d.core.partition.NullNode"]=ei;ei.__name__="away3d.core.partition.NullNode";ei.__super__=We;ei.prototype=v(We.prototype,{__class__:ei});var Uh=function(a){this._rootNode=a;null==a&&(this._rootNode=new ei)};g["away3d.core.partition.Partition3D"]=Uh;Uh.__name__="away3d.core.partition.Partition3D";Uh.prototype={_rootNode:null,_updatesMade:null,_updateQueue:null,traverse:function(a){this._updatesMade&&
this.updateEntities();++gf._collectionMark;this._rootNode.acceptTraverser(a)},markForUpdate:function(a){a=a.getEntityPartitionNode();for(var b=this._updateQueue;null!=b;){if(a==b)return;b=b._updateQueueNext}a._updateQueueNext=this._updateQueue;this._updateQueue=a;this._updatesMade=!0},removeEntity:function(a){a=a.getEntityPartitionNode();var b;a.removeFromParent();if(a==this._updateQueue)this._updateQueue=a._updateQueueNext;else{for(b=this._updateQueue;null!=b&&b._updateQueueNext!=a;)b=b._updateQueueNext;
null!=b&&(b._updateQueueNext=a._updateQueueNext)}a._updateQueueNext=null;null==this._updateQueue&&(this._updatesMade=!1)},updateEntities:function(){var a=this._updateQueue;this._updateQueue=null;for(this._updatesMade=!1;;){var b=this._rootNode.findPartitionForEntity(a.get_entity());a.get_parent()!=b&&(null!=a&&a.removeFromParent(),b.addNode(a));b=a._updateQueueNext;a._updateQueueNext=null;a.get_entity().internalUpdate();a=b;if(null==a)break}},__class__:Uh};var fi=function(a){Rb.call(this,a);this._light=
a};g["away3d.core.partition.PointLightNode"]=fi;fi.__name__="away3d.core.partition.PointLightNode";fi.__super__=Rb;fi.prototype=v(Rb.prototype,{_light:null,acceptTraverser:function(a){a.enterNode(this)&&(Rb.prototype.acceptTraverser.call(this,a),a.applyPointLight(this._light))},__class__:fi});var Og=function(a){Rb.call(this,Ka.__cast(a,Ha));this._renderable=a};g["away3d.core.partition.RenderableNode"]=Og;Og.__name__="away3d.core.partition.RenderableNode";Og.__super__=Rb;Og.prototype=v(Rb.prototype,
{_renderable:null,acceptTraverser:function(a){a.enterNode(this)&&(Rb.prototype.acceptTraverser.call(this,a),a.applyRenderable(this._renderable))},__class__:Og});var Pg=function(){};g["away3d.core.pick.IPicker"]=Pg;Pg.__name__="away3d.core.pick.IPicker";Pg.__isInterface__=!0;Pg.prototype={getViewCollision:null,__class__:Pg};var rk=function(){};g["away3d.core.pick.IPickingCollider"]=rk;rk.__name__="away3d.core.pick.IPickingCollider";rk.__isInterface__=!0;rk.prototype={setLocalRay:null,testSubMeshCollision:null,
__class__:rk};var Sh=function(a){this.entity=a};g["away3d.core.pick.PickingCollisionVO"]=Sh;Sh.__name__="away3d.core.pick.PickingCollisionVO";Sh.prototype={entity:null,localPosition:null,localNormal:null,uv:null,index:null,subGeometryIndex:null,localRayPosition:null,localRayDirection:null,rayPosition:null,rayDirection:null,rayOriginIsInsideBounds:null,rayEntryDistance:null,renderable:null,__class__:Sh};var If=function(a){this._onlyMouseEnabled=!0;this._ignoredEntities=[];this._findClosestCollision=
a;this._entities=M.toObjectVector(null)};g["away3d.core.pick.RaycastPicker"]=If;If.__name__="away3d.core.pick.RaycastPicker";If.__interfaces__=[Pg];If.prototype={_findClosestCollision:null,_ignoredEntities:null,_onlyMouseEnabled:null,_entities:null,_numEntities:null,getViewCollision:function(a,b,c){var d=c.get_entityCollector();if(0==d.get_numMouseEnableds())return null;var e=c.unproject(a,b,0,If.tempRayPosition);a=c.unproject(a,b,1,If.tempRayDirection);a.x-=e.x;a.y-=e.y;a.z-=e.z;this._numEntities=
0;for(d=d.get_entityHead();null!=d;)b=d.entity,this.isIgnored(b)||b.get_isVisible()&&b.isIntersectingRay(e,a)&&this._entities.set(this._numEntities++,b),d=d.next;return 0==this._numEntities?null:this.getPickingCollisionVO()},isIgnored:function(a){if(this._onlyMouseEnabled&&(!a._ancestorsAllowMouseEnabled||!a.get_mouseEnabled()))return!0;for(var b=0,c=this._ignoredEntities;b<c.length;){var d=c[b];++b;if(d==a)return!0}return!1},sortOnNearT:function(a,b){return a.get_pickingCollisionVO().rayEntryDistance>
b.get_pickingCollisionVO().rayEntryDistance?1:-1},getPickingCollisionVO:function(){this._entities.set_length(this._numEntities);this._entities.sort(u(this,this.sortOnNearT));for(var a=Infinity,b=null,c,d,e=0,f=this._numEntities;e<f;)if(c=e++,d=this._entities.get(c),c=d._pickingCollisionVO,null!=d.get_pickingCollider()){if((null==b||c.rayEntryDistance<b.rayEntryDistance)&&d.collidesBefore(a,this._findClosestCollision)&&(a=c.rayEntryDistance,b=c,!this._findClosestCollision))return this.updateLocalPosition(c),
c}else if((null==b||c.rayEntryDistance<b.rayEntryDistance)&&!c.rayOriginIsInsideBounds)return this.updateLocalPosition(c),c;return b},updateLocalPosition:function(a){null==a.localPosition&&(a.localPosition=new hb);var b=a.localPosition,c=a.localRayDirection,d=a.localRayPosition;a=a.rayEntryDistance;b.x=d.x+a*c.x;b.y=d.y+a*c.y;b.z=d.z+a*c.z},__class__:If};var ya=function(a,b,c,d){null==d&&(d=0);null==c&&(c=0);null==b&&(b=0);null==a&&(a=0);this.x=a;this.y=b;this.width=c;this.height=d};g["openfl.geom.Rectangle"]=
ya;ya.__name__="openfl.geom.Rectangle";ya.prototype={height:null,width:null,x:null,y:null,clone:function(){return new ya(this.x,this.y,this.width,this.height)},contains:function(a,b){return a>=this.x&&b>=this.y&&a<this.get_right()?b<this.get_bottom():!1},containsPoint:function(a){return this.contains(a.x,a.y)},copyFrom:function(a){this.x=a.x;this.y=a.y;this.width=a.width;this.height=a.height},equals:function(a){return a==this?!0:null!=a&&this.x==a.x&&this.y==a.y&&this.width==a.width?this.height==
a.height:!1},setTo:function(a,b,c,d){this.x=a;this.y=b;this.width=c;this.height=d},__contract:function(a,b,c,d){if(0!=this.width||0!=this.height){var e=0,f=0,k=0,m=0;this.x<a&&(e=a-this.x);this.y<b&&(f=b-this.y);this.get_right()>a+c&&(k=a+c-this.get_right());this.get_bottom()>b+d&&(m=b+d-this.get_bottom());this.x+=e;this.y+=f;this.width+=k-e;this.height+=m-f}},__expand:function(a,b,c,d){if(0==this.width&&0==this.height)this.x=a,this.y=b,this.width=c,this.height=d;else{var e=this.get_right(),f=this.get_bottom();
this.x>a&&(this.x=a,this.width=e-a);this.y>b&&(this.y=b,this.height=f-b);e<a+c&&(this.width=a+c-this.x);f<b+d&&(this.height=b+d-this.y)}},__toLimeRectangle:function(){null==ya.__limeRectangle&&(ya.__limeRectangle=new od);ya.__limeRectangle.setTo(this.x,this.y,this.width,this.height);return ya.__limeRectangle},__transform:function(a,b){var c=b.a*this.x+b.c*this.y,d=c,e=b.b*this.x+b.d*this.y,f=e,k=b.a*(this.x+this.width)+b.c*this.y,m=b.b*(this.x+this.width)+b.d*this.y;k<c&&(c=k);m<e&&(e=m);k>d&&(d=
k);m>f&&(f=m);k=b.a*(this.x+this.width)+b.c*(this.y+this.height);m=b.b*(this.x+this.width)+b.d*(this.y+this.height);k<c&&(c=k);m<e&&(e=m);k>d&&(d=k);m>f&&(f=m);k=b.a*this.x+b.c*(this.y+this.height);m=b.b*this.x+b.d*(this.y+this.height);k<c&&(c=k);m<e&&(e=m);k>d&&(d=k);m>f&&(f=m);a.setTo(c+b.tx,e+b.ty,d-c,f-e)},get_bottom:function(){return this.y+this.height},get_left:function(){return this.x},get_right:function(){return this.x+this.width},get_top:function(){return this.y},__class__:ya};var ok=function(){};
g["away3d.core.pick.PickingType"]=ok;ok.__name__="away3d.core.pick.PickingType";var Ml=function(a){this.set_stage3DProxy(a)};g["away3d.core.render.BackgroundImageRenderer"]=Ml;Ml.__name__="away3d.core.render.BackgroundImageRenderer";Ml.prototype={_program3d:null,_texture:null,_indexBuffer:null,_vertexBuffer:null,_stage3DProxy:null,_context:null,set_stage3DProxy:function(a){if(a==this._stage3DProxy)return a;this._stage3DProxy=a;this.removeBuffers();return a},removeBuffers:function(){null!=this._vertexBuffer&&
(eb.disposeVertexBuffer(this._vertexBuffer),this._vertexBuffer=null,this._program3d.dispose(),this._program3d=null,eb.disposeIndexBuffer(this._indexBuffer),this._indexBuffer=null)},getVertexCode:function(){return"mov op, va0\nmov v0, va1"},getFragmentCode:function(){switch(this._texture.get_format()){case 3:var a="dxt1,";break;case 4:a="dxt5,";break;default:a=""}return"tex ft0, v0, fs0 <2d, "+a+"linear>\t\nmov oc, ft0"},render:function(){var a=this._stage3DProxy.get_context3D();a!=this._context&&
(this.removeBuffers(),this._context=a);null!=a&&(null==this._vertexBuffer&&this.initBuffers(a),a.setBlendFactors(2,9),a.setProgram(this._program3d),a.setTextureAt(0,this._texture.getTextureForStage3D(this._stage3DProxy)),a.setVertexBufferAt(0,this._vertexBuffer,0,2),a.setVertexBufferAt(1,this._vertexBuffer,2,2),a.drawTriangles(this._indexBuffer,0,2),a.setVertexBufferAt(0,null),a.setVertexBufferAt(1,null),a.setTextureAt(0,null))},initBuffers:function(a){this._vertexBuffer=this._stage3DProxy.createVertexBuffer(4,
4);this._program3d=a.createProgram();this._indexBuffer=this._stage3DProxy.createIndexBuffer(6);a=[2,1,0,3,2,0];for(var b=M.toIntVector(null),c=0,d=a.length;c<d;){var e=c++;b.set(e,a[e])}this._indexBuffer.uploadFromVector(b,0,6);this._program3d.upload((new na(Me.active)).assemble(Ye.toString(1),this.getVertexCode()),(new na(Me.active)).assemble(Ye.toString(0),this.getFragmentCode()));c=b=2;d=-1;e=1;null!=this._stage3DProxy.get_scissorRect()&&(d=(2*this._stage3DProxy.get_scissorRect().x-this._stage3DProxy.get_viewPort().width)/
this._stage3DProxy.get_viewPort().width,e=(2*this._stage3DProxy.get_scissorRect().y-this._stage3DProxy.get_viewPort().height)/this._stage3DProxy.get_viewPort().height*-1,b=2/(this._stage3DProxy.get_viewPort().width/this._stage3DProxy.get_scissorRect().width),c=2/(this._stage3DProxy.get_viewPort().height/this._stage3DProxy.get_scissorRect().height));a=this._vertexBuffer;b=[d,e-c,0,1,d+b,e-c,1,1,d+b,e,1,0,d,e,0,0];c=M.toFloatVector(null);d=0;for(e=b.length;d<e;){var f=d++;c.set(f,b[f])}a.uploadFromVector(c,
0,4)},__class__:Ml};var te=function(a){null==a&&(a=!1);this._rttViewProjectionMatrix=new vc;this._clearOnRender=!0;this._textureRatioX=this._textureRatioY=1;this._shareContext=!1;this._backgroundAlpha=1;this._backgroundR=this._backgroundG=this._backgroundB=0;this._renderableSorter=new Qg;this._renderToTexture=a};g["away3d.core.render.RendererBase"]=te;te.__name__="away3d.core.render.RendererBase";te.prototype={_context:null,_stage3DProxy:null,_backgroundR:null,_backgroundG:null,_backgroundB:null,
_backgroundAlpha:null,_shareContext:null,_renderTarget:null,_renderTargetSurface:null,_viewWidth:null,_viewHeight:null,_renderableSorter:null,_backgroundImageRenderer:null,_renderToTexture:null,_textureRatioX:null,_textureRatioY:null,_snapshotBitmapData:null,_snapshotRequired:null,_clearOnRender:null,_rttViewProjectionMatrix:null,createEntityCollector:function(){return new Jf},set_viewWidth:function(a){return this._viewWidth=a},set_viewHeight:function(a){return this._viewHeight=a},get_renderToTexture:function(){return this._renderToTexture},
set_clearOnRender:function(a){return this._clearOnRender=a},set_backgroundR:function(a){return this._backgroundR=a},set_backgroundG:function(a){return this._backgroundG=a},set_backgroundB:function(a){return this._backgroundB=a},set_stage3DProxy:function(a){if(a==this._stage3DProxy)return a;if(null==a)return null!=this._stage3DProxy&&(this._stage3DProxy.removeEventListener("Context3DCreated",u(this,this.onContextUpdate)),this._stage3DProxy.removeEventListener("Context3DRecreated",u(this,this.onContextUpdate))),
this._context=this._stage3DProxy=null;this._stage3DProxy=a;this._stage3DProxy.addEventListener("Context3DCreated",u(this,this.onContextUpdate));this._stage3DProxy.addEventListener("Context3DRecreated",u(this,this.onContextUpdate));null!=this._backgroundImageRenderer&&this._backgroundImageRenderer.set_stage3DProxy(a);null!=a.get_context3D()&&(this._context=a.get_context3D());return a},set_shareContext:function(a){return this._shareContext=a},render:function(a,b,c,d){null==d&&(d=0);null!=this._stage3DProxy&&
null!=this._context&&(this._rttViewProjectionMatrix.copyFrom(a.get_camera().get_viewProjection()),this._rttViewProjectionMatrix.appendScale(this._textureRatioX,this._textureRatioY,1),this.executeRender(a,b,c,d),this._context.setVertexBufferAt(0,null),this._context.setTextureAt(0,null),this._context.setVertexBufferAt(1,null),this._context.setTextureAt(1,null),this._context.setVertexBufferAt(2,null),this._context.setTextureAt(2,null),this._context.setVertexBufferAt(3,null),this._context.setTextureAt(3,
null),this._context.setVertexBufferAt(4,null),this._context.setTextureAt(4,null),this._context.setVertexBufferAt(5,null),this._context.setTextureAt(5,null),this._context.setVertexBufferAt(6,null),this._context.setTextureAt(6,null),this._context.setVertexBufferAt(7,null),this._context.setTextureAt(7,null))},executeRender:function(a,b,c,d){null==d&&(d=0);this._renderTarget=b;this._renderTargetSurface=d;null!=this._renderableSorter&&this._renderableSorter.sort(a);this._renderToTexture&&this.executeRenderToTexturePass(a);
this._stage3DProxy.setRenderTarget(b,!0,d);null==b&&this._shareContext||!this._clearOnRender||this._context.clear(this._backgroundR,this._backgroundG,this._backgroundB,this._backgroundAlpha,1,0);this._context.setDepthTest(!1,0);this._stage3DProxy.set_scissorRect(c);null!=this._backgroundImageRenderer&&this._backgroundImageRenderer.render();this.draw(a,b);this._context.setDepthTest(!1,5);!this._shareContext&&this._snapshotRequired&&null!=this._snapshotBitmapData&&(this._context.drawToBitmapData(this._snapshotBitmapData),
this._snapshotRequired=!1);this._stage3DProxy.set_scissorRect(null)},executeRenderToTexturePass:function(a){throw new W(new tb);},draw:function(a,b){throw new W(new tb);},onContextUpdate:function(a){this._context=this._stage3DProxy.get_context3D()},set_textureRatioX:function(a){return this._textureRatioX=a},set_textureRatioY:function(a){return this._textureRatioY=a},__class__:te};var ae=function(){this._skyboxTempVector=new hb;this._tempSkyboxMatrix=new vc;this._skyboxProjection=new vc;te.call(this);
this._depthRenderer=new Xe;this._distanceRenderer=new Xe(!1,!0)};g["away3d.core.render.DefaultRenderer"]=ae;ae.__name__="away3d.core.render.DefaultRenderer";ae.__super__=te;ae.prototype=v(te.prototype,{_activeMaterial:null,_distanceRenderer:null,_depthRenderer:null,_skyboxProjection:null,_tempSkyboxMatrix:null,_skyboxTempVector:null,set_stage3DProxy:function(a){te.prototype.set_stage3DProxy.call(this,a);this._distanceRenderer.set_stage3DProxy(this._depthRenderer.set_stage3DProxy(a));return a},executeRender:function(a,
b,c,d){null==d&&(d=0);this.updateLights(a);null!=b&&(this.drawRenderables(a.get_opaqueRenderableHead(),a,ae.RTT_PASSES),this.drawRenderables(a.get_blendedRenderableHead(),a,ae.RTT_PASSES));te.prototype.executeRender.call(this,a,b,c,d)},updateLights:function(a){var b=a.get_directionalLights(),c=a.get_pointLights();var d=b.get_length();for(var e=0,f=d;e<f;){d=e++;d=b.get(d);var k=d.get_shadowMapper();d.get_castsShadows()&&(k.get_autoUpdateShadows()||k._shadowsInvalid)&&k.renderDepthMap(this._stage3DProxy,
a,this._depthRenderer)}d=c.get_length();b=0;for(e=d;b<e;)d=b++,d=c.get(d),k=d.get_shadowMapper(),d.get_castsShadows()&&(k.get_autoUpdateShadows()||k._shadowsInvalid)&&k.renderDepthMap(this._stage3DProxy,a,this._distanceRenderer)},draw:function(a,b){this._context.setBlendFactors(2,9);null!=a.get_skyBox()&&(null!=this._activeMaterial&&this._activeMaterial.deactivate(this._stage3DProxy),this._activeMaterial=null,this._context.setDepthTest(!1,0),this.drawSkyBox(a));this._context.setDepthTest(!0,5);b=
null!=b?ae.SCREEN_PASSES:ae.ALL_PASSES;this.drawRenderables(a.get_opaqueRenderableHead(),a,b);this.drawRenderables(a.get_blendedRenderableHead(),a,b);this._context.setDepthTest(!1,5);null!=this._activeMaterial&&this._activeMaterial.deactivate(this._stage3DProxy);this._activeMaterial=null},drawSkyBox:function(a){var b=a.get_skyBox(),c=b.get_material(),d=a.get_camera();this.updateSkyBoxProjection(d);c.activatePass(0,this._stage3DProxy,d);c.renderPass(0,b,this._stage3DProxy,a,this._skyboxProjection);
c.deactivatePass(0,this._stage3DProxy)},updateSkyBoxProjection:function(a){this._skyboxProjection.copyFrom(this._rttViewProjectionMatrix);this._skyboxProjection.copyRowTo(2,this._skyboxTempVector);var b=a.get_scenePosition(),c=this._skyboxTempVector.x,d=this._skyboxTempVector.y,e=this._skyboxTempVector.z,f=Math.sqrt(c*c+d*d+e*e);this._skyboxTempVector.x=0;this._skyboxTempVector.y=0;this._skyboxTempVector.z=0;this._skyboxTempVector.w=1;this._tempSkyboxMatrix.copyFrom(a.get_sceneTransform());this._tempSkyboxMatrix.copyColumnFrom(3,
this._skyboxTempVector);this._skyboxTempVector.x=0;this._skyboxTempVector.y=0;this._skyboxTempVector.z=1;this._skyboxTempVector.w=0;db.transformVector(this._tempSkyboxMatrix,this._skyboxTempVector,this._skyboxTempVector);this._skyboxTempVector.normalize();1E-6<Math.abs(Math.acos(c/f*this._skyboxTempVector.x+d/f*this._skyboxTempVector.y+e/f*this._skyboxTempVector.z))||(a=-(c*b.x+d*b.y+e*b.z+f),b=this._skyboxTempVector,b.x=0<=c?1:-1,b.y=0<=d?1:-1,b.z=1,b.w=1,this._tempSkyboxMatrix.copyFrom(this._skyboxProjection),
this._tempSkyboxMatrix.invert(),f=db.transformVector(this._tempSkyboxMatrix,b,db.CALCULATION_VECTOR3D),this._skyboxProjection.copyRowTo(3,b),b=(f.x*b.x+f.y*b.y+f.z*b.z+f.w*b.w)/(c*f.x+d*f.y+e*f.z+a*f.w),this._skyboxTempVector.x=c*b,this._skyboxTempVector.y=d*b,this._skyboxTempVector.z=e*b,this._skyboxTempVector.w=a*b,this._skyboxProjection.copyRowFrom(2,this._skyboxTempVector))},drawRenderables:function(a,b,c){for(var d,e,f=b.get_camera(),k;null!=a;){this._activeMaterial=a.renderable.get_material();
this._activeMaterial.updateMaterial(this._context);d=this._activeMaterial.get_numPasses();for(e=0;;){k=a;if(0!=((this._activeMaterial.passRendersToTexture(e)?1:2)&c)){for(this._activeMaterial.activatePass(e,this._stage3DProxy,f);this._activeMaterial.renderPass(e,k.renderable,this._stage3DProxy,b,this._rttViewProjectionMatrix),k=k.next,null!=k&&k.renderable.get_material()==this._activeMaterial;);this._activeMaterial.deactivatePass(e,this._stage3DProxy)}else for(;k=k.next,null!=k&&k.renderable.get_material()==
this._activeMaterial;);if(!(++e<d))break}a=k}},__class__:ae});var Xe=function(a,b){null==b&&(b=!1);null==a&&(a=!1);te.call(this);this._renderBlended=a;this._distanceBased=b;this._backgroundB=this._backgroundG=this._backgroundR=1};g["away3d.core.render.DepthRenderer"]=Xe;Xe.__name__="away3d.core.render.DepthRenderer";Xe.__super__=te;Xe.prototype=v(te.prototype,{_activeMaterial:null,_renderBlended:null,_distanceBased:null,_disableColor:null,set_disableColor:function(a){return this._disableColor=a},
set_backgroundR:function(a){return a},set_backgroundG:function(a){return a},set_backgroundB:function(a){return a},draw:function(a,b){this._context.setBlendFactors(2,9);this._context.setDepthTest(!0,4);this.drawRenderables(a.get_opaqueRenderableHead(),a);this._disableColor&&this._context.setColorMask(!1,!1,!1,!1);this._renderBlended&&this.drawRenderables(a.get_blendedRenderableHead(),a);null!=this._activeMaterial&&this._activeMaterial.deactivateForDepth(this._stage3DProxy);this._disableColor&&this._context.setColorMask(!0,
!0,!0,!0);this._activeMaterial=null},drawRenderables:function(a,b){for(b=b.get_camera();null!=a;)if(this._activeMaterial=a.renderable.get_material(),this._disableColor&&this._activeMaterial.hasDepthAlphaThreshold())for(;a=a.next,null!=a&&a.renderable.get_material()==this._activeMaterial;);else{for(this._activeMaterial.activateForDepth(this._stage3DProxy,b,this._distanceBased);this._activeMaterial.renderDepth(a.renderable,this._stage3DProxy,b,this._rttViewProjectionMatrix),a=a.next,null!=a&&a.renderable.get_material()==
this._activeMaterial;);this._activeMaterial.deactivateForDepth(this._stage3DProxy)}},__class__:Xe});var Nl=function(a){this._filterSizesInvalid=!0;this._stage3DProxy=a;this._stage3DProxy.addEventListener("Context3DRecreated",u(this,this.onContext3DRecreated));this._rttManager=Wd.getInstance(a);this._rttManager.addEventListener("resize",u(this,this.onRTTResize))};g["away3d.core.render.Filter3DRenderer"]=Nl;Nl.__name__="away3d.core.render.Filter3DRenderer";Nl.prototype={_filters:null,_tasks:null,_filterTasksInvalid:null,
_mainInputTexture:null,_rttManager:null,_stage3DProxy:null,_filterSizesInvalid:null,onContext3DRecreated:function(a){this._filterSizesInvalid=!0},onRTTResize:function(a){this._filterSizesInvalid=!0},getMainInputTexture:function(a){this._filterTasksInvalid&&this.updateFilterTasks(a);return this._mainInputTexture},updateFilterTasks:function(a){this._filterSizesInvalid&&this.updateFilterSizes();if(null==this._filters)this._tasks=null;else{this._tasks=M.toObjectVector(null);for(var b=this._filters.length-
1,c,d=0,e=b+1;d<e;){var f=d++;c=this._filters[f];c.setRenderTargets(f==b?null:this._filters[f+1].getMainInputTexture(a),a);this._tasks=this._tasks.concat(c.get_tasks())}this._mainInputTexture=this._filters[0].getMainInputTexture(a)}},render:function(a,b,c){var d=a.get_context3D(),e=this._rttManager.get_indexBuffer(),f=this._rttManager.get_renderToTextureVertexBuffer();if(null!=this._filters){this._filterSizesInvalid&&this.updateFilterSizes();this._filterTasksInvalid&&this.updateFilterTasks(a);for(var k=
this._filters.length,m=0;m<k;){var h=m++;this._filters[h].update(a,b)}k=this._tasks.get_length();1<k&&(d.setVertexBufferAt(0,f,0,2),d.setVertexBufferAt(1,f,2,2));for(m=0;m<k;)f=m++,h=this._tasks.get(f),a.setRenderTarget(h.get_target()),null==h.get_target()&&(a.set_scissorRect(null),f=this._rttManager.get_renderToScreenVertexBuffer(),d.setVertexBufferAt(0,f,0,2),d.setVertexBufferAt(1,f,2,2)),d.setTextureAt(0,h.getMainInputTexture(a)),d.setProgram(h.getProgram3D(a)),d.clear(0,0,0,0),h.activate(a,b,
c),d.setBlendFactors(2,9),a.drawTriangles(e,0,2),h.deactivate(a);d.setTextureAt(0,null);d.setVertexBufferAt(0,null);d.setVertexBufferAt(1,null)}},updateFilterSizes:function(){for(var a=0,b=this._filters.length;a<b;){var c=a++;this._filters[c].set_textureWidth(this._rttManager.get_textureWidth());this._filters[c].set_textureHeight(this._rttManager.get_textureHeight())}this._filterSizesInvalid=!0},__class__:Nl};var Rg=function(){};g["away3d.core.sort.IEntitySorter"]=Rg;Rg.__name__="away3d.core.sort.IEntitySorter";
Rg.__isInterface__=!0;Rg.prototype={sort:null,__class__:Rg};var Qg=function(){};g["away3d.core.sort.RenderableMergeSort"]=Qg;Qg.__name__="away3d.core.sort.RenderableMergeSort";Qg.__interfaces__=[Rg];Qg.prototype={sort:function(a){a.set_opaqueRenderableHead(this.mergeSortByMaterial(a.get_opaqueRenderableHead()));a.set_blendedRenderableHead(this.mergeSortByDepth(a.get_blendedRenderableHead()))},mergeSortByDepth:function(a){if(null==a||null==a.next)return a;for(var b=a,c=a.next;null!=c;)c=c.next,null!=
c&&(b=b.next,c=c.next);c=b.next;b.next=null;a=this.mergeSortByDepth(a);c=this.mergeSortByDepth(c);var d=b=null;if(null==a)return c;if(null==c)return a;for(;null!=a&&null!=c;){if(a.zIndex<c.zIndex){var e=a;a=a.next}else e=c,c=c.next;null==b?b=e:d.next=e;d=e}null!=a?d.next=a:null!=c&&(d.next=c);return b},mergeSortByMaterial:function(a){if(null==a||null==a.next)return a;for(var b=a,c=a.next;null!=c;)c=c.next,null!=c&&(b=b.next,c=c.next);c=b.next;b.next=null;a=this.mergeSortByMaterial(a);c=this.mergeSortByMaterial(c);
var d=b=null;if(null==a)return c;if(null==c)return a;for(;null!=a&&null!=c&&null!=a&&null!=c;){var e=a.renderOrderId;var f=c.renderOrderId;e==f?(e=a.materialId,f=c.materialId,e=e==f?a.zIndex<c.zIndex?1:-1:e>f?1:-1):e=e>f?1:-1;0>e?(e=a,a=a.next):(e=c,c=c.next);null==b?b=e:d.next=e;d=e}null!=a?d.next=a:null!=c&&(d.next=c);return b},__class__:Qg};var gf=function(){};g["away3d.core.traverse.PartitionTraverser"]=gf;gf.__name__="away3d.core.traverse.PartitionTraverser";gf.prototype={scene:null,_entryPoint:null,
enterNode:function(a){return!0},applyRenderable:function(a){throw new W(new tb);},applyUnknownLight:function(a){throw new W(new tb);},applyDirectionalLight:function(a){throw new W(new tb);},applyPointLight:function(a){throw new W(new tb);},applyLightProbe:function(a){throw new W(new tb);},applyEntity:function(a){throw new W(new tb);},__class__:gf};var Jf=function(){this.init()};g["away3d.core.traverse.EntityCollector"]=Jf;Jf.__name__="away3d.core.traverse.EntityCollector";Jf.__super__=gf;Jf.prototype=
v(gf.prototype,{_skyBox:null,_opaqueRenderableHead:null,_blendedRenderableHead:null,_entityHead:null,_renderableListItemPool:null,_entityListItemPool:null,_lights:null,_directionalLights:null,_pointLights:null,_lightProbes:null,_numEntities:null,_numLights:null,_numTriangles:null,_numMouseEnableds:null,_camera:null,_numDirectionalLights:null,_numPointLights:null,_numLightProbes:null,_cameraForward:null,_customCullPlanes:null,_cullPlanes:null,_numCullPlanes:null,init:function(){this._lights=M.toObjectVector(null);
this._directionalLights=M.toObjectVector(null);this._pointLights=M.toObjectVector(null);this._lightProbes=M.toObjectVector(null);this._renderableListItemPool=new Zh;this._entityListItemPool=new Xh;this._numCullPlanes=this._numLightProbes=this._numPointLights=this._numDirectionalLights=this._numMouseEnableds=this._numTriangles=this._numLights=this._numEntities=0},get_camera:function(){return this._camera},set_camera:function(a){this._camera=a;this._entryPoint=this._camera.get_scenePosition();this._cameraForward=
db.getForward(this._camera.get_transform(),this._cameraForward);this._cullPlanes=this._camera.get_frustumPlanes();return a},set_cullPlanes:function(a){return this._customCullPlanes=a},get_numMouseEnableds:function(){return this._numMouseEnableds},get_skyBox:function(){return this._skyBox},get_opaqueRenderableHead:function(){return this._opaqueRenderableHead},set_opaqueRenderableHead:function(a){return this._opaqueRenderableHead=a},get_blendedRenderableHead:function(){return this._blendedRenderableHead},
set_blendedRenderableHead:function(a){return this._blendedRenderableHead=a},get_entityHead:function(){return this._entityHead},get_directionalLights:function(){return this._directionalLights},get_pointLights:function(){return this._pointLights},clear:function(){null!=this._camera&&(this._entryPoint=this._camera.get_scenePosition(),this._cameraForward=db.getForward(this._camera.get_transform(),this._cameraForward));this._cullPlanes=null!=this._customCullPlanes?this._customCullPlanes:null!=this._camera?
this._camera.get_frustumPlanes():null;this._numCullPlanes=null!=this._cullPlanes?this._cullPlanes.get_length():0;this._numTriangles=this._numMouseEnableds=0;this._entityHead=this._opaqueRenderableHead=this._blendedRenderableHead=null;this._renderableListItemPool.freeAll();this._entityListItemPool.freeAll();this._skyBox=null;0<this._numLights&&this._lights.set_length(this._numLights=0);0<this._numDirectionalLights&&this._directionalLights.set_length(this._numDirectionalLights=0);0<this._numPointLights&&
this._pointLights.set_length(this._numPointLights=0);0<this._numLightProbes&&this._lightProbes.set_length(this._numLightProbes=0)},enterNode:function(a){var b=gf._collectionMark!=a._collectionMark&&a.isInFrustum(this._cullPlanes,this._numCullPlanes);a._collectionMark=gf._collectionMark;return b},applyRenderable:function(a){var b=a.get_sourceEntity();a.get_mouseEnabled()&&++this._numMouseEnableds;this._numTriangles+=a.get_numTriangles();var c=a.get_material();if(null!=c){var d=this._renderableListItemPool.getItem();
d.renderable=a;d.materialId=c._uniqueId;d.renderOrderId=c._renderOrderId;d.cascaded=!1;var e=b.get_scenePosition();d.zIndex=(this._entryPoint.x-e.x)*this._cameraForward.x+(this._entryPoint.y-e.y)*this._cameraForward.y+(this._entryPoint.z-e.z)*this._cameraForward.z+b.get_zOffset();d.renderSceneTransform=a.getRenderSceneTransform(this._camera);c.get_requiresBlending()?(d.next=this._blendedRenderableHead,this._blendedRenderableHead=d):(d.next=this._opaqueRenderableHead,this._opaqueRenderableHead=d)}},
applyEntity:function(a){++this._numEntities;var b=this._entityListItemPool.getItem();b.entity=a;b.next=this._entityHead;this._entityHead=b},applyUnknownLight:function(a){this._lights.set(this._numLights++,a)},applyDirectionalLight:function(a){this._lights.set(this._numLights++,a);this._directionalLights.set(this._numDirectionalLights++,a)},applyPointLight:function(a){this._lights.set(this._numLights++,a);this._pointLights.set(this._numPointLights++,a)},applyLightProbe:function(a){this._lights.set(this._numLights++,
a);this._lightProbes.set(this._numLightProbes++,a)},cleanUp:function(){},__class__:Jf});var Sg=function(){this.init()};g["away3d.core.traverse.ShadowCasterCollector"]=Sg;Sg.__name__="away3d.core.traverse.ShadowCasterCollector";Sg.__super__=Jf;Sg.prototype=v(Jf.prototype,{applyRenderable:function(a){var b=a.get_material(),c=a.get_sourceEntity();if(a.get_castsShadows()&&null!=b){var d=this._renderableListItemPool.getItem();d.renderable=a;d.next=this._opaqueRenderableHead;d.cascaded=!1;c=c.get_scenePosition();
d.zIndex=(this._entryPoint.x-c.x)*this._cameraForward.x+(this._entryPoint.y-c.y)*this._cameraForward.y+(this._entryPoint.z-c.z)*this._cameraForward.z;d.renderSceneTransform=a.getRenderSceneTransform(this._camera);d.renderOrderId=b._depthPassId;this._opaqueRenderableHead=d}},applyUnknownLight:function(a){},applyDirectionalLight:function(a){},applyPointLight:function(a){},applyLightProbe:function(a){},__class__:Sg});var Me=function(){};g["away3d.debug.Debug"]=Me;Me.__name__="away3d.debug.Debug";var $d=
function(a,b){this._castsShadows=!0;Ha.call(this);this._subMeshes=M.toObjectVector(null);this.set_geometry(null!=a?a:new Le);this.set_material(null!=b?b:Fa.getDefaultMaterial(this))};g["away3d.entities.Mesh"]=$d;$d.__name__="away3d.entities.Mesh";$d.__interfaces__=[zb,Ng];$d.__super__=Ha;$d.prototype=v(Ha.prototype,{_subMeshes:null,_geometry:null,_material:null,_animator:null,_castsShadows:null,onGeometryBoundsInvalid:function(a){this.invalidateBounds()},get_castsShadows:function(){return this._castsShadows},
get_animator:function(){return this._animator},get_geometry:function(){return this._geometry},set_geometry:function(a){if(null!=this._geometry){this._geometry.removeEventListener("BoundsInvalid",u(this,this.onGeometryBoundsInvalid));this._geometry.removeEventListener("SubGeometryAdded",u(this,this.onSubGeometryAdded));this._geometry.removeEventListener("SubGeometryRemoved",u(this,this.onSubGeometryRemoved));for(var b=0,c=this._subMeshes.get_length();b<c;){var d=b++;this._subMeshes.get(d).dispose()}this._subMeshes.set_length(0)}this._geometry=
a;if(null!=this._geometry)for(this._geometry.addEventListener("BoundsInvalid",u(this,this.onGeometryBoundsInvalid)),this._geometry.addEventListener("SubGeometryAdded",u(this,this.onSubGeometryAdded)),this._geometry.addEventListener("SubGeometryRemoved",u(this,this.onSubGeometryRemoved)),b=this._geometry.get_subGeometries(),c=0,d=b.get_length();c<d;){var e=c++;this.addSubMesh(b.get(e))}null!=this._material&&(this._material.removeOwner(this),this._material.addOwner(this));return a},get_material:function(){return this._material},
set_material:function(a){if(a==this._material)return a;null!=this._material&&this._material.removeOwner(this);this._material=a;null!=this._material&&this._material.addOwner(this);return a},get_subMeshes:function(){this._geometry.validate();return this._subMeshes},dispose:function(){Ha.prototype.dispose.call(this);this.set_material(null);this.set_geometry(null)},updateBounds:function(){this._bounds.fromGeometry(this._geometry);this._boundsInvalid=!1},createEntityPartitionNode:function(){return new di(this)},
onSubGeometryAdded:function(a){this.addSubMesh(a.get_subGeometry())},onSubGeometryRemoved:function(a){for(var b=a.get_subGeometry(),c=this._subMeshes.get_length(),d=0;d<c;){a=this._subMeshes.get(d);if(a.get_subGeometry()==b){a.dispose();this._subMeshes.splice(d,1);break}++d}for(--c;d<c;)this._subMeshes.get(d)._index=d,++d},addSubMesh:function(a){a=new Vh(a,this,null);var b=this._subMeshes.get_length();a._index=b;this._subMeshes.set(b,a);this.invalidateBounds()},collidesBefore:function(a,b){this._pickingCollider.setLocalRay(this._pickingCollisionVO.localRayPosition,
this._pickingCollisionVO.localRayDirection);this._pickingCollisionVO.renderable=null;for(var c=0,d=this._subMeshes.get_length();c<d;){var e=c++;e=this._subMeshes.get(e);if(this._pickingCollider.testSubMeshCollision(e,this._pickingCollisionVO,a)&&(a=this._pickingCollisionVO.rayEntryDistance,this._pickingCollisionVO.renderable=e,!b))return!0}return null!=this._pickingCollisionVO.renderable},__class__:$d});var Oc=function(){this._subSetCount=this._numIndices=this._indexSegments=0;Ha.call(this);this._subSetCount=
0;this._subSets=M.toObjectVector(null);this.addSubSet();this._segments=new Zb;this.set_material(new Tg)};g["away3d.entities.SegmentSet"]=Oc;Oc.__name__="away3d.entities.SegmentSet";Oc.__interfaces__=[mg];Oc.__super__=Ha;Oc.prototype=v(Ha.prototype,{_activeSubSet:null,_subSets:null,_subSetCount:null,_numIndices:null,_material:null,_animator:null,_hasData:null,_segments:null,_indexSegments:null,addSegment:function(a){a.set_segmentsBase(this);this._hasData=!0;var b=this._subSets.get_length()-1,c=this._subSets.get(b);
c.vertices.get_length()+44>Oc.LIMIT&&(c=this.addSubSet(),++b);a.set_index(c.vertices.get_length());a.set_subSetIndex(b);this.updateSegment(a);var d=c.lineCount<<2;c.indices.push(d);c.indices.push(d+1);c.indices.push(d+2);c.indices.push(d+3);c.indices.push(d+2);c.indices.push(d+1);c.numVertices=c.vertices.get_length()/11|0;c.numIndices=c.indices.get_length();c.lineCount++;c.indexBufferDirty=!0;c=new $k;c.index=d;c.subSetIndex=b;c.segment=a;this._segments.h[this._indexSegments]=c;this._indexSegments++},
removeAllSegments:function(){for(var a,b=0,c=this._subSetCount;b<c;)a=b++,a=this._subSets.get(a),a.vertices=null,a.indices=null,null!=a.vertexBuffer&&eb.disposeVertexBuffer(a.vertexBuffer),null!=a.indexBuffer&&eb.disposeIndexBuffer(a.indexBuffer);for(b=this._segments.iterator();b.hasNext();)b.next();this._segments=null;this._subSetCount=0;this._activeSubSet=null;this._indexSegments=0;this._subSets=M.toObjectVector(null);this._segments=new Zb;this.addSubSet();this._hasData=!1},getSegment:function(a){return a>
this._indexSegments-1?null:this._segments.h[a].segment},get_subSetCount:function(){return this._subSetCount},updateSegment:function(a){var b=a._start,c=a._end,d=b.x,e=b.y;b=b.z;var f=c.x,k=c.y;c=c.z;var m=a._startR,h=a._startG,n=a._startB,K=a._endR,l=a._endG,g=a._endB,p=a.get_index(),H=a.get_thickness();a=this._subSets.get(a.get_subSetIndex());var C=a.vertices;C.set(p++,d);C.set(p++,e);C.set(p++,b);C.set(p++,f);C.set(p++,k);C.set(p++,c);C.set(p++,H);C.set(p++,m);C.set(p++,h);C.set(p++,n);C.set(p++,
1);C.set(p++,f);C.set(p++,k);C.set(p++,c);C.set(p++,d);C.set(p++,e);C.set(p++,b);C.set(p++,-H);C.set(p++,K);C.set(p++,l);C.set(p++,g);C.set(p++,1);C.set(p++,d);C.set(p++,e);C.set(p++,b);C.set(p++,f);C.set(p++,k);C.set(p++,c);C.set(p++,-H);C.set(p++,m);C.set(p++,h);C.set(p++,n);C.set(p++,1);C.set(p++,f);C.set(p++,k);C.set(p++,c);C.set(p++,d);C.set(p++,e);C.set(p++,b);C.set(p++,H);C.set(p++,K);C.set(p++,l);C.set(p++,g);C.set(p++,1);a.vertexBufferDirty=!0;this.invalidateBounds()},get_hasData:function(){return this._hasData},
getIndexBuffer:function(a){if(this._activeSubSet.indexContext3D!=a.get_context3D()||this._activeSubSet.indexBufferDirty)this._activeSubSet.indexBuffer=a.createIndexBuffer(this._activeSubSet.numIndices),this._activeSubSet.indexBuffer.uploadFromVector(this._activeSubSet.indices,0,this._activeSubSet.numIndices),this._activeSubSet.indexBufferDirty=!1,this._activeSubSet.indexContext3D=a.get_context3D();return this._activeSubSet.indexBuffer},activateVertexBuffer:function(a,b){this._activeSubSet=a=this._subSets.get(a);
this._numIndices=a.numIndices;if(a.vertexContext3D!=b.get_context3D()||a.vertexBufferDirty)null!=a.vertexBuffer&&eb.disposeVertexBuffer(a.vertexBuffer),a.vertexBuffer=b.createVertexBuffer(a.numVertices,11),a.vertexBuffer.uploadFromVector(a.vertices,0,a.numVertices),a.vertexBufferDirty=!1,a.vertexContext3D=b.get_context3D();a=a.vertexBuffer;b=b._context3D;b.setVertexBufferAt(0,a,0,3);b.setVertexBufferAt(1,a,3,3);b.setVertexBufferAt(2,a,6,1);b.setVertexBufferAt(3,a,7,4)},activateUVBuffer:function(a,
b){},activateVertexNormalBuffer:function(a,b){},activateVertexTangentBuffer:function(a,b){},activateSecondaryUVBuffer:function(a,b){},addSubSet:function(){var a=new al;this._subSets.push(a);a.vertices=M.toFloatVector(null);a.numVertices=0;a.indices=M.toIntVector(null);a.numIndices=0;a.vertexBufferDirty=!0;a.indexBufferDirty=!0;a.lineCount=0;this._subSetCount++;return a},dispose:function(){Ha.prototype.dispose.call(this);this.removeAllSegments();this._material=this._segments=null;var a=this._subSets.get(0);
a.vertices=null;this._subSets=a.indices=null},get_mouseEnabled:function(){return!1},getDefaultBoundingVolume:function(){return new Pa},updateBounds:function(){for(var a,b,c,d=Infinity,e=Infinity,f=Infinity,k=-Infinity,m=-Infinity,h=-Infinity,n,K=0;K<this._subSetCount;){a=this._subSets.get(K);c=0;n=a.vertices;a=n.get_length();if(0!=a)for(;c<a;)b=n.get(c++),b<d?d=b:b>k&&(k=b),b=n.get(c++),b<e?e=b:b>m&&(m=b),b=n.get(c++),b<f?f=b:b>h&&(h=b),c+=8;++K}Infinity!=d?this._bounds.fromExtremes(d,e,f,k,m,h):
this._bounds.fromExtremes(-.5,-.5,-.5,.5,.5,.5);this._boundsInvalid=!1},createEntityPartitionNode:function(){return new Og(this)},get_numTriangles:function(){return this._numIndices/3|0},get_sourceEntity:function(){return this},get_castsShadows:function(){return!1},get_material:function(){return this._material},get_animator:function(){return this._animator},set_material:function(a){if(a==this._material)return a;null!=this._material&&this._material.removeOwner(this);this._material=a;null!=this._material&&
this._material.addOwner(this);return a},get_uvTransform:function(){return null},get_uvTransform2:function(){return null},getRenderSceneTransform:function(a){return this._sceneTransform},__class__:Oc});var $k=function(){};g["away3d.entities.SegRef"]=$k;$k.__name__="away3d.entities.SegRef";$k.prototype={index:null,subSetIndex:null,segment:null,__class__:$k};var al=function(){};g["away3d.entities.SubSet"]=al;al.__name__="away3d.entities.SubSet";al.prototype={vertices:null,numVertices:null,indices:null,
numIndices:null,vertexBufferDirty:null,indexBufferDirty:null,vertexContext3D:null,indexContext3D:null,vertexBuffer:null,indexBuffer:null,lineCount:null,__class__:al};var cb=function(a,b){null==b&&(b=0);null==a&&(a="");this.message=a;this.errorID=b;this.name="Error"};g["openfl.errors.Error"]=cb;cb.__name__="openfl.errors.Error";cb.prototype={errorID:null,message:null,name:null,toString:function(){return null!=this.message?this.message:"Error"},__class__:cb};var tb=function(a,b){null==b&&(b=0);null==
a&&(a="An abstract method was called! Either an instance of an abstract class was created, or an abstract method was not overridden by the subclass.");cb.call(this,a,b)};g["away3d.errors.AbstractMethodError"]=tb;tb.__name__="away3d.errors.AbstractMethodError";tb.__super__=cb;tb.prototype=v(cb.prototype,{__class__:tb});var Kf=function(a){cb.call(this,a)};g["away3d.errors.CastError"]=Kf;Kf.__name__="away3d.errors.CastError";Kf.__super__=cb;Kf.prototype=v(cb.prototype,{__class__:Kf});var Jg=function(a,
b,c){R.call(this,a);this._asset=b;this._prevName=null!=c?c:null!=this._asset?this._asset.get_name():null};g["away3d.events.Asset3DEvent"]=Jg;Jg.__name__="away3d.events.Asset3DEvent";Jg.__super__=R;Jg.prototype=v(R.prototype,{_asset:null,_prevName:null,__class__:Jg});var uj=function(a,b){R.call(this,a,!1,!1);this._subGeometry=b};g["away3d.events.GeometryEvent"]=uj;uj.__name__="away3d.events.GeometryEvent";uj.__super__=R;uj.prototype=v(R.prototype,{_subGeometry:null,get_subGeometry:function(){return this._subGeometry},
__class__:uj});var Mg=function(a,b,c,d){null==d&&(d=!1);null==c&&(c=!1);R.call(this,a,c,d);this._lens=b};g["away3d.events.LensEvent"]=Mg;Mg.__name__="away3d.events.LensEvent";Mg.__super__=R;Mg.prototype=v(R.prototype,{_lens:null,__class__:Mg});var vj=function(a){R.call(this,a)};g["away3d.events.LightEvent"]=vj;vj.__name__="away3d.events.LightEvent";vj.__super__=R;vj.prototype=v(R.prototype,{__class__:vj});var jg=function(a,b){R.call(this,a);this.object=b};g["away3d.events.Object3DEvent"]=jg;jg.__name__=
"away3d.events.Object3DEvent";jg.__super__=R;jg.prototype=v(R.prototype,{object:null,__class__:jg});var Kg=function(a,b){this.objectContainer3D=b;R.call(this,a)};g["away3d.events.Scene3DEvent"]=Kg;Kg.__name__="away3d.events.Scene3DEvent";Kg.__super__=R;Kg.prototype=v(R.prototype,{objectContainer3D:null,__class__:Kg});var gi=function(a,b,c){null==c&&(c=!1);null==b&&(b=!1);R.call(this,a,b,c)};g["away3d.events.ShadingMethodEvent"]=gi;gi.__name__="away3d.events.ShadingMethodEvent";gi.__super__=R;gi.prototype=
v(R.prototype,{__class__:gi});var Hf=function(a,b,c){null==c&&(c=!1);null==b&&(b=!1);R.call(this,a,b,c)};g["away3d.events.Stage3DEvent"]=Hf;Hf.__name__="away3d.events.Stage3DEvent";Hf.__super__=R;Hf.prototype=v(R.prototype,{__class__:Hf});var $h=function(a){R.call(this,a,!0,!0)};g["away3d.events.TouchEvent3D"]=$h;$h.__name__="away3d.events.TouchEvent3D";$h.__super__=R;$h.prototype=v(R.prototype,{screenX:null,screenY:null,object:null,renderable:null,uv:null,index:null,subGeometryIndex:null,localPosition:null,
localNormal:null,ctrlKey:null,altKey:null,shiftKey:null,touchPointID:null,__class__:$h});var Ol=function(){this._tasks=M.toObjectVector(null)};g["away3d.filters.Filter3DBase"]=Ol;Ol.__name__="away3d.filters.Filter3DBase";Ol.prototype={_tasks:null,_textureWidth:null,_textureHeight:null,get_tasks:function(){return this._tasks},getMainInputTexture:function(a){return this._tasks.get(0).getMainInputTexture(a)},set_textureWidth:function(a){this._textureWidth=a;for(var b=0,c=this._tasks.get_length();b<c;){var d=
b++;this._tasks.get(d).set_textureWidth(a)}return a},set_textureHeight:function(a){this._textureHeight=a;for(var b=0,c=this._tasks.get_length();b<c;){var d=b++;this._tasks.get(d).set_textureHeight(a)}return a},setRenderTargets:function(a,b){this._tasks.get(this._tasks.get_length()-1).set_target(a)},update:function(a,b){},__class__:Ol};var Pl=function(a){null==a&&(a=!1);this._textureScale=0;this._textureDimensionsInvalid=this._program3DInvalid=!0;this._scaledTextureWidth=this._scaledTextureHeight=
this._textureWidth=this._textureHeight=-1;this._requireDepthRender=a};g["away3d.filters.tasks.Filter3DTaskBase"]=Pl;Pl.__name__="away3d.filters.tasks.Filter3DTaskBase";Pl.prototype={_mainInputTexture:null,_mainInputTextureContext:null,_scaledTextureWidth:null,_scaledTextureHeight:null,_textureWidth:null,_textureHeight:null,_textureDimensionsInvalid:null,_program3DInvalid:null,_program3D:null,_program3DContext:null,_target:null,_requireDepthRender:null,_textureScale:null,get_target:function(){return this._target},
set_target:function(a){return this._target=a},set_textureWidth:function(a){if(this._textureWidth==a)return a;this._textureWidth=a;this._scaledTextureWidth=this._textureWidth>>this._textureScale;1>this._scaledTextureWidth&&(this._scaledTextureWidth=1);this._textureDimensionsInvalid=!0;return a},set_textureHeight:function(a){if(this._textureHeight==a)return a;this._textureHeight=a;this._scaledTextureHeight=this._textureHeight>>this._textureScale;1>this._scaledTextureHeight&&(this._scaledTextureHeight=
1);this._textureDimensionsInvalid=!0;return a},getMainInputTexture:function(a){a.get_context3D()!=this._mainInputTextureContext&&(this._textureDimensionsInvalid=!0);this._textureDimensionsInvalid&&this.updateTextures(a);return this._mainInputTexture},updateProgram3D:function(a){null!=this._program3D&&this._program3D.dispose();this._program3DContext=a.get_context3D();this._program3D=this._program3DContext.createProgram();this._program3D.upload((new na(Me.active)).assemble(Ye.toString(1),this.getVertexCode()),
(new na(Me.active)).assemble(Ye.toString(0),this.getFragmentCode()));this._program3DInvalid=!1},getVertexCode:function(){return"mov op, va0\nmov v0, va1\n"},getFragmentCode:function(){throw new W(new tb);},updateTextures:function(a){null!=this._mainInputTexture&&this._mainInputTexture.dispose();this._mainInputTextureContext=a.get_context3D();this._mainInputTexture=this._mainInputTextureContext.createTexture(this._scaledTextureWidth,this._scaledTextureHeight,1,!0);this._textureDimensionsInvalid=!1},
getProgram3D:function(a){this._program3DContext!=a.get_context3D()&&(this._program3DInvalid=!0);this._program3DInvalid&&this.updateProgram3D(a);return this._program3D},activate:function(a,b,c){},deactivate:function(a){},__class__:Pl};var Lc=function(){this._specularR=this._specularG=this._specularB=this._diffuseR=this._diffuseG=this._diffuseB=1;this._ambientR=this._ambientG=this._ambientB=0;Ha.call(this)};g["away3d.lights.LightBase"]=Lc;Lc.__name__="away3d.lights.LightBase";Lc.__super__=Ha;Lc.prototype=
v(Ha.prototype,{_ambientR:null,_ambientG:null,_ambientB:null,_specularR:null,_specularG:null,_specularB:null,_diffuseR:null,_diffuseG:null,_diffuseB:null,_castsShadows:null,_shadowMapper:null,get_castsShadows:function(){return this._castsShadows},set_castsShadows:function(a){if(this._castsShadows==a)return a;(this._castsShadows=a)?(null==this._shadowMapper&&(this._shadowMapper=this.createShadowMapper()),this._shadowMapper.set_light(this)):(null!=this._shadowMapper&&this._shadowMapper.dispose(),this._shadowMapper=
null);this.dispatchEvent(new vj("castsShadowChange"));return a},createShadowMapper:function(){throw new W(new tb);},createEntityPartitionNode:function(){return new bi(this)},get_shadowMapper:function(){return this._shadowMapper},__class__:Lc});var Ug=function(a,b,c){null==c&&(c=1);null==b&&(b=-1);null==a&&(a=0);Lc.call(this);this.set_direction(new hb(a,b,c));this._sceneDirection=new hb};g["away3d.lights.DirectionalLight"]=Ug;Ug.__name__="away3d.lights.DirectionalLight";Ug.__super__=Lc;Ug.prototype=
v(Lc.prototype,{_direction:null,_tmpLookAt:null,_sceneDirection:null,createEntityPartitionNode:function(){return new ai(this)},get_sceneDirection:function(){this._sceneTransformDirty&&this.updateSceneTransform();return this._sceneDirection},set_direction:function(a){this._direction=a;null==this._tmpLookAt&&(this._tmpLookAt=new hb);var b=this.get_x();this._tmpLookAt.x=b+this._direction.x;b=this.get_y();this._tmpLookAt.y=b+this._direction.y;b=this.get_z();this._tmpLookAt.z=b+this._direction.z;this.lookAt(this._tmpLookAt);
return a},getDefaultBoundingVolume:function(){return new Fb},updateBounds:function(){},updateSceneTransform:function(){Lc.prototype.updateSceneTransform.call(this);this.get_sceneTransform().copyColumnTo(2,this._sceneDirection);this._sceneDirection.normalize()},createShadowMapper:function(){return new wj},__class__:Ug});var bl=function(a,b){Lc.call(this);this._diffuseMap=a;this._specularMap=b};g["away3d.lights.LightProbe"]=bl;bl.__name__="away3d.lights.LightProbe";bl.__super__=Lc;bl.prototype=v(Lc.prototype,
{_diffuseMap:null,_specularMap:null,createEntityPartitionNode:function(){return new ci(this)},get_diffuseMap:function(){return this._diffuseMap},get_specularMap:function(){return this._specularMap},updateBounds:function(){this._boundsInvalid=!1},getDefaultBoundingVolume:function(){return new Fb},__class__:bl});var xj=function(){this._fallOff=1E5;this._radius=9E4;Lc.call(this);this._fallOffFactor=1/(this._fallOff*this._fallOff-this._radius*this._radius)};g["away3d.lights.PointLight"]=xj;xj.__name__=
"away3d.lights.PointLight";xj.__super__=Lc;xj.prototype=v(Lc.prototype,{_radius:null,_fallOff:null,_fallOffFactor:null,createShadowMapper:function(){return new sk},createEntityPartitionNode:function(){return new fi(this)},updateBounds:function(){this._bounds.fromSphere(new hb,this._fallOff);this._boundsInvalid=!1},getDefaultBoundingVolume:function(){return new Pa},__class__:xj});var hf=function(){this._autoUpdateShadows=!0;this._depthMapSize=2048;this._casterCollector=this.createCasterCollector()};
g["away3d.lights.shadowmaps.ShadowMapperBase"]=hf;hf.__name__="away3d.lights.shadowmaps.ShadowMapperBase";hf.prototype={_casterCollector:null,_depthMap:null,_depthMapSize:null,_light:null,_explicitDepthMap:null,_autoUpdateShadows:null,_shadowsInvalid:null,createCasterCollector:function(){return new Sg},get_autoUpdateShadows:function(){return this._autoUpdateShadows},set_light:function(a){return this._light=a},dispose:function(){this._casterCollector=null;null==this._depthMap||this._explicitDepthMap||
this._depthMap.dispose();this._depthMap=null},createDepthTexture:function(){return new tk(this._depthMapSize,this._depthMapSize)},renderDepthMap:function(a,b,c){this._shadowsInvalid=!1;this.updateDepthProjection(b.get_camera());null==this._depthMap&&(this._depthMap=this.createDepthTexture());this.drawDepthMap(this._depthMap.getTextureForStage3D(a),b.scene,c)},updateDepthProjection:function(a){throw new W(new tb);},drawDepthMap:function(a,b,c){throw new W(new tb);},__class__:hf};var sk=function(){hf.call(this);
this._depthMapSize=512;this._needsRender=M.toBoolVector(null,6,!0);this.initCameras()};g["away3d.lights.shadowmaps.CubeMapShadowMapper"]=sk;sk.__name__="away3d.lights.shadowmaps.CubeMapShadowMapper";sk.__super__=hf;sk.prototype=v(hf.prototype,{_depthCameras:null,_lenses:null,_needsRender:null,initCameras:function(){this._depthCameras=M.toObjectVector(null);this._lenses=M.toObjectVector(null);this.addCamera(0,90,0);this.addCamera(0,-90,0);this.addCamera(-90,0,0);this.addCamera(90,0,0);this.addCamera(0,
0,0);this.addCamera(0,180,0)},addCamera:function(a,b,c){var d=new je;d.set_rotationX(a);d.set_rotationY(b);d.set_rotationZ(c);d.get_lens().set_near(.01);Ka.__cast(d.get_lens(),Je).set_fieldOfView(90);this._lenses.push(Ka.__cast(d.get_lens(),Je));d.get_lens().set_aspectRatio(1);this._depthCameras.push(d)},createDepthTexture:function(){return new uk(this._depthMapSize)},updateDepthProjection:function(a){a=Ka.__cast(this._light,xj)._fallOff;var b=this._light.get_scenePosition();this._lenses.get(0).set_far(a);
this._depthCameras.get(0).set_position(b);this._needsRender.set(0,!0);this._lenses.get(1).set_far(a);this._depthCameras.get(1).set_position(b);this._needsRender.set(1,!0);this._lenses.get(2).set_far(a);this._depthCameras.get(2).set_position(b);this._needsRender.set(2,!0);this._lenses.get(3).set_far(a);this._depthCameras.get(3).set_position(b);this._needsRender.set(3,!0);this._lenses.get(4).set_far(a);this._depthCameras.get(4).set_position(b);this._needsRender.set(4,!0);this._lenses.get(5).set_far(a);
this._depthCameras.get(5).set_position(b);this._needsRender.set(5,!0)},drawDepthMap:function(a,b,c){this._needsRender.get(0)&&(this._casterCollector.set_camera(this._depthCameras.get(0)),this._casterCollector.clear(),b.traversePartitions(this._casterCollector),c.render(this._casterCollector,a,null,0),this._casterCollector.cleanUp());this._needsRender.get(1)&&(this._casterCollector.set_camera(this._depthCameras.get(1)),this._casterCollector.clear(),b.traversePartitions(this._casterCollector),c.render(this._casterCollector,
a,null,1),this._casterCollector.cleanUp());this._needsRender.get(2)&&(this._casterCollector.set_camera(this._depthCameras.get(2)),this._casterCollector.clear(),b.traversePartitions(this._casterCollector),c.render(this._casterCollector,a,null,2),this._casterCollector.cleanUp());this._needsRender.get(3)&&(this._casterCollector.set_camera(this._depthCameras.get(3)),this._casterCollector.clear(),b.traversePartitions(this._casterCollector),c.render(this._casterCollector,a,null,3),this._casterCollector.cleanUp());
this._needsRender.get(4)&&(this._casterCollector.set_camera(this._depthCameras.get(4)),this._casterCollector.clear(),b.traversePartitions(this._casterCollector),c.render(this._casterCollector,a,null,4),this._casterCollector.cleanUp());this._needsRender.get(5)&&(this._casterCollector.set_camera(this._depthCameras.get(5)),this._casterCollector.clear(),b.traversePartitions(this._casterCollector),c.render(this._casterCollector,a,null,5),this._casterCollector.cleanUp())},__class__:sk});var wj=function(){this._snap=
64;this._lightOffset=1E4;hf.call(this);this._cullPlanes=M.toObjectVector(null);this._overallDepthLens=new Th;this._overallDepthCamera=new je(this._overallDepthLens);this._localFrustum=M.toFloatVector(null,24);this._matrix=new vc};g["away3d.lights.shadowmaps.DirectionalShadowMapper"]=wj;wj.__name__="away3d.lights.shadowmaps.DirectionalShadowMapper";wj.__super__=hf;wj.prototype=v(hf.prototype,{_overallDepthCamera:null,_localFrustum:null,_lightOffset:null,_matrix:null,_overallDepthLens:null,_snap:null,
_cullPlanes:null,_minZ:null,_maxZ:null,drawDepthMap:function(a,b,c){this._casterCollector.set_camera(this._overallDepthCamera);this._casterCollector.set_cullPlanes(this._cullPlanes);this._casterCollector.clear();b.traversePartitions(this._casterCollector);c.render(this._casterCollector,a);this._casterCollector.cleanUp()},updateCullPlanes:function(a){var b=this._overallDepthCamera.get_frustumPlanes();a=a.get_frustumPlanes();this._cullPlanes.set_length(4);this._cullPlanes.set(0,b.get(0));this._cullPlanes.set(1,
b.get(1));this._cullPlanes.set(2,b.get(2));this._cullPlanes.set(3,b.get(3));var c=Ka.__cast(this._light,Ug).get_sceneDirection();b=c.x;var d=c.y;c=c.z;var e=4,f=a.get(0);0>f.a*b+f.b*d+f.c*c&&this._cullPlanes.set(e++,f);f=a.get(1);0>f.a*b+f.b*d+f.c*c&&this._cullPlanes.set(e++,f);f=a.get(2);0>f.a*b+f.b*d+f.c*c&&this._cullPlanes.set(e++,f);f=a.get(3);0>f.a*b+f.b*d+f.c*c&&this._cullPlanes.set(e++,f);f=a.get(4);0>f.a*b+f.b*d+f.c*c&&this._cullPlanes.set(e++,f);a=a.get(5);0>a.a*b+a.b*d+a.c*c&&this._cullPlanes.set(e++,
a)},updateDepthProjection:function(a){this.updateProjectionFromFrustumCorners(a,a.get_lens().get_frustumCorners(),this._matrix);this._overallDepthLens.set_matrix(this._matrix);this.updateCullPlanes(a)},updateProjectionFromFrustumCorners:function(a,b,c){var d=db.RAW_DATA_CONTAINER,e=Ka.__cast(this._light,Ug).get_sceneDirection();this._overallDepthCamera.set_transform(this._light.get_sceneTransform());var f=((a.get_x()-e.x*this._lightOffset)/this._snap|0)*this._snap,k=((a.get_y()-e.y*this._lightOffset)/
this._snap|0)*this._snap,m=((a.get_z()-e.z*this._lightOffset)/this._snap|0)*this._snap;this._overallDepthCamera.set_x(f);this._overallDepthCamera.set_y(k);this._overallDepthCamera.set_z(m);this._matrix.copyFrom(this._overallDepthCamera.get_inverseSceneTransform());this._matrix.prepend(a.get_sceneTransform());this._matrix.transformVectors(b,this._localFrustum);a=e=this._localFrustum.get(0);var h=this._localFrustum.get(1);b=h;this._maxZ=this._localFrustum.get(2);for(var n=3;24>n;)f=this._localFrustum.get(n),
k=this._localFrustum.get(n+1),m=this._localFrustum.get(n+2),f<a&&(a=f),f>e&&(e=f),k<b&&(b=k),k>h&&(h=k),m>this._maxZ&&(this._maxZ=m),n+=3;this._minZ=1;f=e-a;k=h-b;m=1/(this._maxZ-this._minZ);0>a&&(a-=this._snap);0>b&&(b-=this._snap);a=(a/this._snap|0)*this._snap;b=(b/this._snap|0)*this._snap;e=2*this._snap;f=(f/e+2|0)*e;k=(k/e+2|0)*e;e=a+f;h=b+k;f=1/f;k=1/k;d.set(0,2*f);d.set(5,2*k);d.set(10,m);d.set(12,-(e+a)*f);d.set(13,-(h+b)*k);d.set(14,-this._minZ*m);d.set(15,1);d.set(1,d.set(2,d.set(3,d.set(4,
d.set(6,d.set(7,d.set(8,d.set(9,d.set(11,0)))))))));c.copyRawDataFrom(d)},__class__:wj});var Dd=function(){this._anisotropy=1;this._mipmap=this._smooth=!0;this._numPasses=0;this._blendMode=10;this._owners=M.toObjectVector(null);this._passes=M.toObjectVector(null);this._depthPass=new vk;this._distancePass=new wk;this._depthPass.addEventListener("change",u(this,this.onDepthPassChange));this._distancePass.addEventListener("change",u(this,this.onDistancePassChange));this.set_alphaPremultiplied(!0);this._uniqueId=
Dd.MATERIAL_ID_COUNT++;wa.call(this)};g["away3d.materials.MaterialBase"]=Dd;Dd.__name__="away3d.materials.MaterialBase";Dd.__interfaces__=[zb];Dd.__super__=wa;Dd.prototype=v(wa.prototype,{_uniqueId:null,_renderOrderId:null,_depthPassId:null,_bothSides:null,_animationSet:null,_owners:null,_alphaPremultiplied:null,_blendMode:null,_numPasses:null,_passes:null,_mipmap:null,_smooth:null,_repeat:null,_anisotropy:null,_depthPass:null,_distancePass:null,_lightPicker:null,_distanceBasedDepthRender:null,set_mipmap:function(a){this._mipmap=
a;for(var b=0,c=this._numPasses;b<c;){var d=b++;this._passes.get(d).set_mipmap(a)}return a},set_smooth:function(a){this._smooth=a;for(var b=0,c=this._numPasses;b<c;){var d=b++;this._passes.get(d).set_smooth(a)}return a},set_repeat:function(a){this._repeat=a;for(var b=0,c=this._numPasses;b<c;){var d=b++;this._passes.get(d).set_repeat(a)}return a},set_anisotropy:function(a){this._anisotropy=a;for(var b=0,c=this._numPasses;b<c;){var d=b++;this._passes.get(d).set_anisotropy(this._anisotropy)}return a},
set_bothSides:function(a){this._bothSides=a;for(var b=0,c=this._numPasses;b<c;){var d=b++;this._passes.get(d).set_bothSides(a)}this._depthPass.set_bothSides(a);this._distancePass.set_bothSides(a);return a},set_alphaPremultiplied:function(a){this._alphaPremultiplied=a;for(var b=0,c=this._numPasses;b<c;){var d=b++;this._passes.get(d).set_alphaPremultiplied(a)}return a},get_requiresBlending:function(){return 10!=this._blendMode},get_numPasses:function(){return this._numPasses},hasDepthAlphaThreshold:function(){return 0<
this._depthPass.get_alphaThreshold()},activateForDepth:function(a,b,c){null==c&&(c=!1);(this._distanceBasedDepthRender=c)?this._distancePass.activate(a,b):this._depthPass.activate(a,b)},deactivateForDepth:function(a){this._distanceBasedDepthRender?this._distancePass.deactivate(a):this._depthPass.deactivate(a)},renderDepth:function(a,b,c,d){this._distanceBasedDepthRender?(null!=a.get_animator()&&this._distancePass.updateAnimationState(a,b,c),this._distancePass.render(a,b,c,d)):(null!=a.get_animator()&&
this._depthPass.updateAnimationState(a,b,c),this._depthPass.render(a,b,c,d))},passRendersToTexture:function(a){return this._passes.get(a).get_renderToTexture()},activatePass:function(a,b,c){this._passes.get(a).activate(b,c)},deactivatePass:function(a,b){this._passes.get(a).deactivate(b)},renderPass:function(a,b,c,d,e){null!=this._lightPicker&&this._lightPicker.collectLights(b,d);a=this._passes.get(a);null!=b.get_animator()&&a.updateAnimationState(b,c,d.get_camera());a.render(b,c,d.get_camera(),e)},
addOwner:function(a){this._owners.push(a);if(null!=a.get_animator()){if(null!=this._animationSet&&a.get_animator().get_animationSet()!=this._animationSet)throw new W(new cb("A Material instance cannot be shared across renderables with different animator libraries"));if(this._animationSet!=a.get_animator().get_animationSet()){this._animationSet=a.get_animator().get_animationSet();a=0;for(var b=this._numPasses;a<b;){var c=a++;this._passes.get(c).set_animationSet(this._animationSet)}this._depthPass.set_animationSet(this._animationSet);
this._distancePass.set_animationSet(this._animationSet);this.invalidatePasses(null)}}},removeOwner:function(a){this._owners.splice(this._owners.indexOf(a,0),1);if(0==this._owners.get_length()){this._animationSet=null;a=0;for(var b=this._numPasses;a<b;){var c=a++;this._passes.get(c).set_animationSet(this._animationSet)}this._depthPass.set_animationSet(this._animationSet);this._distancePass.set_animationSet(this._animationSet);this.invalidatePasses(null)}},updateMaterial:function(a){},deactivate:function(a){this._passes.get(this._numPasses-
1).deactivate(a)},invalidatePasses:function(a){this._depthPass.invalidateShaderProgram();this._distancePass.invalidateShaderProgram();if(null!=this._animationSet){this._animationSet.resetGPUCompatibility();for(var b=this._owners.iterator();b.hasNext();){var c=b.next();null!=c.get_animator()&&(c.get_animator().testGPUCompatibility(this._depthPass),c.get_animator().testGPUCompatibility(this._distancePass))}}b=0;for(c=this._numPasses;b<c;){var d=b++;this._passes.get(d)!=a&&this._passes.get(d).invalidateShaderProgram(!1);
if(null!=this._animationSet)for(var e=this._owners.iterator();e.hasNext();){var f=e.next();null!=f.get_animator()&&f.get_animator().testGPUCompatibility(this._passes.get(d))}}},clearPasses:function(){for(var a=0,b=this._numPasses;a<b;){var c=a++;this._passes.get(c).removeEventListener("change",u(this,this.onPassChange))}this._passes.set_length(0);this._numPasses=0},addPass:function(a){this._passes.set(this._numPasses++,a);a.set_animationSet(this._animationSet);a.set_alphaPremultiplied(this._alphaPremultiplied);
a.set_mipmap(this._mipmap);a.set_smooth(this._smooth);a.set_repeat(this._repeat);a.set_anisotropy(this._anisotropy);a.set_lightPicker(this._lightPicker);a.set_bothSides(this._bothSides);a.addEventListener("change",u(this,this.onPassChange));this.invalidatePasses(null)},onPassChange:function(a){a=1;for(var b,c,d=this._renderOrderId=0,e=this._numPasses;d<e;){b=d++;b=this._passes.get(b)._program3Dids;c=b.get_length();for(var f=0;f<c;){var k=f++;if(-1!=b.get(k)){this._renderOrderId+=a*b.get(k)|0;break}}a*=
1E3}},onDistancePassChange:function(a){a=this._distancePass._program3Dids;for(var b=a.get_length(),c=this._depthPassId=0;c<b;){var d=c++;if(-1!=a.get(d)){this._depthPassId+=a.get(d);break}}},onDepthPassChange:function(a){a=this._depthPass._program3Dids;for(var b=a.get_length(),c=this._depthPassId=0;c<b;){var d=c++;if(-1!=a.get(d)){this._depthPassId+=a.get(d);break}}},__class__:Dd});var Tg=function(a){null==a&&(a=1.25);Dd.call(this);this.set_bothSides(!0);this.addPass(this._screenPass=new jf(a));this._screenPass.set_material(this)};
g["away3d.materials.SegmentMaterial"]=Tg;Tg.__name__="away3d.materials.SegmentMaterial";Tg.__super__=Dd;Tg.prototype=v(Dd.prototype,{_screenPass:null,__class__:Tg});var ng=function(){Dd.call(this);this.addPass(this._screenPass=new xk(this))};g["away3d.materials.SinglePassMaterialBase"]=ng;ng.__name__="away3d.materials.SinglePassMaterialBase";ng.__super__=Dd;ng.prototype=v(Dd.prototype,{_screenPass:null,_alphaBlending:null,activateForDepth:function(a,b,c){null==c&&(c=!1);c?this._distancePass.set_alphaMask(this._screenPass.get_diffuseMethod().get_texture()):
this._depthPass.set_alphaMask(this._screenPass.get_diffuseMethod().get_texture());Dd.prototype.activateForDepth.call(this,a,b,c)},get_requiresBlending:function(){return Dd.prototype.get_requiresBlending.call(this)||this._alphaBlending?!0:null!=this._screenPass.get_colorTransform()?1>this._screenPass.get_colorTransform().alphaMultiplier:!1},set_mipmap:function(a){if(this._mipmap==a)return a;Dd.prototype.set_mipmap.call(this,a);return a},updateMaterial:function(a){if(this._screenPass._passesDirty){this.clearPasses();
if(null!=this._screenPass._passes){a=0;for(var b=this._screenPass._passes.get_length();a<b;){var c=a++;this.addPass(this._screenPass._passes.get(c))}}this.addPass(this._screenPass);this._screenPass._passesDirty=!1}},__class__:ng});var Bf=function(a,b,c,d,e){null==e&&(e=1);null==d&&(d=!0);null==c&&(c=!1);null==b&&(b=!0);ng.call(this);this.set_texture(a);this.set_smooth(b);this.set_repeat(c);this.set_mipmap(d);this.set_anisotropy(e)};g["away3d.materials.TextureMaterial"]=Bf;Bf.__name__="away3d.materials.TextureMaterial";
Bf.__super__=ng;Bf.prototype=v(ng.prototype,{set_animateUVs:function(a){this._screenPass.set_animateUVs(a);return a},set_texture:function(a){this._screenPass.get_diffuseMethod().set_texture(a);return a},__class__:Bf});var cl=function(){this._usesGlobalPosFragment=!1};g["away3d.materials.compilation.MethodDependencyCounter"]=cl;cl.__name__="away3d.materials.compilation.MethodDependencyCounter";cl.prototype={_projectionDependencies:null,_normalDependencies:null,_viewDirDependencies:null,_uvDependencies:null,
_secondaryUVDependencies:null,_globalPosDependencies:null,_tangentDependencies:null,_usesGlobalPosFragment:null,_numPointLights:null,_lightSourceMask:null,reset:function(){this._tangentDependencies=this._globalPosDependencies=this._secondaryUVDependencies=this._uvDependencies=this._viewDirDependencies=this._normalDependencies=this._projectionDependencies=0;this._usesGlobalPosFragment=!1},setPositionedLights:function(a,b){this._numPointLights=a;this._lightSourceMask=b},includeMethodVO:function(a){a.needsProjection&&
++this._projectionDependencies;a.needsGlobalVertexPos?(++this._globalPosDependencies,a.needsGlobalFragmentPos&&(this._usesGlobalPosFragment=!0)):a.needsGlobalFragmentPos&&(++this._globalPosDependencies,this._usesGlobalPosFragment=!0);a.needsNormals&&++this._normalDependencies;a.needsTangents&&++this._tangentDependencies;a.needsView&&++this._viewDirDependencies;a.needsUV&&++this._uvDependencies;a.needsSecondaryUV&&++this._secondaryUVDependencies},get_tangentDependencies:function(){return this._tangentDependencies},
get_usesGlobalPosFragment:function(){return this._usesGlobalPosFragment},get_projectionDependencies:function(){return this._projectionDependencies},get_normalDependencies:function(){return this._normalDependencies},get_viewDirDependencies:function(){return this._viewDirDependencies},get_uvDependencies:function(){return this._uvDependencies},get_secondaryUVDependencies:function(){return this._secondaryUVDependencies},get_globalPosDependencies:function(){return this._globalPosDependencies},addWorldSpaceDependencies:function(a){0<
this._viewDirDependencies&&++this._globalPosDependencies;0<this._numPointLights&&0!=(this._lightSourceMask&1)&&(++this._globalPosDependencies,a&&(this._usesGlobalPosFragment=!0))},__class__:cl};var hc=function(a,b,c){null==c&&(c=!0);this._regName=a;this._regCount=b;this._persistent=c;this.initRegisters(a,b)};g["away3d.materials.compilation.RegisterPool"]=hc;hc.__name__="away3d.materials.compilation.RegisterPool";hc._initPool=function(a,b){var c=a+b,d=hc._regPool;if(null!=F[c]?d.existsReserved(c):
d.h.hasOwnProperty(c))return c;d=M.toObjectVector(null,b,!0);var e=hc._regPool;null!=F[c]?e.setReserved(c,d):e.h[c]=d;e=[[],[],[],[]];var f=hc._regCompsPool;null!=F[c]?f.setReserved(c,e):f.h[c]=e;for(f=0;f<b;){var k=f++;d.set(k,new Md(a,k));e[0][k]=new Md(a,k,0);e[1][k]=new Md(a,k,1);e[2][k]=new Md(a,k,2);e[3][k]=new Md(a,k,3)}return c};hc.prototype={_vectorRegisters:null,_registerComponents:null,_regName:null,_usedSingleCount:null,_usedVectorCount:null,_regCount:null,_persistent:null,requestFreeVectorReg:function(){for(var a=
0,b=this._regCount;a<b;){var c=a++;if(!this.isRegisterUsed(c))return this._persistent&&(a=c,b=this._usedVectorCount,b.set(a,b.get(a)+1)),this._vectorRegisters.get(c)}throw new W(new cb("Register overflow!"));},requestFreeRegComponent:function(){for(var a=0,b=this._regCount;a<b;){var c=a++;if(!Xa.gt(this._usedVectorCount.get(c),0)){if(0==this._usedSingleCount.get(0).get(c))return this._persistent&&(a=c,b=this._usedSingleCount.get(0),b.set(a,b.get(a)+1)),this._registerComponents[0][c];if(0==this._usedSingleCount.get(1).get(c))return this._persistent&&
(a=c,b=this._usedSingleCount.get(1),b.set(a,b.get(a)+1)),this._registerComponents[1][c];if(0==this._usedSingleCount.get(2).get(c))return this._persistent&&(a=c,b=this._usedSingleCount.get(2),b.set(a,b.get(a)+1)),this._registerComponents[2][c];if(0==this._usedSingleCount.get(3).get(c))return this._persistent&&(a=c,b=this._usedSingleCount.get(3),b.set(a,b.get(a)+1)),this._registerComponents[3][c]}}throw new W(new cb("Register overflow!"));},addUsage:function(a,b){if(-1<a._component){var c=a.get_index();
a=this._usedSingleCount.get(a._component)}else c=a.get_index(),a=this._usedVectorCount;a.set(c,a.get(c)+b)},removeUsage:function(a){if(-1<a._component){var b=a.get_index();a=this._usedSingleCount.get(a._component)}else b=a.get_index(),a=this._usedVectorCount;b=a.set(b,a.get(b)-1);if(Xa.gt(0,b))throw new W(new cb("More usages removed than exist!"));},dispose:function(){this._usedVectorCount=this._usedSingleCount=this._registerComponents=this._vectorRegisters=null},initRegisters:function(a,b){a=hc._initPool(a,
b);var c=hc._regPool;this._vectorRegisters=null!=F[a]?c.getReserved(a):c.h[a];c=hc._regCompsPool;this._registerComponents=null!=F[a]?c.getReserved(a):c.h[a];this._usedVectorCount=M.toIntVector(null,b,!0);this._usedSingleCount=M.toNullVector(null,4,!0);this._usedSingleCount.set(0,M.toIntVector(null,b,!0));this._usedSingleCount.set(1,M.toIntVector(null,b,!0));this._usedSingleCount.set(2,M.toIntVector(null,b,!0));this._usedSingleCount.set(3,M.toIntVector(null,b,!0))},isRegisterUsed:function(a){return Xa.gt(this._usedVectorCount.get(a),
0)||Xa.gt(this._usedSingleCount.get(0).get(a),0)||Xa.gt(this._usedSingleCount.get(1).get(a),0)||Xa.gt(this._usedSingleCount.get(2).get(a),0)||Xa.gt(this._usedSingleCount.get(3).get(a),0)?!0:!1},__class__:hc};var Lf=function(a){this._commonsDataIndex=this._uvBufferIndex=this._uvTransformIndex=this._uvTransformIndex2=this._secondaryUVBufferIndex=this._normalBufferIndex=this._tangentBufferIndex=this._lightFragmentConstantIndex=this._sceneMatrixIndex=this._sceneNormalMatrixIndex=this._cameraPositionIndex=
this._probeWeightsIndex=-1;this._preserveAlpha=!0;this._sharedRegisters=new dl;this._dependencyCounter=new cl;this._profile=a;this.initRegisterCache(a)};g["away3d.materials.compilation.ShaderCompiler"]=Lf;Lf.__name__="away3d.materials.compilation.ShaderCompiler";Lf.prototype={_sharedRegisters:null,_registerCache:null,_dependencyCounter:null,_methodSetup:null,_smooth:null,_repeat:null,_mipmap:null,_anisotropy:null,_enableLightFallOff:null,_preserveAlpha:null,_animateUVs:null,_animateUVs2:null,_alphaPremultiplied:null,
_vertexConstantData:null,_fragmentConstantData:null,_vertexCode:null,_fragmentCode:null,_fragmentLightCode:null,_fragmentPostLightCode:null,_commonsDataIndex:null,_animatableAttributes:null,_animationTargetRegisters:null,_lightProbeDiffuseIndices:null,_lightProbeSpecularIndices:null,_uvBufferIndex:null,_uvTransformIndex:null,_uvTransformIndex2:null,_secondaryUVBufferIndex:null,_normalBufferIndex:null,_tangentBufferIndex:null,_lightFragmentConstantIndex:null,_sceneMatrixIndex:null,_sceneNormalMatrixIndex:null,
_cameraPositionIndex:null,_probeWeightsIndex:null,_specularLightSources:null,_diffuseLightSources:null,_numLights:null,_numLightProbes:null,_numPointLights:null,_numDirectionalLights:null,_numProbeRegisters:null,_combinedLightSources:null,_usingSpecularMethod:null,_needUVAnimation:null,_UVTarget:null,_UVSource:null,_profile:null,_forceSeperateMVP:null,set_enableLightFallOff:function(a){return this._enableLightFallOff=a},get_needUVAnimation:function(){return this._needUVAnimation},get_UVTarget:function(){return this._UVTarget},
get_UVSource:function(){return this._UVSource},set_forceSeperateMVP:function(a){return this._forceSeperateMVP=a},initRegisterCache:function(a){this._registerCache=new O(a);this._registerCache.set_vertexAttributesOffset(1);this._registerCache.reset()},get_animateUVs:function(){return this._animateUVs},set_animateUVs:function(a){return this._animateUVs=a},get_animateUVs2:function(){return this._animateUVs2},set_animateUVs2:function(a){return this._animateUVs2=a},set_alphaPremultiplied:function(a){return this._alphaPremultiplied=
a},set_preserveAlpha:function(a){return this._preserveAlpha=a},setTextureSampling:function(a,b,c,d){this._smooth=a;this._repeat=b;this._mipmap=c;this._anisotropy=d},setConstantDataBuffers:function(a,b){this._vertexConstantData=a;this._fragmentConstantData=b},set_methodSetup:function(a){return this._methodSetup=a},compile:function(){this.initRegisterIndices();this.initLightData();for(var a=["va0"],b=M.toObjectVector(null),c=0,d=a.length;c<d;){var e=c++;b.set(e,a[e])}this._animatableAttributes=b;a=
["vt0"];b=M.toObjectVector(null);c=0;for(d=a.length;c<d;)e=c++,b.set(e,a[e]);this._animationTargetRegisters=b;this._fragmentCode=this._vertexCode="";this._sharedRegisters.localPosition=this._registerCache.getFreeVertexVectorTemp();this._registerCache.addVertexTempUsages(this._sharedRegisters.localPosition,1);this.createCommons();this.calculateDependencies();this.updateMethodRegisters();this._registerCache.getFreeVertexConstant();this._registerCache.getFreeVertexConstant();this._registerCache.getFreeVertexConstant();
this._registerCache.getFreeVertexConstant();this.createNormalRegisters();(0<this._dependencyCounter.get_globalPosDependencies()||this._forceSeperateMVP)&&this.compileGlobalPositionCode();this.compileProjectionCode();this.compileMethodsCode();this.compileFragmentOutput();this._fragmentPostLightCode=this.get_fragmentCode()},createNormalRegisters:function(){},compileMethodsCode:function(){0<this._dependencyCounter.get_uvDependencies()&&this.compileUVCode();0<this._dependencyCounter.get_secondaryUVDependencies()&&
this.compileSecondaryUVCode();0<this._dependencyCounter.get_normalDependencies()&&this.compileNormalCode();0<this._dependencyCounter.get_viewDirDependencies()&&this.compileViewDirCode();this.compileLightingCode();this._fragmentLightCode=this._fragmentCode;this._fragmentCode="";this.compileMethods()},compileLightingCode:function(){},compileViewDirCode:function(){},compileNormalCode:function(){},compileUVCode:function(){var a=this._registerCache.getFreeVertexAttribute();this._uvBufferIndex=a.get_index();
var b=this._registerCache.getFreeVarying();this._sharedRegisters.uvVarying=b;if(this.get_animateUVs()){var c=this._registerCache.getFreeVertexConstant(),d=this._registerCache.getFreeVertexConstant();this._uvTransformIndex=4*c.get_index();this._vertexCode+="dp4 "+r.string(b)+".x, "+r.string(a)+", "+r.string(c)+"\ndp4 "+r.string(b)+".y, "+r.string(a)+", "+r.string(d)+"\nmov "+r.string(b)+".zw, "+r.string(a)+".zw \n"}else this._uvTransformIndex=-1,this._needUVAnimation=!0,this._UVTarget=b.toString(),
this._UVSource=a.toString()},compileSecondaryUVCode:function(){var a=this._registerCache.getFreeVertexAttribute();this._secondaryUVBufferIndex=a.get_index();var b=this._registerCache.getFreeVarying();this._sharedRegisters.secondaryUVVarying=b;if(this.get_animateUVs2()){var c=this._registerCache.getFreeVertexConstant(),d=this._registerCache.getFreeVertexConstant();this._uvTransformIndex2=4*c.get_index();this._vertexCode+="dp4 "+r.string(b)+".x, "+r.string(a)+", "+r.string(c)+"\n";this._vertexCode+=
"dp4 "+r.string(b)+".y, "+r.string(a)+", "+r.string(d)+"\n";this._vertexCode+="mov "+r.string(b)+".zw, "+r.string(a)+".zw\n"}else this._uvTransformIndex2=-1,this._vertexCode+="mov "+r.string(b)+", "+r.string(a)+"\n"},compileGlobalPositionCode:function(){this._sharedRegisters.globalPositionVertex=this._registerCache.getFreeVertexVectorTemp();this._registerCache.addVertexTempUsages(this._sharedRegisters.globalPositionVertex,this._dependencyCounter.get_globalPosDependencies());var a=this._registerCache.getFreeVertexConstant();
this._registerCache.getFreeVertexConstant();this._registerCache.getFreeVertexConstant();this._registerCache.getFreeVertexConstant();this._sceneMatrixIndex=4*a.get_index();this._vertexCode+="m44 "+r.string(this._sharedRegisters.globalPositionVertex)+", "+r.string(this._sharedRegisters.localPosition)+", "+r.string(a)+"\n";this._dependencyCounter.get_usesGlobalPosFragment()&&(this._sharedRegisters.globalPositionVarying=this._registerCache.getFreeVarying(),this._vertexCode+="mov "+r.string(this._sharedRegisters.globalPositionVarying)+
", "+r.string(this._sharedRegisters.globalPositionVertex)+"\n")},compileProjectionCode:function(){var a=0<this._dependencyCounter.get_globalPosDependencies()||this._forceSeperateMVP?this._sharedRegisters.globalPositionVertex.toString():this._animationTargetRegisters.get(0);0<this._dependencyCounter.get_projectionDependencies()?(this._sharedRegisters.projectionFragment=this._registerCache.getFreeVarying(),a="m44 vt5, "+a+", vc0\t\t\nmov "+r.string(this._sharedRegisters.projectionFragment)+", vt5\nmov op, vt5\n"):
a="m44 op, "+a+", vc0\t\t\n";this._vertexCode+=a},compileFragmentOutput:function(){this._fragmentCode+="mov "+r.string(this._registerCache.get_fragmentOutputRegister())+", "+r.string(this._sharedRegisters.shadedTarget)+"\n";this._registerCache.removeFragmentTempUsage(this._sharedRegisters.shadedTarget)},initRegisterIndices:function(){this._probeWeightsIndex=this._sceneNormalMatrixIndex=this._sceneMatrixIndex=this._lightFragmentConstantIndex=this._tangentBufferIndex=this._normalBufferIndex=this._secondaryUVBufferIndex=
this._uvTransformIndex2=this._uvTransformIndex=this._uvBufferIndex=this._cameraPositionIndex=this._commonsDataIndex=-1},initLightData:function(){this._numLights=this._numPointLights+this._numDirectionalLights;this._numProbeRegisters=Math.ceil(this._numLightProbes/4);this._combinedLightSources=null!=this._methodSetup._specularMethod?this._specularLightSources|this._diffuseLightSources:this._diffuseLightSources;this._usingSpecularMethod=null!=this._methodSetup._specularMethod&&(this.usesLightsForSpecular()||
this.usesProbesForSpecular())},createCommons:function(){this._sharedRegisters.commons=this._registerCache.getFreeFragmentConstant();this._commonsDataIndex=4*this._sharedRegisters.commons.get_index()},calculateDependencies:function(){this._dependencyCounter.reset();var a=this._methodSetup._methods;this.setupAndCountMethodDependencies(this._methodSetup._diffuseMethod,this._methodSetup._diffuseMethodVO);null!=this._methodSetup._shadowMethod&&this.setupAndCountMethodDependencies(this._methodSetup._shadowMethod,
this._methodSetup._shadowMethodVO);this.setupAndCountMethodDependencies(this._methodSetup._ambientMethod,this._methodSetup._ambientMethodVO);this._usingSpecularMethod&&this.setupAndCountMethodDependencies(this._methodSetup._specularMethod,this._methodSetup._specularMethodVO);null!=this._methodSetup._colorTransformMethod&&this.setupAndCountMethodDependencies(this._methodSetup._colorTransformMethod,this._methodSetup._colorTransformMethodVO);for(var b=0,c=a.get_length();b<c;){var d=b++;this.setupAndCountMethodDependencies(a.get(d).method,
a.get(d).data)}this.get_usesNormals()&&this.setupAndCountMethodDependencies(this._methodSetup._normalMethod,this._methodSetup._normalMethodVO);this._dependencyCounter.setPositionedLights(this._numPointLights,this._combinedLightSources)},setupAndCountMethodDependencies:function(a,b){this.setupMethod(a,b);this._dependencyCounter.includeMethodVO(b)},setupMethod:function(a,b){a.reset();b.reset();b.vertexData=this._vertexConstantData;b.fragmentData=this._fragmentConstantData;b.useSmoothTextures=this._smooth;
b.repeatTextures=this._repeat;b.useMipmapping=this._mipmap;b.anisotropy=this._anisotropy;b.useLightFallOff=this._enableLightFallOff&&"baselineConstrained"!=this._profile;b.numLights=this._numLights+this._numLightProbes;a.initVO(b)},get_commonsDataIndex:function(){return this._commonsDataIndex},updateMethodRegisters:function(){this._methodSetup._normalMethod.set_sharedRegisters(this._sharedRegisters);this._methodSetup._diffuseMethod.set_sharedRegisters(this._sharedRegisters);null!=this._methodSetup._shadowMethod&&
this._methodSetup._shadowMethod.set_sharedRegisters(this._sharedRegisters);this._methodSetup._ambientMethod.set_sharedRegisters(this._sharedRegisters);null!=this._methodSetup._specularMethod&&this._methodSetup._specularMethod.set_sharedRegisters(this._sharedRegisters);null!=this._methodSetup._colorTransformMethod&&this._methodSetup._colorTransformMethod.set_sharedRegisters(this._sharedRegisters);for(var a=this._methodSetup._methods,b=0,c=a.get_length();b<c;){var d=b++;a.get(d).method.set_sharedRegisters(this._sharedRegisters)}},
get_numUsedVertexConstants:function(){return this._registerCache.get_numUsedVertexConstants()},get_numUsedFragmentConstants:function(){return this._registerCache.get_numUsedFragmentConstants()},get_numUsedStreams:function(){return this._registerCache.get_numUsedStreams()},get_numUsedTextures:function(){return this._registerCache.get_numUsedTextures()},get_numUsedVaryings:function(){return this._registerCache.get_numUsedVaryings()},usesLightsForSpecular:function(){return 0<this._numLights?0!=(this._specularLightSources&
1):!1},usesLightsForDiffuse:function(){return 0<this._numLights?0!=(this._diffuseLightSources&1):!1},dispose:function(){this.cleanUpMethods();this._registerCache.dispose();this._sharedRegisters=this._registerCache=null},cleanUpMethods:function(){null!=this._methodSetup._normalMethod&&this._methodSetup._normalMethod.cleanCompilationData();null!=this._methodSetup._diffuseMethod&&this._methodSetup._diffuseMethod.cleanCompilationData();null!=this._methodSetup._ambientMethod&&this._methodSetup._ambientMethod.cleanCompilationData();
null!=this._methodSetup._specularMethod&&this._methodSetup._specularMethod.cleanCompilationData();null!=this._methodSetup._shadowMethod&&this._methodSetup._shadowMethod.cleanCompilationData();null!=this._methodSetup._colorTransformMethod&&this._methodSetup._colorTransformMethod.cleanCompilationData();for(var a=this._methodSetup._methods,b=0,c=a.get_length();b<c;){var d=b++;a.get(d).method.cleanCompilationData()}},set_specularLightSources:function(a){return this._specularLightSources=a},set_diffuseLightSources:function(a){return this._diffuseLightSources=
a},usesProbesForSpecular:function(){return 0<this._numLightProbes?0!=(this._specularLightSources&2):!1},usesProbesForDiffuse:function(){return 0<this._numLightProbes?0!=(this._diffuseLightSources&2):!1},usesProbes:function(){return 0<this._numLightProbes?0!=((this._diffuseLightSources|this._specularLightSources)&2):!1},get_uvBufferIndex:function(){return this._uvBufferIndex},get_uvTransformIndex:function(){return this._uvTransformIndex},get_uvTransformIndex2:function(){return this._uvTransformIndex2},
get_secondaryUVBufferIndex:function(){return this._secondaryUVBufferIndex},get_normalBufferIndex:function(){return this._normalBufferIndex},get_tangentBufferIndex:function(){return this._tangentBufferIndex},get_lightFragmentConstantIndex:function(){return this._lightFragmentConstantIndex},get_cameraPositionIndex:function(){return this._cameraPositionIndex},get_sceneMatrixIndex:function(){return this._sceneMatrixIndex},get_sceneNormalMatrixIndex:function(){return this._sceneNormalMatrixIndex},get_probeWeightsIndex:function(){return this._probeWeightsIndex},
get_vertexCode:function(){return this._vertexCode},get_fragmentCode:function(){return this._fragmentCode},get_fragmentLightCode:function(){return this._fragmentLightCode},get_fragmentPostLightCode:function(){return this._fragmentPostLightCode},get_shadedTarget:function(){return this._sharedRegisters.shadedTarget.toString()},set_numPointLights:function(a){return this._numPointLights=a},set_numDirectionalLights:function(a){return this._numDirectionalLights=a},set_numLightProbes:function(a){return this._numLightProbes=
a},get_usingSpecularMethod:function(){return this._usingSpecularMethod},get_animatableAttributes:function(){return this._animatableAttributes},get_animationTargetRegisters:function(){return this._animationTargetRegisters},get_usesNormals:function(){return 0<this._dependencyCounter.get_normalDependencies()?this._methodSetup._normalMethod.get_hasOutput():!1},usesLights:function(){return 0<this._numLights?0!=(this._combinedLightSources&1):!1},compileMethods:function(){var a=this._methodSetup._methods,
b=a.get_length(),c=null;this._preserveAlpha&&(c=this._registerCache.getFreeFragmentSingleTemp(),this._registerCache.addFragmentTempUsages(c,1),this._fragmentCode+="mov "+r.string(c)+", "+r.string(this._sharedRegisters.shadedTarget)+".w\n");for(var d=0;d<b;){var e=d++;var f=a.get(e).method;e=a.get(e).data;this._vertexCode+=f.getVertexCode(e,this._registerCache);(e.needsGlobalVertexPos||e.needsGlobalFragmentPos)&&this._registerCache.removeVertexTempUsage(this._sharedRegisters.globalPositionVertex);
this._fragmentCode+=f.getFragmentCode(e,this._registerCache,this._sharedRegisters.shadedTarget);e.needsNormals&&this._registerCache.removeFragmentTempUsage(this._sharedRegisters.normalFragment);e.needsView&&this._registerCache.removeFragmentTempUsage(this._sharedRegisters.viewDirFragment)}this._preserveAlpha&&(this._fragmentCode+="mov "+r.string(this._sharedRegisters.shadedTarget)+".w, "+r.string(c)+"\n",this._registerCache.removeFragmentTempUsage(c));null!=this._methodSetup._colorTransformMethod&&
(this._vertexCode+=this._methodSetup._colorTransformMethod.getVertexCode(this._methodSetup._colorTransformMethodVO,this._registerCache),this._fragmentCode+=this._methodSetup._colorTransformMethod.getFragmentCode(this._methodSetup._colorTransformMethodVO,this._registerCache,this._sharedRegisters.shadedTarget))},get_lightProbeDiffuseIndices:function(){return this._lightProbeDiffuseIndices},get_lightProbeSpecularIndices:function(){return this._lightProbeSpecularIndices},__class__:Lf};var dl=function(){};
g["away3d.materials.compilation.ShaderRegisterData"]=dl;dl.__name__="away3d.materials.compilation.ShaderRegisterData";dl.prototype={normalVarying:null,tangentVarying:null,bitangentVarying:null,uvVarying:null,secondaryUVVarying:null,viewDirVarying:null,shadedTarget:null,globalPositionVertex:null,globalPositionVarying:null,localPosition:null,normalInput:null,tangentInput:null,animatedNormal:null,animatedTangent:null,commons:null,projectionFragment:null,normalFragment:null,viewDirFragment:null,__class__:dl};
var Md=function(a,b,c){null==c&&(c=-1);this._component=c;this._regName=a;this._index=b;this._toStr=this._regName;0<=this._index&&(this._toStr+=this._index);-1<c&&(this._toStr+="."+Md.COMPONENTS[c])};g["away3d.materials.compilation.ShaderRegisterElement"]=Md;Md.__name__="away3d.materials.compilation.ShaderRegisterElement";Md.prototype={_regName:null,_index:null,_toStr:null,_component:null,toString:function(){return this._toStr},get_index:function(){return this._index},__class__:Md};var yk=function(a){Lf.call(this,
a)};g["away3d.materials.compilation.SuperShaderCompiler"]=yk;yk.__name__="away3d.materials.compilation.SuperShaderCompiler";yk.__super__=Lf;yk.prototype=v(Lf.prototype,{_pointLightRegisters:null,_dirLightRegisters:null,initLightData:function(){Lf.prototype.initLightData.call(this);this._pointLightRegisters=M.toObjectVector(null,3*this._numPointLights,!0);this._dirLightRegisters=M.toObjectVector(null,3*this._numDirectionalLights,!0)},calculateDependencies:function(){Lf.prototype.calculateDependencies.call(this);
this._dependencyCounter.addWorldSpaceDependencies(!0)},compileNormalCode:function(){var a=M.toObjectVector(null,3,!0);this._sharedRegisters.normalFragment=this._registerCache.getFreeFragmentVectorTemp();this._registerCache.addFragmentTempUsages(this._sharedRegisters.normalFragment,this._dependencyCounter.get_normalDependencies());this._methodSetup._normalMethod.get_hasOutput()&&!this._methodSetup._normalMethod.get_tangentSpace()?(this._vertexCode+=this._methodSetup._normalMethod.getVertexCode(this._methodSetup._normalMethodVO,
this._registerCache),this._fragmentCode+=this._methodSetup._normalMethod.getFragmentCode(this._methodSetup._normalMethodVO,this._registerCache,this._sharedRegisters.normalFragment)):(this._sharedRegisters.normalVarying=this._registerCache.getFreeVarying(),a.set(0,this._registerCache.getFreeVertexConstant()),a.set(1,this._registerCache.getFreeVertexConstant()),a.set(2,this._registerCache.getFreeVertexConstant()),this._registerCache.getFreeVertexConstant(),this._sceneNormalMatrixIndex=4*a.get(0).get_index(),
this._methodSetup._normalMethod.get_hasOutput()?(this.compileTangentVertexCode(a),this.compileTangentNormalMapFragmentCode()):(this._vertexCode+="m33 "+r.string(this._sharedRegisters.normalVarying)+".xyz, "+r.string(this._sharedRegisters.animatedNormal)+", "+r.string(a.get(0))+"\nmov "+r.string(this._sharedRegisters.normalVarying)+".w, "+r.string(this._sharedRegisters.animatedNormal)+".w\t\n",this._fragmentCode+="nrm "+r.string(this._sharedRegisters.normalFragment)+".xyz, "+r.string(this._sharedRegisters.normalVarying)+
"\nmov "+r.string(this._sharedRegisters.normalFragment)+".w, "+r.string(this._sharedRegisters.normalVarying)+".w\t\t\n",0<this._dependencyCounter.get_tangentDependencies()&&(this._sharedRegisters.tangentInput=this._registerCache.getFreeVertexAttribute(),this._tangentBufferIndex=this._sharedRegisters.tangentInput.get_index(),this._sharedRegisters.tangentVarying=this._registerCache.getFreeVarying(),this._vertexCode+="mov "+r.string(this._sharedRegisters.tangentVarying)+", "+r.string(this._sharedRegisters.tangentInput)+
"\n")),this._registerCache.removeVertexTempUsage(this._sharedRegisters.animatedNormal))},createNormalRegisters:function(){0<this._dependencyCounter.get_normalDependencies()&&(this._sharedRegisters.normalInput=this._registerCache.getFreeVertexAttribute(),this._normalBufferIndex=this._sharedRegisters.normalInput.get_index(),this._sharedRegisters.animatedNormal=this._registerCache.getFreeVertexVectorTemp(),this._registerCache.addVertexTempUsages(this._sharedRegisters.animatedNormal,1),this._animatableAttributes.push(this._sharedRegisters.normalInput.toString()),
this._animationTargetRegisters.push(this._sharedRegisters.animatedNormal.toString()));this._methodSetup._normalMethod.get_hasOutput()&&(this._sharedRegisters.tangentInput=this._registerCache.getFreeVertexAttribute(),this._tangentBufferIndex=this._sharedRegisters.tangentInput.get_index(),this._sharedRegisters.animatedTangent=this._registerCache.getFreeVertexVectorTemp(),this._registerCache.addVertexTempUsages(this._sharedRegisters.animatedTangent,1),this._animatableAttributes.push(this._sharedRegisters.tangentInput.toString()),
this._animationTargetRegisters.push(this._sharedRegisters.animatedTangent.toString()))},compileTangentVertexCode:function(a){this._sharedRegisters.tangentVarying=this._registerCache.getFreeVarying();this._sharedRegisters.bitangentVarying=this._registerCache.getFreeVarying();this._vertexCode+="m33 "+r.string(this._sharedRegisters.animatedNormal)+".xyz, "+r.string(this._sharedRegisters.animatedNormal)+", "+r.string(a.get(0))+"\nnrm "+r.string(this._sharedRegisters.animatedNormal)+".xyz, "+r.string(this._sharedRegisters.animatedNormal)+
"\n";this._vertexCode+="m33 "+r.string(this._sharedRegisters.animatedTangent)+".xyz, "+r.string(this._sharedRegisters.animatedTangent)+", "+r.string(a.get(0))+"\nnrm "+r.string(this._sharedRegisters.animatedTangent)+".xyz, "+r.string(this._sharedRegisters.animatedTangent)+"\n";a=this._registerCache.getFreeVertexVectorTemp();this._vertexCode+="mov "+r.string(this._sharedRegisters.tangentVarying)+".x, "+r.string(this._sharedRegisters.animatedTangent)+".x  \nmov "+r.string(this._sharedRegisters.tangentVarying)+
".z, "+r.string(this._sharedRegisters.animatedNormal)+".x  \nmov "+r.string(this._sharedRegisters.tangentVarying)+".w, "+r.string(this._sharedRegisters.normalInput)+".w  \nmov "+r.string(this._sharedRegisters.bitangentVarying)+".x, "+r.string(this._sharedRegisters.animatedTangent)+".y  \nmov "+r.string(this._sharedRegisters.bitangentVarying)+".z, "+r.string(this._sharedRegisters.animatedNormal)+".y  \nmov "+r.string(this._sharedRegisters.bitangentVarying)+".w, "+r.string(this._sharedRegisters.normalInput)+
".w  \nmov "+r.string(this._sharedRegisters.normalVarying)+".x, "+r.string(this._sharedRegisters.animatedTangent)+".z  \nmov "+r.string(this._sharedRegisters.normalVarying)+".z, "+r.string(this._sharedRegisters.animatedNormal)+".z  \nmov "+r.string(this._sharedRegisters.normalVarying)+".w, "+r.string(this._sharedRegisters.normalInput)+".w  \ncrs "+r.string(a)+".xyz, "+r.string(this._sharedRegisters.animatedNormal)+", "+r.string(this._sharedRegisters.animatedTangent)+"\nmov "+r.string(this._sharedRegisters.tangentVarying)+
".y, "+r.string(a)+".x    \nmov "+r.string(this._sharedRegisters.bitangentVarying)+".y, "+r.string(a)+".y  \nmov "+r.string(this._sharedRegisters.normalVarying)+".y, "+r.string(a)+".z    \n";this._registerCache.removeVertexTempUsage(this._sharedRegisters.animatedTangent)},compileTangentNormalMapFragmentCode:function(){var a=this._registerCache.getFreeFragmentVectorTemp();this._registerCache.addFragmentTempUsages(a,1);var b=this._registerCache.getFreeFragmentVectorTemp();this._registerCache.addFragmentTempUsages(b,
1);var c=this._registerCache.getFreeFragmentVectorTemp();this._registerCache.addFragmentTempUsages(c,1);this._fragmentCode+="nrm "+r.string(a)+".xyz, "+r.string(this._sharedRegisters.tangentVarying)+"\nmov "+r.string(a)+".w, "+r.string(this._sharedRegisters.tangentVarying)+".w\t\nnrm "+r.string(b)+".xyz, "+r.string(this._sharedRegisters.bitangentVarying)+"\nnrm "+r.string(c)+".xyz, "+r.string(this._sharedRegisters.normalVarying)+"\n";var d=this._registerCache.getFreeFragmentVectorTemp();this._registerCache.addFragmentTempUsages(d,
1);this._fragmentCode+=this._methodSetup._normalMethod.getFragmentCode(this._methodSetup._normalMethodVO,this._registerCache,d)+"m33 "+r.string(this._sharedRegisters.normalFragment)+".xyz, "+r.string(d)+", "+r.string(a)+"\t\nmov "+r.string(this._sharedRegisters.normalFragment)+".w,   "+r.string(this._sharedRegisters.normalVarying)+".w\t\t\t\n";this._registerCache.removeFragmentTempUsage(d);this._methodSetup._normalMethodVO.needsView&&this._registerCache.removeFragmentTempUsage(this._sharedRegisters.viewDirFragment);
(this._methodSetup._normalMethodVO.needsGlobalVertexPos||this._methodSetup._normalMethodVO.needsGlobalFragmentPos)&&this._registerCache.removeVertexTempUsage(this._sharedRegisters.globalPositionVertex);this._registerCache.removeFragmentTempUsage(b);this._registerCache.removeFragmentTempUsage(a);this._registerCache.removeFragmentTempUsage(c)},compileViewDirCode:function(){var a=this._registerCache.getFreeVertexConstant();this._sharedRegisters.viewDirVarying=this._registerCache.getFreeVarying();this._sharedRegisters.viewDirFragment=
this._registerCache.getFreeFragmentVectorTemp();this._registerCache.addFragmentTempUsages(this._sharedRegisters.viewDirFragment,this._dependencyCounter.get_viewDirDependencies());this._cameraPositionIndex=4*a.get_index();this._vertexCode+="sub "+r.string(this._sharedRegisters.viewDirVarying)+", "+r.string(a)+", "+r.string(this._sharedRegisters.globalPositionVertex)+"\n";this._fragmentCode+="nrm "+r.string(this._sharedRegisters.viewDirFragment)+".xyz, "+r.string(this._sharedRegisters.viewDirVarying)+
"\nmov "+r.string(this._sharedRegisters.viewDirFragment)+".w,   "+r.string(this._sharedRegisters.viewDirVarying)+".w \t\t\n";this._registerCache.removeVertexTempUsage(this._sharedRegisters.globalPositionVertex)},compileLightingCode:function(){var a=null;this._sharedRegisters.shadedTarget=this._registerCache.getFreeFragmentVectorTemp();this._registerCache.addFragmentTempUsages(this._sharedRegisters.shadedTarget,1);this._vertexCode+=this._methodSetup._diffuseMethod.getVertexCode(this._methodSetup._diffuseMethodVO,
this._registerCache);this._fragmentCode+=this._methodSetup._diffuseMethod.getFragmentPreLightingCode(this._methodSetup._diffuseMethodVO,this._registerCache);this._usingSpecularMethod&&(this._vertexCode+=this._methodSetup._specularMethod.getVertexCode(this._methodSetup._specularMethodVO,this._registerCache),this._fragmentCode+=this._methodSetup._specularMethod.getFragmentPreLightingCode(this._methodSetup._specularMethodVO,this._registerCache));this.usesLights()&&(this.initLightRegisters(),this.compileDirectionalLightCode(),
this.compilePointLightCode());this.usesProbes()&&this.compileLightProbeCode();this._vertexCode+=this._methodSetup._ambientMethod.getVertexCode(this._methodSetup._ambientMethodVO,this._registerCache);this._fragmentCode+=this._methodSetup._ambientMethod.getFragmentCode(this._methodSetup._ambientMethodVO,this._registerCache,this._sharedRegisters.shadedTarget);this._methodSetup._ambientMethodVO.needsNormals&&this._registerCache.removeFragmentTempUsage(this._sharedRegisters.normalFragment);this._methodSetup._ambientMethodVO.needsView&&
this._registerCache.removeFragmentTempUsage(this._sharedRegisters.viewDirFragment);null!=this._methodSetup._shadowMethod&&(this._vertexCode+=this._methodSetup._shadowMethod.getVertexCode(this._methodSetup._shadowMethodVO,this._registerCache),0==this._dependencyCounter.get_normalDependencies()?(a=this._registerCache.getFreeFragmentVectorTemp(),this._registerCache.addFragmentTempUsages(a,1)):a=this._sharedRegisters.normalFragment,this._methodSetup._diffuseMethod.set_shadowRegister(a),this._fragmentCode+=
this._methodSetup._shadowMethod.getFragmentCode(this._methodSetup._shadowMethodVO,this._registerCache,a));this._fragmentCode+=this._methodSetup._diffuseMethod.getFragmentPostLightingCode(this._methodSetup._diffuseMethodVO,this._registerCache,this._sharedRegisters.shadedTarget);this._alphaPremultiplied&&(this._fragmentCode+="add "+r.string(this._sharedRegisters.shadedTarget)+".w, "+r.string(this._sharedRegisters.shadedTarget)+".w, "+r.string(this._sharedRegisters.commons)+".z\ndiv "+r.string(this._sharedRegisters.shadedTarget)+
".xyz, "+r.string(this._sharedRegisters.shadedTarget)+", "+r.string(this._sharedRegisters.shadedTarget)+".w\nsub "+r.string(this._sharedRegisters.shadedTarget)+".w, "+r.string(this._sharedRegisters.shadedTarget)+".w, "+r.string(this._sharedRegisters.commons)+".z\nsat "+r.string(this._sharedRegisters.shadedTarget)+".xyz, "+r.string(this._sharedRegisters.shadedTarget)+"\n");this._methodSetup._diffuseMethodVO.needsNormals&&this._registerCache.removeFragmentTempUsage(this._sharedRegisters.normalFragment);
this._methodSetup._diffuseMethodVO.needsView&&this._registerCache.removeFragmentTempUsage(this._sharedRegisters.viewDirFragment);this._usingSpecularMethod&&(this._methodSetup._specularMethod.set_shadowRegister(a),this._fragmentCode+=this._methodSetup._specularMethod.getFragmentPostLightingCode(this._methodSetup._specularMethodVO,this._registerCache,this._sharedRegisters.shadedTarget),this._methodSetup._specularMethodVO.needsNormals&&this._registerCache.removeFragmentTempUsage(this._sharedRegisters.normalFragment),
this._methodSetup._specularMethodVO.needsView&&this._registerCache.removeFragmentTempUsage(this._sharedRegisters.viewDirFragment))},initLightRegisters:function(){for(var a=this._dirLightRegisters.get_length(),b=0;b<a;){var c=b++;this._dirLightRegisters.set(c,this._registerCache.getFreeFragmentConstant());-1==this._lightFragmentConstantIndex&&(this._lightFragmentConstantIndex=4*this._dirLightRegisters.get(c).get_index())}a=this._pointLightRegisters.get_length();for(b=0;b<a;)c=b++,this._pointLightRegisters.set(c,
this._registerCache.getFreeFragmentConstant()),-1==this._lightFragmentConstantIndex&&(this._lightFragmentConstantIndex=4*this._pointLightRegisters.get(c).get_index())},compileDirectionalLightCode:function(){var a=0,b=this._usingSpecularMethod&&this.usesLightsForSpecular(),c=this.usesLightsForDiffuse();if(b||c)for(var d=0,e=this._numDirectionalLights;d<e;){d++;var f=this._dirLightRegisters.get(a++);var k=this._dirLightRegisters.get(a++);var m=this._dirLightRegisters.get(a++);c&&(this._fragmentCode+=
this._methodSetup._diffuseMethod.getFragmentCodePerLight(this._methodSetup._diffuseMethodVO,f,k,this._registerCache));b&&(this._fragmentCode+=this._methodSetup._specularMethod.getFragmentCodePerLight(this._methodSetup._specularMethodVO,f,m,this._registerCache))}},compilePointLightCode:function(){var a=0,b=this._usingSpecularMethod&&this.usesLightsForSpecular(),c=this.usesLightsForDiffuse();if(b||c)for(var d=0,e=this._numPointLights;d<e;){d++;var f=this._pointLightRegisters.get(a++);var k=this._pointLightRegisters.get(a++);
var m=this._pointLightRegisters.get(a++);var h=this._registerCache.getFreeFragmentVectorTemp();this._registerCache.addFragmentTempUsages(h,1);this._fragmentCode+="sub "+r.string(h)+", "+r.string(f)+", "+r.string(this._sharedRegisters.globalPositionVarying)+"\ndp3 "+r.string(h)+".w, "+r.string(h)+", "+r.string(h)+"\nsub "+r.string(h)+".w, "+r.string(h)+".w, "+r.string(k)+".w\nmul "+r.string(h)+".w, "+r.string(h)+".w, "+r.string(m)+".w\nsat "+r.string(h)+".w, "+r.string(h)+".w\nsub "+r.string(h)+".w, "+
r.string(f)+".w, "+r.string(h)+".w\nnrm "+r.string(h)+".xyz, "+r.string(h)+"\n";-1==this._lightFragmentConstantIndex&&(this._lightFragmentConstantIndex=4*f.get_index());c&&(this._fragmentCode+=this._methodSetup._diffuseMethod.getFragmentCodePerLight(this._methodSetup._diffuseMethodVO,h,k,this._registerCache));b&&(this._fragmentCode+=this._methodSetup._specularMethod.getFragmentCodePerLight(this._methodSetup._specularMethodVO,h,m,this._registerCache));this._registerCache.removeFragmentTempUsage(h)}},
compileLightProbeCode:function(){var a=[".x",".y",".z",".w"],b=M.toObjectVector(null),c,d=this._usingSpecularMethod&&this.usesProbesForSpecular(),e=this.usesProbesForDiffuse();if(d||e){e&&(this._lightProbeDiffuseIndices=M.toIntVector(null));d&&(this._lightProbeSpecularIndices=M.toIntVector(null));var f=0;for(c=this._numProbeRegisters;f<c;){var k=f++;b.set(k,this._registerCache.getFreeFragmentConstant());0==k&&(this._probeWeightsIndex=4*b.get(k).get_index())}k=0;for(var m=this._numLightProbes;k<m;){var h=
k++;f=b.get(Math.floor(h/4)).toString()+a[h%4];e&&(c=this._registerCache.getFreeTextureReg(),this._lightProbeDiffuseIndices.set(h,c.get_index()),this._fragmentCode+=this._methodSetup._diffuseMethod.getFragmentCodePerProbe(this._methodSetup._diffuseMethodVO,c,f,this._registerCache));d&&(c=this._registerCache.getFreeTextureReg(),this._lightProbeSpecularIndices.set(h,c.get_index()),this._fragmentCode+=this._methodSetup._specularMethod.getFragmentCodePerProbe(this._methodSetup._specularMethodVO,c,f,this._registerCache))}}},
__class__:yk});var zk=function(){wa.call(this)};g["away3d.materials.lightpickers.LightPickerBase"]=zk;zk.__name__="away3d.materials.lightpickers.LightPickerBase";zk.__interfaces__=[zb];zk.__super__=wa;zk.prototype=v(wa.prototype,{_numPointLights:null,_numDirectionalLights:null,_numCastingPointLights:null,_numCastingDirectionalLights:null,_numLightProbes:null,_pointLights:null,_castingPointLights:null,_directionalLights:null,_castingDirectionalLights:null,_lightProbes:null,_lightProbeWeights:null,
get_numDirectionalLights:function(){return this._numDirectionalLights},get_numPointLights:function(){return this._numPointLights},get_numCastingDirectionalLights:function(){return this._numCastingDirectionalLights},get_numCastingPointLights:function(){return this._numCastingPointLights},get_numLightProbes:function(){return this._numLightProbes},get_pointLights:function(){return this._pointLights},get_directionalLights:function(){return this._directionalLights},get_castingPointLights:function(){return this._castingPointLights},
get_castingDirectionalLights:function(){return this._castingDirectionalLights},get_lightProbes:function(){return this._lightProbes},get_lightProbeWeights:function(){return this._lightProbeWeights},collectLights:function(a,b){this.updateProbeWeights(a)},updateProbeWeights:function(a){a=a.get_sourceEntity().get_scenePosition();for(var b,c=a.x,d=a.y,e=a.z,f,k,m=a=0,h=this._numLightProbes;m<h;){var n=m++;b=this._lightProbes.get(n).get_scenePosition();f=c-b.x;k=d-b.y;b=e-b.z;f=f*f+k*k+b*b;f=1E-5<f?1/f:
5E7;this._lightProbeWeights.set(n,f);a+=f}a=1/a;c=0;for(d=this._numLightProbes;c<d;)e=c++,m=this._lightProbeWeights,m.set(e,m.get(e)*a)},__class__:zk});var Ed=function(){wa.call(this)};g["away3d.materials.methods.ShadingMethodBase"]=Ed;Ed.__name__="away3d.materials.methods.ShadingMethodBase";Ed.__super__=wa;Ed.prototype=v(wa.prototype,{_sharedRegisters:null,_passes:null,initVO:function(a){},initConstants:function(a){},set_sharedRegisters:function(a){return this._sharedRegisters=a},get_passes:function(){return this._passes},
createMethodVO:function(){return new el},reset:function(){this.cleanCompilationData()},cleanCompilationData:function(){},getVertexCode:function(a,b){return""},activate:function(a,b){},setRenderState:function(a,b,c,d){},deactivate:function(a,b){},getTex2DSampleCode:function(a,b,c,d,e,f){var k=a.repeatTextures?"wrap":"clamp";null!=f&&(k=f);f=this.getFormatStringForTexture(d);d=a.useMipmapping&&d.get_hasMipMaps();a=a.useSmoothTextures?d?"linear,miplinear":"linear":d?"nearest,mipnearest":"nearest";null==
e&&(e=this._sharedRegisters.uvVarying);return"tex "+r.string(b)+", "+r.string(e)+", "+r.string(c)+" <2d,"+a+","+f+k+">\n"},getFormatStringForTexture:function(a){switch(a.get_format()){case 3:return"dxt1,";case 4:return"dxt5,";default:return""}},invalidateShaderProgram:function(){this.dispatchEvent(new gi("ShaderInvalidated"))},getSmoothingFilter:function(a,b){if(a)switch(b){case 0:return 4;case 1:return 1;case 2:return 2;case 3:return 3;case 4:return 0}else return 5},__class__:Ed});var Vg=function(){this._lightAmbientR=
this._lightAmbientG=this._lightAmbientB=0;this._ambient=1;this._ambientR=this._ambientG=this._ambientB=0;this._ambientColor=16777215;wa.call(this)};g["away3d.materials.methods.BasicAmbientMethod"]=Vg;Vg.__name__="away3d.materials.methods.BasicAmbientMethod";Vg.__super__=Ed;Vg.prototype=v(Ed.prototype,{_useTexture:null,_texture:null,_ambientInputRegister:null,_ambientColor:null,_ambientR:null,_ambientG:null,_ambientB:null,_ambient:null,_lightAmbientR:null,_lightAmbientG:null,_lightAmbientB:null,initVO:function(a){a.needsUV=
this._useTexture},initConstants:function(a){a.fragmentData.set(a.fragmentConstantsIndex+3,1)},cleanCompilationData:function(){Ed.prototype.cleanCompilationData.call(this);this._ambientInputRegister=null},getFragmentCode:function(a,b,c){var d="";this._useTexture?(this._ambientInputRegister=b.getFreeTextureReg(),a.texturesIndex=this._ambientInputRegister.get_index(),d+=this.getTex2DSampleCode(a,c,this._ambientInputRegister,this._texture)+"div "+r.string(c)+".xyz, "+r.string(c)+".xyz, "+r.string(c)+
".w\n"):(this._ambientInputRegister=b.getFreeFragmentConstant(),a.fragmentConstantsIndex=4*this._ambientInputRegister.get_index(),d+="mov "+r.string(c)+", "+r.string(this._ambientInputRegister)+"\n");return d},activate:function(a,b){this._useTexture&&(b.get_context3D().setSamplerStateAt(a.texturesIndex,a.repeatTextures?2:0,this.getSmoothingFilter(a.useSmoothTextures,a.anisotropy),a.useMipmapping?0:2),b._context3D.setTextureAt(a.texturesIndex,this._texture.getTextureForStage3D(b)))},updateAmbient:function(){this._ambientR=
(this._ambientColor>>16&255)/255*this._ambient*this._lightAmbientR;this._ambientG=(this._ambientColor>>8&255)/255*this._ambient*this._lightAmbientG;this._ambientB=(this._ambientColor&255)/255*this._ambient*this._lightAmbientB},setRenderState:function(a,b,c,d){this.updateAmbient();this._useTexture||(b=a.fragmentConstantsIndex,a=a.fragmentData,a.set(b,this._ambientR),a.set(b+1,this._ambientG),a.set(b+2,this._ambientB))},__class__:Vg});var kf=function(){wa.call(this)};g["away3d.materials.methods.LightingMethodBase"]=
kf;kf.__name__="away3d.materials.methods.LightingMethodBase";kf.__super__=Ed;kf.prototype=v(Ed.prototype,{_modulateMethod:null,__class__:kf});var Mf=function(){this._alphaThreshold=0;this._diffuseR=this._diffuseG=this._diffuseB=this._diffuseA=1;wa.call(this)};g["away3d.materials.methods.BasicDiffuseMethod"]=Mf;Mf.__name__="away3d.materials.methods.BasicDiffuseMethod";Mf.__super__=kf;Mf.prototype=v(kf.prototype,{_useAmbientTexture:null,_useTexture:null,_totalLightColorReg:null,_diffuseInputRegister:null,
_texture:null,_diffuseR:null,_diffuseG:null,_diffuseB:null,_diffuseA:null,_shadowRegister:null,_alphaThreshold:null,_isFirstLight:null,initVO:function(a){a.needsUV=this._useTexture;a.needsNormals=0<a.numLights},get_texture:function(){return this._texture},set_texture:function(a){null!=a==this._useTexture&&(null==a||null==this._texture||a.get_hasMipMaps()==this._texture.get_hasMipMaps()&&a.get_format()==this._texture.get_format())||this.invalidateShaderProgram();this._useTexture=null!=a;return this._texture=
a},cleanCompilationData:function(){kf.prototype.cleanCompilationData.call(this);this._diffuseInputRegister=this._totalLightColorReg=this._shadowRegister=null},getFragmentPreLightingCode:function(a,b){this._isFirstLight=!0;0<a.numLights&&(this._totalLightColorReg=b.getFreeFragmentVectorTemp(),b.addFragmentTempUsages(this._totalLightColorReg,1));return""},getFragmentCodePerLight:function(a,b,c,d){var e="";if(this._isFirstLight)var f=this._totalLightColorReg;else f=d.getFreeFragmentVectorTemp(),d.addFragmentTempUsages(f,
1);e+="dp3 "+r.string(f)+".x, "+r.string(b)+", "+r.string(this._sharedRegisters.normalFragment)+"\nmax "+r.string(f)+".w, "+r.string(f)+".x, "+r.string(this._sharedRegisters.commons)+".y\n";a.useLightFallOff&&(e+="mul "+r.string(f)+".w, "+r.string(f)+".w, "+r.string(b)+".w\n");null!=this._modulateMethod&&(e+=r.string(this._modulateMethod(a,f,d,this._sharedRegisters)));e+="mul "+r.string(f)+", "+r.string(f)+".w, "+r.string(c)+"\n";this._isFirstLight||(e+="add "+r.string(this._totalLightColorReg)+".xyz, "+
r.string(this._totalLightColorReg)+", "+r.string(f)+"\n",d.removeFragmentTempUsage(f));this._isFirstLight=!1;return e},getFragmentCodePerProbe:function(a,b,c,d){var e="";if(this._isFirstLight)var f=this._totalLightColorReg;else f=d.getFreeFragmentVectorTemp(),d.addFragmentTempUsages(f,1);e+="tex "+r.string(f)+", "+r.string(this._sharedRegisters.normalFragment)+", "+r.string(b)+" <cube,linear,miplinear>\nmul "+r.string(f)+".xyz, "+r.string(f)+".xyz, "+c+"\n";null!=this._modulateMethod&&(e+=r.string(this._modulateMethod(a,
f,d,this._sharedRegisters)));this._isFirstLight||(e+="add "+r.string(this._totalLightColorReg)+".xyz, "+r.string(this._totalLightColorReg)+", "+r.string(f)+"\n",d.removeFragmentTempUsage(f));this._isFirstLight=!1;return e},getFragmentPostLightingCode:function(a,b,c){var d="";if(0<a.numLights){null!=this._shadowRegister&&(d+=this.applyShadow(a,b));var e=b.getFreeFragmentVectorTemp();b.addFragmentTempUsages(e,1)}else e=c;if(this._useTexture){if(this._diffuseInputRegister=b.getFreeTextureReg(),a.texturesIndex=
this._diffuseInputRegister.get_index(),d+=this.getTex2DSampleCode(a,e,this._diffuseInputRegister,this._texture),0<this._alphaThreshold){var f=b.getFreeFragmentConstant();a.fragmentConstantsIndex=4*f.get_index();d+="sub "+r.string(e)+".w, "+r.string(e)+".w, "+r.string(f)+".x\nkil "+r.string(e)+".w\nadd "+r.string(e)+".w, "+r.string(e)+".w, "+r.string(f)+".x\n"}}else this._diffuseInputRegister=b.getFreeFragmentConstant(),a.fragmentConstantsIndex=4*this._diffuseInputRegister.get_index(),d+="mov "+r.string(e)+
", "+r.string(this._diffuseInputRegister)+"\n";if(0==a.numLights)return d;d+="sat "+r.string(this._totalLightColorReg)+", "+r.string(this._totalLightColorReg)+"\n";this._useAmbientTexture?d+="mul "+r.string(e)+".xyz, "+r.string(e)+", "+r.string(this._totalLightColorReg)+"\nmul "+r.string(this._totalLightColorReg)+".xyz, "+r.string(c)+", "+r.string(this._totalLightColorReg)+"\nsub "+r.string(c)+".xyz, "+r.string(c)+", "+r.string(this._totalLightColorReg)+"\nadd "+r.string(c)+".xyz, "+r.string(e)+", "+
r.string(c)+"\n":(d+="add "+r.string(c)+".xyz, "+r.string(this._totalLightColorReg)+", "+r.string(c)+"\n",d=this._useTexture?d+("mul "+r.string(c)+".xyz, "+r.string(e)+", "+r.string(c)+"\nmov "+r.string(c)+".w, "+r.string(e)+".w\n"):d+("mul "+r.string(c)+".xyz, "+r.string(this._diffuseInputRegister)+", "+r.string(c)+"\nmov "+r.string(c)+".w, "+r.string(this._diffuseInputRegister)+".w\n"));b.removeFragmentTempUsage(this._totalLightColorReg);b.removeFragmentTempUsage(e);return d},applyShadow:function(a,
b){return"mul "+r.string(this._totalLightColorReg)+".xyz, "+r.string(this._totalLightColorReg)+", "+r.string(this._shadowRegister)+".w\n"},activate:function(a,b){this._useTexture?(b._context3D.setSamplerStateAt(a.texturesIndex,a.repeatTextures?2:0,this.getSmoothingFilter(a.useSmoothTextures,a.anisotropy),a.useMipmapping?0:2),b._context3D.setTextureAt(a.texturesIndex,this._texture.getTextureForStage3D(b)),0<this._alphaThreshold&&a.fragmentData.set(a.fragmentConstantsIndex,this._alphaThreshold)):(b=
a.fragmentConstantsIndex,a=a.fragmentData,a.set(b,this._diffuseR),a.set(b+1,this._diffuseG),a.set(b+2,this._diffuseB),a.set(b+3,this._diffuseA))},set_shadowRegister:function(a){return this._shadowRegister=a},__class__:Mf});var hi=function(){wa.call(this)};g["away3d.materials.methods.BasicNormalMethod"]=hi;hi.__name__="away3d.materials.methods.BasicNormalMethod";hi.__super__=Ed;hi.prototype=v(Ed.prototype,{_texture:null,_useTexture:null,_normalTextureRegister:null,initVO:function(a){a.needsUV=null!=
this._texture},get_tangentSpace:function(){return!0},get_hasOutput:function(){return this._useTexture},cleanCompilationData:function(){Ed.prototype.cleanCompilationData.call(this);this._normalTextureRegister=null},activate:function(a,b){0<=a.texturesIndex&&(b._context3D.setSamplerStateAt(a.texturesIndex,a.repeatTextures?2:0,this.getSmoothingFilter(a.useSmoothTextures,a.anisotropy),a.useMipmapping?0:2),b._context3D.setTextureAt(a.texturesIndex,this._texture.getTextureForStage3D(b)))},getFragmentCode:function(a,
b,c){this._normalTextureRegister=b.getFreeTextureReg();a.texturesIndex=this._normalTextureRegister.get_index();return this.getTex2DSampleCode(a,c,this._normalTextureRegister,this._texture)+"sub "+r.string(c)+".xyz, "+r.string(c)+".xyz, "+r.string(this._sharedRegisters.commons)+".xxx\t\nnrm "+r.string(c)+".xyz, "+r.string(c)+".xyz\t\t\t\t\t\t\t\n"},__class__:hi});var Wg=function(){this._specularR=this._specularG=this._specularB=1;this._gloss=50;wa.call(this)};g["away3d.materials.methods.BasicSpecularMethod"]=
Wg;Wg.__name__="away3d.materials.methods.BasicSpecularMethod";Wg.__super__=kf;Wg.prototype=v(kf.prototype,{_useTexture:null,_totalLightColorReg:null,_specularTextureRegister:null,_specularTexData:null,_specularDataRegister:null,_texture:null,_gloss:null,_specularR:null,_specularG:null,_specularB:null,_shadowRegister:null,_isFirstLight:null,initVO:function(a){a.needsUV=this._useTexture;a.needsNormals=0<a.numLights;a.needsView=0<a.numLights},cleanCompilationData:function(){kf.prototype.cleanCompilationData.call(this);
this._specularDataRegister=this._specularTexData=this._specularTextureRegister=this._totalLightColorReg=this._shadowRegister=null},getFragmentPreLightingCode:function(a,b){var c="";this._isFirstLight=!0;0<a.numLights&&(this._specularDataRegister=b.getFreeFragmentConstant(),a.fragmentConstantsIndex=4*this._specularDataRegister.get_index(),this._useTexture?(this._specularTexData=b.getFreeFragmentVectorTemp(),b.addFragmentTempUsages(this._specularTexData,1),this._specularTextureRegister=b.getFreeTextureReg(),
a.texturesIndex=this._specularTextureRegister.get_index(),c=this.getTex2DSampleCode(a,this._specularTexData,this._specularTextureRegister,this._texture)):this._specularTextureRegister=null,this._totalLightColorReg=b.getFreeFragmentVectorTemp(),b.addFragmentTempUsages(this._totalLightColorReg,1));return c},getFragmentCodePerLight:function(a,b,c,d){var e="";if(this._isFirstLight)var f=this._totalLightColorReg;else f=d.getFreeFragmentVectorTemp(),d.addFragmentTempUsages(f,1);var k=this._sharedRegisters.viewDirFragment,
m=this._sharedRegisters.normalFragment;e+="add "+r.string(f)+", "+r.string(b)+", "+r.string(k)+"\nnrm "+r.string(f)+".xyz, "+r.string(f)+"\ndp3 "+r.string(f)+".w, "+r.string(m)+", "+r.string(f)+"\nsat "+r.string(f)+".w, "+r.string(f)+".w\n";e=this._useTexture?e+("mul "+r.string(this._specularTexData)+".w, "+r.string(this._specularTexData)+".y, "+r.string(this._specularDataRegister)+".w\npow "+r.string(f)+".w, "+r.string(f)+".w, "+r.string(this._specularTexData)+".w\n"):e+("pow "+r.string(f)+".w, "+
r.string(f)+".w, "+r.string(this._specularDataRegister)+".w\n");a.useLightFallOff&&(e+="mul "+r.string(f)+".w, "+r.string(f)+".w, "+r.string(b)+".w\n");null!=this._modulateMethod&&(e+=r.string(this._modulateMethod(a,f,d,this._sharedRegisters)));e+="mul "+r.string(f)+".xyz, "+r.string(c)+", "+r.string(f)+".w\n";this._isFirstLight||(e+="add "+r.string(this._totalLightColorReg)+".xyz, "+r.string(this._totalLightColorReg)+", "+r.string(f)+"\n",d.removeFragmentTempUsage(f));this._isFirstLight=!1;return e},
getFragmentCodePerProbe:function(a,b,c,d){var e="";if(this._isFirstLight)var f=this._totalLightColorReg;else f=d.getFreeFragmentVectorTemp(),d.addFragmentTempUsages(f,1);var k=this._sharedRegisters.normalFragment,m=this._sharedRegisters.viewDirFragment;e+="dp3 "+r.string(f)+".w, "+r.string(k)+", "+r.string(m)+"\nadd "+r.string(f)+".w, "+r.string(f)+".w, "+r.string(f)+".w\nmul "+r.string(f)+", "+r.string(f)+".w, "+r.string(k)+"\nsub "+r.string(f)+", "+r.string(f)+", "+r.string(m)+"\ntex "+r.string(f)+
", "+r.string(f)+", "+r.string(b)+" <cube,"+(a.useSmoothTextures?"linear":"nearest")+",miplinear>\nmul "+r.string(f)+".xyz, "+r.string(f)+", "+c+"\n";null!=this._modulateMethod&&(e+=r.string(this._modulateMethod(a,f,d,this._sharedRegisters)));this._isFirstLight||(e+="add "+r.string(this._totalLightColorReg)+".xyz, "+r.string(this._totalLightColorReg)+", "+r.string(f)+"\n",d.removeFragmentTempUsage(f));this._isFirstLight=!1;return e},getFragmentPostLightingCode:function(a,b,c){var d="";if(0==a.numLights)return d;
null!=this._shadowRegister&&(d+="mul "+r.string(this._totalLightColorReg)+".xyz, "+r.string(this._totalLightColorReg)+", "+r.string(this._shadowRegister)+".w\n");this._useTexture&&(d+="mul "+r.string(this._totalLightColorReg)+".xyz, "+r.string(this._totalLightColorReg)+", "+r.string(this._specularTexData)+".x\n",b.removeFragmentTempUsage(this._specularTexData));d+="mul "+r.string(this._totalLightColorReg)+".xyz, "+r.string(this._totalLightColorReg)+", "+r.string(this._specularDataRegister)+"\nadd "+
r.string(c)+".xyz, "+r.string(c)+", "+r.string(this._totalLightColorReg)+"\n";b.removeFragmentTempUsage(this._totalLightColorReg);return d},activate:function(a,b){0!=a.numLights&&(this._useTexture&&(b._context3D.setSamplerStateAt(a.texturesIndex,a.repeatTextures?2:0,this.getSmoothingFilter(a.useSmoothTextures,a.anisotropy),a.useMipmapping?0:2),b._context3D.setTextureAt(a.texturesIndex,this._texture.getTextureForStage3D(b))),b=a.fragmentConstantsIndex,a=a.fragmentData,a.set(b,this._specularR),a.set(b+
1,this._specularG),a.set(b+2,this._specularB),a.set(b+3,this._gloss))},set_shadowRegister:function(a){return this._shadowRegister=a},__class__:Wg});var Xg=function(){wa.call(this)};g["away3d.materials.methods.EffectMethodBase"]=Xg;Xg.__name__="away3d.materials.methods.EffectMethodBase";Xg.__interfaces__=[zb];Xg.__super__=Ed;Xg.prototype=v(Ed.prototype,{getFragmentCode:function(a,b,c){throw new W(new tb);},__class__:Xg});var fl=function(){wa.call(this)};g["away3d.materials.methods.ColorTransformMethod"]=
fl;fl.__name__="away3d.materials.methods.ColorTransformMethod";fl.__super__=Xg;fl.prototype=v(Xg.prototype,{_colorTransform:null,get_colorTransform:function(){return this._colorTransform},getFragmentCode:function(a,b,c){var d="",e=b.getFreeFragmentConstant();b=b.getFreeFragmentConstant();a.fragmentConstantsIndex=4*e.get_index();return d+="mul "+r.string(c)+", "+c.toString()+", "+r.string(e)+"\nadd "+r.string(c)+", "+c.toString()+", "+r.string(b)+"\n"},activate:function(a,b){b=a.fragmentConstantsIndex;
a=a.fragmentData;a.set(b,this._colorTransform.redMultiplier);a.set(b+1,this._colorTransform.greenMultiplier);a.set(b+2,this._colorTransform.blueMultiplier);a.set(b+3,this._colorTransform.alphaMultiplier);a.set(b+4,.00392156862745098*this._colorTransform.redOffset);a.set(b+5,.00392156862745098*this._colorTransform.greenOffset);a.set(b+6,.00392156862745098*this._colorTransform.blueOffset);a.set(b+7,.00392156862745098*this._colorTransform.alphaOffset)},__class__:fl});var el=function(){this.useLightFallOff=
!0};g["away3d.materials.methods.MethodVO"]=el;el.__name__="away3d.materials.methods.MethodVO";el.prototype={vertexData:null,fragmentData:null,texturesIndex:null,vertexConstantsIndex:null,fragmentConstantsIndex:null,useMipmapping:null,useSmoothTextures:null,repeatTextures:null,anisotropy:null,needsProjection:null,needsView:null,needsNormals:null,needsTangents:null,needsUV:null,needsSecondaryUV:null,needsGlobalVertexPos:null,needsGlobalFragmentPos:null,numLights:null,useLightFallOff:null,reset:function(){this.fragmentConstantsIndex=
this.vertexConstantsIndex=this.texturesIndex=-1;this.useMipmapping=!0;this.anisotropy=1;this.useSmoothTextures=!0;this.needsGlobalFragmentPos=this.needsGlobalVertexPos=this.needsSecondaryUV=this.needsUV=this.needsTangents=this.needsNormals=this.needsView=this.needsProjection=this.repeatTextures=!1;this.numLights=0;this.useLightFallOff=!0},__class__:el};var Ql=function(a){this.method=a;this.data=a.createMethodVO()};g["away3d.materials.methods.MethodVOSet"]=Ql;Ql.__name__="away3d.materials.methods.MethodVOSet";
Ql.prototype={method:null,data:null,__class__:Ql};var Yg=function(){this._methods=M.toObjectVector(null);this._normalMethod=new hi;this._ambientMethod=new Vg;this._diffuseMethod=new Mf;this._specularMethod=new Wg;this._normalMethod.addEventListener("ShaderInvalidated",u(this,this.onShaderInvalidated));this._diffuseMethod.addEventListener("ShaderInvalidated",u(this,this.onShaderInvalidated));this._specularMethod.addEventListener("ShaderInvalidated",u(this,this.onShaderInvalidated));this._ambientMethod.addEventListener("ShaderInvalidated",
u(this,this.onShaderInvalidated));this._normalMethodVO=this._normalMethod.createMethodVO();this._ambientMethodVO=this._ambientMethod.createMethodVO();this._diffuseMethodVO=this._diffuseMethod.createMethodVO();this._specularMethodVO=this._specularMethod.createMethodVO();aa.call(this)};g["away3d.materials.methods.ShaderMethodSetup"]=Yg;Yg.__name__="away3d.materials.methods.ShaderMethodSetup";Yg.__super__=aa;Yg.prototype=v(aa.prototype,{_colorTransformMethod:null,_colorTransformMethodVO:null,_normalMethod:null,
_normalMethodVO:null,_ambientMethod:null,_ambientMethodVO:null,_shadowMethod:null,_shadowMethodVO:null,_diffuseMethod:null,_diffuseMethodVO:null,_specularMethod:null,_specularMethodVO:null,_methods:null,onShaderInvalidated:function(a){this.invalidateShaderProgram()},invalidateShaderProgram:function(){this.dispatchEvent(new gi("ShaderInvalidated"))},get_diffuseMethod:function(){return this._diffuseMethod},get_colorTransformMethod:function(){return this._colorTransformMethod},__class__:Yg});var Zg=
function(a){wa.call(this);this._castingLight=a;a.set_castsShadows(!0);this._shadowMapper=a.get_shadowMapper()};g["away3d.materials.methods.ShadowMapMethodBase"]=Zg;Zg.__name__="away3d.materials.methods.ShadowMapMethodBase";Zg.__interfaces__=[zb];Zg.__super__=Ed;Zg.prototype=v(Ed.prototype,{_castingLight:null,_shadowMapper:null,getFragmentCode:function(a,b,c){throw new W(new tb);},__class__:Zg});var rb=function(a){null==a&&(a=!1);this._writeDepth=!0;this._agalVersion=1;this._defaultCulling=0;this._shadedTarget=
"ft0";for(var b=["vt0"],c=M.toObjectVector(null),d=0,e=b.length;d<e;){var f=d++;c.set(f,b[f])}this._animationTargetRegisters=c;b=["va0"];c=M.toObjectVector(null);d=0;for(e=b.length;d<e;)f=d++,c.set(f,b[f]);this._animatableAttributes=c;this._blendFactorDest=9;this._blendFactorSource=2;this._depthCompareMode=5;this._anisotropy=1;this._mipmap=!0;this._repeat=!1;this._smooth=!0;this._numUsedStreams=this._numUsedTextures=this._numUsedVertexConstants=this._numUsedFragmentConstants=this._numUsedVaryings=
0;this._context3Ds=M.toObjectVector(null,8);b=[-1,-1,-1,-1,-1,-1,-1,-1];c=M.toIntVector(null);d=0;for(e=b.length;d<e;)f=d++,c.set(f,b[f]);this._program3Dids=c;this._program3Ds=M.toObjectVector(null,8);aa.call(this);this._renderToTexture=a;this._numUsedStreams=1;this._numUsedVertexConstants=5};g["away3d.materials.passes.MaterialPassBase"]=rb;rb.__name__="away3d.materials.passes.MaterialPassBase";rb.__super__=aa;rb.prototype=v(aa.prototype,{_material:null,_animationSet:null,_program3Ds:null,_program3Dids:null,
_context3Ds:null,_numUsedStreams:null,_numUsedTextures:null,_numUsedVertexConstants:null,_numUsedFragmentConstants:null,_numUsedVaryings:null,_smooth:null,_repeat:null,_mipmap:null,_anisotropy:null,_depthCompareMode:null,_blendFactorSource:null,_blendFactorDest:null,_enableBlending:null,_bothSides:null,_lightPicker:null,_animatableAttributes:null,_animationTargetRegisters:null,_shadedTarget:null,_defaultCulling:null,_renderToTexture:null,_oldTarget:null,_oldSurface:null,_oldDepthStencil:null,_oldRect:null,
_alphaPremultiplied:null,_needFragmentAnimation:null,_needUVAnimation:null,_UVTarget:null,_UVSource:null,_agalVersion:null,_writeDepth:null,get_material:function(){return this._material},set_material:function(a){return this._material=a},set_mipmap:function(a){if(this._mipmap==a)return this._mipmap;this._mipmap=a;this.invalidateShaderProgram();return this._mipmap},set_anisotropy:function(a){if(this._anisotropy==a)return a;this._anisotropy=a;this.invalidateShaderProgram();return a},set_smooth:function(a){if(this._smooth==
a)return this._smooth;this._smooth=a;this.invalidateShaderProgram();return this._smooth},set_repeat:function(a){if(this._repeat==a)return this._repeat;this._repeat=a;this.invalidateShaderProgram();return this._repeat},set_bothSides:function(a){return this._bothSides=a},set_animationSet:function(a){if(this._animationSet==a)return this._animationSet;this._animationSet=a;this.invalidateShaderProgram();return this._animationSet},get_renderToTexture:function(){return this._renderToTexture},updateAnimationState:function(a,
b,c){a.get_animator().setRenderState(b,a,this._numUsedVertexConstants,this._numUsedStreams,c)},render:function(a,b,c,d){throw new W(new tb);},getVertexCode:function(){throw new W(new tb);},getFragmentCode:function(a){throw new W(new tb);},activate:function(a,b){b=a._stage3DIndex;var c=a._context3D;c.setDepthTest(this._writeDepth&&!this._enableBlending,this._depthCompareMode);this._enableBlending&&c.setBlendFactors(this._blendFactorSource,this._blendFactorDest);if(this._context3Ds.get(b)!=c||null==
this._program3Ds.get(b))this._context3Ds.set(b,c),this.updateProgram(a),this.dispatchEvent(new R("change"));for(var d=rb._previousUsedStreams.get(b),e=this._numUsedStreams;e<d;){var f=e++;c.setVertexBufferAt(f,null)}d=rb._previousUsedTexs.get(b);for(e=this._numUsedTextures;e<d;)f=e++,c.setTextureAt(f,null);null==this._animationSet||this._animationSet.get_usesCPU()||this._animationSet.activate(a,this);c.setProgram(this._program3Ds.get(b));c.setCulling(this._bothSides?3:this._defaultCulling);this._renderToTexture&&
(this._oldTarget=a.get_renderTarget(),this._oldSurface=a.get_renderSurfaceSelector(),this._oldDepthStencil=a.get_enableDepthAndStencil(),this._oldRect=a.get_scissorRect())},deactivate:function(a){var b=a._stage3DIndex;rb._previousUsedStreams.set(b,this._numUsedStreams);rb._previousUsedTexs.set(b,this._numUsedTextures);null==this._animationSet||this._animationSet.get_usesCPU()||this._animationSet.deactivate(a,this);this._renderToTexture&&(a.setRenderTarget(this._oldTarget,this._oldDepthStencil,this._oldSurface),
a.set_scissorRect(this._oldRect));this._enableBlending&&a._context3D.setBlendFactors(2,9);a._context3D.setDepthTest(!0,5)},invalidateShaderProgram:function(a){null==a&&(a=!0);this._program3Ds.set(0,null);this._program3Ds.set(1,null);this._program3Ds.set(2,null);this._program3Ds.set(3,null);this._program3Ds.set(4,null);this._program3Ds.set(5,null);this._program3Ds.set(6,null);this._program3Ds.set(7,null);null!=this._material&&a&&this._material.invalidatePasses(this)},updateProgram:function(a){var b=
"",c="",d="",e=this.getVertexCode();if(null==this._animationSet||this._animationSet.get_usesCPU()){for(var f=0,k=this._animatableAttributes.get_length();f<k;){var m=f++;b+="mov "+this._animationTargetRegisters.get(m)+", "+this._animatableAttributes.get(m)+"\n"}this._needUVAnimation&&(c="mov "+this._UVTarget+","+this._UVSource+"\n")}else b=this._animationSet.getAGALVertexCode(this,this._animatableAttributes,this._animationTargetRegisters,a.get_profile()),this._needFragmentAnimation&&(d=this._animationSet.getAGALFragmentCode(this,
this._shadedTarget,a.get_profile())),this._needUVAnimation&&(c=this._animationSet.getAGALUVCode(this,this._UVSource,this._UVTarget)),this._animationSet.doneAGALCode(this);e=b+c+e;b=this.getFragmentCode(d);Me.active&&(console.log("away3d/materials/passes/MaterialPassBase.hx:537:","Compiling AGAL Code:"),console.log("away3d/materials/passes/MaterialPassBase.hx:538:","--------------------"),console.log("away3d/materials/passes/MaterialPassBase.hx:539:",e),console.log("away3d/materials/passes/MaterialPassBase.hx:540:",
"--------------------"),console.log("away3d/materials/passes/MaterialPassBase.hx:541:",b));dc.getInstance(a).setProgram3D(this,e,b,this._agalVersion)},set_lightPicker:function(a){null!=this._lightPicker&&this._lightPicker.removeEventListener("change",u(this,this.onLightsChange));this._lightPicker=a;null!=this._lightPicker&&this._lightPicker.addEventListener("change",u(this,this.onLightsChange));this.updateLights();return this._lightPicker},onLightsChange:function(a){this.updateLights()},updateLights:function(){},
set_alphaPremultiplied:function(a){this._alphaPremultiplied=a;this.invalidateShaderProgram(!1);return this._alphaPremultiplied},__class__:rb});var le=function(a){this._preserveAlpha=this._enableLightFallOff=!0;this._fragmentConstantData=M.toFloatVector(null);this._vertexConstantData=M.toFloatVector(null);this._diffuseLightSources=3;this._specularLightSources=1;this._material=a;this.init();rb.call(this)};g["away3d.materials.passes.CompiledPass"]=le;le.__name__="away3d.materials.passes.CompiledPass";
le.__super__=rb;le.prototype=v(rb.prototype,{_passes:null,_passesDirty:null,_specularLightSources:null,_diffuseLightSources:null,_vertexCode:null,_fragmentLightCode:null,_framentPostLightCode:null,_vertexConstantData:null,_fragmentConstantData:null,_commonsDataIndex:null,_probeWeightsIndex:null,_uvBufferIndex:null,_secondaryUVBufferIndex:null,_normalBufferIndex:null,_tangentBufferIndex:null,_sceneMatrixIndex:null,_sceneNormalMatrixIndex:null,_lightFragmentConstantIndex:null,_cameraPositionIndex:null,
_uvTransformIndex:null,_uvTransformIndex2:null,_lightProbeDiffuseIndices:null,_lightProbeSpecularIndices:null,_ambientLightR:null,_ambientLightG:null,_ambientLightB:null,_compiler:null,_methodSetup:null,_usingSpecularMethod:null,_usesNormals:null,_preserveAlpha:null,_animateUVs:null,_animateUVs2:null,_numPointLights:null,_numDirectionalLights:null,_numLightProbes:null,_enableLightFallOff:null,_forceSeparateMVP:null,updateProgram:function(a){this.reset(a.get_profile());rb.prototype.updateProgram.call(this,
a)},reset:function(a){this.initCompiler(a);this.updateShaderProperties();this.initConstantData();this.cleanUp()},updateUsedOffsets:function(){this._numUsedVertexConstants=this._compiler.get_numUsedVertexConstants();this._numUsedFragmentConstants=this._compiler.get_numUsedFragmentConstants();this._numUsedStreams=this._compiler.get_numUsedStreams();this._numUsedTextures=this._compiler.get_numUsedTextures();this._numUsedVaryings=this._compiler.get_numUsedVaryings();this._numUsedFragmentConstants=this._compiler.get_numUsedFragmentConstants()},
initConstantData:function(){this._vertexConstantData.set_length(4*this._numUsedVertexConstants);this._fragmentConstantData.set_length(4*this._numUsedFragmentConstants);this.initCommonsData();0<=this._uvTransformIndex&&this.initUVTransformData();0<=this._cameraPositionIndex&&this._vertexConstantData.set(this._cameraPositionIndex+3,1);this.updateMethodConstants()},initCompiler:function(a){this._compiler=this.createCompiler(a);this._compiler.set_forceSeperateMVP(this._forceSeparateMVP);this._compiler.set_numPointLights(this._numPointLights);
this._compiler.set_numDirectionalLights(this._numDirectionalLights);this._compiler.set_numLightProbes(this._numLightProbes);this._compiler.set_methodSetup(this._methodSetup);this._compiler.set_diffuseLightSources(this._diffuseLightSources);this._compiler.set_specularLightSources(this._specularLightSources);this._compiler.setTextureSampling(this._smooth,this._repeat,this._mipmap,this._anisotropy);this._compiler.setConstantDataBuffers(this._vertexConstantData,this._fragmentConstantData);this._compiler.set_animateUVs(this._animateUVs);
this._compiler.set_animateUVs2(this._animateUVs2);this._compiler.set_alphaPremultiplied(this._alphaPremultiplied&&this._enableBlending);this._compiler.set_preserveAlpha(this._preserveAlpha&&this._enableBlending);this._compiler.set_enableLightFallOff(this._enableLightFallOff);this._compiler.compile()},createCompiler:function(a){throw new W(new tb);},updateShaderProperties:function(){this._animatableAttributes=this._compiler.get_animatableAttributes();this._animationTargetRegisters=this._compiler.get_animationTargetRegisters();
this._vertexCode=this._compiler.get_vertexCode();this._fragmentLightCode=this._compiler.get_fragmentLightCode();this._framentPostLightCode=this._compiler.get_fragmentPostLightCode();this._shadedTarget=this._compiler.get_shadedTarget();this._usingSpecularMethod=this._compiler.get_usingSpecularMethod();this._usesNormals=this._compiler.get_usesNormals();this._needUVAnimation=this._compiler.get_needUVAnimation();this._UVSource=this._compiler.get_UVSource();this._UVTarget=this._compiler.get_UVTarget();
this.updateRegisterIndices();this.updateUsedOffsets()},updateRegisterIndices:function(){this._uvBufferIndex=this._compiler.get_uvBufferIndex();this._uvTransformIndex=this._compiler.get_uvTransformIndex();this._uvTransformIndex2=this._compiler.get_uvTransformIndex2();this._secondaryUVBufferIndex=this._compiler.get_secondaryUVBufferIndex();this._normalBufferIndex=this._compiler.get_normalBufferIndex();this._tangentBufferIndex=this._compiler.get_tangentBufferIndex();this._lightFragmentConstantIndex=
this._compiler.get_lightFragmentConstantIndex();this._cameraPositionIndex=this._compiler.get_cameraPositionIndex();this._commonsDataIndex=this._compiler.get_commonsDataIndex();this._sceneMatrixIndex=this._compiler.get_sceneMatrixIndex();this._sceneNormalMatrixIndex=this._compiler.get_sceneNormalMatrixIndex();this._probeWeightsIndex=this._compiler.get_probeWeightsIndex();this._lightProbeDiffuseIndices=this._compiler.get_lightProbeDiffuseIndices();this._lightProbeSpecularIndices=this._compiler.get_lightProbeSpecularIndices()},
set_animateUVs:function(a){if(this._animateUVs==a)return a;this._animateUVs=a;this.invalidateShaderProgram();return a},set_mipmap:function(a){if(this._mipmap==a)return a;rb.prototype.set_mipmap.call(this,a);return a},set_anisotropy:function(a){if(this._anisotropy==a)return a;rb.prototype.set_anisotropy.call(this,a);return a},get_diffuseMethod:function(){return this._methodSetup.get_diffuseMethod()},init:function(){this._methodSetup=new Yg;this._methodSetup.addEventListener("ShaderInvalidated",u(this,
this.onShaderInvalidated))},invalidateShaderProgram:function(a){null==a&&(a=!0);var b=this._passes;this._passes=M.toObjectVector(null);null!=this._methodSetup&&this.addPassesFromMethods();if(null==b||this._passes.get_length()!=b.get_length())this._passesDirty=!0;else{for(var c=0,d=this._passes.get_length();c<d;){var e=c++;if(this._passes.get(e)!=b.get(e)){this._passesDirty=!0;return}}rb.prototype.invalidateShaderProgram.call(this,a)}},addPassesFromMethods:function(){null!=this._methodSetup._normalMethod&&
this._methodSetup._normalMethod.get_hasOutput()&&this.addPasses(this._methodSetup._normalMethod.get_passes());null!=this._methodSetup._ambientMethod&&this.addPasses(this._methodSetup._ambientMethod.get_passes());null!=this._methodSetup._shadowMethod&&this.addPasses(this._methodSetup._shadowMethod.get_passes());null!=this._methodSetup._diffuseMethod&&this.addPasses(this._methodSetup._diffuseMethod.get_passes());null!=this._methodSetup._specularMethod&&this.addPasses(this._methodSetup._specularMethod.get_passes())},
addPasses:function(a){if(null!=a)for(var b=0,c=a.get_length();b<c;){var d=b++;a.get(d).set_material(this.get_material());a.get(d).set_lightPicker(this._lightPicker);this._passes.push(a.get(d))}},initUVTransformData:function(){this._vertexConstantData.set(this._uvTransformIndex,1);this._vertexConstantData.set(this._uvTransformIndex+1,0);this._vertexConstantData.set(this._uvTransformIndex+2,0);this._vertexConstantData.set(this._uvTransformIndex+3,0);this._vertexConstantData.set(this._uvTransformIndex+
4,0);this._vertexConstantData.set(this._uvTransformIndex+5,1);this._vertexConstantData.set(this._uvTransformIndex+6,0);this._vertexConstantData.set(this._uvTransformIndex+7,0)},initCommonsData:function(){this._fragmentConstantData.set(this._commonsDataIndex,.5);this._fragmentConstantData.set(this._commonsDataIndex+1,0);this._fragmentConstantData.set(this._commonsDataIndex+2,.00392156862745098);this._fragmentConstantData.set(this._commonsDataIndex+3,1)},cleanUp:function(){this._compiler.dispose();
this._compiler=null},updateMethodConstants:function(){null!=this._methodSetup._normalMethod&&this._methodSetup._normalMethod.initConstants(this._methodSetup._normalMethodVO);null!=this._methodSetup._diffuseMethod&&this._methodSetup._diffuseMethod.initConstants(this._methodSetup._diffuseMethodVO);null!=this._methodSetup._ambientMethod&&this._methodSetup._ambientMethod.initConstants(this._methodSetup._ambientMethodVO);this._usingSpecularMethod&&this._methodSetup._specularMethod.initConstants(this._methodSetup._specularMethodVO);
null!=this._methodSetup._shadowMethod&&this._methodSetup._shadowMethod.initConstants(this._methodSetup._shadowMethodVO)},updateLightConstants:function(){},updateProbes:function(a){},onShaderInvalidated:function(a){this.invalidateShaderProgram()},getVertexCode:function(){return this._vertexCode},getFragmentCode:function(a){return this._fragmentLightCode+a+this._framentPostLightCode},activate:function(a,b){rb.prototype.activate.call(this,a,b);this._usesNormals&&this._methodSetup._normalMethod.activate(this._methodSetup._normalMethodVO,
a);this._methodSetup._ambientMethod.activate(this._methodSetup._ambientMethodVO,a);null!=this._methodSetup._shadowMethod&&this._methodSetup._shadowMethod.activate(this._methodSetup._shadowMethodVO,a);this._methodSetup._diffuseMethod.activate(this._methodSetup._diffuseMethodVO,a);this._usingSpecularMethod&&this._methodSetup._specularMethod.activate(this._methodSetup._specularMethodVO,a)},render:function(a,b,c,d){var e=b._context3D;0<=this._uvBufferIndex&&a.activateUVBuffer(this._uvBufferIndex,b);0<=
this._secondaryUVBufferIndex&&a.activateSecondaryUVBuffer(this._secondaryUVBufferIndex,b);0<=this._normalBufferIndex&&a.activateVertexNormalBuffer(this._normalBufferIndex,b);0<=this._tangentBufferIndex&&a.activateVertexTangentBuffer(this._tangentBufferIndex,b);if(this._animateUVs){var f=a.get_uvTransform();null!=f?(this._vertexConstantData.set(this._uvTransformIndex,f.a),this._vertexConstantData.set(this._uvTransformIndex+1,f.b),this._vertexConstantData.set(this._uvTransformIndex+3,f.tx),this._vertexConstantData.set(this._uvTransformIndex+
4,f.c),this._vertexConstantData.set(this._uvTransformIndex+5,f.d),this._vertexConstantData.set(this._uvTransformIndex+7,f.ty)):(this._vertexConstantData.set(this._uvTransformIndex,1),this._vertexConstantData.set(this._uvTransformIndex+1,0),this._vertexConstantData.set(this._uvTransformIndex+3,0),this._vertexConstantData.set(this._uvTransformIndex+4,0),this._vertexConstantData.set(this._uvTransformIndex+5,1),this._vertexConstantData.set(this._uvTransformIndex+7,0))}this._animateUVs2&&(f=a.get_uvTransform2(),
null!=f?(this._vertexConstantData.set(this._uvTransformIndex2,f.a),this._vertexConstantData.set(this._uvTransformIndex2+1,f.b),this._vertexConstantData.set(this._uvTransformIndex2+3,f.tx),this._vertexConstantData.set(this._uvTransformIndex2+4,f.c),this._vertexConstantData.set(this._uvTransformIndex2+5,f.d),this._vertexConstantData.set(this._uvTransformIndex2+7,f.ty)):(this._vertexConstantData.set(this._uvTransformIndex2,1),this._vertexConstantData.set(this._uvTransformIndex2+1,0),this._vertexConstantData.set(this._uvTransformIndex2+
3,0),this._vertexConstantData.set(this._uvTransformIndex2+4,0),this._vertexConstantData.set(this._uvTransformIndex2+5,1),this._vertexConstantData.set(this._uvTransformIndex2+7,0)));this._ambientLightR=this._ambientLightG=this._ambientLightB=0;this.usesLights()&&this.updateLightConstants();this.usesProbes()&&this.updateProbes(b);0<=this._sceneMatrixIndex?(a.getRenderSceneTransform(c).copyRawDataTo(this._vertexConstantData,this._sceneMatrixIndex,!0),d.copyRawDataTo(this._vertexConstantData,0,!0)):(f=
db.CALCULATION_MATRIX,f.copyFrom(a.getRenderSceneTransform(c)),f.append(d),f.copyRawDataTo(this._vertexConstantData,0,!0));0<=this._sceneNormalMatrixIndex&&a.get_inverseSceneTransform().copyRawDataTo(this._vertexConstantData,this._sceneNormalMatrixIndex,!1);this._usesNormals&&this._methodSetup._normalMethod.setRenderState(this._methodSetup._normalMethodVO,a,b,c);d=this._methodSetup._ambientMethod;d._lightAmbientR=this._ambientLightR;d._lightAmbientG=this._ambientLightG;d._lightAmbientB=this._ambientLightB;
d.setRenderState(this._methodSetup._ambientMethodVO,a,b,c);null!=this._methodSetup._shadowMethod&&this._methodSetup._shadowMethod.setRenderState(this._methodSetup._shadowMethodVO,a,b,c);this._methodSetup._diffuseMethod.setRenderState(this._methodSetup._diffuseMethodVO,a,b,c);this._usingSpecularMethod&&this._methodSetup._specularMethod.setRenderState(this._methodSetup._specularMethodVO,a,b,c);null!=this._methodSetup._colorTransformMethod&&this._methodSetup._colorTransformMethod.setRenderState(this._methodSetup._colorTransformMethodVO,
a,b,c);d=this._methodSetup._methods;f=0;for(var k=d.get_length();f<k;){var m=f++;m=d.get(m);m.method.setRenderState(m.data,a,b,c)}e.setProgramConstantsFromVector(1,0,this._vertexConstantData,this._numUsedVertexConstants);e.setProgramConstantsFromVector(0,0,this._fragmentConstantData,this._numUsedFragmentConstants);a.activateVertexBuffer(0,b);b.drawTriangles(a.getIndexBuffer(b),0,a.get_numTriangles())},usesProbes:function(){return 0<this._numLightProbes?0!=((this._diffuseLightSources|this._specularLightSources)&
2):!1},usesLights:function(){return 0<this._numPointLights||0<this._numDirectionalLights?0!=((this._diffuseLightSources|this._specularLightSources)&1):!1},deactivate:function(a){rb.prototype.deactivate.call(this,a);this._usesNormals&&this._methodSetup._normalMethod.deactivate(this._methodSetup._normalMethodVO,a);this._methodSetup._ambientMethod.deactivate(this._methodSetup._ambientMethodVO,a);null!=this._methodSetup._shadowMethod&&this._methodSetup._shadowMethod.deactivate(this._methodSetup._shadowMethodVO,
a);this._methodSetup._diffuseMethod.deactivate(this._methodSetup._diffuseMethodVO,a);this._usingSpecularMethod&&this._methodSetup._specularMethod.deactivate(this._methodSetup._specularMethodVO,a)},__class__:le});var vk=function(){this._alphaThreshold=0;rb.call(this);for(var a=[1,255,65025,16581375,.00392156862745098,.00392156862745098,.00392156862745098,0,0,0,0,0],b=M.toFloatVector(null),c=0,d=a.length;c<d;){var e=c++;b.set(e,a[e])}this._data=b};g["away3d.materials.passes.DepthMapPass"]=vk;vk.__name__=
"away3d.materials.passes.DepthMapPass";vk.__super__=rb;vk.prototype=v(rb.prototype,{_data:null,_alphaThreshold:null,_alphaMask:null,get_alphaThreshold:function(){return this._alphaThreshold},set_alphaMask:function(a){return this._alphaMask=a},getVertexCode:function(){var a="m44 vt1, vt0, vc0\t\t\nmov op, vt1\t\n";0<this._alphaThreshold?(this._numUsedTextures=1,this._numUsedStreams=2,a+="mov v0, vt1\nmov v1, va1\n"):(this._numUsedTextures=0,this._numUsedStreams=1,a+="mov v0, vt1\n");return a},getFragmentCode:function(a){a=
"div ft2, v0, v0.w\t\t\nmul ft0, fc0, ft2.z\t\nfrc ft0, ft0\t\t\t\nmul ft1, ft0.yzww, fc1\t\n";if(0<this._alphaThreshold){var b=this._repeat?"wrap":"clamp";var c=this._mipmap&&this._alphaMask.get_hasMipMaps();c=this._smooth?c?"linear,miplinear":"linear":c?"nearest,mipnearest":"nearest";switch(this._alphaMask.get_format()){case 3:var d="dxt1,";break;case 4:d="dxt5,";break;default:d=""}a+="tex ft3, v1, fs0 <2d,"+c+","+d+b+">\nsub ft3.w, ft3.w, fc2.x\nkil ft3.w\n"}return a+"sub oc, ft0, ft1\t\t\n"},
render:function(a,b,c,d){0<this._alphaThreshold&&a.activateUVBuffer(1,b);var e=b._context3D,f=db.CALCULATION_MATRIX;f.copyFrom(a.getRenderSceneTransform(c));f.append(d);e.setProgramConstantsFromMatrix(1,0,f,!0);a.activateVertexBuffer(0,b);b.drawTriangles(a.getIndexBuffer(b),0,a.get_numTriangles())},activate:function(a,b){var c=a._context3D;rb.prototype.activate.call(this,a,b);0<this._alphaThreshold?(c.setTextureAt(0,this._alphaMask.getTextureForStage3D(a)),c.setProgramConstantsFromVector(0,0,this._data,
3)):c.setProgramConstantsFromVector(0,0,this._data,2)},__class__:vk});var wk=function(){rb.call(this);for(var a=[1,255,65025,16581375,.00392156862745098,.00392156862745098,.00392156862745098,0,0,0,0,0],b=M.toFloatVector(null),c=0,d=a.length;c<d;){var e=c++;b.set(e,a[e])}this._fragmentData=b;this._vertexData=M.toFloatVector(null,4,!0);this._vertexData.set(3,1);this._numUsedVertexConstants=9};g["away3d.materials.passes.DistanceMapPass"]=wk;wk.__name__="away3d.materials.passes.DistanceMapPass";wk.__super__=
rb;wk.prototype=v(rb.prototype,{_fragmentData:null,_vertexData:null,_alphaThreshold:null,_alphaMask:null,set_alphaMask:function(a){return this._alphaMask=a},getVertexCode:function(){var a="m44 op, vt0, vc0\t\t\nm44 vt1, vt0, vc5\t\t\nsub v0, vt1, vc9\t\t\n";0<this._alphaThreshold?(a+="mov v1, va1\n",this._numUsedTextures=1,this._numUsedStreams=2):(this._numUsedTextures=0,this._numUsedStreams=1);return a},getFragmentCode:function(a){a=this._repeat?"wrap":"clamp";var b=this._smooth?this._mipmap?"linear,miplinear":
"linear":this._mipmap?"nearest,mipnearest":"nearest";var c="dp3 ft2.z, v0.xyz, v0.xyz\t\nmul ft0, fc0, ft2.z\t\nfrc ft0, ft0\t\t\t\nmul ft1, ft0.yzww, fc1\t\n";if(0<this._alphaThreshold){switch(this._alphaMask.get_format()){case 3:var d="dxt1,";break;case 4:d="dxt5,";break;default:d=""}c+="tex ft3, v1, fs0 <2d,"+b+","+d+a+">\nsub ft3.w, ft3.w, fc2.x\nkil ft3.w\n"}return c+"sub oc, ft0, ft1\t\t\n"},render:function(a,b,c,d){var e=b._context3D,f=c.get_scenePosition();this._vertexData.set(0,f.x);this._vertexData.set(1,
f.y);this._vertexData.set(2,f.z);this._vertexData.set(3,1);c=a.getRenderSceneTransform(c);e.setProgramConstantsFromMatrix(1,5,c,!0);e.setProgramConstantsFromVector(1,9,this._vertexData,1);0<this._alphaThreshold&&a.activateUVBuffer(1,b);f=db.CALCULATION_MATRIX;f.copyFrom(c);f.append(d);e.setProgramConstantsFromMatrix(1,0,f,!0);a.activateVertexBuffer(0,b);b.drawTriangles(a.getIndexBuffer(b),0,a.get_numTriangles())},activate:function(a,b){var c=a._context3D;rb.prototype.activate.call(this,a,b);b=b.get_lens().get_far();
b=1/(2*b*b);this._fragmentData.set(0,b);this._fragmentData.set(1,255*b);this._fragmentData.set(2,65025*b);this._fragmentData.set(3,16581375*b);0<this._alphaThreshold?(c.setTextureAt(0,this._alphaMask.getTextureForStage3D(a)),c.setProgramConstantsFromVector(0,0,this._fragmentData,3)):c.setProgramConstantsFromVector(0,0,this._fragmentData,2)},__class__:wk});var jf=function(a){this._constants=M.toFloatVector(null,4,!0);this._calcMatrix=new vc;this._thickness=a;this._constants.set(1,.00392156862745098);
rb.call(this)};g["away3d.materials.passes.SegmentPass"]=jf;jf.__name__="away3d.materials.passes.SegmentPass";jf.__super__=rb;jf.prototype=v(rb.prototype,{_constants:null,_calcMatrix:null,_thickness:null,getVertexCode:function(){return"m44 vt0, va0, vc8\t\t\t\nm44 vt1, va1, vc8\t\t\t\nsub vt2, vt1, vt0 \t\t\t\nslt vt5.x, vt0.z, vc7.z\t\t\t\nsub vt5.y, vc5.x, vt5.x\t\t\t\nadd vt4.x, vt0.z, vc7.z\t\t\t\nsub vt4.y, vt0.z, vt1.z\t\t\t\nseq vt4.z, vt4.y vc6.x\t\t\t\nadd vt4.y, vt4.y, vt4.z\t\t\t\ndiv vt4.z, vt4.x, vt4.y\t\t\t\nmul vt4.xyz, vt4.zzz, vt2.xyz\t\nadd vt3.xyz, vt0.xyz, vt4.xyz\t\nmov vt3.w, vc5.x\t\t\t\nmul vt0, vt0, vt5.yyyy\t\t\t\nmul vt3, vt3, vt5.xxxx\t\t\t\nadd vt0, vt0, vt3\t\t\t\t\nsub vt2, vt1, vt0 \t\t\t\nnrm vt2.xyz, vt2.xyz\t\t\t\nnrm vt5.xyz, vt0.xyz\t\t\t\nmov vt5.w, vc5.x\t\t\t\t\ncrs vt3.xyz, vt2, vt5\t\t\t\nnrm vt3.xyz, vt3.xyz\t\t\t\nmul vt3.xyz, vt3.xyz, va2.xxx\t\nmov vt3.w, vc5.x\t\t\t\ndp3 vt4.x, vt0, vc6\t\t\t\nmul vt4.x, vt4.x, vc7.x\t\t\t\nmul vt3.xyz, vt3.xyz, vt4.xxx\t\nadd vt0.xyz, vt0.xyz, vt3.xyz\t\nm44 op, vt0, vc0\t\t\t\nmov v0, va3\t\t\t\t\n"},
getFragmentCode:function(a){return"mov oc, v0\n"},render:function(a,b,c,d){d=b._context3D;this._calcMatrix.copyFrom(a.get_sourceEntity().get_sceneTransform());this._calcMatrix.append(c.get_inverseSceneTransform());c=Ka.__cast(a,Oc).get_subSetCount();if(Ka.__cast(a,Oc).get_hasData())for(var e=0;e<c;){var f=e++;a.activateVertexBuffer(f,b);d.setProgramConstantsFromMatrix(1,8,this._calcMatrix,!0);b.drawTriangles(a.getIndexBuffer(b),0,a.get_numTriangles())}},activate:function(a,b){var c=a._context3D;rb.prototype.activate.call(this,
a,b);null!=a.get_scissorRect()?this._constants.set(0,this._thickness/Math.min(a.get_scissorRect().width,a.get_scissorRect().height)):this._constants.set(0,this._thickness/Math.min(a.get_width(),a.get_height()));this._constants.set(2,b.get_lens().get_near());c.setProgramConstantsFromVector(1,5,jf.ONE_VECTOR);c.setProgramConstantsFromVector(1,6,jf.FRONT_VECTOR);c.setProgramConstantsFromVector(1,7,this._constants);null==a.get_renderTarget()?c.setProgramConstantsFromMatrix(1,0,b.get_lens().get_matrix(),
!0):(this._calcMatrix.copyFrom(b.get_lens().get_matrix()),a=Wd.getInstance(a),this._calcMatrix.appendScale(a.get_textureRatioX(),a.get_textureRatioY(),1),c.setProgramConstantsFromMatrix(1,0,this._calcMatrix,!0))},deactivate:function(a){a=a._context3D;a.setVertexBufferAt(0,null);a.setVertexBufferAt(1,null);a.setVertexBufferAt(2,null);a.setVertexBufferAt(3,null)},__class__:jf});var xk=function(a){this._includeCasters=!0;le.call(this,a);this._needFragmentAnimation=!0};g["away3d.materials.passes.SuperShaderPass"]=
xk;xk.__name__="away3d.materials.passes.SuperShaderPass";xk.__super__=le;xk.prototype=v(le.prototype,{_includeCasters:null,_ignoreLights:null,createCompiler:function(a){return new yk(a)},get_colorTransform:function(){return null!=this._methodSetup.get_colorTransformMethod()?this._methodSetup._colorTransformMethod.get_colorTransform():null},updateLights:function(){null==this._lightPicker||this._ignoreLights?this._numLightProbes=this._numDirectionalLights=this._numPointLights=0:(this._numPointLights=
this._lightPicker.get_numPointLights(),this._numDirectionalLights=this._lightPicker.get_numDirectionalLights(),this._numLightProbes=this._lightPicker.get_numLightProbes(),this._includeCasters&&(this._numPointLights+=this._lightPicker.get_numCastingPointLights(),this._numDirectionalLights+=this._lightPicker.get_numCastingDirectionalLights()));this.invalidateShaderProgram()},activate:function(a,b){le.prototype.activate.call(this,a,b);null!=this._methodSetup._colorTransformMethod&&this._methodSetup._colorTransformMethod.activate(this._methodSetup._colorTransformMethodVO,
a);for(var c=this._methodSetup._methods,d=0,e=c.get_length();d<e;){var f=d++;f=c.get(f);f.method.activate(f.data,a)}0<=this._cameraPositionIndex&&(a=b.get_scenePosition(),this._vertexConstantData.set(this._cameraPositionIndex,a.x),this._vertexConstantData.set(this._cameraPositionIndex+1,a.y),this._vertexConstantData.set(this._cameraPositionIndex+2,a.z))},deactivate:function(a){le.prototype.deactivate.call(this,a);null!=this._methodSetup._colorTransformMethod&&this._methodSetup._colorTransformMethod.deactivate(this._methodSetup._colorTransformMethodVO,
a);for(var b,c=this._methodSetup._methods,d=0,e=c.get_length();d<e;)b=d++,b=c.get(b),b.method.deactivate(b.data,a)},addPassesFromMethods:function(){le.prototype.addPassesFromMethods.call(this);null!=this._methodSetup._colorTransformMethod&&this.addPasses(this._methodSetup._colorTransformMethod.get_passes());for(var a=this._methodSetup._methods,b=0,c=a.get_length();b<c;){var d=b++;this.addPasses(a.get(d).method.get_passes())}},usesProbesForSpecular:function(){return 0<this._numLightProbes?0!=(this._specularLightSources&
2):!1},usesProbesForDiffuse:function(){return 0<this._numLightProbes?0!=(this._diffuseLightSources&2):!1},updateMethodConstants:function(){le.prototype.updateMethodConstants.call(this);null!=this._methodSetup._colorTransformMethod&&this._methodSetup._colorTransformMethod.initConstants(this._methodSetup._colorTransformMethodVO);for(var a=this._methodSetup._methods,b=0,c=a.get_length();b<c;){var d=b++;a.get(d).method.initConstants(a.get(d).data)}},updateLightConstants:function(){var a=0;for(var b=this._includeCasters?
2:1,c=this._lightFragmentConstantIndex,d=0;d<b;){var e=0!=d++?this._lightPicker.get_castingDirectionalLights():this._lightPicker.get_directionalLights();var f=e.get_length();a+=f;for(var k=0,m=f;k<m;){f=k++;var h=e.get(f);f=h.get_sceneDirection();this._ambientLightR+=h._ambientR;this._ambientLightG+=h._ambientG;this._ambientLightB+=h._ambientB;this._fragmentConstantData.set(c++,-f.x);this._fragmentConstantData.set(c++,-f.y);this._fragmentConstantData.set(c++,-f.z);this._fragmentConstantData.set(c++,
1);this._fragmentConstantData.set(c++,h._diffuseR);this._fragmentConstantData.set(c++,h._diffuseG);this._fragmentConstantData.set(c++,h._diffuseB);this._fragmentConstantData.set(c++,1);this._fragmentConstantData.set(c++,h._specularR);this._fragmentConstantData.set(c++,h._specularG);this._fragmentConstantData.set(c++,h._specularB);this._fragmentConstantData.set(c++,1)}}if(this._numDirectionalLights>a)for(a=c+12*(this._numDirectionalLights-a);Xa.gt(a,c);)this._fragmentConstantData.set(c++,0);for(d=
a=0;d<b;)for(e=0!=d++?this._lightPicker.get_castingPointLights():this._lightPicker.get_pointLights(),f=e.get_length(),k=0,m=f;k<m;)f=k++,h=e.get(f),f=h.get_scenePosition(),this._ambientLightR+=h._ambientR,this._ambientLightG+=h._ambientG,this._ambientLightB+=h._ambientB,this._fragmentConstantData.set(c++,f.x),this._fragmentConstantData.set(c++,f.y),this._fragmentConstantData.set(c++,f.z),this._fragmentConstantData.set(c++,1),this._fragmentConstantData.set(c++,h._diffuseR),this._fragmentConstantData.set(c++,
h._diffuseG),this._fragmentConstantData.set(c++,h._diffuseB),this._fragmentConstantData.set(c++,h._radius*h._radius),this._fragmentConstantData.set(c++,h._specularR),this._fragmentConstantData.set(c++,h._specularG),this._fragmentConstantData.set(c++,h._specularB),this._fragmentConstantData.set(c++,h._fallOffFactor);if(this._numPointLights>a)for(a=c+12*(a-this._numPointLights);Xa.gt(a,c);)this._fragmentConstantData.set(c,0),++c},updateProbes:function(a){var b=this._lightPicker.get_lightProbes(),c=
this._lightPicker.get_lightProbeWeights(),d=b.get_length(),e=this.usesProbesForDiffuse(),f=null!=this._methodSetup._specularMethod&&this.usesProbesForSpecular(),k=a._context3D;if(e||f){for(var m=0;m<d;){var h=m++;var n=b.get(h);e&&k.setTextureAt(this._lightProbeDiffuseIndices.get(h),n.get_diffuseMap().getTextureForStage3D(a));f&&k.setTextureAt(this._lightProbeSpecularIndices.get(h),n.get_specularMap().getTextureForStage3D(a))}this._fragmentConstantData.set(this._probeWeightsIndex,c.get(0));this._fragmentConstantData.set(this._probeWeightsIndex+
1,c.get(1));this._fragmentConstantData.set(this._probeWeightsIndex+2,c.get(2));this._fragmentConstantData.set(this._probeWeightsIndex+3,c.get(3))}},__class__:xk});var Fa=function(){};g["away3d.materials.utils.DefaultMaterialManager"]=Fa;Fa.__name__="away3d.materials.utils.DefaultMaterialManager";Fa.getDefaultMaterial=function(a){null==Fa._defaultTexture&&Fa.createDefaultTexture();null==Fa._defaultMaterial&&Fa.createDefaultMaterial();return Fa._defaultMaterial};Fa.createDefaultTexture=function(){Fa._defaultTextureBitmapData=
new Mb(8,8,!1,0);Fa._defaultTextureBitmapData.setPixel(0,1,16777215);Fa._defaultTextureBitmapData.setPixel(0,3,16777215);Fa._defaultTextureBitmapData.setPixel(0,5,16777215);Fa._defaultTextureBitmapData.setPixel(0,7,16777215);Fa._defaultTextureBitmapData.setPixel(1,0,16777215);Fa._defaultTextureBitmapData.setPixel(1,2,16777215);Fa._defaultTextureBitmapData.setPixel(1,4,16777215);Fa._defaultTextureBitmapData.setPixel(1,6,16777215);Fa._defaultTextureBitmapData.setPixel(2,1,16777215);Fa._defaultTextureBitmapData.setPixel(2,
3,16777215);Fa._defaultTextureBitmapData.setPixel(2,5,16777215);Fa._defaultTextureBitmapData.setPixel(2,7,16777215);Fa._defaultTextureBitmapData.setPixel(3,0,16777215);Fa._defaultTextureBitmapData.setPixel(3,2,16777215);Fa._defaultTextureBitmapData.setPixel(3,4,16777215);Fa._defaultTextureBitmapData.setPixel(3,6,16777215);Fa._defaultTextureBitmapData.setPixel(4,1,16777215);Fa._defaultTextureBitmapData.setPixel(4,3,16777215);Fa._defaultTextureBitmapData.setPixel(4,5,16777215);Fa._defaultTextureBitmapData.setPixel(4,
7,16777215);Fa._defaultTextureBitmapData.setPixel(5,0,16777215);Fa._defaultTextureBitmapData.setPixel(5,2,16777215);Fa._defaultTextureBitmapData.setPixel(5,4,16777215);Fa._defaultTextureBitmapData.setPixel(5,6,16777215);Fa._defaultTextureBitmapData.setPixel(6,1,16777215);Fa._defaultTextureBitmapData.setPixel(6,3,16777215);Fa._defaultTextureBitmapData.setPixel(6,5,16777215);Fa._defaultTextureBitmapData.setPixel(6,7,16777215);Fa._defaultTextureBitmapData.setPixel(7,0,16777215);Fa._defaultTextureBitmapData.setPixel(7,
2,16777215);Fa._defaultTextureBitmapData.setPixel(7,4,16777215);Fa._defaultTextureBitmapData.setPixel(7,6,16777215);Fa._defaultTexture=new Pc(Fa._defaultTextureBitmapData);Fa._defaultTexture.set_name("defaultTexture")};Fa.createDefaultMaterial=function(){Fa._defaultMaterial=new Bf(Fa._defaultTexture);Fa._defaultMaterial.set_mipmap(!1);Fa._defaultMaterial.set_smooth(!1);Fa._defaultMaterial.set_name("defaultMaterial")};var Qc=function(){};g["away3d.materials.utils.MipmapGenerator"]=Qc;Qc.__name__="away3d.materials.utils.MipmapGenerator";
Qc.generateMipMaps=function(a,b,c,d,e){null==e&&(e=-1);null==d&&(d=!1);var f=a.width,k=a.height,m=0,h=null!=c;null==c&&(c=new Mb(f,k,d));Qc._rect.width=Xa.toFloat(f);for(Qc._rect.height=Xa.toFloat(k);Xa.gte(f,1)||Xa.gte(k,1);){d&&c.fillRect(Qc._rect,0);Qc._matrix.a=Qc._rect.width/a.width;Qc._matrix.d=Qc._rect.height/a.height;c.draw(a,Qc._matrix,null,null,null,!0);b instanceof Nf?Ka.__cast(b,Nf).uploadFromBitmapData(c,m++):Ka.__cast(b,$g).uploadFromBitmapData(c,e,m++);f>>>=1;k>>>=1;var n=Xa.gt(f,1)?
Xa.toFloat(f):1;Qc._rect.width=n;n=Xa.gt(k,1)?Xa.toFloat(k):1;Qc._rect.height=n}h||c.dispose()};var wc=function(){this._geomDirty=this._uvDirty=!0;Le.call(this);this._subGeometry=new tj;this._subGeometry.set_autoGenerateDummyUVs(!1);this.addSubGeometry(this._subGeometry)};g["away3d.primitives.PrimitiveBase"]=wc;wc.__name__="away3d.primitives.PrimitiveBase";wc.__super__=Le;wc.prototype=v(Le.prototype,{_geomDirty:null,_uvDirty:null,_subGeometry:null,get_subGeometries:function(){this._geomDirty&&this.updateGeometry();
this._uvDirty&&this.updateUVs();return Le.prototype.get_subGeometries.call(this)},buildGeometry:function(a){throw new W(new tb);},buildUVs:function(a){throw new W(new tb);},invalidateGeometry:function(){this._geomDirty=!0},invalidateUVs:function(){this._uvDirty=!0},updateGeometry:function(){this.buildGeometry(this._subGeometry);this._geomDirty=!1},updateUVs:function(){this.buildUVs(this._subGeometry);this._uvDirty=!1},validate:function(){this._geomDirty&&this.updateGeometry();this._uvDirty&&this.updateUVs()},
__class__:wc});var Ud=function(a,b,c,d,e){null==e&&(e=!0);null==d&&(d=15);null==c&&(c=16);null==b&&(b=100);null==a&&(a=50);wc.call(this);this._radius=a;this._height=b;this._segmentsW=c;this._segmentsH=0==d%2?d+1:d;this._yUp=e};g["away3d.primitives.CapsuleGeometry"]=Ud;Ud.__name__="away3d.primitives.CapsuleGeometry";Ud.__super__=wc;Ud.prototype=v(wc.prototype,{_radius:null,_height:null,_segmentsW:null,_segmentsH:null,_yUp:null,buildGeometry:function(a){var b=0;var c=(this._segmentsH+1)*(this._segmentsW+
1);var d=a.get_vertexStride();var e=d-9,f=0;c==a.get_numVertices()?(c=a.get_vertexData(),d=a.get_indexData(),null==d&&(d=M.toIntVector(null,(this._segmentsH-1)*this._segmentsW*6,!0))):(c=M.toFloatVector(null,c*d,!0),d=M.toIntVector(null,(this._segmentsH-1)*this._segmentsW*6,!0),this.invalidateUVs());for(var k=0,m=this._segmentsH+1;k<m;){var h=k++;var n=Math.PI*h/this._segmentsH;var K=-this._radius*Math.cos(n),l=this._radius*Math.sin(n);n=f;for(var p=0,g=this._segmentsW+1;p<g;){var H=p++;var C=2*Math.PI*
H/this._segmentsW;var y=l*Math.cos(C),I=h>this._segmentsH/2?this._height/2:-this._height/2,r=l*Math.sin(C),t=1/Math.sqrt(y*y+r*r+K*K),z=Math.sqrt(r*r+y*y);if(this._yUp){var q=0;var oa=.007<z?y/z:0;C=-K;var u=r}else q=.007<z?y/z:0,oa=0,C=r,u=K;H==this._segmentsW?(c.set(f++,c.get(n)),c.set(f++,c.get(n+1)),c.set(f++,c.get(n+2)),c.set(f++,.5*(c.get(n+3)+y*t)),c.set(f++,.5*(c.get(n+4)+C*t)),c.set(f++,.5*(c.get(n+5)+u*t)),c.set(f++,.5*(c.get(n+6)+(.007<z?-r/z:1))),c.set(f++,.5*(c.get(n+7)+q)),c.set(f++,
.5*(c.get(n+8)+oa))):(c.set(f++,y),c.set(f++,this._yUp?C-I:C),c.set(f++,this._yUp?u:u+I),c.set(f++,y*t),c.set(f++,C*t),c.set(f++,u*t),c.set(f++,.007<z?-r/z:1),c.set(f++,q),c.set(f++,oa));0<H&&0<h&&(y=(this._segmentsW+1)*h+H,I=(this._segmentsW+1)*h+H-1,C=(this._segmentsW+1)*(h-1)+H-1,H=(this._segmentsW+1)*(h-1)+H,h==this._segmentsH?(c.set(f-9,c.get(n)),c.set(f-8,c.get(n+1)),c.set(f-7,c.get(n+2)),d.set(b++,y),d.set(b++,C),d.set(b++,H)):1==h?(d.set(b++,y),d.set(b++,I),d.set(b++,C)):(d.set(b++,y),d.set(b++,
I),d.set(b++,C),d.set(b++,y),d.set(b++,C),d.set(b++,H)));f+=e}}a.updateData(c);a.updateIndexData(d)},buildUVs:function(a){var b=a.get_UVStride();var c=(this._segmentsH+1)*(this._segmentsW+1)*b;b-=2;null!=a.get_UVData()&&c==a.get_UVData().get_length()?c=a.get_UVData():(c=M.toFloatVector(null,c,!0),this.invalidateGeometry());for(var d=a.get_UVOffset(),e=0,f=this._segmentsH+1;e<f;)for(var k=e++,m=0,h=this._segmentsW+1;m<h;){var n=m++;c.set(d++,n/this._segmentsW*a.get_scaleU());c.set(d++,k/this._segmentsH*
a.get_scaleV());d+=b}a.updateData(c)},get_radius:function(){return this._radius},get_height:function(){return this._height},__class__:Ud});var Bd=function(a,b,c,d,e,f,k,m,h){null==h&&(h=!0);null==m&&(m=!0);null==k&&(k=!0);null==f&&(f=!0);null==e&&(e=1);null==d&&(d=16);null==c&&(c=100);null==b&&(b=50);null==a&&(a=50);wc.call(this);this._topRadius=a;this._bottomRadius=b;this._height=c;this._segmentsW=d;this._segmentsH=e;this._topClosed=f;this._bottomClosed=k;this._surfaceClosed=m;this._yUp=h};g["away3d.primitives.CylinderGeometry"]=
Bd;Bd.__name__="away3d.primitives.CylinderGeometry";Bd.__super__=wc;Bd.prototype=v(wc.prototype,{_topRadius:null,_bottomRadius:null,_height:null,_segmentsW:null,_segmentsH:null,_topClosed:null,_bottomClosed:null,_surfaceClosed:null,_yUp:null,_rawData:null,_rawIndices:null,_nextVertexIndex:null,_currentIndex:null,_currentTriangleIndex:null,_numVertices:null,_stride:null,_vertexOffset:null,addVertex:function(a,b,c,d,e,f,k,m,h){var n=this._vertexOffset+this._nextVertexIndex*this._stride;this._rawData.set(n++,
a);this._rawData.set(n++,b);this._rawData.set(n++,c);this._rawData.set(n++,d);this._rawData.set(n++,e);this._rawData.set(n++,f);this._rawData.set(n++,k);this._rawData.set(n++,m);this._rawData.set(n++,h);this._nextVertexIndex++},addTriangleClockWise:function(a,b,c){this._rawIndices.set(this._currentIndex++,a);this._rawIndices.set(this._currentIndex++,b);this._rawIndices.set(this._currentIndex++,c);this._currentTriangleIndex++},buildGeometry:function(a){var b,c=0;var d=0;this._stride=a.get_vertexStride();
this._vertexOffset=a.get_vertexOffset();this._currentTriangleIndex=this._currentIndex=this._nextVertexIndex=this._numVertices=0;this._surfaceClosed&&(this._numVertices+=(this._segmentsH+1)*(this._segmentsW+1),c+=this._segmentsH*this._segmentsW*2);this._topClosed&&(this._numVertices+=2*(this._segmentsW+1),c+=this._segmentsW);this._bottomClosed&&(this._numVertices+=2*(this._segmentsW+1),c+=this._segmentsW);this._numVertices==a.get_numVertices()?(this._rawData=a.get_vertexData(),this._rawIndices=a.get_indexData(),
null==this._rawIndices&&(this._rawIndices=M.toIntVector(null,3*c,!0))):(this._rawData=M.toFloatVector(null,this._numVertices*this._stride,!0),this._rawIndices=M.toIntVector(null,3*c,!0));c=2*Math.PI/this._segmentsW;if(this._topClosed&&0<this._topRadius){var e=-.5*this._height;var f=0;for(b=this._segmentsW+1;f<b;){var k=f++;if(this._yUp){var m=1;var h=0;var n=-e;var K=0}else m=0,h=-1,n=0,K=e;this.addVertex(0,n,K,0,m,h,1,0,0);n=k*c;var l=this._topRadius*Math.cos(n);K=this._topRadius*Math.sin(n);this._yUp?
n=-e:(n=K,K=e);k==this._segmentsW?this.addVertex(this._rawData.get(d+this._stride),this._rawData.get(d+this._stride+1),this._rawData.get(d+this._stride+2),0,m,h,1,0,0):this.addVertex(l,n,K,0,m,h,1,0,0);0<k&&this.addTriangleClockWise(this._nextVertexIndex-1,this._nextVertexIndex-3,this._nextVertexIndex-2)}}if(this._bottomClosed&&0<this._bottomRadius)for(e=.5*this._height,d=this._vertexOffset+this._nextVertexIndex*this._stride,f=0,b=this._segmentsW+1;f<b;)k=f++,this._yUp?(m=-1,h=0,n=-e,K=0):(m=0,h=
1,n=0,K=e),this.addVertex(0,n,K,0,m,h,1,0,0),n=k*c,l=this._bottomRadius*Math.cos(n),K=this._bottomRadius*Math.sin(n),this._yUp?n=-e:(n=K,K=e),k==this._segmentsW?this.addVertex(l,this._rawData.get(d+1),this._rawData.get(d+2),0,m,h,1,0,0):this.addVertex(l,n,K,0,m,h,1,0,0),0<k&&this.addTriangleClockWise(this._nextVertexIndex-2,this._nextVertexIndex-3,this._nextVertexIndex-1);d=this._bottomRadius-this._topRadius;f=d/this._height;k=0==f?1:this._height/d;if(this._surfaceClosed)for(var p,g,H,C,y=0,I=this._segmentsH+
1;y<I;){var r=y++;b=this._topRadius-r/this._segmentsH*(this._topRadius-this._bottomRadius);e=-(this._height/2)+r/this._segmentsH*this._height;d=this._vertexOffset+this._nextVertexIndex*this._stride;for(var t=0,z=this._segmentsW+1;t<z;){var q=t++;n=q*c;l=b*Math.cos(n);K=b*Math.sin(n);p=k*Math.cos(n);g=k*Math.sin(n);this._yUp?(m=0,h=-p,n=-e,H=f,C=g):(m=-p,h=0,n=K,K=e,H=g,C=f);q==this._segmentsW?this.addVertex(this._rawData.get(d),this._rawData.get(d+1),this._rawData.get(d+2),p,f,g,g,m,h):this.addVertex(l,
n,K,p,H,C,-g,m,h);0<q&&0<r&&(l=this._nextVertexIndex-1,m=this._nextVertexIndex-2,h=m-this._segmentsW-1,n=l-this._segmentsW-1,this.addTriangleClockWise(l,m,h),this.addTriangleClockWise(l,h,n))}}a.updateData(this._rawData);a.updateIndexData(this._rawIndices)},buildUVs:function(a){var b=a.get_UVStride(),c=b-2;b*=this._numVertices;null!=a.get_UVData()&&b==a.get_UVData().get_length()?b=a.get_UVData():(b=M.toFloatVector(null,b,!0),this.invalidateGeometry());var d=2*Math.PI/this._segmentsW,e=a.get_UVOffset();
if(this._topClosed)for(var f=0,k=this._segmentsW+1;f<k;){var m=f++*d;var h=.5+.5*-Math.cos(m);m=.5+.5*Math.sin(m);b.set(e++,.5*a.get_scaleU());b.set(e++,.5*a.get_scaleV());e+=c;b.set(e++,h*a.get_scaleU());b.set(e++,m*a.get_scaleV());e+=c}if(this._bottomClosed)for(f=0,k=this._segmentsW+1;f<k;)m=f++*d,h=.5+.5*Math.cos(m),m=.5+.5*Math.sin(m),b.set(e++,.5*a.get_scaleU()),b.set(e++,.5*a.get_scaleV()),e+=c,b.set(e++,h*a.get_scaleU()),b.set(e++,m*a.get_scaleV()),e+=c;if(this._surfaceClosed)for(h=0,d=this._segmentsH+
1;h<d;)for(m=h++,f=0,k=this._segmentsW+1;f<k;){var n=f++;b.set(e++,n/this._segmentsW*a.get_scaleU());b.set(e++,m/this._segmentsH*a.get_scaleV());e+=c}a.updateData(b)},get_topRadius:function(){return this._topRadius},get_height:function(){return this._height},__class__:Bd});var gl=function(a,b,c,d,e,f){null==f&&(f=!0);null==e&&(e=!0);null==d&&(d=1);null==c&&(c=16);null==b&&(b=100);null==a&&(a=50);Bd.call(this,0,a,b,c,d,!1,e,!0,f)};g["away3d.primitives.ConeGeometry"]=gl;gl.__name__="away3d.primitives.ConeGeometry";
gl.__super__=Bd;gl.prototype=v(Bd.prototype,{__class__:gl});var Td=function(a,b,c,d,e,f,k){null==k&&(k=!0);null==f&&(f=1);null==e&&(e=1);null==d&&(d=1);null==c&&(c=100);null==b&&(b=100);null==a&&(a=100);wc.call(this);this._width=a;this._height=b;this._depth=c;this._segmentsW=d;this._segmentsH=e;this._segmentsD=f;this._tile6=k};g["away3d.primitives.CubeGeometry"]=Td;Td.__name__="away3d.primitives.CubeGeometry";Td.__super__=wc;Td.prototype=v(wc.prototype,{_width:null,_height:null,_depth:null,_tile6:null,
_segmentsW:null,_segmentsH:null,_segmentsD:null,get_width:function(){return this._width},get_height:function(){return this._height},get_depth:function(){return this._depth},buildGeometry:function(a){var b=0;var c=2*((this._segmentsW+1)*(this._segmentsH+1)+(this._segmentsW+1)*(this._segmentsD+1)+(this._segmentsH+1)*(this._segmentsD+1));var d=a.get_vertexStride();var e=d-9;c==a.get_numVertices()?(c=a.get_vertexData(),d=a.get_indexData(),null==d&&(d=M.toIntVector(null,12*(this._segmentsW*this._segmentsH+
this._segmentsW*this._segmentsD+this._segmentsH*this._segmentsD),!0))):(c=M.toFloatVector(null,c*d,!0),d=M.toIntVector(null,12*(this._segmentsW*this._segmentsH+this._segmentsW*this._segmentsD+this._segmentsH*this._segmentsD),!0),this.invalidateUVs());var f=a.get_vertexOffset();var k=0;var m=this._width/2;var h=this._height/2;var n=this._depth/2;var K=this._width/this._segmentsW;var l=this._height/this._segmentsH;var p=this._depth/this._segmentsD;for(var g=0,H=this._segmentsW+1;g<H;){var C=g++;var y=
-m+C*K;for(var I=0,r=this._segmentsH+1;I<r;){var t=I++;c.set(f++,y);c.set(f++,-h+t*l);c.set(f++,-n);c.set(f++,0);c.set(f++,0);c.set(f++,-1);c.set(f++,1);c.set(f++,0);c.set(f++,0);f+=e;c.set(f++,y);c.set(f++,-h+t*l);c.set(f++,n);c.set(f++,0);c.set(f++,0);c.set(f++,1);c.set(f++,-1);c.set(f++,0);c.set(f++,0);f+=e;if(0<C&&0<t){var z=2*((C-1)*(this._segmentsH+1)+(t-1))|0;t=2*(C*(this._segmentsH+1)+(t-1))|0;var q=z+2;var oa=t+2;d.set(k++,z);d.set(k++,q);d.set(k++,oa);d.set(k++,z);d.set(k++,oa);d.set(k++,
t);d.set(k++,t+1);d.set(k++,oa+1);d.set(k++,q+1);d.set(k++,t+1);d.set(k++,q+1);d.set(k++,z+1)}}}b+=2*(this._segmentsW+1)*(this._segmentsH+1)|0;g=0;for(H=this._segmentsW+1;g<H;)for(C=g++,y=-m+C*K,I=0,r=this._segmentsD+1;I<r;)t=I++,c.set(f++,y),c.set(f++,h),c.set(f++,-n+t*p),c.set(f++,0),c.set(f++,1),c.set(f++,0),c.set(f++,1),c.set(f++,0),c.set(f++,0),f+=e,c.set(f++,y),c.set(f++,-h),c.set(f++,-n+t*p),c.set(f++,0),c.set(f++,-1),c.set(f++,0),c.set(f++,1),c.set(f++,0),c.set(f++,0),f+=e,0<C&&0<t&&(z=b+
2*((C-1)*(this._segmentsD+1)+(t-1))|0,t=b+2*(C*(this._segmentsD+1)+(t-1))|0,q=z+2,oa=t+2,d.set(k++,z),d.set(k++,q),d.set(k++,oa),d.set(k++,z),d.set(k++,oa),d.set(k++,t),d.set(k++,t+1),d.set(k++,oa+1),d.set(k++,q+1),d.set(k++,t+1),d.set(k++,q+1),d.set(k++,z+1));b+=2*(this._segmentsW+1)*(this._segmentsD+1)|0;K=0;for(g=this._segmentsD+1;K<g;)for(H=K++,y=n-H*p,C=0,I=this._segmentsH+1;C<I;)t=C++,c.set(f++,-m),c.set(f++,-h+t*l),c.set(f++,y),c.set(f++,-1),c.set(f++,0),c.set(f++,0),c.set(f++,0),c.set(f++,
0),c.set(f++,-1),f+=e,c.set(f++,m),c.set(f++,-h+t*l),c.set(f++,y),c.set(f++,1),c.set(f++,0),c.set(f++,0),c.set(f++,0),c.set(f++,0),c.set(f++,1),f+=e,0<H&&0<t&&(z=b+2*((H-1)*(this._segmentsH+1)+(t-1))|0,t=b+2*(H*(this._segmentsH+1)+(t-1))|0,q=z+2,oa=t+2,d.set(k++,z),d.set(k++,q),d.set(k++,oa),d.set(k++,z),d.set(k++,oa),d.set(k++,t),d.set(k++,t+1),d.set(k++,oa+1),d.set(k++,q+1),d.set(k++,t+1),d.set(k++,q+1),d.set(k++,z+1));a.updateData(c);a.updateIndexData(d)},buildUVs:function(a){var b,c,d=a.get_UVStride();
var e=2*((this._segmentsW+1)*(this._segmentsH+1)+(this._segmentsW+1)*(this._segmentsD+1)+(this._segmentsH+1)*(this._segmentsD+1))*d|0;d-=2;null!=a.get_UVData()&&e==a.get_UVData().get_length()?e=a.get_UVData():(e=M.toFloatVector(null,e,!0),this.invalidateGeometry());if(this._tile6){var f=b=.3333333333333333;var k=c=.5}else f=k=1,b=c=0;for(var m=a.get_UVOffset(),h=b,n=c,K=2*b,l=0*c,p=f/this._segmentsW,g=k/this._segmentsH,H=0,C=this._segmentsW+1;H<C;)for(var y=H++,I=0,r=this._segmentsH+1;I<r;){var t=
I++;e.set(m++,(h+y*p)*a.get_scaleU());e.set(m++,(n+(k-t*g))*a.get_scaleV());m+=d;e.set(m++,(K+(f-y*p))*a.get_scaleU());e.set(m++,(l+(k-t*g))*a.get_scaleV());m+=d}h=b;n=0*c;K=0*b;l=0*c;p=f/this._segmentsW;g=k/this._segmentsD;H=0;for(C=this._segmentsW+1;H<C;)for(y=H++,I=0,r=this._segmentsD+1;I<r;)t=I++,e.set(m++,(h+y*p)*a.get_scaleU()),e.set(m++,(n+(k-t*g))*a.get_scaleV()),m+=d,e.set(m++,(K+y*p)*a.get_scaleU()),e.set(m++,(l+t*g)*a.get_scaleV()),m+=d;h=0*b;n=c;K=2*b;l=c;p=f/this._segmentsD;g=k/this._segmentsH;
b=0;for(c=this._segmentsD+1;b<c;)for(H=b++,C=0,y=this._segmentsH+1;C<y;)I=C++,e.set(m++,(h+H*p)*a.get_scaleU()),e.set(m++,(n+(k-I*g))*a.get_scaleV()),m+=d,e.set(m++,(K+(f-H*p))*a.get_scaleU()),e.set(m++,(l+(k-I*g))*a.get_scaleV()),m+=d;a.updateData(e)},__class__:Td});var ah=function(a,b,c,d,e,f){null==f&&(f=1);null==e&&(e=3355443);null==d&&(d=3355443);this._index=this._subSetIndex=-1;this._thickness=.5*f;this._start=a;this._end=b;this.set_startColor(d);this.set_endColor(e)};g["away3d.primitives.data.Segment"]=
ah;ah.__name__="away3d.primitives.data.Segment";ah.prototype={_segmentsBase:null,_thickness:null,_start:null,_end:null,_startR:null,_startG:null,_startB:null,_endR:null,_endG:null,_endB:null,_index:null,_subSetIndex:null,_startColor:null,_endColor:null,updateSegment:function(a,b,c,d,e,f){null==f&&(f=1);null==e&&(e=3355443);null==d&&(d=3355443);this._start=a;this._end=b;this._startColor!=d&&this.set_startColor(d);this._endColor!=e&&this.set_endColor(e);this._thickness=.5*f;this.update()},get_start:function(){return this._start},
get_end:function(){return this._end},get_thickness:function(){return 2*this._thickness},set_startColor:function(a){this._startR=(a>>16&255)/255;this._startG=(a>>8&255)/255;this._startB=(a&255)/255;this._startColor=a;this.update();return a},set_endColor:function(a){this._endR=(a>>16&255)/255;this._endG=(a>>8&255)/255;this._endB=(a&255)/255;this._endColor=a;this.update();return a},get_index:function(){return this._index},set_index:function(a){return this._index=a},get_subSetIndex:function(){return this._subSetIndex},
set_subSetIndex:function(a){return this._subSetIndex=a},set_segmentsBase:function(a){return this._segmentsBase=a},update:function(){null!=this._segmentsBase&&this._segmentsBase.updateSegment(this)},__class__:ah};var ii=function(a,b,c,d,e){null==e&&(e=1);null==d&&(d=3355443);null==c&&(c=3355443);ah.call(this,a,b,null,c,d,e)};g["away3d.primitives.LineSegment"]=ii;ii.__name__="away3d.primitives.LineSegment";ii.__super__=ah;ii.prototype=v(ah.prototype,{__class__:ii});var ji=function(a,b,c,d,e,f){null==
f&&(f=!1);null==e&&(e=!0);null==d&&(d=1);null==c&&(c=1);null==b&&(b=100);null==a&&(a=100);wc.call(this);this._segmentsW=c;this._segmentsH=d;this._yUp=e;this._width=a;this._height=b;this._doubleSided=f};g["away3d.primitives.PlaneGeometry"]=ji;ji.__name__="away3d.primitives.PlaneGeometry";ji.__super__=wc;ji.prototype=v(wc.prototype,{_segmentsW:null,_segmentsH:null,_yUp:null,_width:null,_height:null,_doubleSided:null,buildGeometry:function(a){var b=this._segmentsW+1;var c=(this._segmentsH+1)*b;var d=
a.get_vertexStride(),e=d-9;this._doubleSided&&(c*=2);var f=this._segmentsH*this._segmentsW*6;this._doubleSided&&(f<<=1);if(c==a.get_numVertices()){c=a.get_vertexData();var k=a.get_indexData();null==k&&(k=M.toIntVector(null,f,!0))}else c=M.toFloatVector(null,c*d,!0),k=M.toIntVector(null,f,!0),this.invalidateUVs();f=0;for(var m=a.get_vertexOffset(),h=0,n=this._segmentsH+1;h<n;)for(var K=h++,l=0,p=this._segmentsW+1;l<p;){var g=l++;var H=(g/this._segmentsW-.5)*this._width;var C=(K/this._segmentsH-.5)*
this._height;c.set(m++,H);this._yUp?(c.set(m++,0),c.set(m++,C)):(c.set(m++,C),c.set(m++,0));c.set(m++,0);this._yUp?(c.set(m++,1),c.set(m++,0)):(c.set(m++,0),c.set(m++,-1));c.set(m++,1);c.set(m++,0);c.set(m++,0);m+=e;this._doubleSided&&(c.set(m,c.get(m-d)),++m,c.set(m,c.get(m-d)),++m,c.set(m,c.get(m-d)),++m,c.set(m,-c.get(m-d)),++m,c.set(m,-c.get(m-d)),++m,c.set(m,-c.get(m-d)),++m,c.set(m,-c.get(m-d)),++m,c.set(m,-c.get(m-d)),++m,c.set(m,-c.get(m-d)),++m,m+=e);g!=this._segmentsW&&K!=this._segmentsH&&
(H=g+K*b,C=this._doubleSided?2:1,k.set(f++,H*C),k.set(f++,(H+b)*C),k.set(f++,(H+b+1)*C),k.set(f++,H*C),k.set(f++,(H+b+1)*C),k.set(f++,(H+1)*C),this._doubleSided&&(k.set(f++,(H+b+1)*C+1),k.set(f++,(H+b)*C+1),k.set(f++,H*C+1),k.set(f++,(H+1)*C+1),k.set(f++,(H+b+1)*C+1),k.set(f++,H*C+1)))}a.updateData(c);a.updateIndexData(k)},buildUVs:function(a){var b=a.get_UVStride();var c=(this._segmentsH+1)*(this._segmentsW+1)*b;b-=2;this._doubleSided&&(c*=2);null!=a.get_UVData()&&c==a.get_UVData().get_length()?
c=a.get_UVData():(c=M.toFloatVector(null,c,!0),this.invalidateGeometry());for(var d=a.get_UVOffset(),e=0,f=this._segmentsH+1;e<f;)for(var k=e++,m=0,h=this._segmentsW+1;m<h;){var n=m++;c.set(d++,n/this._segmentsW*a.get_scaleU());c.set(d++,(1-k/this._segmentsH)*a.get_scaleV());d+=b;this._doubleSided&&(c.set(d++,n/this._segmentsW*a.get_scaleU()),c.set(d++,(1-k/this._segmentsH)*a.get_scaleV()),d+=b)}a.updateData(c)},__class__:ji});var md=function(a,b,c,d){null==d&&(d=!0);null==c&&(c=12);null==b&&(b=16);
null==a&&(a=50);wc.call(this);this._radius=a;this._segmentsW=b;this._segmentsH=c;this._yUp=d};g["away3d.primitives.SphereGeometry"]=md;md.__name__="away3d.primitives.SphereGeometry";md.__super__=wc;md.prototype=v(wc.prototype,{_radius:null,_segmentsW:null,_segmentsH:null,_yUp:null,buildGeometry:function(a){var b=0;var c=(this._segmentsH+1)*(this._segmentsW+1);var d=a.get_vertexStride();var e=d-9;c==a.get_numVertices()?(c=a.get_vertexData(),d=a.get_indexData(),null==d&&(d=M.toIntVector(null,(this._segmentsH-
1)*this._segmentsW*6))):(c=M.toFloatVector(null,c*d,!0),d=M.toIntVector(null,(this._segmentsH-1)*this._segmentsW*6),this.invalidateGeometry());for(var f,k=a.get_vertexOffset(),m,h,n,K,l=0,p=this._segmentsH+1;l<p;){var g=l++;f=k;var H=Math.PI*g/this._segmentsH,C=-this._radius*Math.cos(H);H=this._radius*Math.sin(H);for(var y=0,I=this._segmentsW+1;y<I;){var r=y++;m=2*Math.PI*r/this._segmentsW;var t=H*Math.cos(m),z=H*Math.sin(m),q=1/Math.sqrt(t*t+z*z+C*C),oa=Math.sqrt(z*z+t*t);this._yUp?(n=0,K=.007<oa?
t/oa:0,m=-C,h=z):(n=.007<oa?t/oa:0,K=0,m=z,h=C);r==this._segmentsW?(c.set(k++,c.get(f)),c.set(k++,c.get(f+1)),c.set(k++,c.get(f+2)),c.set(k++,c.get(f+3)+t*q*.5),c.set(k++,c.get(f+4)+m*q*.5),c.set(k++,c.get(f+5)+h*q*.5)):(c.set(k++,t),c.set(k++,m),c.set(k++,h),c.set(k++,t*q),c.set(k++,m*q),c.set(k++,h*q));c.set(k++,.007<oa?-z/oa:1);c.set(k++,n);c.set(k++,K);0<r&&0<g&&(t=(this._segmentsW+1)*g+r,m=(this._segmentsW+1)*g+r-1,h=(this._segmentsW+1)*(g-1)+r-1,r=(this._segmentsW+1)*(g-1)+r,g==this._segmentsH?
(c.set(k-9,c.get(f)),c.set(k-8,c.get(f+1)),c.set(k-7,c.get(f+2)),d.set(b++,t),d.set(b++,h),d.set(b++,r)):1==g?(d.set(b++,t),d.set(b++,m),d.set(b++,h)):(d.set(b++,t),d.set(b++,m),d.set(b++,h),d.set(b++,t),d.set(b++,h),d.set(b++,r)));k+=e}}a.updateData(c);a.updateIndexData(d)},buildUVs:function(a){var b=a.get_UVStride(),c=(this._segmentsH+1)*(this._segmentsW+1)*b;b-=2;null!=a.get_UVData()&&c==a.get_UVData().get_length()?c=a.get_UVData():(c=M.toFloatVector(null,c,!0),this.invalidateGeometry());for(var d=
a.get_UVOffset(),e=0,f=this._segmentsH+1;e<f;)for(var k=e++,m=0,h=this._segmentsW+1;m<h;){var n=m++;c.set(d++,n/this._segmentsW*a.get_scaleU());c.set(d++,k/this._segmentsH*a.get_scaleV());d+=b}a.updateData(c)},get_radius:function(){return this._radius},__class__:md});var yj=function(a,b,c,d,e){null==e&&(e=!0);null==d&&(d=8);null==c&&(c=16);null==b&&(b=50);null==a&&(a=50);wc.call(this);this._radius=a;this._tubeRadius=b;this._segmentsR=c;this._segmentsT=d;this._yUp=e};g["away3d.primitives.TorusGeometry"]=
yj;yj.__name__="away3d.primitives.TorusGeometry";yj.__super__=wc;yj.prototype=v(wc.prototype,{_radius:null,_tubeRadius:null,_segmentsR:null,_segmentsT:null,_yUp:null,_rawVertexData:null,_rawIndices:null,_nextVertexIndex:null,_currentIndex:null,_currentTriangleIndex:null,_numVertices:null,_vertexStride:null,_vertexOffset:null,addVertex:function(a,b,c,d,e,f,k,m,h){var n=this._vertexOffset+this._nextVertexIndex*this._vertexStride;this._rawVertexData.set(n++,a);this._rawVertexData.set(n++,b);this._rawVertexData.set(n++,
c);this._rawVertexData.set(n++,d);this._rawVertexData.set(n++,e);this._rawVertexData.set(n++,f);this._rawVertexData.set(n++,k);this._rawVertexData.set(n++,m);this._rawVertexData.set(n,h);this._nextVertexIndex++},addTriangleClockWise:function(a,b,c){this._rawIndices.set(this._currentIndex++,a);this._rawIndices.set(this._currentIndex++,b);this._rawIndices.set(this._currentIndex++,c);this._currentTriangleIndex++},buildGeometry:function(a){this._currentTriangleIndex=this._currentIndex=this._nextVertexIndex=
this._numVertices=0;this._vertexStride=a.get_vertexStride();this._vertexOffset=a.get_vertexOffset();this._numVertices=(this._segmentsT+1)*(this._segmentsR+1);var b=this._segmentsT*this._segmentsR*2;this._numVertices==a.get_numVertices()?(this._rawVertexData=a.get_vertexData(),this._rawIndices=a.get_indexData(),null==this._rawIndices&&(this._rawIndices=M.toIntVector(null,3*b,!0))):(this._rawVertexData=M.toFloatVector(null,this._numVertices*this._vertexStride,!0),this._rawIndices=M.toIntVector(null,
3*b,!0),this.invalidateUVs());b=2*Math.PI/this._segmentsR;for(var c=2*Math.PI/this._segmentsT,d,e,f,k,m,h,n,K=0,l=this._segmentsT+1;K<l;){var g=K++;m=this._vertexOffset+this._nextVertexIndex*this._vertexStride;for(var p=0,H=this._segmentsR+1;p<H;){n=p++;var C=n*b;var y=g*c;h=Math.cos(y);var I=h*Math.cos(C);var r=h*Math.sin(C);var t=Math.sin(y);y=this._radius*Math.cos(C)+this._tubeRadius*I;C=this._radius*Math.sin(C)+this._tubeRadius*r;var z=g==this._segmentsT?0:this._tubeRadius*t;this._yUp?(f=-t,k=
r,d=0,e=0!=h?I/h:y/this._radius,t=-z,z=C):(f=r,k=t,d=0!=h?I/h:y/this._radius,e=0,t=C);n==this._segmentsR?this.addVertex(y,this._rawVertexData.get(m+1),this._rawVertexData.get(m+2),I,f,k,-(0!=h?r/h:C/this._radius),d,e):this.addVertex(y,t,z,I,f,k,-(0!=h?r/h:C/this._radius),d,e);0<n&&0<g&&(I=this._nextVertexIndex-1,r=this._nextVertexIndex-2,h=r-this._segmentsR-1,n=I-this._segmentsR-1,this.addTriangleClockWise(I,r,h),this.addTriangleClockWise(I,h,n))}}a.updateData(this._rawVertexData);a.updateIndexData(this._rawIndices)},
buildUVs:function(a){var b=a.get_UVStride();var c=a.get_UVOffset(),d=a.get_UVStride()-2;b*=this._numVertices;null!=a.get_UVData()&&b==a.get_UVData().get_length()?b=a.get_UVData():(b=M.toFloatVector(null,b,!0),this.invalidateGeometry());for(var e=0,f=this._segmentsT+1;e<f;)for(var k=e++,m=0,h=this._segmentsR+1;m<h;){var n=m++;b.set(c++,n/this._segmentsR*a.get_scaleU());b.set(c++,k/this._segmentsT*a.get_scaleV());c+=d}a.updateData(b)},__class__:yj});var lf=function(a,b){null==b&&(b=1);null==a&&(a=16777215);
this._geomDirty=!0;0>=b&&(b=1);this._color=a;this._thickness=b;this.set_mouseEnabled(this.set_mouseChildren(!1));Oc.call(this)};g["away3d.primitives.WireframePrimitiveBase"]=lf;lf.__name__="away3d.primitives.WireframePrimitiveBase";lf.__super__=Oc;lf.prototype=v(Oc.prototype,{_geomDirty:null,_color:null,_thickness:null,removeAllSegments:function(){Oc.prototype.removeAllSegments.call(this)},get_bounds:function(){this._geomDirty&&this.updateGeometry();return Oc.prototype.get_bounds.call(this)},buildGeometry:function(){throw new W(new tb);
},updateGeometry:function(){this.buildGeometry();this._geomDirty=!1},updateOrAddSegment:function(a,b,c){var d=this.getSegment(a);if(null!=d){a=d.get_start();var e=d.get_end();a.x=b.x;a.y=b.y;a.z=b.z;e.x=c.x;e.y=c.y;e.z=c.z;d.updateSegment(a,e,null,this._color,this._color,this._thickness)}else this.addSegment(new ii(b.clone(),c.clone(),this._color,this._color,this._thickness))},updateMouseChildren:function(){this._ancestorsAllowMouseEnabled=!1},__class__:lf});var ki=function(a,b,c,d,e){null==e&&(e=
1);null==d&&(d=16777215);null==c&&(c=100);null==b&&(b=100);null==a&&(a=100);lf.call(this,d,e);this._width=a;this._height=b;this._depth=c};g["away3d.primitives.WireframeCube"]=ki;ki.__name__="away3d.primitives.WireframeCube";ki.__super__=lf;ki.prototype=v(lf.prototype,{_width:null,_height:null,_depth:null,buildGeometry:function(){var a=new hb,b=new hb,c=.5*this._width,d=.5*this._height,e=.5*this._depth;a.x=-c;a.y=d;a.z=-e;b.x=-c;b.y=-d;b.z=-e;this.updateOrAddSegment(0,a,b);a.z=e;b.z=e;this.updateOrAddSegment(1,
a,b);a.x=c;b.x=c;this.updateOrAddSegment(2,a,b);a.z=-e;b.z=-e;this.updateOrAddSegment(3,a,b);a.x=-c;a.y=-d;a.z=-e;b.x=c;b.y=-d;b.z=-e;this.updateOrAddSegment(4,a,b);a.y=d;b.y=d;this.updateOrAddSegment(5,a,b);a.z=e;b.z=e;this.updateOrAddSegment(6,a,b);a.y=-d;b.y=-d;this.updateOrAddSegment(7,a,b);a.x=-c;a.y=-d;a.z=-e;b.x=-c;b.y=-d;b.z=e;this.updateOrAddSegment(8,a,b);a.y=d;b.y=d;this.updateOrAddSegment(9,a,b);a.x=c;b.x=c;this.updateOrAddSegment(10,a,b);a.y=-d;b.y=-d;this.updateOrAddSegment(11,a,b)},
__class__:ki});var li=function(a,b,c,d,e){null==e&&(e=1);null==d&&(d=16777215);null==c&&(c=12);null==b&&(b=16);null==a&&(a=50);lf.call(this,d,e);this._radius=a;this._segmentsW=b;this._segmentsH=c};g["away3d.primitives.WireframeSphere"]=li;li.__name__="away3d.primitives.WireframeSphere";li.__super__=lf;li.prototype=v(lf.prototype,{_segmentsW:null,_segmentsH:null,_radius:null,buildGeometry:function(){for(var a=M.toFloatVector(null),b=new hb,c=new hb,d=0,e=0,f,k,m,h,n=0,K=this._segmentsH+1;n<K;){k=n++;
f=Math.PI*k/this._segmentsH;k=-this._radius*Math.cos(f);f=this._radius*Math.sin(f);for(var l=0,g=this._segmentsW+1;l<g;)h=l++,m=2*Math.PI*h/this._segmentsW,h=f*Math.cos(m),m=f*Math.sin(m),a.set(d++,h),a.set(d++,-k),a.set(d++,m)}k=1;for(f=this._segmentsH+1;k<f;)for(l=k++,g=1,h=this._segmentsH+1;g<h;)m=g++,d=3*((this._segmentsW+1)*l+m),n=3*((this._segmentsW+1)*l+m-1),K=3*((this._segmentsW+1)*(l-1)+m-1),m=3*((this._segmentsW+1)*(l-1)+m),l==this._segmentsH?(b.x=a.get(K),b.y=a.get(K+1),b.z=a.get(K+2),
c.x=a.get(m),c.y=a.get(m+1),c.z=a.get(m+2),this.updateOrAddSegment(e++,b,c),b.x=a.get(d),b.y=a.get(d+1),b.z=a.get(d+2)):1==l?(c.x=a.get(n),c.y=a.get(n+1),c.z=a.get(n+2),b.x=a.get(K),b.y=a.get(K+1),b.z=a.get(K+2)):(c.x=a.get(n),c.y=a.get(n+1),c.z=a.get(n+2),b.x=a.get(K),b.y=a.get(K+1),b.z=a.get(K+2),this.updateOrAddSegment(e++,b,c),c.x=a.get(m),c.y=a.get(m+1),c.z=a.get(m+2)),this.updateOrAddSegment(e++,b,c)},__class__:li});var cd=function(){this._hasMipmaps=!0;this._format=1;this._textures=M.toObjectVector(null,
8);this._dirty=M.toObjectVector(null,8);wa.call(this)};g["away3d.textures.TextureProxyBase"]=cd;cd.__name__="away3d.textures.TextureProxyBase";cd.__interfaces__=[zb];cd.__super__=wa;cd.prototype=v(wa.prototype,{_format:null,_hasMipmaps:null,_textures:null,_dirty:null,_width:null,_height:null,get_hasMipMaps:function(){return this._hasMipmaps},get_format:function(){return this._format},get_width:function(){return this._width},get_height:function(){return this._height},getTextureForStage3D:function(a){var b=
a._stage3DIndex,c=this._textures.get(b);a=a._context3D;if(null==a)return null;if(null==c||this._dirty.get(b)!=a){var d=this._textures;c=this.createTexture(a);d.set(b,c);this._dirty.set(b,a);this.uploadContent(c)}return c},uploadContent:function(a){throw new W(new tb);},setSize:function(a,b){this._width==a&&this._height==b||this.invalidateSize();this._width=a;this._height=b},invalidateContent:function(){this._dirty.set(0,null);this._dirty.set(1,null);this._dirty.set(2,null);this._dirty.set(3,null);
this._dirty.set(4,null);this._dirty.set(5,null);this._dirty.set(6,null);this._dirty.set(7,null)},invalidateSize:function(){var a=this._textures.get(0);null!=a&&(a.dispose(),this._textures.set(0,null),this._dirty.set(0,null));a=this._textures.get(1);null!=a&&(a.dispose(),this._textures.set(1,null),this._dirty.set(1,null));a=this._textures.get(2);null!=a&&(a.dispose(),this._textures.set(2,null),this._dirty.set(2,null));a=this._textures.get(3);null!=a&&(a.dispose(),this._textures.set(3,null),this._dirty.set(3,
null));a=this._textures.get(4);null!=a&&(a.dispose(),this._textures.set(4,null),this._dirty.set(4,null));a=this._textures.get(5);null!=a&&(a.dispose(),this._textures.set(5,null),this._dirty.set(5,null));a=this._textures.get(6);null!=a&&(a.dispose(),this._textures.set(6,null),this._dirty.set(6,null));a=this._textures.get(7);null!=a&&(a.dispose(),this._textures.set(7,null),this._dirty.set(7,null))},createTexture:function(a){throw new W(new tb);},dispose:function(){null!=this._textures.get(0)&&this._textures.get(0).dispose();
null!=this._textures.get(1)&&this._textures.get(1).dispose();null!=this._textures.get(2)&&this._textures.get(2).dispose();null!=this._textures.get(3)&&this._textures.get(3).dispose();null!=this._textures.get(4)&&this._textures.get(4).dispose();null!=this._textures.get(5)&&this._textures.get(5).dispose();null!=this._textures.get(6)&&this._textures.get(6).dispose();null!=this._textures.get(7)&&this._textures.get(7).dispose()},__class__:cd});var ze=function(){cd.call(this)};g["away3d.textures.Texture2DBase"]=
ze;ze.__name__="away3d.textures.Texture2DBase";ze.__super__=cd;ze.prototype=v(cd.prototype,{createTexture:function(a){return a.createTexture(this._width,this._height,1,!1)},__class__:ze});var Pc=function(a,b){null==b&&(b=!0);cd.call(this);this.set_bitmapData(a);this._generateMipmaps=this._hasMipmaps=b};g["away3d.textures.BitmapTexture"]=Pc;Pc.__name__="away3d.textures.BitmapTexture";Pc.__super__=ze;Pc.prototype=v(ze.prototype,{_bitmapData:null,_mipMapHolder:null,_generateMipmaps:null,set_bitmapData:function(a){if(a==
this._bitmapData)return null;if(!ke.isBitmapDataValid(a))throw new W(new cb("Invalid bitmapData: Width and height must be power of 2 and cannot exceed 2048"));this.invalidateContent();this.setSize(a.width,a.height);this._bitmapData=a;this._generateMipmaps&&this.getMipMapHolder();return a},uploadContent:function(a){this._generateMipmaps?Qc.generateMipMaps(this._bitmapData,a,this._mipMapHolder,!0):Ka.__cast(a,Nf).uploadFromBitmapData(this._bitmapData,0)},getMipMapHolder:function(){var a=this._bitmapData.width,
b=this._bitmapData.height;if(null!=this._mipMapHolder){if(this._mipMapHolder.width==a&&this._bitmapData.height==b)return;this.freeMipMapHolder()}null==Pc._mipMaps[a]&&(Pc._mipMaps[a]=[],Pc._mipMapUses[a]=[]);null==Pc._mipMaps[a][b]?(this._mipMapHolder=Pc._mipMaps[a][b]=new Mb(a,b,!0),Pc._mipMapUses[a][b]=1):(Pc._mipMapUses[a][b]+=1,this._mipMapHolder=Pc._mipMaps[a][b])},freeMipMapHolder:function(){var a=this._mipMapHolder.width,b=this._mipMapHolder.height;0==--Pc._mipMapUses[a][b]&&(Pc._mipMaps[a][b].dispose(),
Pc._mipMaps[a][b]=null)},dispose:function(){ze.prototype.dispose.call(this);null!=this._mipMapHolder&&this.freeMipMapHolder()},__class__:Pc});var og=function(){cd.call(this)};g["away3d.textures.CubeTextureBase"]=og;og.__name__="away3d.textures.CubeTextureBase";og.__super__=cd;og.prototype=v(cd.prototype,{createTexture:function(a){return a.createCubeTexture(this.get_width(),1,!1)},__class__:og});var uk=function(a){cd.call(this);this.setSize(a,a)};g["away3d.textures.RenderCubeTexture"]=uk;uk.__name__=
"away3d.textures.RenderCubeTexture";uk.__super__=og;uk.prototype=v(og.prototype,{uploadContent:function(a){var b=new Mb(this._width,this._height,!1,0);Qc.generateMipMaps(b,a,null,!1,0);Qc.generateMipMaps(b,a,null,!1,1);Qc.generateMipMaps(b,a,null,!1,2);Qc.generateMipMaps(b,a,null,!1,3);Qc.generateMipMaps(b,a,null,!1,4);Qc.generateMipMaps(b,a,null,!1,5);b.dispose()},createTexture:function(a){return a.createCubeTexture(this._width,1,!0)},__class__:uk});var tk=function(a,b){cd.call(this);this.setSize(a,
b)};g["away3d.textures.RenderTexture"]=tk;tk.__name__="away3d.textures.RenderTexture";tk.__super__=ze;tk.prototype=v(ze.prototype,{uploadContent:function(a){},createTexture:function(a){return a.createTexture(this.get_width(),this.get_height(),1,!0)},__class__:tk});var ke=function(){};g["away3d.tools.utils.TextureUtils"]=ke;ke.__name__="away3d.tools.utils.TextureUtils";ke.isBitmapDataValid=function(a){return null==a?!0:ke.isDimensionValid(a.width)?ke.isDimensionValid(a.height):!1};ke.isDimensionValid=
function(a){return 1<=a&&4096>=a?ke.isPowerOfTwo(a):!1};ke.isPowerOfTwo=function(a){return 0<a?(a&-a)==a:!1};ke.getBestPowerOf2=function(a){for(var b=1;b<a;)b<<=1;4096<b&&(b=4096);return b};var Cf=function(){};g["away3d.utils.Cast"]=Cf;Cf.__name__="away3d.utils.Cast";Cf.bitmapData=function(a){if(null==a)return null;"string"==typeof a&&(a=Rc.getBitmapData(a));if(Ka.__instanceof(a,Rl))try{a=L.createInstance(a,[])}catch(d){ab.lastException=d,a=L.createInstance(a,[0,0])}if(a instanceof Mb)return a;if(a instanceof
ef&&null!=Ka.__cast(a,ef).get_bitmapData())return Ka.__cast(a,ef).get_bitmapData();if(a instanceof ba){a=Ka.__cast(a,ba);var b=new Mb(a.get_width()|0,a.get_height()|0,!0,65535),c=a.get_transform().get_matrix().clone();c.tx=0;c.ty=0;b.draw(a,c,a.get_transform().get_colorTransform(),a.get_blendMode(),b.rect,!0);return b}throw new W(new Kf("Can't cast to BitmapData: "+r.string(a)));};Cf.bitmapTexture=function(a){if(null==a)return null;"string"==typeof a&&(a=Rc.getBitmapData(a));if(Ka.__instanceof(a,
Rl))try{a=L.createInstance(a,[])}catch(c){ab.lastException=c,a=L.createInstance(a,[0,0])}if(a instanceof Pc)return a;try{var b=Cf.bitmapData(a);return new Pc(b)}catch(c){if(ab.lastException=c,!((c instanceof W?c.val:c)instanceof Kf))throw c;}throw new W(new Kf("Can't cast to BitmapTexture: "+r.string(a)));};var zj=t["haxe.StackItem"]={__ename__:"haxe.StackItem",__constructs__:["CFunction","Module","FilePos","Method","LocalFunction"],CFunction:{_hx_index:0,__enum__:"haxe.StackItem",toString:p},Module:(q=
function(a){return{_hx_index:1,m:a,__enum__:"haxe.StackItem",toString:p}},q.__params__=["m"],q),FilePos:(q=function(a,b,c,d){return{_hx_index:2,s:a,file:b,line:c,column:d,__enum__:"haxe.StackItem",toString:p}},q.__params__=["s","file","line","column"],q),Method:(q=function(a,b){return{_hx_index:3,classname:a,method:b,__enum__:"haxe.StackItem",toString:p}},q.__params__=["classname","method"],q),LocalFunction:(q=function(a){return{_hx_index:4,v:a,__enum__:"haxe.StackItem",toString:p}},q.__params__=
["v"],q)},ab=function(){};g["haxe.CallStack"]=ab;ab.__name__="haxe.CallStack";ab.getStack=function(a){if(null==a)return[];var b=Error.prepareStackTrace;Error.prepareStackTrace=function(a,b){a=[];for(var c=0;c<b.length;){var d=b[c];++c;null!=ab.wrapCallSite&&(d=ab.wrapCallSite(d));var k=null,m=d.getFunctionName();if(null!=m){var h=m.lastIndexOf(".");0<=h&&(k=ra.substr(m,0,h),m=ra.substr(m,h+1,null),k=zj.Method(k,m))}m=d.getFileName();h=null==m?-1:m.indexOf("file:");null!=ab.wrapCallSite&&0<h&&(m=ra.substr(m,
h+6,null));a.push(zj.FilePos(k,m,d.getLineNumber(),d.getColumnNumber()))}return a};a=ab.makeStack(a.stack);Error.prepareStackTrace=b;return a};ab.callStack=function(){try{throw Error();}catch(b){ab.lastException=b;var a=ab.getStack(b);a.shift();return a}};ab.exceptionStack=function(){return ab.getStack(ab.lastException)};ab.toString=function(a){for(var b=new Qa,c=0;c<a.length;){var d=a[c];++c;b.b+="\nCalled from ";ab.itemToString(b,d)}return b.b};ab.itemToString=function(a,b){switch(b._hx_index){case 0:a.b+=
"a C function";break;case 1:b=b.m;a.b+="module ";a.b+=null==b?"null":""+b;break;case 2:var c=b.column,d=b.line,e=b.file;b=b.s;null!=b&&(ab.itemToString(a,b),a.b+=" (");a.b+=null==e?"null":""+e;a.b+=" line ";a.b+=null==d?"null":""+d;null!=c&&(a.b+=" column ",a.b+=null==c?"null":""+c);null!=b&&(a.b+=")");break;case 3:c=b.method;b=b.classname;a.b+=r.string(null==b?"<unknown>":b);a.b+=".";a.b+=null==c?"null":""+c;break;case 4:b=b.v,a.b+="local function #",a.b+=null==b?"null":""+b}};ab.makeStack=function(a){if(null==
a)return[];if("string"==typeof a){a=a.split("\n");"Error"==a[0]&&a.shift();for(var b=[],c=new Ba("^   at ([A-Za-z0-9_. ]+) \\(([^)]+):([0-9]+):([0-9]+)\\)$",""),d=0;d<a.length;){var e=a[d];++d;if(c.match(e)){e=c.matched(1).split(".");var f=e.pop(),k=c.matched(2),m=r.parseInt(c.matched(3)),h=r.parseInt(c.matched(4));b.push(zj.FilePos("Anonymous function"==f?zj.LocalFunction():"Global code"==f?null:zj.Method(e.join("."),f),k,m,h))}else b.push(zj.Module(Y.trim(e)))}return b}return a};var pd=function(a,
b){this.high=a;this.low=b};g["haxe._Int64.___Int64"]=pd;pd.__name__="haxe._Int64.___Int64";pd.prototype={high:null,low:null,__class__:pd};var Sc=function(){this.buf=new Qa;this.cache=[];this.useCache=Sc.USE_CACHE;this.useEnumIndex=Sc.USE_ENUM_INDEX;this.shash=new Ra;this.scount=0};g["haxe.Serializer"]=Sc;Sc.__name__="haxe.Serializer";Sc.prototype={buf:null,cache:null,shash:null,scount:null,useCache:null,useEnumIndex:null,toString:function(){return this.buf.b},serializeString:function(a){var b=this.shash;
b=null!=F[a]?b.getReserved(a):b.h[a];if(null!=b)this.buf.b+="R",this.buf.b+=null==b?"null":""+b;else{b=this.shash;var c=this.scount++;null!=F[a]?b.setReserved(a,c):b.h[a]=c;this.buf.b+="y";a=encodeURIComponent(a);this.buf.b+=r.string(a.length);this.buf.b+=":";this.buf.b+=null==a?"null":""+a}},serializeRef:function(a){for(var b=typeof a,c=0,d=this.cache.length;c<d;){var e=c++,f=this.cache[e];if(typeof f==b&&f==a)return this.buf.b+="r",this.buf.b+=null==e?"null":""+e,!0}this.cache.push(a);return!1},
serializeFields:function(a){for(var b=0,c=Na.fields(a);b<c.length;){var d=c[b];++b;this.serializeString(d);this.serialize(Na.field(a,d))}this.buf.b+="g"},serialize:function(a){var b=L.typeof(a);switch(b._hx_index){case 0:this.buf.b+="n";break;case 1:if(0==a){this.buf.b+="z";break}this.buf.b+="i";this.buf.b+=null==a?"null":""+a;break;case 2:isNaN(a)?this.buf.b+="k":isFinite(a)?(this.buf.b+="d",this.buf.b+=null==a?"null":""+a):this.buf.b+=0>a?"m":"p";break;case 3:this.buf.b+=a?"t":"f";break;case 4:Ka.__instanceof(a,
Rl)?(a=a.__name__,this.buf.b+="A",this.serializeString(a)):Ka.__instanceof(a,tm)?(this.buf.b+="B",this.serializeString(a.__ename__)):this.useCache&&this.serializeRef(a)||(this.buf.b+="o",this.serializeFields(a));break;case 5:throw new W("Cannot serialize function");case 6:b=b.c;if(b==String){this.serializeString(a);break}if(this.useCache&&this.serializeRef(a))break;switch(b){case Array:b=0;this.buf.b+="a";for(var c=0,d=a.length;c<d;){var e=c++;null==a[e]?++b:(0<b&&(1==b?this.buf.b+="n":(this.buf.b+=
"u",this.buf.b+=null==b?"null":""+b),b=0),this.serialize(a[e]))}0<b&&(1==b?this.buf.b+="n":(this.buf.b+="u",this.buf.b+=null==b?"null":""+b));this.buf.b+="h";break;case Date:this.buf.b+="v";this.buf.b+=r.string(a.getTime());break;case Zb:this.buf.b+="q";for(b=a.keys();b.hasNext();)c=b.next(),this.buf.b+=":",this.buf.b+=null==c?"null":""+c,this.serialize(a.h[c]);this.buf.b+="h";break;case ia:this.buf.b+="l";for(a=a.h;null!=a;)b=a.item,a=a.next,this.serialize(b);this.buf.b+="h";break;case ja:this.buf.b+=
"M";for(b=a.keys();b.hasNext();)c=b.next(),d=Na.field(c,"__id__"),Na.deleteField(c,"__id__"),this.serialize(c),c.__id__=d,this.serialize(a.h[c.__id__]);this.buf.b+="h";break;case Ra:this.buf.b+="b";for(b=a.keys();b.hasNext();)c=b.next(),this.serializeString(c),this.serialize(null!=F[c]?a.getReserved(c):a.h[c]);this.buf.b+="h";break;case vb:this.buf.b+="s";this.buf.b+=r.string(Math.ceil(8*a.length/6));this.buf.b+=":";c=0;d=a.length-2;b=Sc.BASE64_CODES;if(null==b){b=Array(Sc.BASE64.length);e=0;for(var f=
Sc.BASE64.length;e<f;){var k=e++;b[k]=ra.cca(Sc.BASE64,k)}Sc.BASE64_CODES=b}for(;c<d;)e=a.b[c++],f=a.b[c++],k=a.b[c++],this.buf.b+=String.fromCodePoint(b[e>>2]),this.buf.b+=String.fromCodePoint(b[(e<<4|f>>4)&63]),this.buf.b+=String.fromCodePoint(b[(f<<2|k>>6)&63]),this.buf.b+=String.fromCodePoint(b[k&63]);c==d?(d=a.b[c++],a=a.b[c++],this.buf.b+=String.fromCodePoint(b[d>>2]),this.buf.b+=String.fromCodePoint(b[(d<<4|a>>4)&63]),this.buf.b+=String.fromCodePoint(b[a<<2&63])):c==d+1&&(a=a.b[c++],this.buf.b+=
String.fromCodePoint(b[a>>2]),this.buf.b+=String.fromCodePoint(b[a<<4&63]));break;default:this.useCache&&this.cache.pop(),null!=a.hxSerialize?(this.buf.b+="C",this.serializeString(b.__name__),this.useCache&&this.cache.push(a),a.hxSerialize(this),this.buf.b+="g"):(this.buf.b+="c",this.serializeString(b.__name__),this.useCache&&this.cache.push(a),this.serializeFields(a))}break;case 7:b=b.e;if(this.useCache){if(this.serializeRef(a))break;this.cache.pop()}this.buf.b+=r.string(this.useEnumIndex?"j":"w");
this.serializeString(b.__ename__);this.useEnumIndex?(this.buf.b+=":",this.buf.b+=r.string(a._hx_index)):this.serializeString(t[a.__enum__].__constructs__[a._hx_index]);this.buf.b+=":";b=L.enumParameters(a);this.buf.b+=r.string(b.length);for(c=0;c<b.length;)d=b[c],++c,this.serialize(d);this.useCache&&this.cache.push(a);break;default:throw new W("Cannot serialize "+r.string(a));}},__class__:Sc};var Ne=function(a){var b=this;this.id=setInterval(function(){b.run()},a)};g["haxe.Timer"]=Ne;Ne.__name__=
"haxe.Timer";Ne.delay=function(a,b){var c=new Ne(b);c.run=function(){c.stop();a()};return c};Ne.prototype={id:null,stop:function(){null!=this.id&&(clearInterval(this.id),this.id=null)},run:function(){},__class__:Ne};var Aj=function(){};g["haxe._Unserializer.DefaultResolver"]=Aj;Aj.__name__="haxe._Unserializer.DefaultResolver";Aj.prototype={resolveClass:function(a){return g[a]},resolveEnum:function(a){return t[a]},__class__:Aj};var Tc=function(a){this.buf=a;this.length=a.length;this.pos=0;this.scache=
[];this.cache=[];a=Tc.DEFAULT_RESOLVER;null==a&&(a=new Aj,Tc.DEFAULT_RESOLVER=a);this.resolver=a};g["haxe.Unserializer"]=Tc;Tc.__name__="haxe.Unserializer";Tc.initCodes=function(){for(var a=[],b=0,c=Tc.BASE64.length;b<c;){var d=b++;a[Tc.BASE64.charCodeAt(d)]=d}return a};Tc.run=function(a){return(new Tc(a)).unserialize()};Tc.prototype={buf:null,pos:null,length:null,cache:null,scache:null,resolver:null,setResolver:function(a){null==a?(null==bh.instance&&(bh.instance=new bh),this.resolver=bh.instance):
this.resolver=a},readDigits:function(){for(var a=0,b=!1,c=this.pos;;){var d=this.buf.charCodeAt(this.pos);if(d!=d)break;if(45==d){if(this.pos!=c)break;b=!0}else{if(48>d||57<d)break;a=10*a+(d-48)}this.pos++}b&&(a*=-1);return a},readFloat:function(){for(var a=this.pos;;){var b=this.buf.charCodeAt(this.pos);if(b!=b)break;if(43<=b&&58>b||101==b||69==b)this.pos++;else break}return parseFloat(ra.substr(this.buf,a,this.pos-a))},unserializeObject:function(a){for(;;){if(this.pos>=this.length)throw new W("Invalid object");
if(103==this.buf.charCodeAt(this.pos))break;var b=this.unserialize();if("string"!=typeof b)throw new W("Invalid object key");var c=this.unserialize();a[b]=c}this.pos++},unserializeEnum:function(a,b){if(58!=this.buf.charCodeAt(this.pos++))throw new W("Invalid enum format");var c=this.readDigits();if(0==c)return L.createEnum(a,b);for(var d=[];0<c--;)d.push(this.unserialize());return L.createEnum(a,b,d)},unserialize:function(){switch(this.buf.charCodeAt(this.pos++)){case 65:var a=this.unserialize(),
b=this.resolver.resolveClass(a);if(null==b)throw new W("Class not found "+a);return b;case 66:a=this.unserialize();b=this.resolver.resolveEnum(a);if(null==b)throw new W("Enum not found "+a);return b;case 67:a=this.unserialize();b=this.resolver.resolveClass(a);if(null==b)throw new W("Class not found "+a);a=Object.create(b.prototype);this.cache.push(a);a.hxUnserialize(this);if(103!=this.buf.charCodeAt(this.pos++))throw new W("Invalid custom data");return a;case 77:a=new ja;for(this.cache.push(a);104!=
this.buf.charCodeAt(this.pos);)b=this.unserialize(),a.set(b,this.unserialize());this.pos++;return a;case 82:a=this.readDigits();if(0>a||a>=this.scache.length)throw new W("Invalid string reference");return this.scache[a];case 97:a=[];for(this.cache.push(a);;){b=this.buf.charCodeAt(this.pos);if(104==b){this.pos++;break}117==b?(this.pos++,b=this.readDigits(),a[a.length+b-1]=null):a.push(this.unserialize())}return a;case 98:a=new Ra;for(this.cache.push(a);104!=this.buf.charCodeAt(this.pos);){b=this.unserialize();
var c=this.unserialize();null!=F[b]?a.setReserved(b,c):a.h[b]=c}this.pos++;return a;case 99:a=this.unserialize();b=this.resolver.resolveClass(a);if(null==b)throw new W("Class not found "+a);a=Object.create(b.prototype);this.cache.push(a);this.unserializeObject(a);return a;case 100:return this.readFloat();case 102:return!1;case 105:return this.readDigits();case 106:a=this.unserialize();b=this.resolver.resolveEnum(a);if(null==b)throw new W("Enum not found "+a);this.pos++;c=this.readDigits();var d=b.__constructs__.slice()[c];
if(null==d)throw new W("Unknown enum index "+a+"@"+c);a=this.unserializeEnum(b,d);this.cache.push(a);return a;case 107:return NaN;case 108:a=new ia;for(this.cache.push(a);104!=this.buf.charCodeAt(this.pos);)a.add(this.unserialize());this.pos++;return a;case 109:return-Infinity;case 110:return null;case 111:return a={},this.cache.push(a),this.unserializeObject(a),a;case 112:return Infinity;case 113:a=new Zb;this.cache.push(a);for(b=this.buf.charCodeAt(this.pos++);58==b;)b=this.readDigits(),c=this.unserialize(),
a.h[b]=c,b=this.buf.charCodeAt(this.pos++);if(104!=b)throw new W("Invalid IntMap format");return a;case 114:a=this.readDigits();if(0>a||a>=this.cache.length)throw new W("Invalid reference");return this.cache[a];case 115:a=this.readDigits();d=this.buf;if(58!=this.buf.charCodeAt(this.pos++)||this.length-this.pos<a)throw new W("Invalid bytes length");var e=Tc.CODES;null==e&&(e=Tc.initCodes(),Tc.CODES=e);var f=this.pos,k=a&3,m=f+(a-k);b=new vb(new ArrayBuffer(3*(a>>2)+(2<=k?k-1:0)));for(c=0;f<m;){var h=
e[d.charCodeAt(f++)],n=e[d.charCodeAt(f++)];b.b[c++]=(h<<2|n>>4)&255;h=e[d.charCodeAt(f++)];b.b[c++]=(n<<4|h>>2)&255;n=e[d.charCodeAt(f++)];b.b[c++]=(h<<6|n)&255}2<=k&&(n=e[d.charCodeAt(f++)],m=e[d.charCodeAt(f++)],b.b[c++]=(n<<2|m>>4)&255,3==k&&(d=e[d.charCodeAt(f++)],b.b[c++]=(m<<4|d>>2)&255));this.pos+=a;this.cache.push(b);return b;case 116:return!0;case 118:return 48<=this.buf.charCodeAt(this.pos)&&57>=this.buf.charCodeAt(this.pos)&&48<=this.buf.charCodeAt(this.pos+1)&&57>=this.buf.charCodeAt(this.pos+
1)&&48<=this.buf.charCodeAt(this.pos+2)&&57>=this.buf.charCodeAt(this.pos+2)&&48<=this.buf.charCodeAt(this.pos+3)&&57>=this.buf.charCodeAt(this.pos+3)&&45==this.buf.charCodeAt(this.pos+4)?(a=ra.strDate(ra.substr(this.buf,this.pos,19)),this.pos+=19):a=new Date(this.readFloat()),this.cache.push(a),a;case 119:a=this.unserialize();b=this.resolver.resolveEnum(a);if(null==b)throw new W("Enum not found "+a);a=this.unserializeEnum(b,this.unserialize());this.cache.push(a);return a;case 120:throw W.wrap(this.unserialize());
case 121:a=this.readDigits();if(58!=this.buf.charCodeAt(this.pos++)||this.length-this.pos<a)throw new W("Invalid string length");b=ra.substr(this.buf,this.pos,a);this.pos+=a;b=decodeURIComponent(b.split("+").join(" "));this.scache.push(b);return b;case 122:return 0}this.pos--;throw new W("Invalid char "+this.buf.charAt(this.pos)+" at position "+this.pos);},__class__:Tc};var bh=function(){};g["haxe._Unserializer.NullResolver"]=bh;bh.__name__="haxe._Unserializer.NullResolver";bh.prototype={resolveClass:function(a){return null},
resolveEnum:function(a){return null},__class__:bh};var Of=function(){this.a1=1;this.a2=0};g["haxe.crypto.Adler32"]=Of;Of.__name__="haxe.crypto.Adler32";Of.read=function(a){var b=new Of,c=a.readByte(),d=a.readByte(),e=a.readByte();a=a.readByte();b.a1=e<<8|a;b.a2=c<<8|d;return b};Of.prototype={a1:null,a2:null,update:function(a,b,c){var d=this.a1,e=this.a2,f=b;for(b+=c;f<b;)c=f++,d=(d+a.b[c])%65521,e=(e+d)%65521;this.a1=d;this.a2=e},equals:function(a){return a.a1==this.a1?a.a2==this.a2:!1},__class__:Of};
var vb=function(a){this.length=a.byteLength;this.b=new Uint8Array(a);this.b.bufferValue=a;a.hxBytes=this;a.bytes=this.b};g["haxe.io.Bytes"]=vb;vb.__name__="haxe.io.Bytes";vb.ofString=function(a,b){b=[];for(var c=0;c<a.length;){var d=a.charCodeAt(c++);55296<=d&&56319>=d&&(d=d-55232<<10|a.charCodeAt(c++)&1023);127>=d?b.push(d):(2047>=d?b.push(192|d>>6):(65535>=d?b.push(224|d>>12):(b.push(240|d>>18),b.push(128|d>>12&63)),b.push(128|d>>6&63)),b.push(128|d&63))}return new vb((new Uint8Array(b)).buffer)};
vb.ofData=function(a){var b=a.hxBytes;return null!=b?b:new vb(a)};vb.prototype={length:null,b:null,data:null,blit:function(a,b,c,d){if(0>a||0>c||0>d||a+d>this.length||c+d>b.length)throw new W(Pf.OutsideBounds);0==c&&d==b.b.byteLength?this.b.set(b.b,a):this.b.set(b.b.subarray(c,c+d),a)},getString:function(a,b,c){if(0>a||0>b||a+b>this.length)throw new W(Pf.OutsideBounds);c="";var d=this.b,e=Sa.fromCharCode,f=a;for(a+=b;f<a;)if(b=d[f++],128>b){if(0==b)break;c+=e(b)}else if(224>b)c+=e((b&63)<<6|d[f++]&
127);else if(240>b){var k=d[f++];c+=e((b&31)<<12|(k&127)<<6|d[f++]&127)}else{k=d[f++];var m=d[f++];b=(b&15)<<18|(k&127)<<12|(m&127)<<6|d[f++]&127;c+=e((b>>10)+55232);c+=e(b&1023|56320)}return c},toString:function(){return this.getString(0,this.length)},__class__:vb};var fc=function(){};g["haxe.ds.ArraySort"]=fc;fc.__name__="haxe.ds.ArraySort";fc.sort=function(a,b){fc.rec(a,b,0,a.length)};fc.rec=function(a,b,c,d){var e=c+d>>1;if(12>d-c){if(!(d<=c))for(e=c+1;e<d;)for(var f=e++;f>c;){if(0>b(a[f],a[f-
1]))fc.swap(a,f-1,f);else break;--f}}else fc.rec(a,b,c,e),fc.rec(a,b,e,d),fc.doMerge(a,b,c,e,d,e-c,d-e)};fc.doMerge=function(a,b,c,d,e,f,k){if(0!=f&&0!=k)if(2==f+k)0>b(a[d],a[c])&&fc.swap(a,d,c);else{if(f>k){var m=f>>1;var h=c+m;var n=fc.lower(a,b,d,e,h);var K=n-d}else K=k>>1,n=d+K,h=fc.upper(a,b,c,d,n),m=h-c;fc.rotate(a,b,h,d,n);d=h+K;fc.doMerge(a,b,c,h,d,m,K);fc.doMerge(a,b,d,n,e,f-m,k-K)}};fc.rotate=function(a,b,c,d,e){if(c!=d&&d!=e)for(b=fc.gcd(e-c,d-c);0!=b--;){for(var f=a[c+b],k=d-c,m=c+b,h=
c+b+k;h!=c+b;)a[m]=a[h],m=h,h=e-h>k?h+k:c+(k-(e-h));a[m]=f}};fc.gcd=function(a,b){for(;0!=b;){var c=a%b;a=b;b=c}return a};fc.upper=function(a,b,c,d,e){d-=c;for(var f,k;0<d;)f=d>>1,k=c+f,0>b(a[e],a[k])?d=f:(c=k+1,d=d-f-1);return c};fc.lower=function(a,b,c,d,e){d-=c;for(var f,k;0<d;)f=d>>1,k=c+f,0>b(a[k],a[e])?(c=k+1,d=d-f-1):d=f;return c};fc.swap=function(a,b,c){var d=a[b];a[b]=a[c];a[c]=d};var Zb=function(){this.h={}};g["haxe.ds.IntMap"]=Zb;Zb.__name__="haxe.ds.IntMap";Zb.__interfaces__=[$b];Zb.prototype=
{h:null,set:function(a,b){this.h[a]=b},remove:function(a){if(!this.h.hasOwnProperty(a))return!1;delete this.h[a];return!0},keys:function(){var a=[],b;for(b in this.h)this.h.hasOwnProperty(b)?a.push(b|0):null;return ra.iter(a)},iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){var a=this.it.next();return this.ref[a]}}},__class__:Zb};var Oh=function(a,b){this.item=a;this.next=b};g["haxe.ds._List.ListNode"]=Oh;Oh.__name__="haxe.ds._List.ListNode";
Oh.prototype={item:null,next:null,__class__:Oh};var jj=function(a){this.head=a};g["haxe.ds._List.ListIterator"]=jj;jj.__name__="haxe.ds._List.ListIterator";jj.prototype={head:null,hasNext:function(){return null!=this.head},next:function(){var a=this.head.item;this.head=this.head.next;return a},__class__:jj};var ij=function(a,b){this.map=a;this.keys=b;this.index=0;this.count=b.length};g["haxe.ds._StringMap.StringMapIterator"]=ij;ij.__name__="haxe.ds._StringMap.StringMapIterator";ij.prototype={map:null,
keys:null,index:null,count:null,hasNext:function(){return this.index<this.count},next:function(){var a=this.map,b=this.keys[this.index++];return null!=F[b]?a.getReserved(b):a.h[b]},__class__:ij};var Ra=function(){this.h={}};g["haxe.ds.StringMap"]=Ra;Ra.__name__="haxe.ds.StringMap";Ra.__interfaces__=[$b];Ra.prototype={h:null,rh:null,set:function(a,b){null!=F[a]?this.setReserved(a,b):this.h[a]=b},setReserved:function(a,b){null==this.rh&&(this.rh={});this.rh["$"+a]=b},getReserved:function(a){return null==
this.rh?null:this.rh["$"+a]},existsReserved:function(a){return null==this.rh?!1:this.rh.hasOwnProperty("$"+a)},remove:function(a){if(null!=F[a]){a="$"+a;if(null==this.rh||!this.rh.hasOwnProperty(a))return!1;delete this.rh[a]}else{if(!this.h.hasOwnProperty(a))return!1;delete this.h[a]}return!0},keys:function(){return ra.iter(this.arrayKeys())},arrayKeys:function(){var a=[],b;for(b in this.h)this.h.hasOwnProperty(b)&&a.push(b);if(null!=this.rh)for(b in this.rh)36==b.charCodeAt(0)&&a.push(b.substr(1));
return a},__class__:Ra};var Bj=function(){this.size=this.pos=0};g["haxe.io.BytesBuffer"]=Bj;Bj.__name__="haxe.io.BytesBuffer";Bj.prototype={buffer:null,view:null,u8:null,pos:null,size:null,addByte:function(a){this.pos==this.size&&this.grow(1);this.view.setUint8(this.pos++,a)},add:function(a){this.pos+a.length>this.size&&this.grow(a.length);if(0!=this.size){var b=new Uint8Array(a.b.buffer,a.b.byteOffset,a.length);this.u8.set(b,this.pos);this.pos+=a.length}},addBytes:function(a,b,c){if(0>b||0>c||b+
c>a.length)throw new W(Pf.OutsideBounds);this.pos+c>this.size&&this.grow(c);0!=this.size&&(a=new Uint8Array(a.b.buffer,a.b.byteOffset+b,c),this.u8.set(a,this.pos),this.pos+=c)},grow:function(a){var b=this.pos+a;for(a=0==this.size?16:this.size;a<b;)a=3*a>>1;b=new ArrayBuffer(a);var c=new Uint8Array(b);0<this.size&&c.set(this.u8);this.size=a;this.buffer=b;this.u8=c;this.view=new DataView(this.buffer)},getBytes:function(){if(0==this.size)return new vb(new ArrayBuffer(0));var a=new vb(this.buffer);a.length=
this.pos;return a},__class__:Bj};var ch=function(){};g["haxe.io.Input"]=ch;ch.__name__="haxe.io.Input";ch.prototype={bigEndian:null,readByte:function(){throw new W("Not implemented");},readBytes:function(a,b,c){var d=c,e=a.b;if(0>b||0>c||b+c>a.length)throw new W(Pf.OutsideBounds);try{for(;0<d;)e[b]=this.readByte(),++b,--d}catch(f){if(ab.lastException=f,!((f instanceof W?f.val:f)instanceof pg))throw f;}return c-d},readFullBytes:function(a,b,c){for(;0<c;){var d=this.readBytes(a,b,c);if(0==d)throw new W(Pf.Blocked);
b+=d;c-=d}},read:function(a){for(var b=new vb(new ArrayBuffer(a)),c=0;0<a;){var d=this.readBytes(b,c,a);if(0==d)throw new W(Pf.Blocked);c+=d;a-=d}return b},readInt16:function(){var a=this.readByte(),b=this.readByte();a=this.bigEndian?b|a<<8:a|b<<8;return 0!=(a&32768)?a-65536:a},readUInt16:function(){var a=this.readByte(),b=this.readByte();return this.bigEndian?b|a<<8:a|b<<8},readInt32:function(){var a=this.readByte(),b=this.readByte(),c=this.readByte(),d=this.readByte();return this.bigEndian?d|c<<
8|b<<16|a<<24:a|b<<8|c<<16|d<<24},readString:function(a,b){var c=new vb(new ArrayBuffer(a));this.readFullBytes(c,0,a);return c.getString(0,a,b)},__class__:ch};var dh=function(a,b,c){null==b&&(b=0);null==c&&(c=a.length-b);if(0>b||0>c||b+c>a.length)throw new W(Pf.OutsideBounds);this.b=a.b;this.pos=b;this.totlen=this.len=c};g["haxe.io.BytesInput"]=dh;dh.__name__="haxe.io.BytesInput";dh.__super__=ch;dh.prototype=v(ch.prototype,{b:null,pos:null,len:null,totlen:null,readByte:function(){if(0==this.len)throw new W(new pg);
this.len--;return this.b[this.pos++]},readBytes:function(a,b,c){if(0>b||0>c||b+c>a.length)throw new W(Pf.OutsideBounds);if(0==this.len&&0<c)throw new W(new pg);this.len<c&&(c=this.len);var d=this.b;a=a.b;for(var e=0,f=c;e<f;){var k=e++;a[b+k]=d[this.pos+k]}this.pos+=c;this.len-=c;return c},__class__:dh});t["haxe.io.Encoding"]={__ename__:"haxe.io.Encoding",__constructs__:["UTF8","RawNative"],UTF8:{_hx_index:0,__enum__:"haxe.io.Encoding",toString:p},RawNative:{_hx_index:1,__enum__:"haxe.io.Encoding",
toString:p}};var pg=function(){};g["haxe.io.Eof"]=pg;pg.__name__="haxe.io.Eof";pg.prototype={toString:function(){return"Eof"},__class__:pg};var Pf=t["haxe.io.Error"]={__ename__:"haxe.io.Error",__constructs__:["Blocked","Overflow","OutsideBounds","Custom"],Blocked:{_hx_index:0,__enum__:"haxe.io.Error",toString:p},Overflow:{_hx_index:1,__enum__:"haxe.io.Error",toString:p},OutsideBounds:{_hx_index:2,__enum__:"haxe.io.Error",toString:p},Custom:(q=function(a){return{_hx_index:3,e:a,__enum__:"haxe.io.Error",
toString:p}},q.__params__=["e"],q)},mf=function(a){switch(a){case ".":case "..":this.dir=a;this.file="";return}var b=a.lastIndexOf("/"),c=a.lastIndexOf("\\");b<c?(this.dir=ra.substr(a,0,c),a=ra.substr(a,c+1,null),this.backslash=!0):c<b?(this.dir=ra.substr(a,0,b),a=ra.substr(a,b+1,null)):this.dir=null;b=a.lastIndexOf(".");-1!=b?(this.ext=ra.substr(a,b+1,null),this.file=ra.substr(a,0,b)):(this.ext=null,this.file=a)};g["haxe.io.Path"]=mf;mf.__name__="haxe.io.Path";mf.directory=function(a){a=new mf(a);
return null==a.dir?"":a.dir};mf.prototype={dir:null,file:null,ext:null,backslash:null,__class__:mf};var Sl=t["haxe.zip.ExtraField"]={__ename__:"haxe.zip.ExtraField",__constructs__:["FUnknown","FInfoZipUnicodePath","FUtf8"],FUnknown:(q=function(a,b){return{_hx_index:0,tag:a,bytes:b,__enum__:"haxe.zip.ExtraField",toString:p}},q.__params__=["tag","bytes"],q),FInfoZipUnicodePath:(q=function(a,b){return{_hx_index:1,name:a,crc:b,__enum__:"haxe.zip.ExtraField",toString:p}},q.__params__=["name","crc"],q),
FUtf8:{_hx_index:2,__enum__:"haxe.zip.ExtraField",toString:p}},nf=t["haxe.zip.Huffman"]={__ename__:"haxe.zip.Huffman",__constructs__:["Found","NeedBit","NeedBits"],Found:(q=function(a){return{_hx_index:0,i:a,__enum__:"haxe.zip.Huffman",toString:p}},q.__params__=["i"],q),NeedBit:(q=function(a,b){return{_hx_index:1,left:a,right:b,__enum__:"haxe.zip.Huffman",toString:p}},q.__params__=["left","right"],q),NeedBits:(q=function(a,b){return{_hx_index:2,n:a,table:b,__enum__:"haxe.zip.Huffman",toString:p}},
q.__params__=["n","table"],q)},mi=function(){};g["haxe.zip.HuffTools"]=mi;mi.__name__="haxe.zip.HuffTools";mi.prototype={treeDepth:function(a){switch(a._hx_index){case 0:return 0;case 1:var b=a.right;a=this.treeDepth(a.left);b=this.treeDepth(b);return 1+(a<b?a:b);case 2:throw new W("assert");}},treeCompress:function(a){var b=this.treeDepth(a);if(0==b)return a;if(1==b){if(1==a._hx_index)return b=a.right,nf.NeedBit(this.treeCompress(a.left),this.treeCompress(b));throw new W("assert");}for(var c=[],
d=0,e=1<<b;d<e;)d++,c.push(nf.Found(-1));this.treeWalk(c,0,0,b,a);return nf.NeedBits(b,c)},treeWalk:function(a,b,c,d,e){if(1==e._hx_index){var f=e.right,k=e.left;0<d?(this.treeWalk(a,b,c+1,d-1,k),this.treeWalk(a,b|1<<c,c+1,d-1,f)):a[b]=this.treeCompress(e)}else a[b]=this.treeCompress(e)},treeMake:function(a,b,c,d){if(d>b)throw new W("Invalid huffman");var e=c<<5|d;if(a.h.hasOwnProperty(e))return nf.Found(a.h[e]);c<<=1;++d;return nf.NeedBit(this.treeMake(a,b,c,d),this.treeMake(a,b,c|1,d))},make:function(a,
b,c,d){if(1==c)return nf.NeedBit(nf.Found(0),nf.Found(0));var e=[],f=[];if(32<d)throw new W("Invalid huffman");for(var k=0;k<d;)k++,e.push(0),f.push(0);for(k=0;k<c;){var m=k++;m=a[m+b];if(m>=d)throw new W("Invalid huffman");e[m]++}k=0;m=1;for(var h=d-1;m<h;){var n=m++;k=k+e[n]<<1;f[n]=k}e=new Zb;for(k=0;k<c;)m=k++,h=a[m+b],0!=h&&(n=f[h-1],f[h-1]=n+1,e.h[n<<5|h]=m);return this.treeCompress(nf.NeedBit(this.treeMake(e,d,0,1),this.treeMake(e,d,1,1)))},__class__:mi};var Cj=function(a){this.buffer=new vb(new ArrayBuffer(65536));
this.pos=0;a&&(this.crc=new Of)};g["haxe.zip._InflateImpl.Window"]=Cj;Cj.__name__="haxe.zip._InflateImpl.Window";Cj.prototype={buffer:null,pos:null,crc:null,slide:function(){null!=this.crc&&this.crc.update(this.buffer,0,32768);var a=new vb(new ArrayBuffer(65536));this.pos-=32768;a.blit(0,this.buffer,32768,this.pos);this.buffer=a},addBytes:function(a,b,c){65536<this.pos+c&&this.slide();this.buffer.blit(this.pos,a,b,c);this.pos+=c},addByte:function(a){65536==this.pos&&this.slide();this.buffer.b[this.pos]=
a&255;this.pos++},getLastChar:function(){return this.buffer.b[this.pos-1]},available:function(){return this.pos},checksum:function(){null!=this.crc&&this.crc.update(this.buffer,0,this.pos);return this.crc},__class__:Cj};var Uc=t["haxe.zip._InflateImpl.State"]={__ename__:"haxe.zip._InflateImpl.State",__constructs__:"Head Block CData Flat Crc Dist DistOne Done".split(" "),Head:{_hx_index:0,__enum__:"haxe.zip._InflateImpl.State",toString:p},Block:{_hx_index:1,__enum__:"haxe.zip._InflateImpl.State",toString:p},
CData:{_hx_index:2,__enum__:"haxe.zip._InflateImpl.State",toString:p},Flat:{_hx_index:3,__enum__:"haxe.zip._InflateImpl.State",toString:p},Crc:{_hx_index:4,__enum__:"haxe.zip._InflateImpl.State",toString:p},Dist:{_hx_index:5,__enum__:"haxe.zip._InflateImpl.State",toString:p},DistOne:{_hx_index:6,__enum__:"haxe.zip._InflateImpl.State",toString:p},Done:{_hx_index:7,__enum__:"haxe.zip._InflateImpl.State",toString:p}},ic=function(a,b,c){null==c&&(c=!0);null==b&&(b=!0);this.isFinal=!1;this.htools=new mi;
this.huffman=this.buildFixedHuffman();this.huffdist=null;this.dist=this.len=0;this.state=b?Uc.Head:Uc.Block;this.input=a;this.needed=this.nbits=this.bits=0;this.output=null;this.outpos=0;this.lengths=[];this.lengths.push(-1);this.lengths.push(-1);this.lengths.push(-1);this.lengths.push(-1);this.lengths.push(-1);this.lengths.push(-1);this.lengths.push(-1);this.lengths.push(-1);this.lengths.push(-1);this.lengths.push(-1);this.lengths.push(-1);this.lengths.push(-1);this.lengths.push(-1);this.lengths.push(-1);
this.lengths.push(-1);this.lengths.push(-1);this.lengths.push(-1);this.lengths.push(-1);this.lengths.push(-1);this.window=new Cj(c)};g["haxe.zip.InflateImpl"]=ic;ic.__name__="haxe.zip.InflateImpl";ic.prototype={nbits:null,bits:null,state:null,isFinal:null,huffman:null,huffdist:null,htools:null,len:null,dist:null,needed:null,output:null,outpos:null,input:null,lengths:null,window:null,buildFixedHuffman:function(){if(null!=ic.FIXED_HUFFMAN)return ic.FIXED_HUFFMAN;for(var a=[],b=0;288>b;){var c=b++;a.push(143>=
c?8:255>=c?9:279>=c?7:8)}ic.FIXED_HUFFMAN=this.htools.make(a,0,288,10);return ic.FIXED_HUFFMAN},readBytes:function(a,b,c){this.needed=c;this.outpos=b;this.output=a;if(0<c)for(;this.inflateLoop(););return c-this.needed},getBits:function(a){for(;this.nbits<a;)this.bits|=this.input.readByte()<<this.nbits,this.nbits+=8;var b=this.bits&(1<<a)-1;this.nbits-=a;this.bits>>=a;return b},getBit:function(){0==this.nbits&&(this.nbits=8,this.bits=this.input.readByte());var a=1==(this.bits&1);this.nbits--;this.bits>>=
1;return a},getRevBits:function(a){return 0==a?0:this.getBit()?1<<a-1|this.getRevBits(a-1):this.getRevBits(a-1)},resetBits:function(){this.nbits=this.bits=0},addBytes:function(a,b,c){this.window.addBytes(a,b,c);this.output.blit(this.outpos,a,b,c);this.needed-=c;this.outpos+=c},addByte:function(a){this.window.addByte(a);this.output.b[this.outpos]=a&255;this.needed--;this.outpos++},addDistOne:function(a){for(var b=this.window.getLastChar(),c=0;c<a;)c++,this.addByte(b)},addDist:function(a,b){this.addBytes(this.window.buffer,
this.window.pos-a,b)},applyHuffman:function(a){switch(a._hx_index){case 0:return a.i;case 1:var b=a.right;a=a.left;return this.applyHuffman(this.getBit()?b:a);case 2:return this.applyHuffman(a.table[this.getBits(a.n)])}},inflateLengths:function(a,b){for(var c=0,d=0;c<b;){var e=this.applyHuffman(this.huffman);switch(e){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:d=e;a[c]=e;++c;break;case 16:e=c+3+this.getBits(2);if(e>b)throw new W("Invalid data");
for(;c<e;)a[c]=d,++c;break;case 17:c+=3+this.getBits(3);if(c>b)throw new W("Invalid data");break;case 18:c+=11+this.getBits(7);if(c>b)throw new W("Invalid data");break;default:throw new W("Invalid data");}}},inflateLoop:function(){switch(this.state._hx_index){case 0:var a=this.input.readByte();if(8!=(a&15))throw new W("Invalid data");var b=this.input.readByte(),c=0!=(b&32);if(0!=((a<<8)+b)%31)throw new W("Invalid data");if(c)throw new W("Unsupported dictionary");this.state=Uc.Block;return!0;case 1:switch(this.isFinal=
this.getBit(),this.getBits(2)){case 0:this.len=this.input.readUInt16();if(this.input.readUInt16()!=65535-this.len)throw new W("Invalid data");this.state=Uc.Flat;a=this.inflateLoop();this.resetBits();return a;case 1:return this.huffman=this.buildFixedHuffman(),this.huffdist=null,this.state=Uc.CData,!0;case 2:a=this.getBits(5)+257;b=this.getBits(5)+1;c=this.getBits(4)+4;for(var d=0;d<c;){var e=d++;this.lengths[ic.CODE_LENGTHS_POS[e]]=this.getBits(3)}for(;19>c;)d=c++,this.lengths[ic.CODE_LENGTHS_POS[d]]=
0;this.huffman=this.htools.make(this.lengths,0,19,8);c=[];d=0;for(e=a+b;d<e;)d++,c.push(0);this.inflateLengths(c,a+b);this.huffdist=this.htools.make(c,a,b,16);this.huffman=this.htools.make(c,0,a,16);this.state=Uc.CData;return!0;default:throw new W("Invalid data");}case 2:b=this.applyHuffman(this.huffman);if(256>b)return this.addByte(b),0<this.needed;if(256==b)this.state=this.isFinal?Uc.Crc:Uc.Block;else{b-=257;a=ic.LEN_EXTRA_BITS_TBL[b];if(-1==a)throw new W("Invalid data");this.len=ic.LEN_BASE_VAL_TBL[b]+
this.getBits(a);b=null==this.huffdist?this.getRevBits(5):this.applyHuffman(this.huffdist);a=ic.DIST_EXTRA_BITS_TBL[b];if(-1==a)throw new W("Invalid data");this.dist=ic.DIST_BASE_VAL_TBL[b]+this.getBits(a);if(this.dist>this.window.available())throw new W("Invalid data");this.state=1==this.dist?Uc.DistOne:Uc.Dist}return!0;case 3:return a=this.len<this.needed?this.len:this.needed,b=this.input.read(a),this.len-=a,this.addBytes(b,0,a),0==this.len&&(this.state=this.isFinal?Uc.Crc:Uc.Block),0<this.needed;
case 4:a=this.window.checksum();if(null==a)return this.state=Uc.Done,!0;b=Of.read(this.input);if(!a.equals(b))throw new W("Invalid CRC");this.state=Uc.Done;return!0;case 5:for(;0<this.len&&0<this.needed;)a=this.len<this.dist?this.len:this.dist,a=this.needed<a?this.needed:a,this.addDist(this.dist,a),this.len-=a;0==this.len&&(this.state=Uc.CData);return 0<this.needed;case 6:return a=this.len<this.needed?this.len:this.needed,this.addDistOne(a),this.len-=a,0==this.len&&(this.state=Uc.CData),0<this.needed;
case 7:return!1}},__class__:ic};var qg=function(a){this.i=a};g["haxe.zip.Reader"]=qg;qg.__name__="haxe.zip.Reader";qg.readZip=function(a){return(new qg(a)).read()};qg.prototype={i:null,readZipDate:function(){var a=this.i.readUInt16(),b=a>>11&31,c=a>>5&63;a&=31;var d=this.i.readUInt16();return new Date((d>>9)+1980,(d>>5&15)-1,d&31,b,c,a<<1)},readExtraFields:function(a){for(var b=new ia;0<a;){if(4>a)throw new W("Invalid extra fields data");var c=this.i.readUInt16(),d=this.i.readUInt16();if(a<d)throw new W("Invalid extra fields data");
if(28789==c){var e=this.i.readByte();if(1!=e){var f=new Bj;f.addByte(e);f.add(this.i.read(d-1));b.add(Sl.FUnknown(c,f.getBytes()))}else c=this.i.readInt32(),e=this.i.read(d-5).toString(),b.add(Sl.FInfoZipUnicodePath(e,c))}else b.add(Sl.FUnknown(c,this.i.read(d)));a-=4+d}return b},readEntryHeader:function(){var a=this.i,b=a.readInt32();if(33639248==b||101010256==b)return null;if(67324752!=b)throw new W("Invalid Zip Data");a.readUInt16();b=a.readUInt16();var c=0!=(b&2048),d=a.readUInt16(),e=0!=d;if(e&&
8!=d)throw new W("Unsupported compression "+d);d=this.readZipDate();var f=a.readInt32(),k=a.readInt32(),m=a.readInt32(),h=a.readInt16(),n=a.readInt16();a=a.readString(h);n=this.readExtraFields(n);c&&n.push(Sl.FUtf8);0!=(b&8)&&(k=-1);return{fileName:a,fileSize:m,fileTime:d,compressed:e,dataSize:k,data:null,crc32:f,extraFields:n}},read:function(){for(var a=new ia,b=null;;){var c=this.readEntryHeader();if(null==c)break;if(0>c.dataSize){null==b&&(b=new vb(new ArrayBuffer(65536)));for(var d=new Bj,e=new ic(this.i,
!1,!1);;){var f=e.readBytes(b,0,65536);d.addBytes(b,0,f);if(65536>f)break}c.data=d.getBytes();c.crc32=this.i.readInt32();134695760==c.crc32&&(c.crc32=this.i.readInt32());c.dataSize=this.i.readInt32();c.fileSize=this.i.readInt32();c.dataSize=c.fileSize;c.compressed=!1}else c.data=this.i.read(c.dataSize);a.add(c)}return a},__class__:qg};var W=function(a){Error.call(this);this.val=a;Error.captureStackTrace&&Error.captureStackTrace(this,W)};g["js._Boot.HaxeError"]=W;W.__name__="js._Boot.HaxeError";W.wrap=
function(a){return a instanceof Error?a:new W(a)};W.__super__=Error;W.prototype=v(Error.prototype,{val:null,__class__:W});var Ka=function(){};g["js.Boot"]=Ka;Ka.__name__="js.Boot";Ka.getClass=function(a){if(null==a)return null;if(a instanceof Array)return Array;var b=a.__class__;if(null!=b)return b;a=Ka.__nativeClassName(a);return null!=a?Ka.__resolveNativeClass(a):null};Ka.__string_rec=function(a,b){if(null==a)return"null";if(5<=b.length)return"<...>";var c=typeof a;"function"==c&&(a.__name__||a.__ename__)&&
(c="object");switch(c){case "function":return"<function>";case "object":if(a.__enum__){var d=t[a.__enum__];c=d.__constructs__[a._hx_index];var e=d[c];if(e.__params__){b+="\t";d=[];var f=0;for(e=e.__params__;f<e.length;){var k=e[f];f+=1;d.push(Ka.__string_rec(a[k],b))}return c+"("+d.join(",")+")"}return c}if(a instanceof Array){c="[";b+="\t";d=0;for(f=a.length;d<f;)e=d++,c+=(0<e?",":"")+Ka.__string_rec(a[e],b);return c+"]"}try{d=a.toString}catch(m){return ab.lastException=m,"???"}if(null!=d&&d!=Object.toString&&
"function"==typeof d&&(c=a.toString(),"[object Object]"!=c))return c;c="{\n";b+="\t";d=null!=a.hasOwnProperty;f=null;for(f in a)d&&!a.hasOwnProperty(f)||"prototype"==f||"__class__"==f||"__super__"==f||"__interfaces__"==f||"__properties__"==f||(2!=c.length&&(c+=", \n"),c+=b+f+" : "+Ka.__string_rec(a[f],b));b=b.substring(1);return c+("\n"+b+"}");case "string":return a;default:return String(a)}};Ka.__interfLoop=function(a,b){if(null==a)return!1;if(a==b)return!0;if(Object.prototype.hasOwnProperty.call(a,
"__interfaces__"))for(var c=a.__interfaces__,d=0,e=c.length;d<e;){var f=d++;f=c[f];if(f==b||Ka.__interfLoop(f,b))return!0}return Ka.__interfLoop(a.__super__,b)};Ka.__instanceof=function(a,b){if(null==b)return!1;switch(b){case Array:return a instanceof Array;case Km:return"boolean"==typeof a;case Lm:return null!=a;case Mm:return"number"==typeof a;case rm:return"number"==typeof a?(a|0)===a:!1;case String:return"string"==typeof a;default:if(null!=a)if("function"==typeof b){if(Ka.__downcastCheck(a,b))return!0}else{if("object"==
typeof b&&Ka.__isNativeObj(b)&&a instanceof b)return!0}else return!1;return b==Rl&&null!=a.__name__||b==tm&&null!=a.__ename__?!0:null!=a.__enum__?t[a.__enum__]==b:!1}};Ka.__downcastCheck=function(a,b){return a instanceof b?!0:b.__isInterface__?Ka.__interfLoop(Ka.getClass(a),b):!1};Ka.__cast=function(a,b){if(null==a||Ka.__instanceof(a,b))return a;throw new W("Cannot cast "+r.string(a)+" to "+r.string(b));};Ka.__nativeClassName=function(a){a=Ka.__toStr.call(a).slice(8,-1);return"Object"==a||"Function"==
a||"Math"==a||"JSON"==a?null:a};Ka.__isNativeObj=function(a){return null!=Ka.__nativeClassName(a)};Ka.__resolveNativeClass=function(a){return D[a]};var Tl=function(){};g["js.html._CanvasElement.CanvasUtil"]=Tl;Tl.__name__="js.html._CanvasElement.CanvasUtil";Tl.getContextWebGL=function(a,b){var c=a.getContext("webgl",b);if(null!=c)return c;a=a.getContext("experimental-webgl",b);return null!=a?a:null};var Ih=function(){this.connected=!0;this.buttons=[];this.axes=[]};g["lime._internal.backend.html5.GameDeviceData"]=
Ih;Ih.__name__="lime._internal.backend.html5.GameDeviceData";Ih.prototype={connected:null,id:null,isGamepad:null,buttons:null,axes:null,__class__:Ih};var Bk=function(a){this.parent=a;this.id=-1;this.gain=1;this.position=new Ak};g["lime._internal.backend.html5.HTML5AudioSource"]=Bk;Bk.__name__="lime._internal.backend.html5.HTML5AudioSource";Bk.prototype={completed:null,gain:null,id:null,length:null,loops:null,parent:null,playing:null,position:null,dispose:function(){},init:function(){},play:function(){if(!this.playing&&
null!=this.parent.buffer&&null!=this.parent.buffer.__srcHowl){this.playing=!0;var a=this.getCurrentTime();this.completed=!1;var b=this.parent.buffer.__srcHowl._volume;this.parent.buffer.__srcHowl._volume=this.parent.get_gain();this.id=this.parent.buffer.__srcHowl.play();this.parent.buffer.__srcHowl._volume=b;this.setPosition(this.parent.get_position());this.parent.buffer.__srcHowl.on("end",u(this,this.howl_onEnd),this.id);this.setCurrentTime(a)}},stop:function(){this.playing=!1;null!=this.parent.buffer&&
null!=this.parent.buffer.__srcHowl&&(this.parent.buffer.__srcHowl.stop(this.id),this.parent.buffer.__srcHowl.off("end",u(this,this.howl_onEnd),this.id))},howl_onEnd:function(){this.playing=!1;0<this.loops?(this.loops--,this.stop(),this.play()):(null!=this.parent.buffer&&null!=this.parent.buffer.__srcHowl&&(this.parent.buffer.__srcHowl.stop(this.id),this.parent.buffer.__srcHowl.off("end",u(this,this.howl_onEnd),this.id)),this.completed=!0,this.parent.onComplete.dispatch())},getCurrentTime:function(){if(-1==
this.id)return 0;if(this.completed)return this.getLength();if(null!=this.parent.buffer&&null!=this.parent.buffer.__srcHowl){var a=(1E3*this.parent.buffer.__srcHowl.seek(this.id)|0)-this.parent.offset;return 0>a?0:a}return 0},setCurrentTime:function(a){if(null!=this.parent.buffer&&null!=this.parent.buffer.__srcHowl){var b=(a+this.parent.offset)/1E3;0>b&&(b=0);this.parent.buffer.__srcHowl.seek(b,this.id)}return a},getGain:function(){return this.gain},setGain:function(a){null!=this.parent.buffer&&null!=
this.parent.buffer.__srcHowl&&-1!=this.id&&this.parent.buffer.__srcHowl.volume(a,this.id);return this.gain=a},getLength:function(){return 0!=this.length?this.length:null!=this.parent.buffer&&null!=this.parent.buffer.__srcHowl?1E3*this.parent.buffer.__srcHowl.duration()|0:0},setLength:function(a){return this.length=a},setLoops:function(a){return this.loops=a},getPosition:function(){return this.position},setPosition:function(a){this.position.x=a.x;this.position.y=a.y;this.position.z=a.z;this.position.w=
a.w;null!=this.parent.buffer.__srcHowl&&null!=this.parent.buffer.__srcHowl.pos&&this.parent.buffer.__srcHowl.pos(this.position.x,this.position.y,this.position.z,this.id);return this.position},__class__:Bk};var ea=function(){this.validStatus0=(new Ba("Tizen","gi")).match(window.navigator.userAgent)};g["lime._internal.backend.html5.HTML5HTTPRequest"]=ea;ea.__name__="lime._internal.backend.html5.HTML5HTTPRequest";ea.loadImage=function(a){var b=new Vc;ea.activeRequests<ea.requestLimit?(ea.activeRequests++,
ea.__loadImage(a,b,0)):ea.requestQueue.add({instance:null,uri:a,promise:b,type:"IMAGE",options:0});return b.future};ea.loadImageFromBytes=function(a,b){var c=URL.createObjectURL(new Blob([a.b.bufferValue],{type:b}));return null!=c?(a=new Vc,ea.activeRequests<ea.requestLimit?(ea.activeRequests++,ea.__loadImage(c,a,1)):ea.requestQueue.add({instance:null,uri:c,promise:a,type:"IMAGE",options:1}),a.future):ea.loadImage("data:"+b+";base64,"+me.encode(a))};ea.processQueue=function(){if(ea.activeRequests<
ea.requestLimit&&0<ea.requestQueue.length){ea.activeRequests++;var a=ea.requestQueue.pop();switch(a.type){case "BINARY":a.instance.__loadData(a.uri,a.promise);break;case "IMAGE":ea.__loadImage(a.uri,a.promise,a.options);break;case "TEXT":a.instance.__loadText(a.uri,a.promise);break;default:ea.activeRequests--}}};ea.__fixHostname=function(a){return null==a?"":a};ea.__fixPort=function(a,b){if(null==a||""==a)switch(b){case "ftp:":return"21";case "gopher:":return"70";case "http:":return"80";case "https:":return"443";
case "ws:":return"80";case "wss:":return"443";default:return""}return a};ea.__fixProtocol=function(a){return null==a||""==a?"http:":a};ea.__isInMemoryURI=function(a){return Y.startsWith(a,"data:")?!0:Y.startsWith(a,"blob:")};ea.__isSameOrigin=function(a){if(null==a||""==a||ea.__isInMemoryURI(a))return!0;null==ea.originElement&&(ea.originElement=window.document.createElement("a"),ea.originHostname=ea.__fixHostname(window.location.hostname),ea.originProtocol=ea.__fixProtocol(window.location.protocol),
ea.originPort=ea.__fixPort(window.location.port,ea.originProtocol));var b=ea.originElement;b.href=a;""==b.hostname&&(b.href=b.href);var c=ea.__fixHostname(b.hostname);a=ea.__fixProtocol(b.protocol);b=ea.__fixPort(b.port,a);c=""==c||c==ea.originHostname;b=""==b||b==ea.originPort;return"file:"!=a&&c?b:!1};ea.__loadImage=function(a,b,c){var d=new Image;ea.__isSameOrigin(a)||(d.crossOrigin="Anonymous");null==ea.supportsImageProgress&&(ea.supportsImageProgress="onprogress"in d);if(ea.supportsImageProgress||
ea.__isInMemoryURI(a))d.addEventListener("load",function(e){ea.__revokeBlobURI(a,c);e=new Nd(null,d.width,d.height);e.__srcImage=d;ea.activeRequests--;ea.processQueue();b.complete(new wb(e))},!1),d.addEventListener("progress",function(a){b.progress(a.loaded,a.total)},!1),d.addEventListener("error",function(d){ea.__revokeBlobURI(a,c);ea.activeRequests--;ea.processQueue();b.error(d.detail)},!1),d.src=a;else{var e=new XMLHttpRequest;e.onload=function(a){ea.activeRequests--;ea.processQueue();(new wb).__fromBytes(vb.ofData(e.response),
function(a){b.complete(a)})};e.onerror=function(a){b.error(a.message)};e.onprogress=function(a){a.lengthComputable&&b.progress(a.loaded,a.total)};e.open("GET",a,!0);e.responseType="arraybuffer";e.overrideMimeType("text/plain; charset=x-user-defined");e.send(null)}};ea.__revokeBlobURI=function(a,b){0!=(b&1)&&URL.revokeObjectURL(a)};ea.prototype={binary:null,parent:null,request:null,validStatus0:null,init:function(a){this.parent=a},load:function(a,b,c){this.request=new XMLHttpRequest;"POST"==this.parent.method?
this.request.upload.addEventListener("progress",b,!1):this.request.addEventListener("progress",b,!1);this.request.onreadystatechange=c;b="";if(null==this.parent.data){for(c=this.parent.formData.keys();c.hasNext();){var d=c.next();0<b.length&&(b+="&");var e=this.parent.formData,f=null!=F[d]?e.getReserved(d):e.h[d];if(-1<d.indexOf("[]")&&f instanceof Array){e=[];for(f=N(f);f.hasNext();){var k=f.next();e.push(encodeURIComponent(k))}e=e.join("&amp;"+d+"=");b+=encodeURIComponent(d)+"="+e}else d=encodeURIComponent(d)+
"=",e=r.string(f),b+=d+encodeURIComponent(e)}"GET"==this.parent.method&&""!=b&&(a=-1<a.indexOf("?")?a+("&"+b):a+("?"+b),b="")}this.request.open(r.string(this.parent.method),a,!0);0<this.parent.timeout&&(this.request.timeout=this.parent.timeout);this.binary&&(this.request.responseType="arraybuffer");a=null;c=0;for(d=this.parent.headers;c<d.length;)e=d[c],++c,"Content-Type"==e.name?a=e.value:this.request.setRequestHeader(e.name,e.value);null!=this.parent.contentType&&(a=this.parent.contentType);null==
a&&(null!=this.parent.data?a="application/octet-stream":""!=b&&(a="application/x-www-form-urlencoded"));null!=a&&this.request.setRequestHeader("Content-Type",a);this.parent.withCredentials&&(this.request.withCredentials=!0);null!=this.parent.data?this.request.send(this.parent.data.b.bufferValue):this.request.send(b)},loadData:function(a){var b=new Vc;ea.activeRequests<ea.requestLimit?(ea.activeRequests++,this.__loadData(a,b)):ea.requestQueue.add({instance:this,uri:a,promise:b,type:"BINARY",options:0});
return b.future},loadText:function(a){var b=new Vc;ea.activeRequests<ea.requestLimit?(ea.activeRequests++,this.__loadText(a,b)):ea.requestQueue.add({instance:this,uri:a,promise:b,type:"TEXT",options:0});return b.future},processResponse:function(){if(this.parent.enableResponseHeaders){this.parent.responseHeaders=[];for(var a,b,c=0,d=this.request.getAllResponseHeaders().split("\n");c<d.length;)b=d[c],++c,a=Y.trim(ra.substr(b,0,b.indexOf(":"))),b=Y.trim(ra.substr(b,b.indexOf(":")+1,null)),""!=a&&this.parent.responseHeaders.push(new eh(a,
b))}this.parent.responseStatus=this.request.status},__loadData:function(a,b){var c=this;this.binary=!0;this.load(a,function(a){b.progress(a.loaded,a.total)},function(a){4==c.request.readyState&&(null!=c.request.status&&(200<=c.request.status&&400>c.request.status||c.validStatus0&&0==c.request.status)?(a=null,""==c.request.responseType?null!=c.request.responseText&&(a=vb.ofString(c.request.responseText)):null!=c.request.response&&(a=vb.ofData(c.request.response)),c.processResponse(),b.complete(a)):
(c.processResponse(),b.error(c.request.status)),c.request=null,ea.activeRequests--,ea.processQueue())})},__loadText:function(a,b){var c=this;this.binary=!1;this.load(a,function(a){b.progress(a.loaded,a.total)},function(a){4==c.request.readyState&&(null!=c.request.status&&(200<=c.request.status&&400>=c.request.status||c.validStatus0&&0==c.request.status)?(c.processResponse(),b.complete(c.request.responseText)):(c.processResponse(),b.error(c.request.status)),c.request=null,ea.activeRequests--,ea.processQueue())})},
__class__:ea};var Va=function(a){this.unusedTouchesPool=new ia;this.scale=1;this.currentTouches=new Zb;this.parent=a;this.cursor=dd.DEFAULT;this.cacheMouseY=this.cacheMouseX=0;var b=a.__attributes;Object.prototype.hasOwnProperty.call(b,"context")||(b.context={});this.renderType=b.context.type;Object.prototype.hasOwnProperty.call(b,"element")&&(a.element=b.element);var c=a.element;Object.prototype.hasOwnProperty.call(b,"allowHighDPI")&&b.allowHighDPI&&"dom"!=this.renderType&&(this.scale=window.devicePixelRatio);
a.__scale=this.scale;this.setWidth=Object.prototype.hasOwnProperty.call(b,"width")?b.width:0;this.setHeight=Object.prototype.hasOwnProperty.call(b,"height")?b.height:0;a.__width=this.setWidth;a.__height=this.setHeight;a.id=Va.windowID++;c instanceof HTMLCanvasElement?this.canvas=c:"dom"==this.renderType?this.div=window.document.createElement("div"):this.canvas=window.document.createElement("canvas");if(null!=this.canvas){var d=this.canvas.style;d.setProperty("-webkit-transform","translateZ(0)",null);
d.setProperty("transform","translateZ(0)",null)}else null!=this.div&&(d=this.div.style,d.setProperty("-webkit-transform","translate3D(0,0,0)",null),d.setProperty("transform","translate3D(0,0,0)",null),d.position="relative",d.overflow="hidden",d.setProperty("-webkit-user-select","none",null),d.setProperty("-moz-user-select","none",null),d.setProperty("-ms-user-select","none",null),d.setProperty("-o-user-select","none",null));0==a.__width&&0==a.__height&&(null!=c?(a.__width=c.clientWidth,a.__height=
c.clientHeight):(a.__width=window.innerWidth,a.__height=window.innerHeight),this.cacheElementWidth=a.__width,this.cacheElementHeight=a.__height,this.resizeElement=!0);null!=this.canvas?(this.canvas.width=Math.round(a.__width*this.scale),this.canvas.height=Math.round(a.__height*this.scale),this.canvas.style.width=a.__width+"px",this.canvas.style.height=a.__height+"px"):(this.div.style.width=a.__width+"px",this.div.style.height=a.__height+"px");if(Object.prototype.hasOwnProperty.call(b,"resizable")&&
b.resizable||!Object.prototype.hasOwnProperty.call(b,"width")&&0==this.setWidth&&0==this.setHeight)a.__resizable=!0;this.updateSize();if(null!=c){null!=this.canvas?c!=this.canvas&&c.appendChild(this.canvas):c.appendChild(this.div);b="mousedown mouseenter mouseleave mousemove mouseup wheel".split(" ");for(d=0;d<b.length;){var e=b[d];++d;c.addEventListener(e,u(this,this.handleMouseEvent),!0)}c.addEventListener("contextmenu",u(this,this.handleContextMenuEvent),!0);c.addEventListener("dragstart",u(this,
this.handleDragEvent),!0);c.addEventListener("dragover",u(this,this.handleDragEvent),!0);c.addEventListener("drop",u(this,this.handleDragEvent),!0);c.addEventListener("touchstart",u(this,this.handleTouchEvent),!0);c.addEventListener("touchmove",u(this,this.handleTouchEvent),!0);c.addEventListener("touchend",u(this,this.handleTouchEvent),!0);c.addEventListener("touchcancel",u(this,this.handleTouchEvent),!0);c.addEventListener("gamepadconnected",u(this,this.handleGamepadEvent),!0);c.addEventListener("gamepaddisconnected",
u(this,this.handleGamepadEvent),!0)}this.createContext();"webgl"==a.context.type&&(this.canvas.addEventListener("webglcontextlost",u(this,this.handleContextEvent),!1),this.canvas.addEventListener("webglcontextrestored",u(this,this.handleContextEvent),!1))};g["lime._internal.backend.html5.HTML5Window"]=Va;Va.__name__="lime._internal.backend.html5.HTML5Window";Va.prototype={canvas:null,div:null,cacheElementHeight:null,cacheElementWidth:null,cacheMouseX:null,cacheMouseY:null,cursor:null,currentTouches:null,
parent:null,primaryTouch:null,renderType:null,resizeElement:null,scale:null,setHeight:null,setWidth:null,textInputEnabled:null,unusedTouchesPool:null,close:function(){this.parent.application.__removeWindow(this.parent)},createContext:function(){var a=new Ck,b=this.parent.__attributes.context;a.window=this.parent;a.attributes=b;if(null!=this.div)a.dom=this.div,a.type="dom",a.version="";else if(null!=this.canvas){var c=null,d="canvas"==this.renderType,e="opengl"==this.renderType||"opengles"==this.renderType||
"webgl"==this.renderType,f=!Object.prototype.hasOwnProperty.call(b,"version")||"1"!=b.version,k=!1;if(e||!d&&(!Object.prototype.hasOwnProperty.call(b,"hardware")||b.hardware)){d=Object.prototype.hasOwnProperty.call(b,"background")&&null==b.background;e=Object.prototype.hasOwnProperty.call(b,"colorDepth")?b.colorDepth:16;var m=Object.prototype.hasOwnProperty.call(b,"antialiasing")&&0<b.antialiasing,h=Object.prototype.hasOwnProperty.call(b,"depth")?b.depth:!0;b=Object.prototype.hasOwnProperty.call(b,
"stencil")&&b.stencil;b={alpha:d||16<e,antialias:m,depth:h,premultipliedAlpha:!0,stencil:b,preserveDrawingBuffer:!1,failIfMajorPerformanceCaveat:!0};d=["webgl","experimental-webgl"];f&&d.unshift("webgl2");for(f=0;f<d.length&&(e=d[f],++f,c=this.canvas.getContext(e,b),null!=c&&"webgl2"==e&&(k=!0),null==c););}null==c?(a.canvas2D=this.canvas.getContext("2d"),a.type="canvas",a.version=""):(a.webgl=sb.fromWebGL2RenderContext(c),k&&(a.webgl2=c),null==fh.context&&(fh.context=c,fh.type="webgl",fh.version=
k?2:1),a.type="webgl",a.version=k?"2":"1")}this.parent.context=a},handleContextEvent:function(a){switch(a.type){case "webglcontextlost":a.cancelable&&a.preventDefault();this.parent.context=null;this.parent.onRenderContextLost.dispatch();break;case "webglcontextrestored":this.createContext(),this.parent.onRenderContextRestored.dispatch(this.parent.context)}},handleContextMenuEvent:function(a){(this.parent.onMouseUp.canceled||this.parent.onMouseDown.canceled)&&a.cancelable&&a.preventDefault()},handleCutOrCopyEvent:function(a){a.clipboardData.setData("text/plain",
Mc.get_text());a.cancelable&&a.preventDefault()},handleDragEvent:function(a){switch(a.type){case "dragover":return a.preventDefault(),!1;case "dragstart":if("img"==Ka.__cast(a.target,HTMLElement).nodeName.toLowerCase()&&a.cancelable)return a.preventDefault(),!1;break;case "drop":if(null!=a.dataTransfer&&0<a.dataTransfer.files.length)return this.parent.onDropFile.dispatch(a.dataTransfer.files),a.preventDefault(),!1}return!0},handleFocusEvent:function(a){var b=this;this.textInputEnabled&&(null==a.relatedTarget||
this.isDescendent(a.relatedTarget))&&Ne.delay(function(){b.textInputEnabled&&Va.textInput.focus()},20)},handleGamepadEvent:function(a){switch(a.type){case "gamepadconnected":sc.__connect(a.gamepad.index);"standard"==a.gamepad.mapping&&lc.__connect(a.gamepad.index);break;case "gamepaddisconnected":sc.__disconnect(a.gamepad.index),lc.__disconnect(a.gamepad.index)}},handleInputEvent:function(a){Va.textInput.value!=Va.dummyCharacter&&(a=Y.replace(Va.textInput.value,Va.dummyCharacter,""),0<a.length&&this.parent.onTextInput.dispatch(a),
Va.textInput.value=Va.dummyCharacter)},handleMouseEvent:function(a){if("wheel"!=a.type){if(null!=this.parent.element)if(null!=this.canvas){var b=this.canvas.getBoundingClientRect();var c=this.parent.__width/b.width*(a.clientX-b.left);b=this.parent.__height/b.height*(a.clientY-b.top)}else null!=this.div?(b=this.div.getBoundingClientRect(),c=a.clientX-b.left,b=a.clientY-b.top):(b=this.parent.element.getBoundingClientRect(),c=this.parent.__width/b.width*(a.clientX-b.left),b=this.parent.__height/b.height*
(a.clientY-b.top));else c=a.clientX,b=a.clientY;switch(a.type){case "mousedown":a.currentTarget==this.parent.element&&window.addEventListener("mouseup",u(this,this.handleMouseEvent));this.parent.onMouseDown.dispatch(c,b,a.button);this.parent.onMouseDown.canceled&&a.cancelable&&a.preventDefault();break;case "mouseenter":a.target==this.parent.element&&(this.parent.onEnter.dispatch(),this.parent.onEnter.canceled&&a.cancelable&&a.preventDefault());break;case "mouseleave":a.target==this.parent.element&&
(this.parent.onLeave.dispatch(),this.parent.onLeave.canceled&&a.cancelable&&a.preventDefault());break;case "mousemove":if(c!=this.cacheMouseX||b!=this.cacheMouseY)this.parent.onMouseMove.dispatch(c,b),this.parent.onMouseMoveRelative.dispatch(c-this.cacheMouseX,b-this.cacheMouseY),(this.parent.onMouseMove.canceled||this.parent.onMouseMoveRelative.canceled)&&a.cancelable&&a.preventDefault();break;case "mouseup":window.removeEventListener("mouseup",u(this,this.handleMouseEvent)),a.currentTarget==this.parent.element&&
a.stopPropagation(),this.parent.onMouseUp.dispatch(c,b,a.button),this.parent.onMouseUp.canceled&&a.cancelable&&a.preventDefault()}this.cacheMouseX=c;this.cacheMouseY=b}else{switch(a.deltaMode){case 0:c=ni.PIXELS;break;case 1:c=ni.LINES;break;case 2:c=ni.PAGES;break;default:c=ni.UNKNOWN}this.parent.onMouseWheel.dispatch(a.deltaX,-a.deltaY,c);this.parent.onMouseWheel.canceled&&a.cancelable&&a.preventDefault()}},handlePasteEvent:function(a){if(-1<a.clipboardData.types.indexOf("text/plain")){var b=a.clipboardData.getData("text/plain");
Mc.set_text(b);this.textInputEnabled&&this.parent.onTextInput.dispatch(b);a.cancelable&&a.preventDefault()}},handleResizeEvent:function(a){this.primaryTouch=null;this.updateSize()},handleTouchEvent:function(a){a.cancelable&&a.preventDefault();var b=null;null!=this.parent.element&&(b=null!=this.canvas?this.canvas.getBoundingClientRect():null!=this.div?this.div.getBoundingClientRect():this.parent.element.getBoundingClientRect());var c=this.setWidth,d=this.setHeight;if(0==c||0==d)null!=b?(c=b.width,
d=b.height):d=c=1;for(var e,f,k,m,h,n=0,K=a.changedTouches;n<K.length;){var l=K[n];++n;null!=b?(f=c/b.width*(l.clientX-b.left),k=d/b.height*(l.clientY-b.top)):(f=l.clientX,k=l.clientY);if("touchstart"==a.type)e=this.unusedTouchesPool.pop(),null==e?e=new Fc(f/c,k/d,l.identifier,0,0,l.force,this.parent.id):(e.x=f/c,e.y=k/d,e.id=l.identifier,e.dx=0,e.dy=0,e.pressure=l.force,e.device=this.parent.id),this.currentTouches.h[l.identifier]=e,Fc.onStart.dispatch(e),null==this.primaryTouch&&(this.primaryTouch=
e),e==this.primaryTouch&&this.parent.onMouseDown.dispatch(f,k,0);else if(e=this.currentTouches.h[l.identifier],null!=e)switch(m=e.x,h=e.y,e.x=f/c,e.y=k/d,e.dx=e.x-m,e.dy=e.y-h,e.pressure=l.force,a.type){case "touchcancel":Fc.onCancel.dispatch(e);this.currentTouches.remove(l.identifier);this.unusedTouchesPool.add(e);e==this.primaryTouch&&(this.primaryTouch=null);break;case "touchend":Fc.onEnd.dispatch(e);this.currentTouches.remove(l.identifier);this.unusedTouchesPool.add(e);e==this.primaryTouch&&(this.parent.onMouseUp.dispatch(f,
k,0),this.primaryTouch=null);break;case "touchmove":Fc.onMove.dispatch(e),e==this.primaryTouch&&this.parent.onMouseMove.dispatch(f,k)}}},isDescendent:function(a){if(a==this.parent.element)return!0;for(;null!=a;){if(a.parentNode==this.parent.element)return!0;a=a.parentNode}return!1},readPixels:function(a){if(null!=this.canvas){var b=new od(0,0,this.canvas.width,this.canvas.height);null==a?a=b:a.intersection(b,a);if(0<a.width&&0<a.height)return b=window.document.createElement("canvas"),b.width=a.width|
0,b.height=a.height|0,b.getContext("2d").drawImage(this.canvas,-a.x,-a.y),wb.fromCanvas(b)}return null},setClipboard:function(a){null==Va.textArea&&(Va.textArea=window.document.createElement("textarea"),Va.textArea.style.height="0px",Va.textArea.style.left="-100px",Va.textArea.style.opacity="0",Va.textArea.style.position="fixed",Va.textArea.style.top="-100px",Va.textArea.style.width="0px",window.document.body.appendChild(Va.textArea));Va.textArea.value=a;Va.textArea.focus();Va.textArea.select();window.document.queryCommandEnabled("copy")&&
window.document.execCommand("copy")},setCursor:function(a){if(this.cursor!=a){if(null==a)this.parent.element.style.cursor="none";else{switch(a._hx_index){case 0:var b="default";break;case 1:b="crosshair";break;case 3:b="move";break;case 4:b="pointer";break;case 5:b="nesw-resize";break;case 6:b="ns-resize";break;case 7:b="nwse-resize";break;case 8:b="ew-resize";break;case 9:b="text";break;case 10:b="wait";break;case 11:b="wait";break;default:b="auto"}this.parent.element.style.cursor=b}this.cursor=
a}return this.cursor},setTextInputEnabled:function(a){a?(null==Va.textInput&&(Va.textInput=window.document.createElement("input"),Va.textInput.type="text",Va.textInput.style.position="absolute",Va.textInput.style.opacity="0",Va.textInput.style.color="transparent",Va.textInput.value=Va.dummyCharacter,Va.textInput.autocapitalize="off",Va.textInput.autocorrect="off",Va.textInput.autocomplete="off",Va.textInput.style.left="0px",Va.textInput.style.top="50%",(new Ba("(iPad|iPhone|iPod).*OS 8_","gi")).match(window.navigator.userAgent)?
(Va.textInput.style.fontSize="0px",Va.textInput.style.width="0px",Va.textInput.style.height="0px"):(Va.textInput.style.width="1px",Va.textInput.style.height="1px"),Va.textInput.style.pointerEvents="none",Va.textInput.style.zIndex="-10000000"),null==Va.textInput.parentNode&&this.parent.element.appendChild(Va.textInput),this.textInputEnabled||(Va.textInput.addEventListener("input",u(this,this.handleInputEvent),!0),Va.textInput.addEventListener("blur",u(this,this.handleFocusEvent),!0),Va.textInput.addEventListener("cut",
u(this,this.handleCutOrCopyEvent),!0),Va.textInput.addEventListener("copy",u(this,this.handleCutOrCopyEvent),!0),Va.textInput.addEventListener("paste",u(this,this.handlePasteEvent),!0)),Va.textInput.focus(),Va.textInput.select()):null!=Va.textInput&&(Va.textInput.removeEventListener("input",u(this,this.handleInputEvent),!0),Va.textInput.removeEventListener("blur",u(this,this.handleFocusEvent),!0),Va.textInput.removeEventListener("cut",u(this,this.handleCutOrCopyEvent),!0),Va.textInput.removeEventListener("copy",
u(this,this.handleCutOrCopyEvent),!0),Va.textInput.removeEventListener("paste",u(this,this.handlePasteEvent),!0),Va.textInput.blur());return this.textInputEnabled=a},updateSize:function(){if(this.parent.__resizable){if(null!=this.parent.element){var a=this.parent.element.clientWidth;var b=this.parent.element.clientHeight}else a=window.innerWidth,b=window.innerHeight;if(a!=this.cacheElementWidth||b!=this.cacheElementHeight){this.cacheElementWidth=a;this.cacheElementHeight=b;var c=this.resizeElement||
0==this.setWidth&&0==this.setHeight;if(null!=this.parent.element&&(null==this.div||null!=this.div&&c))if(c){if(this.parent.__width!=a||this.parent.__height!=b)this.parent.__width=a,this.parent.__height=b,null!=this.canvas?this.parent.element!=this.canvas&&(this.canvas.width=Math.round(a*this.scale),this.canvas.height=Math.round(b*this.scale),this.canvas.style.width=a+"px",this.canvas.style.height=b+"px"):(this.div.style.width=a+"px",this.div.style.height=b+"px"),this.parent.onResize.dispatch(a,b)}else{c=
0!=this.setWidth?a/this.setWidth:1;var d=0!=this.setHeight?b/this.setHeight:1,e=a,f=b,k=0,m=0;c<d?(f=Math.floor(this.setHeight*c),m=Math.floor((b-f)/2)):(e=Math.floor(this.setWidth*d),k=Math.floor((a-e)/2));null!=this.canvas?this.parent.element!=this.canvas&&(this.canvas.style.width=e+"px",this.canvas.style.height=f+"px",this.canvas.style.marginLeft=k+"px",this.canvas.style.marginTop=m+"px"):(this.div.style.width=e+"px",this.div.style.height=f+"px",this.div.style.marginLeft=k+"px",this.div.style.marginTop=
m+"px")}}}},__class__:Va};var me=function(){};g["lime._internal.format.Base64"]=me;me.__name__="lime._internal.format.Base64";me.encode=function(a){var b=[],c=me.DICTIONARY,d=me.EXTENDED_DICTIONARY,e=a.length,f=Math.floor(e/3),k=2*f;b.length=2*Math.ceil(e/3);for(var m=0,h=0,n;h<k;)n=a.b[m]<<16|a.b[m+1]<<8|a.b[m+2],b[h]=d[n>>12&4095],b[h+1]=d[n&4095],m+=3,h+=2;switch(e-3*f){case 1:n=a.b[m]<<16;b[h]=d[n>>12&4095];b[h+1]="==";break;case 2:n=a.b[m]<<16|a.b[m+1]<<8,b[h]=d[n>>12&4095],b[h+1]=c[n>>6&63]+
"="}return b.join("")};var Ul=function(){};g["lime._internal.format.Deflate"]=Ul;Ul.__name__="lime._internal.format.Deflate";Ul.decompress=function(a){a=pako.inflateRaw(a.b.bufferValue);return vb.ofData(a)};var Vl=function(){};g["lime._internal.format.GZip"]=Vl;Vl.__name__="lime._internal.format.GZip";Vl.decompress=function(a){a=pako.ungzip(a.b.bufferValue);return vb.ofData(a)};var Wl=function(){};g["lime._internal.format.LZMA"]=Wl;Wl.__name__="lime._internal.format.LZMA";Wl.decompress=function(a){return null};
var Xl=function(){};g["lime._internal.format.Zlib"]=Xl;Xl.__name__="lime._internal.format.Zlib";Xl.decompress=function(a){a=pako.inflate(a.b.bufferValue);return vb.ofData(a)};var La=function(){};g["lime._internal.graphics.ImageCanvasUtil"]=La;La.__name__="lime._internal.graphics.ImageCanvasUtil";La.colorTransform=function(a,b,c){La.convertToData(a);Sb.colorTransform(a,b,c)};La.convertToCanvas=function(a,b){null==b&&(b=!1);var c=a.buffer;null!=c.__srcImage?(null==c.__srcCanvas&&(La.createCanvas(a,
c.__srcImage.width,c.__srcImage.height),c.__srcContext.drawImage(c.__srcImage,0,0)),c.__srcImage=null):null==c.__srcCanvas&&null!=c.data?(a.set_transparent(!0),La.createCanvas(a,c.width,c.height),La.createImageData(a),c.__srcContext.putImageData(c.__srcImageData,0,0)):a.type==Wc.DATA&&null!=c.__srcImageData&&a.dirty&&(c.__srcContext.putImageData(c.__srcImageData,0,0),a.dirty=!1);b?(c.data=null,c.__srcImageData=null):null==c.data&&null!=c.__srcImageData&&(c.data=c.__srcImageData.data);a.type=Wc.CANVAS};
La.convertToData=function(a,b){null==b&&(b=!1);var c=a.buffer;null!=c.__srcImage&&La.convertToCanvas(a);if(null!=c.__srcCanvas&&null==c.data)La.createImageData(a),a.type==Wc.CANVAS&&(a.dirty=!1);else if(a.type==Wc.CANVAS&&null!=c.__srcCanvas&&a.dirty){if(null==c.__srcImageData)La.createImageData(a);else{c.__srcImageData=c.__srcContext.getImageData(0,0,c.width,c.height);var d=c.__srcImageData.data.buffer;d=null!=d?new Uint8Array(d):null;c.data=d}a.dirty=!1}b&&(a.buffer.__srcCanvas=null,a.buffer.__srcContext=
null);a.type=Wc.DATA};La.copyChannel=function(a,b,c,d,e,f){La.convertToData(b);La.convertToData(a);Sb.copyChannel(a,b,c,d,e,f)};La.copyPixels=function(a,b,c,d,e,f,k){null==k&&(k=!1);null==d||d.x>=a.width||d.y>=a.height||null==c||1>c.width||1>c.height||(null!=e&&e.get_transparent()&&(null==f&&(f=new of),b=b.clone(),b.copyChannel(e,new od(c.x+f.x,c.y+f.y,c.width,c.height),new of(c.x,c.y),oi.ALPHA,oi.ALPHA)),La.convertToCanvas(a,!0),k||a.get_transparent()&&b.get_transparent()&&a.buffer.__srcContext.clearRect(d.x+
a.offsetX,d.y+a.offsetY,c.width+a.offsetX,c.height+a.offsetY),La.convertToCanvas(b),null!=b.buffer.get_src()&&(a.buffer.__srcContext.globalCompositeOperation="source-over",a.buffer.__srcContext.drawImage(b.buffer.get_src(),c.x+b.offsetX|0,c.y+b.offsetY|0,c.width|0,c.height|0,d.x+a.offsetX|0,d.y+a.offsetY|0,c.width|0,c.height|0)),a.dirty=!0,a.version++)};La.createCanvas=function(a,b,c){var d=a.buffer;null==d.__srcCanvas&&(d.__srcCanvas=window.document.createElement("canvas"),d.__srcCanvas.width=b,
d.__srcCanvas.height=c,a.get_transparent()?d.__srcContext=d.__srcCanvas.getContext("2d"):(a.get_transparent()||d.__srcCanvas.setAttribute("moz-opaque","true"),d.__srcContext=d.__srcCanvas.getContext("2d",{alpha:!1})))};La.createImageData=function(a){a=a.buffer;if(null==a.__srcImageData){null==a.data?a.__srcImageData=a.__srcContext.getImageData(0,0,a.width,a.height):(a.__srcImageData=a.__srcContext.createImageData(a.width,a.height),a.__srcImageData.data.set(a.data));var b=a.__srcImageData.data.buffer;
b=null!=b?new Uint8Array(b):null;a.data=b}};La.fillRect=function(a,b,c,d){La.convertToCanvas(a);if(1==d){d=c>>16&255;var e=c>>8&255;var f=c&255;c=a.get_transparent()?c>>24&255:255}else d=c>>24&255,e=c>>16&255,f=c>>8&255,c=a.get_transparent()?c&255:255;0==b.x&&0==b.y&&b.width==a.width&&b.height==a.height&&a.get_transparent()&&0==c?a.buffer.__srcCanvas.width=a.buffer.width:(255>c&&a.buffer.__srcContext.clearRect(b.x+a.offsetX,b.y+a.offsetY,b.width+a.offsetX,b.height+a.offsetY),0<c&&(a.buffer.__srcContext.fillStyle=
"rgba("+d+", "+e+", "+f+", "+c/255+")",a.buffer.__srcContext.fillRect(b.x+a.offsetX,b.y+a.offsetY,b.width+a.offsetX,b.height+a.offsetY)),a.dirty=!0,a.version++)};La.setPixel=function(a,b,c,d,e){La.convertToData(a);Sb.setPixel(a,b,c,d,e)};La.sync=function(a,b){null!=a&&(a.type!=Wc.CANVAS||null==a.buffer.__srcCanvas&&null==a.buffer.data?a.type==Wc.DATA&&La.convertToData(a,b):La.convertToCanvas(a,b))};var Sb=function(){};g["lime._internal.graphics.ImageDataUtil"]=Sb;Sb.__name__="lime._internal.graphics.ImageDataUtil";
Sb.colorTransform=function(a,b,c){var d=a.buffer.data;if(null!=d){var e=a.buffer.format,f=a.buffer.premultiplied;b=new pf(a,b);var k=mc.getAlphaTable(c),m=mc.getRedTable(c),h=mc.getGreenTable(c);c=mc.getBlueTable(c);for(var n,K,l,g=0,p=b.height;g<p;){n=g++;n=b.byteOffset+b.stride*n;for(var H=0,C=b.width;H<C;){K=H++;K=n+4*K;var y=e,I=f;null==I&&(I=!1);null==y&&(y=0);switch(y){case 0:l=(d[K]&255)<<24|(d[K+1]&255)<<16|(d[K+2]&255)<<8|d[K+3]&255;break;case 1:l=(d[K+1]&255)<<24|(d[K+2]&255)<<16|(d[K+3]&
255)<<8|d[K]&255;break;case 2:l=(d[K+2]&255)<<24|(d[K+1]&255)<<16|(d[K]&255)<<8|d[K+3]&255}I&&0!=(l&255)&&255!=(l&255)&&(S.unmult=255/(l&255),l=(S.__clamp[Math.round((l>>>24&255)*S.unmult)]&255)<<24|(S.__clamp[Math.round((l>>>16&255)*S.unmult)]&255)<<16|(S.__clamp[Math.round((l>>>8&255)*S.unmult)]&255)<<8|l&255);l=(m[l>>>24&255]&255)<<24|(h[l>>>16&255]&255)<<16|(c[l>>>8&255]&255)<<8|k[l&255]&255;y=e;I=f;null==I&&(I=!1);null==y&&(y=0);I&&(0==(l&255)?0!=l&&(l=0):255!=(l&255)&&(S.a16=S.__alpha16[l&255],
l=((l>>>24&255)*S.a16>>16&255)<<24|((l>>>16&255)*S.a16>>16&255)<<16|((l>>>8&255)*S.a16>>16&255)<<8|l&255));switch(y){case 0:d[K]=l>>>24&255;d[K+1]=l>>>16&255;d[K+2]=l>>>8&255;d[K+3]=l&255;break;case 1:d[K]=l&255;d[K+1]=l>>>24&255;d[K+2]=l>>>16&255;d[K+3]=l>>>8&255;break;case 2:d[K]=l>>>8&255,d[K+1]=l>>>16&255,d[K+2]=l>>>24&255,d[K+3]=l&255}}}a.dirty=!0;a.version++}};Sb.copyChannel=function(a,b,c,d,e,f){switch(f._hx_index){case 0:var k=0;break;case 1:k=1;break;case 2:k=2;break;case 3:k=3}switch(e._hx_index){case 0:var m=
0;break;case 1:m=1;break;case 2:m=2;break;case 3:m=3}e=b.buffer.data;f=a.buffer.data;if(null!=e&&null!=f){c=new pf(b,c);d=new pf(a,new od(d.x,d.y,c.width,c.height));var h=b.buffer.format,n=a.buffer.format;b=b.buffer.premultiplied;for(var K=a.buffer.premultiplied,l,g,p,H,C=0,y=0,I=d.height;y<I;){g=y++;l=c.byteOffset+c.stride*g;g=d.byteOffset+d.stride*g;for(var r=0,t=d.width;r<t;){r++;var z=h,q=b;null==q&&(q=!1);null==z&&(z=0);switch(z){case 0:p=(e[l]&255)<<24|(e[l+1]&255)<<16|(e[l+2]&255)<<8|e[l+3]&
255;break;case 1:p=(e[l+1]&255)<<24|(e[l+2]&255)<<16|(e[l+3]&255)<<8|e[l]&255;break;case 2:p=(e[l+2]&255)<<24|(e[l+1]&255)<<16|(e[l]&255)<<8|e[l+3]&255}q&&0!=(p&255)&&255!=(p&255)&&(S.unmult=255/(p&255),p=(S.__clamp[Math.round((p>>>24&255)*S.unmult)]&255)<<24|(S.__clamp[Math.round((p>>>16&255)*S.unmult)]&255)<<16|(S.__clamp[Math.round((p>>>8&255)*S.unmult)]&255)<<8|p&255);z=n;q=K;null==q&&(q=!1);null==z&&(z=0);switch(z){case 0:H=(f[g]&255)<<24|(f[g+1]&255)<<16|(f[g+2]&255)<<8|f[g+3]&255;break;case 1:H=
(f[g+1]&255)<<24|(f[g+2]&255)<<16|(f[g+3]&255)<<8|f[g]&255;break;case 2:H=(f[g+2]&255)<<24|(f[g+1]&255)<<16|(f[g]&255)<<8|f[g+3]&255}q&&0!=(H&255)&&255!=(H&255)&&(S.unmult=255/(H&255),H=(S.__clamp[Math.round((H>>>24&255)*S.unmult)]&255)<<24|(S.__clamp[Math.round((H>>>16&255)*S.unmult)]&255)<<16|(S.__clamp[Math.round((H>>>8&255)*S.unmult)]&255)<<8|H&255);switch(m){case 0:C=p>>>24&255;break;case 1:C=p>>>16&255;break;case 2:C=p>>>8&255;break;case 3:C=p&255}switch(k){case 0:H=(C&255)<<24|(H>>>16&255)<<
16|(H>>>8&255)<<8|H&255;break;case 1:H=(H>>>24&255)<<24|(C&255)<<16|(H>>>8&255)<<8|H&255;break;case 2:H=(H>>>24&255)<<24|(H>>>16&255)<<16|(C&255)<<8|H&255;break;case 3:H=(H>>>24&255)<<24|(H>>>16&255)<<16|(H>>>8&255)<<8|C&255}z=n;q=K;null==q&&(q=!1);null==z&&(z=0);q&&(0==(H&255)?0!=H&&(H=0):255!=(H&255)&&(S.a16=S.__alpha16[H&255],H=((H>>>24&255)*S.a16>>16&255)<<24|((H>>>16&255)*S.a16>>16&255)<<16|((H>>>8&255)*S.a16>>16&255)<<8|H&255));switch(z){case 0:f[g]=H>>>24&255;f[g+1]=H>>>16&255;f[g+2]=H>>>8&
255;f[g+3]=H&255;break;case 1:f[g]=H&255;f[g+1]=H>>>24&255;f[g+2]=H>>>16&255;f[g+3]=H>>>8&255;break;case 2:f[g]=H>>>8&255,f[g+1]=H>>>16&255,f[g+2]=H>>>24&255,f[g+3]=H&255}l+=4;g+=4}}a.dirty=!0;a.version++}};Sb.copyPixels=function(a,b,c,d,e,f,k){null==k&&(k=!1);if(a.width==b.width&&a.height==b.height&&c.width==b.width&&c.height==b.height&&0==c.x&&0==c.y&&0==d.x&&0==d.y&&null==e&&null==f&&0==k&&a.get_format()==b.get_format())a.buffer.data.set(b.buffer.data);else{var m=b.buffer.data,h=a.buffer.data;
if(null==m||null==h)return;c=new pf(b,c);var n=new od(d.x,d.y,c.width,c.height);n=new pf(a,n);var K=b.buffer.format,l=a.buffer.format,g=b.buffer.premultiplied,p=a.buffer.premultiplied,H=b.buffer.bitsPerPixel/8|0,C=a.buffer.bitsPerPixel/8|0,y=null!=e&&e.get_transparent();k=k||y&&!a.get_transparent()||!k&&!a.get_transparent()&&b.get_transparent();if(y)if(C=e.buffer.data,b=e.buffer.format,f=new pf(e,new od(c.x+(null==f?0:f.x),c.y+(null==f?0:f.y),c.width,c.height)),n.clip(d.x|0,d.y|0,f.width,f.height),
k)for(H=0,y=n.height;H<y;){k=H++;d=c.byteOffset+c.stride*k;e=n.byteOffset+n.stride*k;k=f.byteOffset+f.stride*k;for(var I=0,r=n.width;I<r;){I++;var t=K;var z=g;null==z&&(z=!1);null==t&&(t=0);switch(t){case 0:var q=(m[d]&255)<<24|(m[d+1]&255)<<16|(m[d+2]&255)<<8|m[d+3]&255;break;case 1:q=(m[d+1]&255)<<24|(m[d+2]&255)<<16|(m[d+3]&255)<<8|m[d]&255;break;case 2:q=(m[d+2]&255)<<24|(m[d+1]&255)<<16|(m[d]&255)<<8|m[d+3]&255}z&&0!=(q&255)&&255!=(q&255)&&(S.unmult=255/(q&255),q=(S.__clamp[Math.round((q>>>24&
255)*S.unmult)]&255)<<24|(S.__clamp[Math.round((q>>>16&255)*S.unmult)]&255)<<16|(S.__clamp[Math.round((q>>>8&255)*S.unmult)]&255)<<8|q&255);t=l;z=p;null==z&&(z=!1);null==t&&(t=0);switch(t){case 0:var oa=(h[e]&255)<<24|(h[e+1]&255)<<16|(h[e+2]&255)<<8|h[e+3]&255;break;case 1:oa=(h[e+1]&255)<<24|(h[e+2]&255)<<16|(h[e+3]&255)<<8|h[e]&255;break;case 2:oa=(h[e+2]&255)<<24|(h[e+1]&255)<<16|(h[e]&255)<<8|h[e+3]&255}z&&0!=(oa&255)&&255!=(oa&255)&&(S.unmult=255/(oa&255),oa=(S.__clamp[Math.round((oa>>>24&255)*
S.unmult)]&255)<<24|(S.__clamp[Math.round((oa>>>16&255)*S.unmult)]&255)<<16|(S.__clamp[Math.round((oa>>>8&255)*S.unmult)]&255)<<8|oa&255);t=b;z=!1;null==z&&(z=!1);null==t&&(t=0);switch(t){case 0:var u=(C[k]&255)<<24|(C[k+1]&255)<<16|(C[k+2]&255)<<8|C[k+3]&255;break;case 1:u=(C[k+1]&255)<<24|(C[k+2]&255)<<16|(C[k+3]&255)<<8|C[k]&255;break;case 2:u=(C[k+2]&255)<<24|(C[k+1]&255)<<16|(C[k]&255)<<8|C[k+3]&255}z&&0!=(u&255)&&255!=(u&255)&&(S.unmult=255/(u&255),u=(S.__clamp[Math.round((u>>>24&255)*S.unmult)]&
255)<<24|(S.__clamp[Math.round((u>>>16&255)*S.unmult)]&255)<<16|(S.__clamp[Math.round((u>>>8&255)*S.unmult)]&255)<<8|u&255);t=(u&255)/255*((q&255)/255);if(0<t){z=(oa&255)/255;var w=1-t;var A=t+z*w;oa=(S.__clamp[Math.round(((q>>>24&255)*t+(oa>>>24&255)*z*w)/A)]&255)<<24|(oa>>>16&255)<<16|(oa>>>8&255)<<8|oa&255;oa=(oa>>>24&255)<<24|(S.__clamp[Math.round(((q>>>16&255)*t+(oa>>>16&255)*z*w)/A)]&255)<<16|(oa>>>8&255)<<8|oa&255;oa=(oa>>>24&255)<<24|(oa>>>16&255)<<16|(S.__clamp[Math.round(((q>>>8&255)*t+
(oa>>>8&255)*z*w)/A)]&255)<<8|oa&255;oa=(oa>>>24&255)<<24|(oa>>>16&255)<<16|(oa>>>8&255)<<8|S.__clamp[Math.round(255*A)]&255;t=l;z=p;null==z&&(z=!1);null==t&&(t=0);z&&(0==(oa&255)?0!=oa&&(oa=0):255!=(oa&255)&&(S.a16=S.__alpha16[oa&255],oa=((oa>>>24&255)*S.a16>>16&255)<<24|((oa>>>16&255)*S.a16>>16&255)<<16|((oa>>>8&255)*S.a16>>16&255)<<8|oa&255));switch(t){case 0:h[e]=oa>>>24&255;h[e+1]=oa>>>16&255;h[e+2]=oa>>>8&255;h[e+3]=oa&255;break;case 1:h[e]=oa&255;h[e+1]=oa>>>24&255;h[e+2]=oa>>>16&255;h[e+3]=
oa>>>8&255;break;case 2:h[e]=oa>>>8&255,h[e+1]=oa>>>16&255,h[e+2]=oa>>>24&255,h[e+3]=oa&255}}d+=4;e+=4;k+=4}}else for(oa=0,H=n.height;oa<H;)for(k=oa++,d=c.byteOffset+c.stride*k,e=n.byteOffset+n.stride*k,k=f.byteOffset+f.stride*k,y=0,I=n.width;y<I;){y++;r=K;t=g;null==t&&(t=!1);null==r&&(r=0);switch(r){case 0:q=(m[d]&255)<<24|(m[d+1]&255)<<16|(m[d+2]&255)<<8|m[d+3]&255;break;case 1:q=(m[d+1]&255)<<24|(m[d+2]&255)<<16|(m[d+3]&255)<<8|m[d]&255;break;case 2:q=(m[d+2]&255)<<24|(m[d+1]&255)<<16|(m[d]&255)<<
8|m[d+3]&255}t&&0!=(q&255)&&255!=(q&255)&&(S.unmult=255/(q&255),q=(S.__clamp[Math.round((q>>>24&255)*S.unmult)]&255)<<24|(S.__clamp[Math.round((q>>>16&255)*S.unmult)]&255)<<16|(S.__clamp[Math.round((q>>>8&255)*S.unmult)]&255)<<8|q&255);r=b;t=!1;null==t&&(t=!1);null==r&&(r=0);switch(r){case 0:u=(C[k]&255)<<24|(C[k+1]&255)<<16|(C[k+2]&255)<<8|C[k+3]&255;break;case 1:u=(C[k+1]&255)<<24|(C[k+2]&255)<<16|(C[k+3]&255)<<8|C[k]&255;break;case 2:u=(C[k+2]&255)<<24|(C[k+1]&255)<<16|(C[k]&255)<<8|C[k+3]&255}t&&
0!=(u&255)&&255!=(u&255)&&(S.unmult=255/(u&255),u=(S.__clamp[Math.round((u>>>24&255)*S.unmult)]&255)<<24|(S.__clamp[Math.round((u>>>16&255)*S.unmult)]&255)<<16|(S.__clamp[Math.round((u>>>8&255)*S.unmult)]&255)<<8|u&255);q=(q>>>24&255)<<24|(q>>>16&255)<<16|(q>>>8&255)<<8|Math.round((u&255)/255*(q&255))&255;r=l;t=p;null==t&&(t=!1);null==r&&(r=0);t&&(0==(q&255)?0!=q&&(q=0):255!=(q&255)&&(S.a16=S.__alpha16[q&255],q=((q>>>24&255)*S.a16>>16&255)<<24|((q>>>16&255)*S.a16>>16&255)<<16|((q>>>8&255)*S.a16>>
16&255)<<8|q&255));switch(r){case 0:h[e]=q>>>24&255;h[e+1]=q>>>16&255;h[e+2]=q>>>8&255;h[e+3]=q&255;break;case 1:h[e]=q&255;h[e+1]=q>>>24&255;h[e+2]=q>>>16&255;h[e+3]=q>>>8&255;break;case 2:h[e]=q>>>8&255,h[e+1]=q>>>16&255,h[e+2]=q>>>24&255,h[e+3]=q&255}d+=4;e+=4;k+=4}else if(k)for(u=0,C=n.height;u<C;)for(e=u++,d=c.byteOffset+c.stride*e,e=n.byteOffset+n.stride*e,b=0,f=n.width;b<f;){b++;k=K;H=g;null==H&&(H=!1);null==k&&(k=0);switch(k){case 0:q=(m[d]&255)<<24|(m[d+1]&255)<<16|(m[d+2]&255)<<8|m[d+3]&
255;break;case 1:q=(m[d+1]&255)<<24|(m[d+2]&255)<<16|(m[d+3]&255)<<8|m[d]&255;break;case 2:q=(m[d+2]&255)<<24|(m[d+1]&255)<<16|(m[d]&255)<<8|m[d+3]&255}H&&0!=(q&255)&&255!=(q&255)&&(S.unmult=255/(q&255),q=(S.__clamp[Math.round((q>>>24&255)*S.unmult)]&255)<<24|(S.__clamp[Math.round((q>>>16&255)*S.unmult)]&255)<<16|(S.__clamp[Math.round((q>>>8&255)*S.unmult)]&255)<<8|q&255);k=l;H=p;null==H&&(H=!1);null==k&&(k=0);switch(k){case 0:oa=(h[e]&255)<<24|(h[e+1]&255)<<16|(h[e+2]&255)<<8|h[e+3]&255;break;case 1:oa=
(h[e+1]&255)<<24|(h[e+2]&255)<<16|(h[e+3]&255)<<8|h[e]&255;break;case 2:oa=(h[e+2]&255)<<24|(h[e+1]&255)<<16|(h[e]&255)<<8|h[e+3]&255}H&&0!=(oa&255)&&255!=(oa&255)&&(S.unmult=255/(oa&255),oa=(S.__clamp[Math.round((oa>>>24&255)*S.unmult)]&255)<<24|(S.__clamp[Math.round((oa>>>16&255)*S.unmult)]&255)<<16|(S.__clamp[Math.round((oa>>>8&255)*S.unmult)]&255)<<8|oa&255);t=(q&255)/255;z=(oa&255)/255;w=1-t;A=t+z*w;0==A?oa=0:(oa=(S.__clamp[Math.round(((q>>>24&255)*t+(oa>>>24&255)*z*w)/A)]&255)<<24|(oa>>>16&
255)<<16|(oa>>>8&255)<<8|oa&255,oa=(oa>>>24&255)<<24|(S.__clamp[Math.round(((q>>>16&255)*t+(oa>>>16&255)*z*w)/A)]&255)<<16|(oa>>>8&255)<<8|oa&255,oa=(oa>>>24&255)<<24|(oa>>>16&255)<<16|(S.__clamp[Math.round(((q>>>8&255)*t+(oa>>>8&255)*z*w)/A)]&255)<<8|oa&255,oa=(oa>>>24&255)<<24|(oa>>>16&255)<<16|(oa>>>8&255)<<8|S.__clamp[Math.round(255*A)]&255);k=l;H=p;null==H&&(H=!1);null==k&&(k=0);H&&(0==(oa&255)?0!=oa&&(oa=0):255!=(oa&255)&&(S.a16=S.__alpha16[oa&255],oa=((oa>>>24&255)*S.a16>>16&255)<<24|((oa>>>
16&255)*S.a16>>16&255)<<16|((oa>>>8&255)*S.a16>>16&255)<<8|oa&255));switch(k){case 0:h[e]=oa>>>24&255;h[e+1]=oa>>>16&255;h[e+2]=oa>>>8&255;h[e+3]=oa&255;break;case 1:h[e]=oa&255;h[e+1]=oa>>>24&255;h[e+2]=oa>>>16&255;h[e+3]=oa>>>8&255;break;case 2:h[e]=oa>>>8&255,h[e+1]=oa>>>16&255,h[e+2]=oa>>>24&255,h[e+3]=oa&255}d+=4;e+=4}else if(K==l&&g==p&&H==C)for(q=0,K=n.height;q<K;)l=q++,d=c.byteOffset+c.stride*l,e=n.byteOffset+n.stride*l,h.set(m.subarray(d,d+n.width*C),e);else for(oa=0,u=n.height;oa<u;)for(e=
oa++,d=c.byteOffset+c.stride*e,e=n.byteOffset+n.stride*e,C=0,b=n.width;C<b;){C++;f=K;k=g;null==k&&(k=!1);null==f&&(f=0);switch(f){case 0:q=(m[d]&255)<<24|(m[d+1]&255)<<16|(m[d+2]&255)<<8|m[d+3]&255;break;case 1:q=(m[d+1]&255)<<24|(m[d+2]&255)<<16|(m[d+3]&255)<<8|m[d]&255;break;case 2:q=(m[d+2]&255)<<24|(m[d+1]&255)<<16|(m[d]&255)<<8|m[d+3]&255}k&&0!=(q&255)&&255!=(q&255)&&(S.unmult=255/(q&255),q=(S.__clamp[Math.round((q>>>24&255)*S.unmult)]&255)<<24|(S.__clamp[Math.round((q>>>16&255)*S.unmult)]&255)<<
16|(S.__clamp[Math.round((q>>>8&255)*S.unmult)]&255)<<8|q&255);f=l;k=p;null==k&&(k=!1);null==f&&(f=0);k&&(0==(q&255)?0!=q&&(q=0):255!=(q&255)&&(S.a16=S.__alpha16[q&255],q=((q>>>24&255)*S.a16>>16&255)<<24|((q>>>16&255)*S.a16>>16&255)<<16|((q>>>8&255)*S.a16>>16&255)<<8|q&255));switch(f){case 0:h[e]=q>>>24&255;h[e+1]=q>>>16&255;h[e+2]=q>>>8&255;h[e+3]=q&255;break;case 1:h[e]=q&255;h[e+1]=q>>>24&255;h[e+2]=q>>>16&255;h[e+3]=q>>>8&255;break;case 2:h[e]=q>>>8&255,h[e+1]=q>>>16&255,h[e+2]=q>>>24&255,h[e+
3]=q&255}d+=4;e+=4}}a.dirty=!0;a.version++};Sb.fillRect=function(a,b,c,d){switch(d){case 1:c=(c>>>16&255)<<24|(c>>>8&255)<<16|(c&255)<<8|c>>>24&255;break;case 2:c=(c>>>8&255)<<24|(c>>>16&255)<<16|(c>>>24&255)<<8|c&255}a.get_transparent()||(c=(c>>>24&255)<<24|(c>>>16&255)<<16|(c>>>8&255)<<8|255);d=a.buffer.data;if(null!=d){var e=a.buffer.format;a.buffer.premultiplied&&(0==(c&255)?0!=c&&(c=0):255!=(c&255)&&(S.a16=S.__alpha16[c&255],c=((c>>>24&255)*S.a16>>16&255)<<24|((c>>>16&255)*S.a16>>16&255)<<16|
((c>>>8&255)*S.a16>>16&255)<<8|c&255));b=new pf(a,b);for(var f,k=0,m=b.height;k<m;){f=k++;f=b.byteOffset+b.stride*f;for(var h=0,n=b.width;h<n;){var K=h++;K=f+4*K;var l=e,g=!1;null==g&&(g=!1);null==l&&(l=0);g&&(0==(c&255)?0!=c&&(c=0):255!=(c&255)&&(S.a16=S.__alpha16[c&255],c=((c>>>24&255)*S.a16>>16&255)<<24|((c>>>16&255)*S.a16>>16&255)<<16|((c>>>8&255)*S.a16>>16&255)<<8|c&255));switch(l){case 0:d[K]=c>>>24&255;d[K+1]=c>>>16&255;d[K+2]=c>>>8&255;d[K+3]=c&255;break;case 1:d[K]=c&255;d[K+1]=c>>>24&255;
d[K+2]=c>>>16&255;d[K+3]=c>>>8&255;break;case 2:d[K]=c>>>8&255,d[K+1]=c>>>16&255,d[K+2]=c>>>24&255,d[K+3]=c&255}}}a.dirty=!0;a.version++}};Sb.gaussianBlur=function(a,b,c,d,e,f,k,m,h){null==k&&(k=1);null==f&&(f=4);null==e&&(e=4);(m=a.get_premultiplied())&&a.set_premultiplied(!1);ed.blur(a,b,c,d,e,f,k);a.dirty=!0;a.version++;m&&a.set_premultiplied(!0);return a};Sb.multiplyAlpha=function(a){var b=a.buffer.data;if(null!=b&&a.buffer.transparent){for(var c=a.buffer.format,d,e=0,f=b.length/4|0;e<f;){var k=
e++,m=4*k,h=c,n=!1;null==n&&(n=!1);null==h&&(h=0);switch(h){case 0:d=(b[m]&255)<<24|(b[m+1]&255)<<16|(b[m+2]&255)<<8|b[m+3]&255;break;case 1:d=(b[m+1]&255)<<24|(b[m+2]&255)<<16|(b[m+3]&255)<<8|b[m]&255;break;case 2:d=(b[m+2]&255)<<24|(b[m+1]&255)<<16|(b[m]&255)<<8|b[m+3]&255}n&&0!=(d&255)&&255!=(d&255)&&(S.unmult=255/(d&255),d=(S.__clamp[Math.round((d>>>24&255)*S.unmult)]&255)<<24|(S.__clamp[Math.round((d>>>16&255)*S.unmult)]&255)<<16|(S.__clamp[Math.round((d>>>8&255)*S.unmult)]&255)<<8|d&255);k*=
4;m=c;h=!0;null==h&&(h=!1);null==m&&(m=0);h&&(0==(d&255)?0!=d&&(d=0):255!=(d&255)&&(S.a16=S.__alpha16[d&255],d=((d>>>24&255)*S.a16>>16&255)<<24|((d>>>16&255)*S.a16>>16&255)<<16|((d>>>8&255)*S.a16>>16&255)<<8|d&255));switch(m){case 0:b[k]=d>>>24&255;b[k+1]=d>>>16&255;b[k+2]=d>>>8&255;b[k+3]=d&255;break;case 1:b[k]=d&255;b[k+1]=d>>>24&255;b[k+2]=d>>>16&255;b[k+3]=d>>>8&255;break;case 2:b[k]=d>>>8&255,b[k+1]=d>>>16&255,b[k+2]=d>>>24&255,b[k+3]=d&255}}a.buffer.premultiplied=!0;a.dirty=!0;a.version++}};
Sb.setFormat=function(a,b){var c=a.buffer.data;if(null!=c){var d=c.length/4|0;switch(a.get_format()){case 0:var e=0;var f=1;var k=2;var m=3;break;case 1:e=1;f=2;k=3;m=0;break;case 2:e=2,f=1,k=0,m=3}switch(b){case 0:var h=0;var n=1;var K=2;var l=3;break;case 1:h=1;n=2;K=3;l=0;break;case 2:h=2,n=1,K=0,l=3}for(var g=0;g<d;){var p=4*g++;var H=c[p+e];var C=c[p+f];var y=c[p+k];var I=c[p+m];c[p+h]=H;c[p+n]=C;c[p+K]=y;c[p+l]=I}a.buffer.format=b;a.dirty=!0;a.version++}};Sb.setPixel=function(a,b,c,d,e){switch(e){case 1:d=
(d>>>16&255)<<24|(d>>>8&255)<<16|(d&255)<<8|d>>>24&255;break;case 2:d=(d>>>8&255)<<24|(d>>>16&255)<<16|(d>>>24&255)<<8|d&255}e=0;var f=a.buffer.data,k=4*(c+a.offsetY)*a.buffer.width+4*(b+a.offsetX),m=a.buffer.format,h=a.buffer.premultiplied;null==h&&(h=!1);null==m&&(m=0);switch(m){case 0:e=(f[k]&255)<<24|(f[k+1]&255)<<16|(f[k+2]&255)<<8|f[k+3]&255;break;case 1:e=(f[k+1]&255)<<24|(f[k+2]&255)<<16|(f[k+3]&255)<<8|f[k]&255;break;case 2:e=(f[k+2]&255)<<24|(f[k+1]&255)<<16|(f[k]&255)<<8|f[k+3]&255}h&&
0!=(e&255)&&255!=(e&255)&&(S.unmult=255/(e&255),e=(S.__clamp[Math.round((e>>>24&255)*S.unmult)]&255)<<24|(S.__clamp[Math.round((e>>>16&255)*S.unmult)]&255)<<16|(S.__clamp[Math.round((e>>>8&255)*S.unmult)]&255)<<8|e&255);d=(d>>>24&255)<<24|(d>>>16&255)<<16|(d>>>8&255)<<8|e&255;e=a.buffer.data;b=4*(c+a.offsetY)*a.buffer.width+4*(b+a.offsetX);c=a.buffer.format;f=a.buffer.premultiplied;null==f&&(f=!1);null==c&&(c=0);f&&(0==(d&255)?0!=d&&(d=0):255!=(d&255)&&(S.a16=S.__alpha16[d&255],d=((d>>>24&255)*S.a16>>
16&255)<<24|((d>>>16&255)*S.a16>>16&255)<<16|((d>>>8&255)*S.a16>>16&255)<<8|d&255));switch(c){case 0:e[b]=d>>>24&255;e[b+1]=d>>>16&255;e[b+2]=d>>>8&255;e[b+3]=d&255;break;case 1:e[b]=d&255;e[b+1]=d>>>24&255;e[b+2]=d>>>16&255;e[b+3]=d>>>8&255;break;case 2:e[b]=d>>>8&255,e[b+1]=d>>>16&255,e[b+2]=d>>>24&255,e[b+3]=d&255}a.dirty=!0;a.version++};Sb.unmultiplyAlpha=function(a){var b=a.buffer.data;if(null!=b){for(var c=a.buffer.format,d,e=0,f=b.length/4|0;e<f;){var k=e++,m=4*k,h=c,n=!0;null==n&&(n=!1);null==
h&&(h=0);switch(h){case 0:d=(b[m]&255)<<24|(b[m+1]&255)<<16|(b[m+2]&255)<<8|b[m+3]&255;break;case 1:d=(b[m+1]&255)<<24|(b[m+2]&255)<<16|(b[m+3]&255)<<8|b[m]&255;break;case 2:d=(b[m+2]&255)<<24|(b[m+1]&255)<<16|(b[m]&255)<<8|b[m+3]&255}n&&0!=(d&255)&&255!=(d&255)&&(S.unmult=255/(d&255),d=(S.__clamp[Math.round((d>>>24&255)*S.unmult)]&255)<<24|(S.__clamp[Math.round((d>>>16&255)*S.unmult)]&255)<<16|(S.__clamp[Math.round((d>>>8&255)*S.unmult)]&255)<<8|d&255);k*=4;m=c;h=!1;null==h&&(h=!1);null==m&&(m=0);
h&&(0==(d&255)?0!=d&&(d=0):255!=(d&255)&&(S.a16=S.__alpha16[d&255],d=((d>>>24&255)*S.a16>>16&255)<<24|((d>>>16&255)*S.a16>>16&255)<<16|((d>>>8&255)*S.a16>>16&255)<<8|d&255));switch(m){case 0:b[k]=d>>>24&255;b[k+1]=d>>>16&255;b[k+2]=d>>>8&255;b[k+3]=d&255;break;case 1:b[k]=d&255;b[k+1]=d>>>24&255;b[k+2]=d>>>16&255;b[k+3]=d>>>8&255;break;case 2:b[k]=d>>>8&255,b[k+1]=d>>>16&255,b[k+2]=d>>>24&255,b[k+3]=d&255}}a.buffer.premultiplied=!1;a.dirty=!0;a.version++}};var pf=function(a,b){this.image=a;null==
b?this.rect=a.get_rect():(0>b.x&&(b.x=0),0>b.y&&(b.y=0),b.x+b.width>a.width&&(b.width=a.width-b.x),b.y+b.height>a.height&&(b.height=a.height-b.y),0>b.width&&(b.width=0),0>b.height&&(b.height=0),this.rect=b);this.stride=a.buffer.get_stride();this.__update()};g["lime._internal.graphics._ImageDataUtil.ImageDataView"]=pf;pf.__name__="lime._internal.graphics._ImageDataUtil.ImageDataView";pf.prototype={x:null,y:null,height:null,width:null,byteOffset:null,image:null,rect:null,stride:null,tempRect:null,clip:function(a,
b,c,d){null==this.tempRect&&(this.tempRect=new od);this.tempRect.setTo(a,b,c,d);this.rect.intersection(this.tempRect,this.rect);this.__update()},__update:function(){this.x=Math.ceil(this.rect.x);this.y=Math.ceil(this.rect.y);this.width=Math.floor(this.rect.width);this.height=Math.floor(this.rect.height);this.byteOffset=this.stride*(this.y+this.image.offsetY)+4*(this.x+this.image.offsetX)},__class__:pf};var ed=function(){};g["lime._internal.graphics.StackBlur"]=ed;ed.__name__="lime._internal.graphics.StackBlur";
ed.blur=function(a,b,c,d,e,f,k){a.copyPixels(b,c,d);ed.__stackBlurCanvasRGBA(a,c.width|0,c.height|0,e,f,k)};ed.__stackBlurCanvasRGBA=function(a,b,c,d,e,f){d=Math.round(d)>>1;e=Math.round(e)>>1;if(null!=ed.MUL_TABLE&&(d>=ed.MUL_TABLE.length&&(d=ed.MUL_TABLE.length-1),e>=ed.MUL_TABLE.length&&(e=ed.MUL_TABLE.length-1),!(0>d||0>e))){1>f&&(f=1);3<f&&(f=3);a=a.get_data();var k,m,h,n=d+d+1;var K=e+e+1;var l=b-1,g=c-1,p=d+1,H=e+1,C=new Qf,y=C;for(h=1;h<n;)h++,y=y.n=new Qf;y.n=C;var I=n=new Qf;for(h=1;h<K;)h++,
I=I.n=new Qf;I.n=n;for(var r,q=ed.MUL_TABLE[d],t=ed.SHG_TABLE[d],z=ed.MUL_TABLE[e],oa=ed.SHG_TABLE[e];0<f;){--f;var u=m=0;var A=q,w=t;for(k=c;;){var O=a[m];K=p*O;var v=a[m+1];h=p*v;var F=a[m+2];var x=p*F;var B=a[m+3];var qa=p*B;y=C;for(I=p;y.r=O,y.g=v,y.b=F,y.a=B,y=y.n,-1<--I;);B=1;for(r=p;B<r;)I=B++,I=m+((l<I?l:I)<<2),K+=y.r=a[I],h+=y.g=a[I+1],x+=y.b=a[I+2],qa+=y.a=a[I+3],y=y.n;r=C;y=0;for(B=b;y<B;)I=y++,a[m++]=K*A>>>w,a[m++]=h*A>>>w,a[m++]=x*A>>>w,a[m++]=qa*A>>>w,I=I+d+1,I=u+(I<l?I:l)<<2,K-=r.r-
(r.r=a[I]),h-=r.g-(r.g=a[I+1]),x-=r.b-(r.b=a[I+2]),qa-=r.a-(r.a=a[I+3]),r=r.n;u+=b;if(!(0<--k))break}A=z;w=oa;k=0;for(u=b;k<u;){y=k++;m=y<<2;O=a[m];K=H*O;v=a[m+1];h=H*v;F=a[m+2];x=H*F;B=a[m+3];qa=H*B;I=n;m=0;for(r=H;m<r;)m++,I.r=O,I.g=v,I.b=F,I.a=B,I=I.n;B=b;r=1;for(O=e+1;r<O;)v=r++,m=B+y<<2,K+=I.r=a[m],h+=I.g=a[m+1],x+=I.b=a[m+2],qa+=I.a=a[m+3],I=I.n,v<g&&(B+=b);m=y;r=n;if(0<f)for(O=0,v=c;O<v;)F=O++,I=m<<2,B=qa*A>>>w,a[I+3]=B,0<B?(a[I]=K*A>>>w,a[I+1]=h*A>>>w,a[I+2]=x*A>>>w):a[I]=a[I+1]=a[I+2]=0,
I=F+H,I=y+(I<g?I:g)*b<<2,K-=r.r-(r.r=a[I]),h-=r.g-(r.g=a[I+1]),x-=r.b-(r.b=a[I+2]),qa-=r.a-(r.a=a[I+3]),r=r.n,m+=b;else for(var M=0,Ia=c;M<Ia;){var ja=M++;I=m<<2;B=qa*A>>>w;a[I+3]=B;0<B?(B=255/B,O=(K*A>>>w)*B|0,v=(h*A>>>w)*B|0,F=(x*A>>>w)*B|0,a[I]=255<O?255:O,a[I+1]=255<v?255:v,a[I+2]=255<F?255:F):a[I]=a[I+1]=a[I+2]=0;I=ja+H;I=y+(I<g?I:g)*b<<2;K-=r.r-(r.r=a[I]);h-=r.g-(r.g=a[I+1]);x-=r.b-(r.b=a[I+2]);qa-=r.a-(r.a=a[I+3]);r=r.n;m+=b}}}}};var Qf=function(){this.a=this.b=this.g=this.r=0;this.n=null};
g["lime._internal.graphics.BlurStack"]=Qf;Qf.__name__="lime._internal.graphics.BlurStack";Qf.prototype={r:null,g:null,b:null,a:null,n:null,__class__:Qf};var nc=function(a,b){null==b&&(b=!1);if(null!=a)if(b)b=new Vc,b.future=this,Xc.queue({promise:b,work:a});else try{this.value=a(),this.isComplete=!0}catch(c){ab.lastException=c,this.error=c instanceof W?c.val:c,this.isError=!0}};g["lime.app.Future"]=nc;nc.__name__="lime.app.Future";nc.withValue=function(a){var b=new nc;b.isComplete=!0;b.value=a;return b};
nc.prototype={error:null,isComplete:null,isError:null,value:null,__completeListeners:null,__errorListeners:null,__progressListeners:null,onComplete:function(a){null!=a&&(this.isComplete?a(this.value):this.isError||(null==this.__completeListeners&&(this.__completeListeners=[]),this.__completeListeners.push(a)));return this},onError:function(a){null!=a&&(this.isError?a(this.error):this.isComplete||(null==this.__errorListeners&&(this.__errorListeners=[]),this.__errorListeners.push(a)));return this},
onProgress:function(a){null!=a&&(null==this.__progressListeners&&(this.__progressListeners=[]),this.__progressListeners.push(a));return this},then:function(a){if(this.isComplete)return a(this.value);if(this.isError){var b=new nc;b.isError=!0;b.error=this.error;return b}var c=new Vc;this.onError(u(c,c.error));this.onProgress(u(c,c.progress));this.onComplete(function(b){b=a(b);b.onError(u(c,c.error));b.onComplete(u(c,c.complete))});return c.future},__class__:nc};var Xc=function(){};g["lime.app._Future.FutureWork"]=
Xc;Xc.__name__="lime.app._Future.FutureWork";Xc.queue=function(a){null==Xc.threadPool&&(Xc.threadPool=new pi,Xc.threadPool.doWork.add(Xc.threadPool_doWork),Xc.threadPool.onComplete.add(Xc.threadPool_onComplete),Xc.threadPool.onError.add(Xc.threadPool_onError));Xc.threadPool.queue(a)};Xc.threadPool_doWork=function(a){try{var b=a.work();Xc.threadPool.sendComplete({promise:a.promise,result:b})}catch(c){ab.lastException=c,Xc.threadPool.sendError({promise:a.promise,error:c instanceof W?c.val:c})}};Xc.threadPool_onComplete=
function(a){a.promise.complete(a.result)};Xc.threadPool_onError=function(a){a.promise.error(a.error)};var Vc=function(){this.future=new nc};g["lime.app.Promise"]=Vc;Vc.__name__="lime.app.Promise";Vc.prototype={future:null,complete:function(a){if(!this.future.isError&&(this.future.isComplete=!0,this.future.value=a,null!=this.future.__completeListeners)){for(var b=0,c=this.future.__completeListeners;b<c.length;){var d=c[b];++b;d(a)}this.future.__completeListeners=null}return this},completeWith:function(a){a.onComplete(u(this,
this.complete));a.onError(u(this,this.error));a.onProgress(u(this,this.progress));return this},error:function(a){if(!this.future.isComplete&&(this.future.isError=!0,this.future.error=a,null!=this.future.__errorListeners)){for(var b=0,c=this.future.__errorListeners;b<c.length;){var d=c[b];++b;d(a)}this.future.__errorListeners=null}return this},progress:function(a,b){if(!this.future.isError&&!this.future.isComplete&&null!=this.future.__progressListeners)for(var c=0,d=this.future.__progressListeners;c<
d.length;){var e=d[c];++c;e(a,b)}return this},__class__:Vc};var Oe=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};g["lime.app._Event_Dynamic_Void"]=Oe;Oe.__name__="lime.app._Event_Dynamic_Void";Oe.prototype={canceled:null,__repeat:null,__priorities:null,add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var d=0,e=this.__priorities.length;d<e;){var f=d++;if(c>this.__priorities[f]){this.__listeners.splice(f,0,a);this.__priorities.splice(f,0,c);this.__repeat.splice(f,
0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=--b;)Na.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},__listeners:null,dispatch:function(a){this.canceled=!1;for(var b=this.__listeners,c=this.__repeat,d=0;d<b.length&&(b[d](a),c[d]?++d:this.remove(b[d]),!this.canceled););},__class__:Oe};var Dj=function(){this.canceled=!1;this.__listeners=
[];this.__priorities=[];this.__repeat=[]};g["lime.app._Event_Float_Float_Float_Void"]=Dj;Dj.__name__="lime.app._Event_Float_Float_Float_Void";Dj.prototype={canceled:null,__repeat:null,__priorities:null,remove:function(a){for(var b=this.__listeners.length;0<=--b;)Na.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},__listeners:null,dispatch:function(a,b,c){this.canceled=!1;for(var d=this.__listeners,e=this.__repeat,f=0;f<
d.length&&(d[f](a,b,c),e[f]?++f:this.remove(d[f]),!this.canceled););},__class__:Dj};var Ej=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};g["lime.app._Event_Float_Float_Int_Void"]=Ej;Ej.__name__="lime.app._Event_Float_Float_Int_Void";Ej.prototype={canceled:null,__repeat:null,__priorities:null,add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var d=0,e=this.__priorities.length;d<e;){var f=d++;if(c>this.__priorities[f]){this.__listeners.splice(f,0,a);this.__priorities.splice(f,
0,c);this.__repeat.splice(f,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},cancel:function(){this.canceled=!0},remove:function(a){for(var b=this.__listeners.length;0<=--b;)Na.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},__listeners:null,dispatch:function(a,b,c){this.canceled=!1;for(var d=this.__listeners,e=this.__repeat,f=0;f<d.length&&(d[f](a,b,c),e[f]?++f:this.remove(d[f]),
!this.canceled););},__class__:Ej};var qi=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};g["lime.app._Event_Float_Float_Void"]=qi;qi.__name__="lime.app._Event_Float_Float_Void";qi.prototype={canceled:null,__repeat:null,__priorities:null,add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var d=0,e=this.__priorities.length;d<e;){var f=d++;if(c>this.__priorities[f]){this.__listeners.splice(f,0,a);this.__priorities.splice(f,0,c);this.__repeat.splice(f,0,!b);
return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=--b;)Na.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},__listeners:null,dispatch:function(a,b){this.canceled=!1;for(var c=this.__listeners,d=this.__repeat,e=0;e<c.length&&(c[e](a,b),d[e]?++e:this.remove(c[e]),!this.canceled););},__class__:qi};var Fj=function(){this.canceled=!1;this.__listeners=
[];this.__priorities=[];this.__repeat=[]};g["lime.app._Event_Float_Float_lime_ui_MouseButton_Void"]=Fj;Fj.__name__="lime.app._Event_Float_Float_lime_ui_MouseButton_Void";Fj.prototype={canceled:null,__repeat:null,__priorities:null,add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var d=0,e=this.__priorities.length;d<e;){var f=d++;if(c>this.__priorities[f]){this.__listeners.splice(f,0,a);this.__priorities.splice(f,0,c);this.__repeat.splice(f,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);
this.__repeat.push(!b)},cancel:function(){this.canceled=!0},remove:function(a){for(var b=this.__listeners.length;0<=--b;)Na.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},__listeners:null,dispatch:function(a,b,c){this.canceled=!1;for(var d=this.__listeners,e=this.__repeat,f=0;f<d.length&&(d[f](a,b,c),e[f]?++f:this.remove(d[f]),!this.canceled););},__class__:Fj};var hl=function(){this.canceled=!1;this.__listeners=[];this.__priorities=
[];this.__repeat=[]};g["lime.app._Event_Float_Float_lime_ui_MouseWheelMode_Void"]=hl;hl.__name__="lime.app._Event_Float_Float_lime_ui_MouseWheelMode_Void";hl.prototype={canceled:null,__repeat:null,__priorities:null,add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var d=0,e=this.__priorities.length;d<e;){var f=d++;if(c>this.__priorities[f]){this.__listeners.splice(f,0,a);this.__priorities.splice(f,0,c);this.__repeat.splice(f,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},
cancel:function(){this.canceled=!0},remove:function(a){for(var b=this.__listeners.length;0<=--b;)Na.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},__listeners:null,dispatch:function(a,b,c){this.canceled=!1;for(var d=this.__listeners,e=this.__repeat,f=0;f<d.length&&(d[f](a,b,c),e[f]?++f:this.remove(d[f]),!this.canceled););},__class__:hl};var il=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=
[]};g["lime.app._Event_Int_Float_Float_Void"]=il;il.__name__="lime.app._Event_Int_Float_Float_Void";il.prototype={canceled:null,__repeat:null,__priorities:null,add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var d=0,e=this.__priorities.length;d<e;){var f=d++;if(c>this.__priorities[f]){this.__listeners.splice(f,0,a);this.__priorities.splice(f,0,c);this.__repeat.splice(f,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},__listeners:null,__class__:il};var jl=
function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};g["lime.app._Event_Int_Float_Void"]=jl;jl.__name__="lime.app._Event_Int_Float_Void";jl.prototype={canceled:null,__repeat:null,__priorities:null,add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var d=0,e=this.__priorities.length;d<e;){var f=d++;if(c>this.__priorities[f]){this.__listeners.splice(f,0,a);this.__priorities.splice(f,0,c);this.__repeat.splice(f,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);
this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=--b;)Na.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},__listeners:null,dispatch:function(a,b){this.canceled=!1;for(var c=this.__listeners,d=this.__repeat,e=0;e<c.length&&(c[e](a,b),d[e]?++e:this.remove(c[e]),!this.canceled););},__class__:jl};var ri=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};g["lime.app._Event_Int_Int_Void"]=
ri;ri.__name__="lime.app._Event_Int_Int_Void";ri.prototype={canceled:null,__repeat:null,__priorities:null,add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var d=0,e=this.__priorities.length;d<e;){var f=d++;if(c>this.__priorities[f]){this.__listeners.splice(f,0,a);this.__priorities.splice(f,0,c);this.__repeat.splice(f,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=--b;)Na.compareMethods(this.__listeners[b],
a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},__listeners:null,dispatch:function(a,b){this.canceled=!1;for(var c=this.__listeners,d=this.__repeat,e=0;e<c.length&&(c[e](a,b),d[e]?++e:this.remove(c[e]),!this.canceled););},__class__:ri};var yf=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};g["lime.app._Event_Int_Void"]=yf;yf.__name__="lime.app._Event_Int_Void";yf.prototype={canceled:null,__repeat:null,__priorities:null,
add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var d=0,e=this.__priorities.length;d<e;){var f=d++;if(c>this.__priorities[f]){this.__listeners.splice(f,0,a);this.__priorities.splice(f,0,c);this.__repeat.splice(f,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=--b;)Na.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},__listeners:null,
dispatch:function(a){this.canceled=!1;for(var b=this.__listeners,c=this.__repeat,d=0;d<b.length&&(b[d](a),c[d]?++d:this.remove(b[d]),!this.canceled););},__class__:yf};var Gj=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};g["lime.app._Event_Int_lime_ui_JoystickHatPosition_Void"]=Gj;Gj.__name__="lime.app._Event_Int_lime_ui_JoystickHatPosition_Void";Gj.prototype={canceled:null,__repeat:null,__priorities:null,add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var d=
0,e=this.__priorities.length;d<e;){var f=d++;if(c>this.__priorities[f]){this.__listeners.splice(f,0,a);this.__priorities.splice(f,0,c);this.__repeat.splice(f,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},__listeners:null,__class__:Gj};var kl=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};g["lime.app._Event_String_Int_Int_Void"]=kl;kl.__name__="lime.app._Event_String_Int_Int_Void";kl.prototype={canceled:null,__repeat:null,
__priorities:null,add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var d=0,e=this.__priorities.length;d<e;){var f=d++;if(c>this.__priorities[f]){this.__listeners.splice(f,0,a);this.__priorities.splice(f,0,c);this.__repeat.splice(f,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},__listeners:null,__class__:kl};var si=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};g["lime.app._Event_String_Void"]=si;si.__name__="lime.app._Event_String_Void";
si.prototype={canceled:null,__repeat:null,__priorities:null,add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var d=0,e=this.__priorities.length;d<e;){var f=d++;if(c>this.__priorities[f]){this.__listeners.splice(f,0,a);this.__priorities.splice(f,0,c);this.__repeat.splice(f,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},cancel:function(){this.canceled=!0},has:function(a){for(var b=0,c=this.__listeners;b<c.length;){var d=c[b];++b;if(Na.compareMethods(d,
a))return!0}return!1},remove:function(a){for(var b=this.__listeners.length;0<=--b;)Na.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},__listeners:null,dispatch:function(a){this.canceled=!1;for(var b=this.__listeners,c=this.__repeat,d=0;d<b.length&&(b[d](a),c[d]?++d:this.remove(b[d]),!this.canceled););},__class__:si};var kc=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};g["lime.app._Event_Void_Void"]=
kc;kc.__name__="lime.app._Event_Void_Void";kc.prototype={canceled:null,__repeat:null,__priorities:null,add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var d=0,e=this.__priorities.length;d<e;){var f=d++;if(c>this.__priorities[f]){this.__listeners.splice(f,0,a);this.__priorities.splice(f,0,c);this.__repeat.splice(f,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=--b;)Na.compareMethods(this.__listeners[b],
a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},__listeners:null,dispatch:function(){this.canceled=!1;for(var a=this.__listeners,b=this.__repeat,c=0;c<a.length&&(a[c](),b[c]?++c:this.remove(a[c]),!this.canceled););},__class__:kc};var ti=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};g["lime.app._Event_lime_graphics_RenderContext_Void"]=ti;ti.__name__="lime.app._Event_lime_graphics_RenderContext_Void";ti.prototype=
{canceled:null,__repeat:null,__priorities:null,add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var d=0,e=this.__priorities.length;d<e;){var f=d++;if(c>this.__priorities[f]){this.__listeners.splice(f,0,a);this.__priorities.splice(f,0,c);this.__repeat.splice(f,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},cancel:function(){this.canceled=!0},remove:function(a){for(var b=this.__listeners.length;0<=--b;)Na.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,
1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},__listeners:null,dispatch:function(a){this.canceled=!1;for(var b=this.__listeners,c=this.__repeat,d=0;d<b.length&&(b[d](a),c[d]?++d:this.remove(b[d]),!this.canceled););},__class__:ti};var Hj=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};g["lime.app._Event_lime_ui_GamepadAxis_Float_Void"]=Hj;Hj.__name__="lime.app._Event_lime_ui_GamepadAxis_Float_Void";Hj.prototype={canceled:null,__repeat:null,__priorities:null,
add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var d=0,e=this.__priorities.length;d<e;){var f=d++;if(c>this.__priorities[f]){this.__listeners.splice(f,0,a);this.__priorities.splice(f,0,c);this.__repeat.splice(f,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=--b;)Na.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},__listeners:null,
dispatch:function(a,b){this.canceled=!1;for(var c=this.__listeners,d=this.__repeat,e=0;e<c.length&&(c[e](a,b),d[e]?++e:this.remove(c[e]),!this.canceled););},__class__:Hj};var Dk=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};g["lime.app._Event_lime_ui_GamepadButton_Void"]=Dk;Dk.__name__="lime.app._Event_lime_ui_GamepadButton_Void";Dk.prototype={canceled:null,__repeat:null,__priorities:null,add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var d=0,e=this.__priorities.length;d<
e;){var f=d++;if(c>this.__priorities[f]){this.__listeners.splice(f,0,a);this.__priorities.splice(f,0,c);this.__repeat.splice(f,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=--b;)Na.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},__listeners:null,dispatch:function(a){this.canceled=!1;for(var b=this.__listeners,c=this.__repeat,
d=0;d<b.length&&(b[d](a),c[d]?++d:this.remove(b[d]),!this.canceled););},__class__:Dk};var Ij=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};g["lime.app._Event_lime_ui_Gamepad_Void"]=Ij;Ij.__name__="lime.app._Event_lime_ui_Gamepad_Void";Ij.prototype={canceled:null,__repeat:null,__priorities:null,add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var d=0,e=this.__priorities.length;d<e;){var f=d++;if(c>this.__priorities[f]){this.__listeners.splice(f,0,a);this.__priorities.splice(f,
0,c);this.__repeat.splice(f,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=--b;)Na.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},__listeners:null,dispatch:function(a){this.canceled=!1;for(var b=this.__listeners,c=this.__repeat,d=0;d<b.length&&(b[d](a),c[d]?++d:this.remove(b[d]),!this.canceled););},__class__:Ij};var ui=function(){this.canceled=
!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};g["lime.app._Event_lime_ui_Joystick_Void"]=ui;ui.__name__="lime.app._Event_lime_ui_Joystick_Void";ui.prototype={canceled:null,__repeat:null,__priorities:null,add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var d=0,e=this.__priorities.length;d<e;){var f=d++;if(c>this.__priorities[f]){this.__listeners.splice(f,0,a);this.__priorities.splice(f,0,c);this.__repeat.splice(f,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);
this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=--b;)Na.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},__listeners:null,dispatch:function(a){this.canceled=!1;for(var b=this.__listeners,c=this.__repeat,d=0;d<b.length&&(b[d](a),c[d]?++d:this.remove(b[d]),!this.canceled););},__class__:ui};var Ek=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};g["lime.app._Event_lime_ui_KeyCode_lime_ui_KeyModifier_Void"]=
Ek;Ek.__name__="lime.app._Event_lime_ui_KeyCode_lime_ui_KeyModifier_Void";Ek.prototype={canceled:null,__repeat:null,__priorities:null,add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var d=0,e=this.__priorities.length;d<e;){var f=d++;if(c>this.__priorities[f]){this.__listeners.splice(f,0,a);this.__priorities.splice(f,0,c);this.__repeat.splice(f,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},cancel:function(){this.canceled=!0},remove:function(a){for(var b=
this.__listeners.length;0<=--b;)Na.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},__listeners:null,dispatch:function(a,b){this.canceled=!1;for(var c=this.__listeners,d=this.__repeat,e=0;e<c.length&&(c[e](a,b),d[e]?++e:this.remove(c[e]),!this.canceled););},__class__:Ek};var rg=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};g["lime.app._Event_lime_ui_Touch_Void"]=rg;rg.__name__="lime.app._Event_lime_ui_Touch_Void";
rg.prototype={canceled:null,__repeat:null,__priorities:null,add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var d=0,e=this.__priorities.length;d<e;){var f=d++;if(c>this.__priorities[f]){this.__listeners.splice(f,0,a);this.__priorities.splice(f,0,c);this.__repeat.splice(f,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=--b;)Na.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),
this.__priorities.splice(b,1),this.__repeat.splice(b,1))},__listeners:null,dispatch:function(a){this.canceled=!1;for(var b=this.__listeners,c=this.__repeat,d=0;d<b.length&&(b[d](a),c[d]?++d:this.remove(b[d]),!this.canceled););},__class__:rg};var Jh=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};g["lime.app._Event_lime_ui_Window_Void"]=Jh;Jh.__name__="lime.app._Event_lime_ui_Window_Void";Jh.prototype={canceled:null,__repeat:null,__priorities:null,add:function(a,
b,c){null==c&&(c=0);null==b&&(b=!1);for(var d=0,e=this.__priorities.length;d<e;){var f=d++;if(c>this.__priorities[f]){this.__listeners.splice(f,0,a);this.__priorities.splice(f,0,c);this.__repeat.splice(f,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=--b;)Na.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},__listeners:null,
dispatch:function(a){this.canceled=!1;for(var b=this.__listeners,c=this.__repeat,d=0;d<b.length&&(b[d](a),c[d]?++d:this.remove(b[d]),!this.canceled););},__class__:Jh};var wb=function(a,b,c,d,e,f,k){null==e&&(e=-1);null==d&&(d=-1);null==c&&(c=0);null==b&&(b=0);this.offsetX=b;this.offsetY=c;this.width=d;this.height=e;this.version=0;null==k&&(k=Wc.CANVAS);this.type=k;if(null==a){if(0<d&&0<e)switch(this.type._hx_index){case 0:this.buffer=new Nd(null,d,e);La.createCanvas(this,d,e);null!=f&&0!=f&&this.fillRect(new od(0,
0,d,e),f);break;case 1:a=d*e*4,a=null!=a?new Uint8Array(a):null,this.buffer=new Nd(a,d,e),null!=f&&0!=f&&this.fillRect(new od(0,0,d,e),f)}}else this.__fromImageBuffer(a)};g["lime.graphics.Image"]=wb;wb.__name__="lime.graphics.Image";wb.fromCanvas=function(a){if(null==a)return null;var b=new Nd(null,a.width,a.height);b.set_src(a);a=new wb(b);a.type=Wc.CANVAS;return a};wb.fromFile=function(a){if(null==a)return null;var b=new wb;return b.__fromFile(a)?b:null};wb.loadFromBytes=function(a){if(null==a)return nc.withValue(null);
if(wb.__isPNG(a))var b="image/png";else if(wb.__isJPG(a))b="image/jpeg";else if(wb.__isGIF(a))b="image/gif";else if(wb.__isWebP(a))b="image/webp";else return nc.withValue(null);return ea.loadImageFromBytes(a,b)};wb.loadFromFile=function(a){return null==a?nc.withValue(null):ea.loadImage(a)};wb.__isGIF=function(a){if(null==a||6>a.length)return!1;a=a.getString(0,6);return"GIF87a"!=a?"GIF89a"==a:!0};wb.__isJPG=function(a){return null==a||4>a.length?!1:255==a.b[0]&&216==a.b[1]&&255==a.b[a.length-2]?217==
a.b[a.length-1]:!1};wb.__isPNG=function(a){return null==a||8>a.length?!1:137==a.b[0]&&80==a.b[1]&&78==a.b[2]&&71==a.b[3]&&13==a.b[4]&&10==a.b[5]&&26==a.b[6]?10==a.b[7]:!1};wb.__isWebP=function(a){return null==a||16>a.length?!1:"RIFF"==a.getString(0,4)?"WEBP"==a.getString(8,4):!1};wb.prototype={buffer:null,dirty:null,height:null,offsetX:null,offsetY:null,rect:null,type:null,version:null,width:null,clone:function(){if(null!=this.buffer){this.type==Wc.CANVAS?La.convertToCanvas(this):La.convertToData(this);
var a=new wb(this.buffer.clone(),this.offsetX,this.offsetY,this.width,this.height,null,this.type);a.version=this.version;return a}return new wb(null,this.offsetX,this.offsetY,this.width,this.height,null,this.type)},colorTransform:function(a,b){a=this.__clipRect(a);if(null!=this.buffer&&null!=a)switch(this.type._hx_index){case 0:La.colorTransform(this,a,b);break;case 1:La.convertToData(this);Sb.colorTransform(this,a,b);break;case 2:a.offset(this.offsetX,this.offsetY),this.buffer.__srcBitmapData.colorTransform(a.__toFlashRectangle(),
mc.__toFlashColorTransform(b))}},copyChannel:function(a,b,c,d,e){b=this.__clipRect(b);if(null!=this.buffer&&null!=b&&!(e==oi.ALPHA&&!this.get_transparent()||0>=b.width||0>=b.height))switch(b.x+b.width>a.width&&(b.width=a.width-b.x),b.y+b.height>a.height&&(b.height=a.height-b.y),this.type._hx_index){case 0:La.copyChannel(this,a,b,c,d,e);break;case 1:La.convertToData(this);La.convertToData(a);Sb.copyChannel(this,a,b,c,d,e);break;case 2:switch(d._hx_index){case 0:var f=1;break;case 1:f=2;break;case 2:f=
4;break;case 3:f=8}switch(e._hx_index){case 0:var k=1;break;case 1:k=2;break;case 2:k=4;break;case 3:k=8}b.offset(a.offsetX,a.offsetY);c.offset(this.offsetX,this.offsetY);this.buffer.__srcBitmapData.copyChannel(a.buffer.get_src(),b.__toFlashRectangle(),c.__toFlashPoint(),f,k)}},copyPixels:function(a,b,c,d,e,f){null==f&&(f=!1);if(null!=this.buffer&&null!=a&&!(0>=b.width||0>=b.height||0>=this.width||0>=this.height))switch(b.x+b.width>a.width&&(b.width=a.width-b.x),b.y+b.height>a.height&&(b.height=a.height-
b.y),0>b.x&&(b.width+=b.x,b.x=0),0>b.y&&(b.height+=b.y,b.y=0),c.x+b.width>this.width&&(b.width=this.width-c.x),c.y+b.height>this.height&&(b.height=this.height-c.y),0>c.x&&(b.width+=c.x,b.x-=c.x,c.x=0),0>c.y&&(b.height+=c.y,b.y-=c.y,c.y=0),a==this&&c.x<b.get_right()&&c.y<b.get_bottom()&&(a=this.clone()),d==a&&(null==e||0==e.x&&0==e.y)&&(e=d=null),this.type._hx_index){case 0:null!=d?(La.convertToData(this),La.convertToData(a),null!=d&&La.convertToData(d),Sb.copyPixels(this,a,b,c,d,e,f)):(La.convertToCanvas(this),
La.convertToCanvas(a),La.copyPixels(this,a,b,c,d,e,f));break;case 1:La.convertToData(this);La.convertToData(a);null!=d&&La.convertToData(d);Sb.copyPixels(this,a,b,c,d,e,f);break;case 2:b.offset(a.offsetX,a.offsetY),c.offset(this.offsetX,this.offsetY),null!=d&&null!=e&&e.offset(d.offsetX,d.offsetY),this.buffer.__srcBitmapData.copyPixels(a.buffer.__srcBitmapData,b.__toFlashRectangle(),c.__toFlashPoint(),null!=d?d.buffer.get_src():null,null!=e?e.__toFlashPoint():null,f)}},fillRect:function(a,b,c){a=
this.__clipRect(a);if(null!=this.buffer&&null!=a)switch(this.type._hx_index){case 0:La.fillRect(this,a,b,c);break;case 1:La.convertToData(this);if(0==this.buffer.data.length)break;Sb.fillRect(this,a,b,c);break;case 2:a.offset(this.offsetX,this.offsetY);if(null==c)b=(b&255)<<24|(b>>>24&255)<<16|(b>>>16&255)<<8|b>>>8&255;else switch(c){case 1:break;case 2:b=(b&255)<<24|(b>>>8&255)<<16|(b>>>16&255)<<8|b>>>24&255;break;default:b=(b&255)<<24|(b>>>24&255)<<16|(b>>>16&255)<<8|b>>>8&255}this.buffer.__srcBitmapData.fillRect(a.__toFlashRectangle(),
b)}},setPixel:function(a,b,c,d){if(!(null==this.buffer||0>a||0>b||a>=this.width||b>=this.height))switch(this.type._hx_index){case 0:La.setPixel(this,a,b,c,d);break;case 1:La.convertToData(this);Sb.setPixel(this,a,b,c,d);break;case 2:if(null==d)c=(c&255)<<24|(c>>>24&255)<<16|(c>>>16&255)<<8|c>>>8&255;else switch(d){case 1:break;case 2:c=(c&255)<<24|(c>>>8&255)<<16|(c>>>16&255)<<8|c>>>24&255;break;default:c=(c&255)<<24|(c>>>24&255)<<16|(c>>>16&255)<<8|c>>>8&255}this.buffer.__srcBitmapData.setPixel(a+
this.offsetX,b+this.offsetX,c)}},__clipRect:function(a){return null==a||0>a.x&&(a.width-=-a.x,a.x=0,0>=a.x+a.width)||0>a.y&&(a.height-=-a.y,a.y=0,0>=a.y+a.height)||a.x+a.width>=this.width&&(a.width-=a.x+a.width-this.width,0>=a.width)||a.y+a.height>=this.height&&(a.height-=a.y+a.height-this.height,0>=a.height)?null:a},__fromBase64:function(a,b,c){var d=this,e=new Image;e.addEventListener("load",function(a){d.buffer=new Nd(null,e.width,e.height);d.buffer.__srcImage=e;d.offsetX=0;d.offsetY=0;d.width=
d.buffer.width;d.height=d.buffer.height;null!=c&&c(d)},!1);e.src="data:"+b+";base64,"+a},__fromBytes:function(a,b){if(wb.__isPNG(a))var c="image/png";else if(wb.__isJPG(a))c="image/jpeg";else if(wb.__isGIF(a))c="image/gif";else return!1;this.__fromBase64(me.encode(a),c,b);return!0},__fromFile:function(a,b,c){var d=this,e=new Image;ea.__isSameOrigin(a)||(e.crossOrigin="Anonymous");e.onload=function(a){d.buffer=new Nd(null,e.width,e.height);d.buffer.__srcImage=e;d.width=e.width;d.height=e.height;null!=
b&&b(d)};e.onerror=function(a){null!=c&&c()};e.src=a;return!0},__fromImageBuffer:function(a){this.buffer=a;null!=a&&(-1==this.width&&(this.width=a.width),-1==this.height&&(this.height=a.height))},get_data:function(){null==this.buffer.data&&0<this.buffer.width&&0<this.buffer.height&&La.convertToData(this);return this.buffer.data},get_format:function(){return this.buffer.format},set_format:function(a){this.buffer.format!=a&&1==this.type._hx_index&&Sb.setFormat(this,a);return this.buffer.format=a},get_premultiplied:function(){return this.buffer.premultiplied},
set_premultiplied:function(a){if(a&&!this.buffer.premultiplied)switch(this.type._hx_index){case 0:case 1:La.convertToData(this),Sb.multiplyAlpha(this)}else!a&&this.buffer.premultiplied&&1==this.type._hx_index&&(La.convertToData(this),Sb.unmultiplyAlpha(this));return a},get_rect:function(){return new od(0,0,this.width,this.height)},get_src:function(){null!=this.buffer.__srcCanvas||null==this.buffer.data&&this.type!=Wc.DATA||La.convertToCanvas(this);return this.buffer.get_src()},get_transparent:function(){return null==
this.buffer?!1:this.buffer.transparent},set_transparent:function(a){return null==this.buffer?!1:this.buffer.transparent=a},__class__:wb};var Nd=function(a,b,c,d,e){null==d&&(d=32);null==c&&(c=0);null==b&&(b=0);this.data=a;this.width=b;this.height=c;this.bitsPerPixel=d;this.format=null==e?0:e;this.premultiplied=!1;this.transparent=!0};g["lime.graphics.ImageBuffer"]=Nd;Nd.__name__="lime.graphics.ImageBuffer";Nd.prototype={bitsPerPixel:null,data:null,format:null,height:null,premultiplied:null,transparent:null,
width:null,__srcBitmapData:null,__srcCanvas:null,__srcContext:null,__srcImage:null,__srcImageData:null,clone:function(){var a=new Nd(this.data,this.width,this.height,this.bitsPerPixel);if(null!=this.data){var b=this.data.byteLength;b=null!=b?new Uint8Array(b):null;a.data=b;b=this.data;b=null!=b?new Uint8Array(b):null;a.data.set(b)}else null!=this.__srcImageData?(a.__srcCanvas=window.document.createElement("canvas"),a.__srcContext=a.__srcCanvas.getContext("2d"),a.__srcCanvas.width=this.__srcImageData.width,
a.__srcCanvas.height=this.__srcImageData.height,a.__srcImageData=a.__srcContext.createImageData(this.__srcImageData.width,this.__srcImageData.height),b=new Uint8ClampedArray(this.__srcImageData.data),a.__srcImageData.data.set(b)):null!=this.__srcCanvas?(a.__srcCanvas=window.document.createElement("canvas"),a.__srcContext=a.__srcCanvas.getContext("2d"),a.__srcCanvas.width=this.__srcCanvas.width,a.__srcCanvas.height=this.__srcCanvas.height,a.__srcContext.drawImage(this.__srcCanvas,0,0)):a.__srcImage=
this.__srcImage;a.bitsPerPixel=this.bitsPerPixel;a.format=this.format;a.premultiplied=this.premultiplied;a.transparent=this.transparent;return a},get_src:function(){return null!=this.__srcImage?this.__srcImage:this.__srcCanvas},set_src:function(a){a instanceof Image?this.__srcImage=a:a instanceof HTMLCanvasElement&&(this.__srcCanvas=a,this.__srcContext=this.__srcCanvas.getContext("2d"));return a},get_stride:function(){return this.width*(this.bitsPerPixel/8|0)},__class__:Nd};var oi=t["lime.graphics.ImageChannel"]=
{__ename__:"lime.graphics.ImageChannel",__constructs__:["RED","GREEN","BLUE","ALPHA"],RED:{_hx_index:0,__enum__:"lime.graphics.ImageChannel",toString:p},GREEN:{_hx_index:1,__enum__:"lime.graphics.ImageChannel",toString:p},BLUE:{_hx_index:2,__enum__:"lime.graphics.ImageChannel",toString:p},ALPHA:{_hx_index:3,__enum__:"lime.graphics.ImageChannel",toString:p}},Wc=t["lime.graphics.ImageType"]={__ename__:"lime.graphics.ImageType",__constructs__:["CANVAS","DATA","FLASH","CUSTOM"],CANVAS:{_hx_index:0,__enum__:"lime.graphics.ImageType",
toString:p},DATA:{_hx_index:1,__enum__:"lime.graphics.ImageType",toString:p},FLASH:{_hx_index:2,__enum__:"lime.graphics.ImageType",toString:p},CUSTOM:{_hx_index:3,__enum__:"lime.graphics.ImageType",toString:p}},Ck=function(){};g["lime.graphics.RenderContext"]=Ck;Ck.__name__="lime.graphics.RenderContext";Ck.prototype={attributes:null,canvas2D:null,dom:null,type:null,version:null,webgl:null,webgl2:null,window:null,__class__:Ck};var Yl={};g["lime.graphics._WebGL2RenderContext.WebGL2RenderContext_Impl_"]=
Yl;Yl.__name__="lime.graphics._WebGL2RenderContext.WebGL2RenderContext_Impl_";Yl.uniform2fv=function(a,b,c,d,e){null!=d?a.uniform2fv(b,c,d,e):a.uniform2fv(b,c)};var sb={};g["lime.graphics._WebGLRenderContext.WebGLRenderContext_Impl_"]=sb;sb.__name__="lime.graphics._WebGLRenderContext.WebGLRenderContext_Impl_";sb.bufferData=function(a,b,c,d){a.bufferData(b,c,d)};sb.texImage2D=function(a,b,c,d,e,f,k,m,h,n){null!=m?a.texImage2D(b,c,d,e,f,k,m,h,n):a.texImage2D(b,c,d,e,f,k)};sb.uniformMatrix2fv=function(a,
b,c,d){a.uniformMatrix2fv(b,c,d)};sb.uniformMatrix3fv=function(a,b,c,d){a.uniformMatrix3fv(b,c,d)};sb.uniformMatrix4fv=function(a,b,c,d){a.uniformMatrix4fv(b,c,d)};sb.fromWebGL2RenderContext=function(a){return a};var Zl=function(a){};g["lime.graphics.cairo.Cairo"]=Zl;Zl.__name__="lime.graphics.cairo.Cairo";Zl.prototype={clip:function(){},identityMatrix:function(){},newPath:function(){},paint:function(){},rectangle:function(a,b,c,d){},restore:function(){},save:function(){},setOperator:function(a){return a},
setSourceRGB:function(a,b,c){},set_matrix:function(a){return a},__class__:Zl};var $l={};g["lime.graphics.cairo._CairoSurface.CairoSurface_Impl_"]=$l;$l.__name__="lime.graphics.cairo._CairoSurface.CairoSurface_Impl_";$l.flush=function(a){};var fh=function(){};g["lime.graphics.opengl.GL"]=fh;fh.__name__="lime.graphics.opengl.GL";var am=function(){this.STACK_UNDERFLOW=1284;this.STACK_OVERFLOW=1283;this.CONTEXT_FLAG_DEBUG_BIT=2;this.DEBUG_OUTPUT=37600;this.DEBUG_SEVERITY_LOW=37192;this.DEBUG_SEVERITY_MEDIUM=
37191;this.DEBUG_SEVERITY_HIGH=37190;this.DEBUG_LOGGED_MESSAGES=37189;this.MAX_DEBUG_LOGGED_MESSAGES=37188;this.MAX_DEBUG_MESSAGE_LENGTH=37187;this.MAX_LABEL_LENGTH=33512;this.SAMPLER=33510;this.QUERY=33507;this.PROGRAM=33506;this.SHADER=33505;this.BUFFER=33504;this.DEBUG_GROUP_STACK_DEPTH=33389;this.MAX_DEBUG_GROUP_STACK_DEPTH=33388;this.DEBUG_SEVERITY_NOTIFICATION=33387;this.DEBUG_TYPE_POP_GROUP=33386;this.DEBUG_TYPE_PUSH_GROUP=33385;this.DEBUG_TYPE_MARKER=33384;this.DEBUG_TYPE_OTHER=33361;this.DEBUG_TYPE_PERFORMANCE=
33360;this.DEBUG_TYPE_PORTABILITY=33359;this.DEBUG_TYPE_UNDEFINED_BEHAVIOR=33358;this.DEBUG_TYPE_DEPRECATED_BEHAVIOR=33357;this.DEBUG_TYPE_ERROR=33356;this.DEBUG_SOURCE_OTHER=33355;this.DEBUG_SOURCE_APPLICATION=33354;this.DEBUG_SOURCE_THIRD_PARTY=33353;this.DEBUG_SOURCE_SHADER_COMPILER=33352;this.DEBUG_SOURCE_WINDOW_SYSTEM=33351;this.DEBUG_SOURCE_API=33350;this.DEBUG_CALLBACK_USER_PARAM=33349;this.DEBUG_CALLBACK_FUNCTION=33348;this.DEBUG_NEXT_LOGGED_MESSAGE_LENGTH=33347;this.DEBUG_OUTPUT_SYNCHRONOUS=
33346};g["lime.graphics.opengl.ext.KHR_debug"]=am;am.__name__="lime.graphics.opengl.ext.KHR_debug";am.prototype={DEBUG_OUTPUT_SYNCHRONOUS:null,DEBUG_NEXT_LOGGED_MESSAGE_LENGTH:null,DEBUG_CALLBACK_FUNCTION:null,DEBUG_CALLBACK_USER_PARAM:null,DEBUG_SOURCE_API:null,DEBUG_SOURCE_WINDOW_SYSTEM:null,DEBUG_SOURCE_SHADER_COMPILER:null,DEBUG_SOURCE_THIRD_PARTY:null,DEBUG_SOURCE_APPLICATION:null,DEBUG_SOURCE_OTHER:null,DEBUG_TYPE_ERROR:null,DEBUG_TYPE_DEPRECATED_BEHAVIOR:null,DEBUG_TYPE_UNDEFINED_BEHAVIOR:null,
DEBUG_TYPE_PORTABILITY:null,DEBUG_TYPE_PERFORMANCE:null,DEBUG_TYPE_OTHER:null,DEBUG_TYPE_MARKER:null,DEBUG_TYPE_PUSH_GROUP:null,DEBUG_TYPE_POP_GROUP:null,DEBUG_SEVERITY_NOTIFICATION:null,MAX_DEBUG_GROUP_STACK_DEPTH:null,DEBUG_GROUP_STACK_DEPTH:null,BUFFER:null,SHADER:null,PROGRAM:null,QUERY:null,SAMPLER:null,MAX_LABEL_LENGTH:null,MAX_DEBUG_MESSAGE_LENGTH:null,MAX_DEBUG_LOGGED_MESSAGES:null,DEBUG_LOGGED_MESSAGES:null,DEBUG_SEVERITY_HIGH:null,DEBUG_SEVERITY_MEDIUM:null,DEBUG_SEVERITY_LOW:null,DEBUG_OUTPUT:null,
CONTEXT_FLAG_DEBUG_BIT:null,STACK_OVERFLOW:null,STACK_UNDERFLOW:null,__class__:am};var mc={};g["lime.math._ColorMatrix.ColorMatrix_Impl_"]=mc;mc.__name__="lime.math._ColorMatrix.ColorMatrix_Impl_";mc.getAlphaTable=function(a){if(null==mc.__alphaTable){var b=new Uint8Array(256);mc.__alphaTable=b}mc.__alphaTable[0]=0;for(var c=1;256>c;){var d=c++;b=Math.floor(d*a[18]+255*a[19]);255<b&&(b=255);0>b&&(b=0);mc.__alphaTable[d]=b}return mc.__alphaTable};mc.getBlueTable=function(a){if(null==mc.__blueTable){var b=
new Uint8Array(256);mc.__blueTable=b}for(var c=0;256>c;){var d=c++;b=Math.floor(d*a[12]+255*a[14]);255<b&&(b=255);0>b&&(b=0);mc.__blueTable[d]=b}return mc.__blueTable};mc.getGreenTable=function(a){if(null==mc.__greenTable){var b=new Uint8Array(256);mc.__greenTable=b}for(var c=0;256>c;){var d=c++;b=Math.floor(d*a[6]+255*a[9]);255<b&&(b=255);0>b&&(b=0);mc.__greenTable[d]=b}return mc.__greenTable};mc.getRedTable=function(a){if(null==mc.__redTable){var b=new Uint8Array(256);mc.__redTable=b}for(var c=
0;256>c;){var d=c++;b=Math.floor(d*a[0]+255*a[4]);255<b&&(b=255);0>b&&(b=0);mc.__redTable[d]=b}return mc.__redTable};mc.__toFlashColorTransform=function(a){return null};var Za={};g["lime.math._Matrix4.Matrix4_Impl_"]=Za;Za.__name__="lime.math._Matrix4.Matrix4_Impl_";Za._new=function(a){if(null==a||16!=a.length)a=Za.__identity,a=null!=a?new Float32Array(a):null;return a};Za.append=function(a,b){var c=a[0],d=a[4],e=a[8],f=a[12],k=a[1],m=a[5],h=a[9],n=a[13],K=a[2],l=a[6],g=a[10],p=a[14],H=a[3],C=a[7],
y=a[11],I=a[15],r=Za.get(b,0),q=Za.get(b,4),t=Za.get(b,8),z=Za.get(b,12),u=Za.get(b,1),A=Za.get(b,5),w=Za.get(b,9),O=Za.get(b,13),v=Za.get(b,2),B=Za.get(b,6),F=Za.get(b,10),x=Za.get(b,14),qa=Za.get(b,3),M=Za.get(b,7),Ia=Za.get(b,11);b=Za.get(b,15);a[0]=c*r+k*q+K*t+H*z;a[1]=c*u+k*A+K*w+H*O;a[2]=c*v+k*B+K*F+H*x;a[3]=c*qa+k*M+K*Ia+H*b;a[4]=d*r+m*q+l*t+C*z;a[5]=d*u+m*A+l*w+C*O;a[6]=d*v+m*B+l*F+C*x;a[7]=d*qa+m*M+l*Ia+C*b;a[8]=e*r+h*q+g*t+y*z;a[9]=e*u+h*A+g*w+y*O;a[10]=e*v+h*B+g*F+y*x;a[11]=e*qa+h*M+g*
Ia+y*b;a[12]=f*r+n*q+p*t+I*z;a[13]=f*u+n*A+p*w+I*O;a[14]=f*v+n*B+p*F+I*x;a[15]=f*qa+n*M+p*Ia+I*b};Za.createOrtho=function(a,b,c,d,e,f,k){var m=1/(c-b),h=1/(e-d),n=1/(k-f);a[0]=2*m;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2*h;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=-2*n;a[11]=0;a[12]=-(b+c)*m;a[13]=-(d+e)*h;a[14]=-(f+k)*n;a[15]=1};Za.identity=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1};Za.get=function(a,b){return a[b]};Za.set=
function(a,b,c){return a[b]=c};var S={};g["lime.math._RGBA.RGBA_Impl_"]=S;S.__name__="lime.math._RGBA.RGBA_Impl_";var od=function(a,b,c,d){null==d&&(d=0);null==c&&(c=0);null==b&&(b=0);null==a&&(a=0);this.x=a;this.y=b;this.width=c;this.height=d};g["lime.math.Rectangle"]=od;od.__name__="lime.math.Rectangle";od.prototype={height:null,width:null,x:null,y:null,intersection:function(a,b){null==b&&(b=new od);var c=this.x<a.x?a.x:this.x,d=this.get_right()>a.get_right()?a.get_right():this.get_right();if(d<=
c)return b.setEmpty(),b;var e=this.y<a.y?a.y:this.y;a=this.get_bottom()>a.get_bottom()?a.get_bottom():this.get_bottom();if(a<=e)return b.setEmpty(),b;b.x=c;b.y=e;b.width=d-c;b.height=a-e;return b},offset:function(a,b){this.x+=a;this.y+=b},setEmpty:function(){this.x=this.y=this.width=this.height=0},setTo:function(a,b,c,d){this.x=a;this.y=b;this.width=c;this.height=d},__toFlashRectangle:function(){return null},get_bottom:function(){return this.y+this.height},get_right:function(){return this.x+this.width},
__class__:od};var of=function(a,b){null==b&&(b=0);null==a&&(a=0);this.x=a;this.y=b};g["lime.math.Vector2"]=of;of.__name__="lime.math.Vector2";of.prototype={x:null,y:null,offset:function(a,b){this.x+=a;this.y+=b},__toFlashPoint:function(){return null},__class__:of};var Ak=function(a,b,c,d){null==d&&(d=0);null==c&&(c=0);null==b&&(b=0);null==a&&(a=0);this.w=d;this.x=a;this.y=b;this.z=c};g["lime.math.Vector4"]=Ak;Ak.__name__="lime.math.Vector4";Ak.prototype={w:null,x:null,y:null,z:null,__class__:Ak};
var zc=function(){};g["lime.media.AudioBuffer"]=zc;zc.__name__="lime.media.AudioBuffer";zc.fromBytes=function(a){if(null==a)return null;var b=new zc;b.set_src(new Howl({src:["data:"+zc.__getCodec(a)+";base64,"+me.encode(a)],html5:!0,preload:!1}));return b};zc.fromFile=function(a){if(null==a)return null;var b=new zc;b.__srcHowl=new Howl({src:[a],preload:!1});return b};zc.fromFiles=function(a){var b=new zc;b.__srcHowl=new Howl({src:a,preload:!1});return b};zc.loadFromFile=function(a){var b=new Vc,c=
zc.fromFile(a);null!=c?null!=c&&(c.__srcHowl.on("load",function(){b.complete(c)}),c.__srcHowl.on("loaderror",function(a,c){b.error(c)}),c.__srcHowl.load()):b.error(null);return b.future};zc.loadFromFiles=function(a){var b=new Vc,c=zc.fromFiles(a);null!=c?(c.__srcHowl.on("load",function(){b.complete(c)}),c.__srcHowl.on("loaderror",function(){b.error(null)}),c.__srcHowl.load()):b.error(null);return b.future};zc.__getCodec=function(a){switch(a.getString(0,4)){case "OggS":return"audio/ogg";case "RIFF":if("WAVE"==
a.getString(8,4))return"audio/wav";var b=a.b[2],c=a.b[1];switch(a.b[0]){case 73:if(68==c&&51==b)return"audio/mp3";break;case 255:switch(c){case 243:case 250:case 251:return"audio/mp3"}}break;case "fLaC":return"audio/flac";default:switch(b=a.b[2],c=a.b[1],a.b[0]){case 73:if(68==c&&51==b)return"audio/mp3";break;case 255:switch(c){case 243:case 250:case 251:return"audio/mp3"}}}Ga.error("Unsupported sound format",{fileName:"lime/media/AudioBuffer.hx",lineNumber:362,className:"lime.media.AudioBuffer",
methodName:"__getCodec"});return null};zc.prototype={__srcHowl:null,set_src:function(a){return this.__srcHowl=a},__class__:zc};var wi=function(a){if("custom"!=a){if(null==a||"web"==a)try{window.AudioContext=window.AudioContext||window.webkitAudioContext,this.web=new window.AudioContext,this.type="web"}catch(b){ab.lastException=b}null==this.web&&"web"!=a&&(this.html5=new vi,this.type="html5")}else this.type="custom"};g["lime.media.AudioContext"]=wi;wi.__name__="lime.media.AudioContext";wi.prototype=
{html5:null,openal:null,type:null,web:null,__class__:wi};var ve=function(){};g["lime.media.AudioManager"]=ve;ve.__name__="lime.media.AudioManager";ve.init=function(a){if(null==ve.context){if(null==a&&(ve.context=new wi,a=ve.context,"openal"==a.type)){var b=a.openal,c=b.openDevice();c=b.createContext(c);b.makeContextCurrent(c);b.processContext(c)}ve.context=a}};var bm=function(a,b,c,d){null==d&&(d=0);null==b&&(b=0);this.onComplete=new kc;this.buffer=a;this.offset=b;this.__backend=new Bk(this);null!=
c&&0!=c&&this.set_length(c);this.set_loops(d);null!=a&&this.init()};g["lime.media.AudioSource"]=bm;bm.__name__="lime.media.AudioSource";bm.prototype={onComplete:null,buffer:null,offset:null,__backend:null,dispose:function(){this.__backend.dispose()},init:function(){this.__backend.init()},play:function(){this.__backend.play()},stop:function(){this.__backend.stop()},get_currentTime:function(){return this.__backend.getCurrentTime()},set_currentTime:function(a){return this.__backend.setCurrentTime(a)},
get_gain:function(){return this.__backend.getGain()},set_gain:function(a){return this.__backend.setGain(a)},set_length:function(a){return this.__backend.setLength(a)},set_loops:function(a){return this.__backend.setLoops(a)},get_position:function(){return this.__backend.getPosition()},set_position:function(a){return this.__backend.setPosition(a)},__class__:bm};var vi=function(){};g["lime.media.HTML5AudioContext"]=vi;vi.__name__="lime.media.HTML5AudioContext";vi.prototype={__class__:vi};var cm=function(){};
g["lime.media.OpenALAudioContext"]=cm;cm.__name__="lime.media.OpenALAudioContext";cm.prototype={createContext:function(a,b){return sg.createContext(a,b)},makeContextCurrent:function(a){return sg.makeContextCurrent(a)},openDevice:function(a){return sg.openDevice(a)},processContext:function(a){sg.processContext(a)},__class__:cm};var sg=function(){};g["lime.media.openal.ALC"]=sg;sg.__name__="lime.media.openal.ALC";sg.createContext=function(a,b){return null};sg.makeContextCurrent=function(a){return!1};
sg.openDevice=function(a){return null};sg.processContext=function(a){};var Fk=function(){};g["lime.net._IHTTPRequest"]=Fk;Fk.__name__="lime.net._IHTTPRequest";Fk.__isInterface__=!0;Fk.prototype={contentType:null,data:null,enableResponseHeaders:null,followRedirects:null,formData:null,headers:null,method:null,responseHeaders:null,responseStatus:null,timeout:null,uri:null,userAgent:null,withCredentials:null,__class__:Fk};var Fd=function(a){this.uri=a;this.contentType="application/x-www-form-urlencoded";
this.followRedirects=!0;this.enableResponseHeaders=!1;this.formData=new Ra;this.headers=[];this.method="GET";this.timeout=3E4;this.withCredentials=!1;this.__backend=new ea;this.__backend.init(this)};g["lime.net._HTTPRequest.AbstractHTTPRequest"]=Fd;Fd.__name__="lime.net._HTTPRequest.AbstractHTTPRequest";Fd.__interfaces__=[Fk];Fd.prototype={contentType:null,data:null,enableResponseHeaders:null,followRedirects:null,formData:null,headers:null,method:null,responseData:null,responseHeaders:null,responseStatus:null,
timeout:null,uri:null,userAgent:null,withCredentials:null,__backend:null,__class__:Fd};var qf=function(a){Fd.call(this,a)};g["lime.net._HTTPRequest_Bytes"]=qf;qf.__name__="lime.net._HTTPRequest_Bytes";qf.__super__=Fd;qf.prototype=v(Fd.prototype,{fromBytes:function(a){return a},load:function(a){var b=this;null!=a&&(this.uri=a);var c=new Vc;a=this.__backend.loadData(this.uri);a.onProgress(u(c,c.progress));a.onError(u(c,c.error));a.onComplete(function(a){b.responseData=b.fromBytes(a);c.complete(b.responseData)});
return c.future},__class__:qf});var xi=function(a){Fd.call(this,a)};g["lime.net._HTTPRequest_String"]=xi;xi.__name__="lime.net._HTTPRequest_String";xi.__super__=Fd;xi.prototype=v(Fd.prototype,{load:function(a){var b=this;null!=a&&(this.uri=a);var c=new Vc;a=this.__backend.loadText(this.uri);a.onProgress(u(c,c.progress));a.onError(u(c,c.error));a.onComplete(function(a){b.responseData=a;c.complete(b.responseData)});return c.future},__class__:xi});var eh=function(a,b){null==b&&(b="");this.name=a;this.value=
b};g["lime.net.HTTPRequestHeader"]=eh;eh.__name__="lime.net.HTTPRequestHeader";eh.prototype={name:null,value:null,__class__:eh};var yi=function(a){Fd.call(this,a)};g["lime.net._HTTPRequest_lime_utils_Bytes"]=yi;yi.__name__="lime.net._HTTPRequest_lime_utils_Bytes";yi.__super__=qf;yi.prototype=v(qf.prototype,{fromBytes:function(a){return fd.fromBytes(a)},__class__:yi});var Gk=function(a){Fd.call(this,a)};g["lime.net._HTTPRequest_openfl_utils_ByteArray"]=Gk;Gk.__name__="lime.net._HTTPRequest_openfl_utils_ByteArray";
Gk.__super__=qf;Gk.prototype=v(qf.prototype,{fromBytes:function(a){return rf.fromBytes(a)},__class__:Gk});var Mc=function(){};g["lime.system.Clipboard"]=Mc;Mc.__name__="lime.system.Clipboard";Mc.__update=function(){var a=Mc._text;Mc._text=null;Mc._text!=a&&Mc.onUpdate.dispatch()};Mc.get_text=function(){Mc.__update();return Mc._text};Mc.set_text=function(a){var b=Mc._text;Mc._text=a;var c=ha.current.__window;null!=c&&c.__backend.setClipboard(a);Mc._text!=b&&Mc.onUpdate.dispatch();return a};var um=
function(){};g["lime.system.DisplayMode"]=um;um.__name__="lime.system.DisplayMode";var sm=t["lime.system.Endian"]={__ename__:"lime.system.Endian",__constructs__:["LITTLE_ENDIAN","BIG_ENDIAN"],LITTLE_ENDIAN:{_hx_index:0,__enum__:"lime.system.Endian",toString:p},BIG_ENDIAN:{_hx_index:1,__enum__:"lime.system.Endian",toString:p}},De=function(a,b){this.onUpdate=new Dj;this.type=a;this.id=b};g["lime.system.Sensor"]=De;De.__name__="lime.system.Sensor";De.registerSensor=function(a,b){a=new De(a,b);De.sensors.push(a);
return De.sensorByID.h[b]=a};De.prototype={id:null,onUpdate:null,type:null,__class__:De};var Hm=t["lime.system.SensorType"]={__ename__:"lime.system.SensorType",__constructs__:["ACCELEROMETER"],ACCELEROMETER:{_hx_index:0,__enum__:"lime.system.SensorType",toString:p}},jc=function(){};g["lime.system.System"]=jc;jc.__name__="lime.system.System";jc.embed=x.lime.embed=function(a,b,c,d,e){if(null!=jc.__applicationEntryPoint){var f=jc.__applicationEntryPoint;if(null!=F[a]?f.existsReserved(a):f.h.hasOwnProperty(a))f=
"string"==typeof b?window.document.getElementById(b):null==b?window.document.createElement("div"):b,null==f?window.console.log("[lime.embed] ERROR: Cannot find target element: "+r.string(b)):(null==c&&(c=0),null==d&&(d=0),null==e&&(e={}),Object.prototype.hasOwnProperty.call(e,"background")&&"string"==typeof e.background&&(b=Y.replace(r.string(e.background),"#",""),-1<b.indexOf("0x")?e.background=r.parseInt(b):e.background=r.parseInt("0x"+b)),e.element=f,e.width=c,e.height=d,c=jc.__applicationEntryPoint,
(null!=F[a]?c.getReserved(a):c.h[a])(e))}};jc.exit=function(a){};jc.getTimer=function(){return window.performance.now()|0};jc.openURL=function(a,b){null==b&&(b="_blank");null!=a&&window.open(a,b)};jc.__registerEntryPoint=function(a,b){null==jc.__applicationEntryPoint&&(jc.__applicationEntryPoint=new Ra);var c=jc.__applicationEntryPoint;null!=F[a]?c.setReserved(a,b):c.h[a]=b};jc.get_endianness=function(){if(null==jc.__endianness){var a=new ArrayBuffer(2),b=null!=a?new Uint8Array(a,0):null;a=null!=
a?new Uint16Array(a,0):null;b[0]=170;b[1]=187;jc.__endianness=43707==a[0]?sm.BIG_ENDIAN:sm.LITTLE_ENDIAN}return jc.__endianness};var pi=function(a,b){null==b&&(b=1);null==a&&(a=0);this.onRun=new Oe;this.onError=new Oe;this.onComplete=new Oe;this.doWork=new Oe;this.minThreads=a;this.maxThreads=b;this.currentThreads=0};g["lime.system.ThreadPool"]=pi;pi.__name__="lime.system.ThreadPool";pi.prototype={currentThreads:null,doWork:null,maxThreads:null,minThreads:null,onComplete:null,onError:null,onRun:null,
queue:function(a){this.runWork(a)},sendComplete:function(a){this.onComplete.dispatch(a)},sendError:function(a){this.onError.dispatch(a)},runWork:function(a){this.onRun.dispatch(a);this.doWork.dispatch(a)},__class__:pi};var gd=function(a){null!=a&&(this.name=a);this.__init||(void 0==this.ascender&&(this.ascender=0),void 0==this.descender&&(this.descender=0),void 0==this.height&&(this.height=0),void 0==this.numGlyphs&&(this.numGlyphs=0),void 0==this.underlinePosition&&(this.underlinePosition=0),void 0==
this.underlineThickness&&(this.underlineThickness=0),void 0==this.unitsPerEM&&(this.unitsPerEM=0),null!=this.__fontID?Da.isLocal(this.__fontID)&&this.__fromBytes(Da.getBytes(this.__fontID)):null!=this.__fontPath&&this.__fromFile(this.__fontPath))};g["lime.text.Font"]=gd;gd.__name__="lime.text.Font";gd.fromFile=function(a){if(null==a)return null;var b=new gd;b.__fromFile(a);return b};gd.loadFromName=function(a){return(new gd).__loadFromName(a)};gd.__measureFontNode=function(a){var b=window.document.createElement("span");
b.setAttribute("aria-hidden","true");var c=window.document.createTextNode("BESbswy");b.appendChild(c);c=b.style;c.display="block";c.position="absolute";c.top="-9999px";c.left="-9999px";c.fontSize="300px";c.width="auto";c.height="auto";c.lineHeight="normal";c.margin="0";c.padding="0";c.fontVariant="normal";c.whiteSpace="nowrap";c.fontFamily=a;window.document.body.appendChild(b);return b};gd.prototype={ascender:null,descender:null,height:null,name:null,numGlyphs:null,src:null,underlinePosition:null,
underlineThickness:null,unitsPerEM:null,__fontID:null,__fontPath:null,__init:null,__copyFrom:function(a){null!=a&&(this.ascender=a.ascender,this.descender=a.descender,this.height=a.height,this.name=a.name,this.numGlyphs=a.numGlyphs,this.src=a.src,this.underlinePosition=a.underlinePosition,this.underlineThickness=a.underlineThickness,this.unitsPerEM=a.unitsPerEM,this.__fontID=a.__fontID,this.__fontPath=a.__fontPath,this.__init=!0)},__fromBytes:function(a){this.__fontPath=null},__fromFile:function(a){this.__fontPath=
a},__loadFromName:function(a){var b=this,c=new Vc;this.name=a;var d=window.navigator.userAgent.toLowerCase(),e=0<=d.indexOf(" safari/")&&0>d.indexOf(" chrome/");d=(new Ba("(iPhone|iPod|iPad).*AppleWebKit(?!.*Version)","i")).match(d);if(!e&&!d&&window.document.fonts&&(q=window.document.fonts,u(q,q.load)))window.document.fonts.load("1em '"+a+"'").then(function(a){c.complete(b)},function(d){Ga.warn('Could not load web font "'+a+'"',{fileName:"lime/text/Font.hx",lineNumber:513,className:"lime.text.Font",
methodName:"__loadFromName"});c.complete(b)});else{var f=gd.__measureFontNode("'"+a+"', sans-serif"),k=gd.__measureFontNode("'"+a+"', serif"),m=f.offsetWidth,h=k.offsetWidth,n=-1,K=0,l,g;n=window.setInterval(function(){K+=1;l=f.offsetWidth!=m||k.offsetWidth!=h;g=3E3<=50*K;if(l||g)window.clearInterval(n),f.parentNode.removeChild(f),k.parentNode.removeChild(k),k=f=null,g&&Ga.warn('Could not load web font "'+a+'"',{fileName:"lime/text/Font.hx",lineNumber:548,className:"lime.text.Font",methodName:"__loadFromName"}),
c.complete(b)},50)}return c.future},__class__:gd};var vm=function(){};g["lime.text.harfbuzz.HBSegmentProperties"]=vm;vm.__name__="lime.text.harfbuzz.HBSegmentProperties";var lc=function(a){this.onDisconnect=new kc;this.onButtonUp=new Dk;this.onButtonDown=new Dk;this.onAxisMove=new Hj;this.id=a;this.connected=!0};g["lime.ui.Gamepad"]=lc;lc.__name__="lime.ui.Gamepad";lc.__connect=function(a){if(!lc.devices.h.hasOwnProperty(a)){var b=new lc(a);lc.devices.h[a]=b;lc.onConnect.dispatch(b)}};lc.__disconnect=
function(a){var b=lc.devices.h[a];null!=b&&(b.connected=!1);lc.devices.remove(a);null!=b&&b.onDisconnect.dispatch()};lc.prototype={connected:null,id:null,onAxisMove:null,onButtonDown:null,onButtonUp:null,onDisconnect:null,__class__:lc};var sc=function(a){this.onTrackballMove=new il;this.onHatMove=new Gj;this.onDisconnect=new kc;this.onButtonUp=new yf;this.onButtonDown=new yf;this.onAxisMove=new jl;this.id=a;this.connected=!0};g["lime.ui.Joystick"]=sc;sc.__name__="lime.ui.Joystick";sc.__connect=function(a){if(!sc.devices.h.hasOwnProperty(a)){var b=
new sc(a);sc.devices.h[a]=b;sc.onConnect.dispatch(b)}};sc.__disconnect=function(a){var b=sc.devices.h[a];null!=b&&(b.connected=!1);sc.devices.remove(a);null!=b&&b.onDisconnect.dispatch()};sc.__getDeviceData=function(){return navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads():null};sc.prototype={connected:null,id:null,onAxisMove:null,onButtonDown:null,onButtonUp:null,onDisconnect:null,onHatMove:null,onTrackballMove:null,__class__:sc};var fb={};g["lime.ui._KeyModifier.KeyModifier_Impl_"]=
fb;fb.__name__="lime.ui._KeyModifier.KeyModifier_Impl_";fb.get_altKey=function(a){return 0>=(a&256)?0<(a&512):!0};fb.get_ctrlKey=function(a){return 0>=(a&64)?0<(a&128):!0};fb.get_metaKey=function(a){return 0>=(a&1024)?0<(a&2048):!0};fb.get_shiftKey=function(a){return 0>=(a&1)?0<(a&2):!0};var dd=t["lime.ui.MouseCursor"]={__ename__:"lime.ui.MouseCursor",__constructs__:"ARROW CROSSHAIR DEFAULT MOVE POINTER RESIZE_NESW RESIZE_NS RESIZE_NWSE RESIZE_WE TEXT WAIT WAIT_ARROW CUSTOM".split(" "),ARROW:{_hx_index:0,
__enum__:"lime.ui.MouseCursor",toString:p},CROSSHAIR:{_hx_index:1,__enum__:"lime.ui.MouseCursor",toString:p},DEFAULT:{_hx_index:2,__enum__:"lime.ui.MouseCursor",toString:p},MOVE:{_hx_index:3,__enum__:"lime.ui.MouseCursor",toString:p},POINTER:{_hx_index:4,__enum__:"lime.ui.MouseCursor",toString:p},RESIZE_NESW:{_hx_index:5,__enum__:"lime.ui.MouseCursor",toString:p},RESIZE_NS:{_hx_index:6,__enum__:"lime.ui.MouseCursor",toString:p},RESIZE_NWSE:{_hx_index:7,__enum__:"lime.ui.MouseCursor",toString:p},RESIZE_WE:{_hx_index:8,
__enum__:"lime.ui.MouseCursor",toString:p},TEXT:{_hx_index:9,__enum__:"lime.ui.MouseCursor",toString:p},WAIT:{_hx_index:10,__enum__:"lime.ui.MouseCursor",toString:p},WAIT_ARROW:{_hx_index:11,__enum__:"lime.ui.MouseCursor",toString:p},CUSTOM:{_hx_index:12,__enum__:"lime.ui.MouseCursor",toString:p}},ni=t["lime.ui.MouseWheelMode"]={__ename__:"lime.ui.MouseWheelMode",__constructs__:["PIXELS","LINES","PAGES","UNKNOWN"],PIXELS:{_hx_index:0,__enum__:"lime.ui.MouseWheelMode",toString:p},LINES:{_hx_index:1,
__enum__:"lime.ui.MouseWheelMode",toString:p},PAGES:{_hx_index:2,__enum__:"lime.ui.MouseWheelMode",toString:p},UNKNOWN:{_hx_index:3,__enum__:"lime.ui.MouseWheelMode",toString:p}},Fc=function(a,b,c,d,e,f,k){this.x=a;this.y=b;this.id=c;this.dx=d;this.dy=e;this.pressure=f;this.device=k};g["lime.ui.Touch"]=Fc;Fc.__name__="lime.ui.Touch";Fc.prototype={device:null,dx:null,dy:null,id:null,pressure:null,x:null,y:null,__class__:Fc};var zi=function(a,b){this.onTextInput=new si;this.onTextEdit=new kl;this.onRestore=
new kc;this.onResize=new ri;this.onRenderContextRestored=new ti;this.onRenderContextLost=new kc;this.onRender=new ti;this.onMove=new qi;this.onMouseWheel=new hl;this.onMouseUp=new Ej;this.onMouseMoveRelative=new qi;this.onMouseMove=new qi;this.onMouseDown=new Fj;this.onMinimize=new kc;this.onLeave=new kc;this.onKeyUp=new Ek;this.onKeyDown=new Ek;this.onFullscreen=new kc;this.onFocusOut=new kc;this.onFocusIn=new kc;this.onExpose=new kc;this.onEnter=new kc;this.onDropFile=new si;this.onDeactivate=new kc;
this.onClose=new kc;this.onActivate=new kc;this.application=a;this.__attributes=null!=b?b:{};Object.prototype.hasOwnProperty.call(this.__attributes,"parameters")&&(this.parameters=this.__attributes.parameters);this.__height=this.__width=0;this.__fullscreen=!1;this.__scale=1;this.__y=this.__x=0;this.__title="";this.id=-1;this.__backend=new Va(this)};g["lime.ui.Window"]=zi;zi.__name__="lime.ui.Window";zi.prototype={application:null,context:null,element:null,id:null,onActivate:null,onClose:null,onDeactivate:null,
onDropFile:null,onEnter:null,onExpose:null,onFocusIn:null,onFocusOut:null,onFullscreen:null,onKeyDown:null,onKeyUp:null,onLeave:null,onMinimize:null,onMouseDown:null,onMouseMove:null,onMouseMoveRelative:null,onMouseUp:null,onMouseWheel:null,onMove:null,onRender:null,onRenderContextLost:null,onRenderContextRestored:null,onResize:null,onRestore:null,onTextEdit:null,onTextInput:null,parameters:null,stage:null,__attributes:null,__backend:null,__fullscreen:null,__height:null,__resizable:null,__scale:null,
__title:null,__width:null,__x:null,__y:null,close:function(){this.__backend.close()},readPixels:function(a){return this.__backend.readPixels(a)},set_cursor:function(a){return this.__backend.setCursor(a)},__class__:zi};var ne=function(){this.data=new Ra;this.paths=[]};g["lime.utils.AssetBundle"]=ne;ne.__name__="lime.utils.AssetBundle";ne.fromBytes=function(a){a=new dh(a);return ne.__extractBundle(a)};ne.loadFromBytes=function(a){return nc.withValue(ne.fromBytes(a))};ne.loadFromFile=function(a){return fd.loadFromFile(a).then(ne.loadFromBytes)};
ne.__extractBundle=function(a){var b=qg.readZip(a);a=new ne;for(b=b.h;null!=b;){var c=b.item;b=b.next;if(c.compressed)var d=a.data,e=c.fileName,f=fd.decompress(c.data,Nm.DEFLATE);else e=c.fileName,f=c.data,d=a.data;null!=F[e]?d.setReserved(e,f):d.h[e]=f;a.paths.push(c.fileName)}return a};ne.prototype={data:null,paths:null,__class__:ne};var Jj=function(){this.enabled=!0;this.audio=new Ra;this.font=new Ra;this.image=new Ra;this.version=515709};g["lime.utils.AssetCache"]=Jj;Jj.__name__="lime.utils.AssetCache";
Jj.prototype={audio:null,enabled:null,image:null,font:null,version:null,exists:function(a,b){if("IMAGE"==b||null==b){var c=this.image;if(null!=F[a]?c.existsReserved(a):c.h.hasOwnProperty(a))return!0}if("FONT"==b||null==b)if(c=this.font,null!=F[a]?c.existsReserved(a):c.h.hasOwnProperty(a))return!0;if("SOUND"==b||"MUSIC"==b||null==b)if(b=this.audio,null!=F[a]?b.existsReserved(a):b.h.hasOwnProperty(a))return!0;return!1},set:function(a,b,c){switch(b){case "FONT":b=this.font;null!=F[a]?b.setReserved(a,
c):b.h[a]=c;break;case "IMAGE":if(!(c instanceof wb))throw new W("Cannot cache non-Image asset: "+r.string(c)+" as Image");b=this.image;null!=F[a]?b.setReserved(a,c):b.h[a]=c;break;case "MUSIC":case "SOUND":if(!(c instanceof zc))throw new W("Cannot cache non-AudioBuffer asset: "+r.string(c)+" as AudioBuffer");b=this.audio;null!=F[a]?b.setReserved(a,c):b.h[a]=c;break;default:throw new W(b+" assets are not cachable");}},clear:function(a){if(null==a)this.audio=new Ra,this.font=new Ra,this.image=new Ra;
else{for(var b=this.audio.keys();b.hasNext();){var c=b.next();Y.startsWith(c,a)&&this.audio.remove(c)}for(b=this.font.keys();b.hasNext();)c=b.next(),Y.startsWith(c,a)&&this.font.remove(c);for(b=this.image.keys();b.hasNext();)c=b.next(),Y.startsWith(c,a)&&this.image.remove(c)}},__class__:Jj};var ac=function(){this.types=new Ra;this.sizes=new Ra;this.preload=new Ra;this.paths=new Ra;this.pathGroups=new Ra;this.classTypes=new Ra;this.cachedText=new Ra;this.cachedImages=new Ra;this.cachedFonts=new Ra;
this.cachedBytes=new Ra;this.cachedAudioBuffers=new Ra;this.onChange=new kc;this.bytesTotal=this.bytesLoaded=0};g["lime.utils.AssetLibrary"]=ac;ac.__name__="lime.utils.AssetLibrary";ac.fromBundle=function(a){var b=a.data;if(null!=F["library.json"]?b.existsReserved("library.json"):b.h.hasOwnProperty("library.json")){if(b=a.data,b=nd.fromBytes(null!=F["library.json"]?b.getReserved("library.json"):b.h["library.json"]),null!=b){if(null==b.libraryType)var c=new ac;else if(c=g[b.libraryType],null!=c)c=
L.createInstance(c,b.libraryArgs);else return Ga.warn("Could not find library type: "+b.libraryType,{fileName:"lime/utils/AssetLibrary.hx",lineNumber:122,className:"lime.utils.AssetLibrary",methodName:"fromBundle"}),null;c.__fromBundle(a,b);return c}}else return b=new ac,b.__fromBundle(a),b;return null};ac.fromManifest=function(a){if(null==a)return null;if(null==a.libraryType)var b=new ac;else if(b=g[a.libraryType],null!=b)b=L.createInstance(b,a.libraryArgs);else return Ga.warn("Could not find library type: "+
a.libraryType,{fileName:"lime/utils/AssetLibrary.hx",lineNumber:160,className:"lime.utils.AssetLibrary",methodName:"fromManifest"}),null;b.__fromManifest(a);return b};ac.prototype={onChange:null,assetsLoaded:null,assetsTotal:null,bytesLoaded:null,bytesLoadedCache:null,bytesTotal:null,cachedAudioBuffers:null,cachedBytes:null,cachedFonts:null,cachedImages:null,cachedText:null,classTypes:null,loaded:null,pathGroups:null,paths:null,preload:null,promise:null,sizes:null,types:null,exists:function(a,b){b=
null!=b?Ka.__cast(b,String):null;var c=this.types;a=null!=F[a]?c.getReserved(a):c.h[a];return null==a||a!=b&&("SOUND"!=b&&"MUSIC"!=b||"MUSIC"!=a&&"SOUND"!=a)&&"BINARY"!=b&&null!=b&&("BINARY"!=a||"TEXT"!=b)?!1:!0},getAsset:function(a,b){switch(b){case "BINARY":return this.getBytes(a);case "FONT":return this.getFont(a);case "IMAGE":return this.getImage(a);case "MUSIC":case "SOUND":return this.getAudioBuffer(a);case "TEMPLATE":throw new W("Not sure how to get template: "+a);case "TEXT":return this.getText(a);
default:throw new W("Unknown asset type: "+b);}},getAudioBuffer:function(a){var b=this.cachedAudioBuffers;if(null!=F[a]?b.existsReserved(a):b.h.hasOwnProperty(a))return b=this.cachedAudioBuffers,null!=F[a]?b.getReserved(a):b.h[a];b=this.classTypes;if(null!=F[a]?b.existsReserved(a):b.h.hasOwnProperty(a))return b=this.classTypes,zc.fromBytes(Ka.__cast(L.createInstance(null!=F[a]?b.getReserved(a):b.h[a],[]),vb));b=this.paths;return zc.fromFile(null!=F[a]?b.getReserved(a):b.h[a])},getBytes:function(a){var b=
this.cachedBytes;if(null!=F[a]?b.existsReserved(a):b.h.hasOwnProperty(a))return b=this.cachedBytes,null!=F[a]?b.getReserved(a):b.h[a];b=this.cachedText;if(null!=F[a]?b.existsReserved(a):b.h.hasOwnProperty(a)){b=this.cachedText;b=fd.ofString(null!=F[a]?b.getReserved(a):b.h[a]);var c=this.cachedBytes;null!=F[a]?c.setReserved(a,b):c.h[a]=b;return b}b=this.classTypes;if(null!=F[a]?b.existsReserved(a):b.h.hasOwnProperty(a))return b=this.classTypes,Ka.__cast(L.createInstance(null!=F[a]?b.getReserved(a):
b.h[a],[]),vb);b=this.paths;return fd.fromFile(null!=F[a]?b.getReserved(a):b.h[a])},getFont:function(a){var b=this.cachedFonts;if(null!=F[a]?b.existsReserved(a):b.h.hasOwnProperty(a))return b=this.cachedFonts,null!=F[a]?b.getReserved(a):b.h[a];b=this.classTypes;if(null!=F[a]?b.existsReserved(a):b.h.hasOwnProperty(a))return b=this.classTypes,Ka.__cast(L.createInstance(null!=F[a]?b.getReserved(a):b.h[a],[]),gd);b=this.paths;return gd.fromFile(null!=F[a]?b.getReserved(a):b.h[a])},getImage:function(a){var b=
this.cachedImages;if(null!=F[a]?b.existsReserved(a):b.h.hasOwnProperty(a))return b=this.cachedImages,null!=F[a]?b.getReserved(a):b.h[a];b=this.classTypes;if(null!=F[a]?b.existsReserved(a):b.h.hasOwnProperty(a))return b=this.classTypes,Ka.__cast(L.createInstance(null!=F[a]?b.getReserved(a):b.h[a],[]),wb);b=this.paths;return wb.fromFile(null!=F[a]?b.getReserved(a):b.h[a])},getText:function(a){var b=this.cachedText;if(null!=F[a]?b.existsReserved(a):b.h.hasOwnProperty(a))return b=this.cachedText,null!=
F[a]?b.getReserved(a):b.h[a];a=this.getBytes(a);return null==a?null:a.getString(0,a.length)},isLocal:function(a,b){var c=this.classTypes;if(null!=F[a]?c.existsReserved(a):c.h.hasOwnProperty(a))return!0;b=null!=b?Ka.__cast(b,String):null;if(null==b){b=this.cachedBytes;if(null!=F[a]?b.existsReserved(a):b.h.hasOwnProperty(a))return!0;b=this.cachedText;return null!=F[a]?b.existsReserved(a):b.h.hasOwnProperty(a)}switch(b){case "FONT":return b=this.cachedFonts,null!=F[a]?b.existsReserved(a):b.h.hasOwnProperty(a);
case "IMAGE":return b=this.cachedImages,null!=F[a]?b.existsReserved(a):b.h.hasOwnProperty(a);case "MUSIC":case "SOUND":return b=this.cachedAudioBuffers,null!=F[a]?b.existsReserved(a):b.h.hasOwnProperty(a);default:b=this.cachedBytes;if(null!=F[a]?b.existsReserved(a):b.h.hasOwnProperty(a))return!0;b=this.cachedText;return null!=F[a]?b.existsReserved(a):b.h.hasOwnProperty(a)}},load:function(){if(this.loaded)return nc.withValue(this);if(null==this.promise){this.promise=new Vc;this.bytesLoadedCache=new Ra;
this.assetsLoaded=0;this.assetsTotal=1;for(var a=this.preload.keys();a.hasNext();){var b=a.next(),c=this.preload;if(null!=F[b]?c.getReserved(b):c.h[b])if(c=this.types,Ga.verbose("Preloading asset: "+b+" ["+(null!=F[b]?c.getReserved(b):c.h[b])+"]",{fileName:"lime/utils/AssetLibrary.hx",lineNumber:405,className:"lime.utils.AssetLibrary",methodName:"load"}),c=this.types,c=null!=F[b]?c.getReserved(b):c.h[b],null!=c)switch(c){case "BINARY":this.assetsTotal++;c=this.loadBytes(b);c.onProgress(function(a,
b){return function(c,d){b[0](a[0],c,d)}}([b],[u(this,this.load_onProgress)]));c.onError(function(a,b){return function(c){b[0](a[0],c)}}([b],[u(this,this.load_onError)]));c.onComplete(function(a,b){return function(c){b[0](a[0],c)}}([b],[u(this,this.loadBytes_onComplete)]));break;case "FONT":this.assetsTotal++;c=this.loadFont(b);c.onProgress(function(a,b){return function(c,d){b[0](a[0],c,d)}}([b],[u(this,this.load_onProgress)]));c.onError(function(a,b){return function(c){b[0](a[0],c)}}([b],[u(this,
this.load_onError)]));c.onComplete(function(a,b){return function(c){b[0](a[0],c)}}([b],[u(this,this.loadFont_onComplete)]));break;case "IMAGE":this.assetsTotal++;c=this.loadImage(b);c.onProgress(function(a,b){return function(c,d){b[0](a[0],c,d)}}([b],[u(this,this.load_onProgress)]));c.onError(function(a,b){return function(c){b[0](a[0],c)}}([b],[u(this,this.load_onError)]));c.onComplete(function(a,b){return function(c){b[0](a[0],c)}}([b],[u(this,this.loadImage_onComplete)]));break;case "MUSIC":case "SOUND":this.assetsTotal++;
c=this.loadAudioBuffer(b);c.onProgress(function(a,b){return function(c,d){b[0](a[0],c,d)}}([b],[u(this,this.load_onProgress)]));c.onError(function(a,b){return function(c){b[0](a[0],c)}}([b],[u(this,this.loadAudioBuffer_onError)]));c.onComplete(function(a,b){return function(c){b[0](a[0],c)}}([b],[u(this,this.loadAudioBuffer_onComplete)]));break;case "TEXT":this.assetsTotal++,c=this.loadText(b),c.onProgress(function(a,b){return function(c,d){b[0](a[0],c,d)}}([b],[u(this,this.load_onProgress)])),c.onError(function(a,
b){return function(c){b[0](a[0],c)}}([b],[u(this,this.load_onError)])),c.onComplete(function(a,b){return function(c){b[0](a[0],c)}}([b],[u(this,this.loadText_onComplete)]))}}this.__assetLoaded(null)}return this.promise.future},loadAudioBuffer:function(a){var b=this.cachedAudioBuffers;if(null!=F[a]?b.existsReserved(a):b.h.hasOwnProperty(a))return b=this.cachedAudioBuffers,nc.withValue(null!=F[a]?b.getReserved(a):b.h[a]);b=this.classTypes;if(null!=F[a]?b.existsReserved(a):b.h.hasOwnProperty(a))return b=
this.classTypes,nc.withValue(L.createInstance(null!=F[a]?b.getReserved(a):b.h[a],[]));b=this.pathGroups;if(null!=F[a]?b.existsReserved(a):b.h.hasOwnProperty(a))return b=this.pathGroups,zc.loadFromFiles(null!=F[a]?b.getReserved(a):b.h[a]);b=this.paths;return zc.loadFromFile(null!=F[a]?b.getReserved(a):b.h[a])},loadBytes:function(a){var b=this.cachedBytes;if(null!=F[a]?b.existsReserved(a):b.h.hasOwnProperty(a))return b=this.cachedBytes,nc.withValue(null!=F[a]?b.getReserved(a):b.h[a]);b=this.classTypes;
if(null!=F[a]?b.existsReserved(a):b.h.hasOwnProperty(a))return b=this.classTypes,nc.withValue(L.createInstance(null!=F[a]?b.getReserved(a):b.h[a],[]));b=this.paths;return fd.loadFromFile(null!=F[a]?b.getReserved(a):b.h[a])},loadFont:function(a){var b=this.cachedFonts;if(null!=F[a]?b.existsReserved(a):b.h.hasOwnProperty(a))return b=this.cachedFonts,nc.withValue(null!=F[a]?b.getReserved(a):b.h[a]);b=this.classTypes;if(null!=F[a]?b.existsReserved(a):b.h.hasOwnProperty(a))return b=this.classTypes,a=L.createInstance(null!=
F[a]?b.getReserved(a):b.h[a],[]),a.__loadFromName(a.name);b=this.paths;return gd.loadFromName(null!=F[a]?b.getReserved(a):b.h[a])},loadImage:function(a){var b=this,c=this.cachedImages;if(null!=F[a]?c.existsReserved(a):c.h.hasOwnProperty(a))return c=this.cachedImages,nc.withValue(null!=F[a]?c.getReserved(a):c.h[a]);c=this.classTypes;if(null!=F[a]?c.existsReserved(a):c.h.hasOwnProperty(a))return c=this.classTypes,nc.withValue(L.createInstance(null!=F[a]?c.getReserved(a):c.h[a],[]));c=this.cachedBytes;
if(null!=F[a]?c.existsReserved(a):c.h.hasOwnProperty(a))return c=this.cachedBytes,wb.loadFromBytes(null!=F[a]?c.getReserved(a):c.h[a]).then(function(c){b.cachedBytes.remove(a);var d=b.cachedImages;null!=F[a]?d.setReserved(a,c):d.h[a]=c;return nc.withValue(c)});c=this.paths;return wb.loadFromFile(null!=F[a]?c.getReserved(a):c.h[a])},loadText:function(a){var b=this.cachedText;if(null!=F[a]?b.existsReserved(a):b.h.hasOwnProperty(a))return b=this.cachedText,nc.withValue(null!=F[a]?b.getReserved(a):b.h[a]);
b=this.cachedBytes;(null!=F[a]?b.existsReserved(a):b.h.hasOwnProperty(a))?b=!0:(b=this.classTypes,b=null!=F[a]?b.existsReserved(a):b.h.hasOwnProperty(a));if(b){b=this.getBytes(a);if(null==b)return nc.withValue(null);b=b.getString(0,b.length);var c=this.cachedText;null!=F[a]?c.setReserved(a,b):c.h[a]=b;return nc.withValue(b)}b=new xi;c=this.paths;return b.load(null!=F[a]?c.getReserved(a):c.h[a])},unload:function(){},__assetLoaded:function(a){this.assetsLoaded++;if(null!=a){var b=this.types;Ga.verbose("Loaded asset: "+
a+" ["+(null!=F[a]?b.getReserved(a):b.h[a])+"] ("+(this.assetsLoaded-1)+"/"+(this.assetsTotal-1)+")",{fileName:"lime/utils/AssetLibrary.hx",lineNumber:619,className:"lime.utils.AssetLibrary",methodName:"__assetLoaded"})}if(null!=a){b=this.sizes;(null!=F[a]?b.existsReserved(a):b.h.hasOwnProperty(a))?(b=this.sizes,b=null!=F[a]?b.getReserved(a):b.h[a]):b=0;var c=this.bytesLoadedCache;(null!=F[a]?c.existsReserved(a):c.h.hasOwnProperty(a))?(c=this.bytesLoadedCache,c=null!=F[a]?c.getReserved(a):c.h[a],
c<b&&(this.bytesLoaded+=b-c)):this.bytesLoaded+=b;c=this.bytesLoadedCache;null!=F[a]?c.setReserved(a,b):c.h[a]=b}this.assetsLoaded<this.assetsTotal?this.promise.progress(this.bytesLoaded,this.bytesTotal):(this.loaded=!0,this.promise.progress(this.bytesTotal,this.bytesTotal),this.promise.complete(this))},__cacheBreak:function(a){return Da.__cacheBreak(a)},__fromBundle:function(a,b){if(null!=b)for(var c,d,e=0,f=b.assets;e<f.length;){var k=f[e];++e;b=Object.prototype.hasOwnProperty.call(k,"id")?k.id:
k.path;c=k.path;d=a.data;c=null!=F[c]?d.getReserved(c):d.h[c];Object.prototype.hasOwnProperty.call(k,"type")?(d=k.type,"TEXT"==d?(c=null!=c?r.string(c):null,d=this.cachedText):d=this.cachedBytes,null!=F[b]?d.setReserved(b,c):d.h[b]=c,k=k.type,c=this.types,null!=F[b]?c.setReserved(b,k):c.h[b]=k):(k=this.cachedBytes,null!=F[b]?k.setReserved(b,c):k.h[b]=c,k=this.types,null!=F[b]?k.setReserved(b,"BINARY"):k.h[b]="BINARY")}else for(e=0,b=a.paths;e<b.length;)f=b[e],++e,k=this.cachedBytes,c=a.data,c=null!=
F[f]?c.getReserved(f):c.h[f],null!=F[f]?k.setReserved(f,c):k.h[f]=c,k=this.types,null!=F[f]?k.setReserved(f,"BINARY"):k.h[f]="BINARY"},__fromManifest:function(a){var b=2<=a.version,c=a.rootPath;null==c&&(c="");""!=c&&(c+="/");for(var d=0,e=a.assets;d<e.length;){var f=e[d];++d;var k=b&&Object.prototype.hasOwnProperty.call(f,"size")?f.size:100;var m=Object.prototype.hasOwnProperty.call(f,"id")?f.id:f.path;if(Object.prototype.hasOwnProperty.call(f,"path")){var h=this.paths;var n=this.__cacheBreak(this.__resolvePath(c+
r.string(Na.field(f,"path"))));null!=F[m]?h.setReserved(m,n):h.h[m]=n}if(Object.prototype.hasOwnProperty.call(f,"pathGroup")){n=Na.field(f,"pathGroup");h=0;for(var K=n.length;h<K;){var l=h++;n[l]=this.__cacheBreak(this.__resolvePath(c+n[l]))}h=this.pathGroups;null!=F[m]?h.setReserved(m,n):h.h[m]=n}n=this.sizes;null!=F[m]?n.setReserved(m,k):n.h[m]=k;k=f.type;n=this.types;null!=F[m]?n.setReserved(m,k):n.h[m]=k;Object.prototype.hasOwnProperty.call(f,"preload")&&(k=Na.field(f,"preload"),n=this.preload,
null!=F[m]?n.setReserved(m,k):n.h[m]=k);Object.prototype.hasOwnProperty.call(f,"className")&&(f=Na.field(f,"className"),f=g[f],k=this.classTypes,null!=F[m]?k.setReserved(m,f):k.h[m]=f)}b=this.bytesTotal=0;for(a=a.assets;b<a.length;)m=a[b],++b,m=Object.prototype.hasOwnProperty.call(m,"id")?m.id:m.path,c=this.preload,(null!=F[m]?c.existsReserved(m):c.h.hasOwnProperty(m))?(c=this.preload,c=null!=F[m]?c.getReserved(m):c.h[m]):c=!1,c?(c=this.sizes,c=null!=F[m]?c.existsReserved(m):c.h.hasOwnProperty(m)):
c=!1,c&&(c=this.sizes,this.bytesTotal+=null!=F[m]?c.getReserved(m):c.h[m])},__resolvePath:function(a){a=Y.replace(a,"\\","/");var b=a.indexOf(":");Y.startsWith(a,"http")&&0<b?(b+=3,a=ra.substr(a,0,b)+Y.replace(ra.substr(a,b,null),"//","/")):a=Y.replace(a,"//","/");if(-1<a.indexOf("./")){a=a.split("/");b=[];for(var c=0,d=a.length;c<d;){var e=c++;".."==a[e]?0==e||".."==b[e-1]?b.push(".."):b.pop():"."==a[e]?0==e&&b.push("."):b.push(a[e])}a=b.join("/")}return a},loadAudioBuffer_onComplete:function(a,
b){var c=this.cachedAudioBuffers;null!=F[a]?c.setReserved(a,b):c.h[a]=b;c=this.pathGroups;if(null!=F[a]?c.existsReserved(a):c.h.hasOwnProperty(a)){c=this.pathGroups;c=null!=F[a]?c.getReserved(a):c.h[a];for(var d=this.pathGroups.keys();d.hasNext();){var e=d.next();if(e!=a)for(var f=0;f<c.length;){var k=c[f];++f;var m=this.pathGroups;if(-1<(null!=F[e]?m.getReserved(e):m.h[e]).indexOf(k)){f=this.cachedAudioBuffers;null!=F[e]?f.setReserved(e,b):f.h[e]=b;break}}}}this.__assetLoaded(a)},loadAudioBuffer_onError:function(a,
b){null!=b&&""!=b?Ga.warn('Could not load "'+a+'": '+r.string(b),{fileName:"lime/utils/AssetLibrary.hx",lineNumber:865,className:"lime.utils.AssetLibrary",methodName:"loadAudioBuffer_onError"}):Ga.warn('Could not load "'+a+'"',{fileName:"lime/utils/AssetLibrary.hx",lineNumber:869,className:"lime.utils.AssetLibrary",methodName:"loadAudioBuffer_onError"});this.loadAudioBuffer_onComplete(a,new zc)},loadBytes_onComplete:function(a,b){var c=this.cachedBytes;null!=F[a]?c.setReserved(a,b):c.h[a]=b;this.__assetLoaded(a)},
loadFont_onComplete:function(a,b){var c=this.cachedFonts;null!=F[a]?c.setReserved(a,b):c.h[a]=b;this.__assetLoaded(a)},loadImage_onComplete:function(a,b){var c=this.cachedImages;null!=F[a]?c.setReserved(a,b):c.h[a]=b;this.__assetLoaded(a)},loadText_onComplete:function(a,b){var c=this.cachedText;null!=F[a]?c.setReserved(a,b):c.h[a]=b;this.__assetLoaded(a)},load_onError:function(a,b){null!=b&&""!=b?this.promise.error('Error loading asset "'+a+'": '+r.string(b)):this.promise.error('Error loading asset "'+
a+'"')},load_onProgress:function(a,b,c){if(0<b){var d=this.sizes;d=null!=F[a]?d.getReserved(a):d.h[a];0<c?(b/=c,1<b&&(b=1),b=Math.floor(b*d)):b>d&&(b=d);c=this.bytesLoadedCache;(null!=F[a]?c.existsReserved(a):c.h.hasOwnProperty(a))?(c=this.bytesLoadedCache,c=null!=F[a]?c.getReserved(a):c.h[a],b!=c&&(this.bytesLoaded+=b-c)):this.bytesLoaded+=b;c=this.bytesLoadedCache;null!=F[a]?c.setReserved(a,b):c.h[a]=b;this.promise.progress(this.bytesLoaded,this.bytesTotal)}},__class__:ac};var nd=function(){this.assets=
[];this.libraryArgs=[];this.version=2};g["lime.utils.AssetManifest"]=nd;nd.__name__="lime.utils.AssetManifest";nd.fromBytes=function(a,b){return null!=a?nd.parse(a.getString(0,a.length),b):null};nd.loadFromFile=function(a,b){a=nd.__resolvePath(a);b=nd.__resolveRootPath(b,a);return null==a?null:fd.loadFromFile(a).then(function(a){return nc.withValue(nd.fromBytes(a,b))})};nd.parse=function(a,b){if(null==a||""==a)return null;a=JSON.parse(a);var c=new nd;Object.prototype.hasOwnProperty.call(a,"name")&&
(c.name=a.name);Object.prototype.hasOwnProperty.call(a,"libraryType")&&(c.libraryType=a.libraryType);Object.prototype.hasOwnProperty.call(a,"libraryArgs")&&(c.libraryArgs=a.libraryArgs);if(Object.prototype.hasOwnProperty.call(a,"assets")){var d=a.assets;Object.prototype.hasOwnProperty.call(a,"version")&&2>=a.version?c.assets=Tc.run(d):c.assets=d}Object.prototype.hasOwnProperty.call(a,"rootPath")&&(c.rootPath=a.rootPath);null!=b&&""!=b&&(c.rootPath=null==c.rootPath||""==c.rootPath?b:b+"/"+c.rootPath);
return c};nd.__resolvePath=function(a){if(null==a)return null;var b=a.indexOf("?");var c=-1<b?ra.substr(a,0,b):a;for(c=Y.replace(c,"\\","/");Y.endsWith(c,"/");)c=ra.substr(c,0,c.length-1);return Y.endsWith(c,".bundle")?-1<b?c+"/library.json"+ra.substr(a,b,null):c+"/library.json":a};nd.__resolveRootPath=function(a,b){if(null!=a)return a;a=b.indexOf("?");a=-1<a?ra.substr(b,0,a):b;for(a=Y.replace(a,"\\","/");Y.endsWith(a,"/");){if("/"==a)return a;a=ra.substr(a,0,a.length-1)}return Y.endsWith(a,".bundle")?
a:mf.directory(a)};nd.prototype={assets:null,libraryArgs:null,libraryType:null,name:null,rootPath:null,version:null,__class__:nd};var Da=function(){};g["lime.utils.Assets"]=Da;Da.__name__="lime.utils.Assets";Da.exists=function(a,b){null==b&&(b="BINARY");var c=a.indexOf(":"),d=a.substring(0,c);a=a.substring(c+1);d=Da.getLibrary(d);return null!=d?d.exists(a,b):!1};Da.getAsset=function(a,b,c){if(c&&Da.cache.enabled)switch(b){case "BINARY":case "TEXT":c=!1;break;case "FONT":var d=Da.cache.font;d=null!=
F[a]?d.getReserved(a):d.h[a];if(null!=d)return d;break;case "IMAGE":d=Da.cache.image;d=null!=F[a]?d.getReserved(a):d.h[a];if(Da.isValidImage(d))return d;break;case "MUSIC":case "SOUND":d=Da.cache.audio;d=null!=F[a]?d.getReserved(a):d.h[a];if(Da.isValidAudio(d))return d;break;case "TEMPLATE":throw new W("Not sure how to get template: "+a);default:return null}var e=a.indexOf(":");d=a.substring(0,e);e=a.substring(e+1);var f=Da.getLibrary(d);if(null!=f)if(f.exists(e,b)){if(f.isLocal(e,b))return d=f.getAsset(e,
b),c&&Da.cache.enabled&&Da.cache.set(a,b,d),d;Ga.error(b+' asset "'+a+'" exists, but only asynchronously',{fileName:"lime/utils/Assets.hx",lineNumber:133,className:"lime.utils.Assets",methodName:"getAsset"})}else Ga.error("There is no "+b+' asset with an ID of "'+a+'"',{fileName:"lime/utils/Assets.hx",lineNumber:138,className:"lime.utils.Assets",methodName:"getAsset"});else Ga.error(Da.__libraryNotFound(d),{fileName:"lime/utils/Assets.hx",lineNumber:143,className:"lime.utils.Assets",methodName:"getAsset"});
return null};Da.getBytes=function(a){return Da.getAsset(a,"BINARY",!1)};Da.getImage=function(a,b){null==b&&(b=!0);return Da.getAsset(a,"IMAGE",b)};Da.getLibrary=function(a){if(null==a||""==a)a="default";var b=Da.libraries;return null!=F[a]?b.getReserved(a):b.h[a]};Da.isLocal=function(a,b,c){null==c&&(c=!0);if(c&&Da.cache.enabled&&Da.cache.exists(a,b))return!0;var d=a.indexOf(":");c=a.substring(0,d);a=a.substring(d+1);c=Da.getLibrary(c);return null!=c?c.isLocal(a,b):!1};Da.isValidAudio=function(a){return null!=
a};Da.isValidImage=function(a){return null!=a?null!=a.buffer:!1};Da.loadLibrary=function(a){var b=new Vc,c=Da.getLibrary(a);if(null!=c)return c.load();c=a;var d=null;d=Da.bundlePaths;(null!=F[a]?d.existsReserved(a):d.h.hasOwnProperty(a))?(c=Da.bundlePaths,ne.loadFromFile(null!=F[a]?c.getReserved(a):c.h[a]).onComplete(function(c){if(null==c)b.error('Cannot load bundle for library "'+a+'"');else if(c=ac.fromBundle(c),null==c)b.error('Cannot open library "'+a+'"');else{var d=Da.libraries;null!=F[a]?
d.setReserved(a,c):d.h[a]=c;c.onChange.add((q=Da.onChange,u(q,q.dispatch)));c=c.load();b.completeWith(c)}}).onError(function(c){b.error('There is no asset library with an ID of "'+a+'"')})):(d=Da.libraryPaths,(null!=F[a]?d.existsReserved(a):d.h.hasOwnProperty(a))?(c=Da.libraryPaths,c=null!=F[a]?c.getReserved(a):c.h[a],d=mf.directory(c)):(Y.endsWith(c,".bundle")?(d=c,c+="/library.json"):d=mf.directory(c),c=Da.__cacheBreak(c)),nd.loadFromFile(c,d).onComplete(function(c){if(null==c)b.error('Cannot parse asset manifest for library "'+
a+'"');else if(c=ac.fromManifest(c),null==c)b.error('Cannot open library "'+a+'"');else{var d=Da.libraries;null!=F[a]?d.setReserved(a,c):d.h[a]=c;c.onChange.add((q=Da.onChange,u(q,q.dispatch)));c=c.load();b.completeWith(c)}}).onError(function(c){b.error('There is no asset library with an ID of "'+a+'"')}));return b.future};Da.registerLibrary=function(a,b){var c=Da.libraries;if(null!=F[a]?c.existsReserved(a):c.h.hasOwnProperty(a)){c=Da.libraries;if((null!=F[a]?c.getReserved(a):c.h[a])==b)return;Da.unloadLibrary(a)}null!=
b&&b.onChange.add(Da.library_onChange);c=Da.libraries;null!=F[a]?c.setReserved(a,b):c.h[a]=b};Da.unloadLibrary=function(a){if(null==a||""==a)a="default";var b=Da.libraries;b=null!=F[a]?b.getReserved(a):b.h[a];null!=b&&(Da.cache.clear(a+":"),b.onChange.remove(Da.library_onChange),b.unload());Da.libraries.remove(a)};Da.__cacheBreak=function(a){0<Da.cache.version&&(a=-1<a.indexOf("?")?a+("&"+Da.cache.version):a+("?"+Da.cache.version));return a};Da.__libraryNotFound=function(a){if(null==a||""==a)a="default";
return null==ha.current||null==ha.current.__preloader||ha.current.__preloader.complete?'There is no asset library named "'+a+'"':'There is no asset library named "'+a+'", or it is not yet preloaded'};Da.library_onChange=function(){Da.cache.clear();Da.onChange.dispatch()};var Hk=function(a,b){this.bytes=a;this.offset=b};g["lime.utils.BytePointerData"]=Hk;Hk.__name__="lime.utils.BytePointerData";Hk.prototype={bytes:null,offset:null,__class__:Hk};var fd={};g["lime.utils._Bytes.Bytes_Impl_"]=fd;fd.__name__=
"lime.utils._Bytes.Bytes_Impl_";fd._new=function(a,b){return new vb(b)};fd.decompress=function(a,b){switch(b._hx_index){case 0:return Ul.decompress(a);case 1:return Vl.decompress(a);case 2:return Wl.decompress(a);case 3:return Xl.decompress(a)}};fd.fromBytes=function(a){return null==a?null:fd._new(a.length,a.b.bufferValue)};fd.fromFile=function(a){return null};fd.loadFromFile=function(a){return(new yi).load(a)};fd.ofString=function(a){a=vb.ofString(a);return fd._new(a.length,a.b.bufferValue)};var Nm=
t["lime.utils.CompressionAlgorithm"]={__ename__:"lime.utils.CompressionAlgorithm",__constructs__:["DEFLATE","GZIP","LZMA","ZLIB"],DEFLATE:{_hx_index:0,__enum__:"lime.utils.CompressionAlgorithm",toString:p},GZIP:{_hx_index:1,__enum__:"lime.utils.CompressionAlgorithm",toString:p},LZMA:{_hx_index:2,__enum__:"lime.utils.CompressionAlgorithm",toString:p},ZLIB:{_hx_index:3,__enum__:"lime.utils.CompressionAlgorithm",toString:p}},Ga=function(){};g["lime.utils.Log"]=Ga;Ga.__name__="lime.utils.Log";Ga.error=
function(a,b){if(1<=Ga.level){a="["+b.className+"] ERROR: "+r.string(a);if(Ga.throwErrors)throw new W(a);console.error(a)}};Ga.info=function(a,b){3<=Ga.level&&console.info("["+b.className+"] "+r.string(a))};Ga.verbose=function(a,b){5<=Ga.level&&console.log("["+b.className+"] "+r.string(a))};Ga.warn=function(a,b){2<=Ga.level&&console.warn("["+b.className+"] WARNING: "+r.string(a))};var Kh=function(){this.bytesTotalCache=new Ra;this.bytesLoadedCache2=new Ra;this.bytesLoadedCache=new ja;this.onProgress=
new ri;this.onComplete=new kc;this.bytesTotal=this.bytesLoaded=0;this.libraries=[];this.libraryNames=[];this.onProgress.add(u(this,this.update))};g["lime.utils.Preloader"]=Kh;Kh.__name__="lime.utils.Preloader";Kh.prototype={complete:null,onComplete:null,onProgress:null,bytesLoaded:null,bytesLoadedCache:null,bytesLoadedCache2:null,bytesTotal:null,bytesTotalCache:null,initLibraryNames:null,libraries:null,libraryNames:null,loadedLibraries:null,preloadComplete:null,preloadStarted:null,simulateProgress:null,
addLibrary:function(a){this.libraries.push(a)},addLibraryName:function(a){-1==this.libraryNames.indexOf(a)&&this.libraryNames.push(a)},load:function(){for(var a=this,b=0,c=this.libraries;b<c.length;){var d=c[b];++b;this.bytesTotal+=d.bytesTotal}this.loadedLibraries=-1;this.preloadStarted=!1;b=0;for(c=this.libraries;b<c.length;)d=[c[b]],++b,Ga.verbose("Preloading asset library",{fileName:"lime/utils/Preloader.hx",lineNumber:132,className:"lime.utils.Preloader",methodName:"load"}),d[0].load().onProgress(function(b){return function(c,
d){a.bytesLoaded=null==a.bytesLoadedCache.h.__keys__[b[0].__id__]?a.bytesLoaded+c:a.bytesLoaded+(c-a.bytesLoadedCache.h[b[0].__id__]);a.bytesLoadedCache.set(b[0],c);a.simulateProgress||a.onProgress.dispatch(a.bytesLoaded,a.bytesTotal)}}(d)).onComplete(function(b){return function(c){a.bytesLoaded=null==a.bytesLoadedCache.h.__keys__[b[0].__id__]?a.bytesLoaded+b[0].bytesTotal:a.bytesLoaded+(b[0].bytesTotal-a.bytesLoadedCache.h[b[0].__id__]);a.loadedAssetLibrary()}}(d)).onError(function(){return function(a){Ga.error(a,
{fileName:"lime/utils/Preloader.hx",lineNumber:168,className:"lime.utils.Preloader",methodName:"load"})}}());b=0;for(c=this.libraryNames;b<c.length;)++b,this.bytesTotal+=200;this.loadedLibraries++;this.preloadStarted=!0;this.updateProgress()},loadedAssetLibrary:function(a){this.loadedLibraries++;var b=this.loadedLibraries;this.preloadStarted||++b;var c=this.libraries.length+this.libraryNames.length;null!=a?Ga.verbose("Loaded asset library: "+a+" ["+b+"/"+c+"]",{fileName:"lime/utils/Preloader.hx",
lineNumber:195,className:"lime.utils.Preloader",methodName:"loadedAssetLibrary"}):Ga.verbose("Loaded asset library ["+b+"/"+c+"]",{fileName:"lime/utils/Preloader.hx",lineNumber:199,className:"lime.utils.Preloader",methodName:"loadedAssetLibrary"});this.updateProgress()},start:function(){this.complete||this.simulateProgress||!this.preloadComplete||(this.complete=!0,this.onComplete.dispatch())},update:function(a,b){},updateProgress:function(){var a=this;this.simulateProgress||this.onProgress.dispatch(this.bytesLoaded,
this.bytesTotal);if(this.loadedLibraries==this.libraries.length&&!this.initLibraryNames){this.initLibraryNames=!0;for(var b=0,c=this.libraryNames;b<c.length;){var d=[c[b]];++b;Ga.verbose("Preloading asset library: "+d[0],{fileName:"lime/utils/Preloader.hx",lineNumber:236,className:"lime.utils.Preloader",methodName:"updateProgress"});Da.loadLibrary(d[0]).onProgress(function(b){return function(c,d){if(0<d){var e=a.bytesTotalCache;(null!=F[b[0]]?e.existsReserved(b[0]):e.h.hasOwnProperty(b[0]))||(e=a.bytesTotalCache,
null!=F[b[0]]?e.setReserved(b[0],d):e.h[b[0]]=d,a.bytesTotal+=d-200);c>d&&(c=d);d=a.bytesLoadedCache2;(null!=F[b[0]]?d.existsReserved(b[0]):d.h.hasOwnProperty(b[0]))?(d=a.bytesLoadedCache2,a.bytesLoaded+=c-(null!=F[b[0]]?d.getReserved(b[0]):d.h[b[0]])):a.bytesLoaded+=c;d=a.bytesLoadedCache2;null!=F[b[0]]?d.setReserved(b[0],c):d.h[b[0]]=c;a.simulateProgress||a.onProgress.dispatch(a.bytesLoaded,a.bytesTotal)}}}(d)).onComplete(function(b){return function(c){c=200;var d=a.bytesTotalCache;if(null!=F[b[0]]?
d.existsReserved(b[0]):d.h.hasOwnProperty(b[0]))c=a.bytesTotalCache,c=null!=F[b[0]]?c.getReserved(b[0]):c.h[b[0]];d=a.bytesLoadedCache2;(null!=F[b[0]]?d.existsReserved(b[0]):d.h.hasOwnProperty(b[0]))?(d=a.bytesLoadedCache2,a.bytesLoaded+=c-(null!=F[b[0]]?d.getReserved(b[0]):d.h[b[0]])):a.bytesLoaded+=c;a.loadedAssetLibrary(b[0])}}(d)).onError(function(){return function(a){Ga.error(a,{fileName:"lime/utils/Preloader.hx",lineNumber:290,className:"lime.utils.Preloader",methodName:"updateProgress"})}}())}}this.simulateProgress||
this.loadedLibraries!=this.libraries.length+this.libraryNames.length||(this.preloadComplete||(this.preloadComplete=!0,Ga.verbose("Preload complete",{fileName:"lime/utils/Preloader.hx",lineNumber:301,className:"lime.utils.Preloader",methodName:"updateProgress"})),this.start())},__class__:Kh};var sf=function(a){this._type=a;this._numProxies=0;this._proxyPairList=this._proxyListLast=this._proxyList=null;this._incremental=!1;this._testCount=0;this._proxyPairPool=null;this._idCount=0;this._convexSweep=
new Ai;this._aabb=new Bi;this.identity=new Ld;this.zero=new w;this.rayCastHit=new tg};g["oimo.collision.broadphase.BroadPhase"]=sf;sf.__name__="oimo.collision.broadphase.BroadPhase";sf.prototype={_type:null,_numProxies:null,_proxyList:null,_proxyListLast:null,_proxyPairList:null,_incremental:null,_testCount:null,_proxyPairPool:null,_idCount:null,_convexSweep:null,_aabb:null,identity:null,zero:null,rayCastHit:null,createProxy:function(a,b){return null},moveProxy:function(a,b,c){},collectPairs:function(){},
__class__:sf};var ug=function(a){this._type=a;this._volume=0};g["oimo.collision.geometry.Geometry"]=ug;ug.__name__="oimo.collision.geometry.Geometry";ug.prototype={_type:null,_volume:null,_inertiaCoeff00:null,_inertiaCoeff01:null,_inertiaCoeff02:null,_inertiaCoeff10:null,_inertiaCoeff11:null,_inertiaCoeff12:null,_inertiaCoeff20:null,_inertiaCoeff21:null,_inertiaCoeff22:null,_updateMass:function(){},_computeAabb:function(a,b){},__class__:ug};var xc=function(a){ug.call(this,a);this._gjkMargin=ta.defaultGJKMargin;
this._useGjkRayCast=!1};g["oimo.collision.geometry.ConvexGeometry"]=xc;xc.__name__="oimo.collision.geometry.ConvexGeometry";xc.__super__=ug;xc.prototype=v(ug.prototype,{_gjkMargin:null,_useGjkRayCast:null,computeLocalSupportingVertex:function(a,b){},__class__:xc});var Ai=function(){xc.call(this,-1)};g["oimo.collision.broadphase._BroadPhase.ConvexSweepGeometry"]=Ai;Ai.__name__="oimo.collision.broadphase._BroadPhase.ConvexSweepGeometry";Ai.__super__=xc;Ai.prototype=v(xc.prototype,{c:null,localTranslation:null,
computeLocalSupportingVertex:function(a,b){this.c.computeLocalSupportingVertex(a,b);var c=this.localTranslation;if(0<a.x*c.x+a.y*c.y+a.z*c.z){a=this.localTranslation;c=b.y+a.y;var d=b.z+a.z;b.x+=a.x;b.y=c;b.z=d}},__class__:Ai});var Bi=function(){xc.call(this,-1);this.min=new w;this.max=new w};g["oimo.collision.broadphase._BroadPhase.AabbGeometry"]=Bi;Bi.__name__="oimo.collision.broadphase._BroadPhase.AabbGeometry";Bi.__super__=xc;Bi.prototype=v(xc.prototype,{min:null,max:null,computeLocalSupportingVertex:function(a,
b){b.x=0<a.x?this.max.x:this.min.x;b.y=0<a.y?this.max.y:this.min.y;b.z=0<a.z?this.max.z:this.min.z},__class__:Bi});var tf=function(){};g["oimo.collision.broadphase.BroadPhaseProxyCallback"]=tf;tf.__name__="oimo.collision.broadphase.BroadPhaseProxyCallback";tf.prototype={__class__:tf};var vg=function(a,b){this.userData=a;this._id=b;this._next=this._prev=null;this._aabbMaxZ=this._aabbMaxY=this._aabbMaxX=this._aabbMinZ=this._aabbMinY=this._aabbMinX=0};g["oimo.collision.broadphase.Proxy"]=vg;vg.__name__=
"oimo.collision.broadphase.Proxy";vg.prototype={_prev:null,_next:null,_aabbMinX:null,_aabbMinY:null,_aabbMinZ:null,_aabbMaxX:null,_aabbMaxY:null,_aabbMaxZ:null,_id:null,userData:null,__class__:vg};var gh=function(){this._p2=this._p1=null};g["oimo.collision.broadphase.ProxyPair"]=gh;gh.__name__="oimo.collision.broadphase.ProxyPair";gh.prototype={_next:null,_p1:null,_p2:null,__class__:gh};var hh=function(){sf.call(this,1);this._incremental=!1};g["oimo.collision.broadphase.bruteforce.BruteForceBroadPhase"]=
hh;hh.__name__="oimo.collision.broadphase.bruteforce.BruteForceBroadPhase";hh.__super__=sf;hh.prototype=v(sf.prototype,{createProxy:function(a,b){a=new vg(a,this._idCount++);this._numProxies++;null==this._proxyList?this._proxyList=a:(this._proxyListLast._next=a,a._prev=this._proxyListLast);this._proxyListLast=a;a._aabbMinX=b._minX;a._aabbMinY=b._minY;a._aabbMinZ=b._minZ;a._aabbMaxX=b._maxX;a._aabbMaxY=b._maxY;a._aabbMaxZ=b._maxZ;return a},moveProxy:function(a,b,c){a._aabbMinX=b._minX;a._aabbMinY=
b._minY;a._aabbMinZ=b._minZ;a._aabbMaxX=b._maxX;a._aabbMaxY=b._maxY;a._aabbMaxZ=b._maxZ},collectPairs:function(){var a=this._proxyPairList;if(null!=a){for(;a._p1=null,a._p2=null,a=a._next,null!=a;);this._proxyPairList._next=this._proxyPairPool;this._proxyPairPool=this._proxyPairList;this._proxyPairList=null}this._testCount=0;for(a=this._proxyList;null!=a;){for(var b=a._next,c=a._next;null!=c;){var d=c._next;this._testCount++;if(a._aabbMinX<c._aabbMaxX&&a._aabbMaxX>c._aabbMinX&&a._aabbMinY<c._aabbMaxY&&
a._aabbMaxY>c._aabbMinY&&a._aabbMinZ<c._aabbMaxZ&&a._aabbMaxZ>c._aabbMinZ){var e=this._proxyPairPool;null!=e?(this._proxyPairPool=e._next,e._next=null):e=new gh;null!=this._proxyPairList&&(e._next=this._proxyPairList);this._proxyPairList=e;e._p1=a;e._p2=c}c=d}a=b}},__class__:hh});var ih=function(){sf.call(this,2);this._incremental=!0;this._tree=new Ik;this.movedProxies=Array(1024);this.numMovedProxies=0};g["oimo.collision.broadphase.bvh.BvhBroadPhase"]=ih;ih.__name__="oimo.collision.broadphase.bvh.BvhBroadPhase";
ih.__super__=sf;ih.prototype=v(sf.prototype,{_tree:null,movedProxies:null,numMovedProxies:null,collide:function(a,b){this._testCount++;var c=0==a._height,d=0==b._height;a==b?c||(this.collide(a._children[0],b),this.collide(a._children[1],b)):a._aabbMinX<b._aabbMaxX&&a._aabbMaxX>b._aabbMinX&&a._aabbMinY<b._aabbMaxY&&a._aabbMaxY>b._aabbMinY&&a._aabbMinZ<b._aabbMaxZ&&a._aabbMaxZ>b._aabbMinZ&&(c&&d?(a=a._proxy,b=b._proxy,c=this._proxyPairPool,null!=c?(this._proxyPairPool=c._next,c._next=null):c=new gh,
null!=this._proxyPairList&&(c._next=this._proxyPairList),this._proxyPairList=c,c._p1=a,c._p2=b):d||a._height>b._height?(this.collide(a._children[0],b),this.collide(a._children[1],b)):(this.collide(b._children[0],a),this.collide(b._children[1],a)))},createProxy:function(a,b){a=new Ci(a,this._idCount++);this._numProxies++;null==this._proxyList?this._proxyList=a:(this._proxyListLast._next=a,a._prev=this._proxyListLast);this._proxyListLast=a;a._aabbMinX=b._minX;a._aabbMinY=b._minY;a._aabbMinZ=b._minZ;
a._aabbMaxX=b._maxX;a._aabbMaxY=b._maxY;a._aabbMaxZ=b._maxZ;b=ta.bvhProxyPadding;a._aabbMinX-=b;a._aabbMinY-=b;a._aabbMinZ-=b;a._aabbMaxX+=b;a._aabbMaxY+=b;a._aabbMaxZ+=b;b=this._tree;var c=b._nodePool;null!=c?(b._nodePool=c._next,c._next=null):c=new uf;var d=c;d._proxy=a;a._leaf=d;d._aabbMinX=a._aabbMinX;d._aabbMinY=a._aabbMinY;d._aabbMinZ=a._aabbMinZ;d._aabbMaxX=a._aabbMaxX;d._aabbMaxY=a._aabbMaxY;d._aabbMaxZ=a._aabbMaxZ;b._numLeaves++;null==b.leafList?b.leafList=d:(b.leafListLast._nextLeaf=d,d._prevLeaf=
b.leafListLast);b.leafListLast=d;if(null==b._root)b._root=d;else{for(var e=b._root;0<e._height&&(c=b._strategy._decideInsertion(e,d),-1!=c);)e=e._children[c];var f=e._parent;c=b._nodePool;null!=c?(b._nodePool=c._next,c._next=null):c=new uf;if(null==f)b._root=c;else{var k=e._childIndex;f._children[k]=c;c._parent=f;c._childIndex=k}f=e._childIndex;c._children[f]=e;e._parent=c;e._childIndex=f;e=e._childIndex^1;c._children[e]=d;d._parent=c;for(d._childIndex=e;null!=c;){if(b._strategy._balancingEnabled&&
!(2>c._height)){d=c._parent;f=c._children[0];k=c._children[1];var m=f._height-k._height;e=c._childIndex;1<m?(k=f._children[0],m=f._children[1],k._height>m._height?(f._children[1]=c,c._parent=f,c._childIndex=1,c._children[0]=m,m._parent=c,m._childIndex=0):(f._children[0]=c,c._parent=f,c._childIndex=0,c._children[0]=k,k._parent=c,k._childIndex=0),k=f._children[0],m=f._children[1],f._aabbMinX=k._aabbMinX<m._aabbMinX?k._aabbMinX:m._aabbMinX,f._aabbMinY=k._aabbMinY<m._aabbMinY?k._aabbMinY:m._aabbMinY,
f._aabbMinZ=k._aabbMinZ<m._aabbMinZ?k._aabbMinZ:m._aabbMinZ,f._aabbMaxX=k._aabbMaxX>m._aabbMaxX?k._aabbMaxX:m._aabbMaxX,f._aabbMaxY=k._aabbMaxY>m._aabbMaxY?k._aabbMaxY:m._aabbMaxY,f._aabbMaxZ=k._aabbMaxZ>m._aabbMaxZ?k._aabbMaxZ:m._aabbMaxZ,k=f._children[0]._height,m=f._children[1]._height,f._height=(k>m?k:m)+1,k=c._children[0],m=c._children[1],c._aabbMinX=k._aabbMinX<m._aabbMinX?k._aabbMinX:m._aabbMinX,c._aabbMinY=k._aabbMinY<m._aabbMinY?k._aabbMinY:m._aabbMinY,c._aabbMinZ=k._aabbMinZ<m._aabbMinZ?
k._aabbMinZ:m._aabbMinZ,c._aabbMaxX=k._aabbMaxX>m._aabbMaxX?k._aabbMaxX:m._aabbMaxX,c._aabbMaxY=k._aabbMaxY>m._aabbMaxY?k._aabbMaxY:m._aabbMaxY,c._aabbMaxZ=k._aabbMaxZ>m._aabbMaxZ?k._aabbMaxZ:m._aabbMaxZ,k=c._children[0]._height,m=c._children[1]._height,c._height=(k>m?k:m)+1,null!=d?(d._children[e]=f,f._parent=d,f._childIndex=e):(b._root=f,f._parent=null),c=f):-1>m&&(f=k._children[0],m=k._children[1],f._height>m._height?(k._children[1]=c,c._parent=k,c._childIndex=1,c._children[1]=m,m._parent=c,m._childIndex=
1):(k._children[0]=c,c._parent=k,c._childIndex=0,c._children[1]=f,f._parent=c,f._childIndex=1),f=k._children[0],m=k._children[1],k._aabbMinX=f._aabbMinX<m._aabbMinX?f._aabbMinX:m._aabbMinX,k._aabbMinY=f._aabbMinY<m._aabbMinY?f._aabbMinY:m._aabbMinY,k._aabbMinZ=f._aabbMinZ<m._aabbMinZ?f._aabbMinZ:m._aabbMinZ,k._aabbMaxX=f._aabbMaxX>m._aabbMaxX?f._aabbMaxX:m._aabbMaxX,k._aabbMaxY=f._aabbMaxY>m._aabbMaxY?f._aabbMaxY:m._aabbMaxY,k._aabbMaxZ=f._aabbMaxZ>m._aabbMaxZ?f._aabbMaxZ:m._aabbMaxZ,f=k._children[0]._height,
m=k._children[1]._height,k._height=(f>m?f:m)+1,f=c._children[0],m=c._children[1],c._aabbMinX=f._aabbMinX<m._aabbMinX?f._aabbMinX:m._aabbMinX,c._aabbMinY=f._aabbMinY<m._aabbMinY?f._aabbMinY:m._aabbMinY,c._aabbMinZ=f._aabbMinZ<m._aabbMinZ?f._aabbMinZ:m._aabbMinZ,c._aabbMaxX=f._aabbMaxX>m._aabbMaxX?f._aabbMaxX:m._aabbMaxX,c._aabbMaxY=f._aabbMaxY>m._aabbMaxY?f._aabbMaxY:m._aabbMaxY,c._aabbMaxZ=f._aabbMaxZ>m._aabbMaxZ?f._aabbMaxZ:m._aabbMaxZ,f=c._children[0]._height,m=c._children[1]._height,c._height=
(f>m?f:m)+1,null!=d?(d._children[e]=k,k._parent=d,k._childIndex=e):(b._root=k,k._parent=null),c=k)}d=c._children[0]._height;e=c._children[1]._height;c._height=(d>e?d:e)+1;d=c._children[0];e=c._children[1];c._aabbMinX=d._aabbMinX<e._aabbMinX?d._aabbMinX:e._aabbMinX;c._aabbMinY=d._aabbMinY<e._aabbMinY?d._aabbMinY:e._aabbMinY;c._aabbMinZ=d._aabbMinZ<e._aabbMinZ?d._aabbMinZ:e._aabbMinZ;c._aabbMaxX=d._aabbMaxX>e._aabbMaxX?d._aabbMaxX:e._aabbMaxX;c._aabbMaxY=d._aabbMaxY>e._aabbMaxY?d._aabbMaxY:e._aabbMaxY;
c._aabbMaxZ=d._aabbMaxZ>e._aabbMaxZ?d._aabbMaxZ:e._aabbMaxZ;c=c._parent}}if(!a._moved){a._moved=!0;if(this.movedProxies.length==this.numMovedProxies){b=Array(this.numMovedProxies<<1);c=0;for(d=this.numMovedProxies;c<d;)e=c++,b[e]=this.movedProxies[e],this.movedProxies[e]=null;this.movedProxies=b}this.movedProxies[this.numMovedProxies++]=a}return a},moveProxy:function(a,b,c){if(!(a._aabbMinX<=b._minX&&a._aabbMaxX>=b._maxX&&a._aabbMinY<=b._minY&&a._aabbMaxY>=b._maxY&&a._aabbMinZ<=b._minZ&&a._aabbMaxZ>=
b._maxZ)){a._aabbMinX=b._minX;a._aabbMinY=b._minY;a._aabbMinZ=b._minZ;a._aabbMaxX=b._maxX;a._aabbMaxY=b._maxY;a._aabbMaxZ=b._maxZ;b=ta.bvhProxyPadding;a._aabbMinX-=b;a._aabbMinY-=b;a._aabbMinZ-=b;a._aabbMaxX+=b;a._aabbMaxY+=b;a._aabbMaxZ+=b;if(null!=c){b=c.x;var d=c.y;c=c.z;a._aabbMinX+=0<b?0:b;a._aabbMinY+=0<d?0:d;a._aabbMinZ+=0<c?0:c;a._aabbMaxX+=0>b?0:b;a._aabbMaxY+=0>d?0:d;a._aabbMaxZ+=0>c?0:c}if(!a._moved){a._moved=!0;if(this.movedProxies.length==this.numMovedProxies){c=Array(this.numMovedProxies<<
1);b=0;for(d=this.numMovedProxies;b<d;){var e=b++;c[e]=this.movedProxies[e];this.movedProxies[e]=null}this.movedProxies=c}this.movedProxies[this.numMovedProxies++]=a}}},collectPairs:function(){var a=this._proxyPairList;if(null!=a){for(;a._p1=null,a._p2=null,a=a._next,null!=a;);this._proxyPairList._next=this._proxyPairPool;this._proxyPairPool=this._proxyPairList;this._proxyPairList=null}this._testCount=0;if(!(2>this._numProxies)){for(var b=this.numMovedProxies/this._numProxies<ta.bvhIncrementalCollisionThreshold,
c=0,d=this.numMovedProxies;c<d;){var e=c++,f=this.movedProxies[e];if(f._moved){var k=this._tree,m=f._leaf;k._numLeaves--;var h=m._prevLeaf,n=m._nextLeaf;null!=h&&(h._nextLeaf=n);null!=n&&(n._prevLeaf=h);m==k.leafList&&(k.leafList=k.leafList._nextLeaf);m==k.leafListLast&&(k.leafListLast=k.leafListLast._prevLeaf);m._nextLeaf=null;m._prevLeaf=null;if(k._root==m)k._root=null;else{var K=m._parent,l=K._children[m._childIndex^1],g=K._parent;if(null==g)l._parent=null,l._childIndex=0,k._root=l,K._next=null,
K._childIndex=0,K._children[0]=null,K._children[1]=null,K._childIndex=0,K._parent=null,K._height=0,K._proxy=null,K._next=k._nodePool,k._nodePool=K;else{l._parent=g;var p=K._childIndex;g._children[p]=l;l._parent=g;l._childIndex=p;K._next=null;K._childIndex=0;K._children[0]=null;K._children[1]=null;K._childIndex=0;K._parent=null;K._height=0;K._proxy=null;K._next=k._nodePool;k._nodePool=K;for(var H=g;null!=H;){if(k._strategy._balancingEnabled&&!(2>H._height)){var C=H._parent,y=H._children[0],I=H._children[1],
r=y._height-I._height,q=H._childIndex;if(1<r){var t=y._children[0],z=y._children[1];if(t._height>z._height){y._children[1]=H;H._parent=y;H._childIndex=1;H._children[0]=z;z._parent=H;z._childIndex=0;var u=y._children[0],A=y._children[1];y._aabbMinX=u._aabbMinX<A._aabbMinX?u._aabbMinX:A._aabbMinX;y._aabbMinY=u._aabbMinY<A._aabbMinY?u._aabbMinY:A._aabbMinY;y._aabbMinZ=u._aabbMinZ<A._aabbMinZ?u._aabbMinZ:A._aabbMinZ;y._aabbMaxX=u._aabbMaxX>A._aabbMaxX?u._aabbMaxX:A._aabbMaxX;y._aabbMaxY=u._aabbMaxY>A._aabbMaxY?
u._aabbMaxY:A._aabbMaxY;y._aabbMaxZ=u._aabbMaxZ>A._aabbMaxZ?u._aabbMaxZ:A._aabbMaxZ;var w=y._children[0]._height,O=y._children[1]._height;y._height=(w>O?w:O)+1;var v=H._children[0],B=H._children[1];H._aabbMinX=v._aabbMinX<B._aabbMinX?v._aabbMinX:B._aabbMinX;H._aabbMinY=v._aabbMinY<B._aabbMinY?v._aabbMinY:B._aabbMinY;H._aabbMinZ=v._aabbMinZ<B._aabbMinZ?v._aabbMinZ:B._aabbMinZ;H._aabbMaxX=v._aabbMaxX>B._aabbMaxX?v._aabbMaxX:B._aabbMaxX;H._aabbMaxY=v._aabbMaxY>B._aabbMaxY?v._aabbMaxY:B._aabbMaxY;H._aabbMaxZ=
v._aabbMaxZ>B._aabbMaxZ?v._aabbMaxZ:B._aabbMaxZ;var F=H._children[0]._height,x=H._children[1]._height;H._height=(F>x?F:x)+1}else{y._children[0]=H;H._parent=y;H._childIndex=0;H._children[0]=t;t._parent=H;t._childIndex=0;var qa=y._children[0],M=y._children[1];y._aabbMinX=qa._aabbMinX<M._aabbMinX?qa._aabbMinX:M._aabbMinX;y._aabbMinY=qa._aabbMinY<M._aabbMinY?qa._aabbMinY:M._aabbMinY;y._aabbMinZ=qa._aabbMinZ<M._aabbMinZ?qa._aabbMinZ:M._aabbMinZ;y._aabbMaxX=qa._aabbMaxX>M._aabbMaxX?qa._aabbMaxX:M._aabbMaxX;
y._aabbMaxY=qa._aabbMaxY>M._aabbMaxY?qa._aabbMaxY:M._aabbMaxY;y._aabbMaxZ=qa._aabbMaxZ>M._aabbMaxZ?qa._aabbMaxZ:M._aabbMaxZ;var Ia=y._children[0]._height,ja=y._children[1]._height;y._height=(Ia>ja?Ia:ja)+1;var Ca=H._children[0],D=H._children[1];H._aabbMinX=Ca._aabbMinX<D._aabbMinX?Ca._aabbMinX:D._aabbMinX;H._aabbMinY=Ca._aabbMinY<D._aabbMinY?Ca._aabbMinY:D._aabbMinY;H._aabbMinZ=Ca._aabbMinZ<D._aabbMinZ?Ca._aabbMinZ:D._aabbMinZ;H._aabbMaxX=Ca._aabbMaxX>D._aabbMaxX?Ca._aabbMaxX:D._aabbMaxX;H._aabbMaxY=
Ca._aabbMaxY>D._aabbMaxY?Ca._aabbMaxY:D._aabbMaxY;H._aabbMaxZ=Ca._aabbMaxZ>D._aabbMaxZ?Ca._aabbMaxZ:D._aabbMaxZ;var J=H._children[0]._height,ha=H._children[1]._height;H._height=(J>ha?J:ha)+1}null!=C?(C._children[q]=y,y._parent=C,y._childIndex=q):(k._root=y,y._parent=null);H=y}else if(-1>r){var N=I._children[0],S=I._children[1];if(N._height>S._height){I._children[1]=H;H._parent=I;H._childIndex=1;H._children[1]=S;S._parent=H;S._childIndex=1;var W=I._children[0],ba=I._children[1];I._aabbMinX=W._aabbMinX<
ba._aabbMinX?W._aabbMinX:ba._aabbMinX;I._aabbMinY=W._aabbMinY<ba._aabbMinY?W._aabbMinY:ba._aabbMinY;I._aabbMinZ=W._aabbMinZ<ba._aabbMinZ?W._aabbMinZ:ba._aabbMinZ;I._aabbMaxX=W._aabbMaxX>ba._aabbMaxX?W._aabbMaxX:ba._aabbMaxX;I._aabbMaxY=W._aabbMaxY>ba._aabbMaxY?W._aabbMaxY:ba._aabbMaxY;I._aabbMaxZ=W._aabbMaxZ>ba._aabbMaxZ?W._aabbMaxZ:ba._aabbMaxZ;var Y=I._children[0]._height,mb=I._children[1]._height;I._height=(Y>mb?Y:mb)+1;var L=H._children[0],aa=H._children[1];H._aabbMinX=L._aabbMinX<aa._aabbMinX?
L._aabbMinX:aa._aabbMinX;H._aabbMinY=L._aabbMinY<aa._aabbMinY?L._aabbMinY:aa._aabbMinY;H._aabbMinZ=L._aabbMinZ<aa._aabbMinZ?L._aabbMinZ:aa._aabbMinZ;H._aabbMaxX=L._aabbMaxX>aa._aabbMaxX?L._aabbMaxX:aa._aabbMaxX;H._aabbMaxY=L._aabbMaxY>aa._aabbMaxY?L._aabbMaxY:aa._aabbMaxY;H._aabbMaxZ=L._aabbMaxZ>aa._aabbMaxZ?L._aabbMaxZ:aa._aabbMaxZ;var V=H._children[0]._height,Q=H._children[1]._height;H._height=(V>Q?V:Q)+1}else{I._children[0]=H;H._parent=I;H._childIndex=0;H._children[1]=N;N._parent=H;N._childIndex=
1;var U=I._children[0],Ja=I._children[1];I._aabbMinX=U._aabbMinX<Ja._aabbMinX?U._aabbMinX:Ja._aabbMinX;I._aabbMinY=U._aabbMinY<Ja._aabbMinY?U._aabbMinY:Ja._aabbMinY;I._aabbMinZ=U._aabbMinZ<Ja._aabbMinZ?U._aabbMinZ:Ja._aabbMinZ;I._aabbMaxX=U._aabbMaxX>Ja._aabbMaxX?U._aabbMaxX:Ja._aabbMaxX;I._aabbMaxY=U._aabbMaxY>Ja._aabbMaxY?U._aabbMaxY:Ja._aabbMaxY;I._aabbMaxZ=U._aabbMaxZ>Ja._aabbMaxZ?U._aabbMaxZ:Ja._aabbMaxZ;var fa=I._children[0]._height,Pa=I._children[1]._height;I._height=(fa>Pa?fa:Pa)+1;var ge=
H._children[0],ia=H._children[1];H._aabbMinX=ge._aabbMinX<ia._aabbMinX?ge._aabbMinX:ia._aabbMinX;H._aabbMinY=ge._aabbMinY<ia._aabbMinY?ge._aabbMinY:ia._aabbMinY;H._aabbMinZ=ge._aabbMinZ<ia._aabbMinZ?ge._aabbMinZ:ia._aabbMinZ;H._aabbMaxX=ge._aabbMaxX>ia._aabbMaxX?ge._aabbMaxX:ia._aabbMaxX;H._aabbMaxY=ge._aabbMaxY>ia._aabbMaxY?ge._aabbMaxY:ia._aabbMaxY;H._aabbMaxZ=ge._aabbMaxZ>ia._aabbMaxZ?ge._aabbMaxZ:ia._aabbMaxZ;var T=H._children[0]._height,pa=H._children[1]._height;H._height=(T>pa?T:pa)+1}null!=
C?(C._children[q]=I,I._parent=C,I._childIndex=q):(k._root=I,I._parent=null);H=I}}var G=H._children[0]._height,$a=H._children[1]._height;H._height=(G>$a?G:$a)+1;var Ue=H._children[0],bc=H._children[1];H._aabbMinX=Ue._aabbMinX<bc._aabbMinX?Ue._aabbMinX:bc._aabbMinX;H._aabbMinY=Ue._aabbMinY<bc._aabbMinY?Ue._aabbMinY:bc._aabbMinY;H._aabbMinZ=Ue._aabbMinZ<bc._aabbMinZ?Ue._aabbMinZ:bc._aabbMinZ;H._aabbMaxX=Ue._aabbMaxX>bc._aabbMaxX?Ue._aabbMaxX:bc._aabbMaxX;H._aabbMaxY=Ue._aabbMaxY>bc._aabbMaxY?Ue._aabbMaxY:
bc._aabbMaxY;H._aabbMaxZ=Ue._aabbMaxZ>bc._aabbMaxZ?Ue._aabbMaxZ:bc._aabbMaxZ;H=H._parent}}}f._leaf=null;m._next=null;m._childIndex=0;m._children[0]=null;m._children[1]=null;m._childIndex=0;m._parent=null;m._height=0;m._proxy=null;m._next=k._nodePool;k._nodePool=m;var ma=this._tree,Ma=ma._nodePool;null!=Ma?(ma._nodePool=Ma._next,Ma._next=null):Ma=new uf;var Z=Ma;Z._proxy=f;f._leaf=Z;Z._aabbMinX=f._aabbMinX;Z._aabbMinY=f._aabbMinY;Z._aabbMinZ=f._aabbMinZ;Z._aabbMaxX=f._aabbMaxX;Z._aabbMaxY=f._aabbMaxY;
Z._aabbMaxZ=f._aabbMaxZ;ma._numLeaves++;null==ma.leafList?ma.leafList=Z:(ma.leafListLast._nextLeaf=Z,Z._prevLeaf=ma.leafListLast);ma.leafListLast=Z;if(null==ma._root)ma._root=Z;else{for(var R=ma._root;0<R._height;){var ec=ma._strategy._decideInsertion(R,Z);if(-1==ec)break;else R=R._children[ec]}var Ta=R._parent,X=ma._nodePool;null!=X?(ma._nodePool=X._next,X._next=null):X=new uf;var sa=X;if(null==Ta)ma._root=sa;else{var la=R._childIndex;Ta._children[la]=sa;sa._parent=Ta;sa._childIndex=la}var na=R._childIndex;
sa._children[na]=R;R._parent=sa;R._childIndex=na;var da=R._childIndex^1;sa._children[da]=Z;Z._parent=sa;for(Z._childIndex=da;null!=sa;){if(ma._strategy._balancingEnabled&&!(2>sa._height)){var ra=sa._parent,yb=sa._children[0],Aa=sa._children[1],ff=yb._height-Aa._height,ea=sa._childIndex;if(1<ff){var qb=yb._children[0],xa=yb._children[1];if(qb._height>xa._height){yb._children[1]=sa;sa._parent=yb;sa._childIndex=1;sa._children[0]=xa;xa._parent=sa;xa._childIndex=0;var ya=yb._children[0],ua=yb._children[1];
yb._aabbMinX=ya._aabbMinX<ua._aabbMinX?ya._aabbMinX:ua._aabbMinX;yb._aabbMinY=ya._aabbMinY<ua._aabbMinY?ya._aabbMinY:ua._aabbMinY;yb._aabbMinZ=ya._aabbMinZ<ua._aabbMinZ?ya._aabbMinZ:ua._aabbMinZ;yb._aabbMaxX=ya._aabbMaxX>ua._aabbMaxX?ya._aabbMaxX:ua._aabbMaxX;yb._aabbMaxY=ya._aabbMaxY>ua._aabbMaxY?ya._aabbMaxY:ua._aabbMaxY;yb._aabbMaxZ=ya._aabbMaxZ>ua._aabbMaxZ?ya._aabbMaxZ:ua._aabbMaxZ;var wa=yb._children[0]._height,Ka=yb._children[1]._height;yb._height=(wa>Ka?wa:Ka)+1;var Da=sa._children[0],ka=
sa._children[1];sa._aabbMinX=Da._aabbMinX<ka._aabbMinX?Da._aabbMinX:ka._aabbMinX;sa._aabbMinY=Da._aabbMinY<ka._aabbMinY?Da._aabbMinY:ka._aabbMinY;sa._aabbMinZ=Da._aabbMinZ<ka._aabbMinZ?Da._aabbMinZ:ka._aabbMinZ;sa._aabbMaxX=Da._aabbMaxX>ka._aabbMaxX?Da._aabbMaxX:ka._aabbMaxX;sa._aabbMaxY=Da._aabbMaxY>ka._aabbMaxY?Da._aabbMaxY:ka._aabbMaxY;sa._aabbMaxZ=Da._aabbMaxZ>ka._aabbMaxZ?Da._aabbMaxZ:ka._aabbMaxZ;var Na=sa._children[0]._height,va=sa._children[1]._height;sa._height=(Na>va?Na:va)+1}else{yb._children[0]=
sa;sa._parent=yb;sa._childIndex=0;sa._children[0]=qb;qb._parent=sa;qb._childIndex=0;var Ba=yb._children[0],Ga=yb._children[1];yb._aabbMinX=Ba._aabbMinX<Ga._aabbMinX?Ba._aabbMinX:Ga._aabbMinX;yb._aabbMinY=Ba._aabbMinY<Ga._aabbMinY?Ba._aabbMinY:Ga._aabbMinY;yb._aabbMinZ=Ba._aabbMinZ<Ga._aabbMinZ?Ba._aabbMinZ:Ga._aabbMinZ;yb._aabbMaxX=Ba._aabbMaxX>Ga._aabbMaxX?Ba._aabbMaxX:Ga._aabbMaxX;yb._aabbMaxY=Ba._aabbMaxY>Ga._aabbMaxY?Ba._aabbMaxY:Ga._aabbMaxY;yb._aabbMaxZ=Ba._aabbMaxZ>Ga._aabbMaxZ?Ba._aabbMaxZ:
Ga._aabbMaxZ;var He=yb._children[0]._height,Vd=yb._children[1]._height;yb._height=(He>Vd?He:Vd)+1;var La=sa._children[0],Oa=sa._children[1];sa._aabbMinX=La._aabbMinX<Oa._aabbMinX?La._aabbMinX:Oa._aabbMinX;sa._aabbMinY=La._aabbMinY<Oa._aabbMinY?La._aabbMinY:Oa._aabbMinY;sa._aabbMinZ=La._aabbMinZ<Oa._aabbMinZ?La._aabbMinZ:Oa._aabbMinZ;sa._aabbMaxX=La._aabbMaxX>Oa._aabbMaxX?La._aabbMaxX:Oa._aabbMaxX;sa._aabbMaxY=La._aabbMaxY>Oa._aabbMaxY?La._aabbMaxY:Oa._aabbMaxY;sa._aabbMaxZ=La._aabbMaxZ>Oa._aabbMaxZ?
La._aabbMaxZ:Oa._aabbMaxZ;var Pb=sa._children[0]._height,Va=sa._children[1]._height;sa._height=(Pb>Va?Pb:Va)+1}null!=ra?(ra._children[ea]=yb,yb._parent=ra,yb._childIndex=ea):(ma._root=yb,yb._parent=null);sa=yb}else if(-1>ff){var ca=Aa._children[0],Qa=Aa._children[1];if(ca._height>Qa._height){Aa._children[1]=sa;sa._parent=Aa;sa._childIndex=1;sa._children[1]=Qa;Qa._parent=sa;Qa._childIndex=1;var Fb=Aa._children[0],Ra=Aa._children[1];Aa._aabbMinX=Fb._aabbMinX<Ra._aabbMinX?Fb._aabbMinX:Ra._aabbMinX;Aa._aabbMinY=
Fb._aabbMinY<Ra._aabbMinY?Fb._aabbMinY:Ra._aabbMinY;Aa._aabbMinZ=Fb._aabbMinZ<Ra._aabbMinZ?Fb._aabbMinZ:Ra._aabbMinZ;Aa._aabbMaxX=Fb._aabbMaxX>Ra._aabbMaxX?Fb._aabbMaxX:Ra._aabbMaxX;Aa._aabbMaxY=Fb._aabbMaxY>Ra._aabbMaxY?Fb._aabbMaxY:Ra._aabbMaxY;Aa._aabbMaxZ=Fb._aabbMaxZ>Ra._aabbMaxZ?Fb._aabbMaxZ:Ra._aabbMaxZ;var Sa=Aa._children[0]._height,Za=Aa._children[1]._height;Aa._height=(Sa>Za?Sa:Za)+1;var Ve=sa._children[0],yc=sa._children[1];sa._aabbMinX=Ve._aabbMinX<yc._aabbMinX?Ve._aabbMinX:yc._aabbMinX;
sa._aabbMinY=Ve._aabbMinY<yc._aabbMinY?Ve._aabbMinY:yc._aabbMinY;sa._aabbMinZ=Ve._aabbMinZ<yc._aabbMinZ?Ve._aabbMinZ:yc._aabbMinZ;sa._aabbMaxX=Ve._aabbMaxX>yc._aabbMaxX?Ve._aabbMaxX:yc._aabbMaxX;sa._aabbMaxY=Ve._aabbMaxY>yc._aabbMaxY?Ve._aabbMaxY:yc._aabbMaxY;sa._aabbMaxZ=Ve._aabbMaxZ>yc._aabbMaxZ?Ve._aabbMaxZ:yc._aabbMaxZ;var nk=sa._children[0]._height,ad=sa._children[1]._height;sa._height=(nk>ad?nk:ad)+1}else{Aa._children[0]=sa;sa._parent=Aa;sa._childIndex=0;sa._children[1]=ca;ca._parent=sa;ca._childIndex=
1;var P=Aa._children[0],Vb=Aa._children[1];Aa._aabbMinX=P._aabbMinX<Vb._aabbMinX?P._aabbMinX:Vb._aabbMinX;Aa._aabbMinY=P._aabbMinY<Vb._aabbMinY?P._aabbMinY:Vb._aabbMinY;Aa._aabbMinZ=P._aabbMinZ<Vb._aabbMinZ?P._aabbMinZ:Vb._aabbMinZ;Aa._aabbMaxX=P._aabbMaxX>Vb._aabbMaxX?P._aabbMaxX:Vb._aabbMaxX;Aa._aabbMaxY=P._aabbMaxY>Vb._aabbMaxY?P._aabbMaxY:Vb._aabbMaxY;Aa._aabbMaxZ=P._aabbMaxZ>Vb._aabbMaxZ?P._aabbMaxZ:Vb._aabbMaxZ;var Ya=Aa._children[0]._height,Xa=Aa._children[1]._height;Aa._height=(Ya>Xa?Ya:Xa)+
1;var Fa=sa._children[0],Ha=sa._children[1];sa._aabbMinX=Fa._aabbMinX<Ha._aabbMinX?Fa._aabbMinX:Ha._aabbMinX;sa._aabbMinY=Fa._aabbMinY<Ha._aabbMinY?Fa._aabbMinY:Ha._aabbMinY;sa._aabbMinZ=Fa._aabbMinZ<Ha._aabbMinZ?Fa._aabbMinZ:Ha._aabbMinZ;sa._aabbMaxX=Fa._aabbMaxX>Ha._aabbMaxX?Fa._aabbMaxX:Ha._aabbMaxX;sa._aabbMaxY=Fa._aabbMaxY>Ha._aabbMaxY?Fa._aabbMaxY:Ha._aabbMaxY;sa._aabbMaxZ=Fa._aabbMaxZ>Ha._aabbMaxZ?Fa._aabbMaxZ:Ha._aabbMaxZ;var E=sa._children[0]._height,Ea=sa._children[1]._height;sa._height=
(E>Ea?E:Ea)+1}null!=ra?(ra._children[ea]=Aa,Aa._parent=ra,Aa._childIndex=ea):(ma._root=Aa,Aa._parent=null);sa=Aa}}var za=sa._children[0]._height,Ib=sa._children[1]._height;sa._height=(za>Ib?za:Ib)+1;var bb=sa._children[0],gc=sa._children[1];sa._aabbMinX=bb._aabbMinX<gc._aabbMinX?bb._aabbMinX:gc._aabbMinX;sa._aabbMinY=bb._aabbMinY<gc._aabbMinY?bb._aabbMinY:gc._aabbMinY;sa._aabbMinZ=bb._aabbMinZ<gc._aabbMinZ?bb._aabbMinZ:gc._aabbMinZ;sa._aabbMaxX=bb._aabbMaxX>gc._aabbMaxX?bb._aabbMaxX:gc._aabbMaxX;
sa._aabbMaxY=bb._aabbMaxY>gc._aabbMaxY?bb._aabbMaxY:gc._aabbMaxY;sa._aabbMaxZ=bb._aabbMaxZ>gc._aabbMaxZ?bb._aabbMaxZ:gc._aabbMaxZ;sa=sa._parent}}b&&this.collide(this._tree._root,f._leaf);f._moved=!1}this.movedProxies[e]=null}b||this.collide(this._tree._root,this._tree._root);this.numMovedProxies=0}},__class__:ih});var uf=function(){this._nextLeaf=this._prevLeaf=this._next=null;this._children=Array(2);this._childIndex=0;this._parent=null;this._height=0;this._proxy=null;this._aabbMaxZ=this._aabbMaxY=
this._aabbMaxX=this._aabbMinZ=this._aabbMinY=this._aabbMinX=0};g["oimo.collision.broadphase.bvh.BvhNode"]=uf;uf.__name__="oimo.collision.broadphase.bvh.BvhNode";uf.prototype={_next:null,_prevLeaf:null,_nextLeaf:null,_children:null,_childIndex:null,_parent:null,_height:null,_proxy:null,_aabbMinX:null,_aabbMinY:null,_aabbMinZ:null,_aabbMaxX:null,_aabbMaxY:null,_aabbMaxZ:null,_tmpX:null,_tmpY:null,_tmpZ:null,__class__:uf};var Ci=function(a,b){vg.call(this,a,b);this._leaf=null;this._moved=!1};g["oimo.collision.broadphase.bvh.BvhProxy"]=
Ci;Ci.__name__="oimo.collision.broadphase.bvh.BvhProxy";Ci.__super__=vg;Ci.prototype=v(vg.prototype,{_leaf:null,_moved:null,__class__:Ci});var Jk=function(){this._insertionStrategy=0;this._balancingEnabled=!1};g["oimo.collision.broadphase.bvh.BvhStrategy"]=Jk;Jk.__name__="oimo.collision.broadphase.bvh.BvhStrategy";Jk.prototype={_insertionStrategy:null,_balancingEnabled:null,_decideInsertion:function(a,b){switch(this._insertionStrategy){case 0:var c=b._aabbMinX+b._aabbMaxX;var d=b._aabbMinY+b._aabbMaxY;
var e=b._aabbMinZ+b._aabbMaxZ;var f=a._children[0],k=a._children[1];a=f._aabbMinX+f._aabbMaxX;b=f._aabbMinY+f._aabbMaxY;f=f._aabbMinZ+f._aabbMaxZ;var m=k._aabbMinX+k._aabbMaxX;var h=k._aabbMinY+k._aabbMaxY;k=k._aabbMinZ+k._aabbMaxZ;a-=c;b-=d;f-=e;m-=c;h-=d;k-=e;return a*a+b*b+f*f<m*m+h*h+k*k?0:1;case 1:f=a._children[0];e=a._children[1];k=a._aabbMaxX-a._aabbMinX;var n=a._aabbMaxY-a._aabbMinY,K=a._aabbMaxZ-a._aabbMinZ;c=a._aabbMinX<b._aabbMinX?a._aabbMinX:b._aabbMinX;var l=a._aabbMinY<b._aabbMinY?a._aabbMinY:
b._aabbMinY;m=a._aabbMinZ<b._aabbMinZ?a._aabbMinZ:b._aabbMinZ;d=a._aabbMaxX>b._aabbMaxX?a._aabbMaxX:b._aabbMaxX;var g=a._aabbMaxY>b._aabbMaxY?a._aabbMaxY:b._aabbMaxY;h=a._aabbMaxZ>b._aabbMaxZ?a._aabbMaxZ:b._aabbMaxZ;a=g-l;m=h-m;c=2*((d-c)*(a+m)+a*m);a=2*c;k=n=2*(c-2*(k*(n+K)+n*K));c=f._aabbMinX<b._aabbMinX?f._aabbMinX:b._aabbMinX;l=f._aabbMinY<b._aabbMinY?f._aabbMinY:b._aabbMinY;m=f._aabbMinZ<b._aabbMinZ?f._aabbMinZ:b._aabbMinZ;d=f._aabbMaxX>b._aabbMaxX?f._aabbMaxX:b._aabbMaxX;g=f._aabbMaxY>b._aabbMaxY?
f._aabbMaxY:b._aabbMaxY;h=f._aabbMaxZ>b._aabbMaxZ?f._aabbMaxZ:b._aabbMaxZ;0==f._height?(f=g-l,m=h-m,k+=2*((d-c)*(f+m)+f*m)):(K=g-l,m=h-m,h=f._aabbMaxY-f._aabbMinY,l=f._aabbMaxZ-f._aabbMinZ,k+=2*((d-c)*(K+m)+K*m)-2*((f._aabbMaxX-f._aabbMinX)*(h+l)+h*l));f=n;c=e._aabbMinX<b._aabbMinX?e._aabbMinX:b._aabbMinX;l=e._aabbMinY<b._aabbMinY?e._aabbMinY:b._aabbMinY;m=e._aabbMinZ<b._aabbMinZ?e._aabbMinZ:b._aabbMinZ;d=e._aabbMaxX>b._aabbMaxX?e._aabbMaxX:b._aabbMaxX;g=e._aabbMaxY>b._aabbMaxY?e._aabbMaxY:b._aabbMaxY;
h=e._aabbMaxZ>b._aabbMaxZ?e._aabbMaxZ:b._aabbMaxZ;0==e._height?(e=g-l,b=h-m,f+=2*((d-c)*(e+b)+e*b)):(b=g-l,m=h-m,h=e._aabbMaxY-e._aabbMinY,n=e._aabbMaxZ-e._aabbMinZ,f+=2*((d-c)*(b+m)+b*m)-2*((e._aabbMaxX-e._aabbMinX)*(h+n)+h*n));return a<k?a<f?-1:1:k<f?0:1;default:return console.log("Source/oimo/collision/broadphase/bvh/BvhStrategy.hx:37:","invalid BVH insertion strategy: "+this._insertionStrategy),-1}},_splitLeaves:function(a,b,c){var d=1/(c-b),e,f;var k=f=e=0;for(var m=b;m<c;){var h=m++;h=a[h];
h._tmpX=h._aabbMaxX+h._aabbMinX;h._tmpY=h._aabbMaxY+h._aabbMinY;h._tmpZ=h._aabbMaxZ+h._aabbMinZ;e+=h._tmpX;f+=h._tmpY;k+=h._tmpZ}e*=d;f*=d;k*=d;d=m=h=0;for(var n=b;n<c;){var K=n++,l=a[K];K=l._tmpX-e;var g=l._tmpY-f;l=l._tmpZ-k;K*=K;g*=g;l*=l;h+=K;m+=g;d+=l}--c;if(h>m)if(h>d)for(;;){for(;!(a[b]._tmpX<=e);)++b;for(;!(a[c]._tmpX>=e);)--c;if(b>=c)break;f=a[b];a[b]=a[c];a[c]=f;++b;--c}else for(e=k;;){for(;!(a[b]._tmpZ<=e);)++b;for(;!(a[c]._tmpZ>=e);)--c;if(b>=c)break;f=a[b];a[b]=a[c];a[c]=f;++b;--c}else if(m>
d)for(e=f;;){for(;!(a[b]._tmpY<=e);)++b;for(;!(a[c]._tmpY>=e);)--c;if(b>=c)break;f=a[b];a[b]=a[c];a[c]=f;++b;--c}else for(e=k;;){for(;!(a[b]._tmpZ<=e);)++b;for(;!(a[c]._tmpZ>=e);)--c;if(b>=c)break;f=a[b];a[b]=a[c];a[c]=f;++b;--c}return b},__class__:Jk};var Ik=function(){this._root=null;this._numLeaves=0;this._strategy=new Jk;this.leafListLast=this.leafList=this._nodePool=null;this.tmp=Array(1024)};g["oimo.collision.broadphase.bvh.BvhTree"]=Ik;Ik.__name__="oimo.collision.broadphase.bvh.BvhTree";Ik.prototype=
{_root:null,_numLeaves:null,_strategy:null,_nodePool:null,leafList:null,leafListLast:null,tmp:null,decomposeRecursive:function(a){0==a._height?(a._childIndex=0,a._parent=null):(this.decomposeRecursive(a._children[0]),this.decomposeRecursive(a._children[1]),a._children[0]=null,a._children[1]=null,a._childIndex=0,a._parent=null,a._height=0,a._proxy=null,a._next=this._nodePool,this._nodePool=a)},buildTopDownRecursive:function(a,b,c){if(1==c-b)return b=a[b],a=b._proxy,b._aabbMinX=a._aabbMinX,b._aabbMinY=
a._aabbMinY,b._aabbMinZ=a._aabbMinZ,b._aabbMaxX=a._aabbMaxX,b._aabbMaxY=a._aabbMaxY,b._aabbMaxZ=a._aabbMaxZ,b;var d=this._strategy._splitLeaves(a,b,c);b=this.buildTopDownRecursive(a,b,d);c=this.buildTopDownRecursive(a,d,c);a=this._nodePool;null!=a?(this._nodePool=a._next,a._next=null):a=new uf;a._children[0]=b;b._parent=a;b._childIndex=0;a._children[1]=c;c._parent=a;c._childIndex=1;b=a._children[0];c=a._children[1];a._aabbMinX=b._aabbMinX<c._aabbMinX?b._aabbMinX:c._aabbMinX;a._aabbMinY=b._aabbMinY<
c._aabbMinY?b._aabbMinY:c._aabbMinY;a._aabbMinZ=b._aabbMinZ<c._aabbMinZ?b._aabbMinZ:c._aabbMinZ;a._aabbMaxX=b._aabbMaxX>c._aabbMaxX?b._aabbMaxX:c._aabbMaxX;a._aabbMaxY=b._aabbMaxY>c._aabbMaxY?b._aabbMaxY:c._aabbMaxY;a._aabbMaxZ=b._aabbMaxZ>c._aabbMaxZ?b._aabbMaxZ:c._aabbMaxZ;b=a._children[0]._height;c=a._children[1]._height;a._height=(b>c?b:c)+1;return a},__class__:Ik};var Kj=function(){this._maxZ=this._maxY=this._maxX=this._minZ=this._minY=this._minX=0};g["oimo.collision.geometry.Aabb"]=Kj;Kj.__name__=
"oimo.collision.geometry.Aabb";Kj.prototype={_minX:null,_minY:null,_minZ:null,_maxX:null,_maxY:null,_maxZ:null,__class__:Kj};var nj=function(a){xc.call(this,1);this._halfExtentsX=a.x;this._halfExtentsY=a.y;this._halfExtentsZ=a.z;this._halfAxisXX=a.x;this._halfAxisYX=this._halfAxisXZ=this._halfAxisXY=0;this._halfAxisYY=a.y;this._halfAxisZY=this._halfAxisZX=this._halfAxisYZ=0;this._halfAxisZZ=a.z;this._updateMass();a=a.x<a.y?a.z<a.x?a.z:a.x:a.z<a.y?a.z:a.y;this._gjkMargin>.2*a&&(this._gjkMargin=.2*
a)};g["oimo.collision.geometry.BoxGeometry"]=nj;nj.__name__="oimo.collision.geometry.BoxGeometry";nj.__super__=xc;nj.prototype=v(xc.prototype,{_halfExtentsX:null,_halfExtentsY:null,_halfExtentsZ:null,_halfAxisXX:null,_halfAxisXY:null,_halfAxisXZ:null,_halfAxisYX:null,_halfAxisYY:null,_halfAxisYZ:null,_halfAxisZX:null,_halfAxisZY:null,_halfAxisZZ:null,_updateMass:function(){this._volume=8*this._halfExtentsX*this._halfExtentsY*this._halfExtentsZ;var a=this._halfExtentsX*this._halfExtentsX;var b=this._halfExtentsY*
this._halfExtentsY;var c=this._halfExtentsZ*this._halfExtentsZ;this._inertiaCoeff00=.3333333333333333*(b+c);this._inertiaCoeff10=this._inertiaCoeff02=this._inertiaCoeff01=0;this._inertiaCoeff11=.3333333333333333*(c+a);this._inertiaCoeff21=this._inertiaCoeff20=this._inertiaCoeff12=0;this._inertiaCoeff22=.3333333333333333*(a+b)},_computeAabb:function(a,b){var c=b._rotation00*this._halfAxisXX+b._rotation01*this._halfAxisXY+b._rotation02*this._halfAxisXZ;var d=b._rotation10*this._halfAxisXX+b._rotation11*
this._halfAxisXY+b._rotation12*this._halfAxisXZ;var e=b._rotation20*this._halfAxisXX+b._rotation21*this._halfAxisXY+b._rotation22*this._halfAxisXZ;var f=b._rotation00*this._halfAxisYX+b._rotation01*this._halfAxisYY+b._rotation02*this._halfAxisYZ;var k=b._rotation10*this._halfAxisYX+b._rotation11*this._halfAxisYY+b._rotation12*this._halfAxisYZ;var m=b._rotation20*this._halfAxisYX+b._rotation21*this._halfAxisYY+b._rotation22*this._halfAxisYZ;var h=b._rotation00*this._halfAxisZX+b._rotation01*this._halfAxisZY+
b._rotation02*this._halfAxisZZ;var n=b._rotation10*this._halfAxisZX+b._rotation11*this._halfAxisZY+b._rotation12*this._halfAxisZZ;var g=b._rotation20*this._halfAxisZX+b._rotation21*this._halfAxisZY+b._rotation22*this._halfAxisZZ;c=(0>c?-c:c)+(0>f?-f:f)+(0>h?-h:h);d=(0>d?-d:d)+(0>k?-k:k)+(0>n?-n:n);e=(0>e?-e:e)+(0>m?-m:m)+(0>g?-g:g);a._minX=b._positionX-c;a._minY=b._positionY-d;a._minZ=b._positionZ-e;a._maxX=b._positionX+c;a._maxY=b._positionY+d;a._maxZ=b._positionZ+e},computeLocalSupportingVertex:function(a,
b){var c,d;var e=d=c=this._gjkMargin;c=c<this._halfExtentsX?c:this._halfExtentsX;d=d<this._halfExtentsY?d:this._halfExtentsY;e=e<this._halfExtentsZ?e:this._halfExtentsZ;c=this._halfExtentsX-c;d=this._halfExtentsY-d;e=this._halfExtentsZ-e;b.x=0<a.x?c:-c;b.y=0<a.y?d:-d;b.z=0<a.z?e:-e},__class__:nj});var Rh=function(a,b){xc.call(this,4);this._radius=a;this._halfHeight=b;this._gjkMargin=this._radius;this._updateMass()};g["oimo.collision.geometry.CapsuleGeometry"]=Rh;Rh.__name__="oimo.collision.geometry.CapsuleGeometry";
Rh.__super__=xc;Rh.prototype=v(xc.prototype,{_radius:null,_halfHeight:null,_updateMass:function(){var a=this._radius*this._radius,b=this._halfHeight*this._halfHeight,c=6.28318530717958*a*this._halfHeight,d=3.14159265358979*a*this._radius*4/3;this._volume=c+d;var e=0==this._volume?0:1/this._volume;this._inertiaCoeff00=b=e*(c*(.25*a+b/3)+d*(.4*a+this._halfHeight*this._radius*.75+b));this._inertiaCoeff10=this._inertiaCoeff02=this._inertiaCoeff01=0;this._inertiaCoeff11=e*(c*a*.5+d*a*.4);this._inertiaCoeff21=
this._inertiaCoeff20=this._inertiaCoeff12=0;this._inertiaCoeff22=b},_computeAabb:function(a,b){var c,d;var e=d=c=this._radius;var f=b._rotation01;var k=b._rotation11;var m=b._rotation21;f=(0>f?-f:f)*this._halfHeight;k=(0>k?-k:k)*this._halfHeight;m=(0>m?-m:m)*this._halfHeight;c+=f;d+=k;e+=m;a._minX=b._positionX-c;a._minY=b._positionY-d;a._minZ=b._positionZ-e;a._maxX=b._positionX+c;a._maxY=b._positionY+d;a._maxZ=b._positionZ+e},computeLocalSupportingVertex:function(a,b){0<a.y?b.init(0,this._halfHeight,
0):b.init(0,-this._halfHeight,0)},__class__:Rh});var Qh=function(a,b){xc.call(this,2);this._radius=a;this._halfHeight=b;this._updateMass()};g["oimo.collision.geometry.CylinderGeometry"]=Qh;Qh.__name__="oimo.collision.geometry.CylinderGeometry";Qh.__super__=xc;Qh.prototype=v(xc.prototype,{_radius:null,_halfHeight:null,_updateMass:function(){var a=this._radius*this._radius,b=this._halfHeight*this._halfHeight*4;this._volume=3.14159265358979*a*this._halfHeight*2;this._inertiaCoeff00=.08333333333333333*
(3*a+b);this._inertiaCoeff10=this._inertiaCoeff02=this._inertiaCoeff01=0;this._inertiaCoeff11=.5*a;this._inertiaCoeff21=this._inertiaCoeff20=this._inertiaCoeff12=0;this._inertiaCoeff22=.08333333333333333*(3*a+b)},_computeAabb:function(a,b){var c=b._rotation01;var d=b._rotation11;var e=b._rotation21;c=0>c?-c:c;d=0>d?-d:d;e=0>e?-e:e;var f=Math.sqrt(1-c*c);var k=Math.sqrt(1-d*d);var m=Math.sqrt(1-e*e);f*=this._radius;k*=this._radius;m*=this._radius;c*=this._halfHeight;d*=this._halfHeight;e*=this._halfHeight;
f+=c;k+=d;m+=e;a._minX=b._positionX-f;a._minY=b._positionY-k;a._minZ=b._positionZ-m;a._maxX=b._positionX+f;a._maxY=b._positionY+k;a._maxZ=b._positionZ+m},computeLocalSupportingVertex:function(a,b){var c=a.x,d=a.z,e=c*c+d*d,f=this._radius-this._gjkMargin;0>f&&(f=0);e=0<e?f/Math.sqrt(e):0;f=this._halfHeight-this._gjkMargin;0>f&&(f=0);b.x=c*e;b.y=0<a.y?f:-f;b.z=d*e},__class__:Qh});var tg=function(){this.position=new w;this.normal=new w;this.fraction=0};g["oimo.collision.geometry.RayCastHit"]=tg;tg.__name__=
"oimo.collision.geometry.RayCastHit";tg.prototype={position:null,normal:null,fraction:null,__class__:tg};var Ph=function(a){xc.call(this,0);this._gjkMargin=this._radius=a;this._updateMass()};g["oimo.collision.geometry.SphereGeometry"]=Ph;Ph.__name__="oimo.collision.geometry.SphereGeometry";Ph.__super__=xc;Ph.prototype=v(xc.prototype,{_radius:null,_updateMass:function(){this._volume=4.188790204786386*this._radius*this._radius*this._radius;this._inertiaCoeff00=.4*this._radius*this._radius;this._inertiaCoeff10=
this._inertiaCoeff02=this._inertiaCoeff01=0;this._inertiaCoeff11=.4*this._radius*this._radius;this._inertiaCoeff21=this._inertiaCoeff20=this._inertiaCoeff12=0;this._inertiaCoeff22=.4*this._radius*this._radius},_computeAabb:function(a,b){var c,d;var e=d=c=this._radius;a._minX=b._positionX-c;a._minY=b._positionY-d;a._minZ=b._positionZ-e;a._maxX=b._positionX+c;a._maxY=b._positionY+d;a._maxZ=b._positionZ+e},computeLocalSupportingVertex:function(a,b){b.zero()},__class__:Ph});var Di=function(){this.detectors=
Array(8);this.detectors[0]=Array(8);this.detectors[1]=Array(8);this.detectors[2]=Array(8);this.detectors[3]=Array(8);this.detectors[4]=Array(8);this.detectors[5]=Array(8);var a=new Lj;this.detectors[0][0]=new Mj;this.detectors[0][1]=new wg(!1);this.detectors[0][2]=a;this.detectors[0][3]=a;this.detectors[0][4]=new Ze(!1);this.detectors[0][5]=a;this.detectors[1][0]=new wg(!0);this.detectors[1][1]=new jh;this.detectors[1][2]=a;this.detectors[1][3]=a;this.detectors[1][4]=a;this.detectors[1][5]=a;this.detectors[2][0]=
a;this.detectors[2][1]=a;this.detectors[2][2]=a;this.detectors[2][3]=a;this.detectors[2][4]=a;this.detectors[2][5]=a;this.detectors[3][0]=a;this.detectors[3][1]=a;this.detectors[3][2]=a;this.detectors[3][3]=a;this.detectors[3][4]=a;this.detectors[3][5]=a;this.detectors[4][0]=new Ze(!0);this.detectors[4][1]=a;this.detectors[4][2]=a;this.detectors[4][3]=a;this.detectors[4][4]=new kh;this.detectors[4][5]=a;this.detectors[5][0]=a;this.detectors[5][1]=a;this.detectors[5][2]=a;this.detectors[5][3]=a;this.detectors[5][4]=
a;this.detectors[5][5]=a};g["oimo.collision.narrowphase.CollisionMatrix"]=Di;Di.__name__="oimo.collision.narrowphase.CollisionMatrix";Di.prototype={detectors:null,__class__:Di};var Fi=function(){this.numPoints=0;this.normal=new w;this.points=Array(ta.maxManifoldPoints);this.incremental=!1;for(var a=0,b=ta.maxManifoldPoints;a<b;){var c=a++;this.points[c]=new Ei}};g["oimo.collision.narrowphase.DetectorResult"]=Fi;Fi.__name__="oimo.collision.narrowphase.DetectorResult";Fi.prototype={numPoints:null,points:null,
normal:null,incremental:null,getMaxDepth:function(){for(var a=0,b=0,c=this.numPoints;b<c;){var d=b++;this.points[d].depth>a&&(a=this.points[d].depth)}return a},__class__:Fi};var Ei=function(){this.position1=new w;this.position2=new w;this.id=this.depth=0};g["oimo.collision.narrowphase.DetectorResultPoint"]=Ei;Ei.__name__="oimo.collision.narrowphase.DetectorResultPoint";Ei.prototype={position1:null,position2:null,depth:null,id:null,__class__:Ei};var hd=function(a){this.swapped=a};g["oimo.collision.narrowphase.detector.Detector"]=
hd;hd.__name__="oimo.collision.narrowphase.detector.Detector";hd.prototype={swapped:null,setNormal:function(a,b,c,d){var e=a.normal;e.x=b;e.y=c;e.z=d;this.swapped&&(a=a.normal,b=-a.y,c=-a.z,a.x=-a.x,a.y=b,a.z=c)},addPoint:function(a,b,c,d,e,f,k,m,h){a=a.points[a.numPoints++];a.depth=m;a.id=h;this.swapped?(m=a.position1,m.x=e,m.y=f,m.z=k,e=a.position2,e.x=b,e.y=c,e.z=d):(m=a.position1,m.x=b,m.y=c,m.z=d,b=a.position2,b.x=e,b.y=f,b.z=k)},detectImpl:function(a,b,c,d,e,f){},detect:function(a,b,c,d,e,f){for(var k=
a.numPoints=0,m=a.points;k<m.length;){var h=m[k];++k;h.position1.zero();h.position2.zero();h.depth=0;h.id=0}a.normal.zero();this.swapped?this.detectImpl(a,c,b,e,d,f):this.detectImpl(a,b,c,d,e,f)},__class__:hd};var jh=function(){this.swapped=!1;this.clipper=new Nj};g["oimo.collision.narrowphase.detector.BoxBoxDetector"]=jh;jh.__name__="oimo.collision.narrowphase.detector.BoxBoxDetector";jh.__super__=hd;jh.prototype=v(hd.prototype,{clipper:null,detectImpl:function(a,b,c,d,e,f){var k=b,m=c;a.incremental=
!1;var h=d._positionX;var n=d._positionY;var g=d._positionZ;var l=e._positionX;var p=e._positionY;var y=e._positionZ;var H=l-h;var C=p-n;var r=y-g;var I=d._rotation00;var q=d._rotation10;var t=d._rotation20;var z=d._rotation01;var u=d._rotation11;var oa=d._rotation21;var A=d._rotation02;var w=d._rotation12;var O=d._rotation22;var v=e._rotation00;var B=e._rotation10;var F=e._rotation20;var x=e._rotation01;var qa=e._rotation11;var M=e._rotation21;var Ia=e._rotation02;var Ca=e._rotation12;var ja=e._rotation22;
var D=k._halfExtentsX,J=k._halfExtentsY,ha=k._halfExtentsZ,N=m._halfExtentsX,W=m._halfExtentsY,S=m._halfExtentsZ;var ba=I*D;var L=q*D;var aa=t*D;var Y=z*J;var mb=u*J;var U=oa*J;var Q=A*ha;var V=w*ha;var Ja=O*ha;var ia=v*N;var fa=B*N;var ma=F*N;var Z=x*W;var Pa=qa*W;var R=M*W;var G=Ia*S;var T=Ca*S;var Ma=ja*S;var bc=Infinity,pa=-1,$a=0,Ta,X;var ec=X=Ta=0;var la=D,ra=I*ia+q*fa+t*ma,sa=I*Z+q*Pa+t*R,na=I*G+q*T+t*Ma;0>ra&&(ra=-ra);0>sa&&(sa=-sa);0>na&&(na=-na);var ea=ra+sa+na,da=I*H+q*C+t*r,ya=la+ea,yb=
0>da,Aa=yb?-da:da;if(Aa<ya){var ff=ya-Aa;ff<bc&&(bc=ff,pa=0,Ta=I,X=q,ec=t,$a=yb?-1:1);la=J;var qb=z*ia+u*fa+oa*ma,xa=z*Z+u*Pa+oa*R,ua=z*G+u*T+oa*Ma;0>qb&&(qb=-qb);0>xa&&(xa=-xa);0>ua&&(ua=-ua);ea=qb+xa+ua;da=z*H+u*C+oa*r;var Da=la+ea,ka=0>da,wa=ka?-da:da;if(wa<Da){var Ka=Da-wa;Ka<bc&&(bc=Ka,pa=1,Ta=z,X=u,ec=oa,$a=ka?-1:1);la=ha;var Ba=A*ia+w*fa+O*ma,Ga=A*Z+w*Pa+O*R,La=A*G+w*T+O*Ma;0>Ba&&(Ba=-Ba);0>Ga&&(Ga=-Ga);0>La&&(La=-La);ea=Ba+Ga+La;da=A*H+w*C+O*r;var Oa=la+ea,Na=0>da,va=Na?-da:da;if(va<Oa){var He=
Oa-va;He<bc&&(bc=He,pa=2,Ta=A,X=w,ec=O,$a=Na?-1:1);bc=bc>ta.linearSlop?bc-ta.linearSlop:0;var Vd=v*ba+B*L+F*aa,Fb=v*Y+B*mb+F*U,Ra=v*Q+B*V+F*Ja;0>Vd&&(Vd=-Vd);0>Fb&&(Fb=-Fb);0>Ra&&(Ra=-Ra);la=Vd+Fb+Ra;ea=N;da=v*H+B*C+F*r;var Qa=la+ea,Pb=0>da,ca=Pb?-da:da;if(ca<Qa){var Va=Qa-ca;Va<bc&&(bc=Va,pa=3,Ta=v,X=B,ec=F,$a=Pb?-1:1);var Fa=x*ba+qa*L+M*aa,Ha=x*Y+qa*mb+M*U,Sa=x*Q+qa*V+M*Ja;0>Fa&&(Fa=-Fa);0>Ha&&(Ha=-Ha);0>Sa&&(Sa=-Sa);la=Fa+Ha+Sa;ea=W;da=x*H+qa*C+M*r;var Za=la+ea,Ya=0>da,yc=Ya?-da:da;if(yc<Za){var Xa=
Za-yc;Xa<bc&&(bc=Xa,pa=4,Ta=x,X=qa,ec=M,$a=Ya?-1:1);var ad=Ia*ba+Ca*L+ja*aa,P=Ia*Y+Ca*mb+ja*U,Vb=Ia*Q+Ca*V+ja*Ja;0>ad&&(ad=-ad);0>P&&(P=-P);0>Vb&&(Vb=-Vb);la=ad+P+Vb;ea=S;da=Ia*H+Ca*C+ja*r;var ab=la+ea,ob=0>da,nb=ob?-da:da;if(nb<ab){var tb=ab-nb;tb<bc&&(bc=tb,pa=5,Ta=Ia,X=Ca,ec=ja,$a=ob?-1:1);bc=bc>ta.linearSlop?bc-ta.linearSlop:0;var E=q*F-t*B;var Ea=t*v-I*F;var za=I*B-q*v;if(0!=E||0!=Ea||0!=za){var Ib=E*E+Ea*Ea+za*za;0<Ib&&(Ib=1/Math.sqrt(Ib));E*=Ib;Ea*=Ib;za*=Ib;var bb=E*Y+Ea*mb+za*U,gc=E*Q+Ea*
V+za*Ja;0>bb&&(bb=-bb);0>gc&&(gc=-gc);la=bb+gc;var hb=E*Z+Ea*Pa+za*R,eb=E*G+Ea*T+za*Ma;0>hb&&(hb=-hb);0>eb&&(eb=-eb);ea=hb+eb;da=E*H+Ea*C+za*r;var Kb=la+ea,Ie=0>da,ib=Ie?-da:da;if(ib<Kb){var Hb=Kb-ib;Hb<bc&&(bc=Hb,pa=6,Ta=E,X=Ea,ec=za,$a=Ie?-1:1)}else return}E=q*M-t*qa;Ea=t*x-I*M;za=I*qa-q*x;if(0!=E||0!=Ea||0!=za){var hg=E*E+Ea*Ea+za*za;0<hg&&(hg=1/Math.sqrt(hg));E*=hg;Ea*=hg;za*=hg;var kb=E*Y+Ea*mb+za*U,Ua=E*Q+Ea*V+za*Ja;0>kb&&(kb=-kb);0>Ua&&(Ua=-Ua);la=kb+Ua;var Cb=E*ia+Ea*fa+za*ma,Jb=E*G+Ea*T+
za*Ma;0>Cb&&(Cb=-Cb);0>Jb&&(Jb=-Jb);ea=Cb+Jb;da=E*H+Ea*C+za*r;var Wa=la+ea,we=0>da,Cc=we?-da:da;if(Cc<Wa){var Eb=Wa-Cc;Eb<bc&&(bc=Eb,pa=7,Ta=E,X=Ea,ec=za,$a=we?-1:1)}else return}E=q*ja-t*Ca;Ea=t*Ia-I*ja;za=I*Ca-q*Ia;if(0!=E||0!=Ea||0!=za){var Db=E*E+Ea*Ea+za*za;0<Db&&(Db=1/Math.sqrt(Db));E*=Db;Ea*=Db;za*=Db;var Xb=E*Y+Ea*mb+za*U,pb=E*Q+Ea*V+za*Ja;0>Xb&&(Xb=-Xb);0>pb&&(pb=-pb);la=Xb+pb;var lb=E*ia+Ea*fa+za*ma,Ub=E*Z+Ea*Pa+za*R;0>lb&&(lb=-lb);0>Ub&&(Ub=-Ub);ea=lb+Ub;da=E*H+Ea*C+za*r;var Ob=la+ea,$b=
0>da,zb=$b?-da:da;if(zb<Ob){var db=Ob-zb;db<bc&&(bc=db,pa=8,Ta=E,X=Ea,ec=za,$a=$b?-1:1)}else return}E=u*F-oa*B;Ea=oa*v-z*F;za=z*B-u*v;if(0!=E||0!=Ea||0!=za){var cb=E*E+Ea*Ea+za*za;0<cb&&(cb=1/Math.sqrt(cb));E*=cb;Ea*=cb;za*=cb;var xb=E*ba+Ea*L+za*aa,jb=E*Q+Ea*V+za*Ja;0>xb&&(xb=-xb);0>jb&&(jb=-jb);la=xb+jb;var Gb=E*Z+Ea*Pa+za*R,Jd=E*G+Ea*T+za*Ma;0>Gb&&(Gb=-Gb);0>Jd&&(Jd=-Jd);ea=Gb+Jd;da=E*H+Ea*C+za*r;var Tb=la+ea,Wb=0>da,Mb=Wb?-da:da;if(Mb<Tb){var gb=Tb-Mb;gb<bc&&(bc=gb,pa=9,Ta=E,X=Ea,ec=za,$a=Wb?
-1:1)}else return}E=u*M-oa*qa;Ea=oa*x-z*M;za=z*qa-u*x;if(0!=E||0!=Ea||0!=za){var vb=E*E+Ea*Ea+za*za;0<vb&&(vb=1/Math.sqrt(vb));E*=vb;Ea*=vb;za*=vb;var wb=E*ba+Ea*L+za*aa,sb=E*Q+Ea*V+za*Ja;0>wb&&(wb=-wb);0>sb&&(sb=-sb);la=wb+sb;var fb=E*ia+Ea*fa+za*ma,Nb=E*G+Ea*T+za*Ma;0>fb&&(fb=-fb);0>Nb&&(Nb=-Nb);ea=fb+Nb;da=E*H+Ea*C+za*r;var ub=la+ea,ac=0>da,Qb=ac?-da:da;if(Qb<ub){var Rb=ub-Qb;Rb<bc&&(bc=Rb,pa=10,Ta=E,X=Ea,ec=za,$a=ac?-1:1)}else return}E=u*ja-oa*Ca;Ea=oa*Ia-z*ja;za=z*Ca-u*Ia;if(0!=E||0!=Ea||0!=
za){var rb=E*E+Ea*Ea+za*za;0<rb&&(rb=1/Math.sqrt(rb));E*=rb;Ea*=rb;za*=rb;var Ab=E*ba+Ea*L+za*aa,Lb=E*Q+Ea*V+za*Ja;0>Ab&&(Ab=-Ab);0>Lb&&(Lb=-Lb);la=Ab+Lb;var Zb=E*ia+Ea*fa+za*ma,cc=E*Z+Ea*Pa+za*R;0>Zb&&(Zb=-Zb);0>cc&&(cc=-cc);ea=Zb+cc;da=E*H+Ea*C+za*r;var lc=la+ea,uc=0>da,mc=uc?-da:da;if(mc<lc){var tc=lc-mc;tc<bc&&(bc=tc,pa=11,Ta=E,X=Ea,ec=za,$a=uc?-1:1)}else return}E=w*F-O*B;Ea=O*v-A*F;za=A*B-w*v;if(0!=E||0!=Ea||0!=za){var dc=E*E+Ea*Ea+za*za;0<dc&&(dc=1/Math.sqrt(dc));E*=dc;Ea*=dc;za*=dc;var kc=
E*ba+Ea*L+za*aa,nc=E*Y+Ea*mb+za*U;0>kc&&(kc=-kc);0>nc&&(nc=-nc);la=kc+nc;var hc=E*Z+Ea*Pa+za*R,ic=E*G+Ea*T+za*Ma;0>hc&&(hc=-hc);0>ic&&(ic=-ic);ea=hc+ic;da=E*H+Ea*C+za*r;var Sb=la+ea,sc=0>da,vc=sc?-da:da;if(vc<Sb){var Bc=Sb-vc;Bc<bc&&(bc=Bc,pa=12,Ta=E,X=Ea,ec=za,$a=sc?-1:1)}else return}E=w*M-O*qa;Ea=O*x-A*M;za=A*qa-w*x;if(0!=E||0!=Ea||0!=za){var jc=E*E+Ea*Ea+za*za;0<jc&&(jc=1/Math.sqrt(jc));E*=jc;Ea*=jc;za*=jc;var wc=E*ba+Ea*L+za*aa,fc=E*Y+Ea*mb+za*U;0>wc&&(wc=-wc);0>fc&&(fc=-fc);la=wc+fc;var zc=E*
ia+Ea*fa+za*ma,xc=E*G+Ea*T+za*Ma;0>zc&&(zc=-zc);0>xc&&(xc=-xc);ea=zc+xc;da=E*H+Ea*C+za*r;var Nc=la+ea,Cd=0>da,Pc=Cd?-da:da;if(Pc<Nc){var Qc=Nc-Pc;Qc<bc&&(bc=Qc,pa=13,Ta=E,X=Ea,ec=za,$a=Cd?-1:1)}else return}E=w*ja-O*Ca;Ea=O*Ia-A*ja;za=A*Ca-w*Ia;if(0!=E||0!=Ea||0!=za){var qc=E*E+Ea*Ea+za*za;0<qc&&(qc=1/Math.sqrt(qc));E*=qc;Ea*=qc;za*=qc;var rc=E*ba+Ea*L+za*aa,Ac=E*Y+Ea*mb+za*U;0>rc&&(rc=-rc);0>Ac&&(Ac=-Ac);la=rc+Ac;var Fc=E*ia+Ea*fa+za*ma,Mc=E*Z+Ea*Pa+za*R;0>Fc&&(Fc=-Fc);0>Mc&&(Mc=-Mc);ea=Fc+Mc;da=
E*H+Ea*C+za*r;var Hc=la+ea,je=0>da,sd=je?-da:da;if(sd<Hc){var ud=Hc-sd;ud<bc&&(bc=ud,pa=14,Ta=E,X=Ea,ec=za,$a=je?-1:1)}else return}if(6<=pa){Ta*=$a;X*=$a;ec*=$a;var vd=(pa-6)/3|0,pd=pa-6-3*vd;switch(vd){case 0:var Vc=I;var Yc=q;var Zc=t;var md=0<Q*Ta+V*X+Ja*ec;if(0<Y*Ta+mb*X+U*ec)if(md){var Ic=Y+Q;var Jc=mb+V;var Kc=U+Ja}else Ic=Y-Q,Jc=mb-V,Kc=U-Ja;else md?(Ic=Q-Y,Jc=V-mb,Kc=Ja-U):(Ic=Y+Q,Jc=mb+V,Kc=U+Ja,Ic=-Ic,Jc=-Jc,Kc=-Kc);break;case 1:Vc=z;Yc=u;Zc=oa;var nd=0<Q*Ta+V*X+Ja*ec;0<ba*Ta+L*X+aa*ec?
nd?(Ic=ba+Q,Jc=L+V,Kc=aa+Ja):(Ic=ba-Q,Jc=L-V,Kc=aa-Ja):nd?(Ic=Q-ba,Jc=V-L,Kc=Ja-aa):(Ic=ba+Q,Jc=L+V,Kc=aa+Ja,Ic=-Ic,Jc=-Jc,Kc=-Kc);break;default:Vc=A;Yc=w;Zc=O;var od=0<Y*Ta+mb*X+U*ec;0<ba*Ta+L*X+aa*ec?od?(Ic=ba+Y,Jc=L+mb,Kc=aa+U):(Ic=ba-Y,Jc=L-mb,Kc=aa-U):od?(Ic=Y-ba,Jc=mb-L,Kc=U-aa):(Ic=ba+Y,Jc=L+mb,Kc=aa+U,Ic=-Ic,Jc=-Jc,Kc=-Kc)}Ic=h+Ic;Jc=n+Jc;Kc=g+Kc;switch(pd){case 0:var Rc=v;var Tc=B;var Xc=F;var gd=0<G*Ta+T*X+Ma*ec;if(0<Z*Ta+Pa*X+R*ec)if(gd){var Dc=Z+G;var Gc=Pa+T;var Ec=R+Ma}else Dc=Z-G,Gc=
Pa-T,Ec=R-Ma;else gd?(Dc=G-Z,Gc=T-Pa,Ec=Ma-R):(Dc=Z+G,Gc=Pa+T,Ec=R+Ma,Dc=-Dc,Gc=-Gc,Ec=-Ec);break;case 1:Rc=x;Tc=qa;Xc=M;var jd=0<G*Ta+T*X+Ma*ec;0<ia*Ta+fa*X+ma*ec?jd?(Dc=ia+G,Gc=fa+T,Ec=ma+Ma):(Dc=ia-G,Gc=fa-T,Ec=ma-Ma):jd?(Dc=G-ia,Gc=T-fa,Ec=Ma-ma):(Dc=ia+G,Gc=fa+T,Ec=ma+Ma,Dc=-Dc,Gc=-Gc,Ec=-Ec);break;default:Rc=Ia;Tc=Ca;Xc=ja;var kd=0<Z*Ta+Pa*X+R*ec;0<ia*Ta+fa*X+ma*ec?kd?(Dc=ia+Z,Gc=fa+Pa,Ec=ma+R):(Dc=ia-Z,Gc=fa-Pa,Ec=ma-R):kd?(Dc=Z-ia,Gc=Pa-fa,Ec=R-ma):(Dc=ia+Z,Gc=fa+Pa,Ec=ma+R,Dc=-Dc,Gc=-Gc,
Ec=-Ec)}Dc=l-Dc;Gc=p-Gc;Ec=y-Ec;var wd=Ic-Dc;var yd=Jc-Gc;var oc=Kc-Ec;var pc=Vc*Rc+Yc*Tc+Zc*Xc,Bd=Vc*wd+Yc*yd+Zc*oc,Dd=Rc*wd+Tc*yd+Xc*oc,Ed=1/(1-pc*pc),ed=(pc*Dd-Bd)*Ed,fd=(Dd-pc*Bd)*Ed;var Pd=Ic+Vc*ed;var Td=Jc+Yc*ed;var Uc=Kc+Zc*ed;var bd=Dc+Rc*fd;var Kd=Gc+Tc*fd;var dd=Ec+Xc*fd;this.setNormal(a,-Ta,-X,-ec);this.addPoint(a,Pd,Td,Uc,bd,Kd,dd,bc,4)}else{if(3<=pa){$a=-$a;H=-H;C=-C;r=-r;var hd=k;k=m;m=hd;var Ad=D;D=N;N=Ad;var Id=J;J=W;W=Id;var $d=ha;ha=S;S=$d;var xe=h;var ye=n;var se=g;h=l;n=p;g=y;
l=xe;p=ye;y=se;xe=I;ye=q;se=t;I=v;q=B;t=F;v=xe;B=ye;F=se;xe=z;ye=u;se=oa;z=x;u=qa;oa=M;x=xe;qa=ye;M=se;xe=A;ye=w;se=O;A=Ia;w=Ca;O=ja;Ia=xe;Ca=ye;ja=se;xe=ba;ye=L;se=aa;ba=ia;L=fa;aa=ma;ia=xe;fa=ye;ma=se;xe=Y;ye=mb;se=U;Y=Z;mb=Pa;U=R;Z=xe;Pa=ye;R=se;xe=Q;ye=V;se=Ja;Q=G;V=T;Ja=Ma;G=xe;T=ye;Ma=se;pa-=3;var Ud=!0}else Ud=!1;switch(pa){case 0:var ld=ba;var mj=L;var xd=aa;var Df=I;var Oc=q;var lh=t;var Lc=z;var cd=u;var Sc=oa;var Wc=A;var $c=w;var Sd=O;var Wd=J;var td=ha;break;case 1:ld=Y;mj=mb;xd=U;Df=
z;Oc=u;lh=oa;Lc=A;cd=w;Sc=O;Wc=I;$c=q;Sd=t;Wd=ha;td=D;break;default:ld=Q,mj=V,xd=Ja,Df=A,Oc=w,lh=O,Lc=I,cd=q,Sc=t,Wc=z,$c=u,Sd=oa,Wd=D,td=J}if(0>$a){ld=-ld;mj=-mj;xd=-xd;Df=-Df;Oc=-Oc;lh=-lh;xe=Lc;ye=cd;se=Sc;Lc=Wc;cd=$c;Sc=Sd;Wc=xe;$c=ye;Sd=se;var Ld=Wd;Wd=td;td=Ld}ld+=h;mj+=n;xd+=g;var ie=1,Md=0,ue=Df*v+Oc*B+lh*F;ue<ie&&(ie=ue,Md=0);-ue<ie&&(ie=-ue,Md=1);ue=Df*x+Oc*qa+lh*M;ue<ie&&(ie=ue,Md=2);-ue<ie&&(ie=-ue,Md=3);ue=Df*Ia+Oc*Ca+lh*ja;ue<ie&&(ie=ue,Md=4);-ue<ie&&(ie=-ue,Md=5);switch(Md){case 0:var oe=
ia+Z;var Ae=fa+Pa;var Be=ma+R;oe+=G;Ae+=T;Be+=Ma;var pe=ia-Z;var be=fa-Pa;var qe=ma-R;pe+=G;be+=T;qe+=Ma;var qd=ia-Z;var rd=fa-Pa;var id=ma-R;qd-=G;rd-=T;id-=Ma;var Xd=ia+Z;var Yd=fa+Pa;var ce=ma+R;Xd-=G;Yd-=T;ce-=Ma;break;case 1:oe=Z-ia;Ae=Pa-fa;Be=R-ma;oe+=G;Ae+=T;Be+=Ma;pe=Z-ia;be=Pa-fa;qe=R-ma;pe-=G;be-=T;qe-=Ma;qd=ia+Z;rd=fa+Pa;id=ma+R;qd=-qd;rd=-rd;id=-id;qd-=G;rd-=T;id-=Ma;Xd=ia+Z;Yd=fa+Pa;ce=ma+R;Xd=-Xd;Yd=-Yd;ce=-ce;Xd+=G;Yd+=T;ce+=Ma;break;case 2:oe=ia+Z;Ae=fa+Pa;Be=ma+R;oe+=G;Ae+=T;Be+=
Ma;pe=ia+Z;be=fa+Pa;qe=ma+R;pe-=G;be-=T;qe-=Ma;qd=Z-ia;rd=Pa-fa;id=R-ma;qd-=G;rd-=T;id-=Ma;Xd=Z-ia;Yd=Pa-fa;ce=R-ma;Xd+=G;Yd+=T;ce+=Ma;break;case 3:oe=ia-Z;Ae=fa-Pa;Be=ma-R;oe+=G;Ae+=T;Be+=Ma;pe=ia+Z;be=fa+Pa;qe=ma+R;pe=-pe;be=-be;qe=-qe;pe+=G;be+=T;qe+=Ma;qd=ia+Z;rd=fa+Pa;id=ma+R;qd=-qd;rd=-rd;id=-id;qd-=G;rd-=T;id-=Ma;Xd=ia-Z;Yd=fa-Pa;ce=ma-R;Xd-=G;Yd-=T;ce-=Ma;break;case 4:oe=ia+Z;Ae=fa+Pa;Be=ma+R;oe+=G;Ae+=T;Be+=Ma;pe=Z-ia;be=Pa-fa;qe=R-ma;pe+=G;be+=T;qe+=Ma;qd=ia+Z;rd=fa+Pa;id=ma+R;qd=-qd;rd=
-rd;id=-id;qd+=G;rd+=T;id+=Ma;Xd=ia-Z;Yd=fa-Pa;ce=ma-R;Xd+=G;Yd+=T;ce+=Ma;break;default:oe=ia+Z,Ae=fa+Pa,Be=ma+R,oe-=G,Ae-=T,Be-=Ma,pe=ia-Z,be=fa-Pa,qe=ma-R,pe-=G,be-=T,qe-=Ma,qd=ia+Z,rd=fa+Pa,id=ma+R,qd=-qd,rd=-rd,id=-id,qd-=G,rd-=T,id-=Ma,Xd=Z-ia,Yd=Pa-fa,ce=R-ma,Xd-=G,Yd-=T,ce-=Ma}oe+=H;Ae+=C;Be+=r;pe+=H;be+=C;qe+=r;qd+=H;rd+=C;id+=r;Xd+=H;Yd+=C;ce+=r;var ae=this.clipper;ae.w=Wd;ae.h=td;ae.numVertices=0;ae.numTmpVertices=0;var he=this.clipper,Fd=he.vertices[he.numVertices++];Fd.x=oe*Lc+Ae*cd+Be*
Sc;Fd.y=oe*Wc+Ae*$c+Be*Sd;Fd.wx=oe;Fd.wy=Ae;Fd.wz=Be;var ne=this.clipper,Gd=ne.vertices[ne.numVertices++];Gd.x=pe*Lc+be*cd+qe*Sc;Gd.y=pe*Wc+be*$c+qe*Sd;Gd.wx=pe;Gd.wy=be;Gd.wz=qe;var de=this.clipper,Hd=de.vertices[de.numVertices++];Hd.x=qd*Lc+rd*cd+id*Sc;Hd.y=qd*Wc+rd*$c+id*Sd;Hd.wx=qd;Hd.wy=rd;Hd.wz=id;var ee=this.clipper,Zd=ee.vertices[ee.numVertices++];Zd.x=Xd*Lc+Yd*cd+ce*Sc;Zd.y=Xd*Wc+Yd*$c+ce*Sd;Zd.wx=Xd;Zd.wy=Yd;Zd.wz=ce;this.clipper.clip();this.clipper.reduce();if(Ud){var fe=Df;var Je=Oc;var Ff=
lh}else fe=-Df,Je=-Oc,Ff=-lh;this.setNormal(a,fe,Je,Ff);for(var ke=0,te=this.clipper.numVertices;ke<te;){var le=ke++,me=this.clipper.vertices[le];var Nd=me.wx;var Od=me.wy;var Qd=me.wz;Nd+=h;Od+=n;Qd+=g;var Rd=(ld-Nd)*Df+(mj-Od)*Oc+(xd-Qd)*lh;var Ce=Nd+Df*Rd;var De=Od+Oc*Rd;var Fe=Qd+lh*Rd;Rd>-ta.contactPersistenceThreshold&&(Ud?this.addPoint(a,Nd,Od,Qd,Ce,De,Fe,Rd,le):this.addPoint(a,Ce,De,Fe,Nd,Od,Qd,Rd,le))}}}}}}}}},__class__:jh});var qc=function(){this.wz=this.wy=this.wx=this.y=this.x=0};g["oimo.collision.narrowphase.detector._BoxBoxDetector.IncidentVertex"]=
qc;qc.__name__="oimo.collision.narrowphase.detector._BoxBoxDetector.IncidentVertex";qc.prototype={x:null,y:null,wx:null,wy:null,wz:null,__class__:qc};var Nj=function(){this.numTmpVertices=this.numVertices=this.h=this.w=0;this.vertices=Array(8);this.tmpVertices=Array(8);this.vertices[0]=new qc;this.tmpVertices[0]=new qc;this.vertices[1]=new qc;this.tmpVertices[1]=new qc;this.vertices[2]=new qc;this.tmpVertices[2]=new qc;this.vertices[3]=new qc;this.tmpVertices[3]=new qc;this.vertices[4]=new qc;this.tmpVertices[4]=
new qc;this.vertices[5]=new qc;this.tmpVertices[5]=new qc;this.vertices[6]=new qc;this.tmpVertices[6]=new qc;this.vertices[7]=new qc;this.tmpVertices[7]=new qc};g["oimo.collision.narrowphase.detector._BoxBoxDetector.FaceClipper"]=Nj;Nj.__name__="oimo.collision.narrowphase.detector._BoxBoxDetector.FaceClipper";Nj.prototype={w:null,h:null,numVertices:null,vertices:null,numTmpVertices:null,tmpVertices:null,clip:function(){for(var a=0,b=this.numVertices;a<b;){var c=a++,d=this.vertices[c];c=this.vertices[(c+
1)%this.numVertices];var e=this.w+d.x,f=this.w+c.x;if(0<e&&0<f)c=this.tmpVertices[this.numTmpVertices++],c.x=d.x,c.y=d.y,c.wx=d.wx,c.wy=d.wy,c.wz=d.wz;else if(0<e&&0>=f){var k=this.tmpVertices[this.numTmpVertices++];k.x=d.x;k.y=d.y;k.wx=d.wx;k.wy=d.wy;k.wz=d.wz;e/=e-f;f=this.tmpVertices[this.numTmpVertices++];f.x=d.x+(c.x-d.x)*e;f.y=d.y+(c.y-d.y)*e;f.wx=d.wx+(c.wx-d.wx)*e;f.wy=d.wy+(c.wy-d.wy)*e;f.wz=d.wz+(c.wz-d.wz)*e}else 0>=e&&0<f&&(e/=e-f,f=this.tmpVertices[this.numTmpVertices++],f.x=d.x+(c.x-
d.x)*e,f.y=d.y+(c.y-d.y)*e,f.wx=d.wx+(c.wx-d.wx)*e,f.wy=d.wy+(c.wy-d.wy)*e,f.wz=d.wz+(c.wz-d.wz)*e)}a=this.vertices;this.vertices=this.tmpVertices;this.tmpVertices=a;this.numVertices=this.numTmpVertices;a=this.numTmpVertices=0;for(b=this.numVertices;a<b;)c=a++,d=this.vertices[c],c=this.vertices[(c+1)%this.numVertices],e=this.w-d.x,f=this.w-c.x,0<e&&0<f?(c=this.tmpVertices[this.numTmpVertices++],c.x=d.x,c.y=d.y,c.wx=d.wx,c.wy=d.wy,c.wz=d.wz):0<e&&0>=f?(k=this.tmpVertices[this.numTmpVertices++],k.x=
d.x,k.y=d.y,k.wx=d.wx,k.wy=d.wy,k.wz=d.wz,e/=e-f,f=this.tmpVertices[this.numTmpVertices++],f.x=d.x+(c.x-d.x)*e,f.y=d.y+(c.y-d.y)*e,f.wx=d.wx+(c.wx-d.wx)*e,f.wy=d.wy+(c.wy-d.wy)*e,f.wz=d.wz+(c.wz-d.wz)*e):0>=e&&0<f&&(e/=e-f,f=this.tmpVertices[this.numTmpVertices++],f.x=d.x+(c.x-d.x)*e,f.y=d.y+(c.y-d.y)*e,f.wx=d.wx+(c.wx-d.wx)*e,f.wy=d.wy+(c.wy-d.wy)*e,f.wz=d.wz+(c.wz-d.wz)*e);a=this.vertices;this.vertices=this.tmpVertices;this.tmpVertices=a;this.numVertices=this.numTmpVertices;a=this.numTmpVertices=
0;for(b=this.numVertices;a<b;)c=a++,d=this.vertices[c],c=this.vertices[(c+1)%this.numVertices],e=this.h+d.y,f=this.h+c.y,0<e&&0<f?(c=this.tmpVertices[this.numTmpVertices++],c.x=d.x,c.y=d.y,c.wx=d.wx,c.wy=d.wy,c.wz=d.wz):0<e&&0>=f?(k=this.tmpVertices[this.numTmpVertices++],k.x=d.x,k.y=d.y,k.wx=d.wx,k.wy=d.wy,k.wz=d.wz,e/=e-f,f=this.tmpVertices[this.numTmpVertices++],f.x=d.x+(c.x-d.x)*e,f.y=d.y+(c.y-d.y)*e,f.wx=d.wx+(c.wx-d.wx)*e,f.wy=d.wy+(c.wy-d.wy)*e,f.wz=d.wz+(c.wz-d.wz)*e):0>=e&&0<f&&(e/=e-f,f=
this.tmpVertices[this.numTmpVertices++],f.x=d.x+(c.x-d.x)*e,f.y=d.y+(c.y-d.y)*e,f.wx=d.wx+(c.wx-d.wx)*e,f.wy=d.wy+(c.wy-d.wy)*e,f.wz=d.wz+(c.wz-d.wz)*e);a=this.vertices;this.vertices=this.tmpVertices;this.tmpVertices=a;this.numVertices=this.numTmpVertices;a=this.numTmpVertices=0;for(b=this.numVertices;a<b;)c=a++,d=this.vertices[c],c=this.vertices[(c+1)%this.numVertices],e=this.h-d.y,f=this.h-c.y,0<e&&0<f?(c=this.tmpVertices[this.numTmpVertices++],c.x=d.x,c.y=d.y,c.wx=d.wx,c.wy=d.wy,c.wz=d.wz):0<e&&
0>=f?(k=this.tmpVertices[this.numTmpVertices++],k.x=d.x,k.y=d.y,k.wx=d.wx,k.wy=d.wy,k.wz=d.wz,e/=e-f,f=this.tmpVertices[this.numTmpVertices++],f.x=d.x+(c.x-d.x)*e,f.y=d.y+(c.y-d.y)*e,f.wx=d.wx+(c.wx-d.wx)*e,f.wy=d.wy+(c.wy-d.wy)*e,f.wz=d.wz+(c.wz-d.wz)*e):0>=e&&0<f&&(e/=e-f,f=this.tmpVertices[this.numTmpVertices++],f.x=d.x+(c.x-d.x)*e,f.y=d.y+(c.y-d.y)*e,f.wx=d.wx+(c.wx-d.wx)*e,f.wy=d.wy+(c.wy-d.wy)*e,f.wz=d.wz+(c.wz-d.wz)*e);a=this.vertices;this.vertices=this.tmpVertices;this.tmpVertices=a;this.numVertices=
this.numTmpVertices;this.numTmpVertices=0},reduce:function(){if(!(4>this.numVertices)){for(var a=-Infinity,b=Infinity,c=-Infinity,d=Infinity,e=null,f=null,k=null,m=null,h=0,n=this.numVertices;h<n;){var g=h++;g=this.vertices[g];var l=1*g.x+1*g.y,p=-1*g.x+1*g.y;l>a&&(a=l,e=g);l<b&&(b=l,f=g);p>c&&(c=p,k=g);p<d&&(d=p,m=g)}a=this.tmpVertices[this.numTmpVertices++];a.x=e.x;a.y=e.y;a.wx=e.wx;a.wy=e.wy;a.wz=e.wz;e=this.tmpVertices[this.numTmpVertices++];e.x=k.x;e.y=k.y;e.wx=k.wx;e.wy=k.wy;e.wz=k.wz;k=this.tmpVertices[this.numTmpVertices++];
k.x=f.x;k.y=f.y;k.wx=f.wx;k.wy=f.wy;k.wz=f.wz;f=this.tmpVertices[this.numTmpVertices++];f.x=m.x;f.y=m.y;f.wx=m.wx;f.wy=m.wy;f.wz=m.wz;m=this.vertices;this.vertices=this.tmpVertices;this.tmpVertices=m;this.numVertices=this.numTmpVertices;this.numTmpVertices=0}},__class__:Nj};var Oj=function(){};g["oimo.collision.narrowphase.detector.CachedDetectorData"]=Oj;Oj.__name__="oimo.collision.narrowphase.detector.CachedDetectorData";Oj.prototype={_gjkCache:null,_clear:function(){null!=this._gjkCache&&this._gjkCache.clear()},
__class__:Oj};var kh=function(){this.swapped=!1};g["oimo.collision.narrowphase.detector.CapsuleCapsuleDetector"]=kh;kh.__name__="oimo.collision.narrowphase.detector.CapsuleCapsuleDetector";kh.__super__=hd;kh.prototype=v(hd.prototype,{detectImpl:function(a,b,c,d,e,f){a.incremental=!1;var k=d._rotation01;var m=d._rotation11;var h=d._rotation21;var n=e._rotation01;var g=e._rotation11;var l=e._rotation21;var p=b._halfHeight,y=c._halfHeight;b=b._radius;c=c._radius;var H=d._positionX+k*-p;var C=d._positionY+
m*-p;f=d._positionZ+h*-p;k=d._positionX+k*p;var r=d._positionY+m*p;var I=d._positionZ+h*p;m=e._positionX+n*-y;h=e._positionY+g*-y;d=e._positionZ+l*-y;n=e._positionX+n*y;g=e._positionY+g*y;var q=e._positionZ+l*y;var t=H-m;var z=C-h;var u=f-d;e=k-H;k=r-C;r=I-f;l=n-m;I=g-h;n=q-d;g=-(t*e+z*k+u*r);t=t*l+z*I+u*n;z=p*p*4;u=e*l+k*I+r*n;q=y*y*4;0==z&&0==q?y=p=0:0==z?(p=0,y=t,y=0>y?0:y>q?1:y/q):0==q?(y=0,p=g,p=0>p?0:p>z?1:p/z):(y=z*q-u*u,0==y?p=0:(p=u*t+q*g,p=0>p?0:p>y?1:p/y),y=p*u+t,0>y?(y=0,p=g,p=0>p?0:p>
z?1:p/z):y>q?(y=1,p=u+g,p=0>p?0:p>z?1:p/z):y/=q);H+=e*p;C+=k*p;f+=r*p;m+=l*y;h+=I*y;d+=n*y;k=H-m;e=C-h;y=f-d;p=k*k+e*e+y*y;p>=(b+c)*(b+c)||(p=Math.sqrt(p),0<p?(k*=1/p,e*=1/p,y*=1/p):(k=1,y=e=0),this.setNormal(a,k,e,y),this.addPoint(a,H+k*-b,C+e*-b,f+y*-b,m+k*c,h+e*c,d+y*c,b+c-p,0))},__class__:kh});var Lj=function(){this.swapped=!1};g["oimo.collision.narrowphase.detector.GjkEpaDetector"]=Lj;Lj.__name__="oimo.collision.narrowphase.detector.GjkEpaDetector";Lj.__super__=hd;Lj.prototype=v(hd.prototype,
{detectImpl:function(a,b,c,d,e,f){var k=mh.instance;d=k.computeClosestPointsImpl(b,c,d,e,ta.enableGJKCaching?f:null,!0);a.incremental=!0;if(d!=Pe.SUCCEEDED)console.log("Source/oimo/collision/narrowphase/detector/GjkEpaDetector.hx:28:","GJK/EPA failed: status="+d);else if(!(k.distance>b._gjkMargin+c._gjkMargin)){f=k.closestPoint1;d=f.x;e=f.y;f=f.z;var m=k.closestPoint2;var h=m.x;var n=m.y;m=m.z;var g=d-h;var l=e-n;var p=f-m;if(0!=g*g+l*l+p*p){0>k.distance&&(g=-g,l=-l,p=-p);var y=g*g+l*l+p*p;0<y&&(y=
1/Math.sqrt(y));g*=y;l*=y;p*=y;this.setNormal(a,g,l,p);d+=g*-b._gjkMargin;e+=l*-b._gjkMargin;f+=p*-b._gjkMargin;h+=g*c._gjkMargin;n+=l*c._gjkMargin;m+=p*c._gjkMargin;this.addPoint(a,d,e,f,h,n,m,b._gjkMargin+c._gjkMargin-k.distance,0)}}},__class__:Lj});var wg=function(a){this.swapped=a};g["oimo.collision.narrowphase.detector.SphereBoxDetector"]=wg;wg.__name__="oimo.collision.narrowphase.detector.SphereBoxDetector";wg.__super__=hd;wg.prototype=v(hd.prototype,{detectImpl:function(a,b,c,d,e,f){a.incremental=
!1;var k=c._halfExtentsX;var m=c._halfExtentsY;c=c._halfExtentsZ;var h=-k;var n=-m;var g=-c;b=b._radius;var l=d._positionX-e._positionX;var p=d._positionY-e._positionY;var y=d._positionZ-e._positionZ;var H=e._rotation00*l+e._rotation10*p+e._rotation20*y;f=e._rotation01*l+e._rotation11*p+e._rotation21*y;l=e._rotation02*l+e._rotation12*p+e._rotation22*y;if(h<H&&k>H&&n<f&&m>f&&g<l&&c>l){g=k-(0>H?-H:H);n=m-(0>f?-f:f);h=c-(0>l?-l:l);p=g;var C=n,r=h,I;if(p<C)if(p<r){h=0<H?1:-1;var q=g=n=0;y=I=1}else 0<
l?(n=h=0,g=1):(n=h=0,g=-1),I=q=1,y=0,p=r;else C<r?(0<f?(h=0,n=1):(h=0,n=-1),g=0,q=1,I=0,y=1,p=C):(0<l?(n=h=0,g=1):(n=h=0,g=-1),I=q=1,y=0,p=r);H=h*k+q*H;m=n*m+I*f;l=g*c+y*l;c=e._rotation00*H+e._rotation01*m+e._rotation02*l;f=e._rotation10*H+e._rotation11*m+e._rotation12*l;m=e._rotation20*H+e._rotation21*m+e._rotation22*l;H=e._rotation00*h+e._rotation01*n+e._rotation02*g;l=e._rotation10*h+e._rotation11*n+e._rotation12*g;k=e._rotation20*h+e._rotation21*n+e._rotation22*g;this.setNormal(a,H,l,k);H=d._positionX+
H*-b;l=d._positionY+l*-b;this.addPoint(a,H,l,d._positionZ+k*-b,e._positionX+c,e._positionY+f,e._positionZ+m,p,0)}else k-=1E-9,m-=1E-9,c-=1E-9,h+=1E-9,n+=1E-9,g+=1E-9,k=H<k?H:k,p=f<m?f:m,y=l<c?l:c,k=k>h?k:h,p=p>n?p:n,y=y>g?y:g,H-=k,h=f-p,n=l-y,c=H*H+h*h+n*n,c>=b*b||(c=Math.sqrt(c),f=e._rotation00*k+e._rotation01*p+e._rotation02*y,m=e._rotation10*k+e._rotation11*p+e._rotation12*y,l=e._rotation20*k+e._rotation21*p+e._rotation22*y,g=e._rotation00*H+e._rotation01*h+e._rotation02*n,k=e._rotation10*H+e._rotation11*
h+e._rotation12*n,H=e._rotation20*H+e._rotation21*h+e._rotation22*n,n=g*g+k*k+H*H,0<n&&(n=1/Math.sqrt(n)),h=g*n,k*=n,H*=n,this.setNormal(a,h,k,H),h=d._positionX+h*-b,k=d._positionY+k*-b,this.addPoint(a,h,k,d._positionZ+H*-b,e._positionX+f,e._positionY+m,e._positionZ+l,b-c,0))},__class__:wg});var Ze=function(a){this.swapped=a};g["oimo.collision.narrowphase.detector.SphereCapsuleDetector"]=Ze;Ze.__name__="oimo.collision.narrowphase.detector.SphereCapsuleDetector";Ze.__super__=hd;Ze.prototype=v(hd.prototype,
{detectImpl:function(a,b,c,d,e,f){a.incremental=!1;var k=c._halfHeight;b=b._radius;c=c._radius;var m=e._rotation01;var h=e._rotation11;var n=e._rotation21;f=d._positionX;var g=d._positionY;d=d._positionZ;var l=e._positionX+m*-k;var p=e._positionY+h*-k;var y=e._positionZ+n*-k;m=e._positionX+m*k;h=e._positionY+h*k;var H=e._positionZ+n*k;e=m-l;n=h-p;h=H-y;k=k*k*4;m=(f-l)*e+(g-p)*n+(d-y)*h;m=0>m?0:m>k?1:m/k;k=l+e*m;p+=n*m;y+=h*m;h=f-k;n=g-p;l=d-y;e=h*h+n*n+l*l;e>=(b+c)*(b+c)||(e=Math.sqrt(e),0<e?(h*=
1/e,n*=1/e,l*=1/e):(h=1,l=n=0),this.setNormal(a,h,n,l),this.addPoint(a,f+h*-b,g+n*-b,d+l*-b,k+h*c,p+n*c,y+l*c,b+c-e,0))},__class__:Ze});var Mj=function(){this.swapped=!1};g["oimo.collision.narrowphase.detector.SphereSphereDetector"]=Mj;Mj.__name__="oimo.collision.narrowphase.detector.SphereSphereDetector";Mj.__super__=hd;Mj.prototype=v(hd.prototype,{detectImpl:function(a,b,c,d,e,f){a.incremental=!1;var k=d._positionX-e._positionX;var m=d._positionY-e._positionY;f=d._positionZ-e._positionZ;b=b._radius;
c=c._radius;var h=k*k+m*m+f*f;if(!(h>=(b+c)*(b+c))){h=Math.sqrt(h);0<h?(k*=1/h,m*=1/h,f*=1/h):(k=1,f=m=0);this.setNormal(a,k,m,f);var n=d._positionX+k*-b;var g=d._positionY+m*-b;this.addPoint(a,n,g,d._positionZ+f*-b,e._positionX+k*c,e._positionY+m*c,e._positionZ+f*c,b+c-h,0)}},__class__:Mj});var Pj=function(){this._vertices=Array(ta.maxEPAVertices);this._center=new w;this._numVertices=0;this._triangleListLast=this._triangleList=null;this._numTriangles=0;this._vertexPool=this._trianglePool=null};g["oimo.collision.narrowphase.detector.gjkepa.EpaPolyhedron"]=
Pj;Pj.__name__="oimo.collision.narrowphase.detector.gjkepa.EpaPolyhedron";Pj.prototype={_vertices:null,_numVertices:null,_triangleList:null,_triangleListLast:null,_numTriangles:null,_trianglePool:null,_vertexPool:null,_center:null,_status:null,validate:function(){for(var a=this._triangleList;null!=a;){var b=a._next;a._vertices[0]._tmpEdgeLoopOuterTriangle=null;a._vertices[0]._tmpEdgeLoopNext=null;if(-1==a._adjacentPairIndex[0])return this._status=2,!1;if(null==a._adjacentTriangles[0])return this._status=
3,!1;a._vertices[1]._tmpEdgeLoopOuterTriangle=null;a._vertices[1]._tmpEdgeLoopNext=null;if(-1==a._adjacentPairIndex[1])return this._status=2,!1;if(null==a._adjacentTriangles[1])return this._status=3,!1;a._vertices[2]._tmpEdgeLoopOuterTriangle=null;a._vertices[2]._tmpEdgeLoopNext=null;if(-1==a._adjacentPairIndex[2])return this._status=2,!1;if(null==a._adjacentTriangles[2])return this._status=3,!1;a=b}return!0},findEdgeLoop:function(a,b,c){if(b._tmpDfsId!=a){b._tmpDfsId=a;var d=b.tmp;d.x=c.x;d.y=c.y;
d.z=c.z;var e=b._vertices[0].v,f=d.y-e.y,k=d.z-e.z;d.x-=e.x;d.y=f;d.z=k;d=b.tmp;e=b._normal;b._tmpDfsVisible=0<d.x*e.x+d.y*e.y+d.z*e.z;if(b._tmpDfsVisible){for(d=0;3>d;)if(e=d++,f=b._adjacentTriangles[e],null!=f){k=f.tmp;k.x=c.x;k.y=c.y;k.z=c.z;var m=f._vertices[0].v,h=k.y-m.y,n=k.z-m.z;k.x-=m.x;k.y=h;k.z=n;k=f.tmp;m=f._normal;f._tmpDfsVisible=0<k.x*m.x+k.y*m.y+k.z*m.z;f._tmpDfsVisible?this.findEdgeLoop(a,f,c):(k=b._vertices[e],k._tmpEdgeLoopNext=b._vertices[b._nextIndex[e]],k._tmpEdgeLoopOuterTriangle=
f)}a=b._adjacentTriangles[0];null!=a&&(c=b._adjacentPairIndex[0],a._adjacentTriangles[c]=null,a._adjacentPairIndex[c]=-1,b._adjacentTriangles[0]=null,b._adjacentPairIndex[0]=-1);a=b._adjacentTriangles[1];null!=a&&(c=b._adjacentPairIndex[1],a._adjacentTriangles[c]=null,a._adjacentPairIndex[c]=-1,b._adjacentTriangles[1]=null,b._adjacentPairIndex[1]=-1);a=b._adjacentTriangles[2];null!=a&&(c=b._adjacentPairIndex[2],a._adjacentTriangles[c]=null,a._adjacentPairIndex[c]=-1,b._adjacentTriangles[2]=null,b._adjacentPairIndex[2]=
-1);this._numTriangles--;a=b._prev;c=b._next;null!=a&&(a._next=c);null!=c&&(c._prev=a);b==this._triangleList&&(this._triangleList=this._triangleList._next);b==this._triangleListLast&&(this._triangleListLast=this._triangleListLast._prev);b._next=null;b._prev=null;b.removeReferences();b._next=this._trianglePool;this._trianglePool=b}else this._status=6}},_init:function(a,b,c,d){this._status=0;this._numVertices=4;this._vertices[0]=a;this._vertices[1]=b;this._vertices[2]=c;this._vertices[3]=d;var e=this._center,
f=a.v;e.x=f.x;e.y=f.y;e.z=f.z;f=b.v;var k=e.y+f.y,m=e.z+f.z;e.x+=f.x;e.y=k;e.z=m;f=c.v;k=e.y+f.y;m=e.z+f.z;e.x+=f.x;e.y=k;e.z=m;f=d.v;k=e.y+f.y;m=e.z+f.z;e.x+=f.x;e.y=k;e.z=m;f=.25*e.y;k=.25*e.z;e.x*=.25;e.y=f;e.z=k;e=this._trianglePool;null!=e?(this._trianglePool=e._next,e._next=null):e=new vf;f=this._trianglePool;null!=f?(this._trianglePool=f._next,f._next=null):f=new vf;k=this._trianglePool;null!=k?(this._trianglePool=k._next,k._next=null):k=new vf;m=this._trianglePool;null!=m?(this._trianglePool=
m._next,m._next=null):m=new vf;var h=!0;null==h&&(h=!1);e.init(a,b,c,this._center,h)||(this._status=1);h=!0;null==h&&(h=!1);f.init(a,b,d,this._center,h)||(this._status=1);h=!0;null==h&&(h=!1);k.init(a,c,d,this._center,h)||(this._status=1);a=!0;null==a&&(a=!1);m.init(b,c,d,this._center,a)||(this._status=1);e.setAdjacentTriangle(f)||(this._status=1);e.setAdjacentTriangle(k)||(this._status=1);e.setAdjacentTriangle(m)||(this._status=1);f.setAdjacentTriangle(k)||(this._status=1);f.setAdjacentTriangle(m)||
(this._status=1);k.setAdjacentTriangle(m)||(this._status=1);this._numTriangles++;null==this._triangleList?this._triangleList=e:(this._triangleListLast._next=e,e._prev=this._triangleListLast);this._triangleListLast=e;this._numTriangles++;null==this._triangleList?this._triangleList=f:(this._triangleListLast._next=f,f._prev=this._triangleListLast);this._triangleListLast=f;this._numTriangles++;null==this._triangleList?this._triangleList=k:(this._triangleListLast._next=k,k._prev=this._triangleListLast);
this._triangleListLast=k;this._numTriangles++;null==this._triangleList?this._triangleList=m:(this._triangleListLast._next=m,m._prev=this._triangleListLast);this._triangleListLast=m;return 0==this._status},_addVertex:function(a,b){this._vertices[this._numVertices++]=a;var c=b._vertices[0];this.findEdgeLoop(this._numVertices,b,a.v);if(0!=this._status)return!1;b=c;for(var d=null,e=null;;){if(null==b._tmpEdgeLoopNext)return this._dumpAsObjModel(),this._status=4,!1;if(null==b._tmpEdgeLoopOuterTriangle)return this._status=
5,!1;var f=this._trianglePool;null!=f?(this._trianglePool=f._next,f._next=null):f=new vf;null==e&&(e=f);f.init(b,b._tmpEdgeLoopNext,a,this._center,!1)||(this._status=1);if(0!=this._status)return!1;this._numTriangles++;null==this._triangleList?this._triangleList=f:(this._triangleListLast._next=f,f._prev=this._triangleListLast);this._triangleListLast=f;f.setAdjacentTriangle(b._tmpEdgeLoopOuterTriangle)||(this._status=1);null==d||f.setAdjacentTriangle(d)||(this._status=1);d=f;b=b._tmpEdgeLoopNext;if(b==
c)break}d.setAdjacentTriangle(e)||(this._status=1);return 0==this._status?this.validate():!1},_dumpAsObjModel:function(){},__class__:Pj};var vf=function(){this._prev=this._next=null;this._normal=new w;this._tmpDfsId=this._distanceSq=0;this._tmpDfsVisible=!1;this._vertices=Array(3);this._adjacentTriangles=Array(3);this._adjacentPairIndex=Array(3);this.tmp=new w;this._nextIndex=Array(3);this._nextIndex[0]=1;this._nextIndex[1]=2;this._nextIndex[2]=0};g["oimo.collision.narrowphase.detector.gjkepa.EpaTriangle"]=
vf;vf.__name__="oimo.collision.narrowphase.detector.gjkepa.EpaTriangle";vf.prototype={_next:null,_prev:null,_vertices:null,_adjacentTriangles:null,_adjacentPairIndex:null,_normal:null,_distanceSq:null,_nextIndex:null,_tmpDfsId:null,_tmpDfsVisible:null,tmp:null,init:function(a,b,c,d,e){null==e&&(e=!1);var f=a.v;var k=f.x;var m=f.y;var h=f.z;var n=b.v;var g=n.x;var l=n.y;var p=n.z;var y=c.v;var H=y.x;var C=y.y;var r=y.z;var I=d.x;var q=d.y;var t=d.z;var z=g-k;var u=l-m;var A=p-h;var w=H-k;var O=C-m;
var v=r-h;var B=k-I;var F=m-q;var x=h-t;var qa=u*v-A*O;var M=A*w-z*v;var Ia=z*O-u*w;var Ca=!1;if(0>B*qa+F*M+x*Ia)if(e){var ja=b;b=c;c=ja;qa*=-1;M*=-1;Ia*=-1}else Ca=!0;this._vertices[0]=a;this._vertices[1]=b;this._vertices[2]=c;var D=this._normal;D.x=qa;D.y=M;D.z=Ia;var J=a.v,ba=b.v,ha=c.v,L=this.tmp;var N=J.x;var W=J.y;var aa=J.z;var Y=ba.x;var mb=ba.y;var S=ba.z;var ia=ha.x;var fa=ha.y;var Q=ha.z;var U=Y-N;var ma=mb-W;var Z=S-aa;var Pa=ia-Y;var V=fa-mb;var R=Q-S;var Ja=N-ia;var T=W-fa;var G=aa-
Q;var Ma=ma*R-Z*V;var Ta=Z*Pa-U*R;var X=U*V-ma*Pa;var pa=ma*X-Z*Ta;var $a=Z*Ma-U*X;var la=U*Ta-ma*Ma;var ea=V*X-R*Ta;var ec=R*Ma-Pa*X;var ta=N*pa+W*$a+aa*la,ra=Y*ea+mb*ec+S*(Pa*Ta-V*Ma),sa=ia*(T*X-G*Ta)+fa*(G*Ma-Ja*X)+Q*(Ja*Ta-T*Ma),na=-1,qb,da;var ya=da=qb=0;if(0>ta){var yb=J.x;var Aa=J.y;var ff=J.z;var xa=ba.x;var ua=ba.y;var Da=ba.z;var ka=xa-yb;var wa=ua-Aa;var Ka=Da-ff;var Ba=ka*yb+wa*Aa+Ka*ff;Ba=-Ba/(ka*ka+wa*wa+Ka*Ka);if(0>Ba)L.x=yb,L.y=Aa,L.z=ff;else if(1<Ba)L.x=xa,L.y=ua,L.z=Da;else{var Ga=
yb+ka*Ba;var La=Aa+wa*Ba;var Oa=ff+Ka*Ba;L.x=Ga;L.y=La;L.z=Oa}na=L.x*L.x+L.y*L.y+L.z*L.z;qb=L.x;da=L.y;ya=L.z}if(0>ra){var Fb=ba.x;var Na=ba.y;var Ra=ba.z;var He=ha.x;var Vd=ha.y;var va=ha.z;var Qa=He-Fb;var Fa=Vd-Na;var Pb=va-Ra;var ca=Qa*Fb+Fa*Na+Pb*Ra;ca=-ca/(Qa*Qa+Fa*Fa+Pb*Pb);if(0>ca)L.x=Fb,L.y=Na,L.z=Ra;else if(1<ca)L.x=He,L.y=Vd,L.z=va;else{var Ha=Fb+Qa*ca;var Va=Na+Fa*ca;var Sa=Ra+Pb*ca;L.x=Ha;L.y=Va;L.z=Sa}var Za=L.x*L.x+L.y*L.y+L.z*L.z;if(0>na||Za<na)na=Za,qb=L.x,da=L.y,ya=L.z}if(0>sa){var Ya=
J.x;var Xa=J.y;var yc=J.z;var ab=ha.x;var ad=ha.y;var P=ha.z;var Vb=ab-Ya;var ob=ad-Xa;var hb=P-yc;var eb=Vb*Ya+ob*Xa+hb*yc;eb=-eb/(Vb*Vb+ob*ob+hb*hb);if(0>eb)L.x=Ya,L.y=Xa,L.z=yc;else if(1<eb)L.x=ab,L.y=ad,L.z=P;else{var nb=Ya+Vb*eb;var E=Xa+ob*eb;var Ea=yc+hb*eb;L.x=nb;L.y=E;L.z=Ea}var za=L.x*L.x+L.y*L.y+L.z*L.z;if(0>na||za<na)na=za,qb=L.x,da=L.y,ya=L.z}if(!(0<na)){var Ib=Ma*Ma+Ta*Ta+X*X;0<Ib&&(Ib=1/Math.sqrt(Ib));Ma*=Ib;Ta*=Ib;X*=Ib;var bb=Ma*Ma+Ta*Ta+X*X;bb=(N*Ma+W*Ta+aa*X)/bb;qb=Ma*bb;da=Ta*
bb;ya=X*bb}L.x=qb;L.y=da;L.z=ya;var gc=this.tmp;this._distanceSq=gc.x*gc.x+gc.y*gc.y+gc.z*gc.z;this._adjacentTriangles[0]=null;this._adjacentTriangles[1]=null;this._adjacentTriangles[2]=null;this._adjacentPairIndex[0]=-1;this._adjacentPairIndex[1]=-1;this._adjacentPairIndex[2]=-1;return!Ca},setAdjacentTriangle:function(a){var b=0,c=this._nextIndex[0];this._vertices[0]==a._vertices[this._nextIndex[0]]&&this._vertices[c]==a._vertices[0]&&(this._adjacentTriangles[0]=a,this._adjacentPairIndex[0]=0,a._adjacentTriangles[0]=
this,a._adjacentPairIndex[0]=0,++b);c=this._nextIndex[0];this._vertices[0]==a._vertices[this._nextIndex[1]]&&this._vertices[c]==a._vertices[1]&&(this._adjacentTriangles[0]=a,this._adjacentPairIndex[0]=1,a._adjacentTriangles[1]=this,a._adjacentPairIndex[1]=0,++b);c=this._nextIndex[0];this._vertices[0]==a._vertices[this._nextIndex[2]]&&this._vertices[c]==a._vertices[2]&&(this._adjacentTriangles[0]=a,this._adjacentPairIndex[0]=2,a._adjacentTriangles[2]=this,a._adjacentPairIndex[2]=0,++b);c=this._nextIndex[1];
this._vertices[1]==a._vertices[this._nextIndex[0]]&&this._vertices[c]==a._vertices[0]&&(this._adjacentTriangles[1]=a,this._adjacentPairIndex[1]=0,a._adjacentTriangles[0]=this,a._adjacentPairIndex[0]=1,++b);c=this._nextIndex[1];this._vertices[1]==a._vertices[this._nextIndex[1]]&&this._vertices[c]==a._vertices[1]&&(this._adjacentTriangles[1]=a,this._adjacentPairIndex[1]=1,a._adjacentTriangles[1]=this,a._adjacentPairIndex[1]=1,++b);c=this._nextIndex[1];this._vertices[1]==a._vertices[this._nextIndex[2]]&&
this._vertices[c]==a._vertices[2]&&(this._adjacentTriangles[1]=a,this._adjacentPairIndex[1]=2,a._adjacentTriangles[2]=this,a._adjacentPairIndex[2]=1,++b);c=this._nextIndex[2];this._vertices[2]==a._vertices[this._nextIndex[0]]&&this._vertices[c]==a._vertices[0]&&(this._adjacentTriangles[2]=a,this._adjacentPairIndex[2]=0,a._adjacentTriangles[0]=this,a._adjacentPairIndex[0]=2,++b);c=this._nextIndex[2];this._vertices[2]==a._vertices[this._nextIndex[1]]&&this._vertices[c]==a._vertices[1]&&(this._adjacentTriangles[2]=
a,this._adjacentPairIndex[2]=1,a._adjacentTriangles[1]=this,a._adjacentPairIndex[1]=2,++b);c=this._nextIndex[2];this._vertices[2]==a._vertices[this._nextIndex[2]]&&this._vertices[c]==a._vertices[2]&&(this._adjacentTriangles[2]=a,this._adjacentPairIndex[2]=2,a._adjacentTriangles[2]=this,a._adjacentPairIndex[2]=2,++b);return 1!=b?!1:!0},removeReferences:function(){this._prev=this._next=null;this._tmpDfsId=0;this._tmpDfsVisible=!1;this._distanceSq=0;this._vertices[0]=null;this._vertices[1]=null;this._vertices[2]=
null;this._adjacentTriangles[0]=null;this._adjacentTriangles[1]=null;this._adjacentTriangles[2]=null;this._adjacentPairIndex[0]=0;this._adjacentPairIndex[1]=0;this._adjacentPairIndex[2]=0},__class__:vf};var xg=function(){this.v=new w;this.w1=new w;this.w2=new w};g["oimo.collision.narrowphase.detector.gjkepa.EpaVertex"]=xg;xg.__name__="oimo.collision.narrowphase.detector.gjkepa.EpaVertex";xg.prototype={_next:null,v:null,w1:null,w2:null,_tmpEdgeLoopNext:null,_tmpEdgeLoopOuterTriangle:null,init:function(a,
b,c){var d=this.v;d.x=a.x;d.y=a.y;d.z=a.z;a=this.w1;a.x=b.x;a.y=b.y;a.z=b.z;b=this.w2;b.x=c.x;b.y=c.y;b.z=c.z;this._tmpEdgeLoopOuterTriangle=this._tmpEdgeLoopNext=this._next=null;return this},removeReferences:function(){this._tmpEdgeLoopOuterTriangle=this._tmpEdgeLoopNext=this._next=null},__class__:xg};var Jl=function(){this.prevClosestDir=new w};g["oimo.collision.narrowphase.detector.gjkepa.GjkCache"]=Jl;Jl.__name__="oimo.collision.narrowphase.detector.gjkepa.GjkCache";Jl.prototype={prevClosestDir:null,
clear:function(){this.prevClosestDir.zero()},__class__:Jl};var Ld=function(){this._positionZ=this._positionY=this._positionX=0;this._rotation00=1;this._rotation10=this._rotation02=this._rotation01=0;this._rotation11=1;this._rotation21=this._rotation20=this._rotation12=0;this._rotation22=1};g["oimo.common.Transform"]=Ld;Ld.__name__="oimo.common.Transform";Ld.prototype={_positionX:null,_positionY:null,_positionZ:null,_rotation00:null,_rotation01:null,_rotation02:null,_rotation10:null,_rotation11:null,
_rotation12:null,_rotation20:null,_rotation21:null,_rotation22:null,__class__:Ld};var ta=function(){};g["oimo.common.Setting"]=ta;ta.__name__="oimo.common.Setting";var mh=function(){this.s=Array(4);this.w1=Array(4);this.w2=Array(4);this.baseDirs=Array(3);this.baseDirs[0]=new w(1,0,0);this.baseDirs[1]=new w(0,1,0);this.baseDirs[2]=new w(0,0,1);this.tl1=new w;this.tl2=new w;this.rayX=new w;this.rayR=new w;this.tempTransform=new Ld;this.s[0]=new w;this.w1[0]=new w;this.w2[0]=new w;this.s[1]=new w;this.w1[1]=
new w;this.w2[1]=new w;this.s[2]=new w;this.w1[2]=new w;this.w2[2]=new w;this.s[3]=new w;this.w1[3]=new w;this.w2[3]=new w;this.dir=new w;this.closest=new w;this.closestPoint1=new w;this.closestPoint2=new w;this.polyhedron=new Pj};g["oimo.collision.narrowphase.detector.gjkepa.GjkEpa"]=mh;mh.__name__="oimo.collision.narrowphase.detector.gjkepa.GjkEpa";mh.prototype={c1:null,c2:null,tf1:null,tf2:null,s:null,simplexSize:null,w1:null,w2:null,tempTransform:null,dir:null,closest:null,baseDirs:null,tl1:null,
tl2:null,rayX:null,rayR:null,depth:null,polyhedron:null,closestPoint1:null,closestPoint2:null,distance:null,computeClosestPointsImpl:function(a,b,c,d,e,f){this.c1=a;this.c2=b;this.tf1=c;this.tf2=d;var k=this.s,m=this.w1,h=this.w2,n=this.closest,g=this.dir;null!=e?(null==e._gjkCache&&(e._gjkCache=new Jl),this.loadCache(e._gjkCache)):g.zero();if(0==g.x*g.x+g.y*g.y+g.z*g.z){var l=d._positionX-c._positionX;var p=d._positionY-c._positionY;var y=d._positionZ-c._positionZ;g.x=l;g.y=p;g.z=y;1E-6>g.x*g.x+
g.y*g.y+g.z*g.z&&g.init(1,0,0)}this.simplexSize=0;this.computeWitnessPoint1(!1);this.computeWitnessPoint2(!1);var H=this.s[this.simplexSize],C=this.w1[this.simplexSize];H.x=C.x;H.y=C.y;H.z=C.z;var r=this.w2[this.simplexSize],I=H.y-r.y,q=H.z-r.z;H.x-=r.x;H.y=I;H.z=q;this.simplexSize=1;for(var t=0;40>t;){var z=0;switch(this.simplexSize){case 1:var u=k[0];n.x=u.x;n.y=u.y;n.z=u.z;z=1;break;case 2:var A=k[0];var w=A.x;var O=A.y;var v=A.z;var B=k[1];var F=B.x;var x=B.y;var qa=B.z;var M=F-w;var L=x-O;var Ia=
qa-v;var Ca=M*w+L*O+Ia*v;Ca=-Ca/(M*M+L*L+Ia*Ia);if(0>Ca){var ja=n;ja.x=w;ja.y=O;ja.z=v;z=1}else if(1<Ca){var D=n;D.x=F;D.y=x;D.z=qa;z=2}else{var J=w+M*Ca;var ba=O+L*Ca;var ha=v+Ia*Ca;var N=n;N.x=J;N.y=ba;N.z=ha;z=3}break;case 3:var W=k[0],aa=k[1],Y=k[2],mb=W;var U=mb.x;var S=mb.y;var ia=mb.z;var Q=aa;var fa=Q.x;var ma=Q.y;var Z=Q.z;var Pa=Y;var Ma=Pa.x;var V=Pa.y;var R=Pa.z;var Ja=fa-U;var G=ma-S;var T=Z-ia;var Ta=Ma-fa;var X=V-ma;var pa=R-Z;var $a=U-Ma;var la=S-V;var ea=ia-R;var na=G*pa-T*X;var ta=
T*Ta-Ja*pa;var ra=Ja*X-G*Ta;var sa=G*ra-T*ta;var qb=T*na-Ja*ra;var ya=Ja*ta-G*na;var da=X*ra-pa*ta;var xa=pa*na-Ta*ra;var yb=U*sa+S*qb+ia*ya,Aa=fa*da+ma*xa+Z*(Ta*ta-X*na),ff=Ma*(la*ra-ea*ta)+V*(ea*na-$a*ra)+R*($a*ta-la*na),ua=-1,Ba,ka,Da=0;var wa=ka=Ba=0;if(0>yb){var Ka=W;var Ga=Ka.x;var La=Ka.y;var Oa=Ka.z;var Fb=aa;var Na=Fb.x;var Ra=Fb.y;var va=Fb.z;var He=Na-Ga;var Vd=Ra-La;var Qa=va-Oa;var Fa=He*Ga+Vd*La+Qa*Oa;Fa=-Fa/(He*He+Vd*Vd+Qa*Qa);if(0>Fa){var Pb=n;Pb.x=Ga;Pb.y=La;Pb.z=Oa;var Ha=1}else if(1<
Fa){var ca=n;ca.x=Na;ca.y=Ra;ca.z=va;Ha=2}else{var Va=Ga+He*Fa;var Sa=La+Vd*Fa;var Ya=Oa+Qa*Fa;var Xa=n;Xa.x=Va;Xa.y=Sa;Xa.z=Ya;Ha=3}var Za=n.x*n.x+n.y*n.y+n.z*n.z;Da=Ha;ua=Za;var eb=n;Ba=eb.x;ka=eb.y;wa=eb.z}if(0>Aa){var yc=aa;var ab=yc.x;var ad=yc.y;var P=yc.z;var Vb=Y;var ob=Vb.x;var hb=Vb.y;var nb=Vb.z;var tb=ob-ab;var E=hb-ad;var Ea=nb-P;var za=tb*ab+E*ad+Ea*P;za=-za/(tb*tb+E*E+Ea*Ea);if(0>za){var Ib=n;Ib.x=ab;Ib.y=ad;Ib.z=P;var bb=1}else if(1<za){var gc=n;gc.x=ob;gc.y=hb;gc.z=nb;bb=2}else{var kb=
ab+tb*za;var Xb=ad+E*za;var pb=P+Ea*za;var Ie=n;Ie.x=kb;Ie.y=Xb;Ie.z=pb;bb=3}var lb=n.x*n.x+n.y*n.y+n.z*n.z;if(0>ua||lb<ua){Da=bb<<1;ua=lb;var Hb=n;Ba=Hb.x;ka=Hb.y;wa=Hb.z}}if(0>ff){var hg=W;var Kb=hg.x;var Ua=hg.y;var Cb=hg.z;var Jb=Y;var Wa=Jb.x;var we=Jb.y;var Cc=Jb.z;var Eb=Wa-Kb;var Db=we-Ua;var ib=Cc-Cb;var cb=Eb*Kb+Db*Ua+ib*Cb;cb=-cb/(Eb*Eb+Db*Db+ib*ib);if(0>cb){var Ub=n;Ub.x=Kb;Ub.y=Ua;Ub.z=Cb;var xb=1}else if(1<cb){var jb=n;jb.x=Wa;jb.y=we;jb.z=Cc;xb=2}else{var Ob=Kb+Eb*cb;var $b=Ua+Db*cb;
var Gb=Cb+ib*cb;var zb=n;zb.x=Ob;zb.y=$b;zb.z=Gb;xb=3}var db=n.x*n.x+n.y*n.y+n.z*n.z;if(0>ua||db<ua){Da=xb&1|(xb&2)<<1;ua=db;var vb=n;Ba=vb.x;ka=vb.y;wa=vb.z}}if(0<ua){var Mb=n;Mb.x=Ba;Mb.y=ka;Mb.z=wa;z=Da}else{var rb=na*na+ta*ta+ra*ra;0<rb&&(rb=1/Math.sqrt(rb));na*=rb;ta*=rb;ra*=rb;var Tb=na*na+ta*ta+ra*ra;Tb=(U*na+S*ta+ia*ra)/Tb;Ba=na*Tb;ka=ta*Tb;wa=ra*Tb;var Wb=n;Wb.x=Ba;Wb.y=ka;Wb.z=wa;z=7}break;case 4:var wb=k[0],sb=k[1],fb=k[2],gb=k[3],Nb=wb;var Ab=Nb.x;var Lb=Nb.y;var ub=Nb.z;var ac=sb;var Qb=
ac.x;var Rb=ac.y;var Zb=ac.z;var cc=fb;var dc=cc.x;var kc=cc.y;var lc=cc.z;var uc=gb;var mc=uc.x;var nc=uc.y;var tc=uc.z;var hc=Qb-Ab;var ic=Rb-Lb;var jc=Zb-ub;var Sb=dc-Ab;var qc=kc-Lb;var sc=lc-ub;var vc=mc-Ab;var wc=nc-Lb;var fc=tc-ub;var zc=dc-Qb;var xc=kc-Rb;var Bc=lc-Zb;var rc=mc-Qb;var Ac=nc-Rb;var Fc=tc-Zb;var Mc=ic*sc-jc*qc;var Nc=jc*Sb-hc*sc;var Cd=hc*qc-ic*Sb;var Oc=qc*fc-sc*wc;var Pc=sc*vc-Sb*fc;var Qc=Sb*wc-qc*vc;var Vc=wc*jc-fc*ic;var Yc=fc*hc-vc*jc;var Zc=vc*ic-wc*hc;var Rc=Ac*Bc-Fc*
xc;var Tc=Fc*zc-rc*Bc;var Xc=rc*xc-Ac*zc;var Hc=0<hc*Rc+ic*Tc+jc*Xc?1:-1,je=Ab*Mc+Lb*Nc+ub*Cd,sd=Ab*Oc+Lb*Pc+ub*Qc,ud=Ab*Vc+Lb*Yc+ub*Zc,vd=Qb*Rc+Rb*Tc+Zb*Xc,pc=-1,Ic,Jc,Kc=0;var Lc=Jc=Ic=0;if(0>je*Hc){var cd=wb;var Sc=cd.x;var Wc=cd.y;var $c=cd.z;var Sd=sb;var Dc=Sd.x;var Gc=Sd.y;var Ec=Sd.z;var md=fb;var nd=md.x;var od=md.y;var pd=md.z;var ed=Dc-Sc;var fd=Gc-Wc;var gd=Ec-$c;var jd=nd-Dc;var kd=od-Gc;var ld=pd-Ec;var wd=Sc-nd;var xd=Wc-od;var yd=$c-pd;var oc=fd*ld-gd*kd;var bd=gd*jd-ed*ld;var Kd=
ed*kd-fd*jd;var Bd=fd*Kd-gd*bd;var Dd=gd*oc-ed*Kd;var Ed=ed*bd-fd*oc;var Md=kd*Kd-ld*bd;var Pd=ld*oc-jd*Kd;var Td=Sc*Bd+Wc*Dd+$c*Ed,Ud=Dc*Md+Gc*Pd+Ec*(jd*bd-kd*oc),Wd=nd*(xd*Kd-yd*bd)+od*(yd*oc-wd*Kd)+pd*(wd*bd-xd*oc),Uc=-1,dd,hd,Ad=0;var td=hd=dd=0;if(0>Td){var Id=wb;var Fd=Id.x;var Gd=Id.y;var Hd=Id.z;var Rd=sb;var Zd=Rd.x;var $d=Rd.y;var ae=Rd.z;var Nd=Zd-Fd;var Od=$d-Gd;var Qd=ae-Hd;var ie=Nd*Fd+Od*Gd+Qd*Hd;ie=-ie/(Nd*Nd+Od*Od+Qd*Qd);if(0>ie){var he=n;he.x=Fd;he.y=Gd;he.z=Hd;var ue=1}else if(1<
ie){var oe=n;oe.x=Zd;oe.y=$d;oe.z=ae;ue=2}else{var Ae=Fd+Nd*ie;var Be=Gd+Od*ie;var pe=Hd+Qd*ie;var be=n;be.x=Ae;be.y=Be;be.z=pe;ue=3}var qe=n.x*n.x+n.y*n.y+n.z*n.z;Ad=ue;Uc=qe;var qd=n;dd=qd.x;hd=qd.y;td=qd.z}if(0>Ud){var rd=sb;var id=rd.x;var Xd=rd.y;var Yd=rd.z;var ce=fb;var le=ce.x;var me=ce.y;var ne=ce.z;var de=le-id;var ee=me-Xd;var fe=ne-Yd;var Ld=de*id+ee*Xd+fe*Yd;Ld=-Ld/(de*de+ee*ee+fe*fe);if(0>Ld){var Je=n;Je.x=id;Je.y=Xd;Je.z=Yd;var Ff=1}else if(1<Ld){var ke=n;ke.x=le;ke.y=me;ke.z=ne;Ff=
2}else{var Ce=id+de*Ld;var De=Xd+ee*Ld;var Fe=Yd+fe*Ld;var te=n;te.x=Ce;te.y=De;te.z=Fe;Ff=3}var cf=n.x*n.x+n.y*n.y+n.z*n.z;if(0>Uc||cf<Uc){Ad=Ff<<1;Uc=cf;var Th=n;dd=Th.x;hd=Th.y;td=Th.z}}if(0>Wd){var We=wb;var Ke=We.x;var Le=We.y;var Me=We.z;var Ye=fb;var kf=Ye.x;var lf=Ye.y;var pf=Ye.z;var Pe=kf-Ke;var Qe=lf-Le;var Re=pf-Me;var re=Pe*Ke+Qe*Le+Re*Me;re=-re/(Pe*Pe+Qe*Qe+Re*Re);if(0>re){var df=n;df.x=Ke;df.y=Le;df.z=Me;var Te=1}else if(1<re){var ef=n;ef.x=kf;ef.y=lf;ef.z=pf;Te=2}else{var jg=Ke+Pe*
re;var kg=Le+Qe*re;var lg=Me+Re*re;var gf=n;gf.x=jg;gf.y=kg;gf.z=lg;Te=3}var If=n.x*n.x+n.y*n.y+n.z*n.z;if(0>Uc||If<Uc){Ad=Te&1|(Te&2)<<1;Uc=If;var hf=n;dd=hf.x;hd=hf.y;td=hf.z}}if(0<Uc){var jf=n;jf.x=dd;jf.y=hd;jf.z=td;var Nf=Ad}else{var ze=oc*oc+bd*bd+Kd*Kd;0<ze&&(ze=1/Math.sqrt(ze));oc*=ze;bd*=ze;Kd*=ze;var Ne=oc*oc+bd*bd+Kd*Kd;Ne=(Sc*oc+Wc*bd+$c*Kd)/Ne;dd=oc*Ne;hd=bd*Ne;td=Kd*Ne;var of=n;of.x=dd;of.y=hd;of.z=td;Nf=7}var sg=n.x*n.x+n.y*n.y+n.z*n.z;Kc=Nf;pc=sg;var sf=n;Ic=sf.x;Jc=sf.y;Lc=sf.z}if(0>
sd*Hc){var tf=wb;var $e=tf.x;var af=tf.y;var bf=tf.z;var wf=fb;var xf=wf.x;var yf=wf.y;var zf=wf.z;var Bf=gb;var Ef=Bf.x;var Gf=Bf.y;var Lf=Bf.z;var mf=xf-$e;var nf=yf-af;var qf=zf-bf;var rf=Ef-xf;var uf=Gf-yf;var vf=Lf-zf;var xg=$e-Ef;var zg=af-Gf;var Ag=bf-Lf;var Rf=nf*vf-qf*uf;var Sf=qf*rf-mf*vf;var Tf=mf*uf-nf*rf;var rh=nf*Tf-qf*Sf;var sh=qf*Rf-mf*Tf;var xh=mf*Sf-nf*Rf;var zh=uf*Tf-vf*Sf;var Ah=vf*Rf-rf*Tf;var Bh=$e*rh+af*sh+bf*xh,Eh=xf*zh+yf*Ah+zf*(rf*Sf-uf*Rf),Hh=Ef*(zg*Tf-Ag*Sf)+Gf*(Ag*Rf-
xg*Tf)+Lf*(xg*Sf-zg*Rf),ve=-1,Ee,Ge,Cf=0;var Xe=Ge=Ee=0;if(0>Bh){var mg=wb;var Hf=mg.x;var Jf=mg.y;var Kf=mg.z;var ng=fb;var Xg=ng.x;var $g=ng.y;var bh=ng.z;var Of=Xg-Hf;var Pf=$g-Jf;var Qf=bh-Kf;var Oe=Of*Hf+Pf*Jf+Qf*Kf;Oe=-Oe/(Of*Of+Pf*Pf+Qf*Qf);if(0>Oe){var rg=n;rg.x=Hf;rg.y=Jf;rg.z=Kf;var vg=1}else if(1<Oe){var yg=n;yg.x=Xg;yg.y=$g;yg.z=bh;vg=2}else{var Si=Hf+Of*Oe;var Ti=Jf+Pf*Oe;var Wi=Kf+Qf*Oe;var Cg=n;Cg.x=Si;Cg.y=Ti;Cg.z=Wi;vg=3}var Yi=n.x*n.x+n.y*n.y+n.z*n.z;Cf=vg;ve=Yi;var Dg=n;Ee=Dg.x;
Ge=Dg.y;Xe=Dg.z}if(0>Eh){var Eg=fb;var $f=Eg.x;var ag=Eg.y;var bg=Eg.z;var Fg=gb;var Fh=Fg.x;var Lh=Fg.y;var Nh=Fg.z;var dg=Fh-$f;var eg=Lh-ag;var fg=Nh-bg;var Se=dg*$f+eg*ag+fg*bg;Se=-Se/(dg*dg+eg*eg+fg*fg);if(0>Se){var Hg=n;Hg.x=$f;Hg.y=ag;Hg.z=bg;var Ig=1}else if(1<Se){var Kg=n;Kg.x=Fh;Kg.y=Lh;Kg.z=Nh;Ig=2}else{var sj=$f+dg*Se;var tj=ag+eg*Se;var uj=bg+fg*Se;var Ng=n;Ng.x=sj;Ng.y=tj;Ng.z=uj;Ig=3}var gi=n.x*n.x+n.y*n.y+n.z*n.z;if(0>ve||gi<ve){Cf=Ig<<1;ve=gi;var Ug=n;Ee=Ug.x;Ge=Ug.y;Xe=Ug.z}}if(0>
Hh){var ah=wb;var og=ah.x;var pg=ah.y;var qg=ah.z;var fh=gb;var qi=fh.x;var xi=fh.y;var zi=fh.z;var tg=qi-og;var ug=xi-pg;var wg=zi-qg;var Ze=tg*og+ug*pg+wg*qg;Ze=-Ze/(tg*tg+ug*ug+wg*wg);if(0>Ze){var mh=n;mh.x=og;mh.y=pg;mh.z=qg;var Bg=1}else if(1<Ze){var vh=n;vh.x=qi;vh.y=xi;vh.z=zi;Bg=2}else{var ak=og+tg*Ze;var ck=pg+ug*Ze;var gk=qg+wg*Ze;var Dh=n;Dh.x=ak;Dh.y=ck;Dh.z=gk;Bg=3}var aj=n.x*n.x+n.y*n.y+n.z*n.z;if(0>ve||aj<ve){Cf=Bg&1|(Bg&2)<<1;ve=aj;var Gh=n;Ee=Gh.x;Ge=Gh.y;Xe=Gh.z}}if(0<ve){var Mh=
n;Mh.x=Ee;Mh.y=Ge;Mh.z=Xe;var Oh=Cf}else{var Af=Rf*Rf+Sf*Sf+Tf*Tf;0<Af&&(Af=1/Math.sqrt(Af));Rf*=Af;Sf*=Af;Tf*=Af;var gg=Rf*Rf+Sf*Sf+Tf*Tf;gg=($e*Rf+af*Sf+bf*Tf)/gg;Ee=Rf*gg;Ge=Sf*gg;Xe=Tf*gg;var Ph=n;Ph.x=Ee;Ph.y=Ge;Ph.z=Xe;Oh=7}var nj=n.x*n.x+n.y*n.y+n.z*n.z;if(0>pc||nj<pc){Kc=Oh&1|(Oh&6)<<1;pc=nj;var Qh=n;Ic=Qh.x;Jc=Qh.y;Lc=Qh.z}}if(0>ud*Hc){var Rh=wb;var Jg=Rh.x;var Lg=Rh.y;var Mg=Rh.z;var Vh=sb;var $h=Vh.x;var ai=Vh.y;var bi=Vh.z;var ci=gb;var di=ci.x;var ei=ci.y;var fi=ci.z;var Og=$h-Jg;var Pg=
ai-Lg;var Qg=bi-Mg;var Rg=di-$h;var Sg=ei-ai;var Tg=fi-bi;var vj=Jg-di;var wj=Lg-ei;var xj=Mg-fi;var Uf=Pg*Tg-Qg*Sg;var Vf=Qg*Rg-Og*Tg;var Wf=Og*Sg-Pg*Rg;var sk=Pg*Wf-Qg*Vf;var tk=Qg*Uf-Og*Wf;var uk=Og*Vf-Pg*Uf;var vk=Sg*Wf-Tg*Vf;var wk=Tg*Uf-Rg*Wf;var xk=Jg*sk+Lg*tk+Mg*uk,yk=$h*vk+ai*wk+bi*(Rg*Vf-Sg*Uf),zk=di*(wj*Wf-xj*Vf)+ei*(xj*Uf-vj*Wf)+fi*(vj*Vf-wj*Uf),Kk=-1,ll,ml,Vg=0;var Mf=ml=ll=0;if(0>xk){var hi=wb;var Wg=hi.x;var Yg=hi.y;var Zg=hi.z;var ii=sb;var zj=ii.x;var Aj=ii.y;var Bj=ii.z;var ch=zj-
Wg;var dh=Aj-Yg;var eh=Bj-Zg;var nl=ch*Wg+dh*Yg+eh*Zg;nl=-nl/(ch*ch+dh*dh+eh*eh);if(0>nl){var ri=n;ri.x=Wg;ri.y=Yg;ri.z=Zg;var si=1}else if(1<nl){var ti=n;ti.x=zj;ti.y=Aj;ti.z=Bj;si=2}else{var Dk=Wg+ch*nl;var Ek=Yg+dh*nl;var Fk=Zg+eh*nl;var yi=n;yi.x=Dk;yi.y=Ek;yi.z=Fk;si=3}var Gk=n.x*n.x+n.y*n.y+n.z*n.z;Vg=si;Kk=Gk;var Ai=n;ll=Ai.x;ml=Ai.y;Mf=Ai.z}if(0>yk){var Bi=sb;var gh=Bi.x;var hh=Bi.y;var ih=Bi.z;var Ci=gb;var Kj=Ci.x;var Lj=Ci.y;var Mj=Ci.z;var jh=Kj-gh;var kh=Lj-hh;var nh=Mj-ih;var ol=jh*
gh+kh*hh+nh*ih;ol=-ol/(jh*jh+kh*kh+nh*nh);if(0>ol){var Hi=n;Hi.x=gh;Hi.y=hh;Hi.z=ih;var Ii=1}else if(1<ol){var Ji=n;Ji.x=Kj;Ji.y=Lj;Ji.z=Mj;Ii=2}else{var Nk=gh+jh*ol;var Ok=hh+kh*ol;var Qk=ih+nh*ol;var Mi=n;Mi.x=Nk;Mi.y=Ok;Mi.z=Qk;Ii=3}var Uj=n.x*n.x+n.y*n.y+n.z*n.z;if(0>Kk||Uj<Kk){Vg=Ii<<1;Kk=Uj;var Ni=n;ll=Ni.x;ml=Ni.y;Mf=Ni.z}}if(0>zk){var Oi=wb;var oh=Oi.x;var ph=Oi.y;var qh=Oi.z;var Vi=gb;var Wj=Vi.x;var Xj=Vi.y;var Yj=Vi.z;var th=Wj-oh;var uh=Xj-ph;var wh=Yj-qh;var pl=th*oh+uh*ph+wh*qh;pl=-pl/
(th*th+uh*uh+wh*wh);if(0>pl){var Xi=n;Xi.x=oh;Xi.y=ph;Xi.z=qh;var yh=1}else if(1<pl){var Zi=n;Zi.x=Wj;Zi.y=Xj;Zi.z=Yj;yh=2}else{var Uk=oh+th*pl;var Vk=ph+uh*pl;var Wk=qh+wh*pl;var $i=n;$i.x=Uk;$i.y=Vk;$i.z=Wk;yh=3}var hk=n.x*n.x+n.y*n.y+n.z*n.z;if(0>Kk||hk<Kk){Vg=yh&1|(yh&2)<<1;Kk=hk;var bj=n;ll=bj.x;ml=bj.y;Mf=bj.z}}if(0<Kk){var cj=n;cj.x=ll;cj.y=ml;cj.z=Mf;var ej=Vg}else{var cg=Uf*Uf+Vf*Vf+Wf*Wf;0<cg&&(cg=1/Math.sqrt(cg));Uf*=cg;Vf*=cg;Wf*=cg;var Gg=Uf*Uf+Vf*Vf+Wf*Wf;Gg=(Jg*Uf+Lg*Vf+Mg*Wf)/Gg;ll=
Uf*Gg;ml=Vf*Gg;Mf=Wf*Gg;var fj=n;fj.x=ll;fj.y=ml;fj.z=Mf;ej=7}var mk=n.x*n.x+n.y*n.y+n.z*n.z;if(0>pc||mk<pc){Kc=ej&3|(ej&4)<<1;pc=mk;var gj=n;Ic=gj.x;Jc=gj.y;Lc=gj.z}}if(0>vd*Hc){var hj=sb;var Ih=hj.x;var Jh=hj.y;var Kh=hj.z;var ij=fb;var jj=ij.x;var kj=ij.y;var lj=ij.z;var oj=gb;var pj=oj.x;var qj=oj.y;var rj=oj.z;var Sh=jj-Ih;var Uh=kj-Jh;var Wh=lj-Kh;var Xh=pj-jj;var Yh=qj-kj;var Zh=rj-lj;var ok=Ih-pj;var qk=Jh-qj;var rk=Kh-rj;var Xf=Uh*Zh-Wh*Yh;var Yf=Wh*Xh-Sh*Zh;var Zf=Sh*Yh-Uh*Xh;var $k=Uh*
Zf-Wh*Yf;var al=Wh*Xf-Sh*Zf;var bl=Sh*Yf-Uh*Xf;var cl=Yh*Zf-Zh*Yf;var dl=Zh*Xf-Xh*Zf;var el=Ih*$k+Jh*al+Kh*bl,fl=jj*cl+kj*dl+lj*(Xh*Yf-Yh*Xf),gl=pj*(qk*Zf-rk*Yf)+qj*(rk*Xf-ok*Zf)+rj*(ok*Yf-qk*Xf),Lk=-1,ql,rl,ji=0;var Fl=rl=ql=0;if(0>el){var yj=sb;var ki=yj.x;var li=yj.y;var mi=yj.z;var Cj=fb;var Ak=Cj.x;var Bk=Cj.y;var Ck=Cj.z;var ni=Ak-ki;var oi=Bk-li;var pi=Ck-mi;var sl=ni*ki+oi*li+pi*mi;sl=-sl/(ni*ni+oi*oi+pi*pi);if(0>sl){var Dj=n;Dj.x=ki;Dj.y=li;Dj.z=mi;var Ej=1}else if(1<sl){var Fj=n;Fj.x=Ak;
Fj.y=Bk;Fj.z=Ck;Ej=2}else{var hl=ki+ni*sl;var il=li+oi*sl;var jl=mi+pi*sl;var Gj=n;Gj.x=hl;Gj.y=il;Gj.z=jl;Ej=3}var kl=n.x*n.x+n.y*n.y+n.z*n.z;ji=Ej;Lk=kl;var Hj=n;ql=Hj.x;rl=Hj.y;Fl=Hj.z}if(0>fl){var Ij=fb;var ui=Ij.x;var vi=Ij.y;var wi=Ij.z;var Jj=gb;var Hk=Jj.x;var Ik=Jj.y;var Jk=Jj.z;var Di=Hk-ui;var Ei=Ik-vi;var Fi=Jk-wi;var tl=Di*ui+Ei*vi+Fi*wi;tl=-tl/(Di*Di+Ei*Ei+Fi*Fi);if(0>tl){var Nj=n;Nj.x=ui;Nj.y=vi;Nj.z=wi;var Oj=1}else if(1<tl){var Pj=n;Pj.x=Hk;Pj.y=Ik;Pj.z=Jk;Oj=2}else{var vl=ui+Di*
tl;var wl=vi+Ei*tl;var xl=wi+Fi*tl;var Qj=n;Qj.x=vl;Qj.y=wl;Qj.z=xl;Oj=3}var Mk=n.x*n.x+n.y*n.y+n.z*n.z;if(0>Lk||Mk<Lk){ji=Oj<<1;Lk=Mk;var Rj=n;ql=Rj.x;rl=Rj.y;Fl=Rj.z}}if(0>gl){var Sj=sb;var Gi=Sj.x;var Ki=Sj.y;var Li=Sj.z;var Tj=gb;var Pk=Tj.x;var Rk=Tj.y;var Sk=Tj.z;var Pi=Pk-Gi;var Qi=Rk-Ki;var Ri=Sk-Li;var ul=Pi*Gi+Qi*Ki+Ri*Li;ul=-ul/(Pi*Pi+Qi*Qi+Ri*Ri);if(0>ul){var Vj=n;Vj.x=Gi;Vj.y=Ki;Vj.z=Li;var Ui=1}else if(1<ul){var Zj=n;Zj.x=Pk;Zj.y=Rk;Zj.z=Sk;Ui=2}else{var yl=Gi+Pi*ul;var zl=Ki+Qi*ul;
var Al=Li+Ri*ul;var bk=n;bk.x=yl;bk.y=zl;bk.z=Al;Ui=3}var Tk=n.x*n.x+n.y*n.y+n.z*n.z;if(0>Lk||Tk<Lk){ji=Ui&1|(Ui&2)<<1;Lk=Tk;var dk=n;ql=dk.x;rl=dk.y;Fl=dk.z}}if(0<Lk){var ek=n;ek.x=ql;ek.y=rl;ek.z=Fl;var Xk=ji}else{var Gl=Xf*Xf+Yf*Yf+Zf*Zf;0<Gl&&(Gl=1/Math.sqrt(Gl));Xf*=Gl;Yf*=Gl;Zf*=Gl;var Ch=Xf*Xf+Yf*Yf+Zf*Zf;Ch=(Ih*Xf+Jh*Yf+Kh*Zf)/Ch;ql=Xf*Ch;rl=Yf*Ch;Fl=Zf*Ch;var fk=n;fk.x=ql;fk.y=rl;fk.z=Fl;Xk=7}var Yk=n.x*n.x+n.y*n.y+n.z*n.z;if(0>pc||Yk<pc){Kc=Xk<<1;pc=Yk;var ik=n;Ic=ik.x;Jc=ik.y;Lc=ik.z}}if(0<
pc){var jk=n;jk.x=Ic;jk.y=Jc;jk.z=Lc;z=Kc}else n.zero(),z=15}if(1E-8>n.x*n.x+n.y*n.y+n.z*n.z){if(!f)return this.distance=0;switch(this.simplexSize){case 1:this.pointToTetrahedron();break;case 2:this.lineToTetrahedron();break;case 3:this.triangleToTetrahedron()}if(4==this.simplexSize){var Zk=this.computeDepth(a,b,c,d,k,m,h);if(0!=Zk)return this.distance=0,Zk;this.distance=-this.depth;return 0}this.distance=0;return 1}this.shrinkSimplex(z);g.x=n.x;g.y=n.y;g.z=n.z;var Hl=g,Bl=-Hl.y,Cl=-Hl.z;Hl.x=-Hl.x;
Hl.y=Bl;Hl.z=Cl;this.computeWitnessPoint1(!1);this.computeWitnessPoint2(!1);var dj=this.s[this.simplexSize],kk=this.w1[this.simplexSize];dj.x=kk.x;dj.y=kk.y;dj.z=kk.z;var Il=dj,lk=this.w2[this.simplexSize],Dl=Il.y-lk.y,El=Il.z-lk.z;Il.x-=lk.x;Il.y=Dl;Il.z=El;if(1E-8>g.x*g.x+g.y*g.y+g.z*g.z)throw Error("!?");var pk=k[this.simplexSize];if(1E-8>pk.x*g.x+pk.y*g.y+pk.z*g.z-(n.x*g.x+n.y*g.y+n.z*g.z))return this.interpolateClosestPoints(),this.distance=Math.sqrt(n.x*n.x+n.y*n.y+n.z*n.z),null!=e&&null!=e._gjkCache&&
this.saveCache(e._gjkCache),0;this.simplexSize++;++t}return 2},interpolateClosestPoints:function(){switch(this.simplexSize){case 1:var a=this.closestPoint1,b=this.w1[0];a.x=b.x;a.y=b.y;a.z=b.z;var c=this.closestPoint2,d=this.w2[0];c.x=d.x;c.y=d.y;c.z=d.z;break;case 2:var e=this.closest;var f=e.x;var k=e.y;var m=e.z;var h=this.s[0];var n=h.x;var g=h.y;var l=h.z;var p=this.w1[0];var y=p.x;var H=p.y;var C=p.z;var r=this.w2[0];var I=r.x;var q=r.y;var t=r.z;var z=this.s[1];var u=z.x;var A=z.y;var w=z.z;
var O=this.w1[1];var v=O.x;var B=O.y;var F=O.z;var x=this.w2[1];var qa=x.x;var M=x.y;var L=x.z;var Ia=u-n;var Ca=A-g;var ja=w-l;var D=Ia*Ia+Ca*Ca+ja*ja;0!=D&&(D=1/D);var J=((f-n)*Ia+(k-g)*Ca+(m-l)*ja)*D;var ba=v-y;var ha=B-H;var N=F-C;var W=y+ba*J;var aa=H+ha*J;var Y=C+N*J;ba=qa-I;ha=M-q;N=L-t;var mb=I+ba*J;var U=q+ha*J;var S=t+N*J;var ia=this.closestPoint1;ia.x=W;ia.y=aa;ia.z=Y;var Q=this.closestPoint2;Q.x=mb;Q.y=U;Q.z=S;break;case 3:var fa=this.closest;var ma=fa.x;var Z=fa.y;var Pa=fa.z;var Ma=
this.s[0];var V=Ma.x;var R=Ma.y;var Ja=Ma.z;var G=this.w1[0];var T=G.x;var Ta=G.y;var X=G.z;var pa=this.w2[0];var $a=pa.x;var la=pa.y;var ea=pa.z;var na=this.s[1];var ta=na.x;var ra=na.y;var sa=na.z;var ua=this.w1[1];var qb=ua.x;var da=ua.y;var ya=ua.z;var yb=this.w2[1];var Aa=yb.x;var xa=yb.y;var Ba=yb.z;var ka=this.s[2];var wa=ka.x;var Da=ka.y;var Ka=ka.z;var Ga=this.w1[2];var La=Ga.x;var Oa=Ga.y;var Fb=Ga.z;var Na=this.w2[2];var Ra=Na.x;var Fa=Na.y;var va=Na.z;var Qa=ta-V;var Vd=ra-R;var Pb=sa-
Ja;var Ha=wa-V;var Va=Da-R;var Sa=Ka-Ja;var ca=ma-V;var Xa=Z-R;var Ya=Pa-Ja;var Za=Qa*Qa+Vd*Vd+Pb*Pb,ab=Qa*Ha+Vd*Va+Pb*Sa,eb=Ha*Ha+Va*Va+Sa*Sa,ob=Qa*ca+Vd*Xa+Pb*Ya,yc=Ha*ca+Va*Xa+Sa*Ya,hb=Za*eb-ab*ab;0!=hb&&(hb=1/hb);var ad=(ob*eb-yc*ab)*hb,P=(-ob*ab+yc*Za)*hb;var Vb=qb-T;var cb=da-Ta;var nb=ya-X;var tb=T+Vb*ad;var Kb=Ta+cb*ad;var E=X+nb*ad;Vb=La-T;cb=Oa-Ta;nb=Fb-X;tb+=Vb*P;Kb+=cb*P;E+=nb*P;Vb=Aa-$a;cb=xa-la;nb=Ba-ea;var Ea=$a+Vb*ad;var za=la+cb*ad;var Ib=ea+nb*ad;Vb=Ra-$a;cb=Fa-la;nb=va-ea;Ea+=Vb*
P;za+=cb*P;Ib+=nb*P;var bb=this.closestPoint1;bb.x=tb;bb.y=Kb;bb.z=E;var gc=this.closestPoint2;gc.x=Ea;gc.y=za;gc.z=Ib;break;default:throw Error("!?");}},loadCache:function(a){var b=this.dir;a=a.prevClosestDir;b.x=a.x;b.y=a.y;b.z=a.z},saveCache:function(a){a=a.prevClosestDir;var b=this.closest;a.x=b.x;a.y=b.y;a.z=b.z;b=-a.y;var c=-a.z;a.x=-a.x;a.y=b;a.z=c},shrinkSimplex:function(a){this.simplexSize=a;this.simplexSize=(this.simplexSize&5)+(this.simplexSize>>1&5);this.simplexSize=(this.simplexSize&
3)+(this.simplexSize>>2&3);switch(a){case 2:a=this.s[0];var b=this.s[1];a.x=b.x;a.y=b.y;a.z=b.z;a=this.w1[0];b=this.w1[1];a.x=b.x;a.y=b.y;a.z=b.z;a=this.w2[0];b=this.w2[1];a.x=b.x;a.y=b.y;a.z=b.z;break;case 4:a=this.s[0];b=this.s[2];a.x=b.x;a.y=b.y;a.z=b.z;a=this.w1[0];b=this.w1[2];a.x=b.x;a.y=b.y;a.z=b.z;a=this.w2[0];b=this.w2[2];a.x=b.x;a.y=b.y;a.z=b.z;break;case 5:a=this.s[1];b=this.s[2];a.x=b.x;a.y=b.y;a.z=b.z;a=this.w1[1];b=this.w1[2];a.x=b.x;a.y=b.y;a.z=b.z;a=this.w2[1];b=this.w2[2];a.x=b.x;
a.y=b.y;a.z=b.z;break;case 6:a=this.s[0];b=this.s[2];a.x=b.x;a.y=b.y;a.z=b.z;a=this.w1[0];b=this.w1[2];a.x=b.x;a.y=b.y;a.z=b.z;a=this.w2[0];b=this.w2[2];a.x=b.x;a.y=b.y;a.z=b.z;break;case 8:a=this.s[0];b=this.s[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.w1[0];b=this.w1[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.w2[0];b=this.w2[3];a.x=b.x;a.y=b.y;a.z=b.z;break;case 9:a=this.s[1];b=this.s[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.w1[1];b=this.w1[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.w2[1];b=this.w2[3];a.x=b.x;a.y=b.y;a.z=b.z;break;
case 10:a=this.s[0];b=this.s[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.w1[0];b=this.w1[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.w2[0];b=this.w2[3];a.x=b.x;a.y=b.y;a.z=b.z;break;case 11:a=this.s[2];b=this.s[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.w1[2];b=this.w1[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.w2[2];b=this.w2[3];a.x=b.x;a.y=b.y;a.z=b.z;break;case 12:a=this.s[0];b=this.s[2];a.x=b.x;a.y=b.y;a.z=b.z;a=this.w1[0];b=this.w1[2];a.x=b.x;a.y=b.y;a.z=b.z;a=this.w2[0];b=this.w2[2];a.x=b.x;a.y=b.y;a.z=b.z;a=this.s[1];b=this.s[3];
a.x=b.x;a.y=b.y;a.z=b.z;a=this.w1[1];b=this.w1[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.w2[1];b=this.w2[3];a.x=b.x;a.y=b.y;a.z=b.z;break;case 13:a=this.s[1];b=this.s[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.w1[1];b=this.w1[3];a.x=b.x;a.y=b.y;a.z=b.z;a=this.w2[1];b=this.w2[3];a.x=b.x;a.y=b.y;a.z=b.z;break;case 14:a=this.s[0],b=this.s[3],a.x=b.x,a.y=b.y,a.z=b.z,a=this.w1[0],b=this.w1[3],a.x=b.x,a.y=b.y,a.z=b.z,a=this.w2[0],b=this.w2[3],a.x=b.x,a.y=b.y,a.z=b.z}},computeWitnessPoint1:function(a){var b=this.dir;var c=
b.x;var d=b.y;b=b.z;var e=this.tf1._rotation00*c+this.tf1._rotation10*d+this.tf1._rotation20*b;var f=this.tf1._rotation01*c+this.tf1._rotation11*d+this.tf1._rotation21*b;var k=this.tf1._rotation02*c+this.tf1._rotation12*d+this.tf1._rotation22*b;var m=this.dir;m.x=e;m.y=f;m.z=k;this.c1.computeLocalSupportingVertex(this.dir,this.w1[this.simplexSize]);a&&(a=this.dir,e=Math.sqrt(a.x*a.x+a.y*a.y+a.z*a.z),0<e&&(e=1/e),f=a.y*e,k=a.z*e,a.x*=e,a.y=f,a.z=k,a=this.w1[this.simplexSize],e=this.dir,f=this.c1._gjkMargin,
k=a.y+e.y*f,m=a.z+e.z*f,a.x+=e.x*f,a.y=k,a.z=m);a=this.w1[this.simplexSize];e=a.x;f=a.y;m=a.z;k=this.tf1._rotation00*e+this.tf1._rotation01*f+this.tf1._rotation02*m;a=this.tf1._rotation10*e+this.tf1._rotation11*f+this.tf1._rotation12*m;f=this.tf1._rotation20*e+this.tf1._rotation21*f+this.tf1._rotation22*m;e=k+this.tf1._positionX;a+=this.tf1._positionY;f+=this.tf1._positionZ;k=this.w1[this.simplexSize];k.x=e;k.y=a;k.z=f;a=this.dir;a.x=c;a.y=d;a.z=b},computeWitnessPoint2:function(a){var b=this.dir;
var c=b.x;var d=b.y;b=b.z;var e=this.tf2._rotation00*c+this.tf2._rotation10*d+this.tf2._rotation20*b;var f=this.tf2._rotation01*c+this.tf2._rotation11*d+this.tf2._rotation21*b;var k=this.tf2._rotation02*c+this.tf2._rotation12*d+this.tf2._rotation22*b;var m=this.dir;m.x=-e;m.y=-f;m.z=-k;this.c2.computeLocalSupportingVertex(this.dir,this.w2[this.simplexSize]);a&&(a=this.dir,e=Math.sqrt(a.x*a.x+a.y*a.y+a.z*a.z),0<e&&(e=1/e),f=a.y*e,k=a.z*e,a.x*=e,a.y=f,a.z=k,a=this.w2[this.simplexSize],e=this.dir,f=
this.c2._gjkMargin,k=a.y+e.y*f,m=a.z+e.z*f,a.x+=e.x*f,a.y=k,a.z=m);a=this.w2[this.simplexSize];e=a.x;f=a.y;m=a.z;k=this.tf2._rotation00*e+this.tf2._rotation01*f+this.tf2._rotation02*m;a=this.tf2._rotation10*e+this.tf2._rotation11*f+this.tf2._rotation12*m;f=this.tf2._rotation20*e+this.tf2._rotation21*f+this.tf2._rotation22*m;e=k+this.tf2._positionX;a+=this.tf2._positionY;f+=this.tf2._positionZ;k=this.w2[this.simplexSize];k.x=e;k.y=a;k.z=f;a=this.dir;a.x=c;a.y=d;a.z=b},pointToTetrahedron:function(){for(var a=
0;3>a;){var b=a++,c=this.dir;b=this.baseDirs[b];c.x=b.x;c.y=b.y;c.z=b.z;this.computeWitnessPoint1(!1);this.computeWitnessPoint2(!1);c=this.s[this.simplexSize];b=this.w1[this.simplexSize];c.x=b.x;c.y=b.y;c.z=b.z;b=this.w2[this.simplexSize];var d=c.y-b.y,e=c.z-b.z;c.x-=b.x;c.y=d;c.z=e;this.simplexSize++;this.lineToTetrahedron();if(4==this.simplexSize)break;this.simplexSize--;c=this.dir;b=-c.y;d=-c.z;c.x=-c.x;c.y=b;c.z=d;this.computeWitnessPoint1(!1);this.computeWitnessPoint2(!1);c=this.s[this.simplexSize];
b=this.w1[this.simplexSize];c.x=b.x;c.y=b.y;c.z=b.z;b=this.w2[this.simplexSize];d=c.y-b.y;e=c.z-b.z;c.x-=b.x;c.y=d;c.z=e;this.simplexSize++;this.lineToTetrahedron();if(4==this.simplexSize)break;this.simplexSize--}},lineToTetrahedron:function(){var a=this.dir;var b=a.x;var c=a.y;a=a.z;var d=this.s[0];var e=d.x;var f=d.y;d=d.z;var k=this.s[1];var m=k.x;var h=k.y;k=k.z;e-=m;f-=h;d-=k;for(h=0;3>h;){k=h++;k=this.baseDirs[k];m=k.x;var n=k.y;var g=k.z;k=f*g-d*n;g=d*m-e*g;m=e*n-f*m;n=this.dir;n.x=k;n.y=g;
n.z=m;this.computeWitnessPoint1(!1);this.computeWitnessPoint2(!1);k=this.s[this.simplexSize];m=this.w1[this.simplexSize];k.x=m.x;k.y=m.y;k.z=m.z;m=this.w2[this.simplexSize];n=k.y-m.y;g=k.z-m.z;k.x-=m.x;k.y=n;k.z=g;this.simplexSize++;this.triangleToTetrahedron();if(4==this.simplexSize)break;this.simplexSize--;k=this.dir;m=-k.y;n=-k.z;k.x=-k.x;k.y=m;k.z=n;this.computeWitnessPoint1(!1);this.computeWitnessPoint2(!1);k=this.s[this.simplexSize];m=this.w1[this.simplexSize];k.x=m.x;k.y=m.y;k.z=m.z;m=this.w2[this.simplexSize];
n=k.y-m.y;g=k.z-m.z;k.x-=m.x;k.y=n;k.z=g;this.simplexSize++;this.triangleToTetrahedron();if(4==this.simplexSize)break;this.simplexSize--}e=this.dir;e.x=b;e.y=c;e.z=a},triangleToTetrahedron:function(){var a=this.dir;var b=a.x;var c=a.y;for(a=a.z;;){var d=this.s[0];var e=d.x;var f=d.y;d=d.z;var k=this.s[1];var m=k.x;var h=k.y;var n=k.z;var g=this.s[2];var l=g.x;k=g.y;g=g.z;m-=e;h-=f;n-=d;e=l-e;f=k-f;k=g-d;d=h*k-n*f;k=n*e-m*k;f=m*f-h*e;m=this.dir;m.x=d;m.y=k;m.z=f;this.computeWitnessPoint1(!1);this.computeWitnessPoint2(!1);
f=this.s[this.simplexSize];d=this.w1[this.simplexSize];f.x=d.x;f.y=d.y;f.z=d.z;d=this.w2[this.simplexSize];m=f.y-d.y;e=f.z-d.z;f.x-=d.x;f.y=m;f.z=e;this.simplexSize++;if(this.isValidTetrahedron())break;this.simplexSize--;f=this.dir;d=-f.y;m=-f.z;f.x=-f.x;f.y=d;f.z=m;this.computeWitnessPoint1(!1);this.computeWitnessPoint2(!1);f=this.s[this.simplexSize];d=this.w1[this.simplexSize];f.x=d.x;f.y=d.y;f.z=d.z;d=this.w2[this.simplexSize];m=f.y-d.y;e=f.z-d.z;f.x-=d.x;f.y=m;f.z=e;this.simplexSize++;if(this.isValidTetrahedron())break;
this.simplexSize--;break}f=this.dir;f.x=b;f.y=c;f.z=a},isValidTetrahedron:function(){var a=this.s[2].x-this.s[0].x,b=this.s[2].y-this.s[0].y,c=this.s[2].z-this.s[0].z,d=this.s[3].x-this.s[0].x,e=this.s[3].y-this.s[0].y,f=this.s[3].z-this.s[0].z;a=(this.s[1].x-this.s[0].x)*(b*f-c*e)-(this.s[1].y-this.s[0].y)*(a*f-c*d)+(this.s[1].z-this.s[0].z)*(a*e-b*d);return 1E-12<a?!0:-1E-12>a},computeDepth:function(a,b,c,d,e,f,k){for(var m=this.polyhedron;0<m._numTriangles;){var h=m._triangleList;m._numTriangles--;
var n=h._prev,g=h._next;null!=n&&(n._next=g);null!=g&&(g._prev=n);h==m._triangleList&&(m._triangleList=m._triangleList._next);h==m._triangleListLast&&(m._triangleListLast=m._triangleListLast._prev);h._next=null;h._prev=null;h.removeReferences();h._next=m._trianglePool;m._trianglePool=h}for(;0<m._numVertices;){var l=m._vertices[--m._numVertices];l.removeReferences();l._next=m._vertexPool;m._vertexPool=l}var p=this.polyhedron,y=this.polyhedron,H=y._vertexPool;null!=H?(y._vertexPool=H._next,H._next=
null):H=new xg;var C=H.init(e[0],f[0],k[0]),r=this.polyhedron,I=r._vertexPool;null!=I?(r._vertexPool=I._next,I._next=null):I=new xg;var q=I.init(e[1],f[1],k[1]),t=this.polyhedron,z=t._vertexPool;null!=z?(t._vertexPool=z._next,z._next=null):z=new xg;var u=z.init(e[2],f[2],k[2]),A=this.polyhedron,w=A._vertexPool;null!=w?(A._vertexPool=w._next,w._next=null):w=new xg;if(!p._init(C,q,u,w.init(e[3],f[3],k[3])))return Pe.EPA_FAILED_TO_INIT;this.simplexSize=0;for(var O=this.s[0],v=this.w1[0],B=this.w2[0],
F=0;40>F;){for(var x=this.polyhedron._triangleList,qa=Infinity,M=null;null!=x;){var L=x._next;x._distanceSq<qa&&(qa=x._distanceSq,M=x);x=L}var Ia=M,Ca=this.dir,ja=Ia._normal;Ca.x=ja.x;Ca.y=ja.y;Ca.z=ja.z;var D=Ca,J=Math.sqrt(D.x*D.x+D.y*D.y+D.z*D.z);0<J&&(J=1/J);var ba=D.y*J,ha=D.z*J;D.x*=J;D.y=ba;D.z=ha;this.computeWitnessPoint1(!1);this.computeWitnessPoint2(!1);var N=this.s[this.simplexSize],W=this.w1[this.simplexSize];N.x=W.x;N.y=W.y;N.z=W.z;var aa=N,Y=this.w2[this.simplexSize],mb=aa.y-Y.y,ia=
aa.z-Y.z;aa.x-=Y.x;aa.y=mb;aa.z=ia;var fa=Ia._vertices[0],U=Ia._vertices[1],Q=Ia._vertices[2],S=fa.v,ma=this.dir,Z=this.dir;if(1E-6>O.x*Z.x+O.y*Z.y+O.z*Z.z-(S.x*ma.x+S.y*ma.y+S.z*ma.z)||39==F){var Ma=this.closest,Pa=this.dir;Ma.x=Pa.x;Ma.y=Pa.y;Ma.z=Pa.z;var V=Ma,R=this.dir,Ja=fa.v,G=this.dir,T=(R.x*Ja.x+R.y*Ja.y+R.z*Ja.z)/(G.x*G.x+G.y*G.y+G.z*G.z),Ta=V.y*T,X=V.z*T;V.x*=T;V.y=Ta;V.z=X;var pa=this.closest;var $a=pa.x;var la=pa.y;var ea=pa.z;var na=fa.v;var ta=na.x;var ra=na.y;var sa=na.z;var ua=fa.w1;
var qb=ua.x;var da=ua.y;var ya=ua.z;var yb=fa.w2;var Aa=yb.x;var xa=yb.y;var ka=yb.z;var Ba=U.v;var wa=Ba.x;var Da=Ba.y;var Ka=Ba.z;var Ga=U.w1;var La=Ga.x;var Oa=Ga.y;var Na=Ga.z;var Fb=U.w2;var Ra=Fb.x;var Qa=Fb.y;var Fa=Fb.z;var Pb=Q.v;var va=Pb.x;var Ha=Pb.y;var Va=Pb.z;var Sa=Q.w1;var Xa=Sa.x;var ca=Sa.y;var Ya=Sa.z;var Za=Q.w2;var ab=Za.x;var eb=Za.y;var hb=Za.z;var cb=wa-ta;var yc=Da-ra;var nb=Ka-sa;var ob=va-ta;var P=Ha-ra;var Vb=Va-sa;var tb=$a-ta;var Kb=la-ra;var ib=ea-sa;var wb=cb*cb+yc*
yc+nb*nb,E=cb*ob+yc*P+nb*Vb,Ea=ob*ob+P*P+Vb*Vb,za=cb*tb+yc*Kb+nb*ib,Ib=ob*tb+P*Kb+Vb*ib,bb=wb*Ea-E*E;0!=bb&&(bb=1/bb);var gc=(za*Ea-Ib*E)*bb,sb=(-za*E+Ib*wb)*bb;var fb=La-qb;var gb=Oa-da;var Ie=Na-ya;var kb=qb+fb*gc;var Hb=da+gb*gc;var lb=ya+Ie*gc;fb=Xa-qb;gb=ca-da;Ie=Ya-ya;kb+=fb*sb;Hb+=gb*sb;lb+=Ie*sb;fb=Ra-Aa;gb=Qa-xa;Ie=Fa-ka;var Xb=Aa+fb*gc;var Ua=xa+gb*gc;var Cb=ka+Ie*gc;fb=ab-Aa;gb=eb-xa;Ie=hb-ka;Xb+=fb*sb;Ua+=gb*sb;Cb+=Ie*sb;var Jb=this.closestPoint1;Jb.x=kb;Jb.y=Hb;Jb.z=lb;var Wa=this.closestPoint2;
Wa.x=Xb;Wa.y=Ua;Wa.z=Cb;var we=this.closest;this.depth=Math.sqrt(we.x*we.x+we.y*we.y+we.z*we.z);return Pe.SUCCEEDED}var Cc=this.polyhedron,Eb=Cc._vertexPool;null!=Eb?(Cc._vertexPool=Eb._next,Eb._next=null):Eb=new xg;var Db=Eb.init(O,v,B);if(!this.polyhedron._addVertex(Db,Ia))return Pe.EPA_FAILED_TO_ADD_VERTEX;++F}return Pe.EPA_DID_NOT_CONVERGE},__class__:mh};var Pe=function(){};g["oimo.collision.narrowphase.detector.gjkepa.GjkEpaResultState"]=Pe;Pe.__name__="oimo.collision.narrowphase.detector.gjkepa.GjkEpaResultState";
var Ef=function(a,b,c,d,e,f,k,m,h){null==h&&(h=1);null==m&&(m=0);null==k&&(k=0);null==f&&(f=0);null==e&&(e=1);null==d&&(d=0);null==c&&(c=0);null==b&&(b=0);null==a&&(a=1);this.e00=a;this.e01=b;this.e02=c;this.e10=d;this.e11=e;this.e12=f;this.e20=k;this.e21=m;this.e22=h;Ef.numCreations++};g["oimo.common.Mat3"]=Ef;Ef.__name__="oimo.common.Mat3";Ef.prototype={e00:null,e01:null,e02:null,e10:null,e11:null,e12:null,e20:null,e21:null,e22:null,__class__:Ef};var wm=function(){};g["oimo.common.Mat4"]=wm;wm.__name__=
"oimo.common.Mat4";var vl=function(){this.stackVec3=Array(256);this.sizeVec3=0;this.stackMat3=Array(256);this.sizeMat3=0;this.stackMat4=Array(256);this.sizeMat4=0;this.stackQuat=Array(256);this.sizeQuat=0};g["oimo.common.Pool"]=vl;vl.__name__="oimo.common.Pool";vl.prototype={stackVec3:null,sizeVec3:null,stackMat3:null,sizeMat3:null,stackMat4:null,sizeMat4:null,stackQuat:null,sizeQuat:null,__class__:vl};var xm=function(){};g["oimo.common.Quat"]=xm;xm.__name__="oimo.common.Quat";var Mk=function(){this._prev=
this._next=null;this._link1=new nh;this._link2=new nh;this._detector=this._b2=this._b1=this._s2=this._s1=null;this._cachedDetectorData=new Oj;this._detectorResult=new Fi;this._shouldBeSkipped=this._latest=!1;this._manifold=new wl;this._updater=new xl(this._manifold);this._contactConstraint=new Qj(this._manifold);this._touching=!1};g["oimo.dynamics.Contact"]=Mk;Mk.__name__="oimo.dynamics.Contact";Mk.prototype={_next:null,_prev:null,_link1:null,_link2:null,_s1:null,_s2:null,_b1:null,_b2:null,_detector:null,
_cachedDetectorData:null,_detectorResult:null,_latest:null,_shouldBeSkipped:null,_manifold:null,_updater:null,_contactConstraint:null,_touching:null,_updateManifold:function(){if(null!=this._detector){var a=this._touching,b=this._detectorResult;this._detector.detect(b,this._s1._geom,this._s2._geom,this._s1._transform,this._s2._transform,this._cachedDetectorData);(this._touching=0<b.numPoints)?(this._manifold._buildBasis(b.normal),b.getMaxDepth()>ta.contactUseAlternativePositionCorrectionAlgorithmDepthThreshold?
this._contactConstraint._positionCorrectionAlgorithm=ta.alternativeContactPositionCorrectionAlgorithm:this._contactConstraint._positionCorrectionAlgorithm=ta.defaultContactPositionCorrectionAlgorithm,b.incremental?this._updater.incrementalUpdate(b,this._b1._transform,this._b2._transform):this._updater.totalUpdate(b,this._b1._transform,this._b2._transform)):this._manifold._clear();if(this._touching&&!a){b=this._s1._contactCallback;var c=this._s2._contactCallback;b==c&&(c=null);null!=b&&b.beginContact(this);
null!=c&&c.beginContact(this)}!this._touching&&a&&(a=this._s1._contactCallback,b=this._s2._contactCallback,a==b&&(b=null),null!=a&&a.endContact(this),null!=b&&b.endContact(this));this._touching&&(a=this._s1._contactCallback,b=this._s2._contactCallback,a==b&&(b=null),null!=a&&a.preSolve(this),null!=b&&b.preSolve(this))}},_postSolve:function(){var a=this._s1._contactCallback,b=this._s2._contactCallback;a==b&&(b=null);null!=a&&a.postSolve(this);null!=b&&b.postSolve(this)},__class__:Mk};var nh=function(){this._other=
this._contact=this._next=this._prev=null};g["oimo.dynamics.ContactLink"]=nh;nh.__name__="oimo.dynamics.ContactLink";nh.prototype={_prev:null,_next:null,_contact:null,_other:null,__class__:nh};var Rj=function(a){this._broadPhase=a;this._collisionMatrix=new Di;this._numContacts=0};g["oimo.dynamics.ContactManager"]=Rj;Rj.__name__="oimo.dynamics.ContactManager";Rj.prototype={_numContacts:null,_contactList:null,_contactListLast:null,_contactPool:null,_broadPhase:null,_collisionMatrix:null,createContacts:function(){for(var a=
this._broadPhase._proxyPairList;null!=a;){for(var b=a._next;;){if(a._p1._id<a._p2._id){var c=a._p1.userData;a=a._p2.userData}else c=a._p2.userData,a=a._p1.userData;if(!this.shouldCollide(c,a))break;var d=c._rigidBody,e=a._rigidBody;var f=d._numContactLinks<e._numContactLinks?d._contactLinkList:e._contactLinkList;d=c._id;e=a._id;for(var k=!1;null!=f;){var m=f._next;f=f._contact;if(f._s1._id==d&&f._s2._id==e){k=f._latest=!0;break}f=m}k||(d=this._contactPool,null!=d?(this._contactPool=d._next,d._next=
null):d=new Mk,null==this._contactList?this._contactList=d:(this._contactListLast._next=d,d._prev=this._contactListLast),this._contactListLast=d,d._latest=!0,e=this._collisionMatrix.detectors[c._geom._type][a._geom._type],d._s1=c,d._s2=a,d._b1=c._rigidBody,d._b2=a._rigidBody,d._touching=!1,null==d._b1._contactLinkList?d._b1._contactLinkList=d._link1:(d._b1._contactLinkListLast._next=d._link1,d._link1._prev=d._b1._contactLinkListLast),d._b1._contactLinkListLast=d._link1,null==d._b2._contactLinkList?
d._b2._contactLinkList=d._link2:(d._b2._contactLinkListLast._next=d._link2,d._link2._prev=d._b2._contactLinkListLast),d._b2._contactLinkListLast=d._link2,d._b1._numContactLinks++,d._b2._numContactLinks++,d._link1._other=d._b2,d._link2._other=d._b1,d._link1._contact=d,d._link2._contact=d,d._detector=e,d=d._contactConstraint,d._s1=c,d._s2=a,d._b1=d._s1._rigidBody,d._b2=d._s2._rigidBody,d._tf1=d._b1._transform,d._tf2=d._b2._transform,this._numContacts++);break}a=b}},destroyOutdatedContacts:function(){for(var a=
this._broadPhase._incremental,b=this._contactList;null!=b;){for(var c=b._next;;){if(b._latest){b._latest=!1;b._shouldBeSkipped=!1;break}if(!a){var d=b._prev,e=b._next;null!=d&&(d._next=e);null!=e&&(e._prev=d);b==this._contactList&&(this._contactList=this._contactList._next);b==this._contactListLast&&(this._contactListLast=this._contactListLast._prev);b._next=null;b._prev=null;b._touching&&(d=b._s1._contactCallback,e=b._s2._contactCallback,d==e&&(e=null),null!=d&&d.endContact(b),null!=e&&e.endContact(b));
d=b._link1._prev;e=b._link1._next;null!=d&&(d._next=e);null!=e&&(e._prev=d);b._link1==b._b1._contactLinkList&&(b._b1._contactLinkList=b._b1._contactLinkList._next);b._link1==b._b1._contactLinkListLast&&(b._b1._contactLinkListLast=b._b1._contactLinkListLast._prev);b._link1._next=null;b._link1._prev=null;d=b._link2._prev;e=b._link2._next;null!=d&&(d._next=e);null!=e&&(e._prev=d);b._link2==b._b2._contactLinkList&&(b._b2._contactLinkList=b._b2._contactLinkList._next);b._link2==b._b2._contactLinkListLast&&
(b._b2._contactLinkListLast=b._b2._contactLinkListLast._prev);b._link2._next=null;b._link2._prev=null;b._b1._numContactLinks--;b._b2._numContactLinks--;b._link1._other=null;b._link2._other=null;b._link1._contact=null;b._link2._contact=null;b._s1=null;b._s2=null;b._b1=null;b._b2=null;b._touching=!1;b._cachedDetectorData._clear();b._manifold._clear();b._detector=null;d=b._contactConstraint;d._s1=null;d._s2=null;d._b1=null;d._b2=null;d._tf1=null;d._tf2=null;b._next=this._contactPool;this._contactPool=
b;this._numContacts--;break}d=b._s1;e=b._s2;var f=d._rigidBody,k=e._rigidBody;k=!k._sleeping&&1!=k._type;if((f._sleeping||1==f._type)&&!k){b._shouldBeSkipped=!0;break}f=d._aabb;k=e._aabb;var m=d._proxy,h=e._proxy;if(!(m._aabbMinX<h._aabbMaxX&&m._aabbMaxX>h._aabbMinX&&m._aabbMinY<h._aabbMaxY&&m._aabbMaxY>h._aabbMinY&&m._aabbMinZ<h._aabbMaxZ&&m._aabbMaxZ>h._aabbMinZ&&this.shouldCollide(d,e))){d=b._prev;e=b._next;null!=d&&(d._next=e);null!=e&&(e._prev=d);b==this._contactList&&(this._contactList=this._contactList._next);
b==this._contactListLast&&(this._contactListLast=this._contactListLast._prev);b._next=null;b._prev=null;b._touching&&(d=b._s1._contactCallback,e=b._s2._contactCallback,d==e&&(e=null),null!=d&&d.endContact(b),null!=e&&e.endContact(b));d=b._link1._prev;e=b._link1._next;null!=d&&(d._next=e);null!=e&&(e._prev=d);b._link1==b._b1._contactLinkList&&(b._b1._contactLinkList=b._b1._contactLinkList._next);b._link1==b._b1._contactLinkListLast&&(b._b1._contactLinkListLast=b._b1._contactLinkListLast._prev);b._link1._next=
null;b._link1._prev=null;d=b._link2._prev;e=b._link2._next;null!=d&&(d._next=e);null!=e&&(e._prev=d);b._link2==b._b2._contactLinkList&&(b._b2._contactLinkList=b._b2._contactLinkList._next);b._link2==b._b2._contactLinkListLast&&(b._b2._contactLinkListLast=b._b2._contactLinkListLast._prev);b._link2._next=null;b._link2._prev=null;b._b1._numContactLinks--;b._b2._numContactLinks--;b._link1._other=null;b._link2._other=null;b._link1._contact=null;b._link2._contact=null;b._s1=null;b._s2=null;b._b1=null;b._b2=
null;b._touching=!1;b._cachedDetectorData._clear();b._manifold._clear();b._detector=null;d=b._contactConstraint;d._s1=null;d._s2=null;d._b1=null;d._b2=null;d._tf1=null;d._tf2=null;b._next=this._contactPool;this._contactPool=b;this._numContacts--;break}b._shouldBeSkipped=!(f._minX<k._maxX&&f._maxX>k._minX&&f._minY<k._maxY&&f._maxY>k._minY&&f._minZ<k._maxZ&&f._maxZ>k._minZ);break}b=c}},shouldCollide:function(a,b){var c=a._rigidBody,d=b._rigidBody;if(c==d||0!=c._type&&0!=d._type||0==(a._collisionGroup&
b._collisionMask)||0==(b._collisionGroup&a._collisionMask))return!1;c._numJointLinks<d._numJointLinks?(a=c._jointLinkList,c=d):a=d._jointLinkList;for(;null!=a;){if(a._other==c&&!a._joint._allowCollision)return!1;a=a._next}return!0},_updateContacts:function(){this._broadPhase.collectPairs();this.createContacts();this.destroyOutdatedContacts()},_postSolve:function(){for(var a=this._contactList;null!=a;){var b=a._next;a._touching&&a._postSolve();a=b}},__class__:Rj};var Sj=function(){this.rigidBodies=
Array(ta.islandInitialRigidBodyArraySize);this.solvers=Array(ta.islandInitialConstraintArraySize);this.solversSi=Array(ta.islandInitialConstraintArraySize);this.solversNgs=Array(ta.islandInitialConstraintArraySize);this.numSolversNgs=this.numSolversSi=this.numSolvers=this.numRigidBodies=0};g["oimo.dynamics.Island"]=Sj;Sj.__name__="oimo.dynamics.Island";Sj.prototype={gravityX:null,gravityY:null,gravityZ:null,numRigidBodies:null,rigidBodies:null,numSolvers:null,solvers:null,numSolversSi:null,solversSi:null,
numSolversNgs:null,solversNgs:null,_clear:function(){for(;0<this.numRigidBodies;)this.rigidBodies[--this.numRigidBodies]=null;for(;0<this.numSolvers;)this.solvers[--this.numSolvers]=null;for(;0<this.numSolversSi;)this.solversSi[--this.numSolversSi]=null;for(;0<this.numSolversNgs;)this.solversNgs[--this.numSolversNgs]=null},_addRigidBody:function(a){if(this.numRigidBodies==this.rigidBodies.length){for(var b=Array(this.numRigidBodies<<1),c=0,d=this.numRigidBodies;c<d;){var e=c++;b[e]=this.rigidBodies[e];
this.rigidBodies[e]=null}this.rigidBodies=b}a._addedToIsland=!0;this.rigidBodies[this.numRigidBodies++]=a},_addConstraintSolver:function(a,b){if(this.numSolvers==this.solvers.length){for(var c=Array(this.numSolvers<<1),d=0,e=this.numSolvers;d<e;){var f=d++;c[f]=this.solvers[f];this.solvers[f]=null}this.solvers=c}a._addedToIsland=!0;this.solvers[this.numSolvers++]=a;if(b==$e.SPLIT_IMPULSE){if(this.numSolversSi==this.solversSi.length){c=Array(this.numSolversSi<<1);d=0;for(e=this.numSolversSi;d<e;)f=
d++,c[f]=this.solversSi[f],this.solversSi[f]=null;this.solversSi=c}this.solversSi[this.numSolversSi++]=a}if(b==$e.NGS){if(this.numSolversNgs==this.solversNgs.length){b=Array(this.numSolversNgs<<1);c=0;for(d=this.numSolversNgs;c<d;)e=c++,b[e]=this.solversNgs[e],this.solversNgs[e]=null;this.solversNgs=b}this.solversNgs[this.numSolversNgs++]=a}},_stepSingleRigidBody:function(a,b){a=a.dt;var c=b._ptransform,d=b._transform;c._positionX=d._positionX;c._positionY=d._positionY;c._positionZ=d._positionZ;c._rotation00=
d._rotation00;c._rotation01=d._rotation01;c._rotation02=d._rotation02;c._rotation10=d._rotation10;c._rotation11=d._rotation11;c._rotation12=d._rotation12;c._rotation20=d._rotation20;c._rotation21=d._rotation21;c._rotation22=d._rotation22;b._linearContactImpulseX=0;b._linearContactImpulseY=0;b._linearContactImpulseZ=0;b._angularContactImpulseX=0;b._angularContactImpulseY=0;b._angularContactImpulseZ=0;b._autoSleep&&b._velX*b._velX+b._velY*b._velY+b._velZ*b._velZ<ta.sleepingVelocityThreshold*ta.sleepingVelocityThreshold&&
b._angVelX*b._angVelX+b._angVelY*b._angVelY+b._angVelZ*b._angVelZ<ta.sleepingAngularVelocityThreshold*ta.sleepingAngularVelocityThreshold?(b._sleepTime+=a,b._sleepTime>ta.sleepingTimeThreshold&&(b._sleeping=!0,b._sleepTime=0)):b._sleepTime=0;if(!b._sleeping){if(0==b._type){c=a*b._linearDamping;d=c*c;c=1/(1+c+d*(.5+.16666666666666666*c+.041666666666666664*d));d=a*b._angularDamping;var e=d*d;d=1/(1+d+e*(.5+.16666666666666666*d+.041666666666666664*e));e=this.gravityX*b._gravityScale;var f=this.gravityY*
b._gravityScale;var k=this.gravityZ*b._gravityScale;e+=b._forceX*b._invMass;f+=b._forceY*b._invMass;k+=b._forceZ*b._invMass;var m=b._invInertia00*b._torqueX+b._invInertia01*b._torqueY+b._invInertia02*b._torqueZ;var h=b._invInertia10*b._torqueX+b._invInertia11*b._torqueY+b._invInertia12*b._torqueZ;var n=b._invInertia20*b._torqueX+b._invInertia21*b._torqueY+b._invInertia22*b._torqueZ;b._velX+=e*a;b._velY+=f*a;b._velZ+=k*a;b._velX*=c;b._velY*=c;b._velZ*=c;b._angVelX+=m*a;b._angVelY+=h*a;b._angVelZ+=
n*a;b._angVelX*=d;b._angVelY*=d;b._angVelZ*=d}b._integrate(a);for(a=b._shapeList;null!=a;){c=a._next;d=a._ptransform;f=a._localTransform;e=b._ptransform;k=e._rotation00*f._rotation00+e._rotation01*f._rotation10+e._rotation02*f._rotation20;m=e._rotation00*f._rotation01+e._rotation01*f._rotation11+e._rotation02*f._rotation21;h=e._rotation00*f._rotation02+e._rotation01*f._rotation12+e._rotation02*f._rotation22;n=e._rotation10*f._rotation00+e._rotation11*f._rotation10+e._rotation12*f._rotation20;var g=
e._rotation10*f._rotation01+e._rotation11*f._rotation11+e._rotation12*f._rotation21;var l=e._rotation10*f._rotation02+e._rotation11*f._rotation12+e._rotation12*f._rotation22;var p=e._rotation20*f._rotation00+e._rotation21*f._rotation10+e._rotation22*f._rotation20;var y=e._rotation20*f._rotation01+e._rotation21*f._rotation11+e._rotation22*f._rotation21;var H=e._rotation20*f._rotation02+e._rotation21*f._rotation12+e._rotation22*f._rotation22;d._rotation00=k;d._rotation01=m;d._rotation02=h;d._rotation10=
n;d._rotation11=g;d._rotation12=l;d._rotation20=p;d._rotation21=y;d._rotation22=H;k=e._rotation00*f._positionX+e._rotation01*f._positionY+e._rotation02*f._positionZ;m=e._rotation10*f._positionX+e._rotation11*f._positionY+e._rotation12*f._positionZ;f=e._rotation20*f._positionX+e._rotation21*f._positionY+e._rotation22*f._positionZ;d._positionX=k;d._positionY=m;d._positionZ=f;d._positionX+=e._positionX;d._positionY+=e._positionY;d._positionZ+=e._positionZ;d=a._transform;f=a._localTransform;e=b._transform;
k=e._rotation00*f._rotation00+e._rotation01*f._rotation10+e._rotation02*f._rotation20;m=e._rotation00*f._rotation01+e._rotation01*f._rotation11+e._rotation02*f._rotation21;h=e._rotation00*f._rotation02+e._rotation01*f._rotation12+e._rotation02*f._rotation22;n=e._rotation10*f._rotation00+e._rotation11*f._rotation10+e._rotation12*f._rotation20;g=e._rotation10*f._rotation01+e._rotation11*f._rotation11+e._rotation12*f._rotation21;l=e._rotation10*f._rotation02+e._rotation11*f._rotation12+e._rotation12*
f._rotation22;p=e._rotation20*f._rotation00+e._rotation21*f._rotation10+e._rotation22*f._rotation20;y=e._rotation20*f._rotation01+e._rotation21*f._rotation11+e._rotation22*f._rotation21;H=e._rotation20*f._rotation02+e._rotation21*f._rotation12+e._rotation22*f._rotation22;d._rotation00=k;d._rotation01=m;d._rotation02=h;d._rotation10=n;d._rotation11=g;d._rotation12=l;d._rotation20=p;d._rotation21=y;d._rotation22=H;k=e._rotation00*f._positionX+e._rotation01*f._positionY+e._rotation02*f._positionZ;m=
e._rotation10*f._positionX+e._rotation11*f._positionY+e._rotation12*f._positionZ;f=e._rotation20*f._positionX+e._rotation21*f._positionY+e._rotation22*f._positionZ;d._positionX=k;d._positionY=m;d._positionZ=f;d._positionX+=e._positionX;d._positionY+=e._positionY;d._positionZ+=e._positionZ;a._geom._computeAabb(a._aabb,a._ptransform);d=a._aabb._minX;e=a._aabb._minY;f=a._aabb._minZ;k=a._aabb._maxX;m=a._aabb._maxY;h=a._aabb._maxZ;a._geom._computeAabb(a._aabb,a._transform);a._aabb._minX=d<a._aabb._minX?
d:a._aabb._minX;a._aabb._minY=e<a._aabb._minY?e:a._aabb._minY;a._aabb._minZ=f<a._aabb._minZ?f:a._aabb._minZ;a._aabb._maxX=k>a._aabb._maxX?k:a._aabb._maxX;a._aabb._maxY=m>a._aabb._maxY?m:a._aabb._maxY;a._aabb._maxZ=h>a._aabb._maxZ?h:a._aabb._maxZ;null!=a._proxy&&(d=a._transform._positionX-a._ptransform._positionX,e=a._transform._positionY-a._ptransform._positionY,f=a._transform._positionZ-a._ptransform._positionZ,k=a.displacement,k.x=d,k.y=e,k.z=f,a._rigidBody._world._broadPhase.moveProxy(a._proxy,
a._aabb,a.displacement));a=c}}},_step:function(a,b,c){for(var d=a.dt,e=!0,f=0,k=this.numRigidBodies;f<k;){var m=f++,h=this.rigidBodies[m],n=h._ptransform,g=h._transform;n._positionX=g._positionX;n._positionY=g._positionY;n._positionZ=g._positionZ;n._rotation00=g._rotation00;n._rotation01=g._rotation01;n._rotation02=g._rotation02;n._rotation10=g._rotation10;n._rotation11=g._rotation11;n._rotation12=g._rotation12;n._rotation20=g._rotation20;n._rotation21=g._rotation21;n._rotation22=g._rotation22;h._linearContactImpulseX=
0;h._linearContactImpulseY=0;h._linearContactImpulseZ=0;h._angularContactImpulseX=0;h._angularContactImpulseY=0;h._angularContactImpulseZ=0;h._sleeping=!1;h._sleepTime=h._autoSleep&&h._velX*h._velX+h._velY*h._velY+h._velZ*h._velZ<ta.sleepingVelocityThreshold*ta.sleepingVelocityThreshold&&h._angVelX*h._angVelX+h._angVelY*h._angVelY+h._angVelZ*h._angVelZ<ta.sleepingAngularVelocityThreshold*ta.sleepingAngularVelocityThreshold?h._sleepTime+d:0;h._sleepTime<ta.sleepingTimeThreshold&&(e=!1);if(0==h._type){var l=
d*h._linearDamping,p=l*l,y=1/(1+l+p*(.5+.16666666666666666*l+.041666666666666664*p)),H=d*h._angularDamping,C=H*H,r=1/(1+H+C*(.5+.16666666666666666*H+.041666666666666664*C));var I=this.gravityX*h._gravityScale;var q=this.gravityY*h._gravityScale;var t=this.gravityZ*h._gravityScale;I+=h._forceX*h._invMass;q+=h._forceY*h._invMass;t+=h._forceZ*h._invMass;var z=h._invInertia00*h._torqueX+h._invInertia01*h._torqueY+h._invInertia02*h._torqueZ;var u=h._invInertia10*h._torqueX+h._invInertia11*h._torqueY+h._invInertia12*
h._torqueZ;var A=h._invInertia20*h._torqueX+h._invInertia21*h._torqueY+h._invInertia22*h._torqueZ;var w=z;var O=u;var v=A;h._velX+=I*d;h._velY+=q*d;h._velZ+=t*d;h._velX*=y;h._velY*=y;h._velZ*=y;h._angVelX+=w*d;h._angVelY+=O*d;h._angVelZ+=v*d;h._angVelX*=r;h._angVelY*=r;h._angVelZ*=r}}if(e)for(var B=0,x=this.numRigidBodies;B<x;){var F=B++,qa=this.rigidBodies[F];qa._sleeping=!0;qa._sleepTime=0}else{for(var M=0,L=this.numSolvers;M<L;){var Ia=M++;this.solvers[Ia].preSolveVelocity(a)}for(var Ca=0,ja=this.numSolvers;Ca<
ja;){var D=Ca++;this.solvers[D].warmStart(a)}for(var J=0;J<b;){J++;for(var ba=0,ha=this.numSolvers;ba<ha;){var N=ba++;this.solvers[N].solveVelocity()}}for(var aa=0,W=this.numSolvers;aa<W;){var Y=aa++;this.solvers[Y].postSolveVelocity(a)}for(var fa=0,mb=this.numRigidBodies;fa<mb;){var U=fa++;this.rigidBodies[U]._integrate(d)}for(var S=0,Q=this.numSolversSi;S<Q;){var ia=S++;this.solversSi[ia].preSolvePosition(a)}for(var ma=0;ma<c;){ma++;for(var V=0,Ma=this.numSolversSi;V<Ma;){var Z=V++;this.solversSi[Z].solvePositionSplitImpulse()}}for(var Pa=
0,R=this.numRigidBodies;Pa<R;){var Ja=Pa++;this.rigidBodies[Ja]._integratePseudoVelocity()}for(var G=0,T=this.numSolversNgs;G<T;){var Ta=G++;this.solversNgs[Ta].preSolvePosition(a)}for(var X=0;X<c;){X++;for(var pa=0,$a=this.numSolversNgs;pa<$a;){var la=pa++;this.solversNgs[la].solvePositionNgs(a)}}for(var na=0,ea=this.numSolvers;na<ea;){var ra=na++;this.solvers[ra].postSolve()}for(var ua=0,sa=this.numRigidBodies;ua<sa;)for(var qb=ua++,ya=this.rigidBodies[qb],da=ya._shapeList;null!=da;){var xa=da._next,
yb=da._ptransform,Aa=da._localTransform,ka=ya._ptransform;var Ba=ka._rotation00*Aa._rotation00+ka._rotation01*Aa._rotation10+ka._rotation02*Aa._rotation20;var wa=ka._rotation00*Aa._rotation01+ka._rotation01*Aa._rotation11+ka._rotation02*Aa._rotation21;var Da=ka._rotation00*Aa._rotation02+ka._rotation01*Aa._rotation12+ka._rotation02*Aa._rotation22;var Ga=ka._rotation10*Aa._rotation00+ka._rotation11*Aa._rotation10+ka._rotation12*Aa._rotation20;var Ka=ka._rotation10*Aa._rotation01+ka._rotation11*Aa._rotation11+
ka._rotation12*Aa._rotation21;var La=ka._rotation10*Aa._rotation02+ka._rotation11*Aa._rotation12+ka._rotation12*Aa._rotation22;var Fb=ka._rotation20*Aa._rotation00+ka._rotation21*Aa._rotation10+ka._rotation22*Aa._rotation20;var Oa=ka._rotation20*Aa._rotation01+ka._rotation21*Aa._rotation11+ka._rotation22*Aa._rotation21;var Na=ka._rotation20*Aa._rotation02+ka._rotation21*Aa._rotation12+ka._rotation22*Aa._rotation22;yb._rotation00=Ba;yb._rotation01=wa;yb._rotation02=Da;yb._rotation10=Ga;yb._rotation11=
Ka;yb._rotation12=La;yb._rotation20=Fb;yb._rotation21=Oa;yb._rotation22=Na;var Ra=ka._rotation00*Aa._positionX+ka._rotation01*Aa._positionY+ka._rotation02*Aa._positionZ;var Pb=ka._rotation10*Aa._positionX+ka._rotation11*Aa._positionY+ka._rotation12*Aa._positionZ;var Qa=ka._rotation20*Aa._positionX+ka._rotation21*Aa._positionY+ka._rotation22*Aa._positionZ;yb._positionX=Ra;yb._positionY=Pb;yb._positionZ=Qa;yb._positionX+=ka._positionX;yb._positionY+=ka._positionY;yb._positionZ+=ka._positionZ;var Fa=
da._transform,va=da._localTransform,Ha=ya._transform;var Va=Ha._rotation00*va._rotation00+Ha._rotation01*va._rotation10+Ha._rotation02*va._rotation20;var Sa=Ha._rotation00*va._rotation01+Ha._rotation01*va._rotation11+Ha._rotation02*va._rotation21;var Xa=Ha._rotation00*va._rotation02+Ha._rotation01*va._rotation12+Ha._rotation02*va._rotation22;var Za=Ha._rotation10*va._rotation00+Ha._rotation11*va._rotation10+Ha._rotation12*va._rotation20;var ca=Ha._rotation10*va._rotation01+Ha._rotation11*va._rotation11+
Ha._rotation12*va._rotation21;var Ya=Ha._rotation10*va._rotation02+Ha._rotation11*va._rotation12+Ha._rotation12*va._rotation22;var ab=Ha._rotation20*va._rotation00+Ha._rotation21*va._rotation10+Ha._rotation22*va._rotation20;var cb=Ha._rotation20*va._rotation01+Ha._rotation21*va._rotation11+Ha._rotation22*va._rotation21;var nb=Ha._rotation20*va._rotation02+Ha._rotation21*va._rotation12+Ha._rotation22*va._rotation22;Fa._rotation00=Va;Fa._rotation01=Sa;Fa._rotation02=Xa;Fa._rotation10=Za;Fa._rotation11=
ca;Fa._rotation12=Ya;Fa._rotation20=ab;Fa._rotation21=cb;Fa._rotation22=nb;var ob=Ha._rotation00*va._positionX+Ha._rotation01*va._positionY+Ha._rotation02*va._positionZ;var eb=Ha._rotation10*va._positionX+Ha._rotation11*va._positionY+Ha._rotation12*va._positionZ;var hb=Ha._rotation20*va._positionX+Ha._rotation21*va._positionY+Ha._rotation22*va._positionZ;Fa._positionX=ob;Fa._positionY=eb;Fa._positionZ=hb;Fa._positionX+=Ha._positionX;Fa._positionY+=Ha._positionY;Fa._positionZ+=Ha._positionZ;da._geom._computeAabb(da._aabb,
da._ptransform);var tb=da._aabb._minX;var fb=da._aabb._minY;var P=da._aabb._minZ;var Vb=da._aabb._maxX;var gb=da._aabb._maxY;var Kb=da._aabb._maxZ;da._geom._computeAabb(da._aabb,da._transform);da._aabb._minX=tb<da._aabb._minX?tb:da._aabb._minX;da._aabb._minY=fb<da._aabb._minY?fb:da._aabb._minY;da._aabb._minZ=P<da._aabb._minZ?P:da._aabb._minZ;da._aabb._maxX=Vb>da._aabb._maxX?Vb:da._aabb._maxX;da._aabb._maxY=gb>da._aabb._maxY?gb:da._aabb._maxY;da._aabb._maxZ=Kb>da._aabb._maxZ?Kb:da._aabb._maxZ;if(null!=
da._proxy){var sb=da._transform._positionX-da._ptransform._positionX;var ib=da._transform._positionY-da._ptransform._positionY;var E=da._transform._positionZ-da._ptransform._positionZ;var Ea=da.displacement;Ea.x=sb;Ea.y=ib;Ea.z=E;da._rigidBody._world._broadPhase.moveProxy(da._proxy,da._aabb,da.displacement)}da=xa}}},__class__:Sj};var Gi=function(){this.invDt=this.dt=0;this.dtRatio=1};g["oimo.dynamics.TimeStep"]=Gi;Gi.__name__="oimo.dynamics.TimeStep";Gi.prototype={dt:null,invDt:null,dtRatio:null,
__class__:Gi};var lj=function(a,b){null==a&&(a=2);switch(a){case 1:this._broadPhase=new hh;break;case 2:this._broadPhase=new ih}this._contactManager=new Rj(this._broadPhase);null==b&&(b=new w(0,-9.80665,0));this._gravity=new w(b.x,b.y,b.z);this._jointListLast=this._jointList=this._rigidBodyListLast=this._rigidBodyList=null;this._numIslands=this._numJoints=this._numShapes=this._numRigidBodies=0;this._numVelocityIterations=10;this._numPositionIterations=5;this._rayCastWrapper=new Hi;this._convexCastWrapper=
new Ii;this._aabbTestWrapper=new Ji;this._island=new Sj;this._solversInIslands=Array(ta.islandInitialConstraintArraySize);this._rigidBodyStack=Array(ta.islandInitialRigidBodyArraySize);this._timeStep=new Gi;this._pool=new vl;this._shapeIdCount=0};g["oimo.dynamics.World"]=lj;lj.__name__="oimo.dynamics.World";lj.prototype={_rigidBodyList:null,_rigidBodyListLast:null,_jointList:null,_jointListLast:null,_broadPhase:null,_contactManager:null,_numRigidBodies:null,_numJoints:null,_numShapes:null,_numIslands:null,
_numVelocityIterations:null,_numPositionIterations:null,_gravity:null,_timeStep:null,_island:null,_rigidBodyStack:null,_solversInIslands:null,_numSolversInIslands:null,_rayCastWrapper:null,_convexCastWrapper:null,_aabbTestWrapper:null,_pool:null,_shapeIdCount:null,_updateContacts:function(){var a=(new Date).getTime()/1E3;this._contactManager._updateContacts();var b=(new Date).getTime()/1E3;af.broadPhaseCollisionTime=1E3*(b-a);a=(new Date).getTime()/1E3;for(b=this._contactManager._contactList;null!=
b;){var c=b._next;b._shouldBeSkipped||b._updateManifold();b=c}b=(new Date).getTime()/1E3;af.narrowPhaseCollisionTime=1E3*(b-a)},_solveIslands:function(){var a=(new Date).getTime()/1E3;if(ta.disableSleeping)for(var b=this._rigidBodyList;null!=b;){var c=b._next;b._sleeping=!1;b._sleepTime=0;b=c}if(this._rigidBodyStack.length<this._numRigidBodies){for(b=this._rigidBodyStack.length<<1;b<this._numRigidBodies;)b<<=1;this._rigidBodyStack=Array(b)}this._numIslands=0;b=this._island;c=this._gravity;b.gravityX=
c.x;b.gravityY=c.y;b.gravityZ=c.z;b=this._rigidBodyList;for(this._numSolversInIslands=0;null!=b;){for(c=b._next;!b._addedToIsland&&!b._sleeping&&1!=b._type;){if(0==b._numContactLinks&&0==b._numJointLinks){this._island._stepSingleRigidBody(this._timeStep,b);this._numIslands++;break}this.buildIsland(b);this._island._step(this._timeStep,this._numVelocityIterations,this._numPositionIterations);this._island._clear();this._numIslands++;break}b=c}this._contactManager._postSolve();for(b=this._rigidBodyList;null!=
b;)c=b._next,b._addedToIsland=!1,b=c;for(b=this._rigidBodyList;null!=b;)c=b._next,b._forceX=0,b._forceY=0,b._forceZ=0,b._torqueX=0,b._torqueY=0,b._torqueZ=0,b=c;for(;0<this._numSolversInIslands;)this._solversInIslands[--this._numSolversInIslands]._addedToIsland=!1,this._solversInIslands[this._numSolversInIslands]=null;b=(new Date).getTime()/1E3;af.dynamicsTime=1E3*(b-a)},buildIsland:function(a){var b=1;this._island._addRigidBody(a);for(this._rigidBodyStack[0]=a;0<b;)if(a=this._rigidBodyStack[--b],
this._rigidBodyStack[b]=null,1!=a._type){for(var c=a._contactLinkList;null!=c;){var d=c._next,e=c._contact._contactConstraint,f=c._contact._contactConstraint._solver;if(e.isTouching()&&!f._addedToIsland){if(this._solversInIslands.length==this._numSolversInIslands){for(var k=Array(this._numSolversInIslands<<1),m=0,h=this._numSolversInIslands;m<h;){var n=m++;k[n]=this._solversInIslands[n];this._solversInIslands[n]=null}this._solversInIslands=k}this._solversInIslands[this._numSolversInIslands++]=f;this._island._addConstraintSolver(f,
e._positionCorrectionAlgorithm);c=c._other;c._addedToIsland||(this._island._addRigidBody(c),this._rigidBodyStack[b++]=c)}c=d}for(d=a._jointLinkList;null!=d;){a=d._next;c=d._joint;e=c._solver;if(!e._addedToIsland){if(this._solversInIslands.length==this._numSolversInIslands){f=Array(this._numSolversInIslands<<1);k=0;for(m=this._numSolversInIslands;k<m;)h=k++,f[h]=this._solversInIslands[h],this._solversInIslands[h]=null;this._solversInIslands=f}this._solversInIslands[this._numSolversInIslands++]=e;this._island._addConstraintSolver(e,
c._positionCorrectionAlgorithm);d=d._other;d._addedToIsland||(this._island._addRigidBody(d),this._rigidBodyStack[b++]=d)}d=a}}},step:function(a){0<this._timeStep.dt&&(this._timeStep.dtRatio=a/this._timeStep.dt);this._timeStep.dt=a;this._timeStep.invDt=1/a;a=(new Date).getTime()/1E3;this._updateContacts();this._solveIslands();var b=(new Date).getTime()/1E3;af.totalTime=1E3*(b-a)},addRigidBody:function(a){if(null!=a._world)throw Error("A rigid body cannot belong to multiple worlds.");null==this._rigidBodyList?
this._rigidBodyList=a:(this._rigidBodyListLast._next=a,a._prev=this._rigidBodyListLast);this._rigidBodyListLast=a;a._world=this;for(a=a._shapeList;null!=a;){var b=a._next;a._proxy=this._broadPhase.createProxy(a,a._aabb);a._id=this._shapeIdCount++;this._numShapes++;a=b}this._numRigidBodies++},removeJoint:function(a){if(a._world!=this)throw Error("The joint doesn't belong to the world.");var b=a._prev,c=a._next;null!=b&&(b._next=c);null!=c&&(c._prev=b);a==this._jointList&&(this._jointList=this._jointList._next);
a==this._jointListLast&&(this._jointListLast=this._jointListLast._prev);a._next=null;a._prev=null;a._world=null;b=a._link1._prev;c=a._link1._next;null!=b&&(b._next=c);null!=c&&(c._prev=b);a._link1==a._b1._jointLinkList&&(a._b1._jointLinkList=a._b1._jointLinkList._next);a._link1==a._b1._jointLinkListLast&&(a._b1._jointLinkListLast=a._b1._jointLinkListLast._prev);a._link1._next=null;a._link1._prev=null;b=a._link2._prev;c=a._link2._next;null!=b&&(b._next=c);null!=c&&(c._prev=b);a._link2==a._b2._jointLinkList&&
(a._b2._jointLinkList=a._b2._jointLinkList._next);a._link2==a._b2._jointLinkListLast&&(a._b2._jointLinkListLast=a._b2._jointLinkListLast._prev);a._link2._next=null;a._link2._prev=null;a._link1._other=null;a._link2._other=null;a._b1._numJointLinks--;a._b2._numJointLinks--;b=a._b1;b._sleeping=!1;b._sleepTime=0;a=a._b2;a._sleeping=!1;a._sleepTime=0;this._numJoints--},__class__:lj};var Hi=function(){this.rayCastHit=new tg;this.begin=new w;this.end=new w;this.callback=null};g["oimo.dynamics._World.RayCastWrapper"]=
Hi;Hi.__name__="oimo.dynamics._World.RayCastWrapper";Hi.__super__=tf;Hi.prototype=v(tf.prototype,{callback:null,begin:null,end:null,rayCastHit:null,__class__:Hi});var Ii=function(){this.rayCastHit=new tg;this.begin=new Ld;this.translation=new w;this.zero=new w;this.convex=this.callback=null};g["oimo.dynamics._World.ConvexCastWrapper"]=Ii;Ii.__name__="oimo.dynamics._World.ConvexCastWrapper";Ii.__super__=tf;Ii.prototype=v(tf.prototype,{callback:null,begin:null,translation:null,convex:null,rayCastHit:null,
zero:null,__class__:Ii});var Ji=function(){this._aabb=new Kj;this._callback=null};g["oimo.dynamics._World.AabbTestWrapper"]=Ji;Ji.__name__="oimo.dynamics._World.AabbTestWrapper";Ji.__super__=tf;Ji.prototype=v(tf.prototype,{_callback:null,_aabb:null,__class__:Ji});var ym=function(){};g["oimo.dynamics.callback.AabbTestCallback"]=ym;ym.__name__="oimo.dynamics.callback.AabbTestCallback";var dm=function(){};g["oimo.dynamics.callback.ContactCallback"]=dm;dm.__name__="oimo.dynamics.callback.ContactCallback";
dm.prototype={beginContact:function(a){},preSolve:function(a){},postSolve:function(a){},endContact:function(a){},__class__:dm};var zm=function(){};g["oimo.dynamics.callback.RayCastCallback"]=zm;zm.__name__="oimo.dynamics.callback.RayCastCallback";var af=function(){};g["oimo.dynamics.common.Performance"]=af;af.__name__="oimo.dynamics.common.Performance";var Gd=function(){this._b2=this._b1=null;this._addedToIsland=!1};g["oimo.dynamics.constraint.ConstraintSolver"]=Gd;Gd.__name__="oimo.dynamics.constraint.ConstraintSolver";
Gd.prototype={_b1:null,_b2:null,_addedToIsland:null,preSolveVelocity:function(a){},warmStart:function(a){},solveVelocity:function(){},postSolveVelocity:function(a){},preSolvePosition:function(a){},solvePositionSplitImpulse:function(){},solvePositionNgs:function(a){},postSolve:function(){},__class__:Gd};var $e=function(){};g["oimo.dynamics.constraint.PositionCorrectionAlgorithm"]=$e;$e.__name__="oimo.dynamics.constraint.PositionCorrectionAlgorithm";var Qj=function(a){this._solver=new Nk(this);this._manifold=
a};g["oimo.dynamics.constraint.contact.ContactConstraint"]=Qj;Qj.__name__="oimo.dynamics.constraint.contact.ContactConstraint";Qj.prototype={_positionCorrectionAlgorithm:null,_manifold:null,_s1:null,_s2:null,_tf1:null,_tf2:null,_b1:null,_b2:null,_solver:null,_getVelocitySolverInfo:function(a,b){b.b1=this._b1;b.b2=this._b2;var c=this._manifold._normalX;var d=this._manifold._normalY;var e=this._manifold._normalZ;var f=this._manifold._tangentX;var k=this._manifold._tangentY;var m=this._manifold._tangentZ;
var h=this._manifold._binormalX;var n=this._manifold._binormalY;var g=this._manifold._binormalZ;for(var l=Math.sqrt(this._s1._friction*this._s2._friction),p=Math.sqrt(this._s1._restitution*this._s2._restitution),y=this._manifold._numPoints,H=b.numRows=0;H<y;){var C=H++;C=this._manifold._points[C];if(0>C._depth)C._disabled=!0,C=C._impulse,C.impulseN=0,C.impulseT=0,C.impulseB=0,C.impulseP=0,C.impulseLX=0,C.impulseLY=0,C.impulseLZ=0;else{C._disabled=!1;var r=b.rows[b.numRows++];r.friction=l;r.cfm=0;
var I=r.jacobianN;I.lin1X=c;I.lin1Y=d;I.lin1Z=e;I.lin2X=c;I.lin2Y=d;I.lin2Z=e;I.ang1X=C._relPos1Y*e-C._relPos1Z*d;I.ang1Y=C._relPos1Z*c-C._relPos1X*e;I.ang1Z=C._relPos1X*d-C._relPos1Y*c;I.ang2X=C._relPos2Y*e-C._relPos2Z*d;I.ang2Y=C._relPos2Z*c-C._relPos2X*e;I.ang2Z=C._relPos2X*d-C._relPos2Y*c;I=r.jacobianT;I.lin1X=f;I.lin1Y=k;I.lin1Z=m;I.lin2X=f;I.lin2Y=k;I.lin2Z=m;I.ang1X=C._relPos1Y*m-C._relPos1Z*k;I.ang1Y=C._relPos1Z*f-C._relPos1X*m;I.ang1Z=C._relPos1X*k-C._relPos1Y*f;I.ang2X=C._relPos2Y*m-C._relPos2Z*
k;I.ang2Y=C._relPos2Z*f-C._relPos2X*m;I.ang2Z=C._relPos2X*k-C._relPos2Y*f;I=r.jacobianB;I.lin1X=h;I.lin1Y=n;I.lin1Z=g;I.lin2X=h;I.lin2Y=n;I.lin2Z=g;I.ang1X=C._relPos1Y*g-C._relPos1Z*n;I.ang1Y=C._relPos1Z*h-C._relPos1X*g;I.ang1Z=C._relPos1X*n-C._relPos1Y*h;I.ang2X=C._relPos2Y*g-C._relPos2Z*n;I.ang2Y=C._relPos2Z*h-C._relPos2X*g;I.ang2Z=C._relPos2X*n-C._relPos2Y*h;I=r.jacobianN;I=I.lin1X*this._b1._velX+I.lin1Y*this._b1._velY+I.lin1Z*this._b1._velZ+(I.ang1X*this._b1._angVelX+I.ang1Y*this._b1._angVelY+
I.ang1Z*this._b1._angVelZ)-(I.lin2X*this._b2._velX+I.lin2Y*this._b2._velY+I.lin2Z*this._b2._velZ+(I.ang2X*this._b2._angVelX+I.ang2Y*this._b2._angVelY+I.ang2Z*this._b2._angVelZ));r.rhs=I<-ta.contactEnableBounceThreshold&&!C._warmStarted?-I*p:0;this._positionCorrectionAlgorithm==$e.BAUMGARTE&&C._depth>ta.linearSlop&&(I=(C._depth-ta.linearSlop)*ta.velocityBaumgarte*a.invDt,r.rhs<I&&(r.rhs=I));C._warmStarted||(I=C._impulse,I.impulseN=0,I.impulseT=0,I.impulseB=0,I.impulseP=0,I.impulseLX=0,I.impulseLY=
0,I.impulseLZ=0);r.impulse=C._impulse}}},_getPositionSolverInfo:function(a){a.b1=this._b1;a.b2=this._b2;var b=this._manifold._normalX;var c=this._manifold._normalY;var d=this._manifold._normalZ;for(var e=this._manifold._numPoints,f=a.numRows=0;f<e;){var k=f++;k=this._manifold._points[k];if(!k._disabled){var m=a.rows[a.numRows++],h=m.jacobianN;h.lin1X=b;h.lin1Y=c;h.lin1Z=d;h.lin2X=b;h.lin2Y=c;h.lin2Z=d;h.ang1X=k._relPos1Y*d-k._relPos1Z*c;h.ang1Y=k._relPos1Z*b-k._relPos1X*d;h.ang1Z=k._relPos1X*c-k._relPos1Y*
b;h.ang2X=k._relPos2Y*d-k._relPos2Z*c;h.ang2Y=k._relPos2Z*b-k._relPos2X*d;h.ang2Z=k._relPos2X*c-k._relPos2Y*b;m.rhs=k._depth-ta.linearSlop;0>m.rhs&&(m.rhs=0);m.impulse=k._impulse}}},_syncManifold:function(){this._manifold._updateDepthsAndPositions(this._tf1,this._tf2)},isTouching:function(){for(var a=0,b=this._manifold._numPoints;a<b;){var c=a++;if(0<=this._manifold._points[c]._depth)return!0}return!1},__class__:Qj};var Ki=function(){this.impulseLZ=this.impulseLY=this.impulseLX=this.impulseP=this.impulseB=
this.impulseT=this.impulseN=0};g["oimo.dynamics.constraint.contact.ContactImpulse"]=Ki;Ki.__name__="oimo.dynamics.constraint.contact.ContactImpulse";Ki.prototype={impulseN:null,impulseT:null,impulseB:null,impulseP:null,impulseLX:null,impulseLY:null,impulseLZ:null,copyFrom:function(a){this.impulseN=a.impulseN;this.impulseT=a.impulseT;this.impulseB=a.impulseB;this.impulseLX=a.impulseLX;this.impulseLY=a.impulseLY;this.impulseLZ=a.impulseLZ},__class__:Ki};var wl=function(){this._numPoints=this._binormalZ=
this._binormalY=this._binormalX=this._tangentZ=this._tangentY=this._tangentX=this._normalZ=this._normalY=this._normalX=0;this._points=Array(ta.maxManifoldPoints);for(var a=0,b=ta.maxManifoldPoints;a<b;){var c=a++;this._points[c]=new Ok}};g["oimo.dynamics.constraint.contact.Manifold"]=wl;wl.__name__="oimo.dynamics.constraint.contact.Manifold";wl.prototype={_normalX:null,_normalY:null,_normalZ:null,_tangentX:null,_tangentY:null,_tangentZ:null,_binormalX:null,_binormalY:null,_binormalZ:null,_numPoints:null,
_points:null,_clear:function(){for(var a=0,b=this._numPoints;a<b;){var c=a++;c=this._points[c];c._localPos1X=0;c._localPos1Y=0;c._localPos1Z=0;c._localPos2X=0;c._localPos2Y=0;c._localPos2Z=0;c._relPos1X=0;c._relPos1Y=0;c._relPos1Z=0;c._relPos2X=0;c._relPos2Y=0;c._relPos2Z=0;c._pos1X=0;c._pos1Y=0;c._pos1Z=0;c._pos2X=0;c._pos2Y=0;c._pos2Z=0;c._depth=0;var d=c._impulse;d.impulseN=0;d.impulseT=0;d.impulseB=0;d.impulseP=0;d.impulseLX=0;d.impulseLY=0;d.impulseLZ=0;c._warmStarted=!1;c._disabled=!1;c._id=
-1}this._numPoints=0},_buildBasis:function(a){this._normalX=a.x;this._normalY=a.y;this._normalZ=a.z;var b=a.x,c=a.y;a=a.z;var d=b*b,e=c*c,f=a*a;if(d<e)if(d<f){f=1/Math.sqrt(e+f);d=0;e=-a*f;f*=c;var k=c*f-a*e;a=-b*f;b*=e}else e=1/Math.sqrt(d+e),d=-c*e,e*=b,f=0,k=-a*e,a*=d,b=b*e-c*d;else e<f?(f=1/Math.sqrt(d+f),d=a*f,e=0,f*=-b,k=c*f,a=a*d-b*f,b=-c*d):(e=1/Math.sqrt(d+e),d=-c*e,e*=b,f=0,k=-a*e,a*=d,b=b*e-c*d);this._tangentX=d;this._tangentY=e;this._tangentZ=f;this._binormalX=k;this._binormalY=a;this._binormalZ=
b},_updateDepthsAndPositions:function(a,b){for(var c=0,d=this._numPoints;c<d;){var e=c++;e=this._points[e];var f=a._rotation00*e._localPos1X+a._rotation01*e._localPos1Y+a._rotation02*e._localPos1Z;var k=a._rotation10*e._localPos1X+a._rotation11*e._localPos1Y+a._rotation12*e._localPos1Z;var m=a._rotation20*e._localPos1X+a._rotation21*e._localPos1Y+a._rotation22*e._localPos1Z;e._relPos1X=f;e._relPos1Y=k;e._relPos1Z=m;f=b._rotation00*e._localPos2X+b._rotation01*e._localPos2Y+b._rotation02*e._localPos2Z;
k=b._rotation10*e._localPos2X+b._rotation11*e._localPos2Y+b._rotation12*e._localPos2Z;m=b._rotation20*e._localPos2X+b._rotation21*e._localPos2Y+b._rotation22*e._localPos2Z;e._relPos2X=f;e._relPos2Y=k;e._relPos2Z=m;e._pos1X=e._relPos1X+a._positionX;e._pos1Y=e._relPos1Y+a._positionY;e._pos1Z=e._relPos1Z+a._positionZ;e._pos2X=e._relPos2X+b._positionX;e._pos2Y=e._relPos2Y+b._positionY;e._pos2Z=e._relPos2Z+b._positionZ;e._depth=-((e._pos1X-e._pos2X)*this._normalX+(e._pos1Y-e._pos2Y)*this._normalY+(e._pos1Z-
e._pos2Z)*this._normalZ)}},__class__:wl};var Ok=function(){this._depth=this._pos2Z=this._pos2Y=this._pos2X=this._pos1Z=this._pos1Y=this._pos1X=this._relPos2Z=this._relPos2Y=this._relPos2X=this._relPos1Z=this._relPos1Y=this._relPos1X=this._localPos2Z=this._localPos2Y=this._localPos2X=this._localPos1Z=this._localPos1Y=this._localPos1X=0;this._impulse=new Ki;this._disabled=this._warmStarted=!1;this._id=-1};g["oimo.dynamics.constraint.contact.ManifoldPoint"]=Ok;Ok.__name__="oimo.dynamics.constraint.contact.ManifoldPoint";
Ok.prototype={_localPos1X:null,_localPos1Y:null,_localPos1Z:null,_localPos2X:null,_localPos2Y:null,_localPos2Z:null,_relPos1X:null,_relPos1Y:null,_relPos1Z:null,_relPos2X:null,_relPos2Y:null,_relPos2Z:null,_pos1X:null,_pos1Y:null,_pos1Z:null,_pos2X:null,_pos2Y:null,_pos2Z:null,_depth:null,_impulse:null,_warmStarted:null,_disabled:null,_id:null,__class__:Ok};var xl=function(a){this._manifold=a;this.numOldPoints=0;this.oldPoints=Array(ta.maxManifoldPoints);a=0;for(var b=ta.maxManifoldPoints;a<b;){var c=
a++;this.oldPoints[c]=new Ok}};g["oimo.dynamics.constraint.contact.ManifoldUpdater"]=xl;xl.__name__="oimo.dynamics.constraint.contact.ManifoldUpdater";xl.prototype={_manifold:null,numOldPoints:null,oldPoints:null,removeOutdatedPoints:function(){for(var a=this._manifold._numPoints;0<=--a;){var b=this._manifold._points[a];var c=b._pos1X-b._pos2X;var d=b._pos1Y-b._pos2Y;b=b._pos1Z-b._pos2Z;var e=this._manifold._normalX*c+this._manifold._normalY*d+this._manifold._normalZ*b;e>ta.contactPersistenceThreshold?
this.removeManifoldPoint(a):(c+=this._manifold._normalX*-e,d+=this._manifold._normalY*-e,b+=this._manifold._normalZ*-e,c*c+d*d+b*b>ta.contactPersistenceThreshold*ta.contactPersistenceThreshold&&this.removeManifoldPoint(a))}},removeManifoldPoint:function(a){var b=--this._manifold._numPoints;if(a!=b){var c=this._manifold._points[a];this._manifold._points[a]=this._manifold._points[b];this._manifold._points[b]=c}a=this._manifold._points[b];a._localPos1X=0;a._localPos1Y=0;a._localPos1Z=0;a._localPos2X=
0;a._localPos2Y=0;a._localPos2Z=0;a._relPos1X=0;a._relPos1Y=0;a._relPos1Z=0;a._relPos2X=0;a._relPos2Y=0;a._relPos2Z=0;a._pos1X=0;a._pos1Y=0;a._pos1Z=0;a._pos2X=0;a._pos2Y=0;a._pos2Z=0;a._depth=0;b=a._impulse;b.impulseN=0;b.impulseT=0;b.impulseB=0;b.impulseP=0;b.impulseLX=0;b.impulseLY=0;b.impulseLZ=0;a._warmStarted=!1;a._disabled=!1;a._id=-1},addManifoldPoint:function(a,b,c){var d=this._manifold._numPoints;if(d==ta.maxManifoldPoints){d=this.computeTargetIndex(a,b,c);d=this._manifold._points[d];var e=
a.position1;d._pos1X=e.x;d._pos1Y=e.y;d._pos1Z=e.z;e=a.position2;d._pos2X=e.x;d._pos2Y=e.y;d._pos2Z=e.z;d._relPos1X=d._pos1X-b._positionX;d._relPos1Y=d._pos1Y-b._positionY;d._relPos1Z=d._pos1Z-b._positionZ;d._relPos2X=d._pos2X-c._positionX;d._relPos2Y=d._pos2Y-c._positionY;d._relPos2Z=d._pos2Z-c._positionZ;e=b._rotation00*d._relPos1X+b._rotation10*d._relPos1Y+b._rotation20*d._relPos1Z;var f=b._rotation01*d._relPos1X+b._rotation11*d._relPos1Y+b._rotation21*d._relPos1Z;b=b._rotation02*d._relPos1X+b._rotation12*
d._relPos1Y+b._rotation22*d._relPos1Z;d._localPos1X=e;d._localPos1Y=f;d._localPos1Z=b;b=c._rotation00*d._relPos2X+c._rotation10*d._relPos2Y+c._rotation20*d._relPos2Z;e=c._rotation01*d._relPos2X+c._rotation11*d._relPos2Y+c._rotation21*d._relPos2Z;c=c._rotation02*d._relPos2X+c._rotation12*d._relPos2Y+c._rotation22*d._relPos2Z;d._localPos2X=b;d._localPos2Y=e;d._localPos2Z=c;d._depth=a.depth;c=d._impulse;c.impulseN=0;c.impulseT=0;c.impulseB=0;c.impulseP=0;c.impulseLX=0;c.impulseLY=0;c.impulseLZ=0;d._id=
a.id;d._warmStarted=!1;d._disabled=!1}else d=this._manifold._points[d],e=a.position1,d._pos1X=e.x,d._pos1Y=e.y,d._pos1Z=e.z,e=a.position2,d._pos2X=e.x,d._pos2Y=e.y,d._pos2Z=e.z,d._relPos1X=d._pos1X-b._positionX,d._relPos1Y=d._pos1Y-b._positionY,d._relPos1Z=d._pos1Z-b._positionZ,d._relPos2X=d._pos2X-c._positionX,d._relPos2Y=d._pos2Y-c._positionY,d._relPos2Z=d._pos2Z-c._positionZ,e=b._rotation00*d._relPos1X+b._rotation10*d._relPos1Y+b._rotation20*d._relPos1Z,f=b._rotation01*d._relPos1X+b._rotation11*
d._relPos1Y+b._rotation21*d._relPos1Z,b=b._rotation02*d._relPos1X+b._rotation12*d._relPos1Y+b._rotation22*d._relPos1Z,d._localPos1X=e,d._localPos1Y=f,d._localPos1Z=b,b=c._rotation00*d._relPos2X+c._rotation10*d._relPos2Y+c._rotation20*d._relPos2Z,e=c._rotation01*d._relPos2X+c._rotation11*d._relPos2Y+c._rotation21*d._relPos2Z,c=c._rotation02*d._relPos2X+c._rotation12*d._relPos2Y+c._rotation22*d._relPos2Z,d._localPos2X=b,d._localPos2Y=e,d._localPos2Z=c,d._depth=a.depth,c=d._impulse,c.impulseN=0,c.impulseT=
0,c.impulseB=0,c.impulseP=0,c.impulseLX=0,c.impulseLY=0,c.impulseLZ=0,d._id=a.id,d._warmStarted=!1,d._disabled=!1,this._manifold._numPoints++},computeTargetIndex:function(a,b,c){var d=this._manifold._points[0],e=this._manifold._points[1],f=this._manifold._points[2],k=this._manifold._points[3],m=d._depth,h=0;e._depth>m&&(m=e._depth,h=1);f._depth>m&&(m=f._depth,h=2);k._depth>m&&(m=k._depth,h=3);var n=a.position1;var g=n.x;var l=n.y;var p=n.z;g-=b._positionX;l-=b._positionY;p-=b._positionZ;var y=e._relPos1X,
H=e._relPos1Y,C=e._relPos1Z,r=f._relPos1X,I=f._relPos1Y,q=f._relPos1Z,t=k._relPos1X,z=k._relPos1Y,u=k._relPos1Z;var A=r-y;var w=I-H;var O=q-C;var v=g-t;var B=l-z;var x=p-u;var F=t-y;var qa=z-H;var M=u-C;var L=g-r;var Ia=l-I;var Ca=p-q;var ja=g-y;var D=l-H;var J=p-C;var ba=t-r;var ha=z-I;var N=u-q;var aa=w*x-O*B;var W=O*v-A*x;var fa=A*B-w*v;var Y=qa*Ca-M*Ia;var mb=M*L-F*Ca;var S=F*Ia-qa*L;var U=D*N-J*ha;var Q=J*ba-ja*N;var ia=ja*ha-D*ba;var ma=aa*aa+W*W+fa*fa,V=Y*Y+mb*mb+S*S,Ma=U*U+Q*Q+ia*ia,Z=ma>
V?ma>Ma?ma:Ma:V>Ma?V:Ma,Pa=d._relPos1X,R=d._relPos1Y,Ja=d._relPos1Z,G=f._relPos1X,T=f._relPos1Y,Ta=f._relPos1Z,X=k._relPos1X,pa=k._relPos1Y,$a=k._relPos1Z;var la=G-Pa;var na=T-R;var ea=Ta-Ja;var ka=g-X;var ra=l-pa;var sa=p-$a;var ta=X-Pa;var ua=pa-R;var da=$a-Ja;var va=g-G;var Ha=l-T;var Aa=p-Ta;var qb=g-Pa;var ya=l-R;var xa=p-Ja;var Ba=X-G;var wa=pa-T;var Fa=$a-Ta;var Da=na*sa-ea*ra;var Ga=ea*ka-la*sa;var Ka=la*ra-na*ka;var La=ua*Aa-da*Ha;var Fb=da*va-ta*Aa;var Oa=ta*Ha-ua*va;var Na=ya*Fa-xa*wa;
var Ra=xa*Ba-qb*Fa;var Pb=qb*wa-ya*Ba;var Qa=Da*Da+Ga*Ga+Ka*Ka,Va=La*La+Fb*Fb+Oa*Oa,Sa=Na*Na+Ra*Ra+Pb*Pb,Xa=Qa>Va?Qa>Sa?Qa:Sa:Va>Sa?Va:Sa,Za=d._relPos1X,ca=d._relPos1Y,Ya=d._relPos1Z,ab=e._relPos1X,cb=e._relPos1Y,nb=e._relPos1Z,ob=k._relPos1X,eb=k._relPos1Y,hb=k._relPos1Z;var tb=ab-Za;var fb=cb-ca;var P=nb-Ya;var Vb=g-ob;var gb=l-eb;var Kb=p-hb;var sb=ob-Za;var ib=eb-ca;var E=hb-Ya;var Ea=g-ab;var za=l-cb;var Ib=p-nb;var bb=g-Za;var gc=l-ca;var wb=p-Ya;var kb=ob-ab;var lb=eb-cb;var Xb=hb-nb;var Ub=
fb*Kb-P*gb;var Hb=P*Vb-tb*Kb;var pb=tb*gb-fb*Vb;var xb=ib*Ib-E*za;var Ua=E*Ea-sb*Ib;var Cb=sb*za-ib*Ea;var Jb=gc*Xb-wb*lb;var Wa=wb*kb-bb*Xb;var we=bb*lb-gc*kb;var Cc=Ub*Ub+Hb*Hb+pb*pb,Eb=xb*xb+Ua*Ua+Cb*Cb,Db=Jb*Jb+Wa*Wa+we*we,jb=Cc>Eb?Cc>Db?Cc:Db:Eb>Db?Eb:Db,rb=d._relPos1X,zb=d._relPos1Y,db=d._relPos1Z,Ob=e._relPos1X,vb=e._relPos1Y,Ab=e._relPos1Z,$b=f._relPos1X,Gb=f._relPos1Y,Mb=f._relPos1Z;var Lb=Ob-rb;var ub=vb-zb;var Nb=Ab-db;var Tb=g-$b;var Wb=l-Gb;var Qb=p-Mb;var Rb=$b-rb;var Zb=Gb-zb;var ac=
Mb-db;var cc=g-Ob;var dc=l-vb;var hc=p-Ab;var ic=g-rb;var jc=l-zb;var uc=p-db;var kc=$b-Ob;var lc=Gb-vb;var mc=Mb-Ab;var nc=ub*Qb-Nb*Wb;var tc=Nb*Tb-Lb*Qb;var oc=Lb*Wb-ub*Tb;var pc=Zb*hc-ac*dc;var Sb=ac*cc-Rb*hc;var qc=Rb*dc-Zb*cc;var sc=jc*mc-uc*lc;var vc=uc*kc-ic*mc;var wc=ic*lc-jc*kc;var fc=nc*nc+tc*tc+oc*oc,zc=pc*pc+Sb*Sb+qc*qc,xc=sc*sc+vc*vc+wc*wc,Bc=fc>zc?fc>xc?fc:xc:zc>xc?zc:xc,rc=Z,Ac=0;if(Xa>rc&&1!=h||0==h)rc=Xa,Ac=1;jb>rc&&2!=h&&(rc=jb,Ac=2);Bc>rc&&3!=h&&(rc=Bc,Ac=3);return Ac},findNearestContactPointIndex:function(a,
b,c){for(var d=ta.contactPersistenceThreshold*ta.contactPersistenceThreshold,e=-1,f=0,k=this._manifold._numPoints;f<k;){var m=f++,h=this._manifold._points[m];var n=a.position1;var g=n.x;var l=n.y;var p=n.z;var y=a.position2;var H=y.x;n=y.y;y=y.z;g-=b._positionX;l-=b._positionY;p-=b._positionZ;H-=c._positionX;n-=c._positionY;y-=c._positionZ;g=h._relPos1X-g;l=h._relPos1Y-l;p=h._relPos1Z-p;H=h._relPos2X-H;n=h._relPos2Y-n;h=h._relPos2Z-y;y=g*g+l*l+p*p;h=H*H+n*n+h*h;h=y<h?y:h;h<d&&(d=h,e=m)}return e},
totalUpdate:function(a,b,c){this.numOldPoints=this._manifold._numPoints;for(var d=0,e=this.numOldPoints;d<e;){var f=d++,k=this.oldPoints[f];f=this._manifold._points[f];k._localPos1X=f._localPos1X;k._localPos1Y=f._localPos1Y;k._localPos1Z=f._localPos1Z;k._localPos2X=f._localPos2X;k._localPos2Y=f._localPos2Y;k._localPos2Z=f._localPos2Z;k._relPos1X=f._relPos1X;k._relPos1Y=f._relPos1Y;k._relPos1Z=f._relPos1Z;k._relPos2X=f._relPos2X;k._relPos2Y=f._relPos2Y;k._relPos2Z=f._relPos2Z;k._pos1X=f._pos1X;k._pos1Y=
f._pos1Y;k._pos1Z=f._pos1Z;k._pos2X=f._pos2X;k._pos2Y=f._pos2Y;k._pos2Z=f._pos2Z;k._depth=f._depth;k._impulse.copyFrom(f._impulse);k._id=f._id;k._warmStarted=f._warmStarted;k._disabled=!1}d=a.numPoints;this._manifold._numPoints=d;for(e=0;e<d;){f=e++;k=this._manifold._points[f];f=a.points[f];var m=f.position1;k._pos1X=m.x;k._pos1Y=m.y;k._pos1Z=m.z;m=f.position2;k._pos2X=m.x;k._pos2Y=m.y;k._pos2Z=m.z;k._relPos1X=k._pos1X-b._positionX;k._relPos1Y=k._pos1Y-b._positionY;k._relPos1Z=k._pos1Z-b._positionZ;
k._relPos2X=k._pos2X-c._positionX;k._relPos2Y=k._pos2Y-c._positionY;k._relPos2Z=k._pos2Z-c._positionZ;m=b._rotation00*k._relPos1X+b._rotation10*k._relPos1Y+b._rotation20*k._relPos1Z;var h=b._rotation01*k._relPos1X+b._rotation11*k._relPos1Y+b._rotation21*k._relPos1Z;var n=b._rotation02*k._relPos1X+b._rotation12*k._relPos1Y+b._rotation22*k._relPos1Z;k._localPos1X=m;k._localPos1Y=h;k._localPos1Z=n;m=c._rotation00*k._relPos2X+c._rotation10*k._relPos2Y+c._rotation20*k._relPos2Z;h=c._rotation01*k._relPos2X+
c._rotation11*k._relPos2Y+c._rotation21*k._relPos2Z;n=c._rotation02*k._relPos2X+c._rotation12*k._relPos2Y+c._rotation22*k._relPos2Z;k._localPos2X=m;k._localPos2Y=h;k._localPos2Z=n;k._depth=f.depth;m=k._impulse;m.impulseN=0;m.impulseT=0;m.impulseB=0;m.impulseP=0;m.impulseLX=0;m.impulseLY=0;m.impulseLZ=0;k._id=f.id;k._warmStarted=!1;k._disabled=!1;f=0;for(m=this.numOldPoints;f<m;)if(h=f++,h=this.oldPoints[h],k._id==h._id){k._impulse.copyFrom(h._impulse);k._warmStarted=!0;break}}},incrementalUpdate:function(a,
b,c){this._manifold._updateDepthsAndPositions(b,c);for(var d=0,e=this._manifold._numPoints;d<e;){var f=d++;this._manifold._points[f]._warmStarted=!0}a=a.points[0];d=this.findNearestContactPointIndex(a,b,c);-1==d?this.addManifoldPoint(a,b,c):(d=this._manifold._points[d],e=a.position1,d._pos1X=e.x,d._pos1Y=e.y,d._pos1Z=e.z,e=a.position2,d._pos2X=e.x,d._pos2Y=e.y,d._pos2Z=e.z,d._relPos1X=d._pos1X-b._positionX,d._relPos1Y=d._pos1Y-b._positionY,d._relPos1Z=d._pos1Z-b._positionZ,d._relPos2X=d._pos2X-c._positionX,
d._relPos2Y=d._pos2Y-c._positionY,d._relPos2Z=d._pos2Z-c._positionZ,e=b._rotation00*d._relPos1X+b._rotation10*d._relPos1Y+b._rotation20*d._relPos1Z,f=b._rotation01*d._relPos1X+b._rotation11*d._relPos1Y+b._rotation21*d._relPos1Z,b=b._rotation02*d._relPos1X+b._rotation12*d._relPos1Y+b._rotation22*d._relPos1Z,d._localPos1X=e,d._localPos1Y=f,d._localPos1Z=b,b=c._rotation00*d._relPos2X+c._rotation10*d._relPos2Y+c._rotation20*d._relPos2Z,e=c._rotation01*d._relPos2X+c._rotation11*d._relPos2Y+c._rotation21*
d._relPos2Z,c=c._rotation02*d._relPos2X+c._rotation12*d._relPos2Y+c._rotation22*d._relPos2Z,d._localPos2X=b,d._localPos2Y=e,d._localPos2Z=c,d._depth=a.depth);this.removeOutdatedPoints()},__class__:xl};var yg=function(){this.flag=this.ang2Z=this.ang2Y=this.ang2X=this.ang1Z=this.ang1Y=this.ang1X=this.lin2Z=this.lin2Y=this.lin2X=this.lin1Z=this.lin1Y=this.lin1X=0};g["oimo.dynamics.constraint.info.JacobianRow"]=yg;yg.__name__="oimo.dynamics.constraint.info.JacobianRow";yg.prototype={lin1X:null,lin1Y:null,
lin1Z:null,lin2X:null,lin2Y:null,lin2Z:null,ang1X:null,ang1Y:null,ang1Z:null,ang2X:null,ang2Y:null,ang2Z:null,flag:null,updateSparsity:function(){this.flag=0;if(0!=this.lin1X||0!=this.lin1Y||0!=this.lin1Z||0!=this.lin2X||0!=this.lin2Y||0!=this.lin2Z)this.flag|=1;if(0!=this.ang1X||0!=this.ang1Y||0!=this.ang1Z||0!=this.ang2X||0!=this.ang2Y||0!=this.ang2Z)this.flag|=2},__class__:yg};var Tj=function(){this.b2=this.b1=null;this.numRows=0;this.rows=Array(ta.maxManifoldPoints);for(var a=0,b=this.rows.length;a<
b;){var c=a++;this.rows[c]=new Li}};g["oimo.dynamics.constraint.info.contact.ContactSolverInfo"]=Tj;Tj.__name__="oimo.dynamics.constraint.info.contact.ContactSolverInfo";Tj.prototype={b1:null,b2:null,numRows:null,rows:null,__class__:Tj};var Li=function(){this.jacobianN=new yg;this.jacobianT=new yg;this.jacobianB=new yg;this.friction=this.cfm=this.rhs=0;this.impulse=null};g["oimo.dynamics.constraint.info.contact.ContactSolverInfoRow"]=Li;Li.__name__="oimo.dynamics.constraint.info.contact.ContactSolverInfoRow";
Li.prototype={jacobianN:null,jacobianT:null,jacobianB:null,rhs:null,cfm:null,friction:null,impulse:null,__class__:Li};var Qk=function(){this.b2=this.b1=null;this.numRows=0;this.rows=Array(ta.maxJacobianRows);for(var a=0,b=this.rows.length;a<b;){var c=a++;this.rows[c]=new Pk}};g["oimo.dynamics.constraint.info.joint.JointSolverInfo"]=Qk;Qk.__name__="oimo.dynamics.constraint.info.joint.JointSolverInfo";Qk.prototype={b1:null,b2:null,numRows:null,rows:null,__class__:Qk};var Pk=function(){this.jacobian=
new yg;this.motorMaxImpulse=this.motorSpeed=this.maxImpulse=this.minImpulse=this.cfm=this.rhs=0;this.impulse=null};g["oimo.dynamics.constraint.info.joint.JointSolverInfoRow"]=Pk;Pk.__name__="oimo.dynamics.constraint.info.joint.JointSolverInfoRow";Pk.prototype={jacobian:null,rhs:null,cfm:null,minImpulse:null,maxImpulse:null,motorSpeed:null,motorMaxImpulse:null,impulse:null,__class__:Pk};var em=function(a,b){this._link1=new Mi(this);this._link2=new Mi(this);this._positionCorrectionAlgorithm=ta.defaultJointPositionCorrectionAlgorithm;
this._type=b;this._world=null;this._b1=a.rigidBody1;this._b2=a.rigidBody2;this._allowCollision=a.allowCollision;this._breakForce=a.breakForce;this._breakTorque=a.breakTorque;switch(a.solverType){case 0:this._solver=new Uj(this);break;case 1:this._solver=new Ni(this)}b=a.localAnchor1;this._localAnchor1X=b.x;this._localAnchor1Y=b.y;this._localAnchor1Z=b.z;a=a.localAnchor2;this._localAnchor2X=a.x;this._localAnchor2Y=a.y;this._localAnchor2Z=a.z;this._localBasisZ2Z=this._localBasisZ2Y=this._localBasisZ2X=
this._localBasisY2Z=this._localBasisY2Y=this._localBasisY2X=this._localBasisX2Z=this._localBasisX2Y=this._localBasisX2X=this._localBasisZ1Z=this._localBasisZ1Y=this._localBasisZ1X=this._localBasisY1Z=this._localBasisY1Y=this._localBasisY1X=this._localBasisX1Z=this._localBasisX1Y=this._localBasisX1X=this._anchor2Z=this._anchor2Y=this._anchor2X=this._anchor1Z=this._anchor1Y=this._anchor1X=this._relativeAnchor2Z=this._relativeAnchor2Y=this._relativeAnchor2X=this._relativeAnchor1Z=this._relativeAnchor1Y=
this._relativeAnchor1X=0;this._impulses=Array(ta.maxJacobianRows);a=0;for(b=ta.maxJacobianRows;a<b;){var c=a++;this._impulses[c]=new Rk}};g["oimo.dynamics.constraint.joint.Joint"]=em;em.__name__="oimo.dynamics.constraint.joint.Joint";em.prototype={_b1:null,_b2:null,_link1:null,_link2:null,_positionCorrectionAlgorithm:null,_allowCollision:null,_prev:null,_next:null,_world:null,_localAnchor1X:null,_localAnchor1Y:null,_localAnchor1Z:null,_localAnchor2X:null,_localAnchor2Y:null,_localAnchor2Z:null,_relativeAnchor1X:null,
_relativeAnchor1Y:null,_relativeAnchor1Z:null,_relativeAnchor2X:null,_relativeAnchor2Y:null,_relativeAnchor2Z:null,_anchor1X:null,_anchor1Y:null,_anchor1Z:null,_anchor2X:null,_anchor2Y:null,_anchor2Z:null,_localBasisX1X:null,_localBasisX1Y:null,_localBasisX1Z:null,_localBasisY1X:null,_localBasisY1Y:null,_localBasisY1Z:null,_localBasisZ1X:null,_localBasisZ1Y:null,_localBasisZ1Z:null,_localBasisX2X:null,_localBasisX2Y:null,_localBasisX2Z:null,_localBasisY2X:null,_localBasisY2Y:null,_localBasisY2Z:null,
_localBasisZ2X:null,_localBasisZ2Y:null,_localBasisZ2Z:null,_basisX1X:null,_basisX1Y:null,_basisX1Z:null,_basisY1X:null,_basisY1Y:null,_basisY1Z:null,_basisZ1X:null,_basisZ1Y:null,_basisZ1Z:null,_basisX2X:null,_basisX2Y:null,_basisX2Z:null,_basisY2X:null,_basisY2Y:null,_basisY2Z:null,_basisZ2X:null,_basisZ2Y:null,_basisZ2Z:null,_impulses:null,_appliedForceX:null,_appliedForceY:null,_appliedForceZ:null,_appliedTorqueX:null,_appliedTorqueY:null,_appliedTorqueZ:null,_breakForce:null,_breakTorque:null,
_type:null,_solver:null,_syncAnchors:function(){var a=this._b1._transform,b=this._b2._transform;var c=a._rotation00*this._localAnchor1X+a._rotation01*this._localAnchor1Y+a._rotation02*this._localAnchor1Z;var d=a._rotation10*this._localAnchor1X+a._rotation11*this._localAnchor1Y+a._rotation12*this._localAnchor1Z;var e=a._rotation20*this._localAnchor1X+a._rotation21*this._localAnchor1Y+a._rotation22*this._localAnchor1Z;this._relativeAnchor1X=c;this._relativeAnchor1Y=d;this._relativeAnchor1Z=e;c=b._rotation00*
this._localAnchor2X+b._rotation01*this._localAnchor2Y+b._rotation02*this._localAnchor2Z;d=b._rotation10*this._localAnchor2X+b._rotation11*this._localAnchor2Y+b._rotation12*this._localAnchor2Z;e=b._rotation20*this._localAnchor2X+b._rotation21*this._localAnchor2Y+b._rotation22*this._localAnchor2Z;this._relativeAnchor2X=c;this._relativeAnchor2Y=d;this._relativeAnchor2Z=e;this._anchor1X=this._relativeAnchor1X+a._positionX;this._anchor1Y=this._relativeAnchor1Y+a._positionY;this._anchor1Z=this._relativeAnchor1Z+
a._positionZ;this._anchor2X=this._relativeAnchor2X+b._positionX;this._anchor2Y=this._relativeAnchor2Y+b._positionY;this._anchor2Z=this._relativeAnchor2Z+b._positionZ;c=a._rotation00*this._localBasisX1X+a._rotation01*this._localBasisX1Y+a._rotation02*this._localBasisX1Z;d=a._rotation10*this._localBasisX1X+a._rotation11*this._localBasisX1Y+a._rotation12*this._localBasisX1Z;e=a._rotation20*this._localBasisX1X+a._rotation21*this._localBasisX1Y+a._rotation22*this._localBasisX1Z;this._basisX1X=c;this._basisX1Y=
d;this._basisX1Z=e;c=a._rotation00*this._localBasisY1X+a._rotation01*this._localBasisY1Y+a._rotation02*this._localBasisY1Z;d=a._rotation10*this._localBasisY1X+a._rotation11*this._localBasisY1Y+a._rotation12*this._localBasisY1Z;e=a._rotation20*this._localBasisY1X+a._rotation21*this._localBasisY1Y+a._rotation22*this._localBasisY1Z;this._basisY1X=c;this._basisY1Y=d;this._basisY1Z=e;c=a._rotation00*this._localBasisZ1X+a._rotation01*this._localBasisZ1Y+a._rotation02*this._localBasisZ1Z;d=a._rotation10*
this._localBasisZ1X+a._rotation11*this._localBasisZ1Y+a._rotation12*this._localBasisZ1Z;a=a._rotation20*this._localBasisZ1X+a._rotation21*this._localBasisZ1Y+a._rotation22*this._localBasisZ1Z;this._basisZ1X=c;this._basisZ1Y=d;this._basisZ1Z=a;a=b._rotation00*this._localBasisX2X+b._rotation01*this._localBasisX2Y+b._rotation02*this._localBasisX2Z;c=b._rotation10*this._localBasisX2X+b._rotation11*this._localBasisX2Y+b._rotation12*this._localBasisX2Z;d=b._rotation20*this._localBasisX2X+b._rotation21*
this._localBasisX2Y+b._rotation22*this._localBasisX2Z;this._basisX2X=a;this._basisX2Y=c;this._basisX2Z=d;a=b._rotation00*this._localBasisY2X+b._rotation01*this._localBasisY2Y+b._rotation02*this._localBasisY2Z;c=b._rotation10*this._localBasisY2X+b._rotation11*this._localBasisY2Y+b._rotation12*this._localBasisY2Z;d=b._rotation20*this._localBasisY2X+b._rotation21*this._localBasisY2Y+b._rotation22*this._localBasisY2Z;this._basisY2X=a;this._basisY2Y=c;this._basisY2Z=d;a=b._rotation00*this._localBasisZ2X+
b._rotation01*this._localBasisZ2Y+b._rotation02*this._localBasisZ2Z;c=b._rotation10*this._localBasisZ2X+b._rotation11*this._localBasisZ2Y+b._rotation12*this._localBasisZ2Z;b=b._rotation20*this._localBasisZ2X+b._rotation21*this._localBasisZ2Y+b._rotation22*this._localBasisZ2Z;this._basisZ2X=a;this._basisZ2Y=c;this._basisZ2Z=b},_getVelocitySolverInfo:function(a,b){b.b1=this._b1;b.b2=this._b2;b.numRows=0},_getPositionSolverInfo:function(a){a.b1=this._b1;a.b2=this._b2;a.numRows=0},_checkDestruction:function(){var a=
this._appliedForceX*this._appliedForceX+this._appliedForceY*this._appliedForceY+this._appliedForceZ*this._appliedForceZ,b=this._appliedTorqueX*this._appliedTorqueX+this._appliedTorqueY*this._appliedTorqueY+this._appliedTorqueZ*this._appliedTorqueZ;0<this._breakForce&&a>this._breakForce*this._breakForce?this._world.removeJoint(this):0<this._breakTorque&&b>this._breakTorque*this._breakTorque&&this._world.removeJoint(this)},__class__:em};var fm=function(){this.rigidBody2=this.rigidBody1=null;this.localAnchor1=
new w;this.localAnchor2=new w;this.allowCollision=!1;this.solverType=ta.defaultJointConstraintSolverType;this.positionCorrectionAlgorithm=ta.defaultJointPositionCorrectionAlgorithm;this.breakTorque=this.breakForce=0};g["oimo.dynamics.constraint.joint.JointConfig"]=fm;fm.__name__="oimo.dynamics.constraint.joint.JointConfig";fm.prototype={rigidBody1:null,rigidBody2:null,localAnchor1:null,localAnchor2:null,allowCollision:null,solverType:null,positionCorrectionAlgorithm:null,breakForce:null,breakTorque:null,
__class__:fm};var Rk=function(){this.impulseP=this.impulseM=this.impulse=0};g["oimo.dynamics.constraint.joint.JointImpulse"]=Rk;Rk.__name__="oimo.dynamics.constraint.joint.JointImpulse";Rk.prototype={impulse:null,impulseM:null,impulseP:null,__class__:Rk};var Mi=function(a){this._joint=a};g["oimo.dynamics.constraint.joint.JointLink"]=Mi;Mi.__name__="oimo.dynamics.constraint.joint.JointLink";Mi.prototype={_prev:null,_next:null,_joint:null,_other:null,__class__:Mi};var Sk=function(){this.massTB11=this.massTB10=
this.massTB01=this.massTB00=this.massN=this.invMAngB2Z=this.invMAngB2Y=this.invMAngB2X=this.invMAngB1Z=this.invMAngB1Y=this.invMAngB1X=this.invMLinB2Z=this.invMLinB2Y=this.invMLinB2X=this.invMLinB1Z=this.invMLinB1Y=this.invMLinB1X=this.invMAngT2Z=this.invMAngT2Y=this.invMAngT2X=this.invMAngT1Z=this.invMAngT1Y=this.invMAngT1X=this.invMLinT2Z=this.invMLinT2Y=this.invMLinT2X=this.invMLinT1Z=this.invMLinT1Y=this.invMLinT1X=this.invMAngN2Z=this.invMAngN2Y=this.invMAngN2X=this.invMAngN1Z=this.invMAngN1Y=
this.invMAngN1X=this.invMLinN2Z=this.invMLinN2Y=this.invMLinN2X=this.invMLinN1Z=this.invMLinN1Y=this.invMLinN1X=0};g["oimo.dynamics.constraint.solver.common.ContactSolverMassDataRow"]=Sk;Sk.__name__="oimo.dynamics.constraint.solver.common.ContactSolverMassDataRow";Sk.prototype={invMLinN1X:null,invMLinN1Y:null,invMLinN1Z:null,invMLinN2X:null,invMLinN2Y:null,invMLinN2Z:null,invMAngN1X:null,invMAngN1Y:null,invMAngN1Z:null,invMAngN2X:null,invMAngN2Y:null,invMAngN2Z:null,invMLinT1X:null,invMLinT1Y:null,
invMLinT1Z:null,invMLinT2X:null,invMLinT2Y:null,invMLinT2Z:null,invMAngT1X:null,invMAngT1Y:null,invMAngT1Z:null,invMAngT2X:null,invMAngT2Y:null,invMAngT2Z:null,invMLinB1X:null,invMLinB1Y:null,invMLinB1Z:null,invMLinB2X:null,invMLinB2Y:null,invMLinB2Z:null,invMAngB1X:null,invMAngB1Y:null,invMAngB1Z:null,invMAngB2X:null,invMAngB2Y:null,invMAngB2Z:null,massN:null,massTB00:null,massTB01:null,massTB10:null,massTB11:null,__class__:Sk};var Oi=function(){this.massWithoutCfm=this.mass=this.invMAng2Z=this.invMAng2Y=
this.invMAng2X=this.invMAng1Z=this.invMAng1Y=this.invMAng1X=this.invMLin2Z=this.invMLin2Y=this.invMLin2X=this.invMLin1Z=this.invMLin1Y=this.invMLin1X=0};g["oimo.dynamics.constraint.solver.common.JointSolverMassDataRow"]=Oi;Oi.__name__="oimo.dynamics.constraint.solver.common.JointSolverMassDataRow";Oi.prototype={invMLin1X:null,invMLin1Y:null,invMLin1Z:null,invMLin2X:null,invMLin2Y:null,invMLin2Z:null,invMAng1X:null,invMAng1Y:null,invMAng1Z:null,invMAng2X:null,invMAng2Y:null,invMAng2Z:null,mass:null,
massWithoutCfm:null,__class__:Oi};var Pi=function(a){this.iBounded=Array(a);this.iUnbounded=Array(a);this.signs=Array(a);this.b=Array(a);this.matrixId=this.numUnbounded=this.numBounded=0};g["oimo.dynamics.constraint.solver.direct.Boundary"]=Pi;Pi.__name__="oimo.dynamics.constraint.solver.direct.Boundary";Pi.prototype={numBounded:null,iBounded:null,signs:null,numUnbounded:null,iUnbounded:null,b:null,matrixId:null,init:function(a){this.numBounded=a.numBounded;for(var b=0,c=this.numBounded;b<c;){var d=
b++;this.iBounded[d]=a.iBounded[d];this.signs[d]=a.signs[d]}this.numUnbounded=a.numUnbounded;b=this.matrixId=0;for(c=this.numUnbounded;b<c;){d=b++;var e=a.iUnbounded[d];this.iUnbounded[d]=e;this.matrixId|=1<<e}},computeImpulses:function(a,b,c,d,e,f,k){for(var m=0,h=this.numUnbounded;m<h;){var n=m++;n=this.iUnbounded[n];var g=a.rows[n];this.b[n]=g.rhs*f-c[n]-g.cfm*d[n]}m=b._invMassWithoutCfm;h=0;for(n=this.numBounded;h<n;){var l=h++;g=this.iBounded[l];l=this.signs[l];var p=a.rows[g];l=(0>l?p.minImpulse:
0<l?p.maxImpulse:0)-d[g];e[g]=l;if(0!=l){p=0;for(var y=this.numUnbounded;p<y;){var H=p++,C=H=this.iUnbounded[H],r=this.b;r[C]-=m[g][H]*l}}}h=this.iUnbounded;n=this.numUnbounded;for(l=g=0;l<n;)p=l++,g|=1<<h[p];b._cacheComputed[g]||(b.computeSubmatrix(g,h,n),b._cacheComputed[g]=!0);h=b._cachedSubmatrices[g];b=!0;n=0;for(g=this.numUnbounded;n<g;){l=n++;p=this.iUnbounded[l];y=a.rows[p];C=H=d[p];r=0;for(var I=this.numUnbounded;r<I;){var q=r++;C+=this.b[this.iUnbounded[q]]*h[l][q]}if(C<y.minImpulse-ta.directMlcpSolverEps||
C>y.maxImpulse+ta.directMlcpSolverEps){b=!1;break}e[p]=C-H}if(k)return!0;if(!b)return!1;k=0;for(h=this.numBounded;k<h;){l=k++;n=this.iBounded[l];g=a.rows[n];l=this.signs[l];p=d[n]+e[n];y=c[n];H=0;for(C=a.numRows;H<C;)r=H++,y+=m[n][r]*e[r];n=g.rhs*f-y-g.cfm*p;if(0>l&&n>ta.directMlcpSolverEps||0<l&&n<-ta.directMlcpSolverEps){b=!1;break}}return b},__class__:Pi};var Qi=function(a){this.size=a;this.numBounded=0;this.iBounded=Array(a);this.signs=Array(a);this.numUnbounded=0;this.iUnbounded=Array(a)};g["oimo.dynamics.constraint.solver.direct.BoundaryBuildInfo"]=
Qi;Qi.__name__="oimo.dynamics.constraint.solver.direct.BoundaryBuildInfo";Qi.prototype={size:null,numBounded:null,iBounded:null,signs:null,numUnbounded:null,iUnbounded:null,__class__:Qi};var Ri=function(a){this.maxRows=a;this.numBoundaries=0;this.boundaries=Array(1<<a);this.bbInfo=new Qi(a)};g["oimo.dynamics.constraint.solver.direct.BoundaryBuilder"]=Ri;Ri.__name__="oimo.dynamics.constraint.solver.direct.BoundaryBuilder";Ri.prototype={numBoundaries:null,boundaries:null,maxRows:null,bbInfo:null,buildBoundariesRecursive:function(a,
b){if(b==a.numRows)null==this.boundaries[this.numBoundaries]&&(this.boundaries[this.numBoundaries]=new Pi(this.maxRows)),this.boundaries[this.numBoundaries++].init(this.bbInfo);else{var c=a.rows[b],d=-Infinity<c.minImpulse,e=Infinity>c.maxImpulse;0==c.minImpulse&&0==c.maxImpulse?(e=this.bbInfo,e.iBounded[e.numBounded]=b,e.signs[e.numBounded]=0,e.numBounded++,this.buildBoundariesRecursive(a,b+1),this.bbInfo.numBounded--):(c=this.bbInfo,c.iUnbounded[c.numUnbounded]=b,c.numUnbounded++,this.buildBoundariesRecursive(a,
b+1),this.bbInfo.numUnbounded--,d&&(d=this.bbInfo,d.iBounded[d.numBounded]=b,d.signs[d.numBounded]=-1,d.numBounded++,this.buildBoundariesRecursive(a,b+1),this.bbInfo.numBounded--),e&&(e=this.bbInfo,e.iBounded[e.numBounded]=b,e.signs[e.numBounded]=1,e.numBounded++,this.buildBoundariesRecursive(a,b+1),this.bbInfo.numBounded--))}},__class__:Ri};var oh=function(a){this.n=a;this.indices=Array(a);this.tmpIndices=Array(a);for(var b=0;b<a;){var c=b++;this.indices[c]=c}};g["oimo.dynamics.constraint.solver.direct.BoundarySelector"]=
oh;oh.__name__="oimo.dynamics.constraint.solver.direct.BoundarySelector";oh.prototype={n:null,indices:null,tmpIndices:null,__class__:oh};var Ni=function(a){Gd.call(this);this.joint=a;this.info=new Qk;a=ta.maxJacobianRows;this.massMatrix=new Vj(a);this.boundaryBuilder=new Ri(a);this.massData=Array(a);for(var b=0,c=this.massData.length;b<c;){var d=b++;this.massData[d]=new Oi}b=this.boundaryBuilder.boundaries.length;this.velBoundarySelector=new oh(b);this.posBoundarySelector=new oh(b);this.relVels=Array(a);
this.impulses=Array(a);this.dImpulses=Array(a);this.dTotalImpulses=Array(a);for(b=0;b<a;)c=b++,this.relVels[c]=0,this.impulses[c]=0,this.dImpulses[c]=0,this.dTotalImpulses[c]=0};g["oimo.dynamics.constraint.solver.direct.DirectJointConstraintSolver"]=Ni;Ni.__name__="oimo.dynamics.constraint.solver.direct.DirectJointConstraintSolver";Ni.__super__=Gd;Ni.prototype=v(Gd.prototype,{info:null,massData:null,relVels:null,impulses:null,dImpulses:null,dTotalImpulses:null,joint:null,massMatrix:null,boundaryBuilder:null,
velBoundarySelector:null,posBoundarySelector:null,preSolveVelocity:function(a){this.joint._syncAnchors();this.joint._getVelocitySolverInfo(a,this.info);this._b1=this.info.b1;this._b2=this.info.b2;this.massMatrix.computeInvMass(this.info,this.massData);a=this.boundaryBuilder;a.numBoundaries=0;var b=a.bbInfo;b.numBounded=0;b.numUnbounded=0;a.buildBoundariesRecursive(this.info,0);a=this.velBoundarySelector;b=this.boundaryBuilder.numBoundaries;for(var c=0,d=0,e=0,f=a.n;e<f;){var k=e++;k=a.indices[k];
k<b?(a.tmpIndices[c]=k,++c):(a.tmpIndices[b+d]=k,++d)}b=a.indices;a.indices=a.tmpIndices;a.tmpIndices=b},warmStart:function(a){var b=this.joint._positionCorrectionAlgorithm==$e.BAUMGARTE?ta.jointWarmStartingFactorForBaungarte:ta.jointWarmStartingFactor;b*=a.dtRatio;if(0>=b)for(b=0,a=this.info.numRows;b<a;){var c=b++;c=this.info.rows[c].impulse;c.impulse=0;c.impulseM=0;c.impulseP=0}else{a=0;for(c=this.info.numRows;a<c;){var d=a++,e=this.info.rows[d],f=e.impulse,k=f.impulse*b;k<e.minImpulse?k=e.minImpulse:
k>e.maxImpulse&&(k=e.maxImpulse);f.impulse=k;0<e.motorMaxImpulse?(k=f.impulseM*b,e=e.motorMaxImpulse,k<-e?k=-e:k>e&&(k=e),f.impulseM=k):f.impulseM=0;this.dImpulses[d]=f.impulse+f.impulseM}b=this.dImpulses;c=a=!1;d=this._b1._velX;f=this._b1._velY;e=this._b1._velZ;k=this._b2._velX;var m=this._b2._velY;var h=this._b2._velZ;var n=this._b1._angVelX;var g=this._b1._angVelY;var l=this._b1._angVelZ;var p=this._b2._angVelX;var y=this._b2._angVelY;var H=this._b2._angVelZ;for(var C=0,r=this.info.numRows;C<r;){var I=
C++,q=this.info.rows[I].jacobian,t=this.massData[I];I=b[I];0!=(q.flag&1)&&(d+=t.invMLin1X*I,f+=t.invMLin1Y*I,e+=t.invMLin1Z*I,k+=t.invMLin2X*-I,m+=t.invMLin2Y*-I,h+=t.invMLin2Z*-I,a=!0);0!=(q.flag&2)&&(n+=t.invMAng1X*I,g+=t.invMAng1Y*I,l+=t.invMAng1Z*I,p+=t.invMAng2X*-I,y+=t.invMAng2Y*-I,H+=t.invMAng2Z*-I,c=!0)}a&&(this._b1._velX=d,this._b1._velY=f,this._b1._velZ=e,this._b2._velX=k,this._b2._velY=m,this._b2._velZ=h);c&&(this._b1._angVelX=n,this._b1._angVelY=g,this._b1._angVelZ=l,this._b2._angVelX=
p,this._b2._angVelY=y,this._b2._angVelZ=H)}},solveVelocity:function(){var a=this.info.numRows;var b=this._b1._velX;var c=this._b1._velY;var d=this._b1._velZ;var e=this._b2._velX;var f=this._b2._velY;var k=this._b2._velZ;var m=this._b1._angVelX;var h=this._b1._angVelY;var n=this._b1._angVelZ;var g=this._b2._angVelX;var l=this._b2._angVelY;var p=this._b2._angVelZ;for(var y=0;y<a;){var H=y++,C=this.info.rows[H],r=C.impulse;C=C.jacobian;var I=0;I+=b*C.lin1X+c*C.lin1Y+d*C.lin1Z;I-=e*C.lin2X+f*C.lin2Y+
k*C.lin2Z;I+=m*C.ang1X+h*C.ang1Y+n*C.ang1Z;I-=g*C.ang2X+l*C.ang2Y+p*C.ang2Z;this.relVels[H]=I;this.impulses[H]=r.impulse;this.dTotalImpulses[H]=0}b=this.massMatrix._invMassWithoutCfm;for(c=0;c<a;)if(d=c++,k=this.info.rows[d],e=k.impulse,m=this.massData[d],0<k.motorMaxImpulse)for(f=e.impulseM,m=f+m.massWithoutCfm*(-k.motorSpeed-this.relVels[d]),k=k.motorMaxImpulse,m<-k?m=-k:m>k&&(m=k),e.impulseM=m,e=m-f,this.dTotalImpulses[d]=e,f=0,k=a;f<k;)h=m=f++,n=this.relVels,n[h]+=e*b[d][m];c=!1;d=0;for(e=this.boundaryBuilder.numBoundaries;d<
e;)if(b=d++,b=this.velBoundarySelector.indices[b],this.boundaryBuilder.boundaries[b].computeImpulses(this.info,this.massMatrix,this.relVels,this.impulses,this.dImpulses,1,!1)){for(c=0;c<a;)e=c++,d=this.dImpulses[e],this.info.rows[e].impulse.impulse+=d,f=this.dTotalImpulses,f[e]+=d;a=this.dTotalImpulses;d=c=!1;e=this._b1._velX;f=this._b1._velY;k=this._b1._velZ;m=this._b2._velX;h=this._b2._velY;n=this._b2._velZ;g=this._b1._angVelX;l=this._b1._angVelY;p=this._b1._angVelZ;y=this._b2._angVelX;H=this._b2._angVelY;
r=this._b2._angVelZ;C=0;for(I=this.info.numRows;C<I;){var q=C++,t=this.info.rows[q].jacobian,z=this.massData[q];q=a[q];0!=(t.flag&1)&&(e+=z.invMLin1X*q,f+=z.invMLin1Y*q,k+=z.invMLin1Z*q,m+=z.invMLin2X*-q,h+=z.invMLin2Y*-q,n+=z.invMLin2Z*-q,c=!0);0!=(t.flag&2)&&(g+=z.invMAng1X*q,l+=z.invMAng1Y*q,p+=z.invMAng1Z*q,y+=z.invMAng2X*-q,H+=z.invMAng2Y*-q,r+=z.invMAng2Z*-q,d=!0)}c&&(this._b1._velX=e,this._b1._velY=f,this._b1._velZ=k,this._b2._velX=m,this._b2._velY=h,this._b2._velZ=n);d&&(this._b1._angVelX=
g,this._b1._angVelY=l,this._b1._angVelZ=p,this._b2._angVelX=y,this._b2._angVelY=H,this._b2._angVelZ=r);a=this.velBoundarySelector;for(c=0;a.indices[c]!=b;)++c;for(;0<c;)b=a.indices[c],a.indices[c]=a.indices[c-1],a.indices[c-1]=b,--c;c=!0;break}c||console.log("Source/oimo/dynamics/constraint/solver/direct/DirectJointConstraintSolver.hx:335:","could not find solution. (velocity)")},postSolveVelocity:function(a){for(var b,c,d,e,f,k,m=k=f=e=d=c=b=0,h=this.info.numRows;m<h;){var n=m++,g=this.info.rows[n];
n=g.impulse;g=g.jacobian;0!=(g.flag&1)?(b+=g.lin1X*n.impulse,c+=g.lin1Y*n.impulse,d+=g.lin1Z*n.impulse):0!=(g.flag&2)&&(e+=g.ang1X*n.impulse,f+=g.ang1Y*n.impulse,k+=g.ang1Z*n.impulse)}this.joint._appliedForceX=b*a.invDt;this.joint._appliedForceY=c*a.invDt;this.joint._appliedForceZ=d*a.invDt;this.joint._appliedTorqueX=e*a.invDt;this.joint._appliedTorqueY=f*a.invDt;this.joint._appliedTorqueZ=k*a.invDt},preSolvePosition:function(a){this.joint._syncAnchors();this.joint._getPositionSolverInfo(this.info);
this._b1=this.info.b1;this._b2=this.info.b2;this.massMatrix.computeInvMass(this.info,this.massData);a=this.boundaryBuilder;a.numBoundaries=0;var b=a.bbInfo;b.numBounded=0;b.numUnbounded=0;a.buildBoundariesRecursive(this.info,0);a=this.posBoundarySelector;b=this.boundaryBuilder.numBoundaries;for(var c=0,d=0,e=0,f=a.n;e<f;){var k=e++;k=a.indices[k];k<b?(a.tmpIndices[c]=k,++c):(a.tmpIndices[b+d]=k,++d)}b=a.indices;a.indices=a.tmpIndices;a.tmpIndices=b;a=0;for(b=this.info.numRows;a<b;)c=a++,this.info.rows[c].impulse.impulseP=
0},solvePositionSplitImpulse:function(){var a=this.info.numRows;var b=this._b1._pseudoVelX;var c=this._b1._pseudoVelY;var d=this._b1._pseudoVelZ;var e=this._b2._pseudoVelX;var f=this._b2._pseudoVelY;var k=this._b2._pseudoVelZ;var m=this._b1._angPseudoVelX;var h=this._b1._angPseudoVelY;var n=this._b1._angPseudoVelZ;var g=this._b2._angPseudoVelX;var l=this._b2._angPseudoVelY;var p=this._b2._angPseudoVelZ;for(var y=0;y<a;){var H=y++,C=this.info.rows[H],r=C.impulse;C=C.jacobian;var I=0;I+=b*C.lin1X+c*
C.lin1Y+d*C.lin1Z;I-=e*C.lin2X+f*C.lin2Y+k*C.lin2Z;I+=m*C.ang1X+h*C.ang1Y+n*C.ang1Z;I-=g*C.ang2X+l*C.ang2Y+p*C.ang2Z;this.relVels[H]=I;this.impulses[H]=r.impulseP}c=!1;d=0;for(e=this.boundaryBuilder.numBoundaries;d<e;)if(b=d++,b=this.posBoundarySelector.indices[b],this.boundaryBuilder.boundaries[b].computeImpulses(this.info,this.massMatrix,this.relVels,this.impulses,this.dImpulses,ta.positionSplitImpulseBaumgarte,!1)){for(c=0;c<a;)d=c++,this.info.rows[d].impulse.impulseP+=this.dImpulses[d];a=this.dImpulses;
d=c=!1;e=this._b1._pseudoVelX;f=this._b1._pseudoVelY;k=this._b1._pseudoVelZ;m=this._b2._pseudoVelX;h=this._b2._pseudoVelY;n=this._b2._pseudoVelZ;g=this._b1._angPseudoVelX;l=this._b1._angPseudoVelY;p=this._b1._angPseudoVelZ;y=this._b2._angPseudoVelX;H=this._b2._angPseudoVelY;r=this._b2._angPseudoVelZ;C=0;for(I=this.info.numRows;C<I;){var q=C++,t=this.info.rows[q].jacobian,z=this.massData[q];q=a[q];0!=(t.flag&1)&&(e+=z.invMLin1X*q,f+=z.invMLin1Y*q,k+=z.invMLin1Z*q,m+=z.invMLin2X*-q,h+=z.invMLin2Y*-q,
n+=z.invMLin2Z*-q,c=!0);0!=(t.flag&2)&&(g+=z.invMAng1X*q,l+=z.invMAng1Y*q,p+=z.invMAng1Z*q,y+=z.invMAng2X*-q,H+=z.invMAng2Y*-q,r+=z.invMAng2Z*-q,d=!0)}c&&(this._b1._pseudoVelX=e,this._b1._pseudoVelY=f,this._b1._pseudoVelZ=k,this._b2._pseudoVelX=m,this._b2._pseudoVelY=h,this._b2._pseudoVelZ=n);d&&(this._b1._angPseudoVelX=g,this._b1._angPseudoVelY=l,this._b1._angPseudoVelZ=p,this._b2._angPseudoVelX=y,this._b2._angPseudoVelY=H,this._b2._angPseudoVelZ=r);a=this.posBoundarySelector;for(c=0;a.indices[c]!=
b;)++c;for(;0<c;)b=a.indices[c],a.indices[c]=a.indices[c-1],a.indices[c-1]=b,--c;c=!0;break}c||console.log("Source/oimo/dynamics/constraint/solver/direct/DirectJointConstraintSolver.hx:450:","could not find solution. (split impulse)")},solvePositionNgs:function(a){this.joint._syncAnchors();this.joint._getPositionSolverInfo(this.info);this._b1=this.info.b1;this._b2=this.info.b2;this.massMatrix.computeInvMass(this.info,this.massData);var b=this.boundaryBuilder;b.numBoundaries=0;var c=b.bbInfo;c.numBounded=
0;c.numUnbounded=0;b.buildBoundariesRecursive(this.info,0);for(var d=this.posBoundarySelector,e=this.boundaryBuilder.numBoundaries,f=0,k=0,m=0,h=d.n;m<h;){var n=m++,g=d.indices[n];g<e?(d.tmpIndices[f]=g,++f):(d.tmpIndices[e+k]=g,++k)}var l=d.indices;d.indices=d.tmpIndices;d.tmpIndices=l;for(var p=this.info.numRows,y=0;y<p;){var H=y++,C=this.info.rows[H].impulse;this.relVels[H]=0;this.impulses[H]=C.impulseP}for(var r=!1,q=0,t=this.boundaryBuilder.numBoundaries;q<t;){var z=q++,u=this.posBoundarySelector.indices[z];
if(this.boundaryBuilder.boundaries[u].computeImpulses(this.info,this.massMatrix,this.relVels,this.impulses,this.dImpulses,ta.positionNgsBaumgarte,!1)){for(var A=0,w=p;A<w;){var O=A++;this.info.rows[O].impulse.impulseP+=this.dImpulses[O]}for(var v=this.dImpulses,B=!1,x=!1,F,qa,M,L,Ia,Ca,ja,D,J,ba,ha,N,aa=N=ha=ba=J=D=ja=Ca=Ia=L=M=qa=F=0,W=this.info.numRows;aa<W;){var fa=aa++,Y=this.info.rows[fa].jacobian,mb=this.massData[fa],S=v[fa];0!=(Y.flag&1)&&(F+=mb.invMLin1X*S,qa+=mb.invMLin1Y*S,M+=mb.invMLin1Z*
S,L+=mb.invMLin2X*-S,Ia+=mb.invMLin2Y*-S,Ca+=mb.invMLin2Z*-S,B=!0);0!=(Y.flag&2)&&(ja+=mb.invMAng1X*S,D+=mb.invMAng1Y*S,J+=mb.invMAng1Z*S,ba+=mb.invMAng2X*-S,ha+=mb.invMAng2Y*-S,N+=mb.invMAng2Z*-S,x=!0)}if(B){var U=this._b1;U._transform._positionX+=F;U._transform._positionY+=qa;U._transform._positionZ+=M;var ia=this._b2;ia._transform._positionX+=L;ia._transform._positionY+=Ia;ia._transform._positionZ+=Ca}if(x){var Q=this._b1,ma=Math.sqrt(ja*ja+D*D+J*J),V=.5*ma;if(.5>V){var Ma=V*V;var Pa=.5*(1-.16666666666666666*
Ma+Ma*Ma*.008333333333333333);var Z=1-.5*Ma+Ma*Ma*.041666666666666664}else Pa=Math.sin(V)/ma,Z=Math.cos(V);var R=ja*Pa;var Ja=D*Pa;var T=J*Pa;var G=R;var Ta=Ja;var X=T;var pa=Z;var $a=Q._transform._rotation00,la=Q._transform._rotation11,na=Q._transform._rotation22,ea=$a+la+na;if(0<ea){var ka=Math.sqrt(ea+1);var ra=.5*ka;ka=.5/ka;var ua=(Q._transform._rotation21-Q._transform._rotation12)*ka;var sa=(Q._transform._rotation02-Q._transform._rotation20)*ka;var va=(Q._transform._rotation10-Q._transform._rotation01)*
ka}else $a>la?$a>na?(ka=Math.sqrt($a-la-na+1),ua=.5*ka,ka=.5/ka,sa=(Q._transform._rotation01+Q._transform._rotation10)*ka,va=(Q._transform._rotation02+Q._transform._rotation20)*ka,ra=(Q._transform._rotation21-Q._transform._rotation12)*ka):(ka=Math.sqrt(na-$a-la+1),va=.5*ka,ka=.5/ka,ua=(Q._transform._rotation02+Q._transform._rotation20)*ka,sa=(Q._transform._rotation12+Q._transform._rotation21)*ka,ra=(Q._transform._rotation10-Q._transform._rotation01)*ka):la>na?(ka=Math.sqrt(la-na-$a+1),sa=.5*ka,ka=
.5/ka,ua=(Q._transform._rotation01+Q._transform._rotation10)*ka,va=(Q._transform._rotation12+Q._transform._rotation21)*ka,ra=(Q._transform._rotation02-Q._transform._rotation20)*ka):(ka=Math.sqrt(na-$a-la+1),va=.5*ka,ka=.5/ka,ua=(Q._transform._rotation02+Q._transform._rotation20)*ka,sa=(Q._transform._rotation12+Q._transform._rotation21)*ka,ra=(Q._transform._rotation10-Q._transform._rotation01)*ka);ua=pa*ua+G*ra+Ta*va-X*sa;sa=pa*sa-G*va+Ta*ra+X*ua;va=pa*va+G*sa-Ta*ua+X*ra;ra=pa*ra-G*ua-Ta*sa-X*va;var Ha=
ua*ua+sa*sa+va*va+ra*ra;1E-32<Ha&&(Ha=1/Math.sqrt(Ha));ua*=Ha;sa*=Ha;va*=Ha;ra*=Ha;var da=ua,qb=sa,ya=va,Aa=ra,xa=2*da,Ba=2*qb,wa=2*ya,Fa=da*xa,Da=qb*Ba,Ga=ya*wa,Ka=da*Ba,La=qb*wa,Fb=da*wa,Oa=Aa*xa,Na=Aa*Ba,Qa=Aa*wa;Q._transform._rotation00=1-Da-Ga;Q._transform._rotation01=Ka-Qa;Q._transform._rotation02=Fb+Na;Q._transform._rotation10=Ka+Qa;Q._transform._rotation11=1-Fa-Ga;Q._transform._rotation12=La-Oa;Q._transform._rotation20=Fb-Na;Q._transform._rotation21=La+Oa;Q._transform._rotation22=1-Fa-Da;
var Ra=Q._transform._rotation00*Q._invLocalInertia00+Q._transform._rotation01*Q._invLocalInertia10+Q._transform._rotation02*Q._invLocalInertia20;var Pb=Q._transform._rotation00*Q._invLocalInertia01+Q._transform._rotation01*Q._invLocalInertia11+Q._transform._rotation02*Q._invLocalInertia21;var Va=Q._transform._rotation00*Q._invLocalInertia02+Q._transform._rotation01*Q._invLocalInertia12+Q._transform._rotation02*Q._invLocalInertia22;var Sa=Q._transform._rotation10*Q._invLocalInertia00+Q._transform._rotation11*
Q._invLocalInertia10+Q._transform._rotation12*Q._invLocalInertia20;var Za=Q._transform._rotation10*Q._invLocalInertia01+Q._transform._rotation11*Q._invLocalInertia11+Q._transform._rotation12*Q._invLocalInertia21;var Xa=Q._transform._rotation10*Q._invLocalInertia02+Q._transform._rotation11*Q._invLocalInertia12+Q._transform._rotation12*Q._invLocalInertia22;var Ya=Q._transform._rotation20*Q._invLocalInertia00+Q._transform._rotation21*Q._invLocalInertia10+Q._transform._rotation22*Q._invLocalInertia20;
var ab=Q._transform._rotation20*Q._invLocalInertia01+Q._transform._rotation21*Q._invLocalInertia11+Q._transform._rotation22*Q._invLocalInertia21;var ca=Q._transform._rotation20*Q._invLocalInertia02+Q._transform._rotation21*Q._invLocalInertia12+Q._transform._rotation22*Q._invLocalInertia22;Q._invInertia00=Ra;Q._invInertia01=Pb;Q._invInertia02=Va;Q._invInertia10=Sa;Q._invInertia11=Za;Q._invInertia12=Xa;Q._invInertia20=Ya;Q._invInertia21=ab;Q._invInertia22=ca;var cb=Q._invInertia00*Q._transform._rotation00+
Q._invInertia01*Q._transform._rotation01+Q._invInertia02*Q._transform._rotation02;var nb=Q._invInertia00*Q._transform._rotation10+Q._invInertia01*Q._transform._rotation11+Q._invInertia02*Q._transform._rotation12;var ob=Q._invInertia00*Q._transform._rotation20+Q._invInertia01*Q._transform._rotation21+Q._invInertia02*Q._transform._rotation22;var eb=Q._invInertia10*Q._transform._rotation00+Q._invInertia11*Q._transform._rotation01+Q._invInertia12*Q._transform._rotation02;var hb=Q._invInertia10*Q._transform._rotation10+
Q._invInertia11*Q._transform._rotation11+Q._invInertia12*Q._transform._rotation12;var tb=Q._invInertia10*Q._transform._rotation20+Q._invInertia11*Q._transform._rotation21+Q._invInertia12*Q._transform._rotation22;var fb=Q._invInertia20*Q._transform._rotation00+Q._invInertia21*Q._transform._rotation01+Q._invInertia22*Q._transform._rotation02;var gb=Q._invInertia20*Q._transform._rotation10+Q._invInertia21*Q._transform._rotation11+Q._invInertia22*Q._transform._rotation12;var Kb=Q._invInertia20*Q._transform._rotation20+
Q._invInertia21*Q._transform._rotation21+Q._invInertia22*Q._transform._rotation22;Q._invInertia00=cb;Q._invInertia01=nb;Q._invInertia02=ob;Q._invInertia10=eb;Q._invInertia11=hb;Q._invInertia12=tb;Q._invInertia20=fb;Q._invInertia21=gb;Q._invInertia22=Kb;Q._invInertia00*=Q._rotFactor.x;Q._invInertia01*=Q._rotFactor.x;Q._invInertia02*=Q._rotFactor.x;Q._invInertia10*=Q._rotFactor.y;Q._invInertia11*=Q._rotFactor.y;Q._invInertia12*=Q._rotFactor.y;Q._invInertia20*=Q._rotFactor.z;Q._invInertia21*=Q._rotFactor.z;
Q._invInertia22*=Q._rotFactor.z;var P=this._b2,Vb=Math.sqrt(ba*ba+ha*ha+N*N),sb=.5*Vb;if(.5>sb){var ib=sb*sb;var wb=.5*(1-.16666666666666666*ib+ib*ib*.008333333333333333);var kb=1-.5*ib+ib*ib*.041666666666666664}else wb=Math.sin(sb)/Vb,kb=Math.cos(sb);var E=ba*wb;var Ea=ha*wb;var za=N*wb;var Ib=E;var bb=Ea;var gc=za;var lb=kb;var Xb=P._transform._rotation00,Ub=P._transform._rotation11,pb=P._transform._rotation22,xb=Xb+Ub+pb;if(0<xb){var Hb=Math.sqrt(xb+1);var rb=.5*Hb;Hb=.5/Hb;var jb=(P._transform._rotation21-
P._transform._rotation12)*Hb;var Ua=(P._transform._rotation02-P._transform._rotation20)*Hb;var Cb=(P._transform._rotation10-P._transform._rotation01)*Hb}else Xb>Ub?Xb>pb?(Hb=Math.sqrt(Xb-Ub-pb+1),jb=.5*Hb,Hb=.5/Hb,Ua=(P._transform._rotation01+P._transform._rotation10)*Hb,Cb=(P._transform._rotation02+P._transform._rotation20)*Hb,rb=(P._transform._rotation21-P._transform._rotation12)*Hb):(Hb=Math.sqrt(pb-Xb-Ub+1),Cb=.5*Hb,Hb=.5/Hb,jb=(P._transform._rotation02+P._transform._rotation20)*Hb,Ua=(P._transform._rotation12+
P._transform._rotation21)*Hb,rb=(P._transform._rotation10-P._transform._rotation01)*Hb):Ub>pb?(Hb=Math.sqrt(Ub-pb-Xb+1),Ua=.5*Hb,Hb=.5/Hb,jb=(P._transform._rotation01+P._transform._rotation10)*Hb,Cb=(P._transform._rotation12+P._transform._rotation21)*Hb,rb=(P._transform._rotation02-P._transform._rotation20)*Hb):(Hb=Math.sqrt(pb-Xb-Ub+1),Cb=.5*Hb,Hb=.5/Hb,jb=(P._transform._rotation02+P._transform._rotation20)*Hb,Ua=(P._transform._rotation12+P._transform._rotation21)*Hb,rb=(P._transform._rotation10-
P._transform._rotation01)*Hb);jb=lb*jb+Ib*rb+bb*Cb-gc*Ua;Ua=lb*Ua-Ib*Cb+bb*rb+gc*jb;Cb=lb*Cb+Ib*Ua-bb*jb+gc*rb;rb=lb*rb-Ib*jb-bb*Ua-gc*Cb;var Jb=jb*jb+Ua*Ua+Cb*Cb+rb*rb;1E-32<Jb&&(Jb=1/Math.sqrt(Jb));jb*=Jb;Ua*=Jb;Cb*=Jb;rb*=Jb;var Wa=jb,zb=Ua,Cc=Cb,Eb=rb,Db=2*Wa,db=2*zb,Ob=2*Cc,vb=Wa*Db,Ab=zb*db,$b=Cc*Ob,Gb=Wa*db,Mb=zb*Ob,Lb=Wa*Ob,ub=Eb*Db,Nb=Eb*db,Qb=Eb*Ob;P._transform._rotation00=1-Ab-$b;P._transform._rotation01=Gb-Qb;P._transform._rotation02=Lb+Nb;P._transform._rotation10=Gb+Qb;P._transform._rotation11=
1-vb-$b;P._transform._rotation12=Mb-ub;P._transform._rotation20=Lb-Nb;P._transform._rotation21=Mb+ub;P._transform._rotation22=1-vb-Ab;var Rb=P._transform._rotation00*P._invLocalInertia00+P._transform._rotation01*P._invLocalInertia10+P._transform._rotation02*P._invLocalInertia20;var Zb=P._transform._rotation00*P._invLocalInertia01+P._transform._rotation01*P._invLocalInertia11+P._transform._rotation02*P._invLocalInertia21;var Tb=P._transform._rotation00*P._invLocalInertia02+P._transform._rotation01*
P._invLocalInertia12+P._transform._rotation02*P._invLocalInertia22;var Wb=P._transform._rotation10*P._invLocalInertia00+P._transform._rotation11*P._invLocalInertia10+P._transform._rotation12*P._invLocalInertia20;var ac=P._transform._rotation10*P._invLocalInertia01+P._transform._rotation11*P._invLocalInertia11+P._transform._rotation12*P._invLocalInertia21;var cc=P._transform._rotation10*P._invLocalInertia02+P._transform._rotation11*P._invLocalInertia12+P._transform._rotation12*P._invLocalInertia22;
var dc=P._transform._rotation20*P._invLocalInertia00+P._transform._rotation21*P._invLocalInertia10+P._transform._rotation22*P._invLocalInertia20;var hc=P._transform._rotation20*P._invLocalInertia01+P._transform._rotation21*P._invLocalInertia11+P._transform._rotation22*P._invLocalInertia21;var ic=P._transform._rotation20*P._invLocalInertia02+P._transform._rotation21*P._invLocalInertia12+P._transform._rotation22*P._invLocalInertia22;P._invInertia00=Rb;P._invInertia01=Zb;P._invInertia02=Tb;P._invInertia10=
Wb;P._invInertia11=ac;P._invInertia12=cc;P._invInertia20=dc;P._invInertia21=hc;P._invInertia22=ic;var jc=P._invInertia00*P._transform._rotation00+P._invInertia01*P._transform._rotation01+P._invInertia02*P._transform._rotation02;var uc=P._invInertia00*P._transform._rotation10+P._invInertia01*P._transform._rotation11+P._invInertia02*P._transform._rotation12;var kc=P._invInertia00*P._transform._rotation20+P._invInertia01*P._transform._rotation21+P._invInertia02*P._transform._rotation22;var lc=P._invInertia10*
P._transform._rotation00+P._invInertia11*P._transform._rotation01+P._invInertia12*P._transform._rotation02;var mc=P._invInertia10*P._transform._rotation10+P._invInertia11*P._transform._rotation11+P._invInertia12*P._transform._rotation12;var nc=P._invInertia10*P._transform._rotation20+P._invInertia11*P._transform._rotation21+P._invInertia12*P._transform._rotation22;var tc=P._invInertia20*P._transform._rotation00+P._invInertia21*P._transform._rotation01+P._invInertia22*P._transform._rotation02;var oc=
P._invInertia20*P._transform._rotation10+P._invInertia21*P._transform._rotation11+P._invInertia22*P._transform._rotation12;var pc=P._invInertia20*P._transform._rotation20+P._invInertia21*P._transform._rotation21+P._invInertia22*P._transform._rotation22;P._invInertia00=jc;P._invInertia01=uc;P._invInertia02=kc;P._invInertia10=lc;P._invInertia11=mc;P._invInertia12=nc;P._invInertia20=tc;P._invInertia21=oc;P._invInertia22=pc;P._invInertia00*=P._rotFactor.x;P._invInertia01*=P._rotFactor.x;P._invInertia02*=
P._rotFactor.x;P._invInertia10*=P._rotFactor.y;P._invInertia11*=P._rotFactor.y;P._invInertia12*=P._rotFactor.y;P._invInertia20*=P._rotFactor.z;P._invInertia21*=P._rotFactor.z;P._invInertia22*=P._rotFactor.z}for(var fc=this.posBoundarySelector,Sb=0;fc.indices[Sb]!=u;)++Sb;for(;0<Sb;){var qc=fc.indices[Sb];fc.indices[Sb]=fc.indices[Sb-1];fc.indices[Sb-1]=qc;--Sb}r=!0;break}}r||console.log("Source/oimo/dynamics/constraint/solver/direct/DirectJointConstraintSolver.hx:502:","could not find solution. (NGS)")},
postSolve:function(){this.joint._syncAnchors();this.joint._checkDestruction()},__class__:Ni});var Vj=function(a){this._size=a;this.tmpMatrix=Array(this._size);this._invMass=Array(this._size);this._invMassWithoutCfm=Array(this._size);a=0;for(var b=this._size;a<b;){var c=a++;this.tmpMatrix[c]=Array(this._size);this._invMass[c]=Array(this._size);this._invMassWithoutCfm[c]=Array(this._size);for(var d=0,e=this._size;d<e;){var f=d++;this.tmpMatrix[c][f]=0;this._invMass[c][f]=0;this._invMassWithoutCfm[c][f]=
0}}this._maxSubmatrixId=1<<this._size;this._cacheComputed=Array(this._maxSubmatrixId);this._cachedSubmatrices=Array(this._maxSubmatrixId);a=0;for(b=this._maxSubmatrixId;a<b;){d=c=a++;d=(d&85)+(d>>1&85);d=(d&51)+(d>>2&51);d=(d&15)+(d>>4&15);e=Array(d);f=0;for(var k=d;f<k;){var m=f++;e[m]=Array(d);for(var h=0,n=d;h<n;){var g=h++;e[m][g]=0}}this._cacheComputed[c]=!1;this._cachedSubmatrices[c]=e}};g["oimo.dynamics.constraint.solver.direct.MassMatrix"]=Vj;Vj.__name__="oimo.dynamics.constraint.solver.direct.MassMatrix";
Vj.prototype={_size:null,_invMass:null,_invMassWithoutCfm:null,_cachedSubmatrices:null,_cacheComputed:null,_maxSubmatrixId:null,tmpMatrix:null,computeSubmatrix:function(a,b,c){for(var d=0;d<c;)for(var e=d++,f=b[e],k=0,m=c;k<m;){var h=k++;this.tmpMatrix[e][h]=this._invMass[f][b[h]]}d=this.tmpMatrix;a=this._cachedSubmatrices[a];switch(c){case 4:e=d[0];b=a[0];c=1/e[0];b[0]=c;e[1]*=c;e[2]*=c;e[3]*=c;h=d[1];var n=a[1];n[0]=-c*h[0];h[1]-=e[1]*h[0];h[2]-=e[2]*h[0];h[3]-=e[3]*h[0];h=d[2];n=a[2];n[0]=-c*h[0];
h[1]-=e[1]*h[0];h[2]-=e[2]*h[0];h[3]-=e[3]*h[0];h=d[3];n=a[3];n[0]=-c*h[0];h[1]-=e[1]*h[0];h[2]-=e[2]*h[0];h[3]-=e[3]*h[0];e=d[1];b=a[1];c=1/e[1];b[1]=c;b[0]*=c;e[2]*=c;e[3]*=c;h=d[0];n=a[0];n[0]-=b[0]*h[1];h[2]-=e[2]*h[1];h[3]-=e[3]*h[1];h=d[2];n=a[2];n[0]-=b[0]*h[1];n[1]=-c*h[1];h[2]-=e[2]*h[1];h[3]-=e[3]*h[1];h=d[3];n=a[3];n[0]-=b[0]*h[1];n[1]=-c*h[1];h[2]-=e[2]*h[1];h[3]-=e[3]*h[1];e=d[2];b=a[2];c=1/e[2];b[2]=c;b[0]*=c;b[1]*=c;e[3]*=c;h=d[0];n=a[0];n[0]-=b[0]*h[2];h[3]-=e[3]*h[2];h=d[1];n=a[1];
n[0]-=b[0]*h[2];n[1]-=b[1]*h[2];h[3]-=e[3]*h[2];h=d[3];n=a[3];n[0]-=b[0]*h[2];n[1]-=b[1]*h[2];n[2]=-c*h[2];h[3]-=e[3]*h[2];e=d[3];b=a[3];c=1/e[3];b[3]=c;b[0]*=c;b[1]*=c;b[2]*=c;h=d[0];n=a[0];n[0]-=b[0]*h[3];h=d[1];n=a[1];n[0]-=b[0]*h[3];n[1]-=b[1]*h[3];h=d[2];n=a[2];n[0]-=b[0]*h[3];n[1]-=b[1]*h[3];n[2]-=b[2]*h[3];b=a[1];a[0][1]=b[0];b=a[2];a[0][2]=b[0];a[1][2]=b[1];b=a[3];a[0][3]=b[0];a[1][3]=b[1];a[2][3]=b[2];break;case 5:e=d[0];b=a[0];c=1/e[0];b[0]=c;e[1]*=c;e[2]*=c;e[3]*=c;e[4]*=c;h=d[1];n=a[1];
n[0]=-c*h[0];h[1]-=e[1]*h[0];h[2]-=e[2]*h[0];h[3]-=e[3]*h[0];h[4]-=e[4]*h[0];h=d[2];n=a[2];n[0]=-c*h[0];h[1]-=e[1]*h[0];h[2]-=e[2]*h[0];h[3]-=e[3]*h[0];h[4]-=e[4]*h[0];h=d[3];n=a[3];n[0]=-c*h[0];h[1]-=e[1]*h[0];h[2]-=e[2]*h[0];h[3]-=e[3]*h[0];h[4]-=e[4]*h[0];h=d[4];n=a[4];n[0]=-c*h[0];h[1]-=e[1]*h[0];h[2]-=e[2]*h[0];h[3]-=e[3]*h[0];h[4]-=e[4]*h[0];e=d[1];b=a[1];c=1/e[1];b[1]=c;b[0]*=c;e[2]*=c;e[3]*=c;e[4]*=c;h=d[0];n=a[0];n[0]-=b[0]*h[1];h[2]-=e[2]*h[1];h[3]-=e[3]*h[1];h[4]-=e[4]*h[1];h=d[2];n=a[2];
n[0]-=b[0]*h[1];n[1]=-c*h[1];h[2]-=e[2]*h[1];h[3]-=e[3]*h[1];h[4]-=e[4]*h[1];h=d[3];n=a[3];n[0]-=b[0]*h[1];n[1]=-c*h[1];h[2]-=e[2]*h[1];h[3]-=e[3]*h[1];h[4]-=e[4]*h[1];h=d[4];n=a[4];n[0]-=b[0]*h[1];n[1]=-c*h[1];h[2]-=e[2]*h[1];h[3]-=e[3]*h[1];h[4]-=e[4]*h[1];e=d[2];b=a[2];c=1/e[2];b[2]=c;b[0]*=c;b[1]*=c;e[3]*=c;e[4]*=c;h=d[0];n=a[0];n[0]-=b[0]*h[2];h[3]-=e[3]*h[2];h[4]-=e[4]*h[2];h=d[1];n=a[1];n[0]-=b[0]*h[2];n[1]-=b[1]*h[2];h[3]-=e[3]*h[2];h[4]-=e[4]*h[2];h=d[3];n=a[3];n[0]-=b[0]*h[2];n[1]-=b[1]*
h[2];n[2]=-c*h[2];h[3]-=e[3]*h[2];h[4]-=e[4]*h[2];h=d[4];n=a[4];n[0]-=b[0]*h[2];n[1]-=b[1]*h[2];n[2]=-c*h[2];h[3]-=e[3]*h[2];h[4]-=e[4]*h[2];e=d[3];b=a[3];c=1/e[3];b[3]=c;b[0]*=c;b[1]*=c;b[2]*=c;e[4]*=c;h=d[0];n=a[0];n[0]-=b[0]*h[3];h[4]-=e[4]*h[3];h=d[1];n=a[1];n[0]-=b[0]*h[3];n[1]-=b[1]*h[3];h[4]-=e[4]*h[3];h=d[2];n=a[2];n[0]-=b[0]*h[3];n[1]-=b[1]*h[3];n[2]-=b[2]*h[3];h[4]-=e[4]*h[3];h=d[4];n=a[4];n[0]-=b[0]*h[3];n[1]-=b[1]*h[3];n[2]-=b[2]*h[3];n[3]=-c*h[3];h[4]-=e[4]*h[3];e=d[4];b=a[4];c=1/e[4];
b[4]=c;b[0]*=c;b[1]*=c;b[2]*=c;b[3]*=c;h=d[0];n=a[0];n[0]-=b[0]*h[4];h=d[1];n=a[1];n[0]-=b[0]*h[4];n[1]-=b[1]*h[4];h=d[2];n=a[2];n[0]-=b[0]*h[4];n[1]-=b[1]*h[4];n[2]-=b[2]*h[4];h=d[3];n=a[3];n[0]-=b[0]*h[4];n[1]-=b[1]*h[4];n[2]-=b[2]*h[4];n[3]-=b[3]*h[4];b=a[1];a[0][1]=b[0];b=a[2];a[0][2]=b[0];a[1][2]=b[1];b=a[3];a[0][3]=b[0];a[1][3]=b[1];a[2][3]=b[2];b=a[4];a[0][4]=b[0];a[1][4]=b[1];a[2][4]=b[2];a[3][4]=b[3];break;case 6:e=d[0];b=a[0];c=1/e[0];b[0]=c;e[1]*=c;e[2]*=c;e[3]*=c;e[4]*=c;e[5]*=c;h=d[1];
n=a[1];n[0]=-c*h[0];h[1]-=e[1]*h[0];h[2]-=e[2]*h[0];h[3]-=e[3]*h[0];h[4]-=e[4]*h[0];h[5]-=e[5]*h[0];h=d[2];n=a[2];n[0]=-c*h[0];h[1]-=e[1]*h[0];h[2]-=e[2]*h[0];h[3]-=e[3]*h[0];h[4]-=e[4]*h[0];h[5]-=e[5]*h[0];h=d[3];n=a[3];n[0]=-c*h[0];h[1]-=e[1]*h[0];h[2]-=e[2]*h[0];h[3]-=e[3]*h[0];h[4]-=e[4]*h[0];h[5]-=e[5]*h[0];h=d[4];n=a[4];n[0]=-c*h[0];h[1]-=e[1]*h[0];h[2]-=e[2]*h[0];h[3]-=e[3]*h[0];h[4]-=e[4]*h[0];h[5]-=e[5]*h[0];h=d[5];n=a[5];n[0]=-c*h[0];h[1]-=e[1]*h[0];h[2]-=e[2]*h[0];h[3]-=e[3]*h[0];h[4]-=
e[4]*h[0];h[5]-=e[5]*h[0];e=d[1];b=a[1];c=1/e[1];b[1]=c;b[0]*=c;e[2]*=c;e[3]*=c;e[4]*=c;e[5]*=c;h=d[0];n=a[0];n[0]-=b[0]*h[1];h[2]-=e[2]*h[1];h[3]-=e[3]*h[1];h[4]-=e[4]*h[1];h[5]-=e[5]*h[1];h=d[2];n=a[2];n[0]-=b[0]*h[1];n[1]=-c*h[1];h[2]-=e[2]*h[1];h[3]-=e[3]*h[1];h[4]-=e[4]*h[1];h[5]-=e[5]*h[1];h=d[3];n=a[3];n[0]-=b[0]*h[1];n[1]=-c*h[1];h[2]-=e[2]*h[1];h[3]-=e[3]*h[1];h[4]-=e[4]*h[1];h[5]-=e[5]*h[1];h=d[4];n=a[4];n[0]-=b[0]*h[1];n[1]=-c*h[1];h[2]-=e[2]*h[1];h[3]-=e[3]*h[1];h[4]-=e[4]*h[1];h[5]-=
e[5]*h[1];h=d[5];n=a[5];n[0]-=b[0]*h[1];n[1]=-c*h[1];h[2]-=e[2]*h[1];h[3]-=e[3]*h[1];h[4]-=e[4]*h[1];h[5]-=e[5]*h[1];e=d[2];b=a[2];c=1/e[2];b[2]=c;b[0]*=c;b[1]*=c;e[3]*=c;e[4]*=c;e[5]*=c;h=d[0];n=a[0];n[0]-=b[0]*h[2];h[3]-=e[3]*h[2];h[4]-=e[4]*h[2];h[5]-=e[5]*h[2];h=d[1];n=a[1];n[0]-=b[0]*h[2];n[1]-=b[1]*h[2];h[3]-=e[3]*h[2];h[4]-=e[4]*h[2];h[5]-=e[5]*h[2];h=d[3];n=a[3];n[0]-=b[0]*h[2];n[1]-=b[1]*h[2];n[2]=-c*h[2];h[3]-=e[3]*h[2];h[4]-=e[4]*h[2];h[5]-=e[5]*h[2];h=d[4];n=a[4];n[0]-=b[0]*h[2];n[1]-=
b[1]*h[2];n[2]=-c*h[2];h[3]-=e[3]*h[2];h[4]-=e[4]*h[2];h[5]-=e[5]*h[2];h=d[5];n=a[5];n[0]-=b[0]*h[2];n[1]-=b[1]*h[2];n[2]=-c*h[2];h[3]-=e[3]*h[2];h[4]-=e[4]*h[2];h[5]-=e[5]*h[2];e=d[3];b=a[3];c=1/e[3];b[3]=c;b[0]*=c;b[1]*=c;b[2]*=c;e[4]*=c;e[5]*=c;h=d[0];n=a[0];n[0]-=b[0]*h[3];h[4]-=e[4]*h[3];h[5]-=e[5]*h[3];h=d[1];n=a[1];n[0]-=b[0]*h[3];n[1]-=b[1]*h[3];h[4]-=e[4]*h[3];h[5]-=e[5]*h[3];h=d[2];n=a[2];n[0]-=b[0]*h[3];n[1]-=b[1]*h[3];n[2]-=b[2]*h[3];h[4]-=e[4]*h[3];h[5]-=e[5]*h[3];h=d[4];n=a[4];n[0]-=
b[0]*h[3];n[1]-=b[1]*h[3];n[2]-=b[2]*h[3];n[3]=-c*h[3];h[4]-=e[4]*h[3];h[5]-=e[5]*h[3];h=d[5];n=a[5];n[0]-=b[0]*h[3];n[1]-=b[1]*h[3];n[2]-=b[2]*h[3];n[3]=-c*h[3];h[4]-=e[4]*h[3];h[5]-=e[5]*h[3];e=d[4];b=a[4];c=1/e[4];b[4]=c;b[0]*=c;b[1]*=c;b[2]*=c;b[3]*=c;e[5]*=c;h=d[0];n=a[0];n[0]-=b[0]*h[4];h[5]-=e[5]*h[4];h=d[1];n=a[1];n[0]-=b[0]*h[4];n[1]-=b[1]*h[4];h[5]-=e[5]*h[4];h=d[2];n=a[2];n[0]-=b[0]*h[4];n[1]-=b[1]*h[4];n[2]-=b[2]*h[4];h[5]-=e[5]*h[4];h=d[3];n=a[3];n[0]-=b[0]*h[4];n[1]-=b[1]*h[4];n[2]-=
b[2]*h[4];n[3]-=b[3]*h[4];h[5]-=e[5]*h[4];h=d[5];n=a[5];n[0]-=b[0]*h[4];n[1]-=b[1]*h[4];n[2]-=b[2]*h[4];n[3]-=b[3]*h[4];n[4]=-c*h[4];h[5]-=e[5]*h[4];e=d[5];b=a[5];c=1/e[5];b[5]=c;b[0]*=c;b[1]*=c;b[2]*=c;b[3]*=c;b[4]*=c;h=d[0];n=a[0];n[0]-=b[0]*h[5];h=d[1];n=a[1];n[0]-=b[0]*h[5];n[1]-=b[1]*h[5];h=d[2];n=a[2];n[0]-=b[0]*h[5];n[1]-=b[1]*h[5];n[2]-=b[2]*h[5];h=d[3];n=a[3];n[0]-=b[0]*h[5];n[1]-=b[1]*h[5];n[2]-=b[2]*h[5];n[3]-=b[3]*h[5];h=d[4];n=a[4];n[0]-=b[0]*h[5];n[1]-=b[1]*h[5];n[2]-=b[2]*h[5];n[3]-=
b[3]*h[5];n[4]-=b[4]*h[5];b=a[1];a[0][1]=b[0];b=a[2];a[0][2]=b[0];a[1][2]=b[1];b=a[3];a[0][3]=b[0];a[1][3]=b[1];a[2][3]=b[2];b=a[4];a[0][4]=b[0];a[1][4]=b[1];a[2][4]=b[2];a[3][4]=b[3];b=a[5];a[0][5]=b[0];a[1][5]=b[1];a[2][5]=b[2];a[3][5]=b[3];a[4][5]=b[4];break;default:for(f=0;f<c;){k=f++;e=d[k];b=a[k];m=1/e[k];b[k]=m;h=0;for(n=k;h<n;){var g=h++;b[g]*=m}h=k+1;for(n=c;h<n;)g=h++,e[g]*=m;g=0;for(var l=k;g<l;){var p=g++;h=d[p];n=a[p];var y=0;for(p+=1;y<p;){var r=y++;n[r]-=b[r]*h[k]}n=k+1;for(y=c;n<y;)p=
n++,h[p]-=e[p]*h[k]}g=k+1;for(l=c;g<l;){n=g++;h=d[n];n=a[n];y=0;for(p=k;y<p;)r=y++,n[r]-=b[r]*h[k];n[k]=-m*h[k];n=k+1;for(y=c;n<y;)p=n++,h[p]-=e[p]*h[k]}}for(d=1;d<c;)for(e=d++,b=a[e],f=0,k=e;f<k;)m=f++,a[m][e]=b[m]}},computeInvMass:function(a,b){var c=this._invMass,d=this._invMassWithoutCfm,e=a.numRows,f=a.b1,k=a.b2,m=f._invMass,h=k._invMass;var n=f._invInertia00;var g=f._invInertia01;var l=f._invInertia02;var p=f._invInertia10;var y=f._invInertia11;var r=f._invInertia12;var C=f._invInertia20;var q=
f._invInertia21;f=f._invInertia22;var I=k._invInertia00;var t=k._invInertia01;var z=k._invInertia02;var u=k._invInertia10;var A=k._invInertia11;var w=k._invInertia12;var O=k._invInertia20;var v=k._invInertia21;k=k._invInertia22;for(var B=0;B<e;){var x=B++,F=a.rows[x].jacobian;x=b[x];F.updateSparsity();0!=(F.flag&1)?(x.invMLin1X=F.lin1X*m,x.invMLin1Y=F.lin1Y*m,x.invMLin1Z=F.lin1Z*m,x.invMLin2X=F.lin2X*h,x.invMLin2Y=F.lin2Y*h,x.invMLin2Z=F.lin2Z*h):(x.invMLin1X=0,x.invMLin1Y=0,x.invMLin1Z=0,x.invMLin2X=
0,x.invMLin2Y=0,x.invMLin2Z=0);if(0!=(F.flag&2)){var qa=n*F.ang1X+g*F.ang1Y+l*F.ang1Z;var M=p*F.ang1X+y*F.ang1Y+r*F.ang1Z;var L=C*F.ang1X+q*F.ang1Y+f*F.ang1Z;x.invMAng1X=qa;x.invMAng1Y=M;x.invMAng1Z=L;qa=I*F.ang2X+t*F.ang2Y+z*F.ang2Z;M=u*F.ang2X+A*F.ang2Y+w*F.ang2Z;F=O*F.ang2X+v*F.ang2Y+k*F.ang2Z;x.invMAng2X=qa;x.invMAng2Y=M;x.invMAng2Z=F}else x.invMAng1X=0,x.invMAng1Y=0,x.invMAng1Z=0,x.invMAng2X=0,x.invMAng2Y=0,x.invMAng2Z=0}for(m=0;m<e;)for(h=m++,n=a.rows[h].jacobian,g=h,l=e;g<l;)p=g++,y=b[p],r=
n.lin1X*y.invMLin1X+n.lin1Y*y.invMLin1Y+n.lin1Z*y.invMLin1Z+(n.ang1X*y.invMAng1X+n.ang1Y*y.invMAng1Y+n.ang1Z*y.invMAng1Z)+(n.lin2X*y.invMLin2X+n.lin2Y*y.invMLin2Y+n.lin2Z*y.invMLin2Z)+(n.ang2X*y.invMAng2X+n.ang2Y*y.invMAng2Y+n.ang2Z*y.invMAng2Z),h==p?(c[h][p]=r+a.rows[h].cfm,d[h][p]=r,y.mass=r+a.rows[h].cfm,y.massWithoutCfm=r,0!=y.mass&&(y.mass=1/y.mass),0!=y.massWithoutCfm&&(y.massWithoutCfm=1/y.massWithoutCfm)):(c[h][p]=r,c[p][h]=r,d[h][p]=r,d[p][h]=r);a=0;for(b=this._maxSubmatrixId;a<b;)c=a++,
this._cacheComputed[c]=!1},__class__:Vj};var Nk=function(a){Gd.call(this);this.constraint=a;this.info=new Tj;this.massData=Array(ta.maxManifoldPoints);a=0;for(var b=this.massData.length;a<b;){var c=a++;this.massData[c]=new Sk}};g["oimo.dynamics.constraint.solver.pgs.PgsContactConstraintSolver"]=Nk;Nk.__name__="oimo.dynamics.constraint.solver.pgs.PgsContactConstraintSolver";Nk.__super__=Gd;Nk.prototype=v(Gd.prototype,{constraint:null,info:null,massData:null,preSolveVelocity:function(a){this.constraint._getVelocitySolverInfo(a,
this.info);this._b1=this.info.b1;this._b2=this.info.b2;a=this._b1._invMass;var b=this._b2._invMass;var c=this._b1._invInertia00;var d=this._b1._invInertia01;var e=this._b1._invInertia02;var f=this._b1._invInertia10;var k=this._b1._invInertia11;var m=this._b1._invInertia12;var h=this._b1._invInertia20;var n=this._b1._invInertia21;var g=this._b1._invInertia22;var l=this._b2._invInertia00;var p=this._b2._invInertia01;var y=this._b2._invInertia02;var r=this._b2._invInertia10;var C=this._b2._invInertia11;
var q=this._b2._invInertia12;var I=this._b2._invInertia20;var t=this._b2._invInertia21;var z=this._b2._invInertia22;for(var u=0,A=this.info.numRows;u<A;){var w=u++,O=this.info.rows[w];w=this.massData[w];var v=O.jacobianN;w.invMLinN1X=v.lin1X*a;w.invMLinN1Y=v.lin1Y*a;w.invMLinN1Z=v.lin1Z*a;w.invMLinN2X=v.lin2X*b;w.invMLinN2Y=v.lin2Y*b;w.invMLinN2Z=v.lin2Z*b;var F=c*v.ang1X+d*v.ang1Y+e*v.ang1Z;var x=f*v.ang1X+k*v.ang1Y+m*v.ang1Z;var B=h*v.ang1X+n*v.ang1Y+g*v.ang1Z;w.invMAngN1X=F;w.invMAngN1Y=x;w.invMAngN1Z=
B;F=l*v.ang2X+p*v.ang2Y+y*v.ang2Z;x=r*v.ang2X+C*v.ang2Y+q*v.ang2Z;B=I*v.ang2X+t*v.ang2Y+z*v.ang2Z;w.invMAngN2X=F;w.invMAngN2Y=x;w.invMAngN2Z=B;w.massN=a+b+(w.invMAngN1X*v.ang1X+w.invMAngN1Y*v.ang1Y+w.invMAngN1Z*v.ang1Z)+(w.invMAngN2X*v.ang2X+w.invMAngN2Y*v.ang2Y+w.invMAngN2Z*v.ang2Z);0!=w.massN&&(w.massN=1/w.massN);v=O.jacobianT;O=O.jacobianB;w.invMLinT1X=v.lin1X*a;w.invMLinT1Y=v.lin1Y*a;w.invMLinT1Z=v.lin1Z*a;w.invMLinT2X=v.lin2X*b;w.invMLinT2Y=v.lin2Y*b;w.invMLinT2Z=v.lin2Z*b;w.invMLinB1X=O.lin1X*
a;w.invMLinB1Y=O.lin1Y*a;w.invMLinB1Z=O.lin1Z*a;w.invMLinB2X=O.lin2X*b;w.invMLinB2Y=O.lin2Y*b;w.invMLinB2Z=O.lin2Z*b;F=c*v.ang1X+d*v.ang1Y+e*v.ang1Z;x=f*v.ang1X+k*v.ang1Y+m*v.ang1Z;B=h*v.ang1X+n*v.ang1Y+g*v.ang1Z;w.invMAngT1X=F;w.invMAngT1Y=x;w.invMAngT1Z=B;F=l*v.ang2X+p*v.ang2Y+y*v.ang2Z;x=r*v.ang2X+C*v.ang2Y+q*v.ang2Z;B=I*v.ang2X+t*v.ang2Y+z*v.ang2Z;w.invMAngT2X=F;w.invMAngT2Y=x;w.invMAngT2Z=B;F=c*O.ang1X+d*O.ang1Y+e*O.ang1Z;x=f*O.ang1X+k*O.ang1Y+m*O.ang1Z;B=h*O.ang1X+n*O.ang1Y+g*O.ang1Z;w.invMAngB1X=
F;w.invMAngB1Y=x;w.invMAngB1Z=B;F=l*O.ang2X+p*O.ang2Y+y*O.ang2Z;x=r*O.ang2X+C*O.ang2Y+q*O.ang2Z;B=I*O.ang2X+t*O.ang2Y+z*O.ang2Z;w.invMAngB2X=F;w.invMAngB2Y=x;w.invMAngB2Z=B;v=a+b+(w.invMAngT1X*v.ang1X+w.invMAngT1Y*v.ang1Y+w.invMAngT1Z*v.ang1Z)+(w.invMAngT2X*v.ang2X+w.invMAngT2Y*v.ang2Y+w.invMAngT2Z*v.ang2Z);x=F=w.invMAngT1X*O.ang1X+w.invMAngT1Y*O.ang1Y+w.invMAngT1Z*O.ang1Z+(w.invMAngT2X*O.ang2X+w.invMAngT2Y*O.ang2Y+w.invMAngT2Z*O.ang2Z);O=a+b+(w.invMAngB1X*O.ang1X+w.invMAngB1Y*O.ang1Y+w.invMAngB1Z*
O.ang1Z)+(w.invMAngB2X*O.ang2X+w.invMAngB2Y*O.ang2Y+w.invMAngB2Z*O.ang2Z);B=v*O-F*x;0!=B&&(B=1/B);w.massTB00=O*B;w.massTB01=-F*B;w.massTB10=-x*B;w.massTB11=v*B}},warmStart:function(a){var b=this._b1._velX;var c=this._b1._velY;var d=this._b1._velZ;var e=this._b2._velX;var f=this._b2._velY;var k=this._b2._velZ;var m=this._b1._angVelX;var h=this._b1._angVelY;var n=this._b1._angVelZ;var g=this._b2._angVelX;var l=this._b2._angVelY;var p=this._b2._angVelZ;for(var y=0,r=this.info.numRows;y<r;){var C=y++,
q=this.info.rows[C],I=q.impulse;C=this.massData[C];var t=q.jacobianT,z=q.jacobianB;q=I.impulseN;t=I.impulseLX*t.lin1X+I.impulseLY*t.lin1Y+I.impulseLZ*t.lin1Z;z=I.impulseLX*z.lin1X+I.impulseLY*z.lin1Y+I.impulseLZ*z.lin1Z;I.impulseT=t;I.impulseB=z;I.impulseN*=a.dtRatio;I.impulseT*=a.dtRatio;I.impulseB*=a.dtRatio;b+=C.invMLinN1X*q;c+=C.invMLinN1Y*q;d+=C.invMLinN1Z*q;b+=C.invMLinT1X*t;c+=C.invMLinT1Y*t;d+=C.invMLinT1Z*t;b+=C.invMLinB1X*z;c+=C.invMLinB1Y*z;d+=C.invMLinB1Z*z;e+=C.invMLinN2X*-q;f+=C.invMLinN2Y*
-q;k+=C.invMLinN2Z*-q;e+=C.invMLinT2X*-t;f+=C.invMLinT2Y*-t;k+=C.invMLinT2Z*-t;e+=C.invMLinB2X*-z;f+=C.invMLinB2Y*-z;k+=C.invMLinB2Z*-z;m+=C.invMAngN1X*q;h+=C.invMAngN1Y*q;n+=C.invMAngN1Z*q;m+=C.invMAngT1X*t;h+=C.invMAngT1Y*t;n+=C.invMAngT1Z*t;m+=C.invMAngB1X*z;h+=C.invMAngB1Y*z;n+=C.invMAngB1Z*z;g+=C.invMAngN2X*-q;l+=C.invMAngN2Y*-q;p+=C.invMAngN2Z*-q;g+=C.invMAngT2X*-t;l+=C.invMAngT2Y*-t;p+=C.invMAngT2Z*-t;g+=C.invMAngB2X*-z;l+=C.invMAngB2Y*-z;p+=C.invMAngB2Z*-z}this._b1._velX=b;this._b1._velY=
c;this._b1._velZ=d;this._b2._velX=e;this._b2._velY=f;this._b2._velZ=k;this._b1._angVelX=m;this._b1._angVelY=h;this._b1._angVelZ=n;this._b2._angVelX=g;this._b2._angVelY=l;this._b2._angVelZ=p},solveVelocity:function(){var a=this._b1._velX;var b=this._b1._velY;var c=this._b1._velZ;var d=this._b2._velX;var e=this._b2._velY;var f=this._b2._velZ;var k=this._b1._angVelX;var m=this._b1._angVelY;var h=this._b1._angVelZ;var n=this._b2._angVelX;var g=this._b2._angVelY;var l=this._b2._angVelZ;for(var p=0,y=this.info.numRows;p<
y;){var r=p++,C=this.info.rows[r];r=this.massData[r];var q=C.impulse,I=0,t=C.jacobianT;I+=a*t.lin1X+b*t.lin1Y+c*t.lin1Z;I-=d*t.lin2X+e*t.lin2Y+f*t.lin2Z;I+=k*t.ang1X+m*t.ang1Y+h*t.ang1Z;I-=n*t.ang2X+g*t.ang2Y+l*t.ang2Z;var z=0;t=C.jacobianB;z+=a*t.lin1X+b*t.lin1Y+c*t.lin1Z;z-=d*t.lin2X+e*t.lin2Y+f*t.lin2Z;z+=k*t.ang1X+m*t.ang1Y+h*t.ang1Z;z-=n*t.ang2X+g*t.ang2Y+l*t.ang2Z;t=-(I*r.massTB00+z*r.massTB01);var w=-(I*r.massTB10+z*r.massTB11);I=q.impulseT;z=q.impulseB;q.impulseT+=t;q.impulseB+=w;C=C.friction*
q.impulseN;0==C?(q.impulseT=0,q.impulseB=0):(t=q.impulseT*q.impulseT+q.impulseB*q.impulseB,t>C*C&&(C/=Math.sqrt(t),q.impulseT*=C,q.impulseB*=C));t=q.impulseT-I;w=q.impulseB-z;a+=r.invMLinT1X*t;b+=r.invMLinT1Y*t;c+=r.invMLinT1Z*t;a+=r.invMLinB1X*w;b+=r.invMLinB1Y*w;c+=r.invMLinB1Z*w;d+=r.invMLinT2X*-t;e+=r.invMLinT2Y*-t;f+=r.invMLinT2Z*-t;d+=r.invMLinB2X*-w;e+=r.invMLinB2Y*-w;f+=r.invMLinB2Z*-w;k+=r.invMAngT1X*t;m+=r.invMAngT1Y*t;h+=r.invMAngT1Z*t;k+=r.invMAngB1X*w;m+=r.invMAngB1Y*w;h+=r.invMAngB1Z*
w;n+=r.invMAngT2X*-t;g+=r.invMAngT2Y*-t;l+=r.invMAngT2Z*-t;n+=r.invMAngB2X*-w;g+=r.invMAngB2Y*-w;l+=r.invMAngB2Z*-w}p=0;for(y=this.info.numRows;p<y;)r=p++,C=this.info.rows[r],r=this.massData[r],q=C.impulse,I=0,z=C.jacobianN,I+=a*z.lin1X+b*z.lin1Y+c*z.lin1Z,I-=d*z.lin2X+e*z.lin2Y+f*z.lin2Z,I+=k*z.ang1X+m*z.ang1Y+h*z.ang1Z,I-=n*z.ang2X+g*z.ang2Y+l*z.ang2Z,C=(C.rhs-I)*r.massN,I=q.impulseN,q.impulseN+=C,0>q.impulseN&&(q.impulseN=0),C=q.impulseN-I,a+=r.invMLinN1X*C,b+=r.invMLinN1Y*C,c+=r.invMLinN1Z*C,
d+=r.invMLinN2X*-C,e+=r.invMLinN2Y*-C,f+=r.invMLinN2Z*-C,k+=r.invMAngN1X*C,m+=r.invMAngN1Y*C,h+=r.invMAngN1Z*C,n+=r.invMAngN2X*-C,g+=r.invMAngN2Y*-C,l+=r.invMAngN2Z*-C;this._b1._velX=a;this._b1._velY=b;this._b1._velZ=c;this._b2._velX=d;this._b2._velY=e;this._b2._velZ=f;this._b1._angVelX=k;this._b1._angVelY=m;this._b1._angVelZ=h;this._b2._angVelX=n;this._b2._angVelY=g;this._b2._angVelZ=l},preSolvePosition:function(a){this.constraint._syncManifold();this.constraint._getPositionSolverInfo(this.info);
a=this._b1._invMass;var b=this._b2._invMass;var c=this._b1._invInertia00;var d=this._b1._invInertia01;var e=this._b1._invInertia02;var f=this._b1._invInertia10;var k=this._b1._invInertia11;var m=this._b1._invInertia12;var h=this._b1._invInertia20;var n=this._b1._invInertia21;var g=this._b1._invInertia22;var l=this._b2._invInertia00;var p=this._b2._invInertia01;var y=this._b2._invInertia02;var r=this._b2._invInertia10;var C=this._b2._invInertia11;var q=this._b2._invInertia12;var t=this._b2._invInertia20;
var z=this._b2._invInertia21;var w=this._b2._invInertia22;for(var u=0,v=this.info.numRows;u<v;){var O=u++,A=this.massData[O];O=this.info.rows[O].jacobianN;A.invMLinN1X=O.lin1X*a;A.invMLinN1Y=O.lin1Y*a;A.invMLinN1Z=O.lin1Z*a;A.invMLinN2X=O.lin2X*b;A.invMLinN2Y=O.lin2Y*b;A.invMLinN2Z=O.lin2Z*b;var F=c*O.ang1X+d*O.ang1Y+e*O.ang1Z;var x=f*O.ang1X+k*O.ang1Y+m*O.ang1Z;var B=h*O.ang1X+n*O.ang1Y+g*O.ang1Z;A.invMAngN1X=F;A.invMAngN1Y=x;A.invMAngN1Z=B;F=l*O.ang2X+p*O.ang2Y+y*O.ang2Z;x=r*O.ang2X+C*O.ang2Y+q*
O.ang2Z;B=t*O.ang2X+z*O.ang2Y+w*O.ang2Z;A.invMAngN2X=F;A.invMAngN2Y=x;A.invMAngN2Z=B;A.massN=a+b+(A.invMAngN1X*O.ang1X+A.invMAngN1Y*O.ang1Y+A.invMAngN1Z*O.ang1Z)+(A.invMAngN2X*O.ang2X+A.invMAngN2Y*O.ang2Y+A.invMAngN2Z*O.ang2Z);0!=A.massN&&(A.massN=1/A.massN)}a=0;for(b=this.info.numRows;a<b;)c=a++,this.info.rows[c].impulse.impulseP=0},solvePositionSplitImpulse:function(){var a=this._b1._pseudoVelX;var b=this._b1._pseudoVelY;var c=this._b1._pseudoVelZ;var d=this._b2._pseudoVelX;var e=this._b2._pseudoVelY;
var f=this._b2._pseudoVelZ;var k=this._b1._angPseudoVelX;var m=this._b1._angPseudoVelY;var h=this._b1._angPseudoVelZ;var n=this._b2._angPseudoVelX;var g=this._b2._angPseudoVelY;var l=this._b2._angPseudoVelZ;for(var p=0,y=this.info.numRows;p<y;){var r=p++,C=this.info.rows[r];r=this.massData[r];var q=C.impulse,t=C.jacobianN,z=0;z+=a*t.lin1X+b*t.lin1Y+c*t.lin1Z;z-=d*t.lin2X+e*t.lin2Y+f*t.lin2Z;z+=k*t.ang1X+m*t.ang1Y+h*t.ang1Z;z-=n*t.ang2X+g*t.ang2Y+l*t.ang2Z;C=(C.rhs-z)*r.massN*ta.positionSplitImpulseBaumgarte;
t=q.impulseP;q.impulseP+=C;0>q.impulseP&&(q.impulseP=0);C=q.impulseP-t;a+=r.invMLinN1X*C;b+=r.invMLinN1Y*C;c+=r.invMLinN1Z*C;d+=r.invMLinN2X*-C;e+=r.invMLinN2Y*-C;f+=r.invMLinN2Z*-C;k+=r.invMAngN1X*C;m+=r.invMAngN1Y*C;h+=r.invMAngN1Z*C;n+=r.invMAngN2X*-C;g+=r.invMAngN2Y*-C;l+=r.invMAngN2Z*-C}this._b1._pseudoVelX=a;this._b1._pseudoVelY=b;this._b1._pseudoVelZ=c;this._b2._pseudoVelX=d;this._b2._pseudoVelY=e;this._b2._pseudoVelZ=f;this._b1._angPseudoVelX=k;this._b1._angPseudoVelY=m;this._b1._angPseudoVelZ=
h;this._b2._angPseudoVelX=n;this._b2._angPseudoVelY=g;this._b2._angPseudoVelZ=l},solvePositionNgs:function(a){this.constraint._syncManifold();this.constraint._getPositionSolverInfo(this.info);var b=this._b1._invMass,c=this._b2._invMass;var d=this._b1._invInertia00;var e=this._b1._invInertia01;var f=this._b1._invInertia02;var k=this._b1._invInertia10;var m=this._b1._invInertia11;var h=this._b1._invInertia12;var n=this._b1._invInertia20;var g=this._b1._invInertia21;var l=this._b1._invInertia22;var p=
this._b2._invInertia00;var y=this._b2._invInertia01;var r=this._b2._invInertia02;var q=this._b2._invInertia10;var t=this._b2._invInertia11;var z=this._b2._invInertia12;var w=this._b2._invInertia20;var O=this._b2._invInertia21;var u=this._b2._invInertia22;for(var v=0,A=this.info.numRows;v<A;){var F=v++,x=this.massData[F],B=this.info.rows[F].jacobianN;x.invMLinN1X=B.lin1X*b;x.invMLinN1Y=B.lin1Y*b;x.invMLinN1Z=B.lin1Z*b;x.invMLinN2X=B.lin2X*c;x.invMLinN2Y=B.lin2Y*c;x.invMLinN2Z=B.lin2Z*c;var qa=d*B.ang1X+
e*B.ang1Y+f*B.ang1Z;var M=k*B.ang1X+m*B.ang1Y+h*B.ang1Z;var L=n*B.ang1X+g*B.ang1Y+l*B.ang1Z;x.invMAngN1X=qa;x.invMAngN1Y=M;x.invMAngN1Z=L;var Ia=p*B.ang2X+y*B.ang2Y+r*B.ang2Z;var Ca=q*B.ang2X+t*B.ang2Y+z*B.ang2Z;var ja=w*B.ang2X+O*B.ang2Y+u*B.ang2Z;x.invMAngN2X=Ia;x.invMAngN2Y=Ca;x.invMAngN2Z=ja;x.massN=b+c+(x.invMAngN1X*B.ang1X+x.invMAngN1Y*B.ang1Y+x.invMAngN1Z*B.ang1Z)+(x.invMAngN2X*B.ang2X+x.invMAngN2Y*B.ang2Y+x.invMAngN2Z*B.ang2Z);0!=x.massN&&(x.massN=1/x.massN)}for(var D,J,ba,ha,N,mb,S,aa,W,
fa,U,ia,Y=ia=U=fa=W=aa=S=mb=N=ha=ba=J=D=0,Ma=this.info.numRows;Y<Ma;){var V=Y++,Q=this.info.rows[V],ma=this.massData[V],Pa=Q.impulse,Z=Q.jacobianN,R=0;R+=D*Z.lin1X+J*Z.lin1Y+ba*Z.lin1Z;R-=ha*Z.lin2X+N*Z.lin2Y+mb*Z.lin2Z;R+=S*Z.ang1X+aa*Z.ang1Y+W*Z.ang1Z;R-=fa*Z.ang2X+U*Z.ang2Y+ia*Z.ang2Z;var Ja=(Q.rhs-R)*ma.massN*ta.positionNgsBaumgarte,T=Pa.impulseP;Pa.impulseP+=Ja;0>Pa.impulseP&&(Pa.impulseP=0);Ja=Pa.impulseP-T;D+=ma.invMLinN1X*Ja;J+=ma.invMLinN1Y*Ja;ba+=ma.invMLinN1Z*Ja;ha+=ma.invMLinN2X*-Ja;N+=
ma.invMLinN2Y*-Ja;mb+=ma.invMLinN2Z*-Ja;S+=ma.invMAngN1X*Ja;aa+=ma.invMAngN1Y*Ja;W+=ma.invMAngN1Z*Ja;fa+=ma.invMAngN2X*-Ja;U+=ma.invMAngN2Y*-Ja;ia+=ma.invMAngN2Z*-Ja}var Ta=this._b1;Ta._transform._positionX+=D;Ta._transform._positionY+=J;Ta._transform._positionZ+=ba;var X=this._b2;X._transform._positionX+=ha;X._transform._positionY+=N;X._transform._positionZ+=mb;var G=this._b1,ka=Math.sqrt(S*S+aa*aa+W*W),pa=.5*ka;if(.5>pa){var $a=pa*pa;var la=.5*(1-.16666666666666666*$a+$a*$a*.008333333333333333);
var na=1-.5*$a+$a*$a*.041666666666666664}else la=Math.sin(pa)/ka,na=Math.cos(pa);var ra=S*la;var ea=aa*la;var ua=W*la;var va=na;var Ha=G._transform._rotation00,sa=G._transform._rotation11,qb=G._transform._rotation22,ya=Ha+sa+qb;if(0<ya){var da=Math.sqrt(ya+1);var xa=.5*da;da=.5/da;var Ba=(G._transform._rotation21-G._transform._rotation12)*da;var Aa=(G._transform._rotation02-G._transform._rotation20)*da;var wa=(G._transform._rotation10-G._transform._rotation01)*da}else Ha>sa?Ha>qb?(da=Math.sqrt(Ha-
sa-qb+1),Ba=.5*da,da=.5/da,Aa=(G._transform._rotation01+G._transform._rotation10)*da,wa=(G._transform._rotation02+G._transform._rotation20)*da,xa=(G._transform._rotation21-G._transform._rotation12)*da):(da=Math.sqrt(qb-Ha-sa+1),wa=.5*da,da=.5/da,Ba=(G._transform._rotation02+G._transform._rotation20)*da,Aa=(G._transform._rotation12+G._transform._rotation21)*da,xa=(G._transform._rotation10-G._transform._rotation01)*da):sa>qb?(da=Math.sqrt(sa-qb-Ha+1),Aa=.5*da,da=.5/da,Ba=(G._transform._rotation01+G._transform._rotation10)*
da,wa=(G._transform._rotation12+G._transform._rotation21)*da,xa=(G._transform._rotation02-G._transform._rotation20)*da):(da=Math.sqrt(qb-Ha-sa+1),wa=.5*da,da=.5/da,Ba=(G._transform._rotation02+G._transform._rotation20)*da,Aa=(G._transform._rotation12+G._transform._rotation21)*da,xa=(G._transform._rotation10-G._transform._rotation01)*da);Ba=va*Ba+ra*xa+ea*wa-ua*Aa;Aa=va*Aa-ra*wa+ea*xa+ua*Ba;wa=va*wa+ra*Aa-ea*Ba+ua*xa;xa=va*xa-ra*Ba-ea*Aa-ua*wa;var Fa=Ba*Ba+Aa*Aa+wa*wa+xa*xa;1E-32<Fa&&(Fa=1/Math.sqrt(Fa));
Ba*=Fa;Aa*=Fa;wa*=Fa;xa*=Fa;var Da=Ba,Ga=Aa,Ka=wa,La=xa,Fb=2*Da,Oa=2*Ga,Na=2*Ka,Qa=Da*Fb,Ra=Ga*Oa,Pb=Ka*Na,Va=Da*Oa,Sa=Ga*Na,Za=Da*Na,Xa=La*Fb,Ya=La*Oa,ab=La*Na;G._transform._rotation00=1-Ra-Pb;G._transform._rotation01=Va-ab;G._transform._rotation02=Za+Ya;G._transform._rotation10=Va+ab;G._transform._rotation11=1-Qa-Pb;G._transform._rotation12=Sa-Xa;G._transform._rotation20=Za-Ya;G._transform._rotation21=Sa+Xa;G._transform._rotation22=1-Qa-Ra;var cb=G._transform._rotation00*G._invLocalInertia00+G._transform._rotation01*
G._invLocalInertia10+G._transform._rotation02*G._invLocalInertia20;var nb=G._transform._rotation00*G._invLocalInertia01+G._transform._rotation01*G._invLocalInertia11+G._transform._rotation02*G._invLocalInertia21;var ca=G._transform._rotation00*G._invLocalInertia02+G._transform._rotation01*G._invLocalInertia12+G._transform._rotation02*G._invLocalInertia22;var ob=G._transform._rotation10*G._invLocalInertia00+G._transform._rotation11*G._invLocalInertia10+G._transform._rotation12*G._invLocalInertia20;
var eb=G._transform._rotation10*G._invLocalInertia01+G._transform._rotation11*G._invLocalInertia11+G._transform._rotation12*G._invLocalInertia21;var hb=G._transform._rotation10*G._invLocalInertia02+G._transform._rotation11*G._invLocalInertia12+G._transform._rotation12*G._invLocalInertia22;var sb=G._transform._rotation20*G._invLocalInertia00+G._transform._rotation21*G._invLocalInertia10+G._transform._rotation22*G._invLocalInertia20;var tb=G._transform._rotation20*G._invLocalInertia01+G._transform._rotation21*
G._invLocalInertia11+G._transform._rotation22*G._invLocalInertia21;var ib=G._transform._rotation20*G._invLocalInertia02+G._transform._rotation21*G._invLocalInertia12+G._transform._rotation22*G._invLocalInertia22;G._invInertia00=cb;G._invInertia01=nb;G._invInertia02=ca;G._invInertia10=ob;G._invInertia11=eb;G._invInertia12=hb;G._invInertia20=sb;G._invInertia21=tb;G._invInertia22=ib;var fb=G._invInertia00*G._transform._rotation00+G._invInertia01*G._transform._rotation01+G._invInertia02*G._transform._rotation02;
var gb=G._invInertia00*G._transform._rotation10+G._invInertia01*G._transform._rotation11+G._invInertia02*G._transform._rotation12;var Kb=G._invInertia00*G._transform._rotation20+G._invInertia01*G._transform._rotation21+G._invInertia02*G._transform._rotation22;var P=G._invInertia10*G._transform._rotation00+G._invInertia11*G._transform._rotation01+G._invInertia12*G._transform._rotation02;var Vb=G._invInertia10*G._transform._rotation10+G._invInertia11*G._transform._rotation11+G._invInertia12*G._transform._rotation12;
var rb=G._invInertia10*G._transform._rotation20+G._invInertia11*G._transform._rotation21+G._invInertia12*G._transform._rotation22;var jb=G._invInertia20*G._transform._rotation00+G._invInertia21*G._transform._rotation01+G._invInertia22*G._transform._rotation02;var Xb=G._invInertia20*G._transform._rotation10+G._invInertia21*G._transform._rotation11+G._invInertia22*G._transform._rotation12;var wb=G._invInertia20*G._transform._rotation20+G._invInertia21*G._transform._rotation21+G._invInertia22*G._transform._rotation22;
G._invInertia00=fb;G._invInertia01=gb;G._invInertia02=Kb;G._invInertia10=P;G._invInertia11=Vb;G._invInertia12=rb;G._invInertia20=jb;G._invInertia21=Xb;G._invInertia22=wb;G._invInertia00*=G._rotFactor.x;G._invInertia01*=G._rotFactor.x;G._invInertia02*=G._rotFactor.x;G._invInertia10*=G._rotFactor.y;G._invInertia11*=G._rotFactor.y;G._invInertia12*=G._rotFactor.y;G._invInertia20*=G._rotFactor.z;G._invInertia21*=G._rotFactor.z;G._invInertia22*=G._rotFactor.z;var E=this._b2,Ea=Math.sqrt(fa*fa+U*U+ia*ia),
za=.5*Ea;if(.5>za){var Ib=za*za;var bb=.5*(1-.16666666666666666*Ib+Ib*Ib*.008333333333333333);var lb=1-.5*Ib+Ib*Ib*.041666666666666664}else bb=Math.sin(za)/Ea,lb=Math.cos(za);var Ub=fa*bb;var pb=U*bb;var kb=ia*bb;var xb=lb;var zb=E._transform._rotation00,Hb=E._transform._rotation11,Ob=E._transform._rotation22,db=zb+Hb+Ob;if(0<db){var Ua=Math.sqrt(db+1);var Cb=.5*Ua;Ua=.5/Ua;var Jb=(E._transform._rotation21-E._transform._rotation12)*Ua;var Wa=(E._transform._rotation02-E._transform._rotation20)*Ua;
var vb=(E._transform._rotation10-E._transform._rotation01)*Ua}else zb>Hb?zb>Ob?(Ua=Math.sqrt(zb-Hb-Ob+1),Jb=.5*Ua,Ua=.5/Ua,Wa=(E._transform._rotation01+E._transform._rotation10)*Ua,vb=(E._transform._rotation02+E._transform._rotation20)*Ua,Cb=(E._transform._rotation21-E._transform._rotation12)*Ua):(Ua=Math.sqrt(Ob-zb-Hb+1),vb=.5*Ua,Ua=.5/Ua,Jb=(E._transform._rotation02+E._transform._rotation20)*Ua,Wa=(E._transform._rotation12+E._transform._rotation21)*Ua,Cb=(E._transform._rotation10-E._transform._rotation01)*
Ua):Hb>Ob?(Ua=Math.sqrt(Hb-Ob-zb+1),Wa=.5*Ua,Ua=.5/Ua,Jb=(E._transform._rotation01+E._transform._rotation10)*Ua,vb=(E._transform._rotation12+E._transform._rotation21)*Ua,Cb=(E._transform._rotation02-E._transform._rotation20)*Ua):(Ua=Math.sqrt(Ob-zb-Hb+1),vb=.5*Ua,Ua=.5/Ua,Jb=(E._transform._rotation02+E._transform._rotation20)*Ua,Wa=(E._transform._rotation12+E._transform._rotation21)*Ua,Cb=(E._transform._rotation10-E._transform._rotation01)*Ua);Jb=xb*Jb+Ub*Cb+pb*vb-kb*Wa;Wa=xb*Wa-Ub*vb+pb*Cb+kb*Jb;
vb=xb*vb+Ub*Wa-pb*Jb+kb*Cb;Cb=xb*Cb-Ub*Jb-pb*Wa-kb*vb;var Ab=Jb*Jb+Wa*Wa+vb*vb+Cb*Cb;1E-32<Ab&&(Ab=1/Math.sqrt(Ab));Jb*=Ab;Wa*=Ab;vb*=Ab;Cb*=Ab;var Eb=Jb,Db=Wa,$b=vb,Gb=Cb,Mb=2*Eb,Lb=2*Db,ub=2*$b,Nb=Eb*Mb,Qb=Db*Lb,Rb=$b*ub,Sb=Eb*Lb,Zb=Db*ub,ac=Eb*ub,cc=Gb*Mb,dc=Gb*Lb,Tb=Gb*ub;E._transform._rotation00=1-Qb-Rb;E._transform._rotation01=Sb-Tb;E._transform._rotation02=ac+dc;E._transform._rotation10=Sb+Tb;E._transform._rotation11=1-Nb-Rb;E._transform._rotation12=Zb-cc;E._transform._rotation20=ac-dc;E._transform._rotation21=
Zb+cc;E._transform._rotation22=1-Nb-Qb;var Wb=E._transform._rotation00*E._invLocalInertia00+E._transform._rotation01*E._invLocalInertia10+E._transform._rotation02*E._invLocalInertia20;var fc=E._transform._rotation00*E._invLocalInertia01+E._transform._rotation01*E._invLocalInertia11+E._transform._rotation02*E._invLocalInertia21;var hc=E._transform._rotation00*E._invLocalInertia02+E._transform._rotation01*E._invLocalInertia12+E._transform._rotation02*E._invLocalInertia22;var ic=E._transform._rotation10*
E._invLocalInertia00+E._transform._rotation11*E._invLocalInertia10+E._transform._rotation12*E._invLocalInertia20;var jc=E._transform._rotation10*E._invLocalInertia01+E._transform._rotation11*E._invLocalInertia11+E._transform._rotation12*E._invLocalInertia21;var uc=E._transform._rotation10*E._invLocalInertia02+E._transform._rotation11*E._invLocalInertia12+E._transform._rotation12*E._invLocalInertia22;var kc=E._transform._rotation20*E._invLocalInertia00+E._transform._rotation21*E._invLocalInertia10+
E._transform._rotation22*E._invLocalInertia20;var lc=E._transform._rotation20*E._invLocalInertia01+E._transform._rotation21*E._invLocalInertia11+E._transform._rotation22*E._invLocalInertia21;var mc=E._transform._rotation20*E._invLocalInertia02+E._transform._rotation21*E._invLocalInertia12+E._transform._rotation22*E._invLocalInertia22;E._invInertia00=Wb;E._invInertia01=fc;E._invInertia02=hc;E._invInertia10=ic;E._invInertia11=jc;E._invInertia12=uc;E._invInertia20=kc;E._invInertia21=lc;E._invInertia22=
mc;var nc=E._invInertia00*E._transform._rotation00+E._invInertia01*E._transform._rotation01+E._invInertia02*E._transform._rotation02;var tc=E._invInertia00*E._transform._rotation10+E._invInertia01*E._transform._rotation11+E._invInertia02*E._transform._rotation12;var oc=E._invInertia00*E._transform._rotation20+E._invInertia01*E._transform._rotation21+E._invInertia02*E._transform._rotation22;var pc=E._invInertia10*E._transform._rotation00+E._invInertia11*E._transform._rotation01+E._invInertia12*E._transform._rotation02;
var qc=E._invInertia10*E._transform._rotation10+E._invInertia11*E._transform._rotation11+E._invInertia12*E._transform._rotation12;var rc=E._invInertia10*E._transform._rotation20+E._invInertia11*E._transform._rotation21+E._invInertia12*E._transform._rotation22;var sc=E._invInertia20*E._transform._rotation00+E._invInertia21*E._transform._rotation01+E._invInertia22*E._transform._rotation02;var vc=E._invInertia20*E._transform._rotation10+E._invInertia21*E._transform._rotation11+E._invInertia22*E._transform._rotation12;
var wc=E._invInertia20*E._transform._rotation20+E._invInertia21*E._transform._rotation21+E._invInertia22*E._transform._rotation22;E._invInertia00=nc;E._invInertia01=tc;E._invInertia02=oc;E._invInertia10=pc;E._invInertia11=qc;E._invInertia12=rc;E._invInertia20=sc;E._invInertia21=vc;E._invInertia22=wc;E._invInertia00*=E._rotFactor.x;E._invInertia01*=E._rotFactor.x;E._invInertia02*=E._rotFactor.x;E._invInertia10*=E._rotFactor.y;E._invInertia11*=E._rotFactor.y;E._invInertia12*=E._rotFactor.y;E._invInertia20*=
E._rotFactor.z;E._invInertia21*=E._rotFactor.z;E._invInertia22*=E._rotFactor.z},postSolve:function(){for(var a,b,c,d,e,f,k,m,h,n=h=m=k=f=e=d=c=b=a=0,g=this.info.numRows;n<g;){var l=n++,p=this.info.rows[l];l=p.impulse;var y=p.jacobianN,r=p.jacobianT;p=p.jacobianB;var q=l.impulseN,t=l.impulseT,z=l.impulseB,w,O;var u=O=w=0;w+=r.lin1X*t;O+=r.lin1Y*t;u+=r.lin1Z*t;w+=p.lin1X*z;O+=p.lin1Y*z;u+=p.lin1Z*z;l.impulseLX=w;l.impulseLY=O;l.impulseLZ=u;a+=y.lin1X*q;b+=y.lin1Y*q;c+=y.lin1Z*q;d+=y.ang1X*q;e+=y.ang1Y*
q;f+=y.ang1Z*q;k+=y.ang2X*q;m+=y.ang2Y*q;h+=y.ang2Z*q;a+=r.lin1X*t;b+=r.lin1Y*t;c+=r.lin1Z*t;d+=r.ang1X*t;e+=r.ang1Y*t;f+=r.ang1Z*t;k+=r.ang2X*t;m+=r.ang2Y*t;h+=r.ang2Z*t;a+=p.lin1X*z;b+=p.lin1Y*z;c+=p.lin1Z*z;d+=p.ang1X*z;e+=p.ang1Y*z;f+=p.ang1Z*z;k+=p.ang2X*z;m+=p.ang2Y*z;h+=p.ang2Z*z}this._b1._linearContactImpulseX+=a;this._b1._linearContactImpulseY+=b;this._b1._linearContactImpulseZ+=c;this._b1._angularContactImpulseX+=d;this._b1._angularContactImpulseY+=e;this._b1._angularContactImpulseZ+=f;
this._b2._linearContactImpulseX-=a;this._b2._linearContactImpulseY-=b;this._b2._linearContactImpulseZ-=c;this._b2._angularContactImpulseX-=k;this._b2._angularContactImpulseY-=m;this._b2._angularContactImpulseZ-=h;this.constraint._syncManifold()},__class__:Nk});var Uj=function(a){Gd.call(this);this.joint=a;this.info=new Qk;this.massData=Array(ta.maxJacobianRows);a=0;for(var b=this.massData.length;a<b;){var c=a++;this.massData[c]=new Oi}};g["oimo.dynamics.constraint.solver.pgs.PgsJointConstraintSolver"]=
Uj;Uj.__name__="oimo.dynamics.constraint.solver.pgs.PgsJointConstraintSolver";Uj.__super__=Gd;Uj.prototype=v(Gd.prototype,{joint:null,info:null,massData:null,preSolveVelocity:function(a){this.joint._syncAnchors();this.joint._getVelocitySolverInfo(a,this.info);this._b1=this.info.b1;this._b2=this.info.b2;a=this._b1._invMass;var b=this._b2._invMass;var c=this._b1._invInertia00;var d=this._b1._invInertia01;var e=this._b1._invInertia02;var f=this._b1._invInertia10;var k=this._b1._invInertia11;var m=this._b1._invInertia12;
var h=this._b1._invInertia20;var n=this._b1._invInertia21;var g=this._b1._invInertia22;var l=this._b2._invInertia00;var p=this._b2._invInertia01;var y=this._b2._invInertia02;var r=this._b2._invInertia10;var q=this._b2._invInertia11;var t=this._b2._invInertia12;var z=this._b2._invInertia20;var w=this._b2._invInertia21;var O=this._b2._invInertia22;for(var u=0,v=this.info.numRows;u<v;){var A=u++,B=this.info.rows[A];A=this.massData[A];var x=B.jacobian;x.updateSparsity();0!=(x.flag&1)?(A.invMLin1X=x.lin1X*
a,A.invMLin1Y=x.lin1Y*a,A.invMLin1Z=x.lin1Z*a,A.invMLin2X=x.lin2X*b,A.invMLin2Y=x.lin2Y*b,A.invMLin2Z=x.lin2Z*b):(A.invMLin1X=0,A.invMLin1Y=0,A.invMLin1Z=0,A.invMLin2X=0,A.invMLin2Y=0,A.invMLin2Z=0);if(0!=(x.flag&2)){var F=c*x.ang1X+d*x.ang1Y+e*x.ang1Z;var qa=f*x.ang1X+k*x.ang1Y+m*x.ang1Z;var M=h*x.ang1X+n*x.ang1Y+g*x.ang1Z;A.invMAng1X=F;A.invMAng1Y=qa;A.invMAng1Z=M;F=l*x.ang2X+p*x.ang2Y+y*x.ang2Z;qa=r*x.ang2X+q*x.ang2Y+t*x.ang2Z;M=z*x.ang2X+w*x.ang2Y+O*x.ang2Z;A.invMAng2X=F;A.invMAng2Y=qa;A.invMAng2Z=
M}else A.invMAng1X=0,A.invMAng1Y=0,A.invMAng1Z=0,A.invMAng2X=0,A.invMAng2Y=0,A.invMAng2Z=0;A.massWithoutCfm=A.invMLin1X*x.lin1X+A.invMLin1Y*x.lin1Y+A.invMLin1Z*x.lin1Z+(A.invMLin2X*x.lin2X+A.invMLin2Y*x.lin2Y+A.invMLin2Z*x.lin2Z)+(A.invMAng1X*x.ang1X+A.invMAng1Y*x.ang1Y+A.invMAng1Z*x.ang1Z)+(A.invMAng2X*x.ang2X+A.invMAng2Y*x.ang2Y+A.invMAng2Z*x.ang2Z);A.mass=A.massWithoutCfm+B.cfm;0!=A.massWithoutCfm&&(A.massWithoutCfm=1/A.massWithoutCfm);0!=A.mass&&(A.mass=1/A.mass)}},warmStart:function(a){var b=
this.joint._positionCorrectionAlgorithm==$e.BAUMGARTE?ta.jointWarmStartingFactorForBaungarte:ta.jointWarmStartingFactor;b*=a.dtRatio;if(0>=b)for(b=0,a=this.info.numRows;b<a;){var c=b++;c=this.info.rows[c].impulse;c.impulse=0;c.impulseM=0;c.impulseP=0}else{a=this._b1._velX;c=this._b1._velY;var d=this._b1._velZ;var e=this._b2._velX;var f=this._b2._velY;var k=this._b2._velZ;var m=this._b1._angVelX;var h=this._b1._angVelY;var n=this._b1._angVelZ;var g=this._b2._angVelX;var l=this._b2._angVelY;var p=this._b2._angVelZ;
for(var y=0,r=this.info.numRows;y<r;){var q=y++,t=this.massData[q];q=this.info.rows[q].impulse;q.impulse*=b;q.impulseM*=b;q=q.impulse+q.impulseM;a+=t.invMLin1X*q;c+=t.invMLin1Y*q;d+=t.invMLin1Z*q;e+=t.invMLin2X*-q;f+=t.invMLin2Y*-q;k+=t.invMLin2Z*-q;m+=t.invMAng1X*q;h+=t.invMAng1Y*q;n+=t.invMAng1Z*q;g+=t.invMAng2X*-q;l+=t.invMAng2Y*-q;p+=t.invMAng2Z*-q}this._b1._velX=a;this._b1._velY=c;this._b1._velZ=d;this._b2._velX=e;this._b2._velY=f;this._b2._velZ=k;this._b1._angVelX=m;this._b1._angVelY=h;this._b1._angVelZ=
n;this._b2._angVelX=g;this._b2._angVelY=l;this._b2._angVelZ=p}},solveVelocity:function(){var a=this._b1._velX;var b=this._b1._velY;var c=this._b1._velZ;var d=this._b2._velX;var e=this._b2._velY;var f=this._b2._velZ;var k=this._b1._angVelX;var m=this._b1._angVelY;var h=this._b1._angVelZ;var n=this._b2._angVelX;var g=this._b2._angVelY;var l=this._b2._angVelZ;for(var p=0,y=this.info.numRows;p<y;){var r=p++,q=this.info.rows[r];r=this.massData[r];var t=q.impulse,z=q.jacobian;if(0!=q.motorMaxImpulse){var w=
0;w+=a*z.lin1X+b*z.lin1Y+c*z.lin1Z;w-=d*z.lin2X+e*z.lin2Y+f*z.lin2Z;w+=k*z.ang1X+m*z.ang1Y+h*z.ang1Z;w-=n*z.ang2X+g*z.ang2Y+l*z.ang2Z;w=(-q.motorSpeed-w)*r.massWithoutCfm;var A=t.impulseM;t.impulseM+=w;t.impulseM<-q.motorMaxImpulse?t.impulseM=-q.motorMaxImpulse:t.impulseM>q.motorMaxImpulse&&(t.impulseM=q.motorMaxImpulse);w=t.impulseM-A;0!=(z.flag&1)&&(a+=r.invMLin1X*w,b+=r.invMLin1Y*w,c+=r.invMLin1Z*w,d+=r.invMLin2X*-w,e+=r.invMLin2Y*-w,f+=r.invMLin2Z*-w);0!=(z.flag&2)&&(k+=r.invMAng1X*w,m+=r.invMAng1Y*
w,h+=r.invMAng1Z*w,n+=r.invMAng2X*-w,g+=r.invMAng2Y*-w,l+=r.invMAng2Z*-w)}}p=0;for(y=this.info.numRows;p<y;)r=p++,q=this.info.rows[r],r=this.massData[r],t=q.impulse,z=q.jacobian,w=0,w+=a*z.lin1X+b*z.lin1Y+c*z.lin1Z,w-=d*z.lin2X+e*z.lin2Y+f*z.lin2Z,w+=k*z.ang1X+m*z.ang1Y+h*z.ang1Z,w-=n*z.ang2X+g*z.ang2Y+l*z.ang2Z,w=(q.rhs-w-t.impulse*q.cfm)*r.mass,A=t.impulse,t.impulse+=w,t.impulse<q.minImpulse?t.impulse=q.minImpulse:t.impulse>q.maxImpulse&&(t.impulse=q.maxImpulse),w=t.impulse-A,0!=(z.flag&1)&&(a+=
r.invMLin1X*w,b+=r.invMLin1Y*w,c+=r.invMLin1Z*w,d+=r.invMLin2X*-w,e+=r.invMLin2Y*-w,f+=r.invMLin2Z*-w),0!=(z.flag&2)&&(k+=r.invMAng1X*w,m+=r.invMAng1Y*w,h+=r.invMAng1Z*w,n+=r.invMAng2X*-w,g+=r.invMAng2Y*-w,l+=r.invMAng2Z*-w);this._b1._velX=a;this._b1._velY=b;this._b1._velZ=c;this._b2._velX=d;this._b2._velY=e;this._b2._velZ=f;this._b1._angVelX=k;this._b1._angVelY=m;this._b1._angVelZ=h;this._b2._angVelX=n;this._b2._angVelY=g;this._b2._angVelZ=l},postSolveVelocity:function(a){for(var b,c,d,e,f,k,m=k=
f=e=d=c=b=0,h=this.info.numRows;m<h;){var n=m++,g=this.info.rows[n];n=g.impulse;g=g.jacobian;0!=(g.flag&1)?(b+=g.lin1X*n.impulse,c+=g.lin1Y*n.impulse,d+=g.lin1Z*n.impulse):0!=(g.flag&2)&&(e+=g.ang1X*n.impulse,f+=g.ang1Y*n.impulse,k+=g.ang1Z*n.impulse)}this.joint._appliedForceX=b*a.invDt;this.joint._appliedForceY=c*a.invDt;this.joint._appliedForceZ=d*a.invDt;this.joint._appliedTorqueX=e*a.invDt;this.joint._appliedTorqueY=f*a.invDt;this.joint._appliedTorqueZ=k*a.invDt},preSolvePosition:function(a){this.joint._syncAnchors();
this.joint._getPositionSolverInfo(this.info);this._b1=this.info.b1;this._b2=this.info.b2;a=this._b1._invMass;var b=this._b2._invMass;var c=this._b1._invInertia00;var d=this._b1._invInertia01;var e=this._b1._invInertia02;var f=this._b1._invInertia10;var k=this._b1._invInertia11;var m=this._b1._invInertia12;var h=this._b1._invInertia20;var n=this._b1._invInertia21;var g=this._b1._invInertia22;var l=this._b2._invInertia00;var p=this._b2._invInertia01;var y=this._b2._invInertia02;var r=this._b2._invInertia10;
var q=this._b2._invInertia11;var t=this._b2._invInertia12;var z=this._b2._invInertia20;var w=this._b2._invInertia21;var A=this._b2._invInertia22;for(var O=0,u=this.info.numRows;O<u;){var v=O++,x=this.massData[v];v=this.info.rows[v].jacobian;x.invMLin1X=v.lin1X*a;x.invMLin1Y=v.lin1Y*a;x.invMLin1Z=v.lin1Z*a;x.invMLin2X=v.lin2X*b;x.invMLin2Y=v.lin2Y*b;x.invMLin2Z=v.lin2Z*b;var B=c*v.ang1X+d*v.ang1Y+e*v.ang1Z;var F=f*v.ang1X+k*v.ang1Y+m*v.ang1Z;var qa=h*v.ang1X+n*v.ang1Y+g*v.ang1Z;x.invMAng1X=B;x.invMAng1Y=
F;x.invMAng1Z=qa;B=l*v.ang2X+p*v.ang2Y+y*v.ang2Z;F=r*v.ang2X+q*v.ang2Y+t*v.ang2Z;qa=z*v.ang2X+w*v.ang2Y+A*v.ang2Z;x.invMAng2X=B;x.invMAng2Y=F;x.invMAng2Z=qa;x.mass=x.invMLin1X*v.lin1X+x.invMLin1Y*v.lin1Y+x.invMLin1Z*v.lin1Z+(x.invMLin2X*v.lin2X+x.invMLin2Y*v.lin2Y+x.invMLin2Z*v.lin2Z)+(x.invMAng1X*v.ang1X+x.invMAng1Y*v.ang1Y+x.invMAng1Z*v.ang1Z)+(x.invMAng2X*v.ang2X+x.invMAng2Y*v.ang2Y+x.invMAng2Z*v.ang2Z);0!=x.mass&&(x.mass=1/x.mass)}a=0;for(b=this.info.numRows;a<b;)c=a++,this.info.rows[c].impulse.impulseP=
0},solvePositionSplitImpulse:function(){var a=this._b1._pseudoVelX;var b=this._b1._pseudoVelY;var c=this._b1._pseudoVelZ;var d=this._b2._pseudoVelX;var e=this._b2._pseudoVelY;var f=this._b2._pseudoVelZ;var k=this._b1._angPseudoVelX;var m=this._b1._angPseudoVelY;var h=this._b1._angPseudoVelZ;var n=this._b2._angPseudoVelX;var g=this._b2._angPseudoVelY;var l=this._b2._angPseudoVelZ;for(var p=0,y=this.info.numRows;p<y;){var r=p++,q=this.info.rows[r];r=this.massData[r];var t=q.impulse,z=q.jacobian,w=0;
w+=a*z.lin1X+b*z.lin1Y+c*z.lin1Z;w-=d*z.lin2X+e*z.lin2Y+f*z.lin2Z;w+=k*z.ang1X+m*z.ang1Y+h*z.ang1Z;w-=n*z.ang2X+g*z.ang2Y+l*z.ang2Z;z=(q.rhs*ta.positionSplitImpulseBaumgarte-w)*r.mass;w=t.impulseP;t.impulseP+=z;t.impulseP<q.minImpulse?t.impulseP=q.minImpulse:t.impulseP>q.maxImpulse&&(t.impulseP=q.maxImpulse);z=t.impulseP-w;a+=r.invMLin1X*z;b+=r.invMLin1Y*z;c+=r.invMLin1Z*z;d+=r.invMLin2X*-z;e+=r.invMLin2Y*-z;f+=r.invMLin2Z*-z;k+=r.invMAng1X*z;m+=r.invMAng1Y*z;h+=r.invMAng1Z*z;n+=r.invMAng2X*-z;g+=
r.invMAng2Y*-z;l+=r.invMAng2Z*-z}this._b1._pseudoVelX=a;this._b1._pseudoVelY=b;this._b1._pseudoVelZ=c;this._b2._pseudoVelX=d;this._b2._pseudoVelY=e;this._b2._pseudoVelZ=f;this._b1._angPseudoVelX=k;this._b1._angPseudoVelY=m;this._b1._angPseudoVelZ=h;this._b2._angPseudoVelX=n;this._b2._angPseudoVelY=g;this._b2._angPseudoVelZ=l},solvePositionNgs:function(a){this.joint._syncAnchors();this.joint._getPositionSolverInfo(this.info);this._b1=this.info.b1;this._b2=this.info.b2;var b=this._b1._invMass,c=this._b2._invMass;
var d=this._b1._invInertia00;var e=this._b1._invInertia01;var f=this._b1._invInertia02;var k=this._b1._invInertia10;var m=this._b1._invInertia11;var h=this._b1._invInertia12;var n=this._b1._invInertia20;var g=this._b1._invInertia21;var l=this._b1._invInertia22;var p=this._b2._invInertia00;var y=this._b2._invInertia01;var r=this._b2._invInertia02;var q=this._b2._invInertia10;var t=this._b2._invInertia11;var z=this._b2._invInertia12;var w=this._b2._invInertia20;var A=this._b2._invInertia21;var v=this._b2._invInertia22;
for(var O=0,u=this.info.numRows;O<u;){var x=O++,B=this.massData[x],F=this.info.rows[x].jacobian;B.invMLin1X=F.lin1X*b;B.invMLin1Y=F.lin1Y*b;B.invMLin1Z=F.lin1Z*b;B.invMLin2X=F.lin2X*c;B.invMLin2Y=F.lin2Y*c;B.invMLin2Z=F.lin2Z*c;var qa=d*F.ang1X+e*F.ang1Y+f*F.ang1Z;var M=k*F.ang1X+m*F.ang1Y+h*F.ang1Z;var L=n*F.ang1X+g*F.ang1Y+l*F.ang1Z;B.invMAng1X=qa;B.invMAng1Y=M;B.invMAng1Z=L;var Ia=p*F.ang2X+y*F.ang2Y+r*F.ang2Z;var Ca=q*F.ang2X+t*F.ang2Y+z*F.ang2Z;var D=w*F.ang2X+A*F.ang2Y+v*F.ang2Z;B.invMAng2X=
Ia;B.invMAng2Y=Ca;B.invMAng2Z=D;B.mass=B.invMLin1X*F.lin1X+B.invMLin1Y*F.lin1Y+B.invMLin1Z*F.lin1Z+(B.invMLin2X*F.lin2X+B.invMLin2Y*F.lin2Y+B.invMLin2Z*F.lin2Z)+(B.invMAng1X*F.ang1X+B.invMAng1Y*F.ang1Y+B.invMAng1Z*F.ang1Z)+(B.invMAng2X*F.ang2X+B.invMAng2Y*F.ang2Y+B.invMAng2Z*F.ang2Z);0!=B.mass&&(B.mass=1/B.mass)}for(var ja,J,ba,ha,N,S,aa,mb,ma,W,fa,U,ia=U=fa=W=ma=mb=aa=S=N=ha=ba=J=ja=0,Z=this.info.numRows;ia<Z;){var Y=ia++,Q=this.info.rows[Y],Ja=this.massData[Y],Pa=Q.impulse,V=Q.jacobian,Ma=0;Ma+=
ja*V.lin1X+J*V.lin1Y+ba*V.lin1Z;Ma-=ha*V.lin2X+N*V.lin2Y+S*V.lin2Z;Ma+=aa*V.ang1X+mb*V.ang1Y+ma*V.ang1Z;Ma-=W*V.ang2X+fa*V.ang2Y+U*V.ang2Z;var R=(Q.rhs*ta.positionNgsBaumgarte-Ma)*Ja.mass,T=Pa.impulseP;Pa.impulseP+=R;Pa.impulseP<Q.minImpulse?Pa.impulseP=Q.minImpulse:Pa.impulseP>Q.maxImpulse&&(Pa.impulseP=Q.maxImpulse);R=Pa.impulseP-T;ja+=Ja.invMLin1X*R;J+=Ja.invMLin1Y*R;ba+=Ja.invMLin1Z*R;ha+=Ja.invMLin2X*-R;N+=Ja.invMLin2Y*-R;S+=Ja.invMLin2Z*-R;aa+=Ja.invMAng1X*R;mb+=Ja.invMAng1Y*R;ma+=Ja.invMAng1Z*
R;W+=Ja.invMAng2X*-R;fa+=Ja.invMAng2Y*-R;U+=Ja.invMAng2Z*-R}var Ta=this._b1;Ta._transform._positionX+=ja;Ta._transform._positionY+=J;Ta._transform._positionZ+=ba;var X=this._b2;X._transform._positionX+=ha;X._transform._positionY+=N;X._transform._positionZ+=S;var G=this._b1,ka=Math.sqrt(aa*aa+mb*mb+ma*ma),pa=.5*ka;if(.5>pa){var $a=pa*pa;var la=.5*(1-.16666666666666666*$a+$a*$a*.008333333333333333);var na=1-.5*$a+$a*$a*.041666666666666664}else la=Math.sin(pa)/ka,na=Math.cos(pa);var ra=aa*la;var ea=
mb*la;var ua=ma*la;var va=na;var Ha=G._transform._rotation00,sa=G._transform._rotation11,qb=G._transform._rotation22,xa=Ha+sa+qb;if(0<xa){var da=Math.sqrt(xa+1);var Ba=.5*da;da=.5/da;var ya=(G._transform._rotation21-G._transform._rotation12)*da;var Aa=(G._transform._rotation02-G._transform._rotation20)*da;var wa=(G._transform._rotation10-G._transform._rotation01)*da}else Ha>sa?Ha>qb?(da=Math.sqrt(Ha-sa-qb+1),ya=.5*da,da=.5/da,Aa=(G._transform._rotation01+G._transform._rotation10)*da,wa=(G._transform._rotation02+
G._transform._rotation20)*da,Ba=(G._transform._rotation21-G._transform._rotation12)*da):(da=Math.sqrt(qb-Ha-sa+1),wa=.5*da,da=.5/da,ya=(G._transform._rotation02+G._transform._rotation20)*da,Aa=(G._transform._rotation12+G._transform._rotation21)*da,Ba=(G._transform._rotation10-G._transform._rotation01)*da):sa>qb?(da=Math.sqrt(sa-qb-Ha+1),Aa=.5*da,da=.5/da,ya=(G._transform._rotation01+G._transform._rotation10)*da,wa=(G._transform._rotation12+G._transform._rotation21)*da,Ba=(G._transform._rotation02-
G._transform._rotation20)*da):(da=Math.sqrt(qb-Ha-sa+1),wa=.5*da,da=.5/da,ya=(G._transform._rotation02+G._transform._rotation20)*da,Aa=(G._transform._rotation12+G._transform._rotation21)*da,Ba=(G._transform._rotation10-G._transform._rotation01)*da);ya=va*ya+ra*Ba+ea*wa-ua*Aa;Aa=va*Aa-ra*wa+ea*Ba+ua*ya;wa=va*wa+ra*Aa-ea*ya+ua*Ba;Ba=va*Ba-ra*ya-ea*Aa-ua*wa;var Fa=ya*ya+Aa*Aa+wa*wa+Ba*Ba;1E-32<Fa&&(Fa=1/Math.sqrt(Fa));ya*=Fa;Aa*=Fa;wa*=Fa;Ba*=Fa;var Da=ya,Ga=Aa,Ka=wa,La=Ba,Oa=2*Da,Na=2*Ga,Fb=2*Ka,Qa=
Da*Oa,Ra=Ga*Na,Pb=Ka*Fb,Va=Da*Na,Sa=Ga*Fb,Za=Da*Fb,Xa=La*Oa,Ya=La*Na,ab=La*Fb;G._transform._rotation00=1-Ra-Pb;G._transform._rotation01=Va-ab;G._transform._rotation02=Za+Ya;G._transform._rotation10=Va+ab;G._transform._rotation11=1-Qa-Pb;G._transform._rotation12=Sa-Xa;G._transform._rotation20=Za-Ya;G._transform._rotation21=Sa+Xa;G._transform._rotation22=1-Qa-Ra;var cb=G._transform._rotation00*G._invLocalInertia00+G._transform._rotation01*G._invLocalInertia10+G._transform._rotation02*G._invLocalInertia20;
var nb=G._transform._rotation00*G._invLocalInertia01+G._transform._rotation01*G._invLocalInertia11+G._transform._rotation02*G._invLocalInertia21;var ca=G._transform._rotation00*G._invLocalInertia02+G._transform._rotation01*G._invLocalInertia12+G._transform._rotation02*G._invLocalInertia22;var ob=G._transform._rotation10*G._invLocalInertia00+G._transform._rotation11*G._invLocalInertia10+G._transform._rotation12*G._invLocalInertia20;var eb=G._transform._rotation10*G._invLocalInertia01+G._transform._rotation11*
G._invLocalInertia11+G._transform._rotation12*G._invLocalInertia21;var hb=G._transform._rotation10*G._invLocalInertia02+G._transform._rotation11*G._invLocalInertia12+G._transform._rotation12*G._invLocalInertia22;var sb=G._transform._rotation20*G._invLocalInertia00+G._transform._rotation21*G._invLocalInertia10+G._transform._rotation22*G._invLocalInertia20;var tb=G._transform._rotation20*G._invLocalInertia01+G._transform._rotation21*G._invLocalInertia11+G._transform._rotation22*G._invLocalInertia21;
var ib=G._transform._rotation20*G._invLocalInertia02+G._transform._rotation21*G._invLocalInertia12+G._transform._rotation22*G._invLocalInertia22;G._invInertia00=cb;G._invInertia01=nb;G._invInertia02=ca;G._invInertia10=ob;G._invInertia11=eb;G._invInertia12=hb;G._invInertia20=sb;G._invInertia21=tb;G._invInertia22=ib;var fb=G._invInertia00*G._transform._rotation00+G._invInertia01*G._transform._rotation01+G._invInertia02*G._transform._rotation02;var gb=G._invInertia00*G._transform._rotation10+G._invInertia01*
G._transform._rotation11+G._invInertia02*G._transform._rotation12;var Kb=G._invInertia00*G._transform._rotation20+G._invInertia01*G._transform._rotation21+G._invInertia02*G._transform._rotation22;var P=G._invInertia10*G._transform._rotation00+G._invInertia11*G._transform._rotation01+G._invInertia12*G._transform._rotation02;var rb=G._invInertia10*G._transform._rotation10+G._invInertia11*G._transform._rotation11+G._invInertia12*G._transform._rotation12;var jb=G._invInertia10*G._transform._rotation20+
G._invInertia11*G._transform._rotation21+G._invInertia12*G._transform._rotation22;var vb=G._invInertia20*G._transform._rotation00+G._invInertia21*G._transform._rotation01+G._invInertia22*G._transform._rotation02;var Xb=G._invInertia20*G._transform._rotation10+G._invInertia21*G._transform._rotation11+G._invInertia22*G._transform._rotation12;var Ub=G._invInertia20*G._transform._rotation20+G._invInertia21*G._transform._rotation21+G._invInertia22*G._transform._rotation22;G._invInertia00=fb;G._invInertia01=
gb;G._invInertia02=Kb;G._invInertia10=P;G._invInertia11=rb;G._invInertia12=jb;G._invInertia20=vb;G._invInertia21=Xb;G._invInertia22=Ub;G._invInertia00*=G._rotFactor.x;G._invInertia01*=G._rotFactor.x;G._invInertia02*=G._rotFactor.x;G._invInertia10*=G._rotFactor.y;G._invInertia11*=G._rotFactor.y;G._invInertia12*=G._rotFactor.y;G._invInertia20*=G._rotFactor.z;G._invInertia21*=G._rotFactor.z;G._invInertia22*=G._rotFactor.z;var E=this._b2,Ea=Math.sqrt(W*W+fa*fa+U*U),za=.5*Ea;if(.5>za){var Ib=za*za;var bb=
.5*(1-.16666666666666666*Ib+Ib*Ib*.008333333333333333);var pb=1-.5*Ib+Ib*Ib*.041666666666666664}else bb=Math.sin(za)/Ea,pb=Math.cos(za);var kb=W*bb;var lb=fa*bb;var wb=U*bb;var zb=pb;var Ob=E._transform._rotation00,Hb=E._transform._rotation11,xb=E._transform._rotation22,Ab=Ob+Hb+xb;if(0<Ab){var Ua=Math.sqrt(Ab+1);var Cb=.5*Ua;Ua=.5/Ua;var Jb=(E._transform._rotation21-E._transform._rotation12)*Ua;var Wa=(E._transform._rotation02-E._transform._rotation20)*Ua;var db=(E._transform._rotation10-E._transform._rotation01)*
Ua}else Ob>Hb?Ob>xb?(Ua=Math.sqrt(Ob-Hb-xb+1),Jb=.5*Ua,Ua=.5/Ua,Wa=(E._transform._rotation01+E._transform._rotation10)*Ua,db=(E._transform._rotation02+E._transform._rotation20)*Ua,Cb=(E._transform._rotation21-E._transform._rotation12)*Ua):(Ua=Math.sqrt(xb-Ob-Hb+1),db=.5*Ua,Ua=.5/Ua,Jb=(E._transform._rotation02+E._transform._rotation20)*Ua,Wa=(E._transform._rotation12+E._transform._rotation21)*Ua,Cb=(E._transform._rotation10-E._transform._rotation01)*Ua):Hb>xb?(Ua=Math.sqrt(Hb-xb-Ob+1),Wa=.5*Ua,Ua=
.5/Ua,Jb=(E._transform._rotation01+E._transform._rotation10)*Ua,db=(E._transform._rotation12+E._transform._rotation21)*Ua,Cb=(E._transform._rotation02-E._transform._rotation20)*Ua):(Ua=Math.sqrt(xb-Ob-Hb+1),db=.5*Ua,Ua=.5/Ua,Jb=(E._transform._rotation02+E._transform._rotation20)*Ua,Wa=(E._transform._rotation12+E._transform._rotation21)*Ua,Cb=(E._transform._rotation10-E._transform._rotation01)*Ua);Jb=zb*Jb+kb*Cb+lb*db-wb*Wa;Wa=zb*Wa-kb*db+lb*Cb+wb*Jb;db=zb*db+kb*Wa-lb*Jb+wb*Cb;Cb=zb*Cb-kb*Jb-lb*Wa-
wb*db;var Gb=Jb*Jb+Wa*Wa+db*db+Cb*Cb;1E-32<Gb&&(Gb=1/Math.sqrt(Gb));Jb*=Gb;Wa*=Gb;db*=Gb;Cb*=Gb;var Eb=Jb,Db=Wa,$b=db,ub=Cb,Mb=2*Eb,Lb=2*Db,Nb=2*$b,Qb=Eb*Mb,Rb=Db*Lb,Sb=$b*Nb,Zb=Eb*Lb,ac=Db*Nb,cc=Eb*Nb,dc=ub*Mb,fc=ub*Lb,Tb=ub*Nb;E._transform._rotation00=1-Rb-Sb;E._transform._rotation01=Zb-Tb;E._transform._rotation02=cc+fc;E._transform._rotation10=Zb+Tb;E._transform._rotation11=1-Qb-Sb;E._transform._rotation12=ac-dc;E._transform._rotation20=cc-fc;E._transform._rotation21=ac+dc;E._transform._rotation22=
1-Qb-Rb;var Wb=E._transform._rotation00*E._invLocalInertia00+E._transform._rotation01*E._invLocalInertia10+E._transform._rotation02*E._invLocalInertia20;var hc=E._transform._rotation00*E._invLocalInertia01+E._transform._rotation01*E._invLocalInertia11+E._transform._rotation02*E._invLocalInertia21;var ic=E._transform._rotation00*E._invLocalInertia02+E._transform._rotation01*E._invLocalInertia12+E._transform._rotation02*E._invLocalInertia22;var jc=E._transform._rotation10*E._invLocalInertia00+E._transform._rotation11*
E._invLocalInertia10+E._transform._rotation12*E._invLocalInertia20;var uc=E._transform._rotation10*E._invLocalInertia01+E._transform._rotation11*E._invLocalInertia11+E._transform._rotation12*E._invLocalInertia21;var kc=E._transform._rotation10*E._invLocalInertia02+E._transform._rotation11*E._invLocalInertia12+E._transform._rotation12*E._invLocalInertia22;var lc=E._transform._rotation20*E._invLocalInertia00+E._transform._rotation21*E._invLocalInertia10+E._transform._rotation22*E._invLocalInertia20;
var mc=E._transform._rotation20*E._invLocalInertia01+E._transform._rotation21*E._invLocalInertia11+E._transform._rotation22*E._invLocalInertia21;var nc=E._transform._rotation20*E._invLocalInertia02+E._transform._rotation21*E._invLocalInertia12+E._transform._rotation22*E._invLocalInertia22;E._invInertia00=Wb;E._invInertia01=hc;E._invInertia02=ic;E._invInertia10=jc;E._invInertia11=uc;E._invInertia12=kc;E._invInertia20=lc;E._invInertia21=mc;E._invInertia22=nc;var tc=E._invInertia00*E._transform._rotation00+
E._invInertia01*E._transform._rotation01+E._invInertia02*E._transform._rotation02;var oc=E._invInertia00*E._transform._rotation10+E._invInertia01*E._transform._rotation11+E._invInertia02*E._transform._rotation12;var pc=E._invInertia00*E._transform._rotation20+E._invInertia01*E._transform._rotation21+E._invInertia02*E._transform._rotation22;var qc=E._invInertia10*E._transform._rotation00+E._invInertia11*E._transform._rotation01+E._invInertia12*E._transform._rotation02;var rc=E._invInertia10*E._transform._rotation10+
E._invInertia11*E._transform._rotation11+E._invInertia12*E._transform._rotation12;var sc=E._invInertia10*E._transform._rotation20+E._invInertia11*E._transform._rotation21+E._invInertia12*E._transform._rotation22;var vc=E._invInertia20*E._transform._rotation00+E._invInertia21*E._transform._rotation01+E._invInertia22*E._transform._rotation02;var wc=E._invInertia20*E._transform._rotation10+E._invInertia21*E._transform._rotation11+E._invInertia22*E._transform._rotation12;var xc=E._invInertia20*E._transform._rotation20+
E._invInertia21*E._transform._rotation21+E._invInertia22*E._transform._rotation22;E._invInertia00=tc;E._invInertia01=oc;E._invInertia02=pc;E._invInertia10=qc;E._invInertia11=rc;E._invInertia12=sc;E._invInertia20=vc;E._invInertia21=wc;E._invInertia22=xc;E._invInertia00*=E._rotFactor.x;E._invInertia01*=E._rotFactor.x;E._invInertia02*=E._rotFactor.x;E._invInertia10*=E._rotFactor.y;E._invInertia11*=E._rotFactor.y;E._invInertia12*=E._rotFactor.y;E._invInertia20*=E._rotFactor.z;E._invInertia21*=E._rotFactor.z;
E._invInertia22*=E._rotFactor.z},postSolve:function(){this.joint._syncAnchors();this.joint._checkDestruction()},__class__:Uj});var qj=function(a){this._shapeListLast=this._shapeList=this._prev=this._next=null;this._numShapes=0;this._contactLinkListLast=this._contactLinkList=null;this._numContactLinks=0;this._jointLinkListLast=this._jointLinkList=null;this._numJointLinks=0;var b=a.linearVelocity;this._velX=b.x;this._velY=b.y;this._velZ=b.z;b=a.angularVelocity;this._angVelX=b.x;this._angVelY=b.y;this._angVelZ=
b.z;this._angPseudoVelZ=this._angPseudoVelY=this._angPseudoVelX=this._pseudoVelZ=this._pseudoVelY=this._pseudoVelX=0;this._ptransform=new Ld;this._transform=new Ld;b=a.position;this._ptransform._positionX=b.x;this._ptransform._positionY=b.y;this._ptransform._positionZ=b.z;b=a.rotation;this._ptransform._rotation00=b.e00;this._ptransform._rotation01=b.e01;this._ptransform._rotation02=b.e02;this._ptransform._rotation10=b.e10;this._ptransform._rotation11=b.e11;this._ptransform._rotation12=b.e12;this._ptransform._rotation20=
b.e20;this._ptransform._rotation21=b.e21;this._ptransform._rotation22=b.e22;b=this._transform;var c=this._ptransform;b._positionX=c._positionX;b._positionY=c._positionY;b._positionZ=c._positionZ;b._rotation00=c._rotation00;b._rotation01=c._rotation01;b._rotation02=c._rotation02;b._rotation10=c._rotation10;b._rotation11=c._rotation11;b._rotation12=c._rotation12;b._rotation20=c._rotation20;b._rotation21=c._rotation21;b._rotation22=c._rotation22;this._type=a.type;this._sleepTime=0;this._sleeping=!1;
this._autoSleep=a.autoSleep;this._invInertia22=this._invInertia21=this._invInertia20=this._invInertia12=this._invInertia11=this._invInertia10=this._invInertia02=this._invInertia01=this._invInertia00=this._invLocalInertiaWithoutRotFactor22=this._invLocalInertiaWithoutRotFactor21=this._invLocalInertiaWithoutRotFactor20=this._invLocalInertiaWithoutRotFactor12=this._invLocalInertiaWithoutRotFactor11=this._invLocalInertiaWithoutRotFactor10=this._invLocalInertiaWithoutRotFactor02=this._invLocalInertiaWithoutRotFactor01=
this._invLocalInertiaWithoutRotFactor00=this._invLocalInertia22=this._invLocalInertia21=this._invLocalInertia20=this._invLocalInertia12=this._invLocalInertia11=this._invLocalInertia10=this._invLocalInertia02=this._invLocalInertia01=this._invLocalInertia00=this._localInertia22=this._localInertia21=this._localInertia20=this._localInertia12=this._localInertia11=this._localInertia10=this._localInertia02=this._localInertia01=this._localInertia00=this._invMass=this._mass=0;this._linearDamping=a.linearDamping;
this._angularDamping=a.angularDamping;this._angularContactImpulseZ=this._angularContactImpulseY=this._angularContactImpulseX=this._linearContactImpulseZ=this._linearContactImpulseY=this._linearContactImpulseX=this._torqueZ=this._torqueY=this._torqueX=this._forceZ=this._forceY=this._forceX=0;this._rotFactor=new w(1,1,1);this._addedToIsland=!1;this._gravityScale=1;this._world=null};g["oimo.dynamics.rigidbody.RigidBody"]=qj;qj.__name__="oimo.dynamics.rigidbody.RigidBody";qj.prototype={_next:null,_prev:null,
_shapeList:null,_shapeListLast:null,_numShapes:null,_velX:null,_velY:null,_velZ:null,_angVelX:null,_angVelY:null,_angVelZ:null,_pseudoVelX:null,_pseudoVelY:null,_pseudoVelZ:null,_angPseudoVelX:null,_angPseudoVelY:null,_angPseudoVelZ:null,_ptransform:null,_transform:null,_type:null,_sleepTime:null,_sleeping:null,_autoSleep:null,_mass:null,_invMass:null,_localInertia00:null,_localInertia01:null,_localInertia02:null,_localInertia10:null,_localInertia11:null,_localInertia12:null,_localInertia20:null,
_localInertia21:null,_localInertia22:null,_rotFactor:null,_invLocalInertia00:null,_invLocalInertia01:null,_invLocalInertia02:null,_invLocalInertia10:null,_invLocalInertia11:null,_invLocalInertia12:null,_invLocalInertia20:null,_invLocalInertia21:null,_invLocalInertia22:null,_invLocalInertiaWithoutRotFactor00:null,_invLocalInertiaWithoutRotFactor01:null,_invLocalInertiaWithoutRotFactor02:null,_invLocalInertiaWithoutRotFactor10:null,_invLocalInertiaWithoutRotFactor11:null,_invLocalInertiaWithoutRotFactor12:null,
_invLocalInertiaWithoutRotFactor20:null,_invLocalInertiaWithoutRotFactor21:null,_invLocalInertiaWithoutRotFactor22:null,_invInertia00:null,_invInertia01:null,_invInertia02:null,_invInertia10:null,_invInertia11:null,_invInertia12:null,_invInertia20:null,_invInertia21:null,_invInertia22:null,_linearDamping:null,_angularDamping:null,_forceX:null,_forceY:null,_forceZ:null,_torqueX:null,_torqueY:null,_torqueZ:null,_linearContactImpulseX:null,_linearContactImpulseY:null,_linearContactImpulseZ:null,_angularContactImpulseX:null,
_angularContactImpulseY:null,_angularContactImpulseZ:null,_world:null,_contactLinkList:null,_contactLinkListLast:null,_numContactLinks:null,_jointLinkList:null,_jointLinkListLast:null,_numJointLinks:null,_addedToIsland:null,_gravityScale:null,_integrate:function(a){switch(this._type){case 1:this._angPseudoVelZ=this._angPseudoVelY=this._angPseudoVelX=this._pseudoVelZ=this._pseudoVelY=this._pseudoVelX=this._angVelZ=this._angVelY=this._angVelX=this._velZ=this._velY=this._velX=0;break;case 0:case 2:var b=
this._velX*a;var c=this._velY*a;var d=this._velZ*a;var e=this._angVelX*a;var f=this._angVelY*a;a*=this._angVelZ;var k=b*b+c*c+d*d,m=e*e+f*f+a*a;if(0!=k||0!=m){k>ta.maxTranslationPerStep*ta.maxTranslationPerStep&&(k=ta.maxTranslationPerStep/Math.sqrt(k),this._velX*=k,this._velY*=k,this._velZ*=k,b*=k,c*=k,d*=k);m>ta.maxRotationPerStep*ta.maxRotationPerStep&&(m=ta.maxRotationPerStep/Math.sqrt(m),this._angVelX*=m,this._angVelY*=m,this._angVelZ*=m,e*=m,f*=m,a*=m);this._transform._positionX+=b;this._transform._positionY+=
c;this._transform._positionZ+=d;b=Math.sqrt(e*e+f*f+a*a);c=.5*b;.5>c?(c*=c,b=.5*(1-.16666666666666666*c+c*c*.008333333333333333),c=1-.5*c+c*c*.041666666666666664):(b=Math.sin(c)/b,c=Math.cos(c));e*=b;f*=b;a*=b;b=c;c=this._transform._rotation00;d=this._transform._rotation11;m=this._transform._rotation22;k=c+d+m;if(0<k){var h=Math.sqrt(k+1);c=.5*h;h=.5/h;k=(this._transform._rotation21-this._transform._rotation12)*h;m=(this._transform._rotation02-this._transform._rotation20)*h;d=(this._transform._rotation10-
this._transform._rotation01)*h}else c>d?c>m?(h=Math.sqrt(c-d-m+1),k=.5*h,h=.5/h,m=(this._transform._rotation01+this._transform._rotation10)*h,d=(this._transform._rotation02+this._transform._rotation20)*h,c=(this._transform._rotation21-this._transform._rotation12)*h):(h=Math.sqrt(m-c-d+1),d=.5*h,h=.5/h,k=(this._transform._rotation02+this._transform._rotation20)*h,m=(this._transform._rotation12+this._transform._rotation21)*h,c=(this._transform._rotation10-this._transform._rotation01)*h):d>m?(h=Math.sqrt(d-
m-c+1),m=.5*h,h=.5/h,k=(this._transform._rotation01+this._transform._rotation10)*h,d=(this._transform._rotation12+this._transform._rotation21)*h,c=(this._transform._rotation02-this._transform._rotation20)*h):(h=Math.sqrt(m-c-d+1),d=.5*h,h=.5/h,k=(this._transform._rotation02+this._transform._rotation20)*h,m=(this._transform._rotation12+this._transform._rotation21)*h,c=(this._transform._rotation10-this._transform._rotation01)*h);k=b*k+e*c+f*d-a*m;m=b*m-e*d+f*c+a*k;d=b*d+e*m-f*k+a*c;c=b*c-e*k-f*m-a*
d;a=k*k+m*m+d*d+c*c;1E-32<a&&(a=1/Math.sqrt(a));f=k*a;k=m*a;d*=a;b=c*a;var n=2*f;h=2*k;c=2*d;a=f*n;e=k*h;d*=c;m=f*h;k*=c;f*=c;n*=b;h*=b;b*=c;this._transform._rotation00=1-e-d;this._transform._rotation01=m-b;this._transform._rotation02=f+h;this._transform._rotation10=m+b;this._transform._rotation11=1-a-d;this._transform._rotation12=k-n;this._transform._rotation20=f-h;this._transform._rotation21=k+n;this._transform._rotation22=1-a-e;f=this._transform._rotation00*this._invLocalInertia00+this._transform._rotation01*
this._invLocalInertia10+this._transform._rotation02*this._invLocalInertia20;a=this._transform._rotation00*this._invLocalInertia01+this._transform._rotation01*this._invLocalInertia11+this._transform._rotation02*this._invLocalInertia21;e=this._transform._rotation00*this._invLocalInertia02+this._transform._rotation01*this._invLocalInertia12+this._transform._rotation02*this._invLocalInertia22;b=this._transform._rotation10*this._invLocalInertia00+this._transform._rotation11*this._invLocalInertia10+this._transform._rotation12*
this._invLocalInertia20;c=this._transform._rotation10*this._invLocalInertia01+this._transform._rotation11*this._invLocalInertia11+this._transform._rotation12*this._invLocalInertia21;d=this._transform._rotation10*this._invLocalInertia02+this._transform._rotation11*this._invLocalInertia12+this._transform._rotation12*this._invLocalInertia22;m=this._transform._rotation20*this._invLocalInertia00+this._transform._rotation21*this._invLocalInertia10+this._transform._rotation22*this._invLocalInertia20;k=this._transform._rotation20*
this._invLocalInertia01+this._transform._rotation21*this._invLocalInertia11+this._transform._rotation22*this._invLocalInertia21;h=this._transform._rotation20*this._invLocalInertia02+this._transform._rotation21*this._invLocalInertia12+this._transform._rotation22*this._invLocalInertia22;this._invInertia00=f;this._invInertia01=a;this._invInertia02=e;this._invInertia10=b;this._invInertia11=c;this._invInertia12=d;this._invInertia20=m;this._invInertia21=k;this._invInertia22=h;f=this._invInertia00*this._transform._rotation00+
this._invInertia01*this._transform._rotation01+this._invInertia02*this._transform._rotation02;a=this._invInertia00*this._transform._rotation10+this._invInertia01*this._transform._rotation11+this._invInertia02*this._transform._rotation12;e=this._invInertia00*this._transform._rotation20+this._invInertia01*this._transform._rotation21+this._invInertia02*this._transform._rotation22;b=this._invInertia10*this._transform._rotation00+this._invInertia11*this._transform._rotation01+this._invInertia12*this._transform._rotation02;
c=this._invInertia10*this._transform._rotation10+this._invInertia11*this._transform._rotation11+this._invInertia12*this._transform._rotation12;d=this._invInertia10*this._transform._rotation20+this._invInertia11*this._transform._rotation21+this._invInertia12*this._transform._rotation22;m=this._invInertia20*this._transform._rotation00+this._invInertia21*this._transform._rotation01+this._invInertia22*this._transform._rotation02;k=this._invInertia20*this._transform._rotation10+this._invInertia21*this._transform._rotation11+
this._invInertia22*this._transform._rotation12;h=this._invInertia20*this._transform._rotation20+this._invInertia21*this._transform._rotation21+this._invInertia22*this._transform._rotation22;this._invInertia00=f;this._invInertia01=a;this._invInertia02=e;this._invInertia10=b;this._invInertia11=c;this._invInertia12=d;this._invInertia20=m;this._invInertia21=k;this._invInertia22=h;this._invInertia00*=this._rotFactor.x;this._invInertia01*=this._rotFactor.x;this._invInertia02*=this._rotFactor.x;this._invInertia10*=
this._rotFactor.y;this._invInertia11*=this._rotFactor.y;this._invInertia12*=this._rotFactor.y;this._invInertia20*=this._rotFactor.z;this._invInertia21*=this._rotFactor.z;this._invInertia22*=this._rotFactor.z}}},_integratePseudoVelocity:function(){var a=this._angPseudoVelX*this._angPseudoVelX+this._angPseudoVelY*this._angPseudoVelY+this._angPseudoVelZ*this._angPseudoVelZ;if(0!=this._pseudoVelX*this._pseudoVelX+this._pseudoVelY*this._pseudoVelY+this._pseudoVelZ*this._pseudoVelZ||0!=a)switch(this._type){case 1:this._angPseudoVelZ=
this._angPseudoVelY=this._angPseudoVelX=this._pseudoVelZ=this._pseudoVelY=this._pseudoVelX=0;break;case 0:case 2:var b=this._pseudoVelX;var c=this._pseudoVelY;var d=this._pseudoVelZ;a=this._angPseudoVelX;var e=this._angPseudoVelY;var f=this._angPseudoVelZ;this._angPseudoVelZ=this._angPseudoVelY=this._angPseudoVelX=this._pseudoVelZ=this._pseudoVelY=this._pseudoVelX=0;this._transform._positionX+=b;this._transform._positionY+=c;this._transform._positionZ+=d;b=Math.sqrt(a*a+e*e+f*f);c=.5*b;.5>c?(c*=c,
b=.5*(1-.16666666666666666*c+c*c*.008333333333333333),c=1-.5*c+c*c*.041666666666666664):(b=Math.sin(c)/b,c=Math.cos(c));a*=b;e*=b;f*=b;b=c;c=this._transform._rotation00;d=this._transform._rotation11;var k=this._transform._rotation22;var m=c+d+k;if(0<m){var h=Math.sqrt(m+1);c=.5*h;h=.5/h;m=(this._transform._rotation21-this._transform._rotation12)*h;k=(this._transform._rotation02-this._transform._rotation20)*h;d=(this._transform._rotation10-this._transform._rotation01)*h}else c>d?c>k?(h=Math.sqrt(c-
d-k+1),m=.5*h,h=.5/h,k=(this._transform._rotation01+this._transform._rotation10)*h,d=(this._transform._rotation02+this._transform._rotation20)*h,c=(this._transform._rotation21-this._transform._rotation12)*h):(h=Math.sqrt(k-c-d+1),d=.5*h,h=.5/h,m=(this._transform._rotation02+this._transform._rotation20)*h,k=(this._transform._rotation12+this._transform._rotation21)*h,c=(this._transform._rotation10-this._transform._rotation01)*h):d>k?(h=Math.sqrt(d-k-c+1),k=.5*h,h=.5/h,m=(this._transform._rotation01+
this._transform._rotation10)*h,d=(this._transform._rotation12+this._transform._rotation21)*h,c=(this._transform._rotation02-this._transform._rotation20)*h):(h=Math.sqrt(k-c-d+1),d=.5*h,h=.5/h,m=(this._transform._rotation02+this._transform._rotation20)*h,k=(this._transform._rotation12+this._transform._rotation21)*h,c=(this._transform._rotation10-this._transform._rotation01)*h);m=b*m+a*c+e*d-f*k;k=b*k-a*d+e*c+f*m;d=b*d+a*k-e*m+f*c;c=b*c-a*m-e*k-f*d;e=m*m+k*k+d*d+c*c;1E-32<e&&(e=1/Math.sqrt(e));a=m*
e;m=k*e;d*=e;b=c*e;var n=2*a;h=2*m;c=2*d;e=a*n;f=m*h;d*=c;k=a*h;m*=c;a*=c;n*=b;h*=b;b*=c;this._transform._rotation00=1-f-d;this._transform._rotation01=k-b;this._transform._rotation02=a+h;this._transform._rotation10=k+b;this._transform._rotation11=1-e-d;this._transform._rotation12=m-n;this._transform._rotation20=a-h;this._transform._rotation21=m+n;this._transform._rotation22=1-e-f;a=this._transform._rotation00*this._invLocalInertia00+this._transform._rotation01*this._invLocalInertia10+this._transform._rotation02*
this._invLocalInertia20;e=this._transform._rotation00*this._invLocalInertia01+this._transform._rotation01*this._invLocalInertia11+this._transform._rotation02*this._invLocalInertia21;f=this._transform._rotation00*this._invLocalInertia02+this._transform._rotation01*this._invLocalInertia12+this._transform._rotation02*this._invLocalInertia22;b=this._transform._rotation10*this._invLocalInertia00+this._transform._rotation11*this._invLocalInertia10+this._transform._rotation12*this._invLocalInertia20;c=this._transform._rotation10*
this._invLocalInertia01+this._transform._rotation11*this._invLocalInertia11+this._transform._rotation12*this._invLocalInertia21;d=this._transform._rotation10*this._invLocalInertia02+this._transform._rotation11*this._invLocalInertia12+this._transform._rotation12*this._invLocalInertia22;k=this._transform._rotation20*this._invLocalInertia00+this._transform._rotation21*this._invLocalInertia10+this._transform._rotation22*this._invLocalInertia20;m=this._transform._rotation20*this._invLocalInertia01+this._transform._rotation21*
this._invLocalInertia11+this._transform._rotation22*this._invLocalInertia21;h=this._transform._rotation20*this._invLocalInertia02+this._transform._rotation21*this._invLocalInertia12+this._transform._rotation22*this._invLocalInertia22;this._invInertia00=a;this._invInertia01=e;this._invInertia02=f;this._invInertia10=b;this._invInertia11=c;this._invInertia12=d;this._invInertia20=k;this._invInertia21=m;this._invInertia22=h;a=this._invInertia00*this._transform._rotation00+this._invInertia01*this._transform._rotation01+
this._invInertia02*this._transform._rotation02;e=this._invInertia00*this._transform._rotation10+this._invInertia01*this._transform._rotation11+this._invInertia02*this._transform._rotation12;f=this._invInertia00*this._transform._rotation20+this._invInertia01*this._transform._rotation21+this._invInertia02*this._transform._rotation22;b=this._invInertia10*this._transform._rotation00+this._invInertia11*this._transform._rotation01+this._invInertia12*this._transform._rotation02;c=this._invInertia10*this._transform._rotation10+
this._invInertia11*this._transform._rotation11+this._invInertia12*this._transform._rotation12;d=this._invInertia10*this._transform._rotation20+this._invInertia11*this._transform._rotation21+this._invInertia12*this._transform._rotation22;k=this._invInertia20*this._transform._rotation00+this._invInertia21*this._transform._rotation01+this._invInertia22*this._transform._rotation02;m=this._invInertia20*this._transform._rotation10+this._invInertia21*this._transform._rotation11+this._invInertia22*this._transform._rotation12;
h=this._invInertia20*this._transform._rotation20+this._invInertia21*this._transform._rotation21+this._invInertia22*this._transform._rotation22;this._invInertia00=a;this._invInertia01=e;this._invInertia02=f;this._invInertia10=b;this._invInertia11=c;this._invInertia12=d;this._invInertia20=k;this._invInertia21=m;this._invInertia22=h;this._invInertia00*=this._rotFactor.x;this._invInertia01*=this._rotFactor.x;this._invInertia02*=this._rotFactor.x;this._invInertia10*=this._rotFactor.y;this._invInertia11*=
this._rotFactor.y;this._invInertia12*=this._rotFactor.y;this._invInertia20*=this._rotFactor.z;this._invInertia21*=this._rotFactor.z;this._invInertia22*=this._rotFactor.z}},updateMass:function(){for(var a,b,c,d,e,f,k,m,h,n=h=m=k=f=e=d=c=b=a=0,g=this._shapeList;null!=g;){var l=g._next,p=g._geom;p._updateMass();var y=g._density*p._volume;var r=g._localTransform._rotation00*p._inertiaCoeff00+g._localTransform._rotation01*p._inertiaCoeff10+g._localTransform._rotation02*p._inertiaCoeff20;var q=g._localTransform._rotation00*
p._inertiaCoeff01+g._localTransform._rotation01*p._inertiaCoeff11+g._localTransform._rotation02*p._inertiaCoeff21;var t=g._localTransform._rotation00*p._inertiaCoeff02+g._localTransform._rotation01*p._inertiaCoeff12+g._localTransform._rotation02*p._inertiaCoeff22;var z=g._localTransform._rotation10*p._inertiaCoeff00+g._localTransform._rotation11*p._inertiaCoeff10+g._localTransform._rotation12*p._inertiaCoeff20;var w=g._localTransform._rotation10*p._inertiaCoeff01+g._localTransform._rotation11*p._inertiaCoeff11+
g._localTransform._rotation12*p._inertiaCoeff21;var A=g._localTransform._rotation10*p._inertiaCoeff02+g._localTransform._rotation11*p._inertiaCoeff12+g._localTransform._rotation12*p._inertiaCoeff22;var v=g._localTransform._rotation20*p._inertiaCoeff00+g._localTransform._rotation21*p._inertiaCoeff10+g._localTransform._rotation22*p._inertiaCoeff20;var O=g._localTransform._rotation20*p._inertiaCoeff01+g._localTransform._rotation21*p._inertiaCoeff11+g._localTransform._rotation22*p._inertiaCoeff21;p=g._localTransform._rotation20*
p._inertiaCoeff02+g._localTransform._rotation21*p._inertiaCoeff12+g._localTransform._rotation22*p._inertiaCoeff22;var u=r*g._localTransform._rotation00+q*g._localTransform._rotation01+t*g._localTransform._rotation02;var x=r*g._localTransform._rotation10+q*g._localTransform._rotation11+t*g._localTransform._rotation12;t=r*g._localTransform._rotation20+q*g._localTransform._rotation21+t*g._localTransform._rotation22;var B=z*g._localTransform._rotation00+w*g._localTransform._rotation01+A*g._localTransform._rotation02;
var F=z*g._localTransform._rotation10+w*g._localTransform._rotation11+A*g._localTransform._rotation12;A=z*g._localTransform._rotation20+w*g._localTransform._rotation21+A*g._localTransform._rotation22;var qa=v*g._localTransform._rotation00+O*g._localTransform._rotation01+p*g._localTransform._rotation02;var M=v*g._localTransform._rotation10+O*g._localTransform._rotation11+p*g._localTransform._rotation12;p=v*g._localTransform._rotation20+O*g._localTransform._rotation21+p*g._localTransform._rotation22;
r=u;q=x;z=B;w=F;v=qa;O=M;r*=y;q*=y;t*=y;z*=y;w*=y;A*=y;v*=y;O*=y;p*=y;B=g._localTransform._positionX*g._localTransform._positionX;F=g._localTransform._positionY*g._localTransform._positionY;var L=g._localTransform._positionZ*g._localTransform._positionZ;qa=-g._localTransform._positionX*g._localTransform._positionY;M=-g._localTransform._positionY*g._localTransform._positionZ;var Ia=-g._localTransform._positionZ*g._localTransform._positionX;g=F+L;u=qa;x=Ia;L=B+L;var Ca=M;B+=F;r+=g*y;q+=u*y;t+=x*y;z+=
qa*y;w+=L*y;A+=Ca*y;v+=Ia*y;O+=M*y;p+=B*y;n+=y;a+=r;b+=q;c+=t;d+=z;e+=w;f+=A;k+=v;m+=O;h+=p;g=l}this._mass=n;this._localInertia00=a;this._localInertia01=b;this._localInertia02=c;this._localInertia10=d;this._localInertia11=e;this._localInertia12=f;this._localInertia20=k;this._localInertia21=m;this._localInertia22=h;a=this._localInertia00*(this._localInertia11*this._localInertia22-this._localInertia12*this._localInertia21)-this._localInertia01*(this._localInertia10*this._localInertia22-this._localInertia12*
this._localInertia20)+this._localInertia02*(this._localInertia10*this._localInertia21-this._localInertia11*this._localInertia20);if(0<this._mass&&0<a&&0==this._type){this._invMass=1/this._mass;a=this._localInertia11*this._localInertia22-this._localInertia12*this._localInertia21;b=this._localInertia10*this._localInertia22-this._localInertia12*this._localInertia20;c=this._localInertia10*this._localInertia21-this._localInertia11*this._localInertia20;d=this._localInertia01*this._localInertia22-this._localInertia02*
this._localInertia21;e=this._localInertia00*this._localInertia22-this._localInertia02*this._localInertia20;f=this._localInertia00*this._localInertia21-this._localInertia01*this._localInertia20;k=this._localInertia01*this._localInertia12-this._localInertia02*this._localInertia11;m=this._localInertia00*this._localInertia12-this._localInertia02*this._localInertia10;h=this._localInertia00*this._localInertia11-this._localInertia01*this._localInertia10;n=this._localInertia00*a-this._localInertia01*b+this._localInertia02*
c;if(-1E-32>n||1E-32<n)n=1/n;this._invLocalInertia00=a*n;this._invLocalInertia01=-d*n;this._invLocalInertia02=k*n;this._invLocalInertia10=-b*n;this._invLocalInertia11=e*n;this._invLocalInertia12=-m*n;this._invLocalInertia20=c*n;this._invLocalInertia21=-f*n;this._invLocalInertia22=h*n;this._invLocalInertiaWithoutRotFactor00=this._invLocalInertia00;this._invLocalInertiaWithoutRotFactor01=this._invLocalInertia01;this._invLocalInertiaWithoutRotFactor02=this._invLocalInertia02;this._invLocalInertiaWithoutRotFactor10=
this._invLocalInertia10;this._invLocalInertiaWithoutRotFactor11=this._invLocalInertia11;this._invLocalInertiaWithoutRotFactor12=this._invLocalInertia12;this._invLocalInertiaWithoutRotFactor20=this._invLocalInertia20;this._invLocalInertiaWithoutRotFactor21=this._invLocalInertia21;this._invLocalInertiaWithoutRotFactor22=this._invLocalInertia22;this._invLocalInertia00=this._invLocalInertiaWithoutRotFactor00*this._rotFactor.x;this._invLocalInertia01=this._invLocalInertiaWithoutRotFactor01*this._rotFactor.x;
this._invLocalInertia02=this._invLocalInertiaWithoutRotFactor02*this._rotFactor.x;this._invLocalInertia10=this._invLocalInertiaWithoutRotFactor10*this._rotFactor.y;this._invLocalInertia11=this._invLocalInertiaWithoutRotFactor11*this._rotFactor.y;this._invLocalInertia12=this._invLocalInertiaWithoutRotFactor12*this._rotFactor.y;this._invLocalInertia20=this._invLocalInertiaWithoutRotFactor20*this._rotFactor.z;this._invLocalInertia21=this._invLocalInertiaWithoutRotFactor21*this._rotFactor.z;this._invLocalInertia22=
this._invLocalInertiaWithoutRotFactor22*this._rotFactor.z}else this._invLocalInertiaWithoutRotFactor22=this._invLocalInertiaWithoutRotFactor21=this._invLocalInertiaWithoutRotFactor20=this._invLocalInertiaWithoutRotFactor12=this._invLocalInertiaWithoutRotFactor11=this._invLocalInertiaWithoutRotFactor10=this._invLocalInertiaWithoutRotFactor02=this._invLocalInertiaWithoutRotFactor01=this._invLocalInertiaWithoutRotFactor00=this._invLocalInertia22=this._invLocalInertia21=this._invLocalInertia20=this._invLocalInertia12=
this._invLocalInertia11=this._invLocalInertia10=this._invLocalInertia02=this._invLocalInertia01=this._invLocalInertia00=this._invMass=0,0==this._type&&(this._type=1);a=this._transform._rotation00*this._invLocalInertia00+this._transform._rotation01*this._invLocalInertia10+this._transform._rotation02*this._invLocalInertia20;b=this._transform._rotation00*this._invLocalInertia01+this._transform._rotation01*this._invLocalInertia11+this._transform._rotation02*this._invLocalInertia21;c=this._transform._rotation00*
this._invLocalInertia02+this._transform._rotation01*this._invLocalInertia12+this._transform._rotation02*this._invLocalInertia22;d=this._transform._rotation10*this._invLocalInertia00+this._transform._rotation11*this._invLocalInertia10+this._transform._rotation12*this._invLocalInertia20;e=this._transform._rotation10*this._invLocalInertia01+this._transform._rotation11*this._invLocalInertia11+this._transform._rotation12*this._invLocalInertia21;f=this._transform._rotation10*this._invLocalInertia02+this._transform._rotation11*
this._invLocalInertia12+this._transform._rotation12*this._invLocalInertia22;k=this._transform._rotation20*this._invLocalInertia00+this._transform._rotation21*this._invLocalInertia10+this._transform._rotation22*this._invLocalInertia20;m=this._transform._rotation20*this._invLocalInertia01+this._transform._rotation21*this._invLocalInertia11+this._transform._rotation22*this._invLocalInertia21;h=this._transform._rotation20*this._invLocalInertia02+this._transform._rotation21*this._invLocalInertia12+this._transform._rotation22*
this._invLocalInertia22;this._invInertia00=a;this._invInertia01=b;this._invInertia02=c;this._invInertia10=d;this._invInertia11=e;this._invInertia12=f;this._invInertia20=k;this._invInertia21=m;this._invInertia22=h;a=this._invInertia00*this._transform._rotation00+this._invInertia01*this._transform._rotation01+this._invInertia02*this._transform._rotation02;b=this._invInertia00*this._transform._rotation10+this._invInertia01*this._transform._rotation11+this._invInertia02*this._transform._rotation12;c=
this._invInertia00*this._transform._rotation20+this._invInertia01*this._transform._rotation21+this._invInertia02*this._transform._rotation22;d=this._invInertia10*this._transform._rotation00+this._invInertia11*this._transform._rotation01+this._invInertia12*this._transform._rotation02;e=this._invInertia10*this._transform._rotation10+this._invInertia11*this._transform._rotation11+this._invInertia12*this._transform._rotation12;f=this._invInertia10*this._transform._rotation20+this._invInertia11*this._transform._rotation21+
this._invInertia12*this._transform._rotation22;k=this._invInertia20*this._transform._rotation00+this._invInertia21*this._transform._rotation01+this._invInertia22*this._transform._rotation02;m=this._invInertia20*this._transform._rotation10+this._invInertia21*this._transform._rotation11+this._invInertia22*this._transform._rotation12;h=this._invInertia20*this._transform._rotation20+this._invInertia21*this._transform._rotation21+this._invInertia22*this._transform._rotation22;this._invInertia00=a;this._invInertia01=
b;this._invInertia02=c;this._invInertia10=d;this._invInertia11=e;this._invInertia12=f;this._invInertia20=k;this._invInertia21=m;this._invInertia22=h;this._invInertia00*=this._rotFactor.x;this._invInertia01*=this._rotFactor.x;this._invInertia02*=this._rotFactor.x;this._invInertia10*=this._rotFactor.y;this._invInertia11*=this._rotFactor.y;this._invInertia12*=this._rotFactor.y;this._invInertia20*=this._rotFactor.z;this._invInertia21*=this._rotFactor.z;this._invInertia22*=this._rotFactor.z;this._sleeping=
!1;this._sleepTime=0},addShape:function(a){null==this._shapeList?this._shapeList=a:(this._shapeListLast._next=a,a._prev=this._shapeListLast);this._shapeListLast=a;this._numShapes++;a._rigidBody=this;if(null!=this._world){var b=this._world;a._proxy=b._broadPhase.createProxy(a,a._aabb);a._id=b._shapeIdCount++;b._numShapes++}this.updateMass();for(a=this._shapeList;null!=a;){b=a._next;var c=a._ptransform,d=a._localTransform,e=this._ptransform;var f=e._rotation00*d._rotation00+e._rotation01*d._rotation10+
e._rotation02*d._rotation20;var k=e._rotation00*d._rotation01+e._rotation01*d._rotation11+e._rotation02*d._rotation21;var m=e._rotation00*d._rotation02+e._rotation01*d._rotation12+e._rotation02*d._rotation22;var h=e._rotation10*d._rotation00+e._rotation11*d._rotation10+e._rotation12*d._rotation20;var n=e._rotation10*d._rotation01+e._rotation11*d._rotation11+e._rotation12*d._rotation21;var g=e._rotation10*d._rotation02+e._rotation11*d._rotation12+e._rotation12*d._rotation22;var l=e._rotation20*d._rotation00+
e._rotation21*d._rotation10+e._rotation22*d._rotation20;var p=e._rotation20*d._rotation01+e._rotation21*d._rotation11+e._rotation22*d._rotation21;var y=e._rotation20*d._rotation02+e._rotation21*d._rotation12+e._rotation22*d._rotation22;c._rotation00=f;c._rotation01=k;c._rotation02=m;c._rotation10=h;c._rotation11=n;c._rotation12=g;c._rotation20=l;c._rotation21=p;c._rotation22=y;f=e._rotation00*d._positionX+e._rotation01*d._positionY+e._rotation02*d._positionZ;k=e._rotation10*d._positionX+e._rotation11*
d._positionY+e._rotation12*d._positionZ;d=e._rotation20*d._positionX+e._rotation21*d._positionY+e._rotation22*d._positionZ;c._positionX=f;c._positionY=k;c._positionZ=d;c._positionX+=e._positionX;c._positionY+=e._positionY;c._positionZ+=e._positionZ;c=a._transform;d=a._localTransform;e=this._transform;f=e._rotation00*d._rotation00+e._rotation01*d._rotation10+e._rotation02*d._rotation20;k=e._rotation00*d._rotation01+e._rotation01*d._rotation11+e._rotation02*d._rotation21;m=e._rotation00*d._rotation02+
e._rotation01*d._rotation12+e._rotation02*d._rotation22;h=e._rotation10*d._rotation00+e._rotation11*d._rotation10+e._rotation12*d._rotation20;n=e._rotation10*d._rotation01+e._rotation11*d._rotation11+e._rotation12*d._rotation21;g=e._rotation10*d._rotation02+e._rotation11*d._rotation12+e._rotation12*d._rotation22;l=e._rotation20*d._rotation00+e._rotation21*d._rotation10+e._rotation22*d._rotation20;p=e._rotation20*d._rotation01+e._rotation21*d._rotation11+e._rotation22*d._rotation21;y=e._rotation20*
d._rotation02+e._rotation21*d._rotation12+e._rotation22*d._rotation22;c._rotation00=f;c._rotation01=k;c._rotation02=m;c._rotation10=h;c._rotation11=n;c._rotation12=g;c._rotation20=l;c._rotation21=p;c._rotation22=y;f=e._rotation00*d._positionX+e._rotation01*d._positionY+e._rotation02*d._positionZ;k=e._rotation10*d._positionX+e._rotation11*d._positionY+e._rotation12*d._positionZ;d=e._rotation20*d._positionX+e._rotation21*d._positionY+e._rotation22*d._positionZ;c._positionX=f;c._positionY=k;c._positionZ=
d;c._positionX+=e._positionX;c._positionY+=e._positionY;c._positionZ+=e._positionZ;a._geom._computeAabb(a._aabb,a._ptransform);c=a._aabb._minX;e=a._aabb._minY;d=a._aabb._minZ;f=a._aabb._maxX;k=a._aabb._maxY;m=a._aabb._maxZ;a._geom._computeAabb(a._aabb,a._transform);a._aabb._minX=c<a._aabb._minX?c:a._aabb._minX;a._aabb._minY=e<a._aabb._minY?e:a._aabb._minY;a._aabb._minZ=d<a._aabb._minZ?d:a._aabb._minZ;a._aabb._maxX=f>a._aabb._maxX?f:a._aabb._maxX;a._aabb._maxY=k>a._aabb._maxY?k:a._aabb._maxY;a._aabb._maxZ=
m>a._aabb._maxZ?m:a._aabb._maxZ;null!=a._proxy&&(c=a._transform._positionX-a._ptransform._positionX,e=a._transform._positionY-a._ptransform._positionY,d=a._transform._positionZ-a._ptransform._positionZ,f=a.displacement,f.x=c,f.y=e,f.z=d,a._rigidBody._world._broadPhase.moveProxy(a._proxy,a._aabb,a.displacement));a=b}},__class__:qj};var pj=function(){this.position=new w;this.rotation=new Ef;this.linearVelocity=new w;this.angularVelocity=new w;this.type=0;this.autoSleep=!0;this.angularDamping=this.linearDamping=
0};g["oimo.dynamics.rigidbody.RigidBodyConfig"]=pj;pj.__name__="oimo.dynamics.rigidbody.RigidBodyConfig";pj.prototype={position:null,rotation:null,linearVelocity:null,angularVelocity:null,type:null,autoSleep:null,linearDamping:null,angularDamping:null,__class__:pj};var ib=function(){};g["oimo.dynamics.rigidbody.RigidBodyType"]=ib;ib.__name__="oimo.dynamics.rigidbody.RigidBodyType";var rj=function(a){this._id=-1;this._localTransform=new Ld;this._ptransform=new Ld;this._transform=new Ld;var b=a.position;
this._localTransform._positionX=b.x;this._localTransform._positionY=b.y;this._localTransform._positionZ=b.z;b=a.rotation;this._localTransform._rotation00=b.e00;this._localTransform._rotation01=b.e01;this._localTransform._rotation02=b.e02;this._localTransform._rotation10=b.e10;this._localTransform._rotation11=b.e11;this._localTransform._rotation12=b.e12;this._localTransform._rotation20=b.e20;this._localTransform._rotation21=b.e21;this._localTransform._rotation22=b.e22;b=this._ptransform;var c=this._localTransform;
b._positionX=c._positionX;b._positionY=c._positionY;b._positionZ=c._positionZ;b._rotation00=c._rotation00;b._rotation01=c._rotation01;b._rotation02=c._rotation02;b._rotation10=c._rotation10;b._rotation11=c._rotation11;b._rotation12=c._rotation12;b._rotation20=c._rotation20;b._rotation21=c._rotation21;b._rotation22=c._rotation22;b=this._transform;c=this._localTransform;b._positionX=c._positionX;b._positionY=c._positionY;b._positionZ=c._positionZ;b._rotation00=c._rotation00;b._rotation01=c._rotation01;
b._rotation02=c._rotation02;b._rotation10=c._rotation10;b._rotation11=c._rotation11;b._rotation12=c._rotation12;b._rotation20=c._rotation20;b._rotation21=c._rotation21;b._rotation22=c._rotation22;this._restitution=a.restitution;this._friction=a.friction;this._density=a.density;this._geom=a.geometry;this._collisionGroup=a.collisionGroup;this._collisionMask=a.collisionMask;this._contactCallback=a.contactCallback;this._aabb=new Kj;this._proxy=null;this.displacement=new w};g["oimo.dynamics.rigidbody.Shape"]=
rj;rj.__name__="oimo.dynamics.rigidbody.Shape";rj.prototype={_id:null,_prev:null,_next:null,_rigidBody:null,_geom:null,_localTransform:null,_ptransform:null,_transform:null,_restitution:null,_friction:null,_density:null,_aabb:null,_proxy:null,_collisionGroup:null,_collisionMask:null,_contactCallback:null,displacement:null,__class__:rj};var oj=function(){this.position=new w;this.rotation=new Ef;this.friction=ta.defaultFriction;this.restitution=ta.defaultRestitution;this.density=ta.defaultDensity;this.collisionGroup=
ta.defaultCollisionGroup;this.collisionMask=ta.defaultCollisionMask;this.contactCallback=this.geometry=null};g["oimo.dynamics.rigidbody.ShapeConfig"]=oj;oj.__name__="oimo.dynamics.rigidbody.ShapeConfig";oj.prototype={position:null,rotation:null,friction:null,restitution:null,density:null,geometry:null,collisionGroup:null,collisionMask:null,contactCallback:null,__class__:oj};var Qb=function(){};g["openfl.Lib"]=Qb;Qb.__name__="openfl.Lib";Qb.getTimer=function(){return jc.getTimer()};Qb.getURL=function(a,
b){Qb.navigateToURL(a,b)};Qb.navigateToURL=function(a,b){null==b&&(b="_blank");var c=a.url;if(L.typeof(a.data)==U.TObject){for(var d="",e=Na.fields(a.data),f=0;f<e.length;){var k=e[f];++f;0<d.length&&(d+="&");var m=encodeURIComponent(k)+"=";k=r.string(Na.field(a.data,k));d+=m+encodeURIComponent(k)}c=-1<c.indexOf("?")?c+("&"+d):c+("?"+d)}jc.openURL(c,b)};Qb.get_current=function(){null==vd.current&&(vd.current=new yd);return vd.current};var Qe=function(){};g["openfl._Vector.IVector"]=Qe;Qe.__name__=
"openfl._Vector.IVector";Qe.__isInterface__=!0;Qe.prototype={get_length:null,fixed:null,__class__:Qe};var fg=function(a,b,c){null==b&&(b=!1);null==a&&(a=0);null==c&&(c=[]);this.__array=c;0<a&&this.set_length(a);this.fixed=b};g["openfl._Vector.BoolVector"]=fg;fg.__name__="openfl._Vector.BoolVector";fg.__interfaces__=[Qe];fg.prototype={fixed:null,__array:null,get:function(a){return a>=this.__array.length?!1:this.__array[a]},set:function(a,b){return!this.fixed||a<this.__array.length?this.__array[a]=
b:b},toJSON:function(){return this.__array},get_length:function(){return this.__array.length},set_length:function(a){if(!this.fixed){var b=this.__array.length;0>a&&(a=0);if(a>b)for(;b<a;){var c=b++;this.__array[c]=!1}else for(;this.__array.length>a;)this.__array.pop()}return this.__array.length},__class__:fg};var cf=function(a,b,c,d){null==d&&(d=!1);null==b&&(b=!1);null==a&&(a=0);if(d){if(this.__array=[],null!=c){d=0;for(var e=c.length;d<e;){var f=d++;this.__array[f]=c[f]}}}else null==c&&(c=[]),this.__array=
c;0<a&&this.set_length(a);this.fixed=b};g["openfl._Vector.FloatVector"]=cf;cf.__name__="openfl._Vector.FloatVector";cf.__interfaces__=[Qe];cf.prototype={fixed:null,__array:null,concat:function(a){return null==a?new cf(0,!1,this.__array.slice()):0<a.__array.length?new cf(0,!1,this.__array.concat(a.__array)):new cf(0,!1,this.__array.slice())},copy:function(){return new cf(0,this.fixed,this.__array.slice())},get:function(a){return this.__array[a]},push:function(a){return this.fixed?this.__array.length:
this.__array.push(a)},set:function(a,b){return!this.fixed||a<this.__array.length?this.__array[a]=b:b},toJSON:function(){return this.__array},get_length:function(){return this.__array.length},set_length:function(a){if(a!=this.__array.length&&!this.fixed){var b=this.__array.length;0>a&&(a=0);if(a>b)for(;b<a;){var c=b++;this.__array[c]=0}else for(;this.__array.length>a;)this.__array.pop()}return this.__array.length},__class__:cf};var ph=function(a,b,c){null==b&&(b=!1);null==a&&(a=0);null==c&&(c=[]);
this.__array=c;0<a&&this.set_length(a);this.fixed=b};g["openfl._Vector.FunctionVector"]=ph;ph.__name__="openfl._Vector.FunctionVector";ph.__interfaces__=[Qe];ph.prototype={fixed:null,__array:null,toJSON:function(){return this.__array},get_length:function(){return this.__array.length},set_length:function(a){if(!this.fixed){var b=this.__array.length;0>a&&(a=0);if(a>b)for(;b<a;){var c=b++;this.__array[c]=null}else for(;this.__array.length>a;)this.__array.pop()}return this.__array.length},__class__:ph};
var Se=function(a,b,c){null==b&&(b=!1);null==a&&(a=0);null==c&&(c=[]);this.__array=c;0<a&&this.set_length(a);this.fixed=b};g["openfl._Vector.IntVector"]=Se;Se.__name__="openfl._Vector.IntVector";Se.__interfaces__=[Qe];Se.prototype={fixed:null,__array:null,get:function(a){return this.__array[a]},push:function(a){return this.fixed?this.__array.length:this.__array.push(a)},set:function(a,b){return!this.fixed||a<this.__array.length?this.__array[a]=b:b},toJSON:function(){return this.__array},get_length:function(){return this.__array.length},
set_length:function(a){if(!this.fixed){var b=this.__array.length;0>a&&(a=0);if(a>b)for(;b<a;){var c=b++;this.__array[c]=0}else for(;this.__array.length>a;)this.__array.pop()}return this.__array.length},__class__:Se};var Zd=function(a,b,c,d){null==d&&(d=!1);null==b&&(b=!1);null==a&&(a=0);if(d){if(this.__array=[],null!=c){d=0;for(var e=c.length;d<e;){var f=d++;this.__array[f]=c[f]}}}else null==c&&(c=[]),this.__array=c;0<a&&this.set_length(a);this.fixed=b};g["openfl._Vector.ObjectVector"]=Zd;Zd.__name__=
"openfl._Vector.ObjectVector";Zd.__interfaces__=[Qe];Zd.prototype={fixed:null,__array:null,concat:function(a){return null==a?new Zd(0,!1,this.__array.slice()):0<a.__array.length?new Zd(0,!1,this.__array.concat(a.__array)):new Zd(0,!1,this.__array.slice())},get:function(a){return this.__array[a]},indexOf:function(a,b){null==b&&(b=0);for(var c=this.__array.length;b<c;){var d=b++;if(this.__array[d]==a)return d}return-1},iterator:function(){return ra.iter(this.__array)},pop:function(){return this.fixed?
null:this.__array.pop()},push:function(a){return this.fixed?this.__array.length:this.__array.push(a)},set:function(a,b){return!this.fixed||a<this.__array.length?this.__array[a]=b:b},sort:function(a){this.__array.sort(a)},splice:function(a,b){return new Zd(0,!1,this.__array.splice(a,b))},toJSON:function(){return this.__array},get_length:function(){return this.__array.length},set_length:function(a){if(!this.fixed){var b=this.__array.length;0>a&&(a=0);if(a>b)for(;b<a;)b++,this.__array.push(null);else for(;this.__array.length>
a;)this.__array.pop()}return this.__array.length},__class__:Zd};var vd=function(){};g["openfl._internal.Lib"]=vd;vd.__name__="openfl._internal.Lib";var sd=function(){};g["openfl._internal.formats.agal.AGALConverter"]=sd;sd.__name__="openfl._internal.formats.agal.AGALConverter";sd.prefixFromType=function(a,b){switch(a){case 0:return"va";case 1:return b==zg.VERTEX?"vc":"fc";case 2:return b==zg.VERTEX?"vt":"ft";case 3:return"output_";case 4:return"v";case 5:return"sampler";default:throw new W(new Nc("Invalid data!"));
}};sd.readUInt64=function(a){var b=a.readInt();a=a.readInt();return new pd(a,b)};sd.convertToGLSL=function(a,b){a.position=0;a.__endian=1;var c=a.readByte()&255;if(176==c)return a.readUTF();if(160!=c)throw new W(new Nc("Magic value must be 0xA0, may not be AGAL"));if(1!=a.readInt())throw new W(new Nc("Version must be 1"));if(161!=(a.readByte()&255))throw new W(new Nc("Shader type ID must be 0xA1"));c=0==(a.readByte()&255)?zg.VERTEX:zg.FRAGMENT;for(var d=new qh,e="";;){var f=a.position;if(!Xa.gt(rf.get_length(a),
f))break;var k=a.readInt();f=a.readUnsignedInt();var m=sd.readUInt64(a),h=sd.readUInt64(a);f=Si.parse(f,c);m=Ag.parse(m,c,f.mask);var n=Ag.parse(h,c,f.mask);e+="\t";switch(k){case 0:e+=r.string(f.toGLSL()+" = "+m.toGLSL()+"; // mov");d.addDR(f,la.VECTOR_4);d.addSR(m,la.VECTOR_4);break;case 1:e+=r.string(f.toGLSL()+" = "+m.toGLSL()+" + "+n.toGLSL()+"; // add");d.addDR(f,la.VECTOR_4);d.addSR(m,la.VECTOR_4);d.addSR(n,la.VECTOR_4);break;case 2:e+=r.string(f.toGLSL()+" = "+m.toGLSL()+" - "+n.toGLSL()+
"; // sub");d.addDR(f,la.VECTOR_4);d.addSR(m,la.VECTOR_4);d.addSR(n,la.VECTOR_4);break;case 3:e+=r.string(f.toGLSL()+" = "+m.toGLSL()+" * "+n.toGLSL()+"; // mul");d.addDR(f,la.VECTOR_4);d.addSR(m,la.VECTOR_4);d.addSR(n,la.VECTOR_4);break;case 4:e+=r.string(f.toGLSL()+" = "+m.toGLSL()+" / "+n.toGLSL()+"; // div");d.addDR(f,la.VECTOR_4);d.addSR(m,la.VECTOR_4);d.addSR(n,la.VECTOR_4);break;case 5:e=-1<m.toGLSL().indexOf(".")?e+r.string(f.toGLSL()+" = 1.0 / "+m.toGLSL()+"; // rcp"):e+r.string(f.toGLSL()+
" = vec4(1) / "+m.toGLSL()+"; // rcp");d.addDR(f,la.VECTOR_4);d.addSR(m,la.VECTOR_4);break;case 6:e+=r.string(f.toGLSL()+" = min("+m.toGLSL()+", "+n.toGLSL()+"); // min");d.addDR(f,la.VECTOR_4);d.addSR(m,la.VECTOR_4);d.addSR(n,la.VECTOR_4);break;case 7:e+=r.string(f.toGLSL()+" = max("+m.toGLSL()+", "+n.toGLSL()+"); // max");d.addDR(f,la.VECTOR_4);d.addSR(m,la.VECTOR_4);d.addSR(n,la.VECTOR_4);break;case 8:e+=r.string(f.toGLSL()+" = fract("+m.toGLSL()+"); // frc");d.addDR(f,la.VECTOR_4);d.addSR(m,la.VECTOR_4);
break;case 9:e+=r.string(f.toGLSL()+" = sqrt("+m.toGLSL()+"); // sqrt");d.addDR(f,la.VECTOR_4);d.addSR(m,la.VECTOR_4);break;case 10:e+=r.string(f.toGLSL()+" = inversesqrt("+m.toGLSL()+"); // rsq");d.addDR(f,la.VECTOR_4);d.addSR(m,la.VECTOR_4);break;case 11:e+=r.string(f.toGLSL()+" = pow("+m.toGLSL()+", "+n.toGLSL()+"); // pow");d.addDR(f,la.VECTOR_4);d.addSR(m,la.VECTOR_4);d.addSR(n,la.VECTOR_4);break;case 12:e+=r.string(f.toGLSL()+" = log2("+m.toGLSL()+"); // log");d.addDR(f,la.VECTOR_4);d.addSR(m,
la.VECTOR_4);break;case 13:e+=r.string(f.toGLSL()+" = exp2("+m.toGLSL()+"); // exp");d.addDR(f,la.VECTOR_4);d.addSR(m,la.VECTOR_4);break;case 14:e+=r.string(f.toGLSL()+" = normalize("+m.toGLSL()+"); // normalize");d.addDR(f,la.VECTOR_4);d.addSR(m,la.VECTOR_4);break;case 15:e+=r.string(f.toGLSL()+" = sin("+m.toGLSL()+"); // sin");d.addDR(f,la.VECTOR_4);d.addSR(m,la.VECTOR_4);break;case 16:e+=r.string(f.toGLSL()+" = cos("+m.toGLSL()+"); // cos");d.addDR(f,la.VECTOR_4);d.addSR(m,la.VECTOR_4);break;case 17:m.sourceMask=
n.sourceMask=7;e+=r.string(f.toGLSL()+" = cross(vec3("+m.toGLSL()+"), vec3("+n.toGLSL()+")); // crs");d.addDR(f,la.VECTOR_4);d.addSR(m,la.VECTOR_4);d.addSR(n,la.VECTOR_4);break;case 18:m.sourceMask=n.sourceMask=7;e+=r.string(f.toGLSL()+" = vec4(dot(vec3("+m.toGLSL()+"), vec3("+n.toGLSL()+")))"+f.getWriteMask()+"; // dp3");d.addDR(f,la.VECTOR_4);d.addSR(m,la.VECTOR_4);d.addSR(n,la.VECTOR_4);break;case 19:m.sourceMask=n.sourceMask=15;e+=r.string(f.toGLSL()+" = vec4(dot(vec4("+m.toGLSL()+"), vec4("+
n.toGLSL()+")))"+f.getWriteMask()+"; // dp4");d.addDR(f,la.VECTOR_4);d.addSR(m,la.VECTOR_4);d.addSR(n,la.VECTOR_4);break;case 20:e+=r.string(f.toGLSL()+" = abs("+m.toGLSL()+"); // abs");d.addDR(f,la.VECTOR_4);d.addSR(m,la.VECTOR_4);break;case 21:e+=r.string(f.toGLSL()+" = -"+m.toGLSL()+"; // neg");d.addDR(f,la.VECTOR_4);d.addSR(m,la.VECTOR_4);break;case 22:e+=r.string(f.toGLSL()+" = clamp("+m.toGLSL()+", 0.0, 1.0); // saturate");d.addDR(f,la.VECTOR_4);d.addSR(m,la.VECTOR_4);break;case 23:k=d.getRegisterUsage(n);
k!=la.VECTOR_4&&k!=la.VECTOR_4_ARRAY?(e+=r.string(f.toGLSL()+" = "+m.toGLSL()+" * mat3("+n.toGLSL(!1)+"); // m33"),d.addDR(f,la.VECTOR_4),d.addSR(m,la.VECTOR_4),d.addSR(n,la.MATRIX_4_4)):(m.sourceMask=n.sourceMask=7,e+=r.string(f.toGLSL()+" = vec3(dot("+m.toGLSL(!0)+","+n.toGLSL(!0,0)+"), dot("+m.toGLSL(!0)+","+n.toGLSL(!0,1)+"),dot("+m.toGLSL(!0)+","+n.toGLSL(!0,2)+")); // m33"),d.addDR(f,la.VECTOR_4),d.addSR(m,la.VECTOR_4),d.addSR(n,la.VECTOR_4,0),d.addSR(n,la.VECTOR_4,1),d.addSR(n,la.VECTOR_4,
2));break;case 24:k=d.getRegisterUsage(n);k!=la.VECTOR_4&&k!=la.VECTOR_4_ARRAY?(e+=r.string(f.toGLSL()+" = "+m.toGLSL()+" * "+n.toGLSL(!1)+"; // m44"),d.addDR(f,la.VECTOR_4),d.addSR(m,la.VECTOR_4),d.addSR(n,la.MATRIX_4_4)):(m.sourceMask=n.sourceMask=15,e+=r.string(f.toGLSL()+" = vec4(dot("+m.toGLSL(!0)+","+n.toGLSL(!0,0)+"), dot("+m.toGLSL(!0)+","+n.toGLSL(!0,1)+"), dot("+m.toGLSL(!0)+","+n.toGLSL(!0,2)+"), dot("+m.toGLSL(!0)+","+n.toGLSL(!0,3)+")); // m44"),d.addDR(f,la.VECTOR_4),d.addSR(m,la.VECTOR_4),
d.addSR(n,la.VECTOR_4,0),d.addSR(n,la.VECTOR_4,1),d.addSR(n,la.VECTOR_4,2),d.addSR(n,la.VECTOR_4,3));break;case 25:f.mask&=7;k=d.getRegisterUsage(n);k!=la.VECTOR_4&&k!=la.VECTOR_4_ARRAY?(e+=r.string(f.toGLSL()+" = "+m.toGLSL()+" * "+n.toGLSL(!1)+"; // m34"),d.addDR(f,la.VECTOR_4),d.addSR(m,la.VECTOR_4),d.addSR(n,la.MATRIX_4_4)):(m.sourceMask=n.sourceMask=15,e+=r.string(f.toGLSL()+" = vec3(dot("+m.toGLSL(!0)+","+n.toGLSL(!0,0)+"), dot("+m.toGLSL(!0)+","+n.toGLSL(!0,1)+"),dot("+m.toGLSL(!0)+","+n.toGLSL(!0,
2)+")); // m34"),d.addDR(f,la.VECTOR_4),d.addSR(m,la.VECTOR_4),d.addSR(n,la.VECTOR_4,0),d.addSR(n,la.VECTOR_4,1),d.addSR(n,la.VECTOR_4,2));break;case 39:m.sourceMask=15;e+=r.string("if (any(lessThan("+m.toGLSL()+", vec4(0)))) discard;");d.addSR(m,la.VECTOR_4);break;case 40:n=Ti.parse(h,c);switch(n.d){case 0:2==n.t?(m.sourceMask=3,d.addSaR(n,la.SAMPLER_2D_ALPHA),e+=r.string("if ("+n.toGLSL()+"_alphaEnabled) {\n"),e+=r.string("\t\t"+f.toGLSL()+" = vec4(texture2D("+n.toGLSL()+", "+m.toGLSL()+").xyz, texture2D("+
n.toGLSL()+"_alpha, "+m.toGLSL()+").x); // tex + alpha\n"),e+="\t} else {\n",e+=r.string("\t\t"+f.toGLSL()+" = texture2D("+n.toGLSL()+", "+m.toGLSL()+"); // tex\n"),e+="\t}"):(m.sourceMask=3,d.addSaR(n,la.SAMPLER_2D),e+=r.string(f.toGLSL()+" = texture2D("+n.toGLSL()+", "+m.toGLSL()+"); // tex"));break;case 1:2==n.t?(m.sourceMask=7,d.addSaR(n,la.SAMPLER_CUBE_ALPHA),e+=r.string("if ("+n.toGLSL()+"_alphaEnabled) {\n"),e+=r.string("\t\t"+f.toGLSL()+" = vec4(textureCube("+n.toGLSL()+", "+m.toGLSL()+").xyz, textureCube("+
n.toGLSL()+"_alpha, "+m.toGLSL()+").x); // tex + alpha\n"),e+="\t} else {\n",e+=r.string("\t\t"+f.toGLSL()+" = textureCube("+n.toGLSL()+", "+m.toGLSL()+"); // tex"),e+="\t}"):(m.sourceMask=7,e+=r.string(f.toGLSL()+" = textureCube("+n.toGLSL()+", "+m.toGLSL()+"); // tex"),d.addSaR(n,la.SAMPLER_CUBE))}d.addDR(f,la.VECTOR_4);d.addSR(m,la.VECTOR_4);null!=b&&(b[n.n]=n.toSamplerState());break;case 41:m.sourceMask=n.sourceMask=15;e+=r.string(f.toGLSL()+" = vec4(greaterThanEqual("+m.toGLSL()+", "+n.toGLSL()+
"))"+f.getWriteMask()+"; // ste");d.addDR(f,la.VECTOR_4);d.addSR(m,la.VECTOR_4);d.addSR(n,la.VECTOR_4);break;case 42:m.sourceMask=n.sourceMask=15;e+=r.string(f.toGLSL()+" = vec4(lessThan("+m.toGLSL()+", "+n.toGLSL()+"))"+f.getWriteMask()+"; // slt");d.addDR(f,la.VECTOR_4);d.addSR(m,la.VECTOR_4);d.addSR(n,la.VECTOR_4);break;case 44:m.sourceMask=n.sourceMask=15;e+=r.string(f.toGLSL()+" = vec4(equal("+m.toGLSL()+", "+n.toGLSL()+"))"+f.getWriteMask()+"; // seq");d.addDR(f,la.VECTOR_4);d.addSR(m,la.VECTOR_4);
d.addSR(n,la.VECTOR_4);break;case 45:m.sourceMask=n.sourceMask=15;e+=r.string(f.toGLSL()+" = vec4(notEqual("+m.toGLSL()+", "+n.toGLSL()+"))"+f.getWriteMask()+"; // sne");d.addDR(f,la.VECTOR_4);d.addSR(m,la.VECTOR_4);d.addSR(n,la.VECTOR_4);break;default:throw new W(new Nc("Opcode "+k));}e+="\n"}null==sd.limitedProfile&&(a=fh.context.getParameter(7938),sd.limitedProfile=-1<a.indexOf("OpenGL ES")||-1<a.indexOf("WebGL"));a=""+r.string("// AGAL "+(c==zg.VERTEX?"vertex":"fragment")+" shader\n");a=sd.limitedProfile?
a+"#version 100\nprecision highp float;\n":a+"#version 120\n";a+=r.string(d.toGLSL(!1));c==zg.VERTEX&&(a+="uniform vec4 vcPositionScale;\n");a=a+"void main() {\n"+r.string(d.toGLSL(!0));a+=r.string(e);c==zg.VERTEX&&(a+="\tgl_Position *= vcPositionScale;\n");return a+"}\n"};var Si=function(){};g["openfl._internal.formats.agal._AGALConverter.DestRegister"]=Si;Si.__name__="openfl._internal.formats.agal._AGALConverter.DestRegister";Si.parse=function(a,b){var c=new Si;c.programType=b;c.type=a>>>24&15;
c.mask=a>>>16&15;c.n=a&65535;return c};Si.prototype={mask:null,n:null,programType:null,type:null,getWriteMask:function(){var a=".";0!=(this.mask&1)&&(a+="x");0!=(this.mask&2)&&(a+="y");0!=(this.mask&4)&&(a+="z");0!=(this.mask&8)&&(a+="w");return a},toGLSL:function(a){null==a&&(a=!0);var b=3==this.type?this.programType==zg.VERTEX?"gl_Position":"gl_FragColor":sd.prefixFromType(this.type,this.programType)+this.n;a&&15!=this.mask&&(b+=this.getWriteMask());return b},__class__:Si};var zg=t["openfl._internal.formats.agal._AGALConverter.ProgramType"]=
{__ename__:"openfl._internal.formats.agal._AGALConverter.ProgramType",__constructs__:["VERTEX","FRAGMENT"],VERTEX:{_hx_index:0,__enum__:"openfl._internal.formats.agal._AGALConverter.ProgramType",toString:p},FRAGMENT:{_hx_index:1,__enum__:"openfl._internal.formats.agal._AGALConverter.ProgramType",toString:p}},qh=function(){this.mEntries=[]};g["openfl._internal.formats.agal.RegisterMap"]=qh;qh.__name__="openfl._internal.formats.agal.RegisterMap";qh.prototype={mEntries:null,add:function(a,b,c,d){for(var e=
0,f=this.mEntries;e<f.length;){var k=f[e];++e;if(k.type==a&&k.name==b&&k.number==c){if(k.usage!=d)throw new W(new Nc("Cannot use register in multiple ways yet (mat4/vec4)"));return}}e=new Ui;e.type=a;e.name=b;e.number=c;e.usage=d;this.mEntries.push(e)},addDR:function(a,b){this.add(a.type,a.toGLSL(!1),a.n,b)},addSaR:function(a,b){this.add(a.type,a.toGLSL(),a.n,b)},addSR:function(a,b,c){null==c&&(c=0);0!=a.d?(this.add(a.itype,sd.prefixFromType(a.itype,a.programType)+a.n,a.n,la.VECTOR_4),this.add(a.type,
sd.prefixFromType(a.type,a.programType)+a.o,a.o,la.VECTOR_4_ARRAY)):this.add(a.type,a.toGLSL(!1,c),a.n+c,b)},getRegisterUsage:function(a){return 0!=a.d?la.VECTOR_4_ARRAY:this.getUsage(a.type,a.toGLSL(!1),a.n)},getUsage:function(a,b,c){for(var d=0,e=this.mEntries;d<e.length;){var f=e[d];++d;if(f.type==a&&f.name==b&&f.number==c)return f.usage}return la.UNUSED},toGLSL:function(a){this.mEntries.sort(function(a,b){return a.number-b.number});this.mEntries.sort(function(a,b){return Ka.__cast(a.type,rm)-
Ka.__cast(b.type,rm)});for(var b="",c=0,d=this.mEntries.length;c<d;){var e=c++;e=this.mEntries[e];if(!(a&&2!=e.type||!a&&2==e.type)&&3!=e.type){switch(e.type){case 0:b+="attribute ";break;case 1:b+="uniform ";break;case 2:b+="\t";break;case 3:break;case 4:b+="varying ";break;case 5:b+="uniform ";break;default:throw new W(new Nc);}switch(e.usage._hx_index){case 0:Ga.info("Missing switch patten: RegisterUsage.UNUSED",{fileName:"openfl/_internal/formats/agal/AGALConverter.hx",lineNumber:746,className:"openfl._internal.formats.agal.RegisterMap",
methodName:"toGLSL"});break;case 1:b+="vec4 ";break;case 2:b+="mat4 ";break;case 3:b+="sampler2D ";break;case 5:b+="samplerCube ";break;case 7:b+="vec4 "}e.usage==la.SAMPLER_2D_ALPHA?(b+="sampler2D ",b+=r.string(e.name),b+=";\n",b+="uniform ",b+="sampler2D ",b+=r.string(e.name+"_alpha"),b+=";\n",b+="uniform ",b+="bool ",b+=r.string(e.name+"_alphaEnabled")):e.usage==la.SAMPLER_CUBE_ALPHA?(b+="samplerCube ",b+=r.string(e.name),b+=";\n",b+="uniform ",b+="samplerCube ",b+=r.string(e.name+"_alpha"),b+=
";\n",b+="uniform ",b+="bool ",b+=r.string(e.name+"_alphaEnabled")):b=e.usage==la.VECTOR_4_ARRAY?b+r.string(e.name+"[128]"):b+r.string(e.name);b+=";\n"}}return b},__class__:qh};var Ui=function(){};g["openfl._internal.formats.agal._AGALConverter.RegisterMapEntry"]=Ui;Ui.__name__="openfl._internal.formats.agal._AGALConverter.RegisterMapEntry";Ui.prototype={name:null,number:null,type:null,usage:null,__class__:Ui};var la=t["openfl._internal.formats.agal._AGALConverter.RegisterUsage"]={__ename__:"openfl._internal.formats.agal._AGALConverter.RegisterUsage",
__constructs__:"UNUSED VECTOR_4 MATRIX_4_4 SAMPLER_2D SAMPLER_2D_ALPHA SAMPLER_CUBE SAMPLER_CUBE_ALPHA VECTOR_4_ARRAY".split(" "),UNUSED:{_hx_index:0,__enum__:"openfl._internal.formats.agal._AGALConverter.RegisterUsage",toString:p},VECTOR_4:{_hx_index:1,__enum__:"openfl._internal.formats.agal._AGALConverter.RegisterUsage",toString:p},MATRIX_4_4:{_hx_index:2,__enum__:"openfl._internal.formats.agal._AGALConverter.RegisterUsage",toString:p},SAMPLER_2D:{_hx_index:3,__enum__:"openfl._internal.formats.agal._AGALConverter.RegisterUsage",
toString:p},SAMPLER_2D_ALPHA:{_hx_index:4,__enum__:"openfl._internal.formats.agal._AGALConverter.RegisterUsage",toString:p},SAMPLER_CUBE:{_hx_index:5,__enum__:"openfl._internal.formats.agal._AGALConverter.RegisterUsage",toString:p},SAMPLER_CUBE_ALPHA:{_hx_index:6,__enum__:"openfl._internal.formats.agal._AGALConverter.RegisterUsage",toString:p},VECTOR_4_ARRAY:{_hx_index:7,__enum__:"openfl._internal.formats.agal._AGALConverter.RegisterUsage",toString:p}},Ti=function(){};g["openfl._internal.formats.agal._AGALConverter.SamplerRegister"]=
Ti;Ti.__name__="openfl._internal.formats.agal._AGALConverter.SamplerRegister";Ti.parse=function(a,b){var c=new Ti;c.programType=b;b=new pd(a.high>>31,a.high>>28);c.f=b.low&15;b=new pd(a.high>>31,a.high>>24);c.m=b.low&15;b=new pd(a.high>>31,a.high>>20);c.w=b.low&15;b=new pd(a.high>>31,a.high>>16);c.s=b.low&15;b=new pd(a.high>>31,a.high>>12);c.d=b.low&15;b=new pd(a.high>>31,a.high>>8);c.t=b.low&15;b=new pd(a.high>>31,a.high>>0);c.type=b.low&15;b=new pd(a.high>>16,a.high<<16|a.low>>>16);c.b=b.low&255;
c.n=a.low&65535;return c};Ti.prototype={b:null,d:null,f:null,m:null,n:null,programType:null,s:null,t:null,type:null,w:null,toGLSL:function(){return sd.prefixFromType(this.type,this.programType)+this.n},toSamplerState:function(){switch(this.f){case 0:var a=5;break;case 1:a=4;break;default:throw new W(new Nc);}switch(this.m){case 0:var b=2;break;case 1:b=1;break;case 2:b=0;break;default:throw new W(new Nc);}switch(this.w){case 0:var c=0;break;case 1:c=2;break;default:throw new W(new Nc);}return new rh(c,
a,b,(this.b<<24>>24)/8,4==(this.s&4),1==(this.s&1),2==this.t)},__class__:Ti};var Ag=function(){};g["openfl._internal.formats.agal._AGALConverter.SourceRegister"]=Ag;Ag.__name__="openfl._internal.formats.agal._AGALConverter.SourceRegister";Ag.parse=function(a,b,c){var d=new Ag;d.programType=b;b=new pd(a.high>>31,a.high>>31);d.d=b.low&1;b=new pd(a.high>>31,a.high>>16);d.q=b.low&3;b=new pd(a.high>>31,a.high>>8);d.itype=b.low&15;b=new pd(a.high>>31,a.high>>0);d.type=b.low&15;b=new pd(a.high>>24,a.high<<
8|a.low>>>24);d.s=b.low&255;b=new pd(a.high>>16,a.high<<16|a.low>>>16);d.o=b.low&255;d.n=a.low&65535;d.sourceMask=c;return d};Ag.prototype={d:null,itype:null,n:null,o:null,programType:null,q:null,s:null,sourceMask:null,type:null,toGLSL:function(a,b){null==b&&(b=0);null==a&&(a=!0);if(3==this.type)return this.programType==zg.VERTEX?"gl_Position":"gl_FragColor";var c=228==this.s&&15==this.sourceMask,d="";if(5!=this.type&&!c){if(0!=(this.sourceMask&1))switch(this.s&3){case 0:d+="x";break;case 1:d+="y";
break;case 2:d+="z";break;case 3:d+="w"}if(0!=(this.sourceMask&2))switch(this.s>>2&3){case 0:d+="x";break;case 1:d+="y";break;case 2:d+="z";break;case 3:d+="w"}if(0!=(this.sourceMask&4))switch(this.s>>4&3){case 0:d+="x";break;case 1:d+="y";break;case 2:d+="z";break;case 3:d+="w"}if(0!=(this.sourceMask&8))switch(this.s>>6&3){case 0:d+="x";break;case 1:d+="y";break;case 2:d+="z";break;case 3:d+="w"}}c=sd.prefixFromType(this.type,this.programType);if(0==this.d)c+=this.n+b;else{c+=this.o;var e="";switch(this.q){case 0:e=
"x";break;case 1:e="y";break;case 2:e="z";break;case 3:e="w"}e=sd.prefixFromType(this.itype,this.programType)+this.n+"."+e;c+="[ int("+e+") +"+b+"]"}a&&""!=d&&(c+="."+d);return c},__class__:Ag};var Oa=function(){};g["openfl._internal.formats.html.HTMLParser"]=Oa;Oa.__name__="openfl._internal.formats.html.HTMLParser";Oa.parse=function(a,b,c){a=a.replace(Oa.__regexBreakTag.r,"\n");a=a.replace(Oa.__regexEntities[0].r,'"');a=a.replace(Oa.__regexEntities[1].r,"'");a=a.replace(Oa.__regexEntities[2].r,"&");
a=a.replace(Oa.__regexEntities[5].r," ");var d=a.split("<");if(1==d.length)a=a.replace(Oa.__regexHTMLTag.r,""),1<c.get_length()&&c.splice(1,c.get_length()-1),a=a.replace(Oa.__regexEntities[3].r,"<"),a=a.replace(Oa.__regexEntities[4].r,">"),c=c.get(0),c.format=b,c.start=0,c.end=a.length;else{c.splice(0,c.get_length());a="";for(var e,f=0,k=d.length;f<k;){var m=f++;e=d[m];e=e.replace(Oa.__regexEntities[3].r,"<");e=e.replace(Oa.__regexEntities[4].r,">");d[m]=e}e=[b.clone()];f=[];m=!1;for(k=0;k<d.length;){var h=
d[k];++k;if(""!=h){var n="/"==ra.substr(h,0,1),g=h.indexOf(">"),l=g+1,p=h.indexOf(" ");p=h.substring(n?1:0,-1<p&&p<g?p:g);if(n)0==f.length||p.toLowerCase()!=f[f.length-1].toLowerCase()?Ga.info("Invalid HTML, unexpected closing tag ignored: "+p,{fileName:"openfl/_internal/formats/html/HTMLParser.hx",lineNumber:97,className:"openfl._internal.formats.html.HTMLParser",methodName:"parse"}):(f.pop(),e.pop(),n=e[e.length-1].clone(),"p"==p.toLowerCase()&&0<c.get_length()&&(a+="\n",m=!0,c.get(c.get_length()-
1).end++),l<h.length&&(m=ra.substr(h,l,null),c.push(new sh(n,a.length,a.length+m.length)),a+=m,m=!1));else if(n=e[e.length-1].clone(),-1<g){switch(p.toLowerCase()){case "a":Oa.__regexHref.match(h)&&(n.url=Oa.__getAttributeMatch(Oa.__regexHref));break;case "b":n.bold=!0;break;case "em":case "i":n.italic=!0;break;case "font":Oa.__regexFace.match(h)&&(n.font=Oa.__getAttributeMatch(Oa.__regexFace));Oa.__regexColor.match(h)&&(n.color=r.parseInt("0x"+Oa.__getAttributeMatch(Oa.__regexColor)));if(Oa.__regexSize.match(h)){g=
Oa.__getAttributeMatch(Oa.__regexSize);var y=ra.cca(g,0);n.size=43==y||45==y?(2<=e.length?e[e.length-2]:b).size+r.parseInt(g):r.parseInt(g)}break;case "p":0<c.get_length()&&!m&&(a+="\n");Oa.__regexAlign.match(h)&&(g=Oa.__getAttributeMatch(Oa.__regexAlign).toLowerCase(),n.align=gm.fromString(g));break;case "textformat":Oa.__regexBlockIndent.match(h)&&(n.blockIndent=r.parseInt(Oa.__getAttributeMatch(Oa.__regexBlockIndent)));Oa.__regexIndent.match(h)&&(n.indent=r.parseInt(Oa.__getAttributeMatch(Oa.__regexIndent)));
Oa.__regexLeading.match(h)&&(n.leading=r.parseInt(Oa.__getAttributeMatch(Oa.__regexLeading)));Oa.__regexLeftMargin.match(h)&&(n.leftMargin=r.parseInt(Oa.__getAttributeMatch(Oa.__regexLeftMargin)));Oa.__regexRightMargin.match(h)&&(n.rightMargin=r.parseInt(Oa.__getAttributeMatch(Oa.__regexRightMargin)));if(Oa.__regexTabStops.match(h)){g=Oa.__getAttributeMatch(Oa.__regexTabStops).split(" ");y=[];for(var q=0;q<g.length;){var t=g[q];++q;y.push(r.parseInt(t))}n.tabStops=y}break;case "u":n.underline=!0}e.push(n);
f.push(p);l<h.length?(m=h.substring(l),c.push(new sh(n,a.length,a.length+m.length)),a+=m,m=!1):0<c.get_length()&&c.get(c.get_length()-1).end++}else c.push(new sh(n,a.length,a.length+h.length)),a+=h,m=!1}}0==c.get_length()&&c.push(new sh(e[0],0,0))}return a};Oa.__getAttributeMatch=function(a){return null!=a.matched(2)?a.matched(2):a.matched(3)};t["openfl._internal.formats.swf.FilterType"]={__ename__:"openfl._internal.formats.swf.FilterType",__constructs__:["BlurFilter","ColorMatrixFilter","DropShadowFilter",
"GlowFilter"],BlurFilter:(q=function(a,b,c){return{_hx_index:0,blurX:a,blurY:b,quality:c,__enum__:"openfl._internal.formats.swf.FilterType",toString:p}},q.__params__=["blurX","blurY","quality"],q),ColorMatrixFilter:(q=function(a){return{_hx_index:1,matrix:a,__enum__:"openfl._internal.formats.swf.FilterType",toString:p}},q.__params__=["matrix"],q),DropShadowFilter:(q=function(a,b,c,d,e,f,k,m,h,n,g){return{_hx_index:2,distance:a,angle:b,color:c,alpha:d,blurX:e,blurY:f,strength:k,quality:m,inner:h,knockout:n,
hideObject:g,__enum__:"openfl._internal.formats.swf.FilterType",toString:p}},q.__params__="distance angle color alpha blurX blurY strength quality inner knockout hideObject".split(" "),q),GlowFilter:(q=function(a,b,c,d,e,f,k,m){return{_hx_index:3,color:a,alpha:b,blurX:c,blurY:d,strength:e,quality:f,inner:k,knockout:m,__enum__:"openfl._internal.formats.swf.FilterType",toString:p}},q.__params__="color alpha blurX blurY strength quality inner knockout".split(" "),q)};var Ad=function(){this.symbols=new Zb;
this.symbolsByClassName=new Ra};g["openfl._internal.formats.swf.SWFLite"]=Ad;Ad.__name__="openfl._internal.formats.swf.SWFLite";Ad.resolveClass=function(a){var b=g[a];null==b&&(b=Y.replace(a,"openfl._legacy","openfl"),b=g[b]);null==b&&(a=Y.replace(a,"openfl._v2","openfl"),b=g[a]);return b};Ad.resolveEnum=function(a){var b=t[a];null==b&&(b=Y.replace(a,"openfl._legacy","openfl"),b=t[b]);null==b&&(a=Y.replace(a,"openfl._v2","openfl"),b=t[a]);return b};Ad.unserialize=function(a){if(null==a)return null;
a=new Tc(a);a.setResolver({resolveClass:Ad.resolveClass,resolveEnum:Ad.resolveEnum});a=a.unserialize();null!=a&&a.__init();return a};Ad.prototype={frameRate:null,library:null,root:null,symbols:null,symbolsByClassName:null,createButton:function(a){return null},createMovieClip:function(a){null==a&&(a="");if(""==a)return this.root.__createObject(this);var b=this.symbolsByClassName;a=null!=F[a]?b.getReserved(a):b.h[a];return null!=a&&a instanceof Bg?Ka.__cast(a,Bg).__createObject(this):null},getBitmapData:function(a){var b=
this.symbolsByClassName;a=null!=F[a]?b.getReserved(a):b.h[a];return null!=a&&a instanceof Od?Rc.getBitmapData(a.path):null},hasSymbol:function(a){var b=this.symbolsByClassName;return null!=F[a]?b.existsReserved(a):b.h.hasOwnProperty(a)},serialize:function(){var a=new Sc;a.serialize(this);return a.toString()},__init:function(){if(null!=this.symbols){null==this.symbolsByClassName&&(this.symbolsByClassName=new Ra);for(var a=this.symbols.iterator();a.hasNext();){var b=a.next();if(null!=b&&null!=b.className){var c=
b.className,d=this.symbolsByClassName;null!=F[c]?d.setReserved(c,b):d.h[c]=b}}}},__class__:Ad};var Pd=function(){ac.call(this)};g["openfl.utils.AssetLibrary"]=Pd;Pd.__name__="openfl.utils.AssetLibrary";Pd.fromManifest=function(a){a=ac.fromManifest(a);if(null!=a){if(a instanceof Pd)return a;var b=new Pd;b.__proxy=a;return b}return null};Pd.__super__=ac;Pd.prototype=v(ac.prototype,{__proxy:null,exists:function(a,b){return null!=this.__proxy?this.__proxy.exists(a,b):ac.prototype.exists.call(this,a,b)},
getAsset:function(a,b){return null!=this.__proxy?this.__proxy.getAsset(a,b):ac.prototype.getAsset.call(this,a,b)},getAudioBuffer:function(a){return null!=this.__proxy?this.__proxy.getAudioBuffer(a):ac.prototype.getAudioBuffer.call(this,a)},getBytes:function(a){return null!=this.__proxy?this.__proxy.getBytes(a):ac.prototype.getBytes.call(this,a)},getFont:function(a){return null!=this.__proxy?this.__proxy.getFont(a):ac.prototype.getFont.call(this,a)},getImage:function(a){return null!=this.__proxy?this.__proxy.getImage(a):
ac.prototype.getImage.call(this,a)},getText:function(a){return null!=this.__proxy?this.__proxy.getText(a):ac.prototype.getText.call(this,a)},isLocal:function(a,b){return null!=this.__proxy?this.__proxy.isLocal(a,b):ac.prototype.isLocal.call(this,a,b)},load:function(){return null!=this.__proxy?this.__proxy.load():ac.prototype.load.call(this)},loadAudioBuffer:function(a){return null!=this.__proxy?this.__proxy.loadAudioBuffer(a):ac.prototype.loadAudioBuffer.call(this,a)},loadBytes:function(a){return null!=
this.__proxy?this.__proxy.loadBytes(a):ac.prototype.loadBytes.call(this,a)},loadFont:function(a){return null!=this.__proxy?this.__proxy.loadFont(a):ac.prototype.loadFont.call(this,a)},loadImage:function(a){return null!=this.__proxy?this.__proxy.loadImage(a):ac.prototype.loadImage.call(this,a)},loadText:function(a){return null!=this.__proxy?this.__proxy.loadText(a):ac.prototype.loadText.call(this,a)},unload:function(){null!=this.__proxy?this.__proxy.unload():ac.prototype.unload.call(this)},__class__:Pd});
var Vi=function(a,b){ac.call(this);this.id=a;this.instanceID=null!=b?b:a;this.alphaCheck=new Ra;this.imageClassNames=new Ra;this.rootPath=""};g["openfl._internal.formats.swf.SWFLiteLibrary"]=Vi;Vi.__name__="openfl._internal.formats.swf.SWFLiteLibrary";Vi.__super__=Pd;Vi.prototype=v(Pd.prototype,{alphaCheck:null,id:null,imageClassNames:null,instanceID:null,preloading:null,rootPath:null,swf:null,exists:function(a,b){return null==this.swf?!1:""==a&&"MOVIE_CLIP"==b?!0:"IMAGE"!=b&&"MOVIE_CLIP"!=b||null==
this.swf?!1:this.swf.hasSymbol(a)},getImage:function(a){var b=this.imageClassNames;if(null!=F[a]?b.existsReserved(a):b.h.hasOwnProperty(a))b=this.imageClassNames,a=null!=F[a]?b.getReserved(a):b.h[a];b=this.alphaCheck;if(null!=F[a]?!b.existsReserved(a):!b.h.hasOwnProperty(a)){for(var c=this.swf.symbols.iterator();c.hasNext();)if(b=c.next(),b instanceof Od&&Ka.__cast(b,Od).path==a&&null!=b.alpha){c=Pd.prototype.getImage.call(this,a);var d=Pd.prototype.getImage.call(this,b.alpha);this.__copyChannel(c,
d);d=this.cachedImages;null!=F[a]?d.setReserved(a,c):d.h[a]=c;this.cachedImages.remove(b.alpha);b=this.alphaCheck;null!=F[a]?b.setReserved(a,!0):b.h[a]=!0;return c}b=this.alphaCheck;null!=F[a]?b.setReserved(a,!0):b.h[a]=!0}return Pd.prototype.getImage.call(this,a)},getMovieClip:function(a){return null!=this.swf?this.swf.createMovieClip(a):null},isLocal:function(a,b){return!0},load:function(){var a=this;if(null!=this.id){var b=this.id,c=this.preload;null!=F[b]?c.setReserved(b,!0):c.h[b]=!0}var d=new Vc;
this.preloading=!0;var e=function(b){var c=a.id,e=a.cachedText;null!=F[c]?e.setReserved(c,b):e.h[c]=b;a.swf=Ad.unserialize(b);a.swf.library=a;for(b=a.swf.symbols.iterator();b.hasNext();)if(c=b.next(),c instanceof Od&&(e=c,null!=e.className)){c=e.className;e=e.path;var f=a.imageClassNames;null!=F[c]?f.setReserved(c,e):f.h[c]=e}b=a.instanceID;c=a.swf;e=Ad.instances;null!=F[b]?e.setReserved(b,c):e.h[b]=c;a.__load().onProgress(u(d,d.progress)).onError(u(d,d.error)).onComplete(function(b){a.preloading=
!1;d.complete(a)})};if(Rc.exists(this.id)){for(b=this.paths.keys();b.hasNext();){c=b.next();var f=this.preload;null!=F[c]?f.setReserved(c,!0):f.h[c]=!0}this.loadText(this.id).onError(u(d,d.error)).onComplete(e)}else{for(b=this.paths.keys();b.hasNext();)c=b.next(),f=this.preload,null!=F[c]?f.setReserved(c,!0):f.h[c]=!0;b=null;b=this.id;c=this.paths;(null!=F[b]?c.existsReserved(b):c.h.hasOwnProperty(b))?(b=this.id,c=this.paths,b=null!=F[b]?c.getReserved(b):c.h[b]):b=null!=this.rootPath&&""!=this.rootPath?
this.rootPath+"/"+this.id:this.id;var k=new Wj;k.addEventListener("complete",function(a){e(k.data)});k.addEventListener("ioError",function(a){d.error(a)});k.load(new Xj(b))}return d.future},loadImage:function(a){var b=this,c=this.imageClassNames;if(null!=F[a]?c.existsReserved(a):c.h.hasOwnProperty(a))c=this.imageClassNames,a=null!=F[a]?c.getReserved(a):c.h[a];this.preloading?c=!1:(c=this.alphaCheck,c=!(null!=F[a]?c.existsReserved(a):c.h.hasOwnProperty(a)));if(c)for(c=this.swf.symbols.iterator();c.hasNext();){var d=
c.next();if(d instanceof Od&&Ka.__cast(d,Od).path==a){d=[d];if(null!=d[0].alpha)return c=[new Vc],this.__loadImage(a).onError((q=c[0],u(q,q.error))).onComplete(function(c,d){return function(e){b.__loadImage(d[0].alpha).onError((q=c[0],u(q,q.error))).onComplete(function(c,d){return function(f){b.__copyChannel(e,f);f=b.cachedImages;null!=F[a]?f.setReserved(a,e):f.h[a]=e;b.cachedImages.remove(d[0].alpha);f=b.alphaCheck;null!=F[a]?f.setReserved(a,!0):f.h[a]=!0;c[0].complete(e)}}(c,d))}}(c,d)),c[0].future;
d=this.alphaCheck;null!=F[a]?d.setReserved(a,!0):d.h[a]=!0}}return Pd.prototype.loadImage.call(this,a)},unload:function(){if(null!=this.swf){var a=this.instanceID;var b=Ad.instances;(null!=F[a]?b.existsReserved(a):b.h.hasOwnProperty(a))?(a=this.instanceID,b=Ad.instances,a=(null!=F[a]?b.getReserved(a):b.h[a])==this.swf):a=!1;a&&Ad.instances.remove(this.instanceID);for(a=this.swf.symbols.iterator();a.hasNext();)b=a.next(),b instanceof Od&&Rc.cache.removeBitmapData(b.path)}},__copyChannel:function(a,
b){null!=b&&a.copyChannel(b,b.get_rect(),new of,oi.RED,oi.ALPHA);a.buffer.premultiplied=!0;a.set_premultiplied(!1)},__fromManifest:function(a){this.rootPath=a.rootPath;Pd.prototype.__fromManifest.call(this,a);this.bytesTotal=0;for(a=this.paths.keys();a.hasNext();){var b=a.next(),c=this.sizes;this.bytesTotal+=null!=F[b]?c.getReserved(b):c.h[b]}},__load:function(){return Pd.prototype.load.call(this)},__loadImage:function(a){return Pd.prototype.loadImage.call(this,a)},__class__:Vi});t["openfl._internal.formats.swf.ShapeCommand"]=
{__ename__:"openfl._internal.formats.swf.ShapeCommand",__constructs__:"BeginBitmapFill BeginFill BeginGradientFill CurveTo EndFill LineStyle LineTo MoveTo".split(" "),BeginBitmapFill:(q=function(a,b,c,d){return{_hx_index:0,bitmap:a,matrix:b,repeat:c,smooth:d,__enum__:"openfl._internal.formats.swf.ShapeCommand",toString:p}},q.__params__=["bitmap","matrix","repeat","smooth"],q),BeginFill:(q=function(a,b){return{_hx_index:1,color:a,alpha:b,__enum__:"openfl._internal.formats.swf.ShapeCommand",toString:p}},
q.__params__=["color","alpha"],q),BeginGradientFill:(q=function(a,b,c,d,e,f,k,m){return{_hx_index:2,fillType:a,colors:b,alphas:c,ratios:d,matrix:e,spreadMethod:f,interpolationMethod:k,focalPointRatio:m,__enum__:"openfl._internal.formats.swf.ShapeCommand",toString:p}},q.__params__="fillType colors alphas ratios matrix spreadMethod interpolationMethod focalPointRatio".split(" "),q),CurveTo:(q=function(a,b,c,d){return{_hx_index:3,controlX:a,controlY:b,anchorX:c,anchorY:d,__enum__:"openfl._internal.formats.swf.ShapeCommand",
toString:p}},q.__params__=["controlX","controlY","anchorX","anchorY"],q),EndFill:{_hx_index:4,__enum__:"openfl._internal.formats.swf.ShapeCommand",toString:p},LineStyle:(q=function(a,b,c,d,e,f,k,m){return{_hx_index:5,thickness:a,color:b,alpha:c,pixelHinting:d,scaleMode:e,caps:f,joints:k,miterLimit:m,__enum__:"openfl._internal.formats.swf.ShapeCommand",toString:p}},q.__params__="thickness color alpha pixelHinting scaleMode caps joints miterLimit".split(" "),q),LineTo:(q=function(a,b){return{_hx_index:6,
x:a,y:b,__enum__:"openfl._internal.formats.swf.ShapeCommand",toString:p}},q.__params__=["x","y"],q),MoveTo:(q=function(a,b){return{_hx_index:7,x:a,y:b,__enum__:"openfl._internal.formats.swf.ShapeCommand",toString:p}},q.__params__=["x","y"],q)};var Yc=function(){null==Yc.empty?(this.types=[],this.b=[],this.i=[],this.f=[],this.o=[],this.ff=[],this.ii=[],this.copyOnWrite=!0):this.clear()};g["openfl._internal.renderer.DrawCommandBuffer"]=Yc;Yc.__name__="openfl._internal.renderer.DrawCommandBuffer";Yc.prototype=
{types:null,b:null,copyOnWrite:null,f:null,ff:null,i:null,ii:null,o:null,append:function(a){if(0==this.get_length())return this.types=a.types,this.b=a.b,this.i=a.i,this.f=a.f,this.o=a.o,this.ff=a.ff,this.ii=a.ii,this.copyOnWrite=a.copyOnWrite=!0,a;for(var b=new de(a),c=0,d=a.types;c<d.length;){var e=d[c];++c;switch(e._hx_index){case 0:switch(b.prev._hx_index){case 0:b.oPos+=2;b.bPos+=2;break;case 1:b.iPos+=1;b.fPos+=1;break;case 2:b.oPos+=4;b.iiPos+=2;b.ffPos+=1;b.fPos+=1;break;case 3:b.oPos+=1;break;
case 4:b.fPos+=6;break;case 5:b.fPos+=4;break;case 6:b.fPos+=3;break;case 7:b.fPos+=4;break;case 8:b.oPos+=3;break;case 9:b.fPos+=4;break;case 10:b.fPos+=5;b.oPos+=1;break;case 12:b.oPos+=4;break;case 14:b.oPos+=2;b.bPos+=2;break;case 15:b.oPos+=4;b.iiPos+=2;b.ffPos+=1;b.fPos+=1;break;case 16:b.oPos+=4;b.iPos+=1;b.fPos+=2;b.bPos+=1;break;case 17:b.fPos+=2;break;case 18:b.fPos+=2;break;case 19:b.oPos+=1;break;case 20:b.oPos+=1}b.prev=Z.BEGIN_BITMAP_FILL;e=b;this.beginBitmapFill(e.buffer.o[e.oPos],
e.buffer.o[e.oPos+1],e.buffer.b[e.bPos],e.buffer.b[e.bPos+1]);break;case 1:switch(b.prev._hx_index){case 0:b.oPos+=2;b.bPos+=2;break;case 1:b.iPos+=1;b.fPos+=1;break;case 2:b.oPos+=4;b.iiPos+=2;b.ffPos+=1;b.fPos+=1;break;case 3:b.oPos+=1;break;case 4:b.fPos+=6;break;case 5:b.fPos+=4;break;case 6:b.fPos+=3;break;case 7:b.fPos+=4;break;case 8:b.oPos+=3;break;case 9:b.fPos+=4;break;case 10:b.fPos+=5;b.oPos+=1;break;case 12:b.oPos+=4;break;case 14:b.oPos+=2;b.bPos+=2;break;case 15:b.oPos+=4;b.iiPos+=
2;b.ffPos+=1;b.fPos+=1;break;case 16:b.oPos+=4;b.iPos+=1;b.fPos+=2;b.bPos+=1;break;case 17:b.fPos+=2;break;case 18:b.fPos+=2;break;case 19:b.oPos+=1;break;case 20:b.oPos+=1}b.prev=Z.BEGIN_FILL;e=b;this.beginFill(e.buffer.i[e.iPos],e.buffer.f[e.fPos]);break;case 2:switch(b.prev._hx_index){case 0:b.oPos+=2;b.bPos+=2;break;case 1:b.iPos+=1;b.fPos+=1;break;case 2:b.oPos+=4;b.iiPos+=2;b.ffPos+=1;b.fPos+=1;break;case 3:b.oPos+=1;break;case 4:b.fPos+=6;break;case 5:b.fPos+=4;break;case 6:b.fPos+=3;break;
case 7:b.fPos+=4;break;case 8:b.oPos+=3;break;case 9:b.fPos+=4;break;case 10:b.fPos+=5;b.oPos+=1;break;case 12:b.oPos+=4;break;case 14:b.oPos+=2;b.bPos+=2;break;case 15:b.oPos+=4;b.iiPos+=2;b.ffPos+=1;b.fPos+=1;break;case 16:b.oPos+=4;b.iPos+=1;b.fPos+=2;b.bPos+=1;break;case 17:b.fPos+=2;break;case 18:b.fPos+=2;break;case 19:b.oPos+=1;break;case 20:b.oPos+=1}b.prev=Z.BEGIN_GRADIENT_FILL;e=b;this.beginGradientFill(e.buffer.o[e.oPos],e.buffer.ii[e.iiPos],e.buffer.ff[e.ffPos],e.buffer.ii[e.iiPos+1],
e.buffer.o[e.oPos+1],e.buffer.o[e.oPos+2],e.buffer.o[e.oPos+3],e.buffer.f[e.fPos]);break;case 3:switch(b.prev._hx_index){case 0:b.oPos+=2;b.bPos+=2;break;case 1:b.iPos+=1;b.fPos+=1;break;case 2:b.oPos+=4;b.iiPos+=2;b.ffPos+=1;b.fPos+=1;break;case 3:b.oPos+=1;break;case 4:b.fPos+=6;break;case 5:b.fPos+=4;break;case 6:b.fPos+=3;break;case 7:b.fPos+=4;break;case 8:b.oPos+=3;break;case 9:b.fPos+=4;break;case 10:b.fPos+=5;b.oPos+=1;break;case 12:b.oPos+=4;break;case 14:b.oPos+=2;b.bPos+=2;break;case 15:b.oPos+=
4;b.iiPos+=2;b.ffPos+=1;b.fPos+=1;break;case 16:b.oPos+=4;b.iPos+=1;b.fPos+=2;b.bPos+=1;break;case 17:b.fPos+=2;break;case 18:b.fPos+=2;break;case 19:b.oPos+=1;break;case 20:b.oPos+=1}b.prev=Z.BEGIN_SHADER_FILL;e=b;this.beginShaderFill(e.buffer.o[e.oPos]);break;case 4:switch(b.prev._hx_index){case 0:b.oPos+=2;b.bPos+=2;break;case 1:b.iPos+=1;b.fPos+=1;break;case 2:b.oPos+=4;b.iiPos+=2;b.ffPos+=1;b.fPos+=1;break;case 3:b.oPos+=1;break;case 4:b.fPos+=6;break;case 5:b.fPos+=4;break;case 6:b.fPos+=3;
break;case 7:b.fPos+=4;break;case 8:b.oPos+=3;break;case 9:b.fPos+=4;break;case 10:b.fPos+=5;b.oPos+=1;break;case 12:b.oPos+=4;break;case 14:b.oPos+=2;b.bPos+=2;break;case 15:b.oPos+=4;b.iiPos+=2;b.ffPos+=1;b.fPos+=1;break;case 16:b.oPos+=4;b.iPos+=1;b.fPos+=2;b.bPos+=1;break;case 17:b.fPos+=2;break;case 18:b.fPos+=2;break;case 19:b.oPos+=1;break;case 20:b.oPos+=1}b.prev=Z.CUBIC_CURVE_TO;e=b;this.cubicCurveTo(e.buffer.f[e.fPos],e.buffer.f[e.fPos+1],e.buffer.f[e.fPos+2],e.buffer.f[e.fPos+3],e.buffer.f[e.fPos+
4],e.buffer.f[e.fPos+5]);break;case 5:switch(b.prev._hx_index){case 0:b.oPos+=2;b.bPos+=2;break;case 1:b.iPos+=1;b.fPos+=1;break;case 2:b.oPos+=4;b.iiPos+=2;b.ffPos+=1;b.fPos+=1;break;case 3:b.oPos+=1;break;case 4:b.fPos+=6;break;case 5:b.fPos+=4;break;case 6:b.fPos+=3;break;case 7:b.fPos+=4;break;case 8:b.oPos+=3;break;case 9:b.fPos+=4;break;case 10:b.fPos+=5;b.oPos+=1;break;case 12:b.oPos+=4;break;case 14:b.oPos+=2;b.bPos+=2;break;case 15:b.oPos+=4;b.iiPos+=2;b.ffPos+=1;b.fPos+=1;break;case 16:b.oPos+=
4;b.iPos+=1;b.fPos+=2;b.bPos+=1;break;case 17:b.fPos+=2;break;case 18:b.fPos+=2;break;case 19:b.oPos+=1;break;case 20:b.oPos+=1}b.prev=Z.CURVE_TO;e=b;this.curveTo(e.buffer.f[e.fPos],e.buffer.f[e.fPos+1],e.buffer.f[e.fPos+2],e.buffer.f[e.fPos+3]);break;case 6:switch(b.prev._hx_index){case 0:b.oPos+=2;b.bPos+=2;break;case 1:b.iPos+=1;b.fPos+=1;break;case 2:b.oPos+=4;b.iiPos+=2;b.ffPos+=1;b.fPos+=1;break;case 3:b.oPos+=1;break;case 4:b.fPos+=6;break;case 5:b.fPos+=4;break;case 6:b.fPos+=3;break;case 7:b.fPos+=
4;break;case 8:b.oPos+=3;break;case 9:b.fPos+=4;break;case 10:b.fPos+=5;b.oPos+=1;break;case 12:b.oPos+=4;break;case 14:b.oPos+=2;b.bPos+=2;break;case 15:b.oPos+=4;b.iiPos+=2;b.ffPos+=1;b.fPos+=1;break;case 16:b.oPos+=4;b.iPos+=1;b.fPos+=2;b.bPos+=1;break;case 17:b.fPos+=2;break;case 18:b.fPos+=2;break;case 19:b.oPos+=1;break;case 20:b.oPos+=1}b.prev=Z.DRAW_CIRCLE;e=b;this.drawCircle(e.buffer.f[e.fPos],e.buffer.f[e.fPos+1],e.buffer.f[e.fPos+2]);break;case 7:switch(b.prev._hx_index){case 0:b.oPos+=
2;b.bPos+=2;break;case 1:b.iPos+=1;b.fPos+=1;break;case 2:b.oPos+=4;b.iiPos+=2;b.ffPos+=1;b.fPos+=1;break;case 3:b.oPos+=1;break;case 4:b.fPos+=6;break;case 5:b.fPos+=4;break;case 6:b.fPos+=3;break;case 7:b.fPos+=4;break;case 8:b.oPos+=3;break;case 9:b.fPos+=4;break;case 10:b.fPos+=5;b.oPos+=1;break;case 12:b.oPos+=4;break;case 14:b.oPos+=2;b.bPos+=2;break;case 15:b.oPos+=4;b.iiPos+=2;b.ffPos+=1;b.fPos+=1;break;case 16:b.oPos+=4;b.iPos+=1;b.fPos+=2;b.bPos+=1;break;case 17:b.fPos+=2;break;case 18:b.fPos+=
2;break;case 19:b.oPos+=1;break;case 20:b.oPos+=1}b.prev=Z.DRAW_ELLIPSE;e=b;this.drawEllipse(e.buffer.f[e.fPos],e.buffer.f[e.fPos+1],e.buffer.f[e.fPos+2],e.buffer.f[e.fPos+3]);break;case 8:switch(b.prev._hx_index){case 0:b.oPos+=2;b.bPos+=2;break;case 1:b.iPos+=1;b.fPos+=1;break;case 2:b.oPos+=4;b.iiPos+=2;b.ffPos+=1;b.fPos+=1;break;case 3:b.oPos+=1;break;case 4:b.fPos+=6;break;case 5:b.fPos+=4;break;case 6:b.fPos+=3;break;case 7:b.fPos+=4;break;case 8:b.oPos+=3;break;case 9:b.fPos+=4;break;case 10:b.fPos+=
5;b.oPos+=1;break;case 12:b.oPos+=4;break;case 14:b.oPos+=2;b.bPos+=2;break;case 15:b.oPos+=4;b.iiPos+=2;b.ffPos+=1;b.fPos+=1;break;case 16:b.oPos+=4;b.iPos+=1;b.fPos+=2;b.bPos+=1;break;case 17:b.fPos+=2;break;case 18:b.fPos+=2;break;case 19:b.oPos+=1;break;case 20:b.oPos+=1}b.prev=Z.DRAW_QUADS;e=b;this.drawQuads(e.buffer.o[e.oPos],e.buffer.o[e.oPos+1],e.buffer.o[e.oPos+2]);break;case 9:switch(b.prev._hx_index){case 0:b.oPos+=2;b.bPos+=2;break;case 1:b.iPos+=1;b.fPos+=1;break;case 2:b.oPos+=4;b.iiPos+=
2;b.ffPos+=1;b.fPos+=1;break;case 3:b.oPos+=1;break;case 4:b.fPos+=6;break;case 5:b.fPos+=4;break;case 6:b.fPos+=3;break;case 7:b.fPos+=4;break;case 8:b.oPos+=3;break;case 9:b.fPos+=4;break;case 10:b.fPos+=5;b.oPos+=1;break;case 12:b.oPos+=4;break;case 14:b.oPos+=2;b.bPos+=2;break;case 15:b.oPos+=4;b.iiPos+=2;b.ffPos+=1;b.fPos+=1;break;case 16:b.oPos+=4;b.iPos+=1;b.fPos+=2;b.bPos+=1;break;case 17:b.fPos+=2;break;case 18:b.fPos+=2;break;case 19:b.oPos+=1;break;case 20:b.oPos+=1}b.prev=Z.DRAW_RECT;
e=b;this.drawRect(e.buffer.f[e.fPos],e.buffer.f[e.fPos+1],e.buffer.f[e.fPos+2],e.buffer.f[e.fPos+3]);break;case 10:switch(b.prev._hx_index){case 0:b.oPos+=2;b.bPos+=2;break;case 1:b.iPos+=1;b.fPos+=1;break;case 2:b.oPos+=4;b.iiPos+=2;b.ffPos+=1;b.fPos+=1;break;case 3:b.oPos+=1;break;case 4:b.fPos+=6;break;case 5:b.fPos+=4;break;case 6:b.fPos+=3;break;case 7:b.fPos+=4;break;case 8:b.oPos+=3;break;case 9:b.fPos+=4;break;case 10:b.fPos+=5;b.oPos+=1;break;case 12:b.oPos+=4;break;case 14:b.oPos+=2;b.bPos+=
2;break;case 15:b.oPos+=4;b.iiPos+=2;b.ffPos+=1;b.fPos+=1;break;case 16:b.oPos+=4;b.iPos+=1;b.fPos+=2;b.bPos+=1;break;case 17:b.fPos+=2;break;case 18:b.fPos+=2;break;case 19:b.oPos+=1;break;case 20:b.oPos+=1}b.prev=Z.DRAW_ROUND_RECT;e=b;this.drawRoundRect(e.buffer.f[e.fPos],e.buffer.f[e.fPos+1],e.buffer.f[e.fPos+2],e.buffer.f[e.fPos+3],e.buffer.f[e.fPos+4],e.buffer.o[e.oPos]);break;case 12:switch(b.prev._hx_index){case 0:b.oPos+=2;b.bPos+=2;break;case 1:b.iPos+=1;b.fPos+=1;break;case 2:b.oPos+=4;
b.iiPos+=2;b.ffPos+=1;b.fPos+=1;break;case 3:b.oPos+=1;break;case 4:b.fPos+=6;break;case 5:b.fPos+=4;break;case 6:b.fPos+=3;break;case 7:b.fPos+=4;break;case 8:b.oPos+=3;break;case 9:b.fPos+=4;break;case 10:b.fPos+=5;b.oPos+=1;break;case 12:b.oPos+=4;break;case 14:b.oPos+=2;b.bPos+=2;break;case 15:b.oPos+=4;b.iiPos+=2;b.ffPos+=1;b.fPos+=1;break;case 16:b.oPos+=4;b.iPos+=1;b.fPos+=2;b.bPos+=1;break;case 17:b.fPos+=2;break;case 18:b.fPos+=2;break;case 19:b.oPos+=1;break;case 20:b.oPos+=1}b.prev=Z.DRAW_TRIANGLES;
e=b;this.drawTriangles(e.buffer.o[e.oPos],e.buffer.o[e.oPos+1],e.buffer.o[e.oPos+2],e.buffer.o[e.oPos+3]);break;case 13:switch(b.prev._hx_index){case 0:b.oPos+=2;b.bPos+=2;break;case 1:b.iPos+=1;b.fPos+=1;break;case 2:b.oPos+=4;b.iiPos+=2;b.ffPos+=1;b.fPos+=1;break;case 3:b.oPos+=1;break;case 4:b.fPos+=6;break;case 5:b.fPos+=4;break;case 6:b.fPos+=3;break;case 7:b.fPos+=4;break;case 8:b.oPos+=3;break;case 9:b.fPos+=4;break;case 10:b.fPos+=5;b.oPos+=1;break;case 12:b.oPos+=4;break;case 14:b.oPos+=
2;b.bPos+=2;break;case 15:b.oPos+=4;b.iiPos+=2;b.ffPos+=1;b.fPos+=1;break;case 16:b.oPos+=4;b.iPos+=1;b.fPos+=2;b.bPos+=1;break;case 17:b.fPos+=2;break;case 18:b.fPos+=2;break;case 19:b.oPos+=1;break;case 20:b.oPos+=1}b.prev=Z.END_FILL;this.endFill();break;case 14:switch(b.prev._hx_index){case 0:b.oPos+=2;b.bPos+=2;break;case 1:b.iPos+=1;b.fPos+=1;break;case 2:b.oPos+=4;b.iiPos+=2;b.ffPos+=1;b.fPos+=1;break;case 3:b.oPos+=1;break;case 4:b.fPos+=6;break;case 5:b.fPos+=4;break;case 6:b.fPos+=3;break;
case 7:b.fPos+=4;break;case 8:b.oPos+=3;break;case 9:b.fPos+=4;break;case 10:b.fPos+=5;b.oPos+=1;break;case 12:b.oPos+=4;break;case 14:b.oPos+=2;b.bPos+=2;break;case 15:b.oPos+=4;b.iiPos+=2;b.ffPos+=1;b.fPos+=1;break;case 16:b.oPos+=4;b.iPos+=1;b.fPos+=2;b.bPos+=1;break;case 17:b.fPos+=2;break;case 18:b.fPos+=2;break;case 19:b.oPos+=1;break;case 20:b.oPos+=1}b.prev=Z.LINE_BITMAP_STYLE;e=b;this.lineBitmapStyle(e.buffer.o[e.oPos],e.buffer.o[e.oPos+1],e.buffer.b[e.bPos],e.buffer.b[e.bPos+1]);break;case 15:switch(b.prev._hx_index){case 0:b.oPos+=
2;b.bPos+=2;break;case 1:b.iPos+=1;b.fPos+=1;break;case 2:b.oPos+=4;b.iiPos+=2;b.ffPos+=1;b.fPos+=1;break;case 3:b.oPos+=1;break;case 4:b.fPos+=6;break;case 5:b.fPos+=4;break;case 6:b.fPos+=3;break;case 7:b.fPos+=4;break;case 8:b.oPos+=3;break;case 9:b.fPos+=4;break;case 10:b.fPos+=5;b.oPos+=1;break;case 12:b.oPos+=4;break;case 14:b.oPos+=2;b.bPos+=2;break;case 15:b.oPos+=4;b.iiPos+=2;b.ffPos+=1;b.fPos+=1;break;case 16:b.oPos+=4;b.iPos+=1;b.fPos+=2;b.bPos+=1;break;case 17:b.fPos+=2;break;case 18:b.fPos+=
2;break;case 19:b.oPos+=1;break;case 20:b.oPos+=1}b.prev=Z.LINE_GRADIENT_STYLE;e=b;this.lineGradientStyle(e.buffer.o[e.oPos],e.buffer.ii[e.iiPos],e.buffer.ff[e.ffPos],e.buffer.ii[e.iiPos+1],e.buffer.o[e.oPos+1],e.buffer.o[e.oPos+2],e.buffer.o[e.oPos+3],e.buffer.f[e.fPos]);break;case 16:switch(b.prev._hx_index){case 0:b.oPos+=2;b.bPos+=2;break;case 1:b.iPos+=1;b.fPos+=1;break;case 2:b.oPos+=4;b.iiPos+=2;b.ffPos+=1;b.fPos+=1;break;case 3:b.oPos+=1;break;case 4:b.fPos+=6;break;case 5:b.fPos+=4;break;
case 6:b.fPos+=3;break;case 7:b.fPos+=4;break;case 8:b.oPos+=3;break;case 9:b.fPos+=4;break;case 10:b.fPos+=5;b.oPos+=1;break;case 12:b.oPos+=4;break;case 14:b.oPos+=2;b.bPos+=2;break;case 15:b.oPos+=4;b.iiPos+=2;b.ffPos+=1;b.fPos+=1;break;case 16:b.oPos+=4;b.iPos+=1;b.fPos+=2;b.bPos+=1;break;case 17:b.fPos+=2;break;case 18:b.fPos+=2;break;case 19:b.oPos+=1;break;case 20:b.oPos+=1}b.prev=Z.LINE_STYLE;e=b;this.lineStyle(e.buffer.o[e.oPos],e.buffer.i[e.iPos],e.buffer.f[e.fPos],e.buffer.b[e.bPos],e.buffer.o[e.oPos+
1],e.buffer.o[e.oPos+2],e.buffer.o[e.oPos+3],e.buffer.f[e.fPos+1]);break;case 17:switch(b.prev._hx_index){case 0:b.oPos+=2;b.bPos+=2;break;case 1:b.iPos+=1;b.fPos+=1;break;case 2:b.oPos+=4;b.iiPos+=2;b.ffPos+=1;b.fPos+=1;break;case 3:b.oPos+=1;break;case 4:b.fPos+=6;break;case 5:b.fPos+=4;break;case 6:b.fPos+=3;break;case 7:b.fPos+=4;break;case 8:b.oPos+=3;break;case 9:b.fPos+=4;break;case 10:b.fPos+=5;b.oPos+=1;break;case 12:b.oPos+=4;break;case 14:b.oPos+=2;b.bPos+=2;break;case 15:b.oPos+=4;b.iiPos+=
2;b.ffPos+=1;b.fPos+=1;break;case 16:b.oPos+=4;b.iPos+=1;b.fPos+=2;b.bPos+=1;break;case 17:b.fPos+=2;break;case 18:b.fPos+=2;break;case 19:b.oPos+=1;break;case 20:b.oPos+=1}b.prev=Z.LINE_TO;e=b;this.lineTo(e.buffer.f[e.fPos],e.buffer.f[e.fPos+1]);break;case 18:switch(b.prev._hx_index){case 0:b.oPos+=2;b.bPos+=2;break;case 1:b.iPos+=1;b.fPos+=1;break;case 2:b.oPos+=4;b.iiPos+=2;b.ffPos+=1;b.fPos+=1;break;case 3:b.oPos+=1;break;case 4:b.fPos+=6;break;case 5:b.fPos+=4;break;case 6:b.fPos+=3;break;case 7:b.fPos+=
4;break;case 8:b.oPos+=3;break;case 9:b.fPos+=4;break;case 10:b.fPos+=5;b.oPos+=1;break;case 12:b.oPos+=4;break;case 14:b.oPos+=2;b.bPos+=2;break;case 15:b.oPos+=4;b.iiPos+=2;b.ffPos+=1;b.fPos+=1;break;case 16:b.oPos+=4;b.iPos+=1;b.fPos+=2;b.bPos+=1;break;case 17:b.fPos+=2;break;case 18:b.fPos+=2;break;case 19:b.oPos+=1;break;case 20:b.oPos+=1}b.prev=Z.MOVE_TO;e=b;this.moveTo(e.buffer.f[e.fPos],e.buffer.f[e.fPos+1]);break;case 20:switch(b.prev._hx_index){case 0:b.oPos+=2;b.bPos+=2;break;case 1:b.iPos+=
1;b.fPos+=1;break;case 2:b.oPos+=4;b.iiPos+=2;b.ffPos+=1;b.fPos+=1;break;case 3:b.oPos+=1;break;case 4:b.fPos+=6;break;case 5:b.fPos+=4;break;case 6:b.fPos+=3;break;case 7:b.fPos+=4;break;case 8:b.oPos+=3;break;case 9:b.fPos+=4;break;case 10:b.fPos+=5;b.oPos+=1;break;case 12:b.oPos+=4;break;case 14:b.oPos+=2;b.bPos+=2;break;case 15:b.oPos+=4;b.iiPos+=2;b.ffPos+=1;b.fPos+=1;break;case 16:b.oPos+=4;b.iPos+=1;b.fPos+=2;b.bPos+=1;break;case 17:b.fPos+=2;break;case 18:b.fPos+=2;break;case 19:b.oPos+=1;
break;case 20:b.oPos+=1}b.prev=Z.OVERRIDE_MATRIX;e=b;this.overrideMatrix(e.buffer.o[e.oPos]);break;case 21:switch(b.prev._hx_index){case 0:b.oPos+=2;b.bPos+=2;break;case 1:b.iPos+=1;b.fPos+=1;break;case 2:b.oPos+=4;b.iiPos+=2;b.ffPos+=1;b.fPos+=1;break;case 3:b.oPos+=1;break;case 4:b.fPos+=6;break;case 5:b.fPos+=4;break;case 6:b.fPos+=3;break;case 7:b.fPos+=4;break;case 8:b.oPos+=3;break;case 9:b.fPos+=4;break;case 10:b.fPos+=5;b.oPos+=1;break;case 12:b.oPos+=4;break;case 14:b.oPos+=2;b.bPos+=2;break;
case 15:b.oPos+=4;b.iiPos+=2;b.ffPos+=1;b.fPos+=1;break;case 16:b.oPos+=4;b.iPos+=1;b.fPos+=2;b.bPos+=1;break;case 17:b.fPos+=2;break;case 18:b.fPos+=2;break;case 19:b.oPos+=1;break;case 20:b.oPos+=1}b.prev=Z.WINDING_EVEN_ODD;this.windingEvenOdd();break;case 22:switch(b.prev._hx_index){case 0:b.oPos+=2;b.bPos+=2;break;case 1:b.iPos+=1;b.fPos+=1;break;case 2:b.oPos+=4;b.iiPos+=2;b.ffPos+=1;b.fPos+=1;break;case 3:b.oPos+=1;break;case 4:b.fPos+=6;break;case 5:b.fPos+=4;break;case 6:b.fPos+=3;break;case 7:b.fPos+=
4;break;case 8:b.oPos+=3;break;case 9:b.fPos+=4;break;case 10:b.fPos+=5;b.oPos+=1;break;case 12:b.oPos+=4;break;case 14:b.oPos+=2;b.bPos+=2;break;case 15:b.oPos+=4;b.iiPos+=2;b.ffPos+=1;b.fPos+=1;break;case 16:b.oPos+=4;b.iPos+=1;b.fPos+=2;b.bPos+=1;break;case 17:b.fPos+=2;break;case 18:b.fPos+=2;break;case 19:b.oPos+=1;break;case 20:b.oPos+=1}b.prev=Z.WINDING_NON_ZERO;this.windingNonZero()}}b.destroy();return a},beginBitmapFill:function(a,b,c,d){this.prepareWrite();this.types.push(Z.BEGIN_BITMAP_FILL);
this.o.push(a);this.o.push(b);this.b.push(c);this.b.push(d)},beginFill:function(a,b){this.prepareWrite();this.types.push(Z.BEGIN_FILL);this.i.push(a);this.f.push(b)},beginGradientFill:function(a,b,c,d,e,f,k,m){this.prepareWrite();this.types.push(Z.BEGIN_GRADIENT_FILL);this.o.push(a);this.ii.push(b);this.ff.push(c);this.ii.push(d);this.o.push(e);this.o.push(f);this.o.push(k);this.f.push(m)},beginShaderFill:function(a){this.prepareWrite();this.types.push(Z.BEGIN_SHADER_FILL);this.o.push(a)},clear:function(){this.types=
Yc.empty.types;this.b=Yc.empty.b;this.i=Yc.empty.i;this.f=Yc.empty.f;this.o=Yc.empty.o;this.ff=Yc.empty.ff;this.ii=Yc.empty.ii;this.copyOnWrite=!0},copy:function(){var a=new Yc;a.append(this);return a},cubicCurveTo:function(a,b,c,d,e,f){this.prepareWrite();this.types.push(Z.CUBIC_CURVE_TO);this.f.push(a);this.f.push(b);this.f.push(c);this.f.push(d);this.f.push(e);this.f.push(f)},curveTo:function(a,b,c,d){this.prepareWrite();this.types.push(Z.CURVE_TO);this.f.push(a);this.f.push(b);this.f.push(c);
this.f.push(d)},drawCircle:function(a,b,c){this.prepareWrite();this.types.push(Z.DRAW_CIRCLE);this.f.push(a);this.f.push(b);this.f.push(c)},drawEllipse:function(a,b,c,d){this.prepareWrite();this.types.push(Z.DRAW_ELLIPSE);this.f.push(a);this.f.push(b);this.f.push(c);this.f.push(d)},drawQuads:function(a,b,c){this.prepareWrite();this.types.push(Z.DRAW_QUADS);this.o.push(a);this.o.push(b);this.o.push(c)},drawRect:function(a,b,c,d){this.prepareWrite();this.types.push(Z.DRAW_RECT);this.f.push(a);this.f.push(b);
this.f.push(c);this.f.push(d)},drawRoundRect:function(a,b,c,d,e,f){this.prepareWrite();this.types.push(Z.DRAW_ROUND_RECT);this.f.push(a);this.f.push(b);this.f.push(c);this.f.push(d);this.f.push(e);this.o.push(f)},drawTriangles:function(a,b,c,d){this.prepareWrite();this.types.push(Z.DRAW_TRIANGLES);this.o.push(a);this.o.push(b);this.o.push(c);this.o.push(d)},endFill:function(){this.prepareWrite();this.types.push(Z.END_FILL)},lineBitmapStyle:function(a,b,c,d){this.prepareWrite();this.types.push(Z.LINE_BITMAP_STYLE);
this.o.push(a);this.o.push(b);this.b.push(c);this.b.push(d)},lineGradientStyle:function(a,b,c,d,e,f,k,m){this.prepareWrite();this.types.push(Z.LINE_GRADIENT_STYLE);this.o.push(a);this.ii.push(b);this.ff.push(c);this.ii.push(d);this.o.push(e);this.o.push(f);this.o.push(k);this.f.push(m)},lineStyle:function(a,b,c,d,e,f,k,m){this.prepareWrite();this.types.push(Z.LINE_STYLE);this.o.push(a);this.i.push(b);this.f.push(c);this.b.push(d);this.o.push(e);this.o.push(f);this.o.push(k);this.f.push(m)},lineTo:function(a,
b){this.prepareWrite();this.types.push(Z.LINE_TO);this.f.push(a);this.f.push(b)},moveTo:function(a,b){this.prepareWrite();this.types.push(Z.MOVE_TO);this.f.push(a);this.f.push(b)},prepareWrite:function(){this.copyOnWrite&&(this.types=this.types.slice(),this.b=this.b.slice(),this.i=this.i.slice(),this.f=this.f.slice(),this.o=this.o.slice(),this.ff=this.ff.slice(),this.ii=this.ii.slice(),this.copyOnWrite=!1)},overrideMatrix:function(a){this.prepareWrite();this.types.push(Z.OVERRIDE_MATRIX);this.o.push(a)},
windingEvenOdd:function(){this.prepareWrite();this.types.push(Z.WINDING_EVEN_ODD)},windingNonZero:function(){this.prepareWrite();this.types.push(Z.WINDING_NON_ZERO)},get_length:function(){return this.types.length},__class__:Yc};var de=function(a){this.buffer=a;this.bPos=this.iPos=this.fPos=this.oPos=this.ffPos=this.iiPos=this.tsPos=0;this.prev=Z.UNKNOWN};g["openfl._internal.renderer.DrawCommandReader"]=de;de.__name__="openfl._internal.renderer.DrawCommandReader";de.prototype={buffer:null,bPos:null,
iiPos:null,iPos:null,ffPos:null,fPos:null,oPos:null,prev:null,tsPos:null,destroy:function(){this.buffer=null;this.reset()},reset:function(){this.bPos=this.iPos=this.fPos=this.oPos=this.ffPos=this.iiPos=this.tsPos=0},__class__:de};var Z=t["openfl._internal.renderer.DrawCommandType"]={__ename__:"openfl._internal.renderer.DrawCommandType",__constructs__:"BEGIN_BITMAP_FILL BEGIN_FILL BEGIN_GRADIENT_FILL BEGIN_SHADER_FILL CUBIC_CURVE_TO CURVE_TO DRAW_CIRCLE DRAW_ELLIPSE DRAW_QUADS DRAW_RECT DRAW_ROUND_RECT DRAW_TILES DRAW_TRIANGLES END_FILL LINE_BITMAP_STYLE LINE_GRADIENT_STYLE LINE_STYLE LINE_TO MOVE_TO OVERRIDE_BLEND_MODE OVERRIDE_MATRIX WINDING_EVEN_ODD WINDING_NON_ZERO UNKNOWN".split(" "),
BEGIN_BITMAP_FILL:{_hx_index:0,__enum__:"openfl._internal.renderer.DrawCommandType",toString:p},BEGIN_FILL:{_hx_index:1,__enum__:"openfl._internal.renderer.DrawCommandType",toString:p},BEGIN_GRADIENT_FILL:{_hx_index:2,__enum__:"openfl._internal.renderer.DrawCommandType",toString:p},BEGIN_SHADER_FILL:{_hx_index:3,__enum__:"openfl._internal.renderer.DrawCommandType",toString:p},CUBIC_CURVE_TO:{_hx_index:4,__enum__:"openfl._internal.renderer.DrawCommandType",toString:p},CURVE_TO:{_hx_index:5,__enum__:"openfl._internal.renderer.DrawCommandType",
toString:p},DRAW_CIRCLE:{_hx_index:6,__enum__:"openfl._internal.renderer.DrawCommandType",toString:p},DRAW_ELLIPSE:{_hx_index:7,__enum__:"openfl._internal.renderer.DrawCommandType",toString:p},DRAW_QUADS:{_hx_index:8,__enum__:"openfl._internal.renderer.DrawCommandType",toString:p},DRAW_RECT:{_hx_index:9,__enum__:"openfl._internal.renderer.DrawCommandType",toString:p},DRAW_ROUND_RECT:{_hx_index:10,__enum__:"openfl._internal.renderer.DrawCommandType",toString:p},DRAW_TILES:{_hx_index:11,__enum__:"openfl._internal.renderer.DrawCommandType",
toString:p},DRAW_TRIANGLES:{_hx_index:12,__enum__:"openfl._internal.renderer.DrawCommandType",toString:p},END_FILL:{_hx_index:13,__enum__:"openfl._internal.renderer.DrawCommandType",toString:p},LINE_BITMAP_STYLE:{_hx_index:14,__enum__:"openfl._internal.renderer.DrawCommandType",toString:p},LINE_GRADIENT_STYLE:{_hx_index:15,__enum__:"openfl._internal.renderer.DrawCommandType",toString:p},LINE_STYLE:{_hx_index:16,__enum__:"openfl._internal.renderer.DrawCommandType",toString:p},LINE_TO:{_hx_index:17,
__enum__:"openfl._internal.renderer.DrawCommandType",toString:p},MOVE_TO:{_hx_index:18,__enum__:"openfl._internal.renderer.DrawCommandType",toString:p},OVERRIDE_BLEND_MODE:{_hx_index:19,__enum__:"openfl._internal.renderer.DrawCommandType",toString:p},OVERRIDE_MATRIX:{_hx_index:20,__enum__:"openfl._internal.renderer.DrawCommandType",toString:p},WINDING_EVEN_ODD:{_hx_index:21,__enum__:"openfl._internal.renderer.DrawCommandType",toString:p},WINDING_NON_ZERO:{_hx_index:22,__enum__:"openfl._internal.renderer.DrawCommandType",
toString:p},UNKNOWN:{_hx_index:23,__enum__:"openfl._internal.renderer.DrawCommandType",toString:p}},rh=function(a,b,c,d,e,f,k){null==k&&(k=!1);null==f&&(f=!1);null==e&&(e=!1);null==d&&(d=0);null==c&&(c=2);null==b&&(b=5);null==a&&(a=0);this.wrap=a;this.filter=b;this.mipfilter=c;this.lodBias=d;this.ignoreSampler=e;this.centroid=f;this.textureAlpha=k};g["openfl._internal.renderer.SamplerState"]=rh;rh.__name__="openfl._internal.renderer.SamplerState";rh.prototype={centroid:null,filter:null,ignoreSampler:null,
lodBias:null,mipfilter:null,mipmapGenerated:null,textureAlpha:null,wrap:null,clone:function(){var a=new rh(this.wrap,this.filter,this.mipfilter,this.lodBias,this.ignoreSampler,this.centroid,this.textureAlpha);a.mipmapGenerated=this.mipmapGenerated;return a},copyFrom:function(a){null==a||a.ignoreSampler||(this.wrap=a.wrap,this.filter=a.filter,this.mipfilter=a.mipfilter,this.lodBias=a.lodBias,this.centroid=a.centroid,this.textureAlpha=a.textureAlpha)},equals:function(a){return null==a?!1:this.wrap==
a.wrap&&this.filter==a.filter&&this.mipfilter==a.mipfilter&&this.lodBias==a.lodBias?this.textureAlpha==a.textureAlpha:!1},__class__:rh};var Yj=function(){this.inputRefs=[];this.inputFilter=[];this.inputMipFilter=[];this.inputs=[];this.inputWrap=[];this.overrideIntNames=[];this.overrideIntValues=[];this.overrideFloatNames=[];this.overrideFloatValues=[];this.overrideBoolNames=[];this.overrideBoolValues=[];this.paramLengths=[];this.paramPositions=[];this.paramRefs_Bool=[];this.paramRefs_Float=[];this.paramRefs_Int=
[];this.paramTypes=[]};g["openfl._internal.renderer.ShaderBuffer"]=Yj;Yj.__name__="openfl._internal.renderer.ShaderBuffer";Yj.prototype={inputCount:null,inputRefs:null,inputFilter:null,inputMipFilter:null,inputs:null,inputWrap:null,overrideBoolCount:null,overrideBoolNames:null,overrideBoolValues:null,overrideFloatCount:null,overrideFloatNames:null,overrideFloatValues:null,overrideIntCount:null,overrideIntNames:null,overrideIntValues:null,paramBoolCount:null,paramCount:null,paramData:null,paramDataBuffer:null,
paramDataLength:null,paramFloatCount:null,paramLengths:null,paramPositions:null,paramRefs_Bool:null,paramRefs_Float:null,paramRefs_Int:null,paramTypes:null,shader:null,addBoolOverride:function(a,b){this.overrideBoolNames[this.overrideBoolCount]=a;this.overrideBoolValues[this.overrideBoolCount]=b;this.overrideBoolCount++},addFloatOverride:function(a,b){this.overrideFloatNames[this.overrideFloatCount]=a;this.overrideFloatValues[this.overrideFloatCount]=b;this.overrideFloatCount++},clearOverride:function(){this.overrideBoolCount=
this.overrideFloatCount=this.overrideIntCount=0},__class__:Yj};var A=function(){};g["openfl._internal.renderer.canvas.CanvasGraphics"]=A;A.__name__="openfl._internal.renderer.canvas.CanvasGraphics";A.closePath=function(a){null==a&&(a=!1);null!=A.context.strokeStyle&&(a||A.context.closePath(),A.context.stroke(),a&&A.context.closePath(),A.context.beginPath())};A.createBitmapFill=function(a,b,c){La.convertToCanvas(a.image);A.setSmoothing(c);return A.context.createPattern(a.image.get_src(),b?"repeat":
"no-repeat")};A.createGradientPattern=function(a,b,c,d,e,f,k,m){var h=null;m=f=null;k=!1;null==e&&(e=va.__pool.get(),k=!0);switch(a){case 0:f=ob.__pool.get();f.setTo(-819.2,0);m=f.x;h=f.y;f.x=m*e.a+h*e.c+e.tx;f.y=m*e.b+h*e.d+e.ty;m=ob.__pool.get();m.setTo(819.2,0);h=m.x;a=m.y;m.x=h*e.a+a*e.c+e.tx;m.y=h*e.b+a*e.d+e.ty;h=A.context.createLinearGradient(f.x,f.y,m.x,m.y);break;case 1:f=ob.__pool.get(),f.setTo(1638.4,0),h=f.x,a=f.y,f.x=h*e.a+a*e.c+e.tx,f.y=h*e.b+a*e.d+e.ty,h=A.context.createRadialGradient(e.tx,
e.ty,0,e.tx,e.ty,Math.abs((f.x-e.tx)/2))}for(var n,g,l,p,y=0,r=b.length;y<r;)p=y++,n=b[p],a=c[p],g=(n&16711680)>>>16,l=(n&65280)>>>8,n&=255,p=d[p]/255,0>p&&(p=0),1<p&&(p=1),h.addColorStop(p,"rgba("+g+", "+l+", "+n+", "+a+")");null!=f&&ob.__pool.release(f);null!=m&&ob.__pool.release(m);k&&va.__pool.release(e);return h};A.createTempPatternCanvas=function(a,b,c,d){var e=window.document.createElement("canvas"),f=e.getContext("2d");e.width=c;e.height=d;a=a.image.get_src();f.fillStyle=f.createPattern(a,
b?"repeat":"no-repeat");f.beginPath();f.moveTo(0,0);f.lineTo(0,d);f.lineTo(c,d);f.lineTo(c,0);f.lineTo(0,0);f.closePath();A.hitTesting||f.fill(A.windingRule);return e};A.drawRoundRect=function(a,b,c,d,e,f){null==f&&(f=e);e*=.5;f*=.5;e>c/2&&(e=c/2);f>d/2&&(f=d/2);c=a+c;d=b+d;var k=-e+.7071067811865476*e,m=-e+.41421356237309503*e,h=-f+.7071067811865476*f,n=-f+.41421356237309503*f;A.context.moveTo(c,d-f);A.context.quadraticCurveTo(c,d+n,c+k,d+h);A.context.quadraticCurveTo(c+m,d,c-e,d);A.context.lineTo(a+
e,d);A.context.quadraticCurveTo(a-m,d,a-k,d+h);A.context.quadraticCurveTo(a,d+n,a,d-f);A.context.lineTo(a,b+f);A.context.quadraticCurveTo(a,b-n,a-k,b-h);A.context.quadraticCurveTo(a-m,b,a+e,b);A.context.lineTo(c-e,b);A.context.quadraticCurveTo(c+m,b,c+k,b-h);A.context.quadraticCurveTo(c,b-n,c,b+f);A.context.lineTo(c,d-f)};A.endFill=function(){A.context.beginPath();A.playCommands(A.fillCommands,!1);A.fillCommands.clear()};A.endStroke=function(){A.context.beginPath();A.playCommands(A.strokeCommands,
!0);A.context.closePath();A.strokeCommands.clear()};A.hitTest=function(a,b,c){A.bounds=a.__bounds;A.graphics=a;if(0==a.__commands.get_length()||null==A.bounds||0>=A.bounds.width||0>=A.bounds.height)return!1;A.hitTesting=!0;var d=a.__renderTransform,e=b*d.b+c*d.d+d.ty;b=b*d.a+c*d.c+d.tx-(A.bounds.x*d.a+A.bounds.y*d.c+d.tx);c=e-(A.bounds.x*d.b+A.bounds.y*d.d+d.ty);e=a.__canvas;var f=a.__context;a.__canvas=A.hitTestCanvas;a.__context=A.hitTestContext;A.context=a.__context;A.context.setTransform(d.a,
d.b,d.c,d.d,d.tx,d.ty);A.fillCommands.clear();A.strokeCommands.clear();A.hasFill=!1;A.hasStroke=!1;A.bitmapFill=null;A.bitmapRepeat=!1;A.windingRule="evenodd";d=new de(a.__commands);for(var k=0,m=a.__commands.types;k<m.length;){var h=m[k];++k;switch(h._hx_index){case 0:case 1:case 2:case 3:A.endFill();if(A.hasFill&&A.context.isPointInPath(b,c,A.windingRule))return d.destroy(),a.__canvas=e,a.__context=f,!0;A.endStroke();if(A.hasStroke&&A.context.isPointInStroke(b,c))return d.destroy(),a.__canvas=e,
a.__context=f,!0;if(h==Z.BEGIN_BITMAP_FILL){switch(d.prev._hx_index){case 0:d.oPos+=2;d.bPos+=2;break;case 1:d.iPos+=1;d.fPos+=1;break;case 2:d.oPos+=4;d.iiPos+=2;d.ffPos+=1;d.fPos+=1;break;case 3:d.oPos+=1;break;case 4:d.fPos+=6;break;case 5:d.fPos+=4;break;case 6:d.fPos+=3;break;case 7:d.fPos+=4;break;case 8:d.oPos+=3;break;case 9:d.fPos+=4;break;case 10:d.fPos+=5;d.oPos+=1;break;case 12:d.oPos+=4;break;case 14:d.oPos+=2;d.bPos+=2;break;case 15:d.oPos+=4;d.iiPos+=2;d.ffPos+=1;d.fPos+=1;break;case 16:d.oPos+=
4;d.iPos+=1;d.fPos+=2;d.bPos+=1;break;case 17:d.fPos+=2;break;case 18:d.fPos+=2;break;case 19:d.oPos+=1;break;case 20:d.oPos+=1}d.prev=Z.BEGIN_BITMAP_FILL;h=d;A.fillCommands.beginBitmapFill(h.buffer.o[h.oPos],h.buffer.o[h.oPos+1],h.buffer.b[h.bPos],h.buffer.b[h.bPos+1]);A.strokeCommands.beginBitmapFill(h.buffer.o[h.oPos],h.buffer.o[h.oPos+1],h.buffer.b[h.bPos],h.buffer.b[h.bPos+1])}else if(h==Z.BEGIN_GRADIENT_FILL){switch(d.prev._hx_index){case 0:d.oPos+=2;d.bPos+=2;break;case 1:d.iPos+=1;d.fPos+=
1;break;case 2:d.oPos+=4;d.iiPos+=2;d.ffPos+=1;d.fPos+=1;break;case 3:d.oPos+=1;break;case 4:d.fPos+=6;break;case 5:d.fPos+=4;break;case 6:d.fPos+=3;break;case 7:d.fPos+=4;break;case 8:d.oPos+=3;break;case 9:d.fPos+=4;break;case 10:d.fPos+=5;d.oPos+=1;break;case 12:d.oPos+=4;break;case 14:d.oPos+=2;d.bPos+=2;break;case 15:d.oPos+=4;d.iiPos+=2;d.ffPos+=1;d.fPos+=1;break;case 16:d.oPos+=4;d.iPos+=1;d.fPos+=2;d.bPos+=1;break;case 17:d.fPos+=2;break;case 18:d.fPos+=2;break;case 19:d.oPos+=1;break;case 20:d.oPos+=
1}d.prev=Z.BEGIN_GRADIENT_FILL;h=d;A.fillCommands.beginGradientFill(h.buffer.o[h.oPos],h.buffer.ii[h.iiPos],h.buffer.ff[h.ffPos],h.buffer.ii[h.iiPos+1],h.buffer.o[h.oPos+1],h.buffer.o[h.oPos+2],h.buffer.o[h.oPos+3],h.buffer.f[h.fPos]);A.strokeCommands.beginGradientFill(h.buffer.o[h.oPos],h.buffer.ii[h.iiPos],h.buffer.ff[h.ffPos],h.buffer.ii[h.iiPos+1],h.buffer.o[h.oPos+1],h.buffer.o[h.oPos+2],h.buffer.o[h.oPos+3],h.buffer.f[h.fPos])}else if(h==Z.BEGIN_SHADER_FILL){switch(d.prev._hx_index){case 0:d.oPos+=
2;d.bPos+=2;break;case 1:d.iPos+=1;d.fPos+=1;break;case 2:d.oPos+=4;d.iiPos+=2;d.ffPos+=1;d.fPos+=1;break;case 3:d.oPos+=1;break;case 4:d.fPos+=6;break;case 5:d.fPos+=4;break;case 6:d.fPos+=3;break;case 7:d.fPos+=4;break;case 8:d.oPos+=3;break;case 9:d.fPos+=4;break;case 10:d.fPos+=5;d.oPos+=1;break;case 12:d.oPos+=4;break;case 14:d.oPos+=2;d.bPos+=2;break;case 15:d.oPos+=4;d.iiPos+=2;d.ffPos+=1;d.fPos+=1;break;case 16:d.oPos+=4;d.iPos+=1;d.fPos+=2;d.bPos+=1;break;case 17:d.fPos+=2;break;case 18:d.fPos+=
2;break;case 19:d.oPos+=1;break;case 20:d.oPos+=1}d.prev=Z.BEGIN_SHADER_FILL;h=d;A.fillCommands.beginShaderFill(h.buffer.o[h.oPos]);A.strokeCommands.beginShaderFill(h.buffer.o[h.oPos])}else{switch(d.prev._hx_index){case 0:d.oPos+=2;d.bPos+=2;break;case 1:d.iPos+=1;d.fPos+=1;break;case 2:d.oPos+=4;d.iiPos+=2;d.ffPos+=1;d.fPos+=1;break;case 3:d.oPos+=1;break;case 4:d.fPos+=6;break;case 5:d.fPos+=4;break;case 6:d.fPos+=3;break;case 7:d.fPos+=4;break;case 8:d.oPos+=3;break;case 9:d.fPos+=4;break;case 10:d.fPos+=
5;d.oPos+=1;break;case 12:d.oPos+=4;break;case 14:d.oPos+=2;d.bPos+=2;break;case 15:d.oPos+=4;d.iiPos+=2;d.ffPos+=1;d.fPos+=1;break;case 16:d.oPos+=4;d.iPos+=1;d.fPos+=2;d.bPos+=1;break;case 17:d.fPos+=2;break;case 18:d.fPos+=2;break;case 19:d.oPos+=1;break;case 20:d.oPos+=1}d.prev=Z.BEGIN_FILL;h=d;A.fillCommands.beginFill(h.buffer.i[h.iPos],1);A.strokeCommands.beginFill(h.buffer.i[h.iPos],1)}break;case 4:switch(d.prev._hx_index){case 0:d.oPos+=2;d.bPos+=2;break;case 1:d.iPos+=1;d.fPos+=1;break;case 2:d.oPos+=
4;d.iiPos+=2;d.ffPos+=1;d.fPos+=1;break;case 3:d.oPos+=1;break;case 4:d.fPos+=6;break;case 5:d.fPos+=4;break;case 6:d.fPos+=3;break;case 7:d.fPos+=4;break;case 8:d.oPos+=3;break;case 9:d.fPos+=4;break;case 10:d.fPos+=5;d.oPos+=1;break;case 12:d.oPos+=4;break;case 14:d.oPos+=2;d.bPos+=2;break;case 15:d.oPos+=4;d.iiPos+=2;d.ffPos+=1;d.fPos+=1;break;case 16:d.oPos+=4;d.iPos+=1;d.fPos+=2;d.bPos+=1;break;case 17:d.fPos+=2;break;case 18:d.fPos+=2;break;case 19:d.oPos+=1;break;case 20:d.oPos+=1}d.prev=Z.CUBIC_CURVE_TO;
h=d;A.fillCommands.cubicCurveTo(h.buffer.f[h.fPos],h.buffer.f[h.fPos+1],h.buffer.f[h.fPos+2],h.buffer.f[h.fPos+3],h.buffer.f[h.fPos+4],h.buffer.f[h.fPos+5]);A.strokeCommands.cubicCurveTo(h.buffer.f[h.fPos],h.buffer.f[h.fPos+1],h.buffer.f[h.fPos+2],h.buffer.f[h.fPos+3],h.buffer.f[h.fPos+4],h.buffer.f[h.fPos+5]);break;case 5:switch(d.prev._hx_index){case 0:d.oPos+=2;d.bPos+=2;break;case 1:d.iPos+=1;d.fPos+=1;break;case 2:d.oPos+=4;d.iiPos+=2;d.ffPos+=1;d.fPos+=1;break;case 3:d.oPos+=1;break;case 4:d.fPos+=
6;break;case 5:d.fPos+=4;break;case 6:d.fPos+=3;break;case 7:d.fPos+=4;break;case 8:d.oPos+=3;break;case 9:d.fPos+=4;break;case 10:d.fPos+=5;d.oPos+=1;break;case 12:d.oPos+=4;break;case 14:d.oPos+=2;d.bPos+=2;break;case 15:d.oPos+=4;d.iiPos+=2;d.ffPos+=1;d.fPos+=1;break;case 16:d.oPos+=4;d.iPos+=1;d.fPos+=2;d.bPos+=1;break;case 17:d.fPos+=2;break;case 18:d.fPos+=2;break;case 19:d.oPos+=1;break;case 20:d.oPos+=1}d.prev=Z.CURVE_TO;h=d;A.fillCommands.curveTo(h.buffer.f[h.fPos],h.buffer.f[h.fPos+1],h.buffer.f[h.fPos+
2],h.buffer.f[h.fPos+3]);A.strokeCommands.curveTo(h.buffer.f[h.fPos],h.buffer.f[h.fPos+1],h.buffer.f[h.fPos+2],h.buffer.f[h.fPos+3]);break;case 6:switch(d.prev._hx_index){case 0:d.oPos+=2;d.bPos+=2;break;case 1:d.iPos+=1;d.fPos+=1;break;case 2:d.oPos+=4;d.iiPos+=2;d.ffPos+=1;d.fPos+=1;break;case 3:d.oPos+=1;break;case 4:d.fPos+=6;break;case 5:d.fPos+=4;break;case 6:d.fPos+=3;break;case 7:d.fPos+=4;break;case 8:d.oPos+=3;break;case 9:d.fPos+=4;break;case 10:d.fPos+=5;d.oPos+=1;break;case 12:d.oPos+=
4;break;case 14:d.oPos+=2;d.bPos+=2;break;case 15:d.oPos+=4;d.iiPos+=2;d.ffPos+=1;d.fPos+=1;break;case 16:d.oPos+=4;d.iPos+=1;d.fPos+=2;d.bPos+=1;break;case 17:d.fPos+=2;break;case 18:d.fPos+=2;break;case 19:d.oPos+=1;break;case 20:d.oPos+=1}d.prev=Z.DRAW_CIRCLE;h=d;A.fillCommands.drawCircle(h.buffer.f[h.fPos],h.buffer.f[h.fPos+1],h.buffer.f[h.fPos+2]);A.strokeCommands.drawCircle(h.buffer.f[h.fPos],h.buffer.f[h.fPos+1],h.buffer.f[h.fPos+2]);break;case 7:switch(d.prev._hx_index){case 0:d.oPos+=2;d.bPos+=
2;break;case 1:d.iPos+=1;d.fPos+=1;break;case 2:d.oPos+=4;d.iiPos+=2;d.ffPos+=1;d.fPos+=1;break;case 3:d.oPos+=1;break;case 4:d.fPos+=6;break;case 5:d.fPos+=4;break;case 6:d.fPos+=3;break;case 7:d.fPos+=4;break;case 8:d.oPos+=3;break;case 9:d.fPos+=4;break;case 10:d.fPos+=5;d.oPos+=1;break;case 12:d.oPos+=4;break;case 14:d.oPos+=2;d.bPos+=2;break;case 15:d.oPos+=4;d.iiPos+=2;d.ffPos+=1;d.fPos+=1;break;case 16:d.oPos+=4;d.iPos+=1;d.fPos+=2;d.bPos+=1;break;case 17:d.fPos+=2;break;case 18:d.fPos+=2;
break;case 19:d.oPos+=1;break;case 20:d.oPos+=1}d.prev=Z.DRAW_ELLIPSE;h=d;A.fillCommands.drawEllipse(h.buffer.f[h.fPos],h.buffer.f[h.fPos+1],h.buffer.f[h.fPos+2],h.buffer.f[h.fPos+3]);A.strokeCommands.drawEllipse(h.buffer.f[h.fPos],h.buffer.f[h.fPos+1],h.buffer.f[h.fPos+2],h.buffer.f[h.fPos+3]);break;case 9:switch(d.prev._hx_index){case 0:d.oPos+=2;d.bPos+=2;break;case 1:d.iPos+=1;d.fPos+=1;break;case 2:d.oPos+=4;d.iiPos+=2;d.ffPos+=1;d.fPos+=1;break;case 3:d.oPos+=1;break;case 4:d.fPos+=6;break;
case 5:d.fPos+=4;break;case 6:d.fPos+=3;break;case 7:d.fPos+=4;break;case 8:d.oPos+=3;break;case 9:d.fPos+=4;break;case 10:d.fPos+=5;d.oPos+=1;break;case 12:d.oPos+=4;break;case 14:d.oPos+=2;d.bPos+=2;break;case 15:d.oPos+=4;d.iiPos+=2;d.ffPos+=1;d.fPos+=1;break;case 16:d.oPos+=4;d.iPos+=1;d.fPos+=2;d.bPos+=1;break;case 17:d.fPos+=2;break;case 18:d.fPos+=2;break;case 19:d.oPos+=1;break;case 20:d.oPos+=1}d.prev=Z.DRAW_RECT;h=d;A.fillCommands.drawRect(h.buffer.f[h.fPos],h.buffer.f[h.fPos+1],h.buffer.f[h.fPos+
2],h.buffer.f[h.fPos+3]);A.strokeCommands.drawRect(h.buffer.f[h.fPos],h.buffer.f[h.fPos+1],h.buffer.f[h.fPos+2],h.buffer.f[h.fPos+3]);break;case 10:switch(d.prev._hx_index){case 0:d.oPos+=2;d.bPos+=2;break;case 1:d.iPos+=1;d.fPos+=1;break;case 2:d.oPos+=4;d.iiPos+=2;d.ffPos+=1;d.fPos+=1;break;case 3:d.oPos+=1;break;case 4:d.fPos+=6;break;case 5:d.fPos+=4;break;case 6:d.fPos+=3;break;case 7:d.fPos+=4;break;case 8:d.oPos+=3;break;case 9:d.fPos+=4;break;case 10:d.fPos+=5;d.oPos+=1;break;case 12:d.oPos+=
4;break;case 14:d.oPos+=2;d.bPos+=2;break;case 15:d.oPos+=4;d.iiPos+=2;d.ffPos+=1;d.fPos+=1;break;case 16:d.oPos+=4;d.iPos+=1;d.fPos+=2;d.bPos+=1;break;case 17:d.fPos+=2;break;case 18:d.fPos+=2;break;case 19:d.oPos+=1;break;case 20:d.oPos+=1}d.prev=Z.DRAW_ROUND_RECT;h=d;A.fillCommands.drawRoundRect(h.buffer.f[h.fPos],h.buffer.f[h.fPos+1],h.buffer.f[h.fPos+2],h.buffer.f[h.fPos+3],h.buffer.f[h.fPos+4],h.buffer.o[h.oPos]);A.strokeCommands.drawRoundRect(h.buffer.f[h.fPos],h.buffer.f[h.fPos+1],h.buffer.f[h.fPos+
2],h.buffer.f[h.fPos+3],h.buffer.f[h.fPos+4],h.buffer.o[h.oPos]);break;case 13:switch(d.prev._hx_index){case 0:d.oPos+=2;d.bPos+=2;break;case 1:d.iPos+=1;d.fPos+=1;break;case 2:d.oPos+=4;d.iiPos+=2;d.ffPos+=1;d.fPos+=1;break;case 3:d.oPos+=1;break;case 4:d.fPos+=6;break;case 5:d.fPos+=4;break;case 6:d.fPos+=3;break;case 7:d.fPos+=4;break;case 8:d.oPos+=3;break;case 9:d.fPos+=4;break;case 10:d.fPos+=5;d.oPos+=1;break;case 12:d.oPos+=4;break;case 14:d.oPos+=2;d.bPos+=2;break;case 15:d.oPos+=4;d.iiPos+=
2;d.ffPos+=1;d.fPos+=1;break;case 16:d.oPos+=4;d.iPos+=1;d.fPos+=2;d.bPos+=1;break;case 17:d.fPos+=2;break;case 18:d.fPos+=2;break;case 19:d.oPos+=1;break;case 20:d.oPos+=1}d.prev=Z.END_FILL;A.endFill();if(A.hasFill&&A.context.isPointInPath(b,c,A.windingRule))return d.destroy(),a.__canvas=e,a.__context=f,!0;A.endStroke();if(A.hasStroke&&A.context.isPointInStroke(b,c))return d.destroy(),a.__canvas=e,a.__context=f,!0;A.hasFill=!1;A.bitmapFill=null;break;case 14:switch(d.prev._hx_index){case 0:d.oPos+=
2;d.bPos+=2;break;case 1:d.iPos+=1;d.fPos+=1;break;case 2:d.oPos+=4;d.iiPos+=2;d.ffPos+=1;d.fPos+=1;break;case 3:d.oPos+=1;break;case 4:d.fPos+=6;break;case 5:d.fPos+=4;break;case 6:d.fPos+=3;break;case 7:d.fPos+=4;break;case 8:d.oPos+=3;break;case 9:d.fPos+=4;break;case 10:d.fPos+=5;d.oPos+=1;break;case 12:d.oPos+=4;break;case 14:d.oPos+=2;d.bPos+=2;break;case 15:d.oPos+=4;d.iiPos+=2;d.ffPos+=1;d.fPos+=1;break;case 16:d.oPos+=4;d.iPos+=1;d.fPos+=2;d.bPos+=1;break;case 17:d.fPos+=2;break;case 18:d.fPos+=
2;break;case 19:d.oPos+=1;break;case 20:d.oPos+=1}d.prev=Z.LINE_BITMAP_STYLE;h=d;A.strokeCommands.lineBitmapStyle(h.buffer.o[h.oPos],h.buffer.o[h.oPos+1],h.buffer.b[h.bPos],h.buffer.b[h.bPos+1]);break;case 15:switch(d.prev._hx_index){case 0:d.oPos+=2;d.bPos+=2;break;case 1:d.iPos+=1;d.fPos+=1;break;case 2:d.oPos+=4;d.iiPos+=2;d.ffPos+=1;d.fPos+=1;break;case 3:d.oPos+=1;break;case 4:d.fPos+=6;break;case 5:d.fPos+=4;break;case 6:d.fPos+=3;break;case 7:d.fPos+=4;break;case 8:d.oPos+=3;break;case 9:d.fPos+=
4;break;case 10:d.fPos+=5;d.oPos+=1;break;case 12:d.oPos+=4;break;case 14:d.oPos+=2;d.bPos+=2;break;case 15:d.oPos+=4;d.iiPos+=2;d.ffPos+=1;d.fPos+=1;break;case 16:d.oPos+=4;d.iPos+=1;d.fPos+=2;d.bPos+=1;break;case 17:d.fPos+=2;break;case 18:d.fPos+=2;break;case 19:d.oPos+=1;break;case 20:d.oPos+=1}d.prev=Z.LINE_GRADIENT_STYLE;h=d;A.strokeCommands.lineGradientStyle(h.buffer.o[h.oPos],h.buffer.ii[h.iiPos],h.buffer.ff[h.ffPos],h.buffer.ii[h.iiPos+1],h.buffer.o[h.oPos+1],h.buffer.o[h.oPos+2],h.buffer.o[h.oPos+
3],h.buffer.f[h.fPos]);break;case 16:switch(d.prev._hx_index){case 0:d.oPos+=2;d.bPos+=2;break;case 1:d.iPos+=1;d.fPos+=1;break;case 2:d.oPos+=4;d.iiPos+=2;d.ffPos+=1;d.fPos+=1;break;case 3:d.oPos+=1;break;case 4:d.fPos+=6;break;case 5:d.fPos+=4;break;case 6:d.fPos+=3;break;case 7:d.fPos+=4;break;case 8:d.oPos+=3;break;case 9:d.fPos+=4;break;case 10:d.fPos+=5;d.oPos+=1;break;case 12:d.oPos+=4;break;case 14:d.oPos+=2;d.bPos+=2;break;case 15:d.oPos+=4;d.iiPos+=2;d.ffPos+=1;d.fPos+=1;break;case 16:d.oPos+=
4;d.iPos+=1;d.fPos+=2;d.bPos+=1;break;case 17:d.fPos+=2;break;case 18:d.fPos+=2;break;case 19:d.oPos+=1;break;case 20:d.oPos+=1}d.prev=Z.LINE_STYLE;h=d;A.strokeCommands.lineStyle(h.buffer.o[h.oPos],h.buffer.i[h.iPos],1,h.buffer.b[h.bPos],h.buffer.o[h.oPos+1],h.buffer.o[h.oPos+2],h.buffer.o[h.oPos+3],h.buffer.f[h.fPos+1]);break;case 17:switch(d.prev._hx_index){case 0:d.oPos+=2;d.bPos+=2;break;case 1:d.iPos+=1;d.fPos+=1;break;case 2:d.oPos+=4;d.iiPos+=2;d.ffPos+=1;d.fPos+=1;break;case 3:d.oPos+=1;break;
case 4:d.fPos+=6;break;case 5:d.fPos+=4;break;case 6:d.fPos+=3;break;case 7:d.fPos+=4;break;case 8:d.oPos+=3;break;case 9:d.fPos+=4;break;case 10:d.fPos+=5;d.oPos+=1;break;case 12:d.oPos+=4;break;case 14:d.oPos+=2;d.bPos+=2;break;case 15:d.oPos+=4;d.iiPos+=2;d.ffPos+=1;d.fPos+=1;break;case 16:d.oPos+=4;d.iPos+=1;d.fPos+=2;d.bPos+=1;break;case 17:d.fPos+=2;break;case 18:d.fPos+=2;break;case 19:d.oPos+=1;break;case 20:d.oPos+=1}d.prev=Z.LINE_TO;h=d;A.fillCommands.lineTo(h.buffer.f[h.fPos],h.buffer.f[h.fPos+
1]);A.strokeCommands.lineTo(h.buffer.f[h.fPos],h.buffer.f[h.fPos+1]);break;case 18:switch(d.prev._hx_index){case 0:d.oPos+=2;d.bPos+=2;break;case 1:d.iPos+=1;d.fPos+=1;break;case 2:d.oPos+=4;d.iiPos+=2;d.ffPos+=1;d.fPos+=1;break;case 3:d.oPos+=1;break;case 4:d.fPos+=6;break;case 5:d.fPos+=4;break;case 6:d.fPos+=3;break;case 7:d.fPos+=4;break;case 8:d.oPos+=3;break;case 9:d.fPos+=4;break;case 10:d.fPos+=5;d.oPos+=1;break;case 12:d.oPos+=4;break;case 14:d.oPos+=2;d.bPos+=2;break;case 15:d.oPos+=4;d.iiPos+=
2;d.ffPos+=1;d.fPos+=1;break;case 16:d.oPos+=4;d.iPos+=1;d.fPos+=2;d.bPos+=1;break;case 17:d.fPos+=2;break;case 18:d.fPos+=2;break;case 19:d.oPos+=1;break;case 20:d.oPos+=1}d.prev=Z.MOVE_TO;h=d;A.fillCommands.moveTo(h.buffer.f[h.fPos],h.buffer.f[h.fPos+1]);A.strokeCommands.moveTo(h.buffer.f[h.fPos],h.buffer.f[h.fPos+1]);break;case 21:A.windingRule="evenodd";break;case 22:A.windingRule="nonzero";break;default:switch(d.prev._hx_index){case 0:d.oPos+=2;d.bPos+=2;break;case 1:d.iPos+=1;d.fPos+=1;break;
case 2:d.oPos+=4;d.iiPos+=2;d.ffPos+=1;d.fPos+=1;break;case 3:d.oPos+=1;break;case 4:d.fPos+=6;break;case 5:d.fPos+=4;break;case 6:d.fPos+=3;break;case 7:d.fPos+=4;break;case 8:d.oPos+=3;break;case 9:d.fPos+=4;break;case 10:d.fPos+=5;d.oPos+=1;break;case 12:d.oPos+=4;break;case 14:d.oPos+=2;d.bPos+=2;break;case 15:d.oPos+=4;d.iiPos+=2;d.ffPos+=1;d.fPos+=1;break;case 16:d.oPos+=4;d.iPos+=1;d.fPos+=2;d.bPos+=1;break;case 17:d.fPos+=2;break;case 18:d.fPos+=2;break;case 19:d.oPos+=1;break;case 20:d.oPos+=
1}d.prev=h}}k=!1;0<A.fillCommands.get_length()&&A.endFill();A.hasFill&&A.context.isPointInPath(b,c,A.windingRule)&&(k=!0);0<A.strokeCommands.get_length()&&A.endStroke();A.hasStroke&&A.context.isPointInStroke(b,c)&&(k=!0);d.destroy();a.__canvas=e;a.__context=f;return k};A.normalizeUVT=function(a,b){null==b&&(b=!1);for(var c=-Infinity,d,e=a.get_length(),f=1,k=e+1;f<k;)d=f++,b&&0==d%3||(d=a.get(d-1),c<d&&(c=d));if(!b)return{max:c,uvt:a};f=M.toFloatVector(null);k=1;for(e+=1;k<e;)d=k++,b&&0==d%3||f.push(a.get(d-
1));return{max:c,uvt:f}};A.playCommands=function(a,b){null==b&&(b=!1);A.bounds=A.graphics.__bounds;var c=A.bounds.x,d=A.bounds.y,e=0,f=0,k=!1,m=0,h=0,n=!1;A.windingRule="evenodd";A.setSmoothing(!0);var g=!1,l=new de(a),p,y,r,q=null,t=null,z=0,w=a.types;a:for(;z<w.length;){var v=w[z];++z;switch(v._hx_index){case 0:switch(l.prev._hx_index){case 0:l.oPos+=2;l.bPos+=2;break;case 1:l.iPos+=1;l.fPos+=1;break;case 2:l.oPos+=4;l.iiPos+=2;l.ffPos+=1;l.fPos+=1;break;case 3:l.oPos+=1;break;case 4:l.fPos+=6;
break;case 5:l.fPos+=4;break;case 6:l.fPos+=3;break;case 7:l.fPos+=4;break;case 8:l.oPos+=3;break;case 9:l.fPos+=4;break;case 10:l.fPos+=5;l.oPos+=1;break;case 12:l.oPos+=4;break;case 14:l.oPos+=2;l.bPos+=2;break;case 15:l.oPos+=4;l.iiPos+=2;l.ffPos+=1;l.fPos+=1;break;case 16:l.oPos+=4;l.iPos+=1;l.fPos+=2;l.bPos+=1;break;case 17:l.fPos+=2;break;case 18:l.fPos+=2;break;case 19:l.oPos+=1;break;case 20:l.oPos+=1}l.prev=Z.BEGIN_BITMAP_FILL;var O=l;A.bitmapFill=O.buffer.o[O.oPos];A.context.fillStyle=A.createBitmapFill(O.buffer.o[O.oPos],
O.buffer.b[O.bPos],O.buffer.b[O.bPos+1]);A.hasFill=!0;null!=O.buffer.o[O.oPos+1]?(A.pendingMatrix=O.buffer.o[O.oPos+1],A.inversePendingMatrix=O.buffer.o[O.oPos+1].clone(),A.inversePendingMatrix.invert()):(A.pendingMatrix=null,A.inversePendingMatrix=null);break;case 1:switch(l.prev._hx_index){case 0:l.oPos+=2;l.bPos+=2;break;case 1:l.iPos+=1;l.fPos+=1;break;case 2:l.oPos+=4;l.iiPos+=2;l.ffPos+=1;l.fPos+=1;break;case 3:l.oPos+=1;break;case 4:l.fPos+=6;break;case 5:l.fPos+=4;break;case 6:l.fPos+=3;break;
case 7:l.fPos+=4;break;case 8:l.oPos+=3;break;case 9:l.fPos+=4;break;case 10:l.fPos+=5;l.oPos+=1;break;case 12:l.oPos+=4;break;case 14:l.oPos+=2;l.bPos+=2;break;case 15:l.oPos+=4;l.iiPos+=2;l.ffPos+=1;l.fPos+=1;break;case 16:l.oPos+=4;l.iPos+=1;l.fPos+=2;l.bPos+=1;break;case 17:l.fPos+=2;break;case 18:l.fPos+=2;break;case 19:l.oPos+=1;break;case 20:l.oPos+=1}l.prev=Z.BEGIN_FILL;var u=l;if(.005>u.buffer.f[u.fPos])A.hasFill=!1;else{if(1==u.buffer.f[u.fPos]){var x=Y.hex(u.buffer.i[u.iPos]&16777215,6);
A.context.fillStyle="#"+x}else{var B=(u.buffer.i[u.iPos]&16711680)>>>16;var F=(u.buffer.i[u.iPos]&65280)>>>8;var qa=u.buffer.i[u.iPos]&255;A.context.fillStyle="rgba("+B+", "+F+", "+qa+", "+u.buffer.f[u.fPos]+")"}A.bitmapFill=null;A.setSmoothing(!0);A.hasFill=!0}break;case 2:switch(l.prev._hx_index){case 0:l.oPos+=2;l.bPos+=2;break;case 1:l.iPos+=1;l.fPos+=1;break;case 2:l.oPos+=4;l.iiPos+=2;l.ffPos+=1;l.fPos+=1;break;case 3:l.oPos+=1;break;case 4:l.fPos+=6;break;case 5:l.fPos+=4;break;case 6:l.fPos+=
3;break;case 7:l.fPos+=4;break;case 8:l.oPos+=3;break;case 9:l.fPos+=4;break;case 10:l.fPos+=5;l.oPos+=1;break;case 12:l.oPos+=4;break;case 14:l.oPos+=2;l.bPos+=2;break;case 15:l.oPos+=4;l.iiPos+=2;l.ffPos+=1;l.fPos+=1;break;case 16:l.oPos+=4;l.iPos+=1;l.fPos+=2;l.bPos+=1;break;case 17:l.fPos+=2;break;case 18:l.fPos+=2;break;case 19:l.oPos+=1;break;case 20:l.oPos+=1}l.prev=Z.BEGIN_GRADIENT_FILL;var L=l;A.context.fillStyle=A.createGradientPattern(L.buffer.o[L.oPos],L.buffer.ii[L.iiPos],L.buffer.ff[L.ffPos],
L.buffer.ii[L.iiPos+1],L.buffer.o[L.oPos+1],L.buffer.o[L.oPos+2],L.buffer.o[L.oPos+3],L.buffer.f[L.fPos]);A.bitmapFill=null;A.setSmoothing(!0);A.hasFill=!0;break;case 3:switch(l.prev._hx_index){case 0:l.oPos+=2;l.bPos+=2;break;case 1:l.iPos+=1;l.fPos+=1;break;case 2:l.oPos+=4;l.iiPos+=2;l.ffPos+=1;l.fPos+=1;break;case 3:l.oPos+=1;break;case 4:l.fPos+=6;break;case 5:l.fPos+=4;break;case 6:l.fPos+=3;break;case 7:l.fPos+=4;break;case 8:l.oPos+=3;break;case 9:l.fPos+=4;break;case 10:l.fPos+=5;l.oPos+=
1;break;case 12:l.oPos+=4;break;case 14:l.oPos+=2;l.bPos+=2;break;case 15:l.oPos+=4;l.iiPos+=2;l.ffPos+=1;l.fPos+=1;break;case 16:l.oPos+=4;l.iPos+=1;l.fPos+=2;l.bPos+=1;break;case 17:l.fPos+=2;break;case 18:l.fPos+=2;break;case 19:l.oPos+=1;break;case 20:l.oPos+=1}l.prev=Z.BEGIN_SHADER_FILL;var Ia=l,Ca=Ia.buffer.o[Ia.oPos];0<Ca.inputCount&&(A.bitmapFill=Ca.inputs[0],A.context.fillStyle=A.createBitmapFill(A.bitmapFill,0!=Ca.inputWrap[0],5!=Ca.inputFilter[0]),A.hasFill=!0,A.pendingMatrix=null,A.inversePendingMatrix=
null);break;case 4:switch(l.prev._hx_index){case 0:l.oPos+=2;l.bPos+=2;break;case 1:l.iPos+=1;l.fPos+=1;break;case 2:l.oPos+=4;l.iiPos+=2;l.ffPos+=1;l.fPos+=1;break;case 3:l.oPos+=1;break;case 4:l.fPos+=6;break;case 5:l.fPos+=4;break;case 6:l.fPos+=3;break;case 7:l.fPos+=4;break;case 8:l.oPos+=3;break;case 9:l.fPos+=4;break;case 10:l.fPos+=5;l.oPos+=1;break;case 12:l.oPos+=4;break;case 14:l.oPos+=2;l.bPos+=2;break;case 15:l.oPos+=4;l.iiPos+=2;l.ffPos+=1;l.fPos+=1;break;case 16:l.oPos+=4;l.iPos+=1;
l.fPos+=2;l.bPos+=1;break;case 17:l.fPos+=2;break;case 18:l.fPos+=2;break;case 19:l.oPos+=1;break;case 20:l.oPos+=1}l.prev=Z.CUBIC_CURVE_TO;var ja=l;g=!0;A.context.bezierCurveTo(ja.buffer.f[ja.fPos]-c,ja.buffer.f[ja.fPos+1]-d,ja.buffer.f[ja.fPos+2]-c,ja.buffer.f[ja.fPos+3]-d,ja.buffer.f[ja.fPos+4]-c,ja.buffer.f[ja.fPos+5]-d);break;case 5:switch(l.prev._hx_index){case 0:l.oPos+=2;l.bPos+=2;break;case 1:l.iPos+=1;l.fPos+=1;break;case 2:l.oPos+=4;l.iiPos+=2;l.ffPos+=1;l.fPos+=1;break;case 3:l.oPos+=
1;break;case 4:l.fPos+=6;break;case 5:l.fPos+=4;break;case 6:l.fPos+=3;break;case 7:l.fPos+=4;break;case 8:l.oPos+=3;break;case 9:l.fPos+=4;break;case 10:l.fPos+=5;l.oPos+=1;break;case 12:l.oPos+=4;break;case 14:l.oPos+=2;l.bPos+=2;break;case 15:l.oPos+=4;l.iiPos+=2;l.ffPos+=1;l.fPos+=1;break;case 16:l.oPos+=4;l.iPos+=1;l.fPos+=2;l.bPos+=1;break;case 17:l.fPos+=2;break;case 18:l.fPos+=2;break;case 19:l.oPos+=1;break;case 20:l.oPos+=1}l.prev=Z.CURVE_TO;var D=l;g=!0;A.context.quadraticCurveTo(D.buffer.f[D.fPos]-
c,D.buffer.f[D.fPos+1]-d,D.buffer.f[D.fPos+2]-c,D.buffer.f[D.fPos+3]-d);break;case 6:switch(l.prev._hx_index){case 0:l.oPos+=2;l.bPos+=2;break;case 1:l.iPos+=1;l.fPos+=1;break;case 2:l.oPos+=4;l.iiPos+=2;l.ffPos+=1;l.fPos+=1;break;case 3:l.oPos+=1;break;case 4:l.fPos+=6;break;case 5:l.fPos+=4;break;case 6:l.fPos+=3;break;case 7:l.fPos+=4;break;case 8:l.oPos+=3;break;case 9:l.fPos+=4;break;case 10:l.fPos+=5;l.oPos+=1;break;case 12:l.oPos+=4;break;case 14:l.oPos+=2;l.bPos+=2;break;case 15:l.oPos+=4;
l.iiPos+=2;l.ffPos+=1;l.fPos+=1;break;case 16:l.oPos+=4;l.iPos+=1;l.fPos+=2;l.bPos+=1;break;case 17:l.fPos+=2;break;case 18:l.fPos+=2;break;case 19:l.oPos+=1;break;case 20:l.oPos+=1}l.prev=Z.DRAW_CIRCLE;var J=l;g=!0;A.context.moveTo(J.buffer.f[J.fPos]-c+J.buffer.f[J.fPos+2],J.buffer.f[J.fPos+1]-d);A.context.arc(J.buffer.f[J.fPos]-c,J.buffer.f[J.fPos+1]-d,J.buffer.f[J.fPos+2],0,2*Math.PI,!0);break;case 7:switch(l.prev._hx_index){case 0:l.oPos+=2;l.bPos+=2;break;case 1:l.iPos+=1;l.fPos+=1;break;case 2:l.oPos+=
4;l.iiPos+=2;l.ffPos+=1;l.fPos+=1;break;case 3:l.oPos+=1;break;case 4:l.fPos+=6;break;case 5:l.fPos+=4;break;case 6:l.fPos+=3;break;case 7:l.fPos+=4;break;case 8:l.oPos+=3;break;case 9:l.fPos+=4;break;case 10:l.fPos+=5;l.oPos+=1;break;case 12:l.oPos+=4;break;case 14:l.oPos+=2;l.bPos+=2;break;case 15:l.oPos+=4;l.iiPos+=2;l.ffPos+=1;l.fPos+=1;break;case 16:l.oPos+=4;l.iPos+=1;l.fPos+=2;l.bPos+=1;break;case 17:l.fPos+=2;break;case 18:l.fPos+=2;break;case 19:l.oPos+=1;break;case 20:l.oPos+=1}l.prev=Z.DRAW_ELLIPSE;
var ba=l;g=!0;var ha=ba.buffer.f[ba.fPos];var N=ba.buffer.f[ba.fPos+1];var aa=ba.buffer.f[ba.fPos+2];var mb=ba.buffer.f[ba.fPos+3];ha-=c;N-=d;var S=aa/2*.5522848;var ma=mb/2*.5522848;var W=ha+aa;var fa=N+mb;var U=ha+aa/2;var Ja=N+mb/2;A.context.moveTo(ha,Ja);A.context.bezierCurveTo(ha,Ja-ma,U-S,N,U,N);A.context.bezierCurveTo(U+S,N,W,Ja-ma,W,Ja);A.context.bezierCurveTo(W,Ja+ma,U+S,fa,U,fa);A.context.bezierCurveTo(U-S,fa,ha,Ja+ma,ha,Ja);break;case 8:switch(l.prev._hx_index){case 0:l.oPos+=2;l.bPos+=
2;break;case 1:l.iPos+=1;l.fPos+=1;break;case 2:l.oPos+=4;l.iiPos+=2;l.ffPos+=1;l.fPos+=1;break;case 3:l.oPos+=1;break;case 4:l.fPos+=6;break;case 5:l.fPos+=4;break;case 6:l.fPos+=3;break;case 7:l.fPos+=4;break;case 8:l.oPos+=3;break;case 9:l.fPos+=4;break;case 10:l.fPos+=5;l.oPos+=1;break;case 12:l.oPos+=4;break;case 14:l.oPos+=2;l.bPos+=2;break;case 15:l.oPos+=4;l.iiPos+=2;l.ffPos+=1;l.fPos+=1;break;case 16:l.oPos+=4;l.iPos+=1;l.fPos+=2;l.bPos+=1;break;case 17:l.fPos+=2;break;case 18:l.fPos+=2;
break;case 19:l.oPos+=1;break;case 20:l.oPos+=1}l.prev=Z.DRAW_QUADS;var V=l,ia=V.buffer.o[V.oPos],Pa=V.buffer.o[V.oPos+1],R=V.buffer.o[V.oPos+2],Q=null!=Pa,Ma=!1,Ta=!1,T=Q?Pa.get_length():Math.floor(ia.get_length()/4);if(0==T)return;null!=R&&(R.get_length()>=6*T?Ta=Ma=!0:R.get_length()>=4*T?Ma=!0:R.get_length()>=2*T&&(Ta=!0));var X=ya.__pool.get(),ka=va.__pool.get(),pa=A.graphics.__renderTransform;A.context.save();for(var $a=0,la=T;$a<la;){var G=$a++;var ra=Q?4*Pa.get(G):4*G;if(!(0>ra||(X.setTo(ia.get(ra),
ia.get(ra+1),ia.get(ra+2),ia.get(ra+3)),0>=X.width||0>=X.height))){if(Ma&&Ta){var na=6*G;ka.setTo(R.get(na),R.get(na+1),R.get(na+2),R.get(na+3),R.get(na+4),R.get(na+5))}else Ma?(na=4*G,ka.setTo(R.get(na),R.get(na+1),R.get(na+2),R.get(na+3),X.x,X.y)):Ta?(na=2*G,ka.tx=R.get(na),ka.ty=R.get(na+1)):(ka.tx=X.x,ka.ty=X.y);ka.tx+=e-c;ka.ty+=f-d;ka.concat(pa);A.context.setTransform(ka.a,ka.b,ka.c,ka.d,ka.tx,ka.ty);null!=A.bitmapFill?A.context.drawImage(A.bitmapFill.image.get_src(),X.x,X.y,X.width,X.height,
0,0,X.width,X.height):A.context.fillRect(0,0,X.width,X.height)}}ya.__pool.release(X);va.__pool.release(ka);A.context.restore();break;case 9:switch(l.prev._hx_index){case 0:l.oPos+=2;l.bPos+=2;break;case 1:l.iPos+=1;l.fPos+=1;break;case 2:l.oPos+=4;l.iiPos+=2;l.ffPos+=1;l.fPos+=1;break;case 3:l.oPos+=1;break;case 4:l.fPos+=6;break;case 5:l.fPos+=4;break;case 6:l.fPos+=3;break;case 7:l.fPos+=4;break;case 8:l.oPos+=3;break;case 9:l.fPos+=4;break;case 10:l.fPos+=5;l.oPos+=1;break;case 12:l.oPos+=4;break;
case 14:l.oPos+=2;l.bPos+=2;break;case 15:l.oPos+=4;l.iiPos+=2;l.ffPos+=1;l.fPos+=1;break;case 16:l.oPos+=4;l.iPos+=1;l.fPos+=2;l.bPos+=1;break;case 17:l.fPos+=2;break;case 18:l.fPos+=2;break;case 19:l.oPos+=1;break;case 20:l.oPos+=1}l.prev=Z.DRAW_RECT;var ea=l;var ua=!1;if(null!=A.bitmapFill&&!A.hitTesting){var Ha=r=y=p=0;var Ba=!0;if(null!=A.pendingMatrix)if(0!=A.pendingMatrix.b||0!=A.pendingMatrix.c)Ba=!1;else{null==q&&(q=ob.__pool.get());null==t&&(t=ob.__pool.get());q.setTo(ea.buffer.f[ea.fPos],
ea.buffer.f[ea.fPos+1]);var ta=A.inversePendingMatrix,qb=q.x,wa=q.y;q.x=qb*ta.a+wa*ta.c+ta.tx;q.y=qb*ta.b+wa*ta.d+ta.ty;t.setTo(ea.buffer.f[ea.fPos]+ea.buffer.f[ea.fPos+2],ea.buffer.f[ea.fPos+1]+ea.buffer.f[ea.fPos+3]);var xa=A.inversePendingMatrix,sa=t.x,Fa=t.y;t.x=sa*xa.a+Fa*xa.c+xa.tx;t.y=sa*xa.b+Fa*xa.d+xa.ty;p=q.y;Ha=q.x;r=t.y;y=t.x}else p=ea.buffer.f[ea.fPos+1],Ha=ea.buffer.f[ea.fPos],r=ea.buffer.f[ea.fPos+1]+ea.buffer.f[ea.fPos+3],y=ea.buffer.f[ea.fPos]+ea.buffer.f[ea.fPos+2];Ba&&0<=p&&0<=
Ha&&y<=A.bitmapFill.width&&r<=A.bitmapFill.height&&(ua=!0,A.hitTesting||A.context.drawImage(A.bitmapFill.image.get_src(),Ha,p,y-Ha,r-p,ea.buffer.f[ea.fPos]-c,ea.buffer.f[ea.fPos+1]-d,ea.buffer.f[ea.fPos+2],ea.buffer.f[ea.fPos+3]))}ua||(g=!0,A.context.rect(ea.buffer.f[ea.fPos]-c,ea.buffer.f[ea.fPos+1]-d,ea.buffer.f[ea.fPos+2],ea.buffer.f[ea.fPos+3]));break;case 10:switch(l.prev._hx_index){case 0:l.oPos+=2;l.bPos+=2;break;case 1:l.iPos+=1;l.fPos+=1;break;case 2:l.oPos+=4;l.iiPos+=2;l.ffPos+=1;l.fPos+=
1;break;case 3:l.oPos+=1;break;case 4:l.fPos+=6;break;case 5:l.fPos+=4;break;case 6:l.fPos+=3;break;case 7:l.fPos+=4;break;case 8:l.oPos+=3;break;case 9:l.fPos+=4;break;case 10:l.fPos+=5;l.oPos+=1;break;case 12:l.oPos+=4;break;case 14:l.oPos+=2;l.bPos+=2;break;case 15:l.oPos+=4;l.iiPos+=2;l.ffPos+=1;l.fPos+=1;break;case 16:l.oPos+=4;l.iPos+=1;l.fPos+=2;l.bPos+=1;break;case 17:l.fPos+=2;break;case 18:l.fPos+=2;break;case 19:l.oPos+=1;break;case 20:l.oPos+=1}l.prev=Z.DRAW_ROUND_RECT;var Da=l;g=!0;A.drawRoundRect(Da.buffer.f[Da.fPos]-
c,Da.buffer.f[Da.fPos+1]-d,Da.buffer.f[Da.fPos+2],Da.buffer.f[Da.fPos+3],Da.buffer.f[Da.fPos+4],Da.buffer.o[Da.oPos]);break;case 12:switch(l.prev._hx_index){case 0:l.oPos+=2;l.bPos+=2;break;case 1:l.iPos+=1;l.fPos+=1;break;case 2:l.oPos+=4;l.iiPos+=2;l.ffPos+=1;l.fPos+=1;break;case 3:l.oPos+=1;break;case 4:l.fPos+=6;break;case 5:l.fPos+=4;break;case 6:l.fPos+=3;break;case 7:l.fPos+=4;break;case 8:l.oPos+=3;break;case 9:l.fPos+=4;break;case 10:l.fPos+=5;l.oPos+=1;break;case 12:l.oPos+=4;break;case 14:l.oPos+=
2;l.bPos+=2;break;case 15:l.oPos+=4;l.iiPos+=2;l.ffPos+=1;l.fPos+=1;break;case 16:l.oPos+=4;l.iPos+=1;l.fPos+=2;l.bPos+=1;break;case 17:l.fPos+=2;break;case 18:l.fPos+=2;break;case 19:l.oPos+=1;break;case 20:l.oPos+=1}l.prev=Z.DRAW_TRIANGLES;var da=l,Ga=da.buffer.o[da.oPos],Ka=da.buffer.o[da.oPos+1],Aa=da.buffer.o[da.oPos+2],La=null,Fb=null==A.bitmapFill;if(Fb&&null!=Aa)break a;if(!Fb){if(null==Aa){Aa=M.toFloatVector(null);for(var Na=0,Oa=Ga.get_length()/2|0;Na<Oa;){var Qa=Na++;Aa.push(Ga.get(2*Qa)-
c/A.bitmapFill.width);Aa.push(Ga.get(2*Qa+1)-d/A.bitmapFill.height)}}var Ra=Aa.get_length()!=Ga.get_length(),Pb=A.normalizeUVT(Aa,Ra),Va=Pb.max;Aa=Pb.uvt;La=1<Va?A.createTempPatternCanvas(A.bitmapFill,A.bitmapRepeat,A.bounds.width|0,A.bounds.height|0):A.createTempPatternCanvas(A.bitmapFill,A.bitmapRepeat,A.bitmapFill.width,A.bitmapFill.height)}for(var Sa=0,Za=Ka.get_length(),Xa,Ya,ab,cb,nb,eb,hb,sb,tb,ib,ca,db,Ob,fb,gb,Kb,rb,jb,kb,lb,P,pb,vb,wb,xb,Xb,E,Ea;Sa<Za;){Xa=Sa;Ya=Sa+1;ab=Sa+2;cb=2*Ka.get(Xa);
nb=2*Ka.get(Xa)+1;eb=2*Ka.get(Ya);hb=2*Ka.get(Ya)+1;sb=2*Ka.get(ab);tb=2*Ka.get(ab)+1;ib=Ga.get(cb)-c;ca=Ga.get(nb)-d;db=Ga.get(eb)-c;Ob=Ga.get(hb)-d;fb=Ga.get(sb)-c;gb=Ga.get(tb)-d;switch(da.buffer.o[da.oPos+3]){case 0:if(0>(db-ib)*(gb-ca)-(Ob-ca)*(fb-ib)){Sa+=3;continue}break;case 2:if(!(0>(db-ib)*(gb-ca)-(Ob-ca)*(fb-ib))){Sa+=3;continue}}Fb?(A.context.beginPath(),A.context.moveTo(ib,ca),A.context.lineTo(db,Ob),A.context.lineTo(fb,gb),A.context.closePath(),A.hitTesting||A.context.fill(A.windingRule),
Sa+=3):(Kb=Aa.get(cb)*La.width,jb=Aa.get(eb)*La.width,lb=Aa.get(sb)*La.width,rb=Aa.get(nb)*La.height,kb=Aa.get(hb)*La.height,P=Aa.get(tb)*La.height,pb=Kb*(P-kb)-jb*P+lb*kb+(jb-lb)*rb,0==pb?(Sa+=3,A.context.restore()):(A.context.save(),A.context.beginPath(),A.context.moveTo(ib,ca),A.context.lineTo(db,Ob),A.context.lineTo(fb,gb),A.context.closePath(),A.context.clip(),vb=-(rb*(fb-db)-kb*fb+P*db+(kb-P)*ib)/pb,wb=(kb*gb+rb*(Ob-gb)-P*Ob+(P-kb)*ca)/pb,xb=(Kb*(fb-db)-jb*fb+lb*db+(jb-lb)*ib)/pb,Xb=-(jb*gb+
Kb*(Ob-gb)-lb*Ob+(lb-jb)*ca)/pb,E=(Kb*(P*db-kb*fb)+rb*(jb*fb-lb*db)+(lb*kb-jb*P)*ib)/pb,Ea=(Kb*(P*Ob-kb*gb)+rb*(jb*gb-lb*Ob)+(lb*kb-jb*P)*ca)/pb,A.context.transform(vb,wb,xb,Xb,E,Ea),A.context.drawImage(La,0,0,La.width,La.height),A.context.restore(),Sa+=3))}break;case 14:switch(l.prev._hx_index){case 0:l.oPos+=2;l.bPos+=2;break;case 1:l.iPos+=1;l.fPos+=1;break;case 2:l.oPos+=4;l.iiPos+=2;l.ffPos+=1;l.fPos+=1;break;case 3:l.oPos+=1;break;case 4:l.fPos+=6;break;case 5:l.fPos+=4;break;case 6:l.fPos+=
3;break;case 7:l.fPos+=4;break;case 8:l.oPos+=3;break;case 9:l.fPos+=4;break;case 10:l.fPos+=5;l.oPos+=1;break;case 12:l.oPos+=4;break;case 14:l.oPos+=2;l.bPos+=2;break;case 15:l.oPos+=4;l.iiPos+=2;l.ffPos+=1;l.fPos+=1;break;case 16:l.oPos+=4;l.iPos+=1;l.fPos+=2;l.bPos+=1;break;case 17:l.fPos+=2;break;case 18:l.fPos+=2;break;case 19:l.oPos+=1;break;case 20:l.oPos+=1}l.prev=Z.LINE_BITMAP_STYLE;var za=l;b&&A.hasStroke&&A.closePath();A.context.moveTo(e-c,f-d);A.context.strokeStyle=A.createBitmapFill(za.buffer.o[za.oPos],
za.buffer.b[za.bPos],za.buffer.b[za.bPos+1]);A.hasStroke=!0;break;case 15:switch(l.prev._hx_index){case 0:l.oPos+=2;l.bPos+=2;break;case 1:l.iPos+=1;l.fPos+=1;break;case 2:l.oPos+=4;l.iiPos+=2;l.ffPos+=1;l.fPos+=1;break;case 3:l.oPos+=1;break;case 4:l.fPos+=6;break;case 5:l.fPos+=4;break;case 6:l.fPos+=3;break;case 7:l.fPos+=4;break;case 8:l.oPos+=3;break;case 9:l.fPos+=4;break;case 10:l.fPos+=5;l.oPos+=1;break;case 12:l.oPos+=4;break;case 14:l.oPos+=2;l.bPos+=2;break;case 15:l.oPos+=4;l.iiPos+=2;
l.ffPos+=1;l.fPos+=1;break;case 16:l.oPos+=4;l.iPos+=1;l.fPos+=2;l.bPos+=1;break;case 17:l.fPos+=2;break;case 18:l.fPos+=2;break;case 19:l.oPos+=1;break;case 20:l.oPos+=1}l.prev=Z.LINE_GRADIENT_STYLE;var Ib=l;b&&A.hasStroke&&A.closePath();A.context.moveTo(e-c,f-d);A.context.strokeStyle=A.createGradientPattern(Ib.buffer.o[Ib.oPos],Ib.buffer.ii[Ib.iiPos],Ib.buffer.ff[Ib.ffPos],Ib.buffer.ii[Ib.iiPos+1],Ib.buffer.o[Ib.oPos+1],Ib.buffer.o[Ib.oPos+2],Ib.buffer.o[Ib.oPos+3],Ib.buffer.f[Ib.fPos]);A.setSmoothing(!0);
A.hasStroke=!0;break;case 16:switch(l.prev._hx_index){case 0:l.oPos+=2;l.bPos+=2;break;case 1:l.iPos+=1;l.fPos+=1;break;case 2:l.oPos+=4;l.iiPos+=2;l.ffPos+=1;l.fPos+=1;break;case 3:l.oPos+=1;break;case 4:l.fPos+=6;break;case 5:l.fPos+=4;break;case 6:l.fPos+=3;break;case 7:l.fPos+=4;break;case 8:l.oPos+=3;break;case 9:l.fPos+=4;break;case 10:l.fPos+=5;l.oPos+=1;break;case 12:l.oPos+=4;break;case 14:l.oPos+=2;l.bPos+=2;break;case 15:l.oPos+=4;l.iiPos+=2;l.ffPos+=1;l.fPos+=1;break;case 16:l.oPos+=4;
l.iPos+=1;l.fPos+=2;l.bPos+=1;break;case 17:l.fPos+=2;break;case 18:l.fPos+=2;break;case 19:l.oPos+=1;break;case 20:l.oPos+=1}l.prev=Z.LINE_STYLE;var bb=l;b&&A.hasStroke&&A.closePath(!0);A.context.moveTo(e-c,f-d);if(null==bb.buffer.o[bb.oPos])A.hasStroke=!1;else{A.context.lineWidth=0<bb.buffer.o[bb.oPos]?bb.buffer.o[bb.oPos]:1;var Ub=null==bb.buffer.o[bb.oPos+3]?"round":hm.toString(bb.buffer.o[bb.oPos+3]).toLowerCase();A.context.lineJoin=Ub;var zb=null==bb.buffer.o[bb.oPos+2]?"round":0==bb.buffer.o[bb.oPos+
2]?"butt":im.toString(bb.buffer.o[bb.oPos+2]).toLowerCase();A.context.lineCap=zb;A.context.miterLimit=bb.buffer.f[bb.fPos+1];if(1==bb.buffer.f[bb.fPos]){var Gb=Y.hex(bb.buffer.i[bb.iPos]&16777215,6);A.context.strokeStyle="#"+Gb}else B=(bb.buffer.i[bb.iPos]&16711680)>>>16,F=(bb.buffer.i[bb.iPos]&65280)>>>8,qa=bb.buffer.i[bb.iPos]&255,A.context.strokeStyle="rgba("+B+", "+F+", "+qa+", "+bb.buffer.f[bb.fPos]+")";A.setSmoothing(!0);A.hasStroke=!0}break;case 17:switch(l.prev._hx_index){case 0:l.oPos+=2;
l.bPos+=2;break;case 1:l.iPos+=1;l.fPos+=1;break;case 2:l.oPos+=4;l.iiPos+=2;l.ffPos+=1;l.fPos+=1;break;case 3:l.oPos+=1;break;case 4:l.fPos+=6;break;case 5:l.fPos+=4;break;case 6:l.fPos+=3;break;case 7:l.fPos+=4;break;case 8:l.oPos+=3;break;case 9:l.fPos+=4;break;case 10:l.fPos+=5;l.oPos+=1;break;case 12:l.oPos+=4;break;case 14:l.oPos+=2;l.bPos+=2;break;case 15:l.oPos+=4;l.iiPos+=2;l.ffPos+=1;l.fPos+=1;break;case 16:l.oPos+=4;l.iPos+=1;l.fPos+=2;l.bPos+=1;break;case 17:l.fPos+=2;break;case 18:l.fPos+=
2;break;case 19:l.oPos+=1;break;case 20:l.oPos+=1}l.prev=Z.LINE_TO;var Ab=l;g=!0;A.context.lineTo(Ab.buffer.f[Ab.fPos]-c,Ab.buffer.f[Ab.fPos+1]-d);e=Ab.buffer.f[Ab.fPos];f=Ab.buffer.f[Ab.fPos+1];e==m&&f==h&&(k=!0);break;case 18:switch(l.prev._hx_index){case 0:l.oPos+=2;l.bPos+=2;break;case 1:l.iPos+=1;l.fPos+=1;break;case 2:l.oPos+=4;l.iiPos+=2;l.ffPos+=1;l.fPos+=1;break;case 3:l.oPos+=1;break;case 4:l.fPos+=6;break;case 5:l.fPos+=4;break;case 6:l.fPos+=3;break;case 7:l.fPos+=4;break;case 8:l.oPos+=
3;break;case 9:l.fPos+=4;break;case 10:l.fPos+=5;l.oPos+=1;break;case 12:l.oPos+=4;break;case 14:l.oPos+=2;l.bPos+=2;break;case 15:l.oPos+=4;l.iiPos+=2;l.ffPos+=1;l.fPos+=1;break;case 16:l.oPos+=4;l.iPos+=1;l.fPos+=2;l.bPos+=1;break;case 17:l.fPos+=2;break;case 18:l.fPos+=2;break;case 19:l.oPos+=1;break;case 20:l.oPos+=1}l.prev=Z.MOVE_TO;var ub=l;A.context.moveTo(ub.buffer.f[ub.fPos]-c,ub.buffer.f[ub.fPos+1]-d);e=ub.buffer.f[ub.fPos];f=ub.buffer.f[ub.fPos+1];n&&(k=!0);m=ub.buffer.f[ub.fPos];h=ub.buffer.f[ub.fPos+
1];n=!0;break;case 21:A.windingRule="evenodd";break;case 22:A.windingRule="nonzero";break;default:switch(l.prev._hx_index){case 0:l.oPos+=2;l.bPos+=2;break;case 1:l.iPos+=1;l.fPos+=1;break;case 2:l.oPos+=4;l.iiPos+=2;l.ffPos+=1;l.fPos+=1;break;case 3:l.oPos+=1;break;case 4:l.fPos+=6;break;case 5:l.fPos+=4;break;case 6:l.fPos+=3;break;case 7:l.fPos+=4;break;case 8:l.oPos+=3;break;case 9:l.fPos+=4;break;case 10:l.fPos+=5;l.oPos+=1;break;case 12:l.oPos+=4;break;case 14:l.oPos+=2;l.bPos+=2;break;case 15:l.oPos+=
4;l.iiPos+=2;l.ffPos+=1;l.fPos+=1;break;case 16:l.oPos+=4;l.iPos+=1;l.fPos+=2;l.bPos+=1;break;case 17:l.fPos+=2;break;case 18:l.fPos+=2;break;case 19:l.oPos+=1;break;case 20:l.oPos+=1}l.prev=v}}null!=q&&ob.__pool.release(q);null!=t&&ob.__pool.release(t);l.destroy();g&&(b&&A.hasStroke&&(A.hasFill&&k?(A.context.lineTo(m-c,h-d),A.closePath(!1)):k&&e==m&&f==h&&A.closePath(!1),A.hitTesting||A.context.stroke()),b||!A.hasFill&&null==A.bitmapFill||(A.context.translate(-A.bounds.x,-A.bounds.y),null!=A.pendingMatrix?
(A.context.transform(A.pendingMatrix.a,A.pendingMatrix.b,A.pendingMatrix.c,A.pendingMatrix.d,A.pendingMatrix.tx,A.pendingMatrix.ty),A.hitTesting||A.context.fill(A.windingRule),A.context.transform(A.inversePendingMatrix.a,A.inversePendingMatrix.b,A.inversePendingMatrix.c,A.inversePendingMatrix.d,A.inversePendingMatrix.tx,A.inversePendingMatrix.ty)):A.hitTesting||A.context.fill(A.windingRule),A.context.translate(A.bounds.x,A.bounds.y),A.context.closePath()))};A.render=function(a,b){a.__update(b.__worldTransform);
if(a.__softwareDirty){A.hitTesting=!1;A.graphics=a;A.allowSmoothing=b.__allowSmoothing;A.worldAlpha=b.__getAlpha(a.__owner.__worldAlpha);A.bounds=a.__bounds;var c=a.__width,d=a.__height;if(!a.__visible||0==a.__commands.get_length()||null==A.bounds||1>c||1>d)a.__canvas=null,a.__context=null,a.__bitmap=null;else{null==a.__canvas&&(a.__canvas=window.document.createElement("canvas"),a.__context=a.__canvas.getContext("2d"));A.context=a.__context;var e=a.__renderTransform,f=a.__canvas,k=b.pixelRatio,m=
c*k|0,h=d*k|0;b.__setBlendModeContext(A.context,10);b.__isDOM?(f.width==m&&f.height==h?A.context.clearRect(0,0,m,h):(f.width=m,f.height=h,f.style.width=c+"px",f.style.height=d+"px"),c=a.__renderTransform,A.context.setTransform(c.a*k,c.b*k,c.c*k,c.d*k,c.tx*k,c.ty*k)):(f.width==m&&f.height==h?(A.context.closePath(),A.context.setTransform(1,0,0,1,0,0),A.context.clearRect(0,0,m,h)):(f.width=c,f.height=d),A.context.setTransform(e.a,e.b,e.c,e.d,e.tx,e.ty));A.fillCommands.clear();A.strokeCommands.clear();
A.hasFill=!1;A.hasStroke=!1;A.bitmapFill=null;k=A.bitmapRepeat=!1;d=c=0;A.windingRule="evenodd";e=new de(a.__commands);f=0;for(m=a.__commands.types;f<m.length;)switch(h=m[f],++f,h._hx_index){case 0:case 1:case 2:case 3:A.endFill();A.endStroke();if(h==Z.BEGIN_BITMAP_FILL){switch(e.prev._hx_index){case 0:e.oPos+=2;e.bPos+=2;break;case 1:e.iPos+=1;e.fPos+=1;break;case 2:e.oPos+=4;e.iiPos+=2;e.ffPos+=1;e.fPos+=1;break;case 3:e.oPos+=1;break;case 4:e.fPos+=6;break;case 5:e.fPos+=4;break;case 6:e.fPos+=
3;break;case 7:e.fPos+=4;break;case 8:e.oPos+=3;break;case 9:e.fPos+=4;break;case 10:e.fPos+=5;e.oPos+=1;break;case 12:e.oPos+=4;break;case 14:e.oPos+=2;e.bPos+=2;break;case 15:e.oPos+=4;e.iiPos+=2;e.ffPos+=1;e.fPos+=1;break;case 16:e.oPos+=4;e.iPos+=1;e.fPos+=2;e.bPos+=1;break;case 17:e.fPos+=2;break;case 18:e.fPos+=2;break;case 19:e.oPos+=1;break;case 20:e.oPos+=1}e.prev=Z.BEGIN_BITMAP_FILL;h=e;A.fillCommands.beginBitmapFill(h.buffer.o[h.oPos],h.buffer.o[h.oPos+1],h.buffer.b[h.bPos],h.buffer.b[h.bPos+
1]);A.strokeCommands.beginBitmapFill(h.buffer.o[h.oPos],h.buffer.o[h.oPos+1],h.buffer.b[h.bPos],h.buffer.b[h.bPos+1])}else if(h==Z.BEGIN_GRADIENT_FILL){switch(e.prev._hx_index){case 0:e.oPos+=2;e.bPos+=2;break;case 1:e.iPos+=1;e.fPos+=1;break;case 2:e.oPos+=4;e.iiPos+=2;e.ffPos+=1;e.fPos+=1;break;case 3:e.oPos+=1;break;case 4:e.fPos+=6;break;case 5:e.fPos+=4;break;case 6:e.fPos+=3;break;case 7:e.fPos+=4;break;case 8:e.oPos+=3;break;case 9:e.fPos+=4;break;case 10:e.fPos+=5;e.oPos+=1;break;case 12:e.oPos+=
4;break;case 14:e.oPos+=2;e.bPos+=2;break;case 15:e.oPos+=4;e.iiPos+=2;e.ffPos+=1;e.fPos+=1;break;case 16:e.oPos+=4;e.iPos+=1;e.fPos+=2;e.bPos+=1;break;case 17:e.fPos+=2;break;case 18:e.fPos+=2;break;case 19:e.oPos+=1;break;case 20:e.oPos+=1}e.prev=Z.BEGIN_GRADIENT_FILL;h=e;A.fillCommands.beginGradientFill(h.buffer.o[h.oPos],h.buffer.ii[h.iiPos],h.buffer.ff[h.ffPos],h.buffer.ii[h.iiPos+1],h.buffer.o[h.oPos+1],h.buffer.o[h.oPos+2],h.buffer.o[h.oPos+3],h.buffer.f[h.fPos]);A.strokeCommands.beginGradientFill(h.buffer.o[h.oPos],
h.buffer.ii[h.iiPos],h.buffer.ff[h.ffPos],h.buffer.ii[h.iiPos+1],h.buffer.o[h.oPos+1],h.buffer.o[h.oPos+2],h.buffer.o[h.oPos+3],h.buffer.f[h.fPos])}else if(h==Z.BEGIN_SHADER_FILL){switch(e.prev._hx_index){case 0:e.oPos+=2;e.bPos+=2;break;case 1:e.iPos+=1;e.fPos+=1;break;case 2:e.oPos+=4;e.iiPos+=2;e.ffPos+=1;e.fPos+=1;break;case 3:e.oPos+=1;break;case 4:e.fPos+=6;break;case 5:e.fPos+=4;break;case 6:e.fPos+=3;break;case 7:e.fPos+=4;break;case 8:e.oPos+=3;break;case 9:e.fPos+=4;break;case 10:e.fPos+=
5;e.oPos+=1;break;case 12:e.oPos+=4;break;case 14:e.oPos+=2;e.bPos+=2;break;case 15:e.oPos+=4;e.iiPos+=2;e.ffPos+=1;e.fPos+=1;break;case 16:e.oPos+=4;e.iPos+=1;e.fPos+=2;e.bPos+=1;break;case 17:e.fPos+=2;break;case 18:e.fPos+=2;break;case 19:e.oPos+=1;break;case 20:e.oPos+=1}e.prev=Z.BEGIN_SHADER_FILL;h=e;A.fillCommands.beginShaderFill(h.buffer.o[h.oPos]);A.strokeCommands.beginShaderFill(h.buffer.o[h.oPos])}else{switch(e.prev._hx_index){case 0:e.oPos+=2;e.bPos+=2;break;case 1:e.iPos+=1;e.fPos+=1;
break;case 2:e.oPos+=4;e.iiPos+=2;e.ffPos+=1;e.fPos+=1;break;case 3:e.oPos+=1;break;case 4:e.fPos+=6;break;case 5:e.fPos+=4;break;case 6:e.fPos+=3;break;case 7:e.fPos+=4;break;case 8:e.oPos+=3;break;case 9:e.fPos+=4;break;case 10:e.fPos+=5;e.oPos+=1;break;case 12:e.oPos+=4;break;case 14:e.oPos+=2;e.bPos+=2;break;case 15:e.oPos+=4;e.iiPos+=2;e.ffPos+=1;e.fPos+=1;break;case 16:e.oPos+=4;e.iPos+=1;e.fPos+=2;e.bPos+=1;break;case 17:e.fPos+=2;break;case 18:e.fPos+=2;break;case 19:e.oPos+=1;break;case 20:e.oPos+=
1}e.prev=Z.BEGIN_FILL;h=e;A.fillCommands.beginFill(h.buffer.i[h.iPos],h.buffer.f[h.fPos]);A.strokeCommands.beginFill(h.buffer.i[h.iPos],h.buffer.f[h.fPos])}break;case 4:switch(e.prev._hx_index){case 0:e.oPos+=2;e.bPos+=2;break;case 1:e.iPos+=1;e.fPos+=1;break;case 2:e.oPos+=4;e.iiPos+=2;e.ffPos+=1;e.fPos+=1;break;case 3:e.oPos+=1;break;case 4:e.fPos+=6;break;case 5:e.fPos+=4;break;case 6:e.fPos+=3;break;case 7:e.fPos+=4;break;case 8:e.oPos+=3;break;case 9:e.fPos+=4;break;case 10:e.fPos+=5;e.oPos+=
1;break;case 12:e.oPos+=4;break;case 14:e.oPos+=2;e.bPos+=2;break;case 15:e.oPos+=4;e.iiPos+=2;e.ffPos+=1;e.fPos+=1;break;case 16:e.oPos+=4;e.iPos+=1;e.fPos+=2;e.bPos+=1;break;case 17:e.fPos+=2;break;case 18:e.fPos+=2;break;case 19:e.oPos+=1;break;case 20:e.oPos+=1}e.prev=Z.CUBIC_CURVE_TO;h=e;A.fillCommands.cubicCurveTo(h.buffer.f[h.fPos],h.buffer.f[h.fPos+1],h.buffer.f[h.fPos+2],h.buffer.f[h.fPos+3],h.buffer.f[h.fPos+4],h.buffer.f[h.fPos+5]);k?A.strokeCommands.cubicCurveTo(h.buffer.f[h.fPos],h.buffer.f[h.fPos+
1],h.buffer.f[h.fPos+2],h.buffer.f[h.fPos+3],h.buffer.f[h.fPos+4],h.buffer.f[h.fPos+5]):(c=h.buffer.f[h.fPos+4],d=h.buffer.f[h.fPos+5]);break;case 5:switch(e.prev._hx_index){case 0:e.oPos+=2;e.bPos+=2;break;case 1:e.iPos+=1;e.fPos+=1;break;case 2:e.oPos+=4;e.iiPos+=2;e.ffPos+=1;e.fPos+=1;break;case 3:e.oPos+=1;break;case 4:e.fPos+=6;break;case 5:e.fPos+=4;break;case 6:e.fPos+=3;break;case 7:e.fPos+=4;break;case 8:e.oPos+=3;break;case 9:e.fPos+=4;break;case 10:e.fPos+=5;e.oPos+=1;break;case 12:e.oPos+=
4;break;case 14:e.oPos+=2;e.bPos+=2;break;case 15:e.oPos+=4;e.iiPos+=2;e.ffPos+=1;e.fPos+=1;break;case 16:e.oPos+=4;e.iPos+=1;e.fPos+=2;e.bPos+=1;break;case 17:e.fPos+=2;break;case 18:e.fPos+=2;break;case 19:e.oPos+=1;break;case 20:e.oPos+=1}e.prev=Z.CURVE_TO;h=e;A.fillCommands.curveTo(h.buffer.f[h.fPos],h.buffer.f[h.fPos+1],h.buffer.f[h.fPos+2],h.buffer.f[h.fPos+3]);k?A.strokeCommands.curveTo(h.buffer.f[h.fPos],h.buffer.f[h.fPos+1],h.buffer.f[h.fPos+2],h.buffer.f[h.fPos+3]):(c=h.buffer.f[h.fPos+
2],d=h.buffer.f[h.fPos+3]);break;case 6:switch(e.prev._hx_index){case 0:e.oPos+=2;e.bPos+=2;break;case 1:e.iPos+=1;e.fPos+=1;break;case 2:e.oPos+=4;e.iiPos+=2;e.ffPos+=1;e.fPos+=1;break;case 3:e.oPos+=1;break;case 4:e.fPos+=6;break;case 5:e.fPos+=4;break;case 6:e.fPos+=3;break;case 7:e.fPos+=4;break;case 8:e.oPos+=3;break;case 9:e.fPos+=4;break;case 10:e.fPos+=5;e.oPos+=1;break;case 12:e.oPos+=4;break;case 14:e.oPos+=2;e.bPos+=2;break;case 15:e.oPos+=4;e.iiPos+=2;e.ffPos+=1;e.fPos+=1;break;case 16:e.oPos+=
4;e.iPos+=1;e.fPos+=2;e.bPos+=1;break;case 17:e.fPos+=2;break;case 18:e.fPos+=2;break;case 19:e.oPos+=1;break;case 20:e.oPos+=1}e.prev=Z.DRAW_CIRCLE;h=e;A.fillCommands.drawCircle(h.buffer.f[h.fPos],h.buffer.f[h.fPos+1],h.buffer.f[h.fPos+2]);k&&A.strokeCommands.drawCircle(h.buffer.f[h.fPos],h.buffer.f[h.fPos+1],h.buffer.f[h.fPos+2]);break;case 7:switch(e.prev._hx_index){case 0:e.oPos+=2;e.bPos+=2;break;case 1:e.iPos+=1;e.fPos+=1;break;case 2:e.oPos+=4;e.iiPos+=2;e.ffPos+=1;e.fPos+=1;break;case 3:e.oPos+=
1;break;case 4:e.fPos+=6;break;case 5:e.fPos+=4;break;case 6:e.fPos+=3;break;case 7:e.fPos+=4;break;case 8:e.oPos+=3;break;case 9:e.fPos+=4;break;case 10:e.fPos+=5;e.oPos+=1;break;case 12:e.oPos+=4;break;case 14:e.oPos+=2;e.bPos+=2;break;case 15:e.oPos+=4;e.iiPos+=2;e.ffPos+=1;e.fPos+=1;break;case 16:e.oPos+=4;e.iPos+=1;e.fPos+=2;e.bPos+=1;break;case 17:e.fPos+=2;break;case 18:e.fPos+=2;break;case 19:e.oPos+=1;break;case 20:e.oPos+=1}e.prev=Z.DRAW_ELLIPSE;h=e;A.fillCommands.drawEllipse(h.buffer.f[h.fPos],
h.buffer.f[h.fPos+1],h.buffer.f[h.fPos+2],h.buffer.f[h.fPos+3]);k&&A.strokeCommands.drawEllipse(h.buffer.f[h.fPos],h.buffer.f[h.fPos+1],h.buffer.f[h.fPos+2],h.buffer.f[h.fPos+3]);break;case 8:switch(e.prev._hx_index){case 0:e.oPos+=2;e.bPos+=2;break;case 1:e.iPos+=1;e.fPos+=1;break;case 2:e.oPos+=4;e.iiPos+=2;e.ffPos+=1;e.fPos+=1;break;case 3:e.oPos+=1;break;case 4:e.fPos+=6;break;case 5:e.fPos+=4;break;case 6:e.fPos+=3;break;case 7:e.fPos+=4;break;case 8:e.oPos+=3;break;case 9:e.fPos+=4;break;case 10:e.fPos+=
5;e.oPos+=1;break;case 12:e.oPos+=4;break;case 14:e.oPos+=2;e.bPos+=2;break;case 15:e.oPos+=4;e.iiPos+=2;e.ffPos+=1;e.fPos+=1;break;case 16:e.oPos+=4;e.iPos+=1;e.fPos+=2;e.bPos+=1;break;case 17:e.fPos+=2;break;case 18:e.fPos+=2;break;case 19:e.oPos+=1;break;case 20:e.oPos+=1}e.prev=Z.DRAW_QUADS;h=e;A.fillCommands.drawQuads(h.buffer.o[h.oPos],h.buffer.o[h.oPos+1],h.buffer.o[h.oPos+2]);break;case 9:switch(e.prev._hx_index){case 0:e.oPos+=2;e.bPos+=2;break;case 1:e.iPos+=1;e.fPos+=1;break;case 2:e.oPos+=
4;e.iiPos+=2;e.ffPos+=1;e.fPos+=1;break;case 3:e.oPos+=1;break;case 4:e.fPos+=6;break;case 5:e.fPos+=4;break;case 6:e.fPos+=3;break;case 7:e.fPos+=4;break;case 8:e.oPos+=3;break;case 9:e.fPos+=4;break;case 10:e.fPos+=5;e.oPos+=1;break;case 12:e.oPos+=4;break;case 14:e.oPos+=2;e.bPos+=2;break;case 15:e.oPos+=4;e.iiPos+=2;e.ffPos+=1;e.fPos+=1;break;case 16:e.oPos+=4;e.iPos+=1;e.fPos+=2;e.bPos+=1;break;case 17:e.fPos+=2;break;case 18:e.fPos+=2;break;case 19:e.oPos+=1;break;case 20:e.oPos+=1}e.prev=Z.DRAW_RECT;
h=e;A.fillCommands.drawRect(h.buffer.f[h.fPos],h.buffer.f[h.fPos+1],h.buffer.f[h.fPos+2],h.buffer.f[h.fPos+3]);k&&A.strokeCommands.drawRect(h.buffer.f[h.fPos],h.buffer.f[h.fPos+1],h.buffer.f[h.fPos+2],h.buffer.f[h.fPos+3]);break;case 10:switch(e.prev._hx_index){case 0:e.oPos+=2;e.bPos+=2;break;case 1:e.iPos+=1;e.fPos+=1;break;case 2:e.oPos+=4;e.iiPos+=2;e.ffPos+=1;e.fPos+=1;break;case 3:e.oPos+=1;break;case 4:e.fPos+=6;break;case 5:e.fPos+=4;break;case 6:e.fPos+=3;break;case 7:e.fPos+=4;break;case 8:e.oPos+=
3;break;case 9:e.fPos+=4;break;case 10:e.fPos+=5;e.oPos+=1;break;case 12:e.oPos+=4;break;case 14:e.oPos+=2;e.bPos+=2;break;case 15:e.oPos+=4;e.iiPos+=2;e.ffPos+=1;e.fPos+=1;break;case 16:e.oPos+=4;e.iPos+=1;e.fPos+=2;e.bPos+=1;break;case 17:e.fPos+=2;break;case 18:e.fPos+=2;break;case 19:e.oPos+=1;break;case 20:e.oPos+=1}e.prev=Z.DRAW_ROUND_RECT;h=e;A.fillCommands.drawRoundRect(h.buffer.f[h.fPos],h.buffer.f[h.fPos+1],h.buffer.f[h.fPos+2],h.buffer.f[h.fPos+3],h.buffer.f[h.fPos+4],h.buffer.o[h.oPos]);
k&&A.strokeCommands.drawRoundRect(h.buffer.f[h.fPos],h.buffer.f[h.fPos+1],h.buffer.f[h.fPos+2],h.buffer.f[h.fPos+3],h.buffer.f[h.fPos+4],h.buffer.o[h.oPos]);break;case 12:switch(e.prev._hx_index){case 0:e.oPos+=2;e.bPos+=2;break;case 1:e.iPos+=1;e.fPos+=1;break;case 2:e.oPos+=4;e.iiPos+=2;e.ffPos+=1;e.fPos+=1;break;case 3:e.oPos+=1;break;case 4:e.fPos+=6;break;case 5:e.fPos+=4;break;case 6:e.fPos+=3;break;case 7:e.fPos+=4;break;case 8:e.oPos+=3;break;case 9:e.fPos+=4;break;case 10:e.fPos+=5;e.oPos+=
1;break;case 12:e.oPos+=4;break;case 14:e.oPos+=2;e.bPos+=2;break;case 15:e.oPos+=4;e.iiPos+=2;e.ffPos+=1;e.fPos+=1;break;case 16:e.oPos+=4;e.iPos+=1;e.fPos+=2;e.bPos+=1;break;case 17:e.fPos+=2;break;case 18:e.fPos+=2;break;case 19:e.oPos+=1;break;case 20:e.oPos+=1}e.prev=Z.DRAW_TRIANGLES;h=e;A.fillCommands.drawTriangles(h.buffer.o[h.oPos],h.buffer.o[h.oPos+1],h.buffer.o[h.oPos+2],h.buffer.o[h.oPos+3]);break;case 13:switch(e.prev._hx_index){case 0:e.oPos+=2;e.bPos+=2;break;case 1:e.iPos+=1;e.fPos+=
1;break;case 2:e.oPos+=4;e.iiPos+=2;e.ffPos+=1;e.fPos+=1;break;case 3:e.oPos+=1;break;case 4:e.fPos+=6;break;case 5:e.fPos+=4;break;case 6:e.fPos+=3;break;case 7:e.fPos+=4;break;case 8:e.oPos+=3;break;case 9:e.fPos+=4;break;case 10:e.fPos+=5;e.oPos+=1;break;case 12:e.oPos+=4;break;case 14:e.oPos+=2;e.bPos+=2;break;case 15:e.oPos+=4;e.iiPos+=2;e.ffPos+=1;e.fPos+=1;break;case 16:e.oPos+=4;e.iPos+=1;e.fPos+=2;e.bPos+=1;break;case 17:e.fPos+=2;break;case 18:e.fPos+=2;break;case 19:e.oPos+=1;break;case 20:e.oPos+=
1}e.prev=Z.END_FILL;A.endFill();A.endStroke();k=A.hasFill=!1;A.bitmapFill=null;d=c=0;break;case 14:switch(e.prev._hx_index){case 0:e.oPos+=2;e.bPos+=2;break;case 1:e.iPos+=1;e.fPos+=1;break;case 2:e.oPos+=4;e.iiPos+=2;e.ffPos+=1;e.fPos+=1;break;case 3:e.oPos+=1;break;case 4:e.fPos+=6;break;case 5:e.fPos+=4;break;case 6:e.fPos+=3;break;case 7:e.fPos+=4;break;case 8:e.oPos+=3;break;case 9:e.fPos+=4;break;case 10:e.fPos+=5;e.oPos+=1;break;case 12:e.oPos+=4;break;case 14:e.oPos+=2;e.bPos+=2;break;case 15:e.oPos+=
4;e.iiPos+=2;e.ffPos+=1;e.fPos+=1;break;case 16:e.oPos+=4;e.iPos+=1;e.fPos+=2;e.bPos+=1;break;case 17:e.fPos+=2;break;case 18:e.fPos+=2;break;case 19:e.oPos+=1;break;case 20:e.oPos+=1}e.prev=Z.LINE_BITMAP_STYLE;h=e;k||0==c&&0==d||(A.strokeCommands.moveTo(c,d),d=c=0);k=!0;A.strokeCommands.lineBitmapStyle(h.buffer.o[h.oPos],h.buffer.o[h.oPos+1],h.buffer.b[h.bPos],h.buffer.b[h.bPos+1]);break;case 15:switch(e.prev._hx_index){case 0:e.oPos+=2;e.bPos+=2;break;case 1:e.iPos+=1;e.fPos+=1;break;case 2:e.oPos+=
4;e.iiPos+=2;e.ffPos+=1;e.fPos+=1;break;case 3:e.oPos+=1;break;case 4:e.fPos+=6;break;case 5:e.fPos+=4;break;case 6:e.fPos+=3;break;case 7:e.fPos+=4;break;case 8:e.oPos+=3;break;case 9:e.fPos+=4;break;case 10:e.fPos+=5;e.oPos+=1;break;case 12:e.oPos+=4;break;case 14:e.oPos+=2;e.bPos+=2;break;case 15:e.oPos+=4;e.iiPos+=2;e.ffPos+=1;e.fPos+=1;break;case 16:e.oPos+=4;e.iPos+=1;e.fPos+=2;e.bPos+=1;break;case 17:e.fPos+=2;break;case 18:e.fPos+=2;break;case 19:e.oPos+=1;break;case 20:e.oPos+=1}e.prev=Z.LINE_GRADIENT_STYLE;
h=e;k||0==c&&0==d||(A.strokeCommands.moveTo(c,d),d=c=0);k=!0;A.strokeCommands.lineGradientStyle(h.buffer.o[h.oPos],h.buffer.ii[h.iiPos],h.buffer.ff[h.ffPos],h.buffer.ii[h.iiPos+1],h.buffer.o[h.oPos+1],h.buffer.o[h.oPos+2],h.buffer.o[h.oPos+3],h.buffer.f[h.fPos]);break;case 16:switch(e.prev._hx_index){case 0:e.oPos+=2;e.bPos+=2;break;case 1:e.iPos+=1;e.fPos+=1;break;case 2:e.oPos+=4;e.iiPos+=2;e.ffPos+=1;e.fPos+=1;break;case 3:e.oPos+=1;break;case 4:e.fPos+=6;break;case 5:e.fPos+=4;break;case 6:e.fPos+=
3;break;case 7:e.fPos+=4;break;case 8:e.oPos+=3;break;case 9:e.fPos+=4;break;case 10:e.fPos+=5;e.oPos+=1;break;case 12:e.oPos+=4;break;case 14:e.oPos+=2;e.bPos+=2;break;case 15:e.oPos+=4;e.iiPos+=2;e.ffPos+=1;e.fPos+=1;break;case 16:e.oPos+=4;e.iPos+=1;e.fPos+=2;e.bPos+=1;break;case 17:e.fPos+=2;break;case 18:e.fPos+=2;break;case 19:e.oPos+=1;break;case 20:e.oPos+=1}e.prev=Z.LINE_STYLE;h=e;k||null==h.buffer.o[h.oPos]||0==c&&0==d||(A.strokeCommands.moveTo(c,d),d=c=0);k=null!=h.buffer.o[h.oPos];A.strokeCommands.lineStyle(h.buffer.o[h.oPos],
h.buffer.i[h.iPos],h.buffer.f[h.fPos],h.buffer.b[h.bPos],h.buffer.o[h.oPos+1],h.buffer.o[h.oPos+2],h.buffer.o[h.oPos+3],h.buffer.f[h.fPos+1]);break;case 17:switch(e.prev._hx_index){case 0:e.oPos+=2;e.bPos+=2;break;case 1:e.iPos+=1;e.fPos+=1;break;case 2:e.oPos+=4;e.iiPos+=2;e.ffPos+=1;e.fPos+=1;break;case 3:e.oPos+=1;break;case 4:e.fPos+=6;break;case 5:e.fPos+=4;break;case 6:e.fPos+=3;break;case 7:e.fPos+=4;break;case 8:e.oPos+=3;break;case 9:e.fPos+=4;break;case 10:e.fPos+=5;e.oPos+=1;break;case 12:e.oPos+=
4;break;case 14:e.oPos+=2;e.bPos+=2;break;case 15:e.oPos+=4;e.iiPos+=2;e.ffPos+=1;e.fPos+=1;break;case 16:e.oPos+=4;e.iPos+=1;e.fPos+=2;e.bPos+=1;break;case 17:e.fPos+=2;break;case 18:e.fPos+=2;break;case 19:e.oPos+=1;break;case 20:e.oPos+=1}e.prev=Z.LINE_TO;h=e;A.fillCommands.lineTo(h.buffer.f[h.fPos],h.buffer.f[h.fPos+1]);k?A.strokeCommands.lineTo(h.buffer.f[h.fPos],h.buffer.f[h.fPos+1]):(c=h.buffer.f[h.fPos],d=h.buffer.f[h.fPos+1]);break;case 18:switch(e.prev._hx_index){case 0:e.oPos+=2;e.bPos+=
2;break;case 1:e.iPos+=1;e.fPos+=1;break;case 2:e.oPos+=4;e.iiPos+=2;e.ffPos+=1;e.fPos+=1;break;case 3:e.oPos+=1;break;case 4:e.fPos+=6;break;case 5:e.fPos+=4;break;case 6:e.fPos+=3;break;case 7:e.fPos+=4;break;case 8:e.oPos+=3;break;case 9:e.fPos+=4;break;case 10:e.fPos+=5;e.oPos+=1;break;case 12:e.oPos+=4;break;case 14:e.oPos+=2;e.bPos+=2;break;case 15:e.oPos+=4;e.iiPos+=2;e.ffPos+=1;e.fPos+=1;break;case 16:e.oPos+=4;e.iPos+=1;e.fPos+=2;e.bPos+=1;break;case 17:e.fPos+=2;break;case 18:e.fPos+=2;
break;case 19:e.oPos+=1;break;case 20:e.oPos+=1}e.prev=Z.MOVE_TO;h=e;A.fillCommands.moveTo(h.buffer.f[h.fPos],h.buffer.f[h.fPos+1]);k?A.strokeCommands.moveTo(h.buffer.f[h.fPos],h.buffer.f[h.fPos+1]):(c=h.buffer.f[h.fPos],d=h.buffer.f[h.fPos+1]);break;case 19:switch(e.prev._hx_index){case 0:e.oPos+=2;e.bPos+=2;break;case 1:e.iPos+=1;e.fPos+=1;break;case 2:e.oPos+=4;e.iiPos+=2;e.ffPos+=1;e.fPos+=1;break;case 3:e.oPos+=1;break;case 4:e.fPos+=6;break;case 5:e.fPos+=4;break;case 6:e.fPos+=3;break;case 7:e.fPos+=
4;break;case 8:e.oPos+=3;break;case 9:e.fPos+=4;break;case 10:e.fPos+=5;e.oPos+=1;break;case 12:e.oPos+=4;break;case 14:e.oPos+=2;e.bPos+=2;break;case 15:e.oPos+=4;e.iiPos+=2;e.ffPos+=1;e.fPos+=1;break;case 16:e.oPos+=4;e.iPos+=1;e.fPos+=2;e.bPos+=1;break;case 17:e.fPos+=2;break;case 18:e.fPos+=2;break;case 19:e.oPos+=1;break;case 20:e.oPos+=1}e.prev=Z.OVERRIDE_BLEND_MODE;h=e;b.__setBlendModeContext(A.context,h.buffer.o[h.oPos]);break;case 21:switch(e.prev._hx_index){case 0:e.oPos+=2;e.bPos+=2;break;
case 1:e.iPos+=1;e.fPos+=1;break;case 2:e.oPos+=4;e.iiPos+=2;e.ffPos+=1;e.fPos+=1;break;case 3:e.oPos+=1;break;case 4:e.fPos+=6;break;case 5:e.fPos+=4;break;case 6:e.fPos+=3;break;case 7:e.fPos+=4;break;case 8:e.oPos+=3;break;case 9:e.fPos+=4;break;case 10:e.fPos+=5;e.oPos+=1;break;case 12:e.oPos+=4;break;case 14:e.oPos+=2;e.bPos+=2;break;case 15:e.oPos+=4;e.iiPos+=2;e.ffPos+=1;e.fPos+=1;break;case 16:e.oPos+=4;e.iPos+=1;e.fPos+=2;e.bPos+=1;break;case 17:e.fPos+=2;break;case 18:e.fPos+=2;break;case 19:e.oPos+=
1;break;case 20:e.oPos+=1}e.prev=Z.WINDING_EVEN_ODD;A.fillCommands.windingEvenOdd();A.windingRule="evenodd";break;case 22:switch(e.prev._hx_index){case 0:e.oPos+=2;e.bPos+=2;break;case 1:e.iPos+=1;e.fPos+=1;break;case 2:e.oPos+=4;e.iiPos+=2;e.ffPos+=1;e.fPos+=1;break;case 3:e.oPos+=1;break;case 4:e.fPos+=6;break;case 5:e.fPos+=4;break;case 6:e.fPos+=3;break;case 7:e.fPos+=4;break;case 8:e.oPos+=3;break;case 9:e.fPos+=4;break;case 10:e.fPos+=5;e.oPos+=1;break;case 12:e.oPos+=4;break;case 14:e.oPos+=
2;e.bPos+=2;break;case 15:e.oPos+=4;e.iiPos+=2;e.ffPos+=1;e.fPos+=1;break;case 16:e.oPos+=4;e.iPos+=1;e.fPos+=2;e.bPos+=1;break;case 17:e.fPos+=2;break;case 18:e.fPos+=2;break;case 19:e.oPos+=1;break;case 20:e.oPos+=1}e.prev=Z.WINDING_NON_ZERO;A.fillCommands.windingNonZero();A.windingRule="nonzero";break;default:switch(e.prev._hx_index){case 0:e.oPos+=2;e.bPos+=2;break;case 1:e.iPos+=1;e.fPos+=1;break;case 2:e.oPos+=4;e.iiPos+=2;e.ffPos+=1;e.fPos+=1;break;case 3:e.oPos+=1;break;case 4:e.fPos+=6;break;
case 5:e.fPos+=4;break;case 6:e.fPos+=3;break;case 7:e.fPos+=4;break;case 8:e.oPos+=3;break;case 9:e.fPos+=4;break;case 10:e.fPos+=5;e.oPos+=1;break;case 12:e.oPos+=4;break;case 14:e.oPos+=2;e.bPos+=2;break;case 15:e.oPos+=4;e.iiPos+=2;e.ffPos+=1;e.fPos+=1;break;case 16:e.oPos+=4;e.iPos+=1;e.fPos+=2;e.bPos+=1;break;case 17:e.fPos+=2;break;case 18:e.fPos+=2;break;case 19:e.oPos+=1;break;case 20:e.oPos+=1}e.prev=h}0<A.fillCommands.get_length()&&A.endFill();0<A.strokeCommands.get_length()&&A.endStroke();
e.destroy();a.__bitmap=Mb.fromCanvas(a.__canvas)}a.__softwareDirty=!1;a.set___dirty(!1)}};A.renderMask=function(a,b){if(0!=a.__commands.get_length()){A.context=b.context;b=new de(a.__commands);var c=0;for(a=a.__commands.types;c<a.length;){var d=a[c];++c;switch(d._hx_index){case 4:switch(b.prev._hx_index){case 0:b.oPos+=2;b.bPos+=2;break;case 1:b.iPos+=1;b.fPos+=1;break;case 2:b.oPos+=4;b.iiPos+=2;b.ffPos+=1;b.fPos+=1;break;case 3:b.oPos+=1;break;case 4:b.fPos+=6;break;case 5:b.fPos+=4;break;case 6:b.fPos+=
3;break;case 7:b.fPos+=4;break;case 8:b.oPos+=3;break;case 9:b.fPos+=4;break;case 10:b.fPos+=5;b.oPos+=1;break;case 12:b.oPos+=4;break;case 14:b.oPos+=2;b.bPos+=2;break;case 15:b.oPos+=4;b.iiPos+=2;b.ffPos+=1;b.fPos+=1;break;case 16:b.oPos+=4;b.iPos+=1;b.fPos+=2;b.bPos+=1;break;case 17:b.fPos+=2;break;case 18:b.fPos+=2;break;case 19:b.oPos+=1;break;case 20:b.oPos+=1}b.prev=Z.CUBIC_CURVE_TO;d=b;A.context.bezierCurveTo(d.buffer.f[d.fPos]-0,d.buffer.f[d.fPos+1]-0,d.buffer.f[d.fPos+2]-0,d.buffer.f[d.fPos+
3]-0,d.buffer.f[d.fPos+4]-0,d.buffer.f[d.fPos+5]-0);break;case 5:switch(b.prev._hx_index){case 0:b.oPos+=2;b.bPos+=2;break;case 1:b.iPos+=1;b.fPos+=1;break;case 2:b.oPos+=4;b.iiPos+=2;b.ffPos+=1;b.fPos+=1;break;case 3:b.oPos+=1;break;case 4:b.fPos+=6;break;case 5:b.fPos+=4;break;case 6:b.fPos+=3;break;case 7:b.fPos+=4;break;case 8:b.oPos+=3;break;case 9:b.fPos+=4;break;case 10:b.fPos+=5;b.oPos+=1;break;case 12:b.oPos+=4;break;case 14:b.oPos+=2;b.bPos+=2;break;case 15:b.oPos+=4;b.iiPos+=2;b.ffPos+=
1;b.fPos+=1;break;case 16:b.oPos+=4;b.iPos+=1;b.fPos+=2;b.bPos+=1;break;case 17:b.fPos+=2;break;case 18:b.fPos+=2;break;case 19:b.oPos+=1;break;case 20:b.oPos+=1}b.prev=Z.CURVE_TO;d=b;A.context.quadraticCurveTo(d.buffer.f[d.fPos]-0,d.buffer.f[d.fPos+1]-0,d.buffer.f[d.fPos+2]-0,d.buffer.f[d.fPos+3]-0);break;case 6:switch(b.prev._hx_index){case 0:b.oPos+=2;b.bPos+=2;break;case 1:b.iPos+=1;b.fPos+=1;break;case 2:b.oPos+=4;b.iiPos+=2;b.ffPos+=1;b.fPos+=1;break;case 3:b.oPos+=1;break;case 4:b.fPos+=6;
break;case 5:b.fPos+=4;break;case 6:b.fPos+=3;break;case 7:b.fPos+=4;break;case 8:b.oPos+=3;break;case 9:b.fPos+=4;break;case 10:b.fPos+=5;b.oPos+=1;break;case 12:b.oPos+=4;break;case 14:b.oPos+=2;b.bPos+=2;break;case 15:b.oPos+=4;b.iiPos+=2;b.ffPos+=1;b.fPos+=1;break;case 16:b.oPos+=4;b.iPos+=1;b.fPos+=2;b.bPos+=1;break;case 17:b.fPos+=2;break;case 18:b.fPos+=2;break;case 19:b.oPos+=1;break;case 20:b.oPos+=1}b.prev=Z.DRAW_CIRCLE;d=b;A.context.arc(d.buffer.f[d.fPos]-0,d.buffer.f[d.fPos+1]-0,d.buffer.f[d.fPos+
2],0,2*Math.PI,!0);break;case 7:switch(b.prev._hx_index){case 0:b.oPos+=2;b.bPos+=2;break;case 1:b.iPos+=1;b.fPos+=1;break;case 2:b.oPos+=4;b.iiPos+=2;b.ffPos+=1;b.fPos+=1;break;case 3:b.oPos+=1;break;case 4:b.fPos+=6;break;case 5:b.fPos+=4;break;case 6:b.fPos+=3;break;case 7:b.fPos+=4;break;case 8:b.oPos+=3;break;case 9:b.fPos+=4;break;case 10:b.fPos+=5;b.oPos+=1;break;case 12:b.oPos+=4;break;case 14:b.oPos+=2;b.bPos+=2;break;case 15:b.oPos+=4;b.iiPos+=2;b.ffPos+=1;b.fPos+=1;break;case 16:b.oPos+=
4;b.iPos+=1;b.fPos+=2;b.bPos+=1;break;case 17:b.fPos+=2;break;case 18:b.fPos+=2;break;case 19:b.oPos+=1;break;case 20:b.oPos+=1}b.prev=Z.DRAW_ELLIPSE;var e=b;d=e.buffer.f[e.fPos];var f=e.buffer.f[e.fPos+1];var k=e.buffer.f[e.fPos+2];var m=e.buffer.f[e.fPos+3];d-=0;f-=0;e=k/2*.5522848;var h=m/2*.5522848;var n=d+k;var g=f+m;k=d+k/2;m=f+m/2;A.context.moveTo(d,m);A.context.bezierCurveTo(d,m-h,k-e,f,k,f);A.context.bezierCurveTo(k+e,f,n,m-h,n,m);A.context.bezierCurveTo(n,m+h,k+e,g,k,g);A.context.bezierCurveTo(k-
e,g,d,m+h,d,m);break;case 9:switch(b.prev._hx_index){case 0:b.oPos+=2;b.bPos+=2;break;case 1:b.iPos+=1;b.fPos+=1;break;case 2:b.oPos+=4;b.iiPos+=2;b.ffPos+=1;b.fPos+=1;break;case 3:b.oPos+=1;break;case 4:b.fPos+=6;break;case 5:b.fPos+=4;break;case 6:b.fPos+=3;break;case 7:b.fPos+=4;break;case 8:b.oPos+=3;break;case 9:b.fPos+=4;break;case 10:b.fPos+=5;b.oPos+=1;break;case 12:b.oPos+=4;break;case 14:b.oPos+=2;b.bPos+=2;break;case 15:b.oPos+=4;b.iiPos+=2;b.ffPos+=1;b.fPos+=1;break;case 16:b.oPos+=4;
b.iPos+=1;b.fPos+=2;b.bPos+=1;break;case 17:b.fPos+=2;break;case 18:b.fPos+=2;break;case 19:b.oPos+=1;break;case 20:b.oPos+=1}b.prev=Z.DRAW_RECT;d=b;A.context.beginPath();A.context.rect(d.buffer.f[d.fPos]-0,d.buffer.f[d.fPos+1]-0,d.buffer.f[d.fPos+2],d.buffer.f[d.fPos+3]);A.context.closePath();break;case 10:switch(b.prev._hx_index){case 0:b.oPos+=2;b.bPos+=2;break;case 1:b.iPos+=1;b.fPos+=1;break;case 2:b.oPos+=4;b.iiPos+=2;b.ffPos+=1;b.fPos+=1;break;case 3:b.oPos+=1;break;case 4:b.fPos+=6;break;
case 5:b.fPos+=4;break;case 6:b.fPos+=3;break;case 7:b.fPos+=4;break;case 8:b.oPos+=3;break;case 9:b.fPos+=4;break;case 10:b.fPos+=5;b.oPos+=1;break;case 12:b.oPos+=4;break;case 14:b.oPos+=2;b.bPos+=2;break;case 15:b.oPos+=4;b.iiPos+=2;b.ffPos+=1;b.fPos+=1;break;case 16:b.oPos+=4;b.iPos+=1;b.fPos+=2;b.bPos+=1;break;case 17:b.fPos+=2;break;case 18:b.fPos+=2;break;case 19:b.oPos+=1;break;case 20:b.oPos+=1}b.prev=Z.DRAW_ROUND_RECT;d=b;A.drawRoundRect(d.buffer.f[d.fPos]-0,d.buffer.f[d.fPos+1]-0,d.buffer.f[d.fPos+
2],d.buffer.f[d.fPos+3],d.buffer.f[d.fPos+4],d.buffer.o[d.oPos]);break;case 17:switch(b.prev._hx_index){case 0:b.oPos+=2;b.bPos+=2;break;case 1:b.iPos+=1;b.fPos+=1;break;case 2:b.oPos+=4;b.iiPos+=2;b.ffPos+=1;b.fPos+=1;break;case 3:b.oPos+=1;break;case 4:b.fPos+=6;break;case 5:b.fPos+=4;break;case 6:b.fPos+=3;break;case 7:b.fPos+=4;break;case 8:b.oPos+=3;break;case 9:b.fPos+=4;break;case 10:b.fPos+=5;b.oPos+=1;break;case 12:b.oPos+=4;break;case 14:b.oPos+=2;b.bPos+=2;break;case 15:b.oPos+=4;b.iiPos+=
2;b.ffPos+=1;b.fPos+=1;break;case 16:b.oPos+=4;b.iPos+=1;b.fPos+=2;b.bPos+=1;break;case 17:b.fPos+=2;break;case 18:b.fPos+=2;break;case 19:b.oPos+=1;break;case 20:b.oPos+=1}b.prev=Z.LINE_TO;d=b;A.context.lineTo(d.buffer.f[d.fPos]-0,d.buffer.f[d.fPos+1]-0);break;case 18:switch(b.prev._hx_index){case 0:b.oPos+=2;b.bPos+=2;break;case 1:b.iPos+=1;b.fPos+=1;break;case 2:b.oPos+=4;b.iiPos+=2;b.ffPos+=1;b.fPos+=1;break;case 3:b.oPos+=1;break;case 4:b.fPos+=6;break;case 5:b.fPos+=4;break;case 6:b.fPos+=3;
break;case 7:b.fPos+=4;break;case 8:b.oPos+=3;break;case 9:b.fPos+=4;break;case 10:b.fPos+=5;b.oPos+=1;break;case 12:b.oPos+=4;break;case 14:b.oPos+=2;b.bPos+=2;break;case 15:b.oPos+=4;b.iiPos+=2;b.ffPos+=1;b.fPos+=1;break;case 16:b.oPos+=4;b.iPos+=1;b.fPos+=2;b.bPos+=1;break;case 17:b.fPos+=2;break;case 18:b.fPos+=2;break;case 19:b.oPos+=1;break;case 20:b.oPos+=1}b.prev=Z.MOVE_TO;d=b;A.context.moveTo(d.buffer.f[d.fPos]-0,d.buffer.f[d.fPos+1]-0);break;default:switch(b.prev._hx_index){case 0:b.oPos+=
2;b.bPos+=2;break;case 1:b.iPos+=1;b.fPos+=1;break;case 2:b.oPos+=4;b.iiPos+=2;b.ffPos+=1;b.fPos+=1;break;case 3:b.oPos+=1;break;case 4:b.fPos+=6;break;case 5:b.fPos+=4;break;case 6:b.fPos+=3;break;case 7:b.fPos+=4;break;case 8:b.oPos+=3;break;case 9:b.fPos+=4;break;case 10:b.fPos+=5;b.oPos+=1;break;case 12:b.oPos+=4;break;case 14:b.oPos+=2;b.bPos+=2;break;case 15:b.oPos+=4;b.iiPos+=2;b.ffPos+=1;b.fPos+=1;break;case 16:b.oPos+=4;b.iPos+=1;b.fPos+=2;b.bPos+=1;break;case 17:b.fPos+=2;break;case 18:b.fPos+=
2;break;case 19:b.oPos+=1;break;case 20:b.oPos+=1}b.prev=d}}b.destroy()}};A.setSmoothing=function(a){A.allowSmoothing||(a=!1);A.context.imageSmoothingEnabled!=a&&(A.context.imageSmoothingEnabled=a)};var V=function(){};g["openfl._internal.renderer.canvas.CanvasTextField"]=V;V.__name__="openfl._internal.renderer.canvas.CanvasTextField";var df=function(){};g["openfl._internal.renderer.context3D.Context3DBitmap"]=df;df.__name__="openfl._internal.renderer.context3D.Context3DBitmap";df.render=function(a,
b){if(a.__renderable&&!(0>=a.__worldAlpha)&&null!=a.__bitmapData&&a.__bitmapData.__isValid){var c=b.__context3D;b.__setBlendMode(a.__worldBlendMode);b.__pushMaskObject(a);var d=b.__initDisplayShader(a.__worldShader);b.setShader(d);b.applyBitmapData(a.__bitmapData,b.__allowSmoothing&&(a.smoothing||b.__upscaled));b.applyMatrix(b.__getMatrix(a.__renderTransform,a.pixelSnapping));b.applyAlpha(a.__worldAlpha);b.applyColorTransform(a.__worldColorTransform);b.updateShader();var e=a.__bitmapData.getVertexBuffer(c);
null!=d.__position&&c.setVertexBufferAt(d.__position.index,e,0,3);null!=d.__textureCoord&&c.setVertexBufferAt(d.__textureCoord.index,e,3,2);d=a.__bitmapData.getIndexBuffer(c);c.drawTriangles(d);b.__clearShader();b.__popMaskObject(a)}};df.renderMask=function(a,b){if(null!=a.__bitmapData&&a.__bitmapData.__isValid){var c=b.__context3D,d=b.__maskShader;b.setShader(d);b.applyBitmapData(Wi.opaqueBitmapData,!0);b.applyMatrix(b.__getMatrix(a.__renderTransform,a.pixelSnapping));b.updateShader();var e=a.__bitmapData.getVertexBuffer(c);
null!=d.__position&&c.setVertexBufferAt(d.__position.index,e,0,3);null!=d.__textureCoord&&c.setVertexBufferAt(d.__textureCoord.index,e,3,2);a=a.__bitmapData.getIndexBuffer(c);c.drawTriangles(a);b.__clearShader()}};var th=function(a,b,c,d){this.context3D=a;this.elementType=b;this.dataPerVertex=d;this.vertexCount=this.indexCount=0;this.resize(c)};g["openfl._internal.renderer.context3D.Context3DBuffer"]=th;th.__name__="openfl._internal.renderer.context3D.Context3DBuffer";th.prototype={dataPerVertex:null,
elementCount:null,elementType:null,indexCount:null,vertexBuffer:null,vertexBufferData:null,vertexCount:null,context3D:null,flushVertexBufferData:function(){this.vertexBufferData.length>this.vertexCount&&(this.vertexCount=this.vertexBufferData.length,this.vertexBuffer=this.context3D.createVertexBuffer(this.vertexCount,this.dataPerVertex,0));this.vertexBuffer.uploadFromTypedArray(this.vertexBufferData)},resize:function(a,b){null==b&&(b=-1);this.elementCount=a;-1==b&&(b=this.dataPerVertex);b!=this.dataPerVertex&&
(this.vertexBuffer=null,this.vertexCount=0,this.dataPerVertex=b);var c=0;switch(this.elementType._hx_index){case 0:c=4*a;break;case 1:c=3*a;break;case 2:c=3*a}a=c*b;null==this.vertexBufferData?this.vertexBufferData=null!=a?new Float32Array(a):null:a>this.vertexBufferData.length&&(b=this.vertexBufferData,this.vertexBufferData=null!=a?new Float32Array(a):null,this.vertexBufferData.set(b))},__class__:th};var Om=t["openfl._internal.renderer.context3D.Context3DElementType"]={__ename__:"openfl._internal.renderer.context3D.Context3DElementType",
__constructs__:["QUADS","TRIANGLES","TRIANGLE_INDICES"],QUADS:{_hx_index:0,__enum__:"openfl._internal.renderer.context3D.Context3DElementType",toString:p},TRIANGLES:{_hx_index:1,__enum__:"openfl._internal.renderer.context3D.Context3DElementType",toString:p},TRIANGLE_INDICES:{_hx_index:2,__enum__:"openfl._internal.renderer.context3D.Context3DElementType",toString:p}},Mb=function(a,b,c,d){null==d&&(d=-1);null==c&&(c=!0);this.transparent=c;a=null==a?0:a;b=null==b?0:b;a=0>a?0:a;b=0>b?0:b;this.width=a;
this.height=b;this.rect=new ya(0,0,a,b);this.__textureWidth=a;this.__textureHeight=b;0<a&&0<b&&(c?0==(d&-16777216)&&(d=0):d=-16777216|d&16777215,this.image=new wb(null,0,0,a,b,d<<8|d>>>24&255),this.image.set_transparent(c),this.readable=this.__isValid=!0);this.__renderTransform=new va;this.__worldAlpha=1;this.__worldTransform=new va;this.__worldColorTransform=new Nb;this.__renderable=!0};g["openfl.display.BitmapData"]=Mb;Mb.__name__="openfl.display.BitmapData";Mb.__interfaces__=[X];Mb.fromCanvas=
function(a,b){null==b&&(b=!0);if(null==a)return null;var c=new Mb(0,0,b,0);c.__fromImage(wb.fromCanvas(a));c.image.set_transparent(b);return c};Mb.fromImage=function(a,b){null==b&&(b=!0);if(null==a||null==a.buffer)return null;var c=new Mb(0,0,b,0);c.__fromImage(a);c.image.set_transparent(b);return null!=c.image?c:null};Mb.prototype={height:null,image:null,readable:null,rect:null,transparent:null,width:null,__framebuffer:null,__framebufferContext:null,__indexBuffer:null,__indexBufferContext:null,__indexBufferData:null,
__indexBufferGrid:null,__isValid:null,__mask:null,__renderable:null,__renderTransform:null,__scrollRect:null,__surface:null,__texture:null,__textureContext:null,__textureHeight:null,__textureVersion:null,__textureWidth:null,__uvRect:null,__vertexBuffer:null,__vertexBufferContext:null,__vertexBufferData:null,__vertexBufferGrid:null,__vertexBufferHeight:null,__vertexBufferScaleX:null,__vertexBufferScaleY:null,__vertexBufferWidth:null,__worldAlpha:null,__worldColorTransform:null,__worldTransform:null,
colorTransform:function(a,b){this.readable&&this.image.colorTransform(a.__toLimeRectangle(),b.__toLimeColorMatrix())},copyPixels:function(a,b,c,d,e,f){null==f&&(f=!1);this.readable&&null!=a&&(null!=e&&(Mb.__tempVector.x=e.x,Mb.__tempVector.y=e.y),this.image.copyPixels(a.image,b.__toLimeRectangle(),c.__toLimeVector2(),null!=d?d.image:null,null!=e?Mb.__tempVector:null,f))},dispose:function(){this.image=null;this.height=this.width=0;this.rect=null;this.readable=this.__isValid=!1;this.__textureContext=
this.__texture=this.__framebufferContext=this.__framebuffer=this.__vertexBuffer=this.__surface=null},draw:function(a,b,c,d,e,f){null==f&&(f=!1);if(null!=a){a.__update(!1,!0);var k=va.__pool.get();k.copyFrom(a.__renderTransform);k.invert();null!=b&&k.concat(b);b=null;null!=e&&(b=va.__pool.get(),b.copyFrom(k),b.invert());var m=new Nb;m.__copyFrom(a.__worldColorTransform);m.__invert();if(this.readable||null==Qb.get_current().stage.context3D){if(null!=c){var h=ya.__pool.get(),n=va.__pool.get();a.__getBounds(h,
n);var g=Math.ceil(h.width),l=Math.ceil(h.height);n.tx=-h.x;n.ty=-h.y;g=new Mb(g,l,!0,0);g.draw(a,n);g.colorTransform(g.rect,c);g.__renderTransform.identity();g.__renderTransform.tx=h.x;g.__renderTransform.ty=h.y;g.__renderTransform.concat(a.__renderTransform);g.__worldAlpha=a.__worldAlpha;g.__worldColorTransform.__copyFrom(a.__worldColorTransform);a=g;ya.__pool.release(h);va.__pool.release(n)}La.convertToCanvas(this.image);c=new fe(this.image.buffer.__srcContext);c.__allowSmoothing=f;c.__overrideBlendMode=
d;c.__worldTransform=k;c.__worldAlpha=1/a.__worldAlpha;c.__worldColorTransform=m;null!=e&&c.__pushMaskRect(e,b);this.__drawCanvas(a,c)}else null==this.__textureContext&&(this.__textureContext=ha.current.__window.context),null!=c&&m.__combine(c),c=new Ya(Qb.get_current().stage.context3D,this),c.__allowSmoothing=f,c.__overrideBlendMode=d,c.__worldTransform=k,c.__worldAlpha=1/a.__worldAlpha,c.__worldColorTransform=m,c.__resize(this.width,this.height),null!=e&&c.__pushMaskRect(e,b),this.__drawGL(a,c);
null!=e&&(c.__popMaskRect(),va.__pool.release(b));va.__pool.release(k)}},fillRect:function(a,b){this.__fillRect(a,b,!0)},getIndexBuffer:function(a,b){if(null==this.__indexBuffer||this.__indexBufferContext!=a.__context||null!=b&&null==this.__indexBufferGrid||null!=this.__indexBufferGrid&&!this.__indexBufferGrid.equals(b)){this.__indexBufferContext=a.__context;this.__indexBuffer=null;if(null!=b){null==this.__indexBufferGrid&&(this.__indexBufferGrid=new ya);this.__indexBufferGrid.copyFrom(b);var c=b.width;
b=b.height;0!=c&&0!=b?(this.__indexBufferData=new Uint16Array(54),this.__indexBufferData[0]=0,this.__indexBufferData[1]=1,this.__indexBufferData[2]=2,this.__indexBufferData[3]=2,this.__indexBufferData[4]=1,this.__indexBufferData[5]=3,this.__indexBufferData[6]=4,this.__indexBufferData[7]=0,this.__indexBufferData[8]=5,this.__indexBufferData[9]=5,this.__indexBufferData[10]=0,this.__indexBufferData[11]=2,this.__indexBufferData[12]=6,this.__indexBufferData[13]=4,this.__indexBufferData[14]=7,this.__indexBufferData[15]=
7,this.__indexBufferData[16]=4,this.__indexBufferData[17]=5,this.__indexBufferData[18]=8,this.__indexBufferData[19]=9,this.__indexBufferData[20]=0,this.__indexBufferData[21]=0,this.__indexBufferData[22]=9,this.__indexBufferData[23]=1,this.__indexBufferData[24]=10,this.__indexBufferData[25]=8,this.__indexBufferData[26]=4,this.__indexBufferData[27]=4,this.__indexBufferData[28]=8,this.__indexBufferData[29]=0,this.__indexBufferData[30]=11,this.__indexBufferData[31]=10,this.__indexBufferData[32]=6,this.__indexBufferData[33]=
6,this.__indexBufferData[34]=10,this.__indexBufferData[35]=4,this.__indexBufferData[36]=12,this.__indexBufferData[37]=13,this.__indexBufferData[38]=8,this.__indexBufferData[39]=8,this.__indexBufferData[40]=13,this.__indexBufferData[41]=9,this.__indexBufferData[42]=14,this.__indexBufferData[43]=12,this.__indexBufferData[44]=10,this.__indexBufferData[45]=10,this.__indexBufferData[46]=12,this.__indexBufferData[47]=8,this.__indexBufferData[48]=15,this.__indexBufferData[49]=14,this.__indexBufferData[50]=
11,this.__indexBufferData[51]=11,this.__indexBufferData[52]=14,this.__indexBufferData[53]=10,this.__indexBuffer=a.createIndexBuffer(54)):0==c&&0!=b?(this.__indexBufferData=new Uint16Array(18),this.__indexBufferData[0]=0,this.__indexBufferData[1]=1,this.__indexBufferData[2]=2,this.__indexBufferData[3]=2,this.__indexBufferData[4]=1,this.__indexBufferData[5]=3,this.__indexBufferData[6]=4,this.__indexBufferData[7]=5,this.__indexBufferData[8]=0,this.__indexBufferData[9]=0,this.__indexBufferData[10]=5,
this.__indexBufferData[11]=1,this.__indexBufferData[12]=6,this.__indexBufferData[13]=7,this.__indexBufferData[14]=4,this.__indexBufferData[15]=4,this.__indexBufferData[16]=7,this.__indexBufferData[17]=5,this.__indexBuffer=a.createIndexBuffer(18)):0!=c&&0==b&&(this.__indexBufferData=new Uint16Array(18),this.__indexBufferData[0]=0,this.__indexBufferData[1]=1,this.__indexBufferData[2]=2,this.__indexBufferData[3]=2,this.__indexBufferData[4]=1,this.__indexBufferData[5]=3,this.__indexBufferData[6]=4,this.__indexBufferData[7]=
0,this.__indexBufferData[8]=5,this.__indexBufferData[9]=5,this.__indexBufferData[10]=0,this.__indexBufferData[11]=2,this.__indexBufferData[12]=6,this.__indexBufferData[13]=4,this.__indexBufferData[14]=7,this.__indexBufferData[15]=7,this.__indexBufferData[16]=4,this.__indexBufferData[17]=5,this.__indexBuffer=a.createIndexBuffer(18))}else this.__indexBufferGrid=null;null==this.__indexBuffer&&(this.__indexBufferData=new Uint16Array(6),this.__indexBufferData[0]=0,this.__indexBufferData[1]=1,this.__indexBufferData[2]=
2,this.__indexBufferData[3]=2,this.__indexBufferData[4]=1,this.__indexBufferData[5]=3,this.__indexBuffer=a.createIndexBuffer(6));this.__indexBuffer.uploadFromTypedArray(this.__indexBufferData)}return this.__indexBuffer},getVertexBuffer:function(a,b,c){if(null==this.__vertexBuffer||this.__vertexBufferContext!=a.__context||null!=b&&null==this.__vertexBufferGrid||null!=this.__vertexBufferGrid&&!this.__vertexBufferGrid.equals(b)||null!=c&&(this.__vertexBufferWidth!=c.get_width()||this.__vertexBufferHeight!=
c.get_height()||this.__vertexBufferScaleX!=c.get_scaleX()||this.__vertexBufferScaleY!=c.get_scaleY())){this.__uvRect=new ya(0,0,this.width,this.height);this.__vertexBufferContext=a.__context;this.__vertexBuffer=null;null!=c&&(this.__vertexBufferWidth=c.get_width(),this.__vertexBufferHeight=c.get_height(),this.__vertexBufferScaleX=c.get_scaleX(),this.__vertexBufferScaleY=c.get_scaleY());if(null!=b&&null!=c){null==this.__vertexBufferGrid&&(this.__vertexBufferGrid=new ya);this.__vertexBufferGrid.copyFrom(b);
this.__vertexBufferWidth=c.get_width();this.__vertexBufferHeight=c.get_height();this.__vertexBufferScaleX=c.get_scaleX();this.__vertexBufferScaleY=c.get_scaleY();var d=b.width,e=b.height;if(0!=d&&0!=e){this.__vertexBufferData=new Float32Array(224);var f=b.x,k=b.y,m=this.width-d-f,h=this.height-e-k;b=f/this.width;var n=k/this.height;d/=this.width;e/=this.height;f/=c.get_scaleX();k/=c.get_scaleY();m/=c.get_scaleX();h/=c.get_scaleY();m=c.get_width()/c.get_scaleX()-f-m;c=c.get_height()/c.get_scaleY()-
k-h;this.__vertexBufferData[0]=f;this.__vertexBufferData[1]=k;this.__vertexBufferData[3]=1*b;this.__vertexBufferData[4]=1*n;this.__vertexBufferData[15]=k;this.__vertexBufferData[18]=1*n;this.__vertexBufferData[28]=f;this.__vertexBufferData[31]=1*b;this.__vertexBufferData[56]=f+m;this.__vertexBufferData[57]=k;this.__vertexBufferData[59]=1*(b+d);this.__vertexBufferData[60]=1*n;this.__vertexBufferData[70]=f+m;this.__vertexBufferData[73]=1*(b+d);this.__vertexBufferData[84]=this.width;this.__vertexBufferData[85]=
k;this.__vertexBufferData[87]=1;this.__vertexBufferData[88]=1*n;this.__vertexBufferData[98]=this.width;this.__vertexBufferData[101]=1;this.__vertexBufferData[112]=f;this.__vertexBufferData[113]=k+c;this.__vertexBufferData[115]=1*b;this.__vertexBufferData[116]=1*(n+e);this.__vertexBufferData[127]=k+c;this.__vertexBufferData[130]=1*(n+e);this.__vertexBufferData[140]=f+m;this.__vertexBufferData[141]=k+c;this.__vertexBufferData[143]=1*(b+d);this.__vertexBufferData[144]=1*(n+e);this.__vertexBufferData[154]=
this.width;this.__vertexBufferData[155]=k+c;this.__vertexBufferData[157]=1;this.__vertexBufferData[158]=1*(n+e);this.__vertexBufferData[168]=f;this.__vertexBufferData[169]=this.height;this.__vertexBufferData[171]=1*b;this.__vertexBufferData[172]=1;this.__vertexBufferData[183]=this.height;this.__vertexBufferData[186]=1;this.__vertexBufferData[196]=f+m;this.__vertexBufferData[197]=this.height;this.__vertexBufferData[199]=1*(b+d);this.__vertexBufferData[200]=1;this.__vertexBufferData[210]=this.width;
this.__vertexBufferData[211]=this.height;this.__vertexBufferData[213]=1;this.__vertexBufferData[214]=1;this.__vertexBuffer=a.createVertexBuffer(16,14)}else 0==d&&0!=e?(this.__vertexBufferData=new Float32Array(112),d=b.y,h=this.height-e-d,b=d/this.height,n=e/this.height,d/=c.get_scaleY(),e=h/c.get_scaleY(),e=c.get_height()/c.get_scaleY()-d-e,c=c.get_width()/c.get_scaleX(),this.__vertexBufferData[0]=c,this.__vertexBufferData[1]=d,this.__vertexBufferData[3]=1,this.__vertexBufferData[4]=1*b,this.__vertexBufferData[15]=
d,this.__vertexBufferData[18]=1*b,this.__vertexBufferData[28]=c,this.__vertexBufferData[31]=1,this.__vertexBufferData[56]=c,this.__vertexBufferData[57]=d+e,this.__vertexBufferData[59]=1,this.__vertexBufferData[60]=1*(b+n),this.__vertexBufferData[71]=d+e,this.__vertexBufferData[74]=1*(b+n),this.__vertexBufferData[84]=c,this.__vertexBufferData[85]=this.height,this.__vertexBufferData[87]=1,this.__vertexBufferData[88]=1,this.__vertexBufferData[99]=this.height,this.__vertexBufferData[102]=1,this.__vertexBuffer=
a.createVertexBuffer(8,14)):0==e&&0!=d&&(this.__vertexBufferData=new Float32Array(112),h=b.x,e=this.width-d-h,b=h/this.width,n=d/this.width,d=h/c.get_scaleX(),e/=c.get_scaleX(),e=c.get_width()/c.get_scaleX()-d-e,c=c.get_height()/c.get_scaleY(),this.__vertexBufferData[0]=d,this.__vertexBufferData[1]=c,this.__vertexBufferData[3]=1*b,this.__vertexBufferData[4]=1,this.__vertexBufferData[15]=c,this.__vertexBufferData[18]=1,this.__vertexBufferData[28]=d,this.__vertexBufferData[31]=1*b,this.__vertexBufferData[56]=
d+e,this.__vertexBufferData[57]=c,this.__vertexBufferData[59]=1*(b+n),this.__vertexBufferData[60]=1,this.__vertexBufferData[70]=d+e,this.__vertexBufferData[73]=1*(b+n),this.__vertexBufferData[84]=this.width,this.__vertexBufferData[85]=c,this.__vertexBufferData[87]=1,this.__vertexBufferData[88]=1,this.__vertexBufferData[98]=this.width,this.__vertexBufferData[101]=1,this.__vertexBuffer=a.createVertexBuffer(8,14))}else this.__vertexBufferGrid=null;null==this.__vertexBuffer&&(this.__vertexBufferData=
new Float32Array(56),this.__vertexBufferData[0]=this.width,this.__vertexBufferData[1]=this.height,this.__vertexBufferData[3]=1,this.__vertexBufferData[4]=1,this.__vertexBufferData[15]=this.height,this.__vertexBufferData[18]=1,this.__vertexBufferData[28]=this.width,this.__vertexBufferData[31]=1,this.__vertexBuffer=a.createVertexBuffer(3,14));this.__vertexBuffer.uploadFromTypedArray(this.__vertexBufferData)}return this.__vertexBuffer},getTexture:function(a){if(!this.__isValid)return null;if(null==this.__texture||
this.__textureContext!=a.__context)this.__textureContext=a.__context,this.__texture=a.createRectangleTexture(this.width,this.height,1,!1),this.__textureVersion=-1;La.sync(this.image,!1);null!=this.image&&this.image.version>this.__textureVersion&&(null!=this.__surface&&$l.flush(this.__surface),a=this.image,xb.__supportsBGRA||0==a.get_format()||(a=a.clone(),a.set_format(0)),this.__texture.__uploadFromImage(a),this.__textureVersion=this.image.version,this.__textureWidth=a.buffer.width,this.__textureHeight=
a.buffer.height);this.readable||null==this.image||(this.image=this.__surface=null);return this.__texture},setPixel:function(a,b,c){this.readable&&this.image.setPixel(a,b,c,1)},__drawCanvas:function(a,b){var c=this.image.buffer;b.__allowSmoothing||b.applySmoothing(c.__srcContext,!1);b.__render(a);b.__allowSmoothing||b.applySmoothing(c.__srcContext,!0);c.__srcContext.setTransform(1,0,0,1,0,0);c.__srcImageData=null;c.data=null;this.image.dirty=!0;this.image.version++},__drawGL:function(a,b){var c=b.__context3D,
d=c.__state.renderToTexture,e=c.__state.renderToTextureDepthStencil,f=c.__state.renderToTextureAntiAlias,k=c.__state.renderToTextureSurfaceSelector;c.setRenderToTexture(this.getTexture(c),!0);b.__render(a);null!=d?c.setRenderToTexture(d,e,f,k):c.setRenderToBackBuffer()},__fillRect:function(a,b,c){if(null!=a)if(this.transparent&&0==(b&-16777216)&&(b=0),c&&null!=this.__texture&&null!=this.__texture.__glFramebuffer&&"opengl"==Qb.get_current().stage.__renderer.__type){c=Qb.get_current().stage.__renderer.__context3D;
var d=!this.rect.equals(a),e=c.__state.renderToTexture,f=c.__state.renderToTextureDepthStencil,k=c.__state.renderToTextureAntiAlias,m=c.__state.renderToTextureSurfaceSelector;c.setRenderToTexture(this.__texture);d&&c.setScissorRectangle(a);c.clear((b>>>16&255)/255,(b>>>8&255)/255,(b&255)/255,this.transparent?(b>>>24&255)/255:1,0,0,1);d&&c.setScissorRectangle(null);null!=e?c.setRenderToTexture(e,f,k,m):c.setRenderToBackBuffer()}else this.readable&&this.image.fillRect(a.__toLimeRectangle(),b,1)},__fromImage:function(a){null!=
a&&null!=a.buffer&&(this.image=a,this.width=a.width,this.height=a.height,this.rect=new ya(0,0,a.width,a.height),this.__textureWidth=this.width,this.__textureHeight=this.height,this.__isValid=this.readable=!0)},__getBounds:function(a,b){var c=ya.__pool.get();this.rect.__transform(c,b);a.__expand(c.x,c.y,c.width,c.height);ya.__pool.release(c)},__renderCairo:function(a){},__renderCanvas:function(a){if(this.readable){this.image.type==Wc.DATA&&La.convertToCanvas(this.image);var b=a.context;b.globalAlpha=
1;a.setTransform(this.__renderTransform,b);b.drawImage(this.image.get_src(),0,0,this.image.width,this.image.height)}},__renderDOM:function(a){},__renderGL:function(a){var b=a.__context3D;a.__setBlendMode(10);var c=a.__defaultDisplayShader;a.setShader(c);a.applyBitmapData(this,a.__upscaled);a.applyMatrix(a.__getMatrix(this.__worldTransform,1));a.applyAlpha(this.__worldAlpha);a.applyColorTransform(this.__worldColorTransform);a.updateShader();var d=this.getVertexBuffer(b);null!=c.__position&&b.setVertexBufferAt(c.__position.index,
d,0,3);null!=c.__textureCoord&&b.setVertexBufferAt(c.__textureCoord.index,d,3,2);c=this.getIndexBuffer(b);b.drawTriangles(c);a.__clearShader()},__setUVRect:function(a,b,c,d,e){if(null!=this.getVertexBuffer(a)&&(d!=this.__uvRect.width||e!=this.__uvRect.height||b!=this.__uvRect.x||c!=this.__uvRect.y)){null==this.__uvRect&&(this.__uvRect=new ya);this.__uvRect.setTo(b,c,d,e);a=0<this.__textureWidth?b/this.__textureWidth:0;c=0<this.__textureHeight?c/this.__textureHeight:0;b=0<this.__textureWidth?d/this.__textureWidth:
0;var f=0<this.__textureHeight?e/this.__textureHeight:0;this.__vertexBufferData[0]=d;this.__vertexBufferData[1]=e;this.__vertexBufferData[3]=a+b;this.__vertexBufferData[4]=c+f;this.__vertexBufferData[15]=e;this.__vertexBufferData[17]=a;this.__vertexBufferData[18]=c+f;this.__vertexBufferData[28]=d;this.__vertexBufferData[31]=a+b;this.__vertexBufferData[32]=c;this.__vertexBufferData[45]=a;this.__vertexBufferData[46]=c;this.__vertexBuffer.uploadFromTypedArray(this.__vertexBufferData)}},__update:function(a,
b){this.__updateTransforms()},__updateTransforms:function(a){null==a?this.__worldTransform.identity():this.__worldTransform.copyFrom(a);this.__renderTransform.copyFrom(this.__worldTransform)},__class__:Mb};var ub=function(){};g["openfl._internal.renderer.context3D.Context3DGraphics"]=ub;ub.__name__="openfl._internal.renderer.context3D.Context3DGraphics";ub.buildBuffer=function(a,b){var c=0,d=0,e=0,f=new de(a.__commands);b=b.__context3D;for(var k=ya.__pool.get(),m=va.__pool.get(),h=null,n=0,g=a.__commands.types;n<
g.length;){var l=g[n];++n;switch(l._hx_index){case 0:switch(f.prev._hx_index){case 0:f.oPos+=2;f.bPos+=2;break;case 1:f.iPos+=1;f.fPos+=1;break;case 2:f.oPos+=4;f.iiPos+=2;f.ffPos+=1;f.fPos+=1;break;case 3:f.oPos+=1;break;case 4:f.fPos+=6;break;case 5:f.fPos+=4;break;case 6:f.fPos+=3;break;case 7:f.fPos+=4;break;case 8:f.oPos+=3;break;case 9:f.fPos+=4;break;case 10:f.fPos+=5;f.oPos+=1;break;case 12:f.oPos+=4;break;case 14:f.oPos+=2;f.bPos+=2;break;case 15:f.oPos+=4;f.iiPos+=2;f.ffPos+=1;f.fPos+=1;
break;case 16:f.oPos+=4;f.iPos+=1;f.fPos+=2;f.bPos+=1;break;case 17:f.fPos+=2;break;case 18:f.fPos+=2;break;case 19:f.oPos+=1;break;case 20:f.oPos+=1}f.prev=Z.BEGIN_BITMAP_FILL;h=f;h=h.buffer.o[h.oPos];break;case 1:h=null;switch(f.prev._hx_index){case 0:f.oPos+=2;f.bPos+=2;break;case 1:f.iPos+=1;f.fPos+=1;break;case 2:f.oPos+=4;f.iiPos+=2;f.ffPos+=1;f.fPos+=1;break;case 3:f.oPos+=1;break;case 4:f.fPos+=6;break;case 5:f.fPos+=4;break;case 6:f.fPos+=3;break;case 7:f.fPos+=4;break;case 8:f.oPos+=3;break;
case 9:f.fPos+=4;break;case 10:f.fPos+=5;f.oPos+=1;break;case 12:f.oPos+=4;break;case 14:f.oPos+=2;f.bPos+=2;break;case 15:f.oPos+=4;f.iiPos+=2;f.ffPos+=1;f.fPos+=1;break;case 16:f.oPos+=4;f.iPos+=1;f.fPos+=2;f.bPos+=1;break;case 17:f.fPos+=2;break;case 18:f.fPos+=2;break;case 19:f.oPos+=1;break;case 20:f.oPos+=1}f.prev=l;break;case 3:switch(f.prev._hx_index){case 0:f.oPos+=2;f.bPos+=2;break;case 1:f.iPos+=1;f.fPos+=1;break;case 2:f.oPos+=4;f.iiPos+=2;f.ffPos+=1;f.fPos+=1;break;case 3:f.oPos+=1;break;
case 4:f.fPos+=6;break;case 5:f.fPos+=4;break;case 6:f.fPos+=3;break;case 7:f.fPos+=4;break;case 8:f.oPos+=3;break;case 9:f.fPos+=4;break;case 10:f.fPos+=5;f.oPos+=1;break;case 12:f.oPos+=4;break;case 14:f.oPos+=2;f.bPos+=2;break;case 15:f.oPos+=4;f.iiPos+=2;f.ffPos+=1;f.fPos+=1;break;case 16:f.oPos+=4;f.iPos+=1;f.fPos+=2;f.bPos+=1;break;case 17:f.fPos+=2;break;case 18:f.fPos+=2;break;case 19:f.oPos+=1;break;case 20:f.oPos+=1}f.prev=Z.BEGIN_SHADER_FILL;h=f;l=h.buffer.o[h.oPos];h=null;if(null!=l)for(var p=
0,y=l.inputCount;p<y;){var r=p++;if("bitmap"==l.inputRefs[r].name){h=l.inputs[r];break}}break;case 8:if(null!=h){switch(f.prev._hx_index){case 0:f.oPos+=2;f.bPos+=2;break;case 1:f.iPos+=1;f.fPos+=1;break;case 2:f.oPos+=4;f.iiPos+=2;f.ffPos+=1;f.fPos+=1;break;case 3:f.oPos+=1;break;case 4:f.fPos+=6;break;case 5:f.fPos+=4;break;case 6:f.fPos+=3;break;case 7:f.fPos+=4;break;case 8:f.oPos+=3;break;case 9:f.fPos+=4;break;case 10:f.fPos+=5;f.oPos+=1;break;case 12:f.oPos+=4;break;case 14:f.oPos+=2;f.bPos+=
2;break;case 15:f.oPos+=4;f.iiPos+=2;f.ffPos+=1;f.fPos+=1;break;case 16:f.oPos+=4;f.iPos+=1;f.fPos+=2;f.bPos+=1;break;case 17:f.fPos+=2;break;case 18:f.fPos+=2;break;case 19:f.oPos+=1;break;case 20:f.oPos+=1}f.prev=Z.DRAW_QUADS;y=f;l=y.buffer.o[y.oPos];p=y.buffer.o[y.oPos+1];y=y.buffer.o[y.oPos+2];r=null!=p;var q=!1,t=!1,z=r?p.get_length():Math.floor(l.get_length()/4);if(0==z)return;null!=y&&(y.get_length()>=6*z?t=q=!0:y.get_length()>=4*z?q=!0:y.get_length()>=2*z&&(t=!0));null==a.__quadBuffer?a.__quadBuffer=
new th(b,Om.QUADS,z,4):a.__quadBuffer.resize(c+z,4);for(var w,O,A,u,v,x,B,F,qa,L,M,Ia,Ca,ja,D=a.__quadBuffer.vertexBufferData,J=h.width,ba=h.height,ha=0,N=z;ha<N;)u=ha++,w=16*(c+u),O=r?4*p.get(u):4*u,0>O||(k.setTo(l.get(O),l.get(O+1),l.get(O+2),l.get(O+3)),O=k.width,A=k.height,0>=O||0>=A||(q&&t?(u*=6,m.setTo(y.get(u),y.get(u+1),y.get(u+2),y.get(u+3),y.get(u+4),y.get(u+5))):q?(u*=4,m.setTo(y.get(u),y.get(u+1),y.get(u+2),y.get(u+3),k.x,k.y)):t?(u*=2,m.tx=y.get(u),m.ty=y.get(u+1)):(m.tx=k.x,m.ty=k.y),
u=k.x/J,v=k.y/ba,x=k.get_right()/J,B=k.get_bottom()/ba,F=0*m.a+0*m.c+m.tx,qa=0*m.b+0*m.d+m.ty,L=O*m.a+0*m.c+m.tx,M=O*m.b+0*m.d+m.ty,Ia=0*m.a+A*m.c+m.tx,Ca=0*m.b+A*m.d+m.ty,ja=O*m.a+A*m.c+m.tx,O=O*m.b+A*m.d+m.ty,D[w]=F,D[w+1]=qa,D[w+2]=u,D[w+3]=v,D[w+4]=L,D[w+4+1]=M,D[w+4+2]=x,D[w+4+3]=v,D[w+8]=Ia,D[w+8+1]=Ca,D[w+8+2]=u,D[w+8+3]=B,D[w+12]=ja,D[w+12+1]=O,D[w+12+2]=x,D[w+12+3]=B));c+=z}break;case 12:switch(f.prev._hx_index){case 0:f.oPos+=2;f.bPos+=2;break;case 1:f.iPos+=1;f.fPos+=1;break;case 2:f.oPos+=
4;f.iiPos+=2;f.ffPos+=1;f.fPos+=1;break;case 3:f.oPos+=1;break;case 4:f.fPos+=6;break;case 5:f.fPos+=4;break;case 6:f.fPos+=3;break;case 7:f.fPos+=4;break;case 8:f.oPos+=3;break;case 9:f.fPos+=4;break;case 10:f.fPos+=5;f.oPos+=1;break;case 12:f.oPos+=4;break;case 14:f.oPos+=2;f.bPos+=2;break;case 15:f.oPos+=4;f.iiPos+=2;f.ffPos+=1;f.fPos+=1;break;case 16:f.oPos+=4;f.iPos+=1;f.fPos+=2;f.bPos+=1;break;case 17:f.fPos+=2;break;case 18:f.fPos+=2;break;case 19:f.oPos+=1;break;case 20:f.oPos+=1}f.prev=Z.DRAW_TRIANGLES;
y=f;l=y.buffer.o[y.oPos];p=y.buffer.o[y.oPos+1];y=y.buffer.o[y.oPos+2];r=null!=p;z=Math.floor(l.get_length()/2);q=r?p.get_length():z;w=(z=(t=null!=y)&&y.get_length()>=3*z)?4:2;D=z?3:2;J=w+2;ba=z?e:d;ub.resizeVertexBuffer(a,z,ba+q*J);ha=z?a.__vertexBufferDataUVT:a.__vertexBufferData;A=0;for(u=q;A<u;)v=A++,N=ba+v*J,O=r?2*p.get(v):2*v,v=r?p.get(v)*D:v*D,z?(x=y.get(v+2),ha[N]=l.get(O)/x,ha[N+1]=l.get(O+1)/x,ha[N+2]=0,ha[N+3]=1/x):(ha[N]=l.get(O),ha[N+1]=l.get(O+1)),ha[N+w]=t?y.get(v):0,ha[N+w+1]=t?y.get(v+
1):0;z?e+=q*J:d+=q*J;break;case 13:h=null;break;default:switch(f.prev._hx_index){case 0:f.oPos+=2;f.bPos+=2;break;case 1:f.iPos+=1;f.fPos+=1;break;case 2:f.oPos+=4;f.iiPos+=2;f.ffPos+=1;f.fPos+=1;break;case 3:f.oPos+=1;break;case 4:f.fPos+=6;break;case 5:f.fPos+=4;break;case 6:f.fPos+=3;break;case 7:f.fPos+=4;break;case 8:f.oPos+=3;break;case 9:f.fPos+=4;break;case 10:f.fPos+=5;f.oPos+=1;break;case 12:f.oPos+=4;break;case 14:f.oPos+=2;f.bPos+=2;break;case 15:f.oPos+=4;f.iiPos+=2;f.ffPos+=1;f.fPos+=
1;break;case 16:f.oPos+=4;f.iPos+=1;f.fPos+=2;f.bPos+=1;break;case 17:f.fPos+=2;break;case 18:f.fPos+=2;break;case 19:f.oPos+=1;break;case 20:f.oPos+=1}f.prev=l}}0<c&&a.__quadBuffer.flushVertexBufferData();if(0<d){c=a.__vertexBuffer;if(null==c||d>a.__vertexBufferCount)c=b.createVertexBuffer(d,4,0),a.__vertexBuffer=c,a.__vertexBufferCount=d;c.uploadFromTypedArray(a.__vertexBufferData)}if(0<e){d=a.__vertexBufferUVT;if(null==d||e>a.__vertexBufferCountUVT)d=b.createVertexBuffer(e,6,0),a.__vertexBufferUVT=
d,a.__vertexBufferCountUVT=e;d.uploadFromTypedArray(a.__vertexBufferDataUVT)}ya.__pool.release(k);va.__pool.release(m)};ub.isCompatible=function(a){if(null!=a.__owner.__worldScale9Grid)return!1;var b=new de(a.__commands),c=!1,d=!1,e=!1,f=0;for(a=a.__commands.types;f<a.length;){var k=a[f];++f;switch(k._hx_index){case 0:d=!0;e=c=!1;switch(b.prev._hx_index){case 0:b.oPos+=2;b.bPos+=2;break;case 1:b.iPos+=1;b.fPos+=1;break;case 2:b.oPos+=4;b.iiPos+=2;b.ffPos+=1;b.fPos+=1;break;case 3:b.oPos+=1;break;
case 4:b.fPos+=6;break;case 5:b.fPos+=4;break;case 6:b.fPos+=3;break;case 7:b.fPos+=4;break;case 8:b.oPos+=3;break;case 9:b.fPos+=4;break;case 10:b.fPos+=5;b.oPos+=1;break;case 12:b.oPos+=4;break;case 14:b.oPos+=2;b.bPos+=2;break;case 15:b.oPos+=4;b.iiPos+=2;b.ffPos+=1;b.fPos+=1;break;case 16:b.oPos+=4;b.iPos+=1;b.fPos+=2;b.bPos+=1;break;case 17:b.fPos+=2;break;case 18:b.fPos+=2;break;case 19:b.oPos+=1;break;case 20:b.oPos+=1}b.prev=k;break;case 1:d=!1;c=!0;e=!1;switch(b.prev._hx_index){case 0:b.oPos+=
2;b.bPos+=2;break;case 1:b.iPos+=1;b.fPos+=1;break;case 2:b.oPos+=4;b.iiPos+=2;b.ffPos+=1;b.fPos+=1;break;case 3:b.oPos+=1;break;case 4:b.fPos+=6;break;case 5:b.fPos+=4;break;case 6:b.fPos+=3;break;case 7:b.fPos+=4;break;case 8:b.oPos+=3;break;case 9:b.fPos+=4;break;case 10:b.fPos+=5;b.oPos+=1;break;case 12:b.oPos+=4;break;case 14:b.oPos+=2;b.bPos+=2;break;case 15:b.oPos+=4;b.iiPos+=2;b.ffPos+=1;b.fPos+=1;break;case 16:b.oPos+=4;b.iPos+=1;b.fPos+=2;b.bPos+=1;break;case 17:b.fPos+=2;break;case 18:b.fPos+=
2;break;case 19:b.oPos+=1;break;case 20:b.oPos+=1}b.prev=k;break;case 3:c=d=!1;e=!0;switch(b.prev._hx_index){case 0:b.oPos+=2;b.bPos+=2;break;case 1:b.iPos+=1;b.fPos+=1;break;case 2:b.oPos+=4;b.iiPos+=2;b.ffPos+=1;b.fPos+=1;break;case 3:b.oPos+=1;break;case 4:b.fPos+=6;break;case 5:b.fPos+=4;break;case 6:b.fPos+=3;break;case 7:b.fPos+=4;break;case 8:b.oPos+=3;break;case 9:b.fPos+=4;break;case 10:b.fPos+=5;b.oPos+=1;break;case 12:b.oPos+=4;break;case 14:b.oPos+=2;b.bPos+=2;break;case 15:b.oPos+=4;
b.iiPos+=2;b.ffPos+=1;b.fPos+=1;break;case 16:b.oPos+=4;b.iPos+=1;b.fPos+=2;b.bPos+=1;break;case 17:b.fPos+=2;break;case 18:b.fPos+=2;break;case 19:b.oPos+=1;break;case 20:b.oPos+=1}b.prev=k;break;case 8:if(d||e){switch(b.prev._hx_index){case 0:b.oPos+=2;b.bPos+=2;break;case 1:b.iPos+=1;b.fPos+=1;break;case 2:b.oPos+=4;b.iiPos+=2;b.ffPos+=1;b.fPos+=1;break;case 3:b.oPos+=1;break;case 4:b.fPos+=6;break;case 5:b.fPos+=4;break;case 6:b.fPos+=3;break;case 7:b.fPos+=4;break;case 8:b.oPos+=3;break;case 9:b.fPos+=
4;break;case 10:b.fPos+=5;b.oPos+=1;break;case 12:b.oPos+=4;break;case 14:b.oPos+=2;b.bPos+=2;break;case 15:b.oPos+=4;b.iiPos+=2;b.ffPos+=1;b.fPos+=1;break;case 16:b.oPos+=4;b.iPos+=1;b.fPos+=2;b.bPos+=1;break;case 17:b.fPos+=2;break;case 18:b.fPos+=2;break;case 19:b.oPos+=1;break;case 20:b.oPos+=1}b.prev=k}else return b.destroy(),!1;break;case 9:if(c){switch(b.prev._hx_index){case 0:b.oPos+=2;b.bPos+=2;break;case 1:b.iPos+=1;b.fPos+=1;break;case 2:b.oPos+=4;b.iiPos+=2;b.ffPos+=1;b.fPos+=1;break;
case 3:b.oPos+=1;break;case 4:b.fPos+=6;break;case 5:b.fPos+=4;break;case 6:b.fPos+=3;break;case 7:b.fPos+=4;break;case 8:b.oPos+=3;break;case 9:b.fPos+=4;break;case 10:b.fPos+=5;b.oPos+=1;break;case 12:b.oPos+=4;break;case 14:b.oPos+=2;b.bPos+=2;break;case 15:b.oPos+=4;b.iiPos+=2;b.ffPos+=1;b.fPos+=1;break;case 16:b.oPos+=4;b.iPos+=1;b.fPos+=2;b.bPos+=1;break;case 17:b.fPos+=2;break;case 18:b.fPos+=2;break;case 19:b.oPos+=1;break;case 20:b.oPos+=1}b.prev=k}else return b.destroy(),!1;break;case 12:if(d||
e){switch(b.prev._hx_index){case 0:b.oPos+=2;b.bPos+=2;break;case 1:b.iPos+=1;b.fPos+=1;break;case 2:b.oPos+=4;b.iiPos+=2;b.ffPos+=1;b.fPos+=1;break;case 3:b.oPos+=1;break;case 4:b.fPos+=6;break;case 5:b.fPos+=4;break;case 6:b.fPos+=3;break;case 7:b.fPos+=4;break;case 8:b.oPos+=3;break;case 9:b.fPos+=4;break;case 10:b.fPos+=5;b.oPos+=1;break;case 12:b.oPos+=4;break;case 14:b.oPos+=2;b.bPos+=2;break;case 15:b.oPos+=4;b.iiPos+=2;b.ffPos+=1;b.fPos+=1;break;case 16:b.oPos+=4;b.iPos+=1;b.fPos+=2;b.bPos+=
1;break;case 17:b.fPos+=2;break;case 18:b.fPos+=2;break;case 19:b.oPos+=1;break;case 20:b.oPos+=1}b.prev=k}else return b.destroy(),!1;break;case 13:e=c=d=!1;switch(b.prev._hx_index){case 0:b.oPos+=2;b.bPos+=2;break;case 1:b.iPos+=1;b.fPos+=1;break;case 2:b.oPos+=4;b.iiPos+=2;b.ffPos+=1;b.fPos+=1;break;case 3:b.oPos+=1;break;case 4:b.fPos+=6;break;case 5:b.fPos+=4;break;case 6:b.fPos+=3;break;case 7:b.fPos+=4;break;case 8:b.oPos+=3;break;case 9:b.fPos+=4;break;case 10:b.fPos+=5;b.oPos+=1;break;case 12:b.oPos+=
4;break;case 14:b.oPos+=2;b.bPos+=2;break;case 15:b.oPos+=4;b.iiPos+=2;b.ffPos+=1;b.fPos+=1;break;case 16:b.oPos+=4;b.iPos+=1;b.fPos+=2;b.bPos+=1;break;case 17:b.fPos+=2;break;case 18:b.fPos+=2;break;case 19:b.oPos+=1;break;case 20:b.oPos+=1}b.prev=k;break;case 18:switch(b.prev._hx_index){case 0:b.oPos+=2;b.bPos+=2;break;case 1:b.iPos+=1;b.fPos+=1;break;case 2:b.oPos+=4;b.iiPos+=2;b.ffPos+=1;b.fPos+=1;break;case 3:b.oPos+=1;break;case 4:b.fPos+=6;break;case 5:b.fPos+=4;break;case 6:b.fPos+=3;break;
case 7:b.fPos+=4;break;case 8:b.oPos+=3;break;case 9:b.fPos+=4;break;case 10:b.fPos+=5;b.oPos+=1;break;case 12:b.oPos+=4;break;case 14:b.oPos+=2;b.bPos+=2;break;case 15:b.oPos+=4;b.iiPos+=2;b.ffPos+=1;b.fPos+=1;break;case 16:b.oPos+=4;b.iPos+=1;b.fPos+=2;b.bPos+=1;break;case 17:b.fPos+=2;break;case 18:b.fPos+=2;break;case 19:b.oPos+=1;break;case 20:b.oPos+=1}b.prev=k;break;case 19:switch(b.prev._hx_index){case 0:b.oPos+=2;b.bPos+=2;break;case 1:b.iPos+=1;b.fPos+=1;break;case 2:b.oPos+=4;b.iiPos+=
2;b.ffPos+=1;b.fPos+=1;break;case 3:b.oPos+=1;break;case 4:b.fPos+=6;break;case 5:b.fPos+=4;break;case 6:b.fPos+=3;break;case 7:b.fPos+=4;break;case 8:b.oPos+=3;break;case 9:b.fPos+=4;break;case 10:b.fPos+=5;b.oPos+=1;break;case 12:b.oPos+=4;break;case 14:b.oPos+=2;b.bPos+=2;break;case 15:b.oPos+=4;b.iiPos+=2;b.ffPos+=1;b.fPos+=1;break;case 16:b.oPos+=4;b.iPos+=1;b.fPos+=2;b.bPos+=1;break;case 17:b.fPos+=2;break;case 18:b.fPos+=2;break;case 19:b.oPos+=1;break;case 20:b.oPos+=1}b.prev=k;break;default:return b.destroy(),
!1}}b.destroy();return!0};ub.render=function(a,b){if(a.__visible&&0!=a.__commands.get_length())if(null!=a.__bitmap&&!a.__dirty||!ub.isCompatible(a)){var c=b.__softwareRenderer.__worldTransform;b.__softwareRenderer.__worldTransform=b.__worldTransform;A.render(a,b.__softwareRenderer);b.__softwareRenderer.__worldTransform=c}else{a.__bitmap=null;a.__update(b.__worldTransform);c=a.__width;var d=a.__height;if(null!=a.__bounds&&1<=c&&1<=d){(a.__hardwareDirty||null==a.__quadBuffer&&null==a.__vertexBuffer&&
null==a.__vertexBufferUVT)&&ub.buildBuffer(a,b);c=new de(a.__commands);d=b.__context3D;for(var e=va.__pool.get(),f=null,k=null,m=!1,h=!1,n=null,g=0,l=0,p=0,y=0,r=0,q=a.__commands.types;r<q.length;){var t=q[r];++r;switch(t._hx_index){case 0:switch(c.prev._hx_index){case 0:c.oPos+=2;c.bPos+=2;break;case 1:c.iPos+=1;c.fPos+=1;break;case 2:c.oPos+=4;c.iiPos+=2;c.ffPos+=1;c.fPos+=1;break;case 3:c.oPos+=1;break;case 4:c.fPos+=6;break;case 5:c.fPos+=4;break;case 6:c.fPos+=3;break;case 7:c.fPos+=4;break;
case 8:c.oPos+=3;break;case 9:c.fPos+=4;break;case 10:c.fPos+=5;c.oPos+=1;break;case 12:c.oPos+=4;break;case 14:c.oPos+=2;c.bPos+=2;break;case 15:c.oPos+=4;c.iiPos+=2;c.ffPos+=1;c.fPos+=1;break;case 16:c.oPos+=4;c.iPos+=1;c.fPos+=2;c.bPos+=1;break;case 17:c.fPos+=2;break;case 18:c.fPos+=2;break;case 19:c.oPos+=1;break;case 20:c.oPos+=1}c.prev=Z.BEGIN_BITMAP_FILL;h=c;k=h.buffer.o[h.oPos];m=h.buffer.b[h.bPos];h=h.buffer.b[h.bPos+1];n=f=null;break;case 1:switch(c.prev._hx_index){case 0:c.oPos+=2;c.bPos+=
2;break;case 1:c.iPos+=1;c.fPos+=1;break;case 2:c.oPos+=4;c.iiPos+=2;c.ffPos+=1;c.fPos+=1;break;case 3:c.oPos+=1;break;case 4:c.fPos+=6;break;case 5:c.fPos+=4;break;case 6:c.fPos+=3;break;case 7:c.fPos+=4;break;case 8:c.oPos+=3;break;case 9:c.fPos+=4;break;case 10:c.fPos+=5;c.oPos+=1;break;case 12:c.oPos+=4;break;case 14:c.oPos+=2;c.bPos+=2;break;case 15:c.oPos+=4;c.iiPos+=2;c.ffPos+=1;c.fPos+=1;break;case 16:c.oPos+=4;c.iPos+=1;c.fPos+=2;c.bPos+=1;break;case 17:c.fPos+=2;break;case 18:c.fPos+=2;
break;case 19:c.oPos+=1;break;case 20:c.oPos+=1}c.prev=Z.BEGIN_FILL;k=c;n=(k.buffer.i[k.iPos]|0)&16777215|(255*k.buffer.f[k.fPos]|0)<<24;k=f=null;break;case 3:switch(c.prev._hx_index){case 0:c.oPos+=2;c.bPos+=2;break;case 1:c.iPos+=1;c.fPos+=1;break;case 2:c.oPos+=4;c.iiPos+=2;c.ffPos+=1;c.fPos+=1;break;case 3:c.oPos+=1;break;case 4:c.fPos+=6;break;case 5:c.fPos+=4;break;case 6:c.fPos+=3;break;case 7:c.fPos+=4;break;case 8:c.oPos+=3;break;case 9:c.fPos+=4;break;case 10:c.fPos+=5;c.oPos+=1;break;case 12:c.oPos+=
4;break;case 14:c.oPos+=2;c.bPos+=2;break;case 15:c.oPos+=4;c.iiPos+=2;c.ffPos+=1;c.fPos+=1;break;case 16:c.oPos+=4;c.iPos+=1;c.fPos+=2;c.bPos+=1;break;case 17:c.fPos+=2;break;case 18:c.fPos+=2;break;case 19:c.oPos+=1;break;case 20:c.oPos+=1}c.prev=Z.BEGIN_SHADER_FILL;l=c;f=l.buffer.o[l.oPos];l=0;k=null==f||null==f.shader||null==f.shader.__bitmap?null:f.shader.__bitmap.input;n=null;break;case 8:if(null!=k){switch(c.prev._hx_index){case 0:c.oPos+=2;c.bPos+=2;break;case 1:c.iPos+=1;c.fPos+=1;break;
case 2:c.oPos+=4;c.iiPos+=2;c.ffPos+=1;c.fPos+=1;break;case 3:c.oPos+=1;break;case 4:c.fPos+=6;break;case 5:c.fPos+=4;break;case 6:c.fPos+=3;break;case 7:c.fPos+=4;break;case 8:c.oPos+=3;break;case 9:c.fPos+=4;break;case 10:c.fPos+=5;c.oPos+=1;break;case 12:c.oPos+=4;break;case 14:c.oPos+=2;c.bPos+=2;break;case 15:c.oPos+=4;c.iiPos+=2;c.ffPos+=1;c.fPos+=1;break;case 16:c.oPos+=4;c.iPos+=1;c.fPos+=2;c.bPos+=1;break;case 17:c.fPos+=2;break;case 18:c.fPos+=2;break;case 19:c.oPos+=1;break;case 20:c.oPos+=
1}c.prev=Z.DRAW_QUADS;var z=c;t=z.buffer.o[z.oPos];z=z.buffer.o[z.oPos+1];t=null!=z?z.get_length():Math.floor(t.get_length()/4);var w=b.__getMatrix(a.__owner.__renderTransform,1);null==f||ub.maskRender?(z=ub.maskRender?b.__maskShader:b.__initGraphicsShader(null),b.setShader(z),b.applyMatrix(w),b.applyBitmapData(k,h,m),b.applyAlpha(a.__owner.__worldAlpha),b.applyColorTransform(a.__owner.__worldColorTransform),b.updateShader()):(z=b.__initShaderBuffer(f),b.__setShaderBuffer(f),b.applyMatrix(w),b.applyBitmapData(k,
!1,m),b.applyAlpha(a.__owner.__worldAlpha),b.applyColorTransform(a.__owner.__worldColorTransform));for(w=g+t;g<w;){t=Math.min(w-g,d.__quadIndexBufferElements)|0;if(0>=t)break;null==f||ub.maskRender||b.__updateShaderBuffer(l);null!=z.__position&&d.setVertexBufferAt(z.__position.index,a.__quadBuffer.vertexBuffer,16*g,2);null!=z.__textureCoord&&d.setVertexBufferAt(z.__textureCoord.index,a.__quadBuffer.vertexBuffer,16*g+2,2);d.drawTriangles(d.__quadIndexBuffer,0,2*t);l+=4*t;g+=t}b.__clearShader()}break;
case 9:if(null!=n){switch(c.prev._hx_index){case 0:c.oPos+=2;c.bPos+=2;break;case 1:c.iPos+=1;c.fPos+=1;break;case 2:c.oPos+=4;c.iiPos+=2;c.ffPos+=1;c.fPos+=1;break;case 3:c.oPos+=1;break;case 4:c.fPos+=6;break;case 5:c.fPos+=4;break;case 6:c.fPos+=3;break;case 7:c.fPos+=4;break;case 8:c.oPos+=3;break;case 9:c.fPos+=4;break;case 10:c.fPos+=5;c.oPos+=1;break;case 12:c.oPos+=4;break;case 14:c.oPos+=2;c.bPos+=2;break;case 15:c.oPos+=4;c.iiPos+=2;c.ffPos+=1;c.fPos+=1;break;case 16:c.oPos+=4;c.iPos+=1;
c.fPos+=2;c.bPos+=1;break;case 17:c.fPos+=2;break;case 18:c.fPos+=2;break;case 19:c.oPos+=1;break;case 20:c.oPos+=1}c.prev=Z.DRAW_RECT;var O=c;t=O.buffer.f[O.fPos];z=O.buffer.f[O.fPos+1];w=O.buffer.f[O.fPos+2];var u=O.buffer.f[O.fPos+3];O=n;ub.tempColorTransform.redOffset=O>>>16&255;ub.tempColorTransform.greenOffset=O>>>8&255;ub.tempColorTransform.blueOffset=O&255;ub.tempColorTransform.__combine(a.__owner.__worldColorTransform);e.identity();e.scale(w,u);e.tx=t;e.ty=z;e.concat(a.__owner.__renderTransform);
t=ub.maskRender?b.__maskShader:b.__initGraphicsShader(null);b.setShader(t);b.applyMatrix(b.__getMatrix(e,1));b.applyBitmapData(ub.blankBitmapData,!0,m);b.applyAlpha((O>>>24&255)/255*a.__owner.__worldAlpha);b.applyColorTransform(ub.tempColorTransform);b.updateShader();z=ub.blankBitmapData.getVertexBuffer(d);null!=t.__position&&d.setVertexBufferAt(t.__position.index,z,0,3);null!=t.__textureCoord&&d.setVertexBufferAt(t.__textureCoord.index,z,3,2);t=ub.blankBitmapData.getIndexBuffer(d);d.drawTriangles(t);
l+=4;b.__clearShader()}break;case 12:switch(c.prev._hx_index){case 0:c.oPos+=2;c.bPos+=2;break;case 1:c.iPos+=1;c.fPos+=1;break;case 2:c.oPos+=4;c.iiPos+=2;c.ffPos+=1;c.fPos+=1;break;case 3:c.oPos+=1;break;case 4:c.fPos+=6;break;case 5:c.fPos+=4;break;case 6:c.fPos+=3;break;case 7:c.fPos+=4;break;case 8:c.oPos+=3;break;case 9:c.fPos+=4;break;case 10:c.fPos+=5;c.oPos+=1;break;case 12:c.oPos+=4;break;case 14:c.oPos+=2;c.bPos+=2;break;case 15:c.oPos+=4;c.iiPos+=2;c.ffPos+=1;c.fPos+=1;break;case 16:c.oPos+=
4;c.iPos+=1;c.fPos+=2;c.bPos+=1;break;case 17:c.fPos+=2;break;case 18:c.fPos+=2;break;case 19:c.oPos+=1;break;case 20:c.oPos+=1}c.prev=Z.DRAW_TRIANGLES;u=c;z=u.buffer.o[u.oPos+1];w=u.buffer.o[u.oPos+2];t=u.buffer.o[u.oPos+3];O=null!=z;u=Math.floor(u.buffer.o[u.oPos].get_length()/2);z=O?z.get_length():u;O=(w=null!=w&&w.get_length()>=3*u)?4:2;u=O+2;var v=w?a.__vertexBufferUVT:a.__vertexBuffer,x=w?y:p,B=b.__getMatrix(a.__owner.__renderTransform,1);if(null==f||ub.maskRender){var F=ub.maskRender?b.__maskShader:
b.__initGraphicsShader(null);b.setShader(F);b.applyMatrix(B);b.applyBitmapData(k,h,m);b.applyAlpha(a.__owner.__worldAlpha);b.applyColorTransform(a.__owner.__worldColorTransform);b.updateShader()}else F=b.__initShaderBuffer(f),b.__setShaderBuffer(f),b.applyMatrix(B),b.applyBitmapData(k,!1,m),b.applyAlpha(1),b.applyColorTransform(null),b.__updateShaderBuffer(l);null!=F.__position&&d.setVertexBufferAt(F.__position.index,v,x,w?4:2);null!=F.__textureCoord&&d.setVertexBufferAt(F.__textureCoord.index,v,
x+O,2);switch(t){case 0:d.setCulling(0);break;case 1:d.setCulling(3);break;case 2:d.setCulling(1)}d.__drawTriangles(0,z);l+=z;w?y+=u*z:p+=u*z;switch(t){case 1:case 2:d.setCulling(0)}b.__clearShader();break;case 13:f=n=k=null;switch(c.prev._hx_index){case 0:c.oPos+=2;c.bPos+=2;break;case 1:c.iPos+=1;c.fPos+=1;break;case 2:c.oPos+=4;c.iiPos+=2;c.ffPos+=1;c.fPos+=1;break;case 3:c.oPos+=1;break;case 4:c.fPos+=6;break;case 5:c.fPos+=4;break;case 6:c.fPos+=3;break;case 7:c.fPos+=4;break;case 8:c.oPos+=
3;break;case 9:c.fPos+=4;break;case 10:c.fPos+=5;c.oPos+=1;break;case 12:c.oPos+=4;break;case 14:c.oPos+=2;c.bPos+=2;break;case 15:c.oPos+=4;c.iiPos+=2;c.ffPos+=1;c.fPos+=1;break;case 16:c.oPos+=4;c.iPos+=1;c.fPos+=2;c.bPos+=1;break;case 17:c.fPos+=2;break;case 18:c.fPos+=2;break;case 19:c.oPos+=1;break;case 20:c.oPos+=1}c.prev=t;break;case 18:switch(c.prev._hx_index){case 0:c.oPos+=2;c.bPos+=2;break;case 1:c.iPos+=1;c.fPos+=1;break;case 2:c.oPos+=4;c.iiPos+=2;c.ffPos+=1;c.fPos+=1;break;case 3:c.oPos+=
1;break;case 4:c.fPos+=6;break;case 5:c.fPos+=4;break;case 6:c.fPos+=3;break;case 7:c.fPos+=4;break;case 8:c.oPos+=3;break;case 9:c.fPos+=4;break;case 10:c.fPos+=5;c.oPos+=1;break;case 12:c.oPos+=4;break;case 14:c.oPos+=2;c.bPos+=2;break;case 15:c.oPos+=4;c.iiPos+=2;c.ffPos+=1;c.fPos+=1;break;case 16:c.oPos+=4;c.iPos+=1;c.fPos+=2;c.bPos+=1;break;case 17:c.fPos+=2;break;case 18:c.fPos+=2;break;case 19:c.oPos+=1;break;case 20:c.oPos+=1}c.prev=Z.MOVE_TO;break;case 19:switch(c.prev._hx_index){case 0:c.oPos+=
2;c.bPos+=2;break;case 1:c.iPos+=1;c.fPos+=1;break;case 2:c.oPos+=4;c.iiPos+=2;c.ffPos+=1;c.fPos+=1;break;case 3:c.oPos+=1;break;case 4:c.fPos+=6;break;case 5:c.fPos+=4;break;case 6:c.fPos+=3;break;case 7:c.fPos+=4;break;case 8:c.oPos+=3;break;case 9:c.fPos+=4;break;case 10:c.fPos+=5;c.oPos+=1;break;case 12:c.oPos+=4;break;case 14:c.oPos+=2;c.bPos+=2;break;case 15:c.oPos+=4;c.iiPos+=2;c.ffPos+=1;c.fPos+=1;break;case 16:c.oPos+=4;c.iPos+=1;c.fPos+=2;c.bPos+=1;break;case 17:c.fPos+=2;break;case 18:c.fPos+=
2;break;case 19:c.oPos+=1;break;case 20:c.oPos+=1}c.prev=Z.OVERRIDE_BLEND_MODE;t=c;b.__setBlendMode(t.buffer.o[t.oPos]);break;default:switch(c.prev._hx_index){case 0:c.oPos+=2;c.bPos+=2;break;case 1:c.iPos+=1;c.fPos+=1;break;case 2:c.oPos+=4;c.iiPos+=2;c.ffPos+=1;c.fPos+=1;break;case 3:c.oPos+=1;break;case 4:c.fPos+=6;break;case 5:c.fPos+=4;break;case 6:c.fPos+=3;break;case 7:c.fPos+=4;break;case 8:c.oPos+=3;break;case 9:c.fPos+=4;break;case 10:c.fPos+=5;c.oPos+=1;break;case 12:c.oPos+=4;break;case 14:c.oPos+=
2;c.bPos+=2;break;case 15:c.oPos+=4;c.iiPos+=2;c.ffPos+=1;c.fPos+=1;break;case 16:c.oPos+=4;c.iPos+=1;c.fPos+=2;c.bPos+=1;break;case 17:c.fPos+=2;break;case 18:c.fPos+=2;break;case 19:c.oPos+=1;break;case 20:c.oPos+=1}c.prev=t}}va.__pool.release(e)}a.__hardwareDirty=!1;a.set___dirty(!1)}};ub.renderMask=function(a,b){ub.maskRender=!0;ub.render(a,b);ub.maskRender=!1};ub.resizeVertexBuffer=function(a,b,c){var d=b?a.__vertexBufferDataUVT:a.__vertexBufferData,e=null;null==d?e=null!=c?new Float32Array(c):
null:c>d.length&&(e=null!=c?new Float32Array(c):null,e.set(d));null!=e&&(b?a.__vertexBufferDataUVT=e:a.__vertexBufferData=e)};var jd=function(a){this.byteCode=a;this.precisionHint=1;this.__glSourceDirty=!0;this.__numPasses=1;this.__data=Zj._new(a)};g["openfl.display.Shader"]=jd;jd.__name__="openfl.display.Shader";jd.prototype={byteCode:null,glProgram:null,precisionHint:null,program:null,__alpha:null,__bitmap:null,__colorMultiplier:null,__colorOffset:null,__context:null,__data:null,__glFragmentSource:null,
__glSourceDirty:null,__glVertexSource:null,__hasColorTransform:null,__inputBitmapData:null,__isGenerated:null,__matrix:null,__numPasses:null,__paramBool:null,__paramFloat:null,__paramInt:null,__position:null,__textureCoord:null,__texture:null,__textureSize:null,__clearUseArray:function(){for(var a=0,b=this.__paramBool;a<b.length;){var c=b[a];++a;c.__useArray=!1}a=0;for(b=this.__paramFloat;a<b.length;)c=b[a],++a,c.__useArray=!1;a=0;for(b=this.__paramInt;a<b.length;)c=b[a],++a,c.__useArray=!1},__createGLShader:function(a,
b){var c=this.__context.gl,d=c.createShader(b);c.shaderSource(d,a);c.compileShader(d);0==c.getShaderParameter(d,c.COMPILE_STATUS)&&(b=b==c.VERTEX_SHADER?"Error compiling vertex shader":"Error compiling fragment shader",b+="\n"+c.getShaderInfoLog(d),Ga.error(b+("\n"+a),{fileName:"openfl/display/Shader.hx",lineNumber:328,className:"openfl.display.Shader",methodName:"__createGLShader"}));return d},__createGLProgram:function(a,b){var c=this.__context.gl;a=this.__createGLShader(a,c.VERTEX_SHADER);var d=
this.__createGLShader(b,c.FRAGMENT_SHADER);b=c.createProgram();for(var e=0,f=this.__paramFloat;e<f.length;){var k=f[e];++e;if(-1<k.name.indexOf("Position")&&Y.startsWith(k.name,"openfl_")){c.bindAttribLocation(b,0,k.name);break}}c.attachShader(b,a);c.attachShader(b,d);c.linkProgram(b);0==c.getProgramParameter(b,c.LINK_STATUS)&&(c="Unable to initialize the shader program\n"+c.getProgramInfoLog(b),Ga.error(c,{fileName:"openfl/display/Shader.hx",lineNumber:361,className:"openfl.display.Shader",methodName:"__createGLProgram"}));
return b},__disable:function(){null!=this.program&&this.__disableGL()},__disableGL:function(){for(var a=this.__context.gl,b=0,c=0,d=this.__inputBitmapData;c<d.length;){var e=d[c];++c;e.__disableGL(this.__context,b);++b}b=0;for(c=this.__paramBool;b<c.length;)d=c[b],++b,d.__disableGL(this.__context);b=0;for(c=this.__paramFloat;b<c.length;)d=c[b],++b,d.__disableGL(this.__context);b=0;for(c=this.__paramInt;b<c.length;)d=c[b],++b,d.__disableGL(this.__context);this.__context.__bindGLArrayBuffer(null);"opengl"==
this.__context.__context.type&&a.disable(a.TEXTURE_2D)},__enable:function(){this.__init();null!=this.program&&this.__enableGL()},__enableGL:function(){for(var a=0,b=this.__context.gl,c=0,d=this.__inputBitmapData;c<d.length;){var e=d[c];++c;b.uniform1i(e.index,a);++a}"opengl"==this.__context.__context.type&&0<a&&b.enable(b.TEXTURE_2D)},__init:function(){null==this.__data&&(this.__data=Zj._new(null));null==this.__glFragmentSource||null==this.__glVertexSource||null!=this.program&&!this.__glSourceDirty||
this.__initGL()},__initGL:function(){if(this.__glSourceDirty||null==this.__paramBool)this.__glSourceDirty=!1,this.program=null,this.__inputBitmapData=[],this.__paramBool=[],this.__paramFloat=[],this.__paramInt=[],this.__processGLData(this.get_glVertexSource(),"attribute"),this.__processGLData(this.get_glVertexSource(),"uniform"),this.__processGLData(this.get_glFragmentSource(),"uniform");if(null!=this.__context&&null==this.program){var a=this.__context.gl,b="#ifdef GL_ES\n\t\t\t\t"+(1==this.precisionHint?
"#ifdef GL_FRAGMENT_PRECISION_HIGH\n\t\t\t\tprecision highp float;\n\t\t\t\t#else\n\t\t\t\tprecision mediump float;\n\t\t\t\t#endif":"precision lowp float;")+"\n\t\t\t\t#endif\n\t\t\t\t",c=b+this.get_glVertexSource(),d=b+this.get_glFragmentSource();b=c+d;var e=this.__context.__programs;(null!=F[b]?e.existsReserved(b):e.h.hasOwnProperty(b))?(c=this.__context.__programs,this.program=null!=F[b]?c.getReserved(b):c.h[b]):(this.program=this.__context.createProgram(1),this.program.__glProgram=this.__createGLProgram(c,
d),c=this.program,d=this.__context.__programs,null!=F[b]?d.setReserved(b,c):d.h[b]=c);if(null!=this.program){this.glProgram=this.program.__glProgram;b=0;for(c=this.__inputBitmapData;b<c.length;)d=c[b],++b,d.index=d.__isUniform?a.getUniformLocation(this.glProgram,d.name):a.getAttribLocation(this.glProgram,d.name);b=0;for(c=this.__paramBool;b<c.length;)d=c[b],++b,d.index=d.__isUniform?a.getUniformLocation(this.glProgram,d.name):a.getAttribLocation(this.glProgram,d.name);b=0;for(c=this.__paramFloat;b<
c.length;)d=c[b],++b,d.index=d.__isUniform?a.getUniformLocation(this.glProgram,d.name):a.getAttribLocation(this.glProgram,d.name);b=0;for(c=this.__paramInt;b<c.length;)d=c[b],++b,d.index=d.__isUniform?a.getUniformLocation(this.glProgram,d.name):a.getAttribLocation(this.glProgram,d.name)}}},__processGLData:function(a,b){var c=0,d;for(d="uniform"==b?new Ba("uniform ([A-Za-z0-9]+) ([A-Za-z0-9_]+)",""):new Ba("attribute ([A-Za-z0-9]+) ([A-Za-z0-9_]+)","");d.matchSub(a,c);){var e=d.matched(1);var f=d.matched(2);
if(!Y.startsWith(f,"gl_")){c="uniform"==b;if(Y.startsWith(e,"sampler")){e=new uh;e.name=f;e.__isUniform=c;this.__inputBitmapData.push(e);switch(f){case "bitmap":this.__bitmap=e;break;case "openfl_Texture":this.__texture=e}this.__data[f]=e;this.__isGenerated&&(this[f]=e)}else if(!Object.prototype.hasOwnProperty.call(this.__data,f)||null==Na.field(this.__data,f)){switch(e){case "bool":var k=0;break;case "bvec2":k=1;break;case "bvec3":k=2;break;case "bvec4":k=3;break;case "dvec2":case "vec2":k=5;break;
case "dvec3":case "vec3":k=6;break;case "double":case "float":k=4;break;case "ivec3":case "uvec3":k=10;break;case "ivec4":case "uvec4":k=11;break;case "mat2":case "mat2x2":k=12;break;case "mat2x3":k=13;break;case "mat2x4":k=14;break;case "mat3x2":k=15;break;case "mat3":case "mat3x3":k=16;break;case "mat3x4":k=17;break;case "mat4":case "mat4x4":k=20;break;case "mat4x2":k=18;break;case "mat4x3":k=19;break;case "int":case "uint":k=8;break;case "ivec2":case "uvec2":k=9;break;case "dvec4":case "vec4":k=
7;break;default:k=null}switch(k){case 1:case 5:case 9:e=2;break;case 3:case 7:case 11:case 12:e=4;break;case 2:case 6:case 10:e=3;break;case 16:e=9;break;case 20:e=16;break;default:e=1}switch(k){case 12:var m=2;break;case 16:m=3;break;case 20:m=4;break;default:m=1}switch(k){case 0:case 1:case 2:case 3:var h=new Cg;h.set_name(f);h.type=k;h.__arrayLength=m;h.__isBool=!0;h.__isUniform=c;h.__length=e;this.__paramBool.push(h);"openfl_HasColorTransform"==f&&(this.__hasColorTransform=h);this.__data[f]=h;
this.__isGenerated&&(this[f]=h);break;case 8:case 9:case 10:case 11:h=new Cg;h.set_name(f);h.type=k;h.__arrayLength=m;h.__isInt=!0;h.__isUniform=c;h.__length=e;this.__paramInt.push(h);this.__data[f]=h;this.__isGenerated&&(this[f]=h);break;default:h=new Cg;h.set_name(f);h.type=k;h.__arrayLength=m;0<m&&(k=m*m,k=null!=k?new Float32Array(k):null,h.__uniformMatrix=k);h.__isFloat=!0;h.__isUniform=c;h.__length=e;this.__paramFloat.push(h);if(Y.startsWith(f,"openfl_"))switch(f){case "openfl_Alpha":this.__alpha=
h;break;case "openfl_ColorMultiplier":this.__colorMultiplier=h;break;case "openfl_ColorOffset":this.__colorOffset=h;break;case "openfl_Matrix":this.__matrix=h;break;case "openfl_Position":this.__position=h;break;case "openfl_TextureCoord":this.__textureCoord=h;break;case "openfl_TextureSize":this.__textureSize=h}this.__data[f]=h;this.__isGenerated&&(this[f]=h)}}f=d.matchedPos();c=f.pos+f.len}}},__update:function(){null!=this.program&&this.__updateGL()},__updateFromBuffer:function(a,b){null!=this.program&&
this.__updateGLFromBuffer(a,b)},__updateGL:function(){for(var a=0,b=0,c=this.__inputBitmapData;b<c.length;){var d=c[b];++b;d.__updateGL(this.__context,a);++a}a=0;for(b=this.__paramBool;a<b.length;)c=b[a],++a,c.__updateGL(this.__context);a=0;for(b=this.__paramFloat;a<b.length;)c=b[a],++a,c.__updateGL(this.__context);a=0;for(b=this.__paramInt;a<b.length;)c=b[a],++a,c.__updateGL(this.__context)},__updateGLFromBuffer:function(a,b){for(var c=0,d,e,f,k,m,h=0,n=a.inputCount;h<n;)m=h++,d=a.inputRefs[m],e=
a.inputs[m],f=a.inputFilter[m],k=a.inputMipFilter[m],m=a.inputWrap[m],null!=e&&(d.__updateGL(this.__context,c,e,f,k,m),++c);c=this.__context.gl;0<a.paramDataLength?(null==a.paramDataBuffer&&(a.paramDataBuffer=c.createBuffer()),this.__context.__bindGLArrayBuffer(a.paramDataBuffer),sb.bufferData(c,c.ARRAY_BUFFER,a.paramData,c.DYNAMIC_DRAW)):this.__context.__bindGLArrayBuffer(null);e=d=c=0;f=a.paramBoolCount;k=a.paramFloatCount;h=a.paramData;for(var g,l=m=null,p=null,y=0,r=a.paramCount;y<r;){var q=y++;
n=!1;if(q<f){g=a.paramRefs_Bool[c];for(var t=0,z=a.overrideBoolCount;t<z;){var w=t++;if(g.name==a.overrideBoolNames[w]){m=a.overrideBoolValues[w];n=!0;break}}n?g.__updateGL(this.__context,m):g.__updateGLFromBuffer(this.__context,h,a.paramPositions[q],a.paramLengths[q],b);++c}else if(q<f+k){g=a.paramRefs_Float[d];t=0;for(z=a.overrideFloatCount;t<z;)if(w=t++,g.name==a.overrideFloatNames[w]){l=a.overrideFloatValues[w];n=!0;break}n?g.__updateGL(this.__context,l):g.__updateGLFromBuffer(this.__context,
h,a.paramPositions[q],a.paramLengths[q],b);++d}else{g=a.paramRefs_Int[e];t=0;for(z=a.overrideIntCount;t<z;)if(w=t++,g.name==a.overrideIntNames[w]){p=a.overrideIntValues[w];n=!0;break}n?g.__updateGL(this.__context,p):g.__updateGLFromBuffer(this.__context,h,a.paramPositions[q],a.paramLengths[q],b);++e}}},get_glFragmentSource:function(){return this.__glFragmentSource},get_glVertexSource:function(){return this.__glVertexSource},__class__:jd};var Wi=function(){null==this.__glFragmentSource&&(this.__glFragmentSource=
"varying vec2 openfl_TextureCoordv;\n\t\t\n\t\tuniform sampler2D openfl_Texture;\n\t\t\n\t\tvoid main(void) {\n\t\t\t\n\t\t\tvec4 color = texture2D (openfl_Texture, openfl_TextureCoordv);\n\t\t\t\n\t\t\tif (color.a == 0.0) {\n\t\t\t\t\n\t\t\t\tdiscard;\n\t\t\t\t\n\t\t\t} else {\n\t\t\t\t\n\t\t\t\tgl_FragColor = color;\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t}");null==this.__glVertexSource&&(this.__glVertexSource="attribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\t\tvarying vec2 openfl_TextureCoordv;\n\t\t\n\t\tuniform mat4 openfl_Matrix;\n\t\t\n\t\tvoid main(void) {\n\t\t\t\n\t\t\topenfl_TextureCoordv = openfl_TextureCoord;\n\t\t\t\n\t\t\tgl_Position = openfl_Matrix * openfl_Position;\n\t\t\t\n\t\t}");
jd.call(this);this.__isGenerated=!0;this.__initGL()};g["openfl._internal.renderer.context3D.Context3DMaskShader"]=Wi;Wi.__name__="openfl._internal.renderer.context3D.Context3DMaskShader";Wi.__super__=jd;Wi.prototype=v(jd.prototype,{openfl_Position:null,openfl_TextureCoord:null,openfl_Matrix:null,openfl_Texture:null,__class__:Wi});var Te=function(){};g["openfl._internal.renderer.context3D.Context3DShape"]=Te;Te.__name__="openfl._internal.renderer.context3D.Context3DShape";Te.render=function(a,b){if(a.__renderable&&
!(0>=a.__worldAlpha)){var c=a.__graphics;if(null!=c){b.__setBlendMode(a.__worldBlendMode);b.__pushMaskObject(a);ub.render(c,b);if(null!=c.__bitmap&&c.__visible){var d=b.__context3D,e=b.__initDisplayShader(a.__worldShader);b.setShader(e);b.applyBitmapData(c.__bitmap,!0);b.applyMatrix(b.__getMatrix(c.__worldTransform,1));b.applyAlpha(a.__worldAlpha);b.applyColorTransform(a.__worldColorTransform);b.updateShader();var f=c.__bitmap.getVertexBuffer(d);null!=e.__position&&d.setVertexBufferAt(e.__position.index,
f,0,3);null!=e.__textureCoord&&d.setVertexBufferAt(e.__textureCoord.index,f,3,2);c=c.__bitmap.getIndexBuffer(d);d.drawTriangles(c);b.__clearShader()}b.__popMaskObject(a)}}};Te.renderMask=function(a,b){var c=a.__graphics;if(null!=c&&(ub.renderMask(c,b),null!=c.__bitmap)){a=b.__context3D;var d=b.__maskShader;b.setShader(d);b.applyBitmapData(c.__bitmap,!0);b.applyMatrix(b.__getMatrix(c.__worldTransform,1));b.updateShader();var e=c.__bitmap.getVertexBuffer(a);null!=d.__position&&a.setVertexBufferAt(d.__position.index,
e,0,3);null!=d.__textureCoord&&a.setVertexBufferAt(d.__textureCoord.index,e,3,2);c=c.__bitmap.getIndexBuffer(a);a.drawTriangles(c);b.__clearShader()}};var vh=function(){this.backBufferEnableDepthAndStencil=!1;this.blendDestinationAlphaFactor=9;this.blendSourceAlphaFactor=2;this.blendDestinationRGBFactor=9;this.blendSourceRGBFactor=2;this.colorMaskAlpha=this.colorMaskBlue=this.colorMaskGreen=this.colorMaskRed=!0;this.culling=3;this.depthCompareMode=4;this.depthMask=!0;this.samplerStates=[];this.scissorRectangle=
new ya;this.stencilCompareMode=0;this.stencilPass=this.stencilFail=this.stencilDepthFail=5;this.stencilReadMask=255;this.stencilReferenceValue=0;this.stencilTriangleFace=2;this.stencilWriteMask=255;this.textures=[];this.__frontFaceGLCCW=!0;this.__glBlendEquation=32774};g["openfl._internal.renderer.context3D.Context3DState"]=vh;vh.__name__="openfl._internal.renderer.context3D.Context3DState";vh.prototype={backBufferEnableDepthAndStencil:null,blendDestinationAlphaFactor:null,blendSourceAlphaFactor:null,
blendDestinationRGBFactor:null,blendSourceRGBFactor:null,colorMaskRed:null,colorMaskGreen:null,colorMaskBlue:null,colorMaskAlpha:null,culling:null,depthCompareMode:null,depthMask:null,program:null,renderToTexture:null,renderToTextureAntiAlias:null,renderToTextureDepthStencil:null,renderToTextureSurfaceSelector:null,samplerStates:null,scissorEnabled:null,scissorRectangle:null,stencilCompareMode:null,stencilDepthFail:null,stencilFail:null,stencilPass:null,stencilReadMask:null,stencilReferenceValue:null,
stencilTriangleFace:null,stencilWriteMask:null,textures:null,shader:null,__currentGLArrayBuffer:null,__currentGLElementArrayBuffer:null,__currentGLFramebuffer:null,__currentGLTexture2D:null,__currentGLTextureCubeMap:null,__enableGLBlend:null,__enableGLCullFace:null,__enableGLDepthTest:null,__enableGLScissorTest:null,__enableGLStencilTest:null,__frontFaceGLCCW:null,__glBlendEquation:null,__primaryGLFramebuffer:null,__class__:vh};var ak=function(){};g["openfl._internal.renderer.context3D.Context3DTextField"]=
ak;ak.__name__="openfl._internal.renderer.context3D.Context3DTextField";ak.render=function(a,b){var c=b.__softwareRenderer,d=a.__textEngine,e=d.background||d.border?d.bounds:d.textBounds;b=a.__graphics;a.__dirty&&(a.__updateLayout(),null==b.__bounds&&(b.__bounds=new ya),b.__bounds.copyFrom(e));b.__update(c.__worldTransform);if(a.__dirty||b.__softwareDirty){var f=b.__width,k=b.__height;if(!(null!=d.text&&""!=d.text||d.background||d.border||d.__hasFocus||1==d.type&&d.selectable)||(0>=d.width||0>=d.height)&&
2!=d.autoSize)a.__graphics.__canvas=null,a.__graphics.__context=null,a.__graphics.__bitmap=null,a.__graphics.__softwareDirty=!1,a.__graphics.set___dirty(!1),a.__dirty=!1;else{null==a.__graphics.__canvas&&(a.__graphics.__canvas=window.document.createElement("canvas"),a.__graphics.__context=a.__graphics.__canvas.getContext("2d"));V.context=b.__context;var m=b.__renderTransform;if(c.__isDOM){var h=c.pixelRatio;b.__canvas.width=f*h|0;b.__canvas.height=k*h|0;b.__canvas.style.width=f+"px";b.__canvas.style.height=
k+"px";f=va.__pool.get();f.copyFrom(m);f.scale(h,h);c.setTransform(f,V.context);va.__pool.release(f)}else b.__canvas.width=f,b.__canvas.height=k,V.context.setTransform(m.a,m.b,m.c,m.d,m.tx,m.ty);null==V.clearRect&&(V.clearRect="undefined"!==typeof navigator&&"undefined"!==typeof navigator.isCocoonJS);V.clearRect&&V.context.clearRect(0,0,b.__canvas.width,b.__canvas.height);if(null!=d.text&&""!=d.text||d.__hasFocus){m=d.text;b.__context.imageSmoothingEnabled=!c.__allowSmoothing||0==d.antiAliasType&&
400==d.sharpness?!1:!0;if(d.border||d.background)V.context.rect(.5,.5,e.width-1,e.height-1),d.background&&(c=Y.hex(d.backgroundColor&16777215,6),V.context.fillStyle="#"+c,V.context.fill()),d.border&&(V.context.lineWidth=1,c=Y.hex(d.borderColor&16777215,6),V.context.strokeStyle="#"+c,V.context.stroke());V.context.textBaseline="alphabetic";V.context.textAlign="start";c=-a.get_scrollH();f=h=0;for(k=a.get_scrollV()-1;f<k;){var n=f++;h-=d.lineHeights.get(n)}var g;for(f=d.layoutGroups.iterator();f.hasNext();)if(k=
f.next(),!(k.lineIndex<a.get_scrollV()-1)){if(k.lineIndex>d.get_bottomScrollV()-1)break;n="#"+Y.hex(k.format.color&16777215,6);V.context.font=jb.getFont(k.format);V.context.fillStyle=n;V.context.fillText(m.substring(k.startIndex,k.endIndex),k.offsetX+c-e.x,k.offsetY+k.ascent+h-e.y);if(-1<a.__caretIndex&&d.selectable)if(a.__selectionIndex==a.__caretIndex){if(a.__showCursor&&k.startIndex<=a.__caretIndex&&k.endIndex>=a.__caretIndex){for(var l=g=0,p=a.__caretIndex-k.startIndex;l<p;){var y=l++;if(k.positions.length<=
y)break;g+=k.positions[y]}l=0;p=a.get_scrollV();for(y=k.lineIndex+1;p<y;){var r=p++;l+=d.lineHeights.get(r-1)}V.context.beginPath();p=Y.hex(k.format.color&16777215,6);V.context.strokeStyle="#"+p;V.context.moveTo(k.offsetX+g-a.get_scrollH()-e.x,l+2-e.y);V.context.lineWidth=1;V.context.lineTo(k.offsetX+g-a.get_scrollH()-e.x,l+jb.getFormatHeight(a.get_defaultTextFormat())-1-e.y);V.context.stroke();V.context.closePath()}}else if(k.startIndex<=a.__caretIndex&&k.endIndex>=a.__caretIndex||k.startIndex<=
a.__selectionIndex&&k.endIndex>=a.__selectionIndex||k.startIndex>a.__caretIndex&&k.endIndex<a.__selectionIndex||k.startIndex>a.__selectionIndex&&k.endIndex<a.__caretIndex)g=Math.min(a.__selectionIndex,a.__caretIndex)|0,l=Math.max(a.__selectionIndex,a.__caretIndex)|0,k.startIndex>g&&(g=k.startIndex),k.endIndex<l&&(l=k.endIndex),y=a.getCharBoundaries(g),l>=k.endIndex?(p=a.getCharBoundaries(k.endIndex-1),null!=p&&(p.x+=p.width+2)):p=a.getCharBoundaries(l),null!=y&&null!=p&&(V.context.fillStyle="#000000",
V.context.fillRect(y.x+c,y.y+h,p.x-y.x,k.height),V.context.fillStyle="#FFFFFF",V.context.fillText(m.substring(g,l),c+y.x,k.offsetY+k.ascent+h));k.format.underline&&(V.context.beginPath(),V.context.strokeStyle=n,V.context.lineWidth=1,n=k.offsetX+c-e.x,g=Math.floor(k.offsetY+h+k.ascent-e.y)+.5,V.context.moveTo(n,g),V.context.lineTo(n+k.width,g),V.context.stroke(),V.context.closePath())}}else{if(d.border||d.background)d.border?V.context.rect(.5,.5,e.width-1,e.height-1):V.context.rect(0,0,e.width,e.height),
d.background&&(e=Y.hex(d.backgroundColor&16777215,6),V.context.fillStyle="#"+e,V.context.fill()),d.border&&(V.context.lineWidth=1,V.context.lineCap="square",e=Y.hex(d.borderColor&16777215,6),V.context.strokeStyle="#"+e,V.context.stroke());if(-1<a.__caretIndex&&d.selectable&&a.__showCursor){e=-a.get_scrollH();c=m=0;for(h=a.get_scrollV()-1;c<h;)f=c++,m+=d.lineHeights.get(f);V.context.beginPath();d=Y.hex(a.get_defaultTextFormat().color&16777215,6);V.context.strokeStyle="#"+d;V.context.moveTo(e+2.5,m+
2.5);V.context.lineWidth=1;V.context.lineTo(e+2.5,m+jb.getFormatHeight(a.get_defaultTextFormat())-1);V.context.stroke();V.context.closePath()}}b.__bitmap=Mb.fromCanvas(a.__graphics.__canvas);b.__visible=!0;a.__dirty=!1;b.__softwareDirty=!1;b.set___dirty(!1)}}a.__graphics.__hardwareDirty=!1};ak.renderMask=function(a,b){var c=b.__softwareRenderer,d=a.__textEngine,e=d.background||d.border?d.bounds:d.textBounds;b=a.__graphics;a.__dirty&&(a.__updateLayout(),null==b.__bounds&&(b.__bounds=new ya),b.__bounds.copyFrom(e));
b.__update(c.__worldTransform);if(a.__dirty||b.__softwareDirty){var f=b.__width,k=b.__height;if(!(null!=d.text&&""!=d.text||d.background||d.border||d.__hasFocus||1==d.type&&d.selectable)||(0>=d.width||0>=d.height)&&2!=d.autoSize)a.__graphics.__canvas=null,a.__graphics.__context=null,a.__graphics.__bitmap=null,a.__graphics.__softwareDirty=!1,a.__graphics.set___dirty(!1),a.__dirty=!1;else{null==a.__graphics.__canvas&&(a.__graphics.__canvas=window.document.createElement("canvas"),a.__graphics.__context=
a.__graphics.__canvas.getContext("2d"));V.context=b.__context;var m=b.__renderTransform;if(c.__isDOM){var h=c.pixelRatio;b.__canvas.width=f*h|0;b.__canvas.height=k*h|0;b.__canvas.style.width=f+"px";b.__canvas.style.height=k+"px";f=va.__pool.get();f.copyFrom(m);f.scale(h,h);c.setTransform(f,V.context);va.__pool.release(f)}else b.__canvas.width=f,b.__canvas.height=k,V.context.setTransform(m.a,m.b,m.c,m.d,m.tx,m.ty);null==V.clearRect&&(V.clearRect="undefined"!==typeof navigator&&"undefined"!==typeof navigator.isCocoonJS);
V.clearRect&&V.context.clearRect(0,0,b.__canvas.width,b.__canvas.height);if(null!=d.text&&""!=d.text||d.__hasFocus){m=d.text;b.__context.imageSmoothingEnabled=!c.__allowSmoothing||0==d.antiAliasType&&400==d.sharpness?!1:!0;if(d.border||d.background)V.context.rect(.5,.5,e.width-1,e.height-1),d.background&&(c=Y.hex(d.backgroundColor&16777215,6),V.context.fillStyle="#"+c,V.context.fill()),d.border&&(V.context.lineWidth=1,c=Y.hex(d.borderColor&16777215,6),V.context.strokeStyle="#"+c,V.context.stroke());
V.context.textBaseline="alphabetic";V.context.textAlign="start";c=-a.get_scrollH();f=h=0;for(k=a.get_scrollV()-1;f<k;){var n=f++;h-=d.lineHeights.get(n)}var g;for(f=d.layoutGroups.iterator();f.hasNext();)if(k=f.next(),!(k.lineIndex<a.get_scrollV()-1)){if(k.lineIndex>d.get_bottomScrollV()-1)break;n="#"+Y.hex(k.format.color&16777215,6);V.context.font=jb.getFont(k.format);V.context.fillStyle=n;V.context.fillText(m.substring(k.startIndex,k.endIndex),k.offsetX+c-e.x,k.offsetY+k.ascent+h-e.y);if(-1<a.__caretIndex&&
d.selectable)if(a.__selectionIndex==a.__caretIndex){if(a.__showCursor&&k.startIndex<=a.__caretIndex&&k.endIndex>=a.__caretIndex){for(var l=g=0,p=a.__caretIndex-k.startIndex;l<p;){var y=l++;if(k.positions.length<=y)break;g+=k.positions[y]}l=0;p=a.get_scrollV();for(y=k.lineIndex+1;p<y;){var r=p++;l+=d.lineHeights.get(r-1)}V.context.beginPath();p=Y.hex(k.format.color&16777215,6);V.context.strokeStyle="#"+p;V.context.moveTo(k.offsetX+g-a.get_scrollH()-e.x,l+2-e.y);V.context.lineWidth=1;V.context.lineTo(k.offsetX+
g-a.get_scrollH()-e.x,l+jb.getFormatHeight(a.get_defaultTextFormat())-1-e.y);V.context.stroke();V.context.closePath()}}else if(k.startIndex<=a.__caretIndex&&k.endIndex>=a.__caretIndex||k.startIndex<=a.__selectionIndex&&k.endIndex>=a.__selectionIndex||k.startIndex>a.__caretIndex&&k.endIndex<a.__selectionIndex||k.startIndex>a.__selectionIndex&&k.endIndex<a.__caretIndex)g=Math.min(a.__selectionIndex,a.__caretIndex)|0,l=Math.max(a.__selectionIndex,a.__caretIndex)|0,k.startIndex>g&&(g=k.startIndex),k.endIndex<
l&&(l=k.endIndex),y=a.getCharBoundaries(g),l>=k.endIndex?(p=a.getCharBoundaries(k.endIndex-1),null!=p&&(p.x+=p.width+2)):p=a.getCharBoundaries(l),null!=y&&null!=p&&(V.context.fillStyle="#000000",V.context.fillRect(y.x+c,y.y+h,p.x-y.x,k.height),V.context.fillStyle="#FFFFFF",V.context.fillText(m.substring(g,l),c+y.x,k.offsetY+k.ascent+h));k.format.underline&&(V.context.beginPath(),V.context.strokeStyle=n,V.context.lineWidth=1,n=k.offsetX+c-e.x,g=Math.floor(k.offsetY+h+k.ascent-e.y)+.5,V.context.moveTo(n,
g),V.context.lineTo(n+k.width,g),V.context.stroke(),V.context.closePath())}}else{if(d.border||d.background)d.border?V.context.rect(.5,.5,e.width-1,e.height-1):V.context.rect(0,0,e.width,e.height),d.background&&(e=Y.hex(d.backgroundColor&16777215,6),V.context.fillStyle="#"+e,V.context.fill()),d.border&&(V.context.lineWidth=1,V.context.lineCap="square",e=Y.hex(d.borderColor&16777215,6),V.context.strokeStyle="#"+e,V.context.stroke());if(-1<a.__caretIndex&&d.selectable&&a.__showCursor){e=-a.get_scrollH();
c=m=0;for(h=a.get_scrollV()-1;c<h;)f=c++,m+=d.lineHeights.get(f);V.context.beginPath();d=Y.hex(a.get_defaultTextFormat().color&16777215,6);V.context.strokeStyle="#"+d;V.context.moveTo(e+2.5,m+2.5);V.context.lineWidth=1;V.context.lineTo(e+2.5,m+jb.getFormatHeight(a.get_defaultTextFormat())-1);V.context.stroke();V.context.closePath()}}b.__bitmap=Mb.fromCanvas(a.__graphics.__canvas);b.__visible=!0;a.__dirty=!1;b.__softwareDirty=!1;b.set___dirty(!1)}}a.__graphics.__hardwareDirty=!1};var Lb=function(){};
g["openfl._internal.renderer.dom.DOMBitmap"]=Lb;Lb.__name__="openfl._internal.renderer.dom.DOMBitmap";Lb.clear=function(a,b){null!=a.__image&&(b.element.removeChild(a.__image),a.__image=null,a.__style=null);null!=a.__canvas&&(b.element.removeChild(a.__canvas),a.__canvas=null,a.__style=null)};Lb.renderCanvas=function(a,b){null!=a.__image&&(b.element.removeChild(a.__image),a.__image=null);null==a.__canvas&&(a.__canvas=window.document.createElement("canvas"),a.__context=a.__canvas.getContext("2d"),a.__imageVersion=
-1,b.__allowSmoothing&&a.smoothing||(a.__context.imageSmoothingEnabled=!1),b.__initializeElement(a,a.__canvas));a.__imageVersion!=a.__bitmapData.image.version&&(La.convertToCanvas(a.__bitmapData.image),a.__canvas.width=a.__bitmapData.width+1,a.__canvas.width=a.__bitmapData.width,a.__canvas.height=a.__bitmapData.height,a.__context.drawImage(a.__bitmapData.image.buffer.__srcCanvas,0,0),a.__imageVersion=a.__bitmapData.image.version);b.__updateClip(a);b.__applyStyle(a,!0,!0,!0)};Lb.renderImage=function(a,
b){null!=a.__canvas&&(b.element.removeChild(a.__canvas),a.__canvas=null);null==a.__image&&(a.__image=window.document.createElement("img"),a.__image.crossOrigin="Anonymous",a.__image.src=a.__bitmapData.image.buffer.__srcImage.src,b.__initializeElement(a,a.__image));b.__updateClip(a);b.__applyStyle(a,!0,!0,!0)};var kj=function(){};g["openfl._internal.renderer.dom.DOMDisplayObject"]=kj;kj.__name__="openfl._internal.renderer.dom.DOMDisplayObject";kj.clear=function(a,b){null!=a.__cacheBitmap&&Lb.clear(a.__cacheBitmap,
b);zf.clear(a,b)};var zf=function(){};g["openfl._internal.renderer.dom.DOMShape"]=zf;zf.__name__="openfl._internal.renderer.dom.DOMShape";zf.clear=function(a,b){null!=a.__canvas&&(b.element.removeChild(a.__canvas),a.__canvas=null,a.__style=null)};var gb=function(){};g["openfl._internal.renderer.dom.DOMTextField"]=gb;gb.__name__="openfl._internal.renderer.dom.DOMTextField";gb.clear=function(a,b){null!=a.__div&&(b.element.removeChild(a.__div),a.__div=null,a.__style=null)};gb.__getAttributeMatch=function(a){return null!=
a.matched(2)?a.matched(2):a.matched(3)};var Zc=function(){};g["openfl._internal.symbols.SWFSymbol"]=Zc;Zc.__name__="openfl._internal.symbols.SWFSymbol";Zc.prototype={className:null,id:null,__createObject:function(a){return null},__class__:Zc};var Od=function(){};g["openfl._internal.symbols.BitmapSymbol"]=Od;Od.__name__="openfl._internal.symbols.BitmapSymbol";Od.__super__=Zc;Od.prototype=v(Zc.prototype,{alpha:null,path:null,smooth:null,__createObject:function(a){return new ef(Mb.fromImage(a.library.getImage(this.path)),
1,0!=this.smooth)},__class__:Od});var yl=function(){};g["openfl._internal.symbols.ButtonSymbol"]=yl;yl.__name__="openfl._internal.symbols.ButtonSymbol";yl.__super__=Zc;yl.prototype=v(Zc.prototype,{downState:null,hitState:null,overState:null,upState:null,__createObject:function(a){var b=null;Hd.__initSWF=a;Hd.__initSymbol=this;null!=this.className&&(a=g[this.className],null!=a&&(b=L.createInstance(a,[])));null==b&&(b=new Hd);return b},__class__:yl});var zl=function(){};g["openfl._internal.symbols.DynamicTextSymbol"]=
zl;zl.__name__="openfl._internal.symbols.DynamicTextSymbol";zl.__super__=Zc;zl.prototype=v(Zc.prototype,{align:null,border:null,color:null,fontHeight:null,fontID:null,fontName:null,height:null,html:null,indent:null,input:null,leading:null,leftMargin:null,multiline:null,password:null,rightMargin:null,selectable:null,text:null,width:null,wordWrap:null,x:null,y:null,__createObject:function(a){var b=new rc;b.__fromSymbol(a,this);return b},__class__:zl});var Al=function(){};g["openfl._internal.symbols.FontSymbol"]=
Al;Al.__name__="openfl._internal.symbols.FontSymbol";Al.__super__=Zc;Al.prototype=v(Zc.prototype,{advances:null,ascent:null,bold:null,codes:null,descent:null,glyphs:null,italic:null,leading:null,name:null,__class__:Al});var bk=function(){};g["openfl._internal.symbols.ShapeSymbol"]=bk;bk.__name__="openfl._internal.symbols.ShapeSymbol";bk.__super__=Zc;bk.prototype=v(Zc.prototype,{commands:null,rendered:null,__createObject:function(a){var b=new Gf,c=b.get_graphics();if(null!=this.rendered)return c.copyFrom(this.rendered.get_graphics()),
b;for(var d=0,e=this.commands;d<e.length;){var f=e[d];++d;switch(f._hx_index){case 0:var k=f.smooth,m=f.repeat,h=f.matrix;f=a.library.getImage(a.symbols.h[f.bitmap].path);null!=f&&c.beginBitmapFill(Mb.fromImage(f),h,m,k);break;case 1:c.beginFill(f.color,f.alpha);break;case 2:c.beginGradientFill(f.fillType,f.colors,f.alphas,f.ratios,f.matrix,f.spreadMethod,f.interpolationMethod,f.focalPointRatio);break;case 3:c.curveTo(f.controlX,f.controlY,f.anchorX,f.anchorY);break;case 4:c.endFill();break;case 5:k=
f.miterLimit;m=f.joints;h=f.caps;var n=f.scaleMode,g=f.pixelHinting,l=f.alpha,p=f.color;f=f.thickness;null!=f?c.lineStyle(f,p,l,g,n,h,m,k):c.lineStyle();break;case 6:c.lineTo(f.x,f.y);break;case 7:c.moveTo(f.x,f.y)}}this.commands=null;this.rendered=new Gf;this.rendered.get_graphics().copyFrom(b.get_graphics());return b},__class__:bk});var Bg=function(){this.frames=[]};g["openfl._internal.symbols.SpriteSymbol"]=Bg;Bg.__name__="openfl._internal.symbols.SpriteSymbol";Bg.__super__=Zc;Bg.prototype=v(Zc.prototype,
{baseClassName:null,frames:null,scale9Grid:null,__createObject:function(a){yd.__initSWF=a;yd.__initSymbol=this;a=null;null!=this.className&&(a=g[this.className]);null==a&&null!=this.baseClassName&&(a=g[this.baseClassName]);a=null!=a?L.createInstance(a,[]):new yd;a.set_scale9Grid(this.scale9Grid);return a},__class__:Bg});var Tk=function(){};g["openfl._internal.symbols.StaticTextSymbol"]=Tk;Tk.__name__="openfl._internal.symbols.StaticTextSymbol";Tk.__super__=Zc;Tk.prototype=v(Zc.prototype,{matrix:null,
records:null,rendered:null,__createObject:function(a){var b=new ck,c=b.__graphics;if(null!=this.rendered)return b.text=this.rendered.text,c.copyFrom(this.rendered.__graphics),b;var d="";if(null!=this.records)for(var e=null,f=16777215,k=this.matrix.tx,m=this.matrix.ty,h,n,g=0,l=this.records;g<l.length;){var p=l[g];++g;null!=p.fontID&&(e=a.symbols.h[p.fontID]);null!=p.offsetX&&(k=this.matrix.tx+.05*p.offsetX);null!=p.offsetY&&(m=this.matrix.ty+.05*p.offsetY);null!=p.color&&(f=p.color);if(null!=e){h=
p.fontHeight/1024*.05;for(var y=0,r=p.glyphs.length;y<r;){var q=y++;n=p.glyphs[q];d+=String.fromCodePoint(e.codes[n]);var t=0;for(n=e.glyphs[n];t<n.length;){var z=n[t];++t;switch(z._hx_index){case 1:c.beginFill(f&16777215,(f>>24&255)/255);break;case 3:c.curveTo(z.controlX*h+k,z.controlY*h+m,z.anchorX*h+k,z.anchorY*h+m);break;case 4:c.endFill();break;case 5:var w=z.miterLimit,O=z.joints,u=z.caps,v=z.scaleMode,A=z.pixelHinting,x=z.alpha,B=z.color;z=z.thickness;null!=z?c.lineStyle(z,B,x,A,v,u,O,w):c.lineStyle();
break;case 6:c.lineTo(z.x*h+k,z.y*h+m);break;case 7:c.moveTo(z.x*h+k,z.y*h+m)}}k+=.05*p.advances[q]}}}b.text=d;this.records=null;this.rendered=new ck;this.rendered.text=d;this.rendered.__graphics.copyFrom(b.__graphics);return b},__class__:Tk});var jm=function(){};g["openfl._internal.symbols.StaticTextRecord"]=jm;jm.__name__="openfl._internal.symbols.StaticTextRecord";jm.prototype={advances:null,color:null,fontHeight:null,fontID:null,glyphs:null,offsetX:null,offsetY:null,__class__:jm};var km=function(){};
g["openfl._internal.symbols.timeline.Frame"]=km;km.__name__="openfl._internal.symbols.timeline.Frame";km.prototype={label:null,objects:null,script:null,scriptSource:null,__class__:km};var lm=function(){};g["openfl._internal.symbols.timeline.FrameObject"]=lm;lm.__name__="openfl._internal.symbols.timeline.FrameObject";lm.prototype={blendMode:null,cacheAsBitmap:null,clipDepth:null,colorTransform:null,depth:null,filters:null,id:null,matrix:null,name:null,symbol:null,type:null,visible:null,__class__:lm};
var Pm=t["openfl._internal.symbols.timeline.FrameObjectType"]={__ename__:"openfl._internal.symbols.timeline.FrameObjectType",__constructs__:["CREATE","UPDATE","DESTROY"],CREATE:{_hx_index:0,__enum__:"openfl._internal.symbols.timeline.FrameObjectType",toString:p},UPDATE:{_hx_index:1,__enum__:"openfl._internal.symbols.timeline.FrameObjectType",toString:p},DESTROY:{_hx_index:2,__enum__:"openfl._internal.symbols.timeline.FrameObjectType",toString:p}},jb=function(a){this.textField=a;this.height=this.width=
100;this.set_text("");this.bounds=new ya(0,0,0,0);this.textBounds=new ya(0,0,0,0);this.type=0;this.autoSize=2;this.embedFonts=!1;this.selectable=!0;this.borderColor=0;this.border=!1;this.backgroundColor=16777215;this.background=!1;this.gridFitType=1;this.maxChars=0;this.multiline=!1;this.numLines=1;this.scrollH=this.sharpness=0;this.set_scrollV(1);this.wordWrap=!1;this.lineAscents=M.toFloatVector(null);this.lineBreaks=M.toIntVector(null);this.lineDescents=M.toFloatVector(null);this.lineLeadings=M.toFloatVector(null);
this.lineHeights=M.toFloatVector(null);this.lineWidths=M.toFloatVector(null);this.layoutGroups=M.toObjectVector(null);this.textFormatRanges=M.toObjectVector(null);null==jb.__context&&(jb.__context=window.document.createElement("canvas").getContext("2d"))};g["openfl._internal.text.TextEngine"]=jb;jb.__name__="openfl._internal.text.TextEngine";jb.findFont=function(a){var b=Ac.__fontByName;return null!=F[a]?b.getReserved(a):b.h[a]};jb.findFontVariant=function(a){var b=a.font,c=a.bold,d=a.italic;null==
b&&(b="_serif");a=Y.replace(Y.replace(b," Normal","")," Regular","");if(c&&d){var e=Ac.__fontByName;var f=a+" Bold Italic";e=null!=F[f]?e.existsReserved(f):e.h.hasOwnProperty(f)}else e=!1;if(e)return jb.findFont(a+" Bold Italic");c?(c=Ac.__fontByName,e=a+" Bold",c=null!=F[e]?c.existsReserved(e):c.h.hasOwnProperty(e)):c=!1;if(c)return jb.findFont(a+" Bold");d?(d=Ac.__fontByName,c=a+" Italic",d=null!=F[c]?d.existsReserved(c):d.h.hasOwnProperty(c)):d=!1;return d?jb.findFont(a+" Italic"):jb.findFont(b)};
jb.getFormatHeight=function(a){jb.__context.font=jb.getFont(a);var b=jb.getFontInstance(a);if(null!=a.__ascent){var c=a.size*a.__ascent;b=a.size*a.__descent}else null!=b&&0!=b.unitsPerEM?(c=b.ascender/b.unitsPerEM*a.size,b=Math.abs(b.descender/b.unitsPerEM*a.size)):(c=a.size,b=.185*a.size);return c+b+a.leading};jb.getFont=function(a){var b=a.font,c=a.bold,d=a.italic;null==b&&(b="_serif");var e=Y.replace(Y.replace(b," Normal","")," Regular","");if(c&&d){var f=Ac.__fontByName;var k=e+" Bold Italic";
f=null!=F[k]?f.existsReserved(k):f.h.hasOwnProperty(k)}else f=!1;f?(b=e+" Bold Italic",d=c=!1):(c?(f=Ac.__fontByName,k=e+" Bold",f=null!=F[k]?f.existsReserved(k):f.h.hasOwnProperty(k)):f=!1,f?(b=e+" Bold",c=!1):(d?(f=Ac.__fontByName,k=e+" Italic",f=null!=F[k]?f.existsReserved(k):f.h.hasOwnProperty(k)):f=!1,f?(b=e+" Italic",d=!1):(c&&(-1<b.indexOf(" Bold ")||Y.endsWith(b," Bold"))&&(c=!1),d&&(-1<b.indexOf(" Italic ")||Y.endsWith(b," Italic"))&&(d=!1))));c=(d?"italic ":"normal ")+"normal "+(c?"bold ":
"normal ");c+=a.size+"px";c+="/"+(a.leading+a.size+3)+"px ";switch(b){case "_sans":a="sans-serif";break;case "_serif":a="serif";break;case "_typewriter":a="monospace";break;default:a="'"+b.replace(/^[\s'"]+(.*)[\s'"]+$/,"$1")+"'"}return c+=""+a};jb.getFontInstance=function(a){return jb.findFontVariant(a)};jb.prototype={antiAliasType:null,autoSize:null,background:null,backgroundColor:null,border:null,borderColor:null,bottomScrollV:null,bounds:null,embedFonts:null,gridFitType:null,height:null,layoutGroups:null,
lineAscents:null,lineBreaks:null,lineDescents:null,lineLeadings:null,lineHeights:null,lineWidths:null,maxChars:null,maxScrollH:null,maxScrollV:null,multiline:null,numLines:null,scrollH:null,scrollV:null,selectable:null,sharpness:null,text:null,textBounds:null,textHeight:null,textFormatRanges:null,textWidth:null,type:null,width:null,wordWrap:null,textField:null,__hasFocus:null,__restrictRegexp:null,__useIntAdvances:null,getBounds:function(){var a=this.border?1:0;this.bounds.width=this.width+a;this.bounds.height=
this.height+a;for(var b=a=this.width,c=this.layoutGroups.iterator();c.hasNext();){var d=c.next();d.offsetX<a&&(a=d.offsetX);d.offsetY<b&&(b=d.offsetY)}a>=this.width&&(a=2);b>=this.height&&(b=2);this.textBounds.setTo(Math.max(a-2,0),Math.max(b-2,0),Math.min(this.textWidth+4,this.bounds.width+4),Math.min(1.185*this.textHeight+4,this.bounds.height+4))},getLineBreakIndex:function(a){null==a&&(a=0);var b=this.text.indexOf("\n",a);a=this.text.indexOf("\r",a);return-1==b?a:-1==a?b:b<a?b:a},getLineMeasurements:function(){this.lineAscents.set_length(0);
this.lineDescents.set_length(0);this.lineLeadings.set_length(0);this.lineHeights.set_length(0);this.lineWidths.set_length(0);var a=0,b=0,c=null,d=0,e=0,f;this.textHeight=this.textWidth=0;this.numLines=1;this.maxScrollH=0;for(var k=this.layoutGroups.iterator();k.hasNext();){for(f=k.next();f.lineIndex>this.numLines-1;)this.lineAscents.push(a),this.lineDescents.push(b),this.lineLeadings.push(null!=c?c:0),this.lineHeights.push(d),this.lineWidths.push(e),b=a=0,c=null,e=d=0,this.numLines++;a=Math.max(a,
f.ascent);b=Math.max(b,f.descent);c=null==c?f.leading:Math.max(c,f.leading)|0;d=Math.max(d,f.height);e=f.offsetX-2+f.width;e>this.textWidth&&(this.textWidth=e);f=f.offsetY-2+f.ascent+f.descent;f>this.textHeight&&(this.textHeight=f)}0==this.textHeight&&null!=this.textField&&1==this.textField.get_type()&&(a=this.textField.__textFormat,b=jb.getFontInstance(a),null!=a.__ascent?(k=a.size*a.__ascent,f=a.size*a.__descent):null!=b&&0!=b.unitsPerEM?(k=b.ascender/b.unitsPerEM*a.size,f=Math.abs(b.descender/
b.unitsPerEM*a.size)):(k=a.size,f=.185*a.size),c=a.leading,a=k,b=f,this.textHeight=k+f);this.lineAscents.push(a);this.lineDescents.push(b);this.lineLeadings.push(null!=c?c:0);this.lineHeights.push(d);this.lineWidths.push(e);1==this.numLines&&0<c&&(this.textHeight+=c);0<this.layoutGroups.get_length()&&(e=this.layoutGroups.get(this.layoutGroups.get_length()-1),null!=e&&e.startIndex==e.endIndex&&(this.textHeight-=d));if(2!=this.autoSize)switch(this.autoSize){case 0:case 1:case 3:this.wordWrap||(this.width=
this.textWidth+4),this.height=this.textHeight+4,this.bottomScrollV=this.numLines}this.maxScrollH=this.textWidth>this.width-4?this.textWidth-this.width+4|0:0;this.scrollH>this.maxScrollH&&(this.scrollH=this.maxScrollH)},getLayoutGroups:function(){var a=this;this.layoutGroups.set_length(0);if(null!=this.text&&""!=this.text){var b=-1,c=null,d=null,e=rc.__defaultTextFormat.clone(),f=0,k=0,m=0,h=0,n=3,g=null,l=null,p=0,y=0,r=0,q=-2,t=-1,z=this.text.indexOf(" "),w=this.getLineBreakIndex(),O=2,u=2,v=0,A=
0,x=function(b,c,d){var e=[];if(null==a.__useIntAdvances){var f=new Ba("Trident/7.0","");a.__useIntAdvances=f.match(window.navigator.userAgent)}if(a.__useIntAdvances){f=0;for(var h,k=c;k<d;)h=k++,h=jb.__context.measureText(b.substring(c,h+1)).width,e.push(h-f),f=h}else for(;c<d;)f=c++,f<b.length-1?(k=jb.__context.measureText(b.charAt(f+1)).width,f=jb.__context.measureText(ra.substr(b,f,2)).width-k):f=jb.__context.measureText(b.charAt(f)).width,e.push(f);return e},B=function(a){for(var b=0,c=0;c<a.length;){var d=
a[c];++c;b+=d}return b},F=function(b,d){null==g||g.startIndex!=g.endIndex?(g=new wh(c.format,b,d),a.layoutGroups.push(g)):(g.format=c.format,g.startIndex=b,g.endIndex=d)},qa=function(){null!=e.__ascent?(k=e.size*e.__ascent,h=e.size*e.__descent):null!=d&&0!=d.unitsPerEM?(k=d.ascender/d.unitsPerEM*e.size,h=Math.abs(d.descender/d.unitsPerEM*e.size)):(k=e.size,h=.185*e.size);f=e.leading;y=Math.ceil(k+h+f);y>r&&(r=y);k>m&&(m=k)},L=function(){var f=a.textFormatRanges.get_length()-1;return b<f?(b+=1,c=a.textFormatRanges.get(b),
e.__merge(c.format),jb.__context.font=jb.getFont(e),d=jb.getFontInstance(e),!0):!1},M=function(d,e){if(e<=c.end)l=x(a.text,d,e),p=B(l);else{var f=d;d=c.end;var h=0;l=[];for(p=0;;)if(f!=d&&(f=x(a.text,f,d),l=l.concat(f)),d!=e){if(!L()){Ga.warn("You found a bug in OpenFL's text code! Please save a copy of your project and contact Joshua Granick (@singmajesty) so we can fix this.",{fileName:"openfl/_internal/text/TextEngine.hx",lineNumber:1059,className:"openfl._internal.text.TextEngine",methodName:"getLayoutGroups"});
break}f=d;d=e<c.end?e:c.end;++h}else{p=B(l);break}b-=h+1;L()}},D=function(b){if(b<=c.end)l=x(a.text,v,b),p=B(l),F(v,b),g.positions=l,g.offsetX=O,g.ascent=k,g.descent=h,g.leading=f,g.lineIndex=A,g.offsetY=u,g.width=p,g.height=y,O+=p,b==c.end&&(g=null,L(),qa());else for(;;){var d=b<c.end?b:c.end;v!=d&&(l=x(a.text,v,d),p=B(l),F(v,d),g.positions=l,g.offsetX=O,g.ascent=k,g.descent=h,g.leading=f,g.lineIndex=A,g.offsetY=u,g.width=p,g.height=y,O+=p,v=d);d==c.end&&(g=null);if(d==b)break;if(!L()){Ga.warn("You found a bug in OpenFL's text code! Please save a copy of your project and contact Joshua Granick (@singmajesty) so we can fix this.",
{fileName:"openfl/_internal/text/TextEngine.hx",lineNumber:1147,className:"openfl._internal.text.TextEngine",methodName:"getLayoutGroups"});break}qa()}v=b},Ia=function(){qa();for(var b=a.layoutGroups.get_length();-1<--b;){var c=a.layoutGroups.get(b);if(c.lineIndex<A)break;c.lineIndex>A||(c.ascent=m,c.height=r)}u+=r;r=m=0;A+=1;O=2},Ca=function(b){if(4<=a.width&&a.wordWrap){var c=l,d,e,f;for(d=B(c);O+d>a.width-2;){for(f=d=e=0;O+f<a.width-2;){var h=c[d];0==h?(++d,++e):(f+=h,++d)}if(0==f)break;else if(2>
d&&f+O>a.width-2){if(v+d-e==b)break}else for(;O+f>a.width-2;)--d,0<d-e?(M(v,v+d-e),f=p):(d=1,e=0,M(v,v+1),f=0);c=v+d-e;D(c);Ia();M(c,b);c=l;d=p}}D(b)};L();null!=e.align&&(n=e.align);qa();for(var ja,J=this.text.length+1;v<J;)if(-1<w&&(-1==z||w<z))v<=w?(M(v,w),Ca(w),g=null):null!=g&&g.startIndex!=g.endIndex&&(g.endIndex==z&&(g.width-=g.positions[g.positions.length-1]),g=null),c.end==w&&(L(),qa()),Ia(),v=w+1,t=w,w=this.getLineBreakIndex(v),null!=e.align&&(n=e.align);else if(-1<z)for(null!=g&&g.startIndex!=
g.endIndex&&(g=null),ja=!1;v<this.text.length;){var ha=-1;-1==z?ha=w:(ha=z+1,-1<w&&w<ha&&(ha=w));-1==ha&&(ha=this.text.length);M(v,ha);if(2==n){if(0<l.length&&v==q){v+=1;var ba=l.shift();p-=ba;O+=ba}0<l.length&&ha==z+1&&(--ha,ba=l.pop(),p-=ba)}this.wordWrap&&O+p>this.width-2&&(ja=!0,0<l.length&&ha==z+1&&O+p-l[l.length-1]<=this.width-2&&(ja=!1));if(ja){2!=n&&(null!=g||0<this.layoutGroups.get_length())&&(ja=g,null==ja&&(ja=this.layoutGroups.get(this.layoutGroups.get_length()-1)),ja.width-=ja.positions[ja.positions.length-
1],ja.endIndex--);ja=this.layoutGroups.get_length()-1;for(ba=0;;){g=this.layoutGroups.get(ja);if(0<ja&&g.startIndex>q)++ba;else break;--ja}v==q+1&&Ia();O=2;if(0<ba){ja=this.layoutGroups.get(this.layoutGroups.get_length()-ba).offsetX;ba=this.layoutGroups.get_length()-ba;for(var N=this.layoutGroups.get_length();ba<N;){var R=ba++;g=this.layoutGroups.get(R);g.offsetX-=ja;g.offsetY=u;g.lineIndex=A;O+=g.width}}Ca(ha);ja=!1}else null!=g&&v==z?(2!=n&&(g.endIndex=z,g.positions=g.positions.concat(l),g.width+=
p),O+=p,v=ha):null==g||2==n?Ca(ha):(ba=ha<c.end?ha:c.end,ba<ha&&(l=x(this.text,v,ba),p=B(l)),g.endIndex=ba,g.positions=g.positions.concat(l),g.width+=p,O+=p,ba==c.end&&(g=null,L(),qa(),v=ba,ba!=ha&&D(ha)),w==ha&&++ha,v=ha);ha=this.text.indexOf(" ",v);w==q&&(g.endIndex=w,0>w-g.startIndex-g.positions.length&&g.positions.push(0),v=w+1);q=z;z=ha;if(-1<w&&w<=v&&(z>w||-1==z)||v>this.text.length)break}else v<this.text.length&&(M(v,this.text.length),Ca(this.text.length),Ia()),v+=1;t==v-2&&-1<t&&(F(v,v),g.positions=
[],g.ascent=k,g.descent=h,g.leading=f,g.lineIndex=A,g.offsetX=2,g.offsetY=u,g.width=0,g.height=y)}},restrictText:function(a){if(null==a)return a;null!=this.__restrictRegexp&&(a=this.__restrictRegexp.split(a).join(""));return a},setTextAlignment:function(){for(var a=-1,b=0,c,d,e=!1,f=0,k=this.layoutGroups.get_length();f<k;){var m=f++;c=this.layoutGroups.get(m);if(c.lineIndex!=a)switch(a=c.lineIndex,b=this.width-4-c.format.rightMargin,c.format.align){case 0:b=this.lineWidths.get(a)<b?Math.round((b-
this.lineWidths.get(a))/2):0;break;case 2:if(this.lineWidths.get(a)<b){d=1;for(var h=m+1,n=this.layoutGroups.get_length();h<n;){var g=h++;if(this.layoutGroups.get(g).lineIndex==a)0!=g&&32!=ra.cca(this.text,this.layoutGroups.get(g).startIndex-1)||++d;else break}if(1<d&&(c=this.layoutGroups.get(m+d-1),h=ra.cca(this.text,c.endIndex),c.endIndex<this.text.length&&10!=h&&13!=h))for(b=(b-this.lineWidths.get(a))/(d-1),e=!0,h=1;this.layoutGroups.get(m+h).offsetX+=b*h,++h<d;);}b=0;break;case 4:b=this.lineWidths.get(a)<
b?Math.round(b-this.lineWidths.get(a)):0;break;default:b=0}0<b&&(c.offsetX+=b)}e&&this.getLineMeasurements()},update:function(){null==this.text||0==this.textFormatRanges.get_length()?(this.lineAscents.set_length(0),this.lineBreaks.set_length(0),this.lineDescents.set_length(0),this.lineLeadings.set_length(0),this.lineHeights.set_length(0),this.lineWidths.set_length(0),this.layoutGroups.set_length(0),this.textHeight=this.textWidth=0,this.numLines=1,this.maxScrollH=0,this.bottomScrollV=this.maxScrollV=
1):(this.getLayoutGroups(),this.getLineMeasurements(),this.setTextAlignment());this.getBounds()},get_bottomScrollV:function(){if(1==this.numLines||null==this.lineHeights)return 1;for(var a=0,b=this.lineHeights.get_length(),c=b-1,d=this.lineHeights.get_length();c<d;){var e=c++;if(a+this.lineHeights.get(e)<=this.height-4)a+=this.lineHeights.get(e);else{b=e;break}}return 1>b?1:b},get_maxScrollV:function(){if(1==this.numLines||null==this.lineHeights)return 1;var a=this.numLines-1,b=0;10==ra.cca(this.text,
this.text.length-1)&&--a;for(var c=a;0<=a;)if(b+this.lineHeights.get(a)<=this.height-4)b+=this.lineHeights.get(a),--a;else break;a=a==c?this.numLines:a+2;return 1>a?1:a},get_scrollV:function(){if(1==this.numLines||null==this.lineHeights)return 1;var a=this.get_maxScrollV();return this.scrollV>a?a:this.scrollV},set_scrollV:function(a){1>a&&(a=1);return this.scrollV=a},set_text:function(a){return this.text=a},__class__:jb};var sh=function(a,b,c){this.format=a;this.start=b;this.end=c};g["openfl._internal.text.TextFormatRange"]=
sh;sh.__name__="openfl._internal.text.TextFormatRange";sh.prototype={end:null,format:null,start:null,__class__:sh};var wh=function(a,b,c){this.format=a;this.startIndex=b;this.endIndex=c};g["openfl._internal.text.TextLayoutGroup"]=wh;wh.__name__="openfl._internal.text.TextLayoutGroup";wh.prototype={ascent:null,descent:null,endIndex:null,format:null,height:null,leading:null,lineIndex:null,offsetX:null,offsetY:null,positions:null,startIndex:null,width:null,__class__:wh};var xh=function(){this.rollOutStack=
[]};g["openfl._internal.utils.TouchData"]=xh;xh.__name__="openfl._internal.utils.TouchData";xh.prototype={rollOutStack:null,touch:null,touchDownTarget:null,touchOverTarget:null,reset:function(){this.touchOverTarget=this.touchDownTarget=this.touch=null;this.rollOutStack.splice(0,this.rollOutStack.length)},__class__:xh};var Lh=function(){ha.call(this);null==vd.application&&(vd.application=this);null==vd.current&&(vd.current=new yd);vd.current.__loaderInfo=Qd.create(null);vd.current.__loaderInfo.content=
vd.current};g["openfl.display.Application"]=Lh;Lh.__name__="openfl.display.Application";Lh.__super__=ha;Lh.prototype=v(ha.prototype,{createWindow:function(a){var b=new Ee(this,a);this.__windows.push(b);this.__windowByID.h[b.id]=b;var c=u(this,this.__onWindowClose);b.onClose.add(function(){c(b)},!1,-1E4);null==this.__window&&(this.__window=b,b.onActivate.add(u(this,this.onWindowActivate)),b.onRenderContextLost.add(u(this,this.onRenderContextLost)),b.onRenderContextRestored.add(u(this,this.onRenderContextRestored)),
b.onDeactivate.add(u(this,this.onWindowDeactivate)),b.onDropFile.add(u(this,this.onWindowDropFile)),b.onEnter.add(u(this,this.onWindowEnter)),b.onExpose.add(u(this,this.onWindowExpose)),b.onFocusIn.add(u(this,this.onWindowFocusIn)),b.onFocusOut.add(u(this,this.onWindowFocusOut)),b.onFullscreen.add(u(this,this.onWindowFullscreen)),b.onKeyDown.add(u(this,this.onKeyDown)),b.onKeyUp.add(u(this,this.onKeyUp)),b.onLeave.add(u(this,this.onWindowLeave)),b.onMinimize.add(u(this,this.onWindowMinimize)),b.onMouseDown.add(u(this,
this.onMouseDown)),b.onMouseMove.add(u(this,this.onMouseMove)),b.onMouseMoveRelative.add(u(this,this.onMouseMoveRelative)),b.onMouseUp.add(u(this,this.onMouseUp)),b.onMouseWheel.add(u(this,this.onMouseWheel)),b.onMove.add(u(this,this.onWindowMove)),b.onRender.add(u(this,this.render)),b.onResize.add(u(this,this.onWindowResize)),b.onRestore.add(u(this,this.onWindowRestore)),b.onTextEdit.add(u(this,this.onTextEdit)),b.onTextInput.add(u(this,this.onTextInput)),this.onWindowCreate());this.onCreateWindow.dispatch(b);
return b},__class__:Lh});var ef=function(a,b,c){null==c&&(c=!1);ba.call(this);this.__bitmapData=a;this.pixelSnapping=b;this.smoothing=c;null==b&&(this.pixelSnapping=1)};g["openfl.display.Bitmap"]=ef;ef.__name__="openfl.display.Bitmap";ef.__super__=ba;ef.prototype=v(ba.prototype,{pixelSnapping:null,smoothing:null,__image:null,__bitmapData:null,__imageVersion:null,__enterFrame:function(a){null==this.__bitmapData||null==this.__bitmapData.image||this.__bitmapData.image.version==this.__imageVersion||this.__renderDirty||
(this.__renderDirty=!0,this.__setParentRenderDirty())},__getBounds:function(a,b){var c=ya.__pool.get();null!=this.__bitmapData?c.setTo(0,0,this.__bitmapData.width,this.__bitmapData.height):c.setTo(0,0,0,0);c.__transform(c,b);a.__expand(c.x,c.y,c.width,c.height);ya.__pool.release(c)},__hitTest:function(a,b,c,d,e,f){if(!f.get_visible()||this.__isMask||null==this.__bitmapData||null!=this.get_mask()&&!this.get_mask().__hitTestMask(a,b))return!1;this.__getRenderTransform();c=this.__renderTransform;var k=
c.a*c.d-c.b*c.c;c=0==k?-c.tx:1/k*(c.c*(c.ty-b)+c.d*(a-c.tx));k=this.__renderTransform;var m=k.a*k.d-k.b*k.c;a=0==m?-k.ty:1/m*(k.a*(b-k.ty)+k.b*(k.tx-a));if(0<c&&0<a&&c<=this.__bitmapData.width&&a<=this.__bitmapData.height){if(null!=this.__scrollRect&&!this.__scrollRect.contains(c,a))return!1;null==d||e||d.push(f);return!0}return!1},__hitTestMask:function(a,b){if(null==this.__bitmapData)return!1;this.__getRenderTransform();var c=this.__renderTransform,d=c.a*c.d-c.b*c.c;c=0==d?-c.tx:1/d*(c.c*(c.ty-
b)+c.d*(a-c.tx));d=this.__renderTransform;var e=d.a*d.d-d.b*d.c;a=0==e?-d.ty:1/e*(d.a*(b-d.ty)+d.b*(d.tx-a));return 0<c&&0<a&&c<=this.__bitmapData.width&&a<=this.__bitmapData.height?!0:!1},__renderCairo:function(a){},__renderCairoMask:function(a){a.cairo.rectangle(0,0,this.get_width(),this.get_height())},__renderCanvas:function(a){this.__updateCacheBitmap(a,!1);null!=this.__bitmapData&&null!=this.__bitmapData.image&&(this.__imageVersion=this.__bitmapData.image.version);if(null==this.__cacheBitmap||
this.__isCacheBitmapRender){if(!(null==this.opaqueBackground&&null==this.__graphics||!this.__renderable||0>=a.__getAlpha(this.__worldAlpha))){if(null!=this.opaqueBackground&&!this.__isCacheBitmapRender&&0<this.get_width()&&0<this.get_height()){a.__setBlendMode(this.__worldBlendMode);a.__pushMaskObject(this);var b=a.context;a.setTransform(this.__renderTransform,b);var c=this.opaqueBackground;b.fillStyle="rgb("+(c>>>16&255)+","+(c>>>8&255)+","+(c&255)+")";b.fillRect(0,0,this.get_width(),this.get_height());
a.__popMaskObject(this)}if(null!=this.__graphics&&this.__renderable){var d=a.__getAlpha(this.__worldAlpha);if(!(0>=d)){var e=this.__graphics;if(null!=e){A.render(e,a);var f=e.__width,k=e.__height;b=e.__canvas;if(null!=b&&e.__visible&&1<=f&&1<=k){var m=e.__worldTransform;c=a.context;var h=this.__scrollRect,n=this.__worldScale9Grid;if(null==h||0<h.width&&0<h.height){a.__setBlendMode(this.__worldBlendMode);a.__pushMaskObject(this);c.globalAlpha=d;if(null!=n&&0==m.b&&0==m.c){c.setTransform(1,0,0,1,m.tx,
m.ty);var g=e.__bounds,l=e.__renderTransform.a,p=e.__renderTransform.d,y=m.a,r=m.d;m=Math.max(1,Math.round(n.x*l));e=Math.round(n.y*p);d=Math.max(1,Math.round((g.get_right()-n.get_right())*l));h=Math.round((g.get_bottom()-n.get_bottom())*p);l=Math.round(n.width*l);p=Math.round(n.height*p);var q=Math.round(n.x*y),t=Math.round(n.y*r),z=Math.round((g.get_right()-n.get_right())*y);n=Math.round((g.get_bottom()-n.get_bottom())*r);g=Math.round(f*y)-q-z;y=Math.round(k*r)-t-n;a.applySmoothing(c,!1);0!=l&&
0!=p?(c.drawImage(b,0,0,m,e,0,0,q,t),c.drawImage(b,m,0,l,e,q,0,g,t),c.drawImage(b,m+l,0,d,e,q+g,0,z,t),c.drawImage(b,0,e,m,p,0,t,q,y),c.drawImage(b,m,e,l,p,q,t,g,y),c.drawImage(b,m+l,e,d,p,q+g,t,z,y),c.drawImage(b,0,e+p,m,h,0,t+y,q,n),c.drawImage(b,m,e+p,l,h,q,t+y,g,n),c.drawImage(b,m+l,e+p,d,h,q+g,t+y,z,n)):0==l&&0!=p?(k=q+g+z,c.drawImage(b,0,0,f,e,0,0,k,t),c.drawImage(b,0,e,f,p,0,t,k,y),c.drawImage(b,0,e+p,f,h,0,t+y,k,n)):0==p&&0!=l&&(f=t+y+n,c.drawImage(b,0,0,m,k,0,0,q,f),c.drawImage(b,m,0,l,k,
q,0,g,f),c.drawImage(b,m+l,0,d,k,q+g,0,z,f))}else a.setTransform(m,c),a.__isDOM&&(n=1/a.pixelRatio,c.scale(n,n)),c.drawImage(b,0,0,f,k);a.__popMaskObject(this)}}}}}}this.__renderable&&(c=a.__getAlpha(this.__worldAlpha),0<c&&null!=this.__bitmapData&&this.__bitmapData.__isValid&&this.__bitmapData.readable&&(b=a.context,a.__setBlendMode(this.__worldBlendMode),a.__pushMaskObject(this,!1),La.convertToCanvas(this.__bitmapData.image),b.globalAlpha=c,c=this.__scrollRect,a.setTransform(this.__renderTransform,
b),a.__allowSmoothing&&this.smoothing||(b.imageSmoothingEnabled=!1),null==c?b.drawImage(this.__bitmapData.image.get_src(),0,0,this.__bitmapData.image.width,this.__bitmapData.image.height):b.drawImage(this.__bitmapData.image.get_src(),c.x,c.y,c.width,c.height),a.__allowSmoothing&&this.smoothing||(b.imageSmoothingEnabled=!0),a.__popMaskObject(this,!1)))}else b=this.__cacheBitmap,b.__renderable&&(f=a.__getAlpha(b.__worldAlpha),0<f&&null!=b.__bitmapData&&b.__bitmapData.__isValid&&b.__bitmapData.readable&&
(c=a.context,a.__setBlendMode(b.__worldBlendMode),a.__pushMaskObject(b,!1),La.convertToCanvas(b.__bitmapData.image),c.globalAlpha=f,f=b.__scrollRect,a.setTransform(b.__renderTransform,c),a.__allowSmoothing&&b.smoothing||(c.imageSmoothingEnabled=!1),null==f?c.drawImage(b.__bitmapData.image.get_src(),0,0,b.__bitmapData.image.width,b.__bitmapData.image.height):c.drawImage(b.__bitmapData.image.get_src(),f.x,f.y,f.width,f.height),a.__allowSmoothing&&b.smoothing||(c.imageSmoothingEnabled=!0),a.__popMaskObject(b,
!1)));this.__renderEvent(a)},__renderCanvasMask:function(a){a.context.rect(0,0,this.get_width(),this.get_height())},__renderDOM:function(a){this.__updateCacheBitmap(a,!1);if(null==this.__cacheBitmap||this.__isCacheBitmapRender){null!=this.opaqueBackground&&!this.__isCacheBitmapRender&&0<this.get_width()&&this.get_height();var b=this.__graphics;if(null!=this.stage&&this.__worldVisible&&this.__renderable&&null!=b){A.render(b,a.__canvasRenderer);if(b.__softwareDirty||this.__worldAlphaChanged||this.__canvas!=
b.__canvas)null!=b.__canvas?this.__canvas!=b.__canvas&&(null!=this.__canvas&&a.element.removeChild(this.__canvas),this.__canvas=b.__canvas,this.__context=b.__context,a.__initializeElement(this,this.__canvas)):zf.clear(this,a);if(null!=this.__canvas){a.__pushMaskObject(this);var c=this.__renderTransform;this.__renderTransform=b.__worldTransform;b.__transformDirty&&(b.__transformDirty=!1,this.__renderTransformChanged=!0);a.__updateClip(this);a.__applyStyle(this,!0,!0,!0);this.__renderTransform=c;a.__popMaskObject(this)}}else zf.clear(this,
a);null!=this.stage&&this.__worldVisible&&this.__renderable&&null!=this.__bitmapData&&this.__bitmapData.__isValid&&this.__bitmapData.readable?(a.__pushMaskObject(this),null!=this.__bitmapData.image.buffer.__srcImage?Lb.renderImage(this,a):Lb.renderCanvas(this,a),a.__popMaskObject(this)):Lb.clear(this,a)}else this.__renderDOMClear(a),this.__cacheBitmap.stage=this.stage,b=this.__cacheBitmap,null!=b.stage&&b.__worldVisible&&b.__renderable&&null!=b.__bitmapData&&b.__bitmapData.__isValid&&b.__bitmapData.readable?
(a.__pushMaskObject(b),null!=b.__bitmapData.image.buffer.__srcImage?Lb.renderImage(b,a):Lb.renderCanvas(b,a),a.__popMaskObject(b)):Lb.clear(b,a);this.__renderEvent(a)},__renderDOMClear:function(a){Lb.clear(this,a)},__renderGL:function(a){this.__updateCacheBitmap(a,!1);null!=this.__bitmapData&&null!=this.__bitmapData.image&&(this.__imageVersion=this.__bitmapData.image.version);if(null==this.__cacheBitmap||this.__isCacheBitmapRender){if(!(null==this.opaqueBackground&&null==this.__graphics||!this.__renderable||
0>=this.__worldAlpha)){if(null!=this.opaqueBackground&&!this.__isCacheBitmapRender&&0<this.get_width()&&0<this.get_height()){a.__setBlendMode(this.__worldBlendMode);a.__pushMaskObject(this);var b=a.__context3D,c=ya.__pool.get();c.setTo(0,0,this.get_width(),this.get_height());a.__pushMaskRect(c,this.__renderTransform);var d=this.opaqueBackground;b.clear((d>>>16&255)/255,(d>>>8&255)/255,(d&255)/255,1,0,0,1);a.__popMaskRect();a.__popMaskObject(this);ya.__pool.release(c)}null!=this.__graphics&&Te.render(this,
a)}df.render(this,a)}else df.render(this.__cacheBitmap,a);this.__renderEvent(a)},__renderGLMask:function(a){df.renderMask(this,a)},__updateCacheBitmap:function(a,b){return null==this.__bitmapData||null==this.__filters&&"opengl"==a.__type&&null==this.__cacheBitmap?!1:ba.prototype.__updateCacheBitmap.call(this,a,null!=this.__bitmapData.image&&this.__bitmapData.image.version!=this.__imageVersion)},get_bitmapData:function(){return this.__bitmapData},set_height:function(a){null!=this.__bitmapData?this.set_scaleY(a/
this.__bitmapData.height):this.set_scaleY(0);return a},set_width:function(a){null!=this.__bitmapData?this.set_scaleX(a/this.__bitmapData.width):this.set_scaleX(0);return a},__class__:ef});var kd=function(){aa.call(this);this.__allowSmoothing=!0;this.__tempColorTransform=new Nb;this.__worldAlpha=1};g["openfl.display.DisplayObjectRenderer"]=kd;kd.__name__="openfl.display.DisplayObjectRenderer";kd.__super__=aa;kd.prototype=v(aa.prototype,{__allowSmoothing:null,__blendMode:null,__cleared:null,__context:null,
__overrideBlendMode:null,__roundPixels:null,__stage:null,__tempColorTransform:null,__type:null,__worldAlpha:null,__worldColorTransform:null,__worldTransform:null,__clear:function(){},__getAlpha:function(a){return a*this.__worldAlpha},__popMaskObject:function(a,b){},__pushMaskObject:function(a,b){},__render:function(a){},__resize:function(a,b){},__setBlendMode:function(a){},__class__:kd});var Xi=function(a){kd.call(this)};g["openfl.display.CairoRenderer"]=Xi;Xi.__name__="openfl.display.CairoRenderer";
Xi.__super__=kd;Xi.prototype=v(kd.prototype,{cairo:null,__matrix:null,__matrix3:null,applyMatrix:function(a,b){null==b&&(b=this.cairo);this.__matrix.copyFrom(a);this.cairo==b&&null!=this.__worldTransform&&this.__matrix.concat(this.__worldTransform);this.__matrix3.a=this.__matrix.a;this.__matrix3.b=this.__matrix.b;this.__matrix3.c=this.__matrix.c;this.__matrix3.d=this.__matrix.d;this.__roundPixels?(this.__matrix3.tx=Math.round(this.__matrix.tx),this.__matrix3.ty=Math.round(this.__matrix.ty)):(this.__matrix3.tx=
this.__matrix.tx,this.__matrix3.ty=this.__matrix.ty);b.set_matrix(this.__matrix3)},__clear:function(){if(null!=this.cairo&&(this.cairo.identityMatrix(),null!=this.__stage&&this.__stage.__clearBeforeRender)){var a=this.__blendMode;this.__setBlendMode(10);this.cairo.setSourceRGB(this.__stage.__colorSplit[0],this.__stage.__colorSplit[1],this.__stage.__colorSplit[2]);this.cairo.paint();this.__setBlendMode(a)}},__popMask:function(){this.cairo.restore()},__popMaskObject:function(a,b){null==b&&(b=!0);a.__isCacheBitmapRender||
null==a.__mask||this.__popMask();b&&null!=a.__scrollRect&&this.__popMaskRect()},__popMaskRect:function(){this.cairo.restore()},__pushMask:function(a){this.cairo.save();this.applyMatrix(a.__renderTransform,this.cairo);this.cairo.newPath();a.__renderCairoMask(this);this.cairo.clip()},__pushMaskObject:function(a,b){null==b&&(b=!0);b&&null!=a.__scrollRect&&this.__pushMaskRect(a.__scrollRect,a.__renderTransform);a.__isCacheBitmapRender||null==a.__mask||this.__pushMask(a.__mask)},__pushMaskRect:function(a,
b){this.cairo.save();this.applyMatrix(b,this.cairo);this.cairo.newPath();this.cairo.rectangle(a.x,a.y,a.width,a.height);this.cairo.clip()},__render:function(a){null!=this.cairo&&a.__renderCairo(this)},__setBlendMode:function(a){null!=this.__overrideBlendMode&&(a=this.__overrideBlendMode);this.__blendMode!=a&&(this.__blendMode=a,this.__setBlendModeCairo(this.cairo,a))},__setBlendModeCairo:function(a,b){switch(b){case 0:a.setOperator(12);break;case 2:a.setOperator(17);break;case 3:a.setOperator(23);
break;case 5:a.setOperator(21);break;case 7:a.setOperator(2);break;case 8:a.setOperator(18);break;case 9:a.setOperator(14);break;case 11:a.setOperator(16);break;case 12:a.setOperator(15);break;default:a.setOperator(2)}},__class__:Xi});var fe=function(a){this.pixelRatio=1;kd.call(this);this.context=a;this.__tempMatrix=new va;this.__type="canvas"};g["openfl.display.CanvasRenderer"]=fe;fe.__name__="openfl.display.CanvasRenderer";fe.__super__=kd;fe.prototype=v(kd.prototype,{context:null,pixelRatio:null,
__isDOM:null,__tempMatrix:null,applySmoothing:function(a,b){a.imageSmoothingEnabled=b},setTransform:function(a,b){null==b?b=this.context:this.context==b&&null!=this.__worldTransform&&(this.__tempMatrix.copyFrom(a),this.__tempMatrix.concat(this.__worldTransform),a=this.__tempMatrix);this.__roundPixels?b.setTransform(a.a,a.b,a.c,a.d,a.tx|0,a.ty|0):b.setTransform(a.a,a.b,a.c,a.d,a.tx,a.ty)},__clear:function(){if(null!=this.__stage){var a=this.__blendMode;this.__blendMode=null;this.__setBlendMode(10);
this.context.setTransform(1,0,0,1,0,0);this.context.globalAlpha=1;!this.__stage.__transparent&&this.__stage.__clearBeforeRender?(this.context.fillStyle=this.__stage.__colorString,this.context.fillRect(0,0,this.__stage.stageWidth*this.__stage.window.__scale,this.__stage.stageHeight*this.__stage.window.__scale)):this.__stage.__transparent&&this.__stage.__clearBeforeRender&&this.context.clearRect(0,0,this.__stage.stageWidth*this.__stage.window.__scale,this.__stage.stageHeight*this.__stage.window.__scale);
this.__setBlendMode(a)}},__popMask:function(){this.context.restore()},__popMaskObject:function(a,b){null==b&&(b=!0);a.__isCacheBitmapRender||null==a.__mask||this.__popMask();b&&null!=a.__scrollRect&&this.__popMaskRect()},__popMaskRect:function(){this.context.restore()},__pushMask:function(a){this.context.save();this.setTransform(a.__renderTransform,this.context);this.context.beginPath();a.__renderCanvasMask(this);this.context.closePath();this.context.clip()},__pushMaskObject:function(a,b){null==b&&
(b=!0);b&&null!=a.__scrollRect&&this.__pushMaskRect(a.__scrollRect,a.__renderTransform);a.__isCacheBitmapRender||null==a.__mask||this.__pushMask(a.__mask)},__pushMaskRect:function(a,b){this.context.save();this.setTransform(b,this.context);this.context.beginPath();this.context.rect(a.x,a.y,a.width,a.height);this.context.clip()},__render:function(a){a.__renderCanvas(this)},__setBlendMode:function(a){null!=this.__overrideBlendMode&&(a=this.__overrideBlendMode);this.__blendMode!=a&&(this.__blendMode=
a,this.__setBlendModeContext(this.context,a))},__setBlendModeContext:function(a,b){switch(b){case 0:a.globalCompositeOperation="lighter";break;case 2:a.globalCompositeOperation="darken";break;case 3:a.globalCompositeOperation="difference";break;case 5:a.globalCompositeOperation="hard-light";break;case 8:a.globalCompositeOperation="lighten";break;case 9:a.globalCompositeOperation="multiply";break;case 11:a.globalCompositeOperation="overlay";break;case 12:a.globalCompositeOperation="screen";break;default:a.globalCompositeOperation=
"source-over"}},__class__:fe});var im={};g["openfl.display._CapsStyle.CapsStyle_Impl_"]=im;im.__name__="openfl.display._CapsStyle.CapsStyle_Impl_";im.toString=function(a){switch(a){case 0:return"none";case 1:return"round";case 2:return"square";default:return null}};var Yi=function(a){this.pixelRatio=1;kd.call(this);this.element=a;ba.__supportDOM=!0;a=window.getComputedStyle(document.documentElement,"");a=(Array.prototype.slice.call(a).join("").match(/-(moz|webkit|ms)-/)||""===a.OLink&&["","o"])[1];
"WebKit|Moz|MS|O".match(new RegExp("("+a+")","i"));a[0].toUpperCase();a.substr(1);this.__vendorPrefix=a;this.__transformProperty="webkit"==a?"-webkit-transform":"transform";this.__transformOriginProperty="webkit"==a?"-webkit-transform-origin":"transform-origin";this.__clipRects=[];this.__z=this.__numClipRects=0;this.__type="dom";this.__canvasRenderer=new fe(null);this.__canvasRenderer.__isDOM=!0};g["openfl.display.DOMRenderer"]=Yi;Yi.__name__="openfl.display.DOMRenderer";Yi.__super__=kd;Yi.prototype=
v(kd.prototype,{element:null,pixelRatio:null,__canvasRenderer:null,__clipRects:null,__currentClipRect:null,__numClipRects:null,__transformOriginProperty:null,__transformProperty:null,__vendorPrefix:null,__z:null,__applyStyle:function(a,b,c,d){var e=a.__style;if(b&&a.__renderTransformChanged){b=a.__renderTransform;var f=this.__roundPixels;null==f&&(f=!1);e.setProperty(this.__transformProperty,f?"matrix3d("+b.a+", "+b.b+", 0, 0, "+b.c+", "+b.d+", 0, 0, 0, 0, 1, 0, "+(b.tx|0)+", "+(b.ty|0)+", 0, 1)":
"matrix3d("+b.a+", "+b.b+", 0, 0, "+b.c+", "+b.d+", 0, 0, 0, 0, 1, 0, "+b.tx+", "+b.ty+", 0, 1)",null)}a.__worldZ!=++this.__z&&(a.__worldZ=this.__z,e.setProperty("z-index",null==a.__worldZ?"null":""+a.__worldZ,null));c&&a.__worldAlphaChanged&&(1>a.__worldAlpha?e.setProperty("opacity",null==a.__worldAlpha?"null":""+a.__worldAlpha,null):e.removeProperty("opacity"));d&&a.__worldClipChanged&&(null==a.__worldClip?e.removeProperty("clip"):(a=a.__worldClip,e.setProperty("clip","rect("+a.y+"px, "+a.get_right()+
"px, "+a.get_bottom()+"px, "+a.x+"px)",null)))},__initializeElement:function(a,b){var c=a.__style=b.style;c.setProperty("position","absolute",null);c.setProperty("top","0",null);c.setProperty("left","0",null);c.setProperty(this.__transformOriginProperty,"0 0 0",null);this.element.appendChild(b);a.__worldAlphaChanged=!0;a.__renderTransformChanged=!0;a.__worldVisibleChanged=!0;a.__worldClipChanged=!0;a.__worldClip=null;a.__worldZ=-1},__popMask:function(){this.__popMaskRect()},__popMaskObject:function(a,
b){null==b&&(b=!0);null!=a.__mask&&this.__popMask();b&&null!=a.__scrollRect&&this.__popMaskRect()},__popMaskRect:function(){0<this.__numClipRects&&(this.__numClipRects--,this.__currentClipRect=0<this.__numClipRects?this.__clipRects[this.__numClipRects-1]:null)},__pushMask:function(a){this.__pushMaskRect(a.getBounds(a),a.__renderTransform)},__pushMaskObject:function(a,b){null==b&&(b=!0);b&&null!=a.__scrollRect&&this.__pushMaskRect(a.__scrollRect,a.__renderTransform);null!=a.__mask&&this.__pushMask(a.__mask)},
__pushMaskRect:function(a,b){this.__numClipRects==this.__clipRects.length&&(this.__clipRects[this.__numClipRects]=new ya);var c=this.__clipRects[this.__numClipRects];a.__transform(c,b);0<this.__numClipRects&&(a=this.__clipRects[this.__numClipRects-1],c.__contract(a.x,a.y,a.width,a.height));0>c.height&&(c.height=0);0>c.width&&(c.width=0);this.__currentClipRect=c;this.__numClipRects++},__render:function(a){this.element.style.background=this.__stage.__transparent?"none":this.__stage.__colorString;this.__z=
1;a.__renderDOM(this)},__setBlendMode:function(a){null!=this.__overrideBlendMode&&(a=this.__overrideBlendMode);this.__blendMode!=a&&(this.__blendMode=a)},__updateClip:function(a){if(null==this.__currentClipRect)a.__worldClipChanged=null!=a.__worldClip,a.__worldClip=null;else{null==a.__worldClip&&(a.__worldClip=new ya);var b=ya.__pool.get(),c=va.__pool.get();c.copyFrom(a.__renderTransform);c.invert();this.__currentClipRect.__transform(b,c);b.equals(a.__worldClip)?a.__worldClipChanged=!1:(a.__worldClip.copyFrom(b),
a.__worldClipChanged=!0);ya.__pool.release(b);va.__pool.release(c)}},__class__:Yi});var yh=function(a){null==this.__glFragmentSource&&(this.__glFragmentSource="varying float openfl_Alphav;\n\t\tvarying vec4 openfl_ColorMultiplierv;\n\t\tvarying vec4 openfl_ColorOffsetv;\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform bool openfl_HasColorTransform;\n\t\tuniform sampler2D openfl_Texture;\n\t\tuniform vec2 openfl_TextureSize;\n\n\t\tvoid main(void) {\n\n\t\t\tvec4 color = texture2D (openfl_Texture, openfl_TextureCoordv);\n\n\t\tif (color.a == 0.0) {\n\n\t\t\tgl_FragColor = vec4 (0.0, 0.0, 0.0, 0.0);\n\n\t\t} else if (openfl_HasColorTransform) {\n\n\t\t\tcolor = vec4 (color.rgb / color.a, color.a);\n\n\t\t\tmat4 colorMultiplier = mat4 (0);\n\t\t\tcolorMultiplier[0][0] = openfl_ColorMultiplierv.x;\n\t\t\tcolorMultiplier[1][1] = openfl_ColorMultiplierv.y;\n\t\t\tcolorMultiplier[2][2] = openfl_ColorMultiplierv.z;\n\t\t\tcolorMultiplier[3][3] = 1.0; // openfl_ColorMultiplierv.w;\n\n\t\t\tcolor = clamp (openfl_ColorOffsetv + (color * colorMultiplier), 0.0, 1.0);\n\n\t\t\tif (color.a > 0.0) {\n\n\t\t\t\tgl_FragColor = vec4 (color.rgb * color.a * openfl_Alphav, color.a * openfl_Alphav);\n\n\t\t\t} else {\n\n\t\t\t\tgl_FragColor = vec4 (0.0, 0.0, 0.0, 0.0);\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tgl_FragColor = color * openfl_Alphav;\n\n\t\t}\n\n\t\t}");
null==this.__glVertexSource&&(this.__glVertexSource="attribute float openfl_Alpha;\n\t\tattribute vec4 openfl_ColorMultiplier;\n\t\tattribute vec4 openfl_ColorOffset;\n\t\tattribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\n\t\tvarying float openfl_Alphav;\n\t\tvarying vec4 openfl_ColorMultiplierv;\n\t\tvarying vec4 openfl_ColorOffsetv;\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform bool openfl_HasColorTransform;\n\t\tuniform vec2 openfl_TextureSize;\n\n\t\tvoid main(void) {\n\n\t\t\topenfl_Alphav = openfl_Alpha;\n\t\topenfl_TextureCoordv = openfl_TextureCoord;\n\n\t\tif (openfl_HasColorTransform) {\n\n\t\t\topenfl_ColorMultiplierv = openfl_ColorMultiplier;\n\t\t\topenfl_ColorOffsetv = openfl_ColorOffset / 255.0;\n\n\t\t}\n\n\t\tgl_Position = openfl_Matrix * openfl_Position;\n\n\t\t}");
jd.call(this,a);this.__isGenerated=!0;this.__initGL()};g["openfl.display.DisplayObjectShader"]=yh;yh.__name__="openfl.display.DisplayObjectShader";yh.__super__=jd;yh.prototype=v(jd.prototype,{openfl_Alpha:null,openfl_ColorMultiplier:null,openfl_ColorOffset:null,openfl_Position:null,openfl_TextureCoord:null,openfl_Matrix:null,openfl_HasColorTransform:null,openfl_TextureSize:null,openfl_Texture:null,__class__:yh});var rc=function(){this.__renderedOnCanvasWhileOnDOM=this.__forceCachedBitmapUpdate=!1;
fa.call(this);this.__caretIndex=-1;this.__displayAsPassword=!1;this.__graphics=new pc(this);this.__textEngine=new jb(this);this.__layoutDirty=!0;this.__offsetY=this.__offsetX=0;this.__mouseWheelEnabled=!0;this.__text="";null==rc.__defaultTextFormat&&(rc.__defaultTextFormat=new zh("Times New Roman",12,0,!1,!1,!1,"","",3,0,0,0,0),rc.__defaultTextFormat.blockIndent=0,rc.__defaultTextFormat.bullet=!1,rc.__defaultTextFormat.letterSpacing=0,rc.__defaultTextFormat.kerning=!1);this.__textFormat=rc.__defaultTextFormat.clone();
this.__textEngine.textFormatRanges.push(new sh(this.__textFormat,0,0));this.addEventListener("mouseDown",u(this,this.this_onMouseDown));this.addEventListener("focusIn",u(this,this.this_onFocusIn));this.addEventListener("focusOut",u(this,this.this_onFocusOut));this.addEventListener("keyDown",u(this,this.this_onKeyDown));this.addEventListener("mouseWheel",u(this,this.this_onMouseWheel))};g["openfl.text.TextField"]=rc;rc.__name__="openfl.text.TextField";rc.__super__=fa;rc.prototype=v(fa.prototype,{__caretIndex:null,
__cursorTimer:null,__dirty:null,__displayAsPassword:null,__domRender:null,__inputEnabled:null,__isHTML:null,__layoutDirty:null,__mouseWheelEnabled:null,__offsetX:null,__offsetY:null,__selectionIndex:null,__showCursor:null,__symbol:null,__text:null,__textEngine:null,__textFormat:null,__div:null,__renderedOnCanvasWhileOnDOM:null,__rawHtmlText:null,__forceCachedBitmapUpdate:null,getCharBoundaries:function(a){if(0>a||a>this.__text.length-1)return null;var b=new ya;return this.__getCharBoundaries(a,b)?
b:null},getLineIndexOfChar:function(a){if(0>a||a>this.__text.length)return-1;this.__updateLayout();for(var b=this.__textEngine.layoutGroups.iterator();b.hasNext();){var c=b.next();if(c.startIndex<=a&&c.endIndex>=a)return c.lineIndex}return-1},getLineOffset:function(a){this.__updateLayout();if(0>a||a>this.__textEngine.numLines-1)return-1;for(var b=this.__textEngine.layoutGroups.iterator();b.hasNext();){var c=b.next();if(c.lineIndex==a)return c.startIndex}return 0},replaceSelectedText:function(a){this.__replaceSelectedText(a,
!1)},replaceText:function(a,b,c){this.__replaceText(a,b,c,!1)},setSelection:function(a,b){this.__selectionIndex=a;this.__caretIndex=b;this.__updateScrollV();this.__stopCursorTimer();this.__startCursorTimer()},__allowMouseFocus:function(){return 1==this.__textEngine.type||this.get_tabEnabled()?!0:this.get_selectable()},__caretBeginningOfLine:function(){this.__selectionIndex==this.__caretIndex||this.__caretIndex<this.__selectionIndex?this.__caretIndex=this.getLineOffset(this.getLineIndexOfChar(this.__caretIndex)):
this.__selectionIndex=this.getLineOffset(this.getLineIndexOfChar(this.__selectionIndex))},__caretEndOfLine:function(){var a=this.__selectionIndex==this.__caretIndex?this.getLineIndexOfChar(this.__caretIndex):this.getLineIndexOfChar(Math.max(this.__caretIndex,this.__selectionIndex)|0);this.__caretIndex=a<this.__textEngine.numLines-1?this.getLineOffset(a+1)-1:this.__text.length},__caretNextCharacter:function(){this.__caretIndex<this.__text.length&&this.__caretIndex++},__caretNextLine:function(a,b){null==
a&&(a=this.getLineIndexOfChar(this.__caretIndex));a<this.__textEngine.numLines-1?(null==b&&(b=this.__caretIndex),this.__caretIndex=this.__getCharIndexOnDifferentLine(b,a+1)):this.__caretIndex=this.__text.length},__caretPreviousCharacter:function(){0<this.__caretIndex&&this.__caretIndex--},__caretPreviousLine:function(a,b){null==a&&(a=this.getLineIndexOfChar(this.__caretIndex));0<a?(null==b&&(b=this.__caretIndex),this.__caretIndex=this.__getCharIndexOnDifferentLine(b,a-1)):this.__caretIndex=0},__disableInput:function(){this.__inputEnabled&&
null!=this.stage&&(this.stage.window.__backend.setTextInputEnabled(!1),this.stage.window.onTextInput.remove(u(this,this.window_onTextInput)),this.stage.window.onKeyDown.remove(u(this,this.window_onKeyDown)),this.__inputEnabled=!1,this.__stopCursorTimer())},__dispatch:function(a){if(2==a.eventPhase&&"mouseUp"==a.type){var b=this.__getGroup(this.get_mouseX(),this.get_mouseY(),!0);null!=b&&(b=b.format.url,null!=b&&""!=b&&(Y.startsWith(b,"event:")?this.dispatchEvent(new td("link",!1,!1,ra.substr(b,6,
null))):Qb.getURL(new Xj(b))))}return fa.prototype.__dispatch.call(this,a)},__enableInput:function(){null!=this.stage&&(this.stage.window.__backend.setTextInputEnabled(!0),this.__inputEnabled||(this.stage.window.__backend.setTextInputEnabled(!0),this.stage.window.onTextInput.has(u(this,this.window_onTextInput))||(this.stage.window.onTextInput.add(u(this,this.window_onTextInput)),this.stage.window.onKeyDown.add(u(this,this.window_onKeyDown))),this.__inputEnabled=!0,this.__startCursorTimer()))},__fromSymbol:function(a,
b){this.__symbol=b;this.set_width(b.width);this.set_height(b.height);this.__offsetX=b.x;this.__offsetY=b.y;this.set_multiline(b.multiline);this.set_wordWrap(b.wordWrap);this.set_displayAsPassword(b.password);b.border&&(this.set_border(!0),this.set_background(!0));this.set_selectable(b.selectable);b.input&&this.set_type(1);var c=new zh;null!=b.color&&(c.color=b.color&16777215);c.size=Math.round(b.fontHeight/20);a=a.symbols.h[b.fontID];null!=a&&(c.__ascent=a.ascent/20/1024,c.__descent=a.descent/20/
1024);c.font=b.fontName;a=!1;var d=c.font;if(null==d)a=!0;else switch(d){case "":case "_sans":case "_serif":case "_typewriter":a=!0;break;default:d=0;for(var e=Ac.enumerateFonts();d<e.length;){var f=e[d];++d;if(f.name==c.font){a=!0;break}}}if(!a)for(d=/[^a-zA-Z]+/g,e=0,f=Ac.enumerateFonts();e<f.length;){var k=f[e];++e;if(ra.substr(k.name.replace(d,""),0,b.fontName.length)==b.fontName){c.font=k.name;a=!0;break}}a?this.set_embedFonts(!0):(a=c.font,d=rc.__missingFontWarning,(null!=F[a]?d.existsReserved(a):
d.h.hasOwnProperty(a))||(a=c.font,d=rc.__missingFontWarning,null!=F[a]?d.setReserved(a,!0):d.h[a]=!0,Ga.warn('Could not find required font "'+c.font+'", it has not been embedded',{fileName:"openfl/text/TextField.hx",lineNumber:1773,className:"openfl.text.TextField",methodName:"__fromSymbol"})));null!=b.align&&("center"==b.align?c.align=0:"right"==b.align?c.align=4:"justify"==b.align&&(c.align=2),c.leftMargin=b.leftMargin/20|0,c.rightMargin=b.rightMargin/20|0,c.indent=b.indent/20|0,c.leading=b.leading/
20|0);this.set_defaultTextFormat(c);null!=b.text&&(b.html?this.set_htmlText(b.text):this.set_text(b.text))},__getBounds:function(a,b){this.__updateLayout();var c=ya.__pool.get();c.copyFrom(this.__textEngine.bounds);b.tx+=this.__offsetX;b.ty+=this.__offsetY;c.__transform(c,b);a.__expand(c.x,c.y,c.width,c.height);ya.__pool.release(c)},__getCharBoundaries:function(a,b){if(0>a||a>this.__text.length-1)return!1;this.__updateLayout();for(var c=this.__textEngine.layoutGroups.iterator();c.hasNext();){var d=
c.next();if(a>=d.startIndex&&a<d.endIndex)try{for(var e=d.offsetX,f=0,k=a-d.startIndex;f<k;){var m=f++;e+=d.positions[m]}b.setTo(e,d.offsetY,d.positions[a-d.startIndex],d.ascent+d.descent);return!0}catch(h){ab.lastException=h}}return!1},__getCharIndexOnDifferentLine:function(a,b){if(0>a||a>this.__text.length||0>b||b>this.__textEngine.numLines-1)return-1;for(var c=null,d=null,e=this.__textEngine.layoutGroups.iterator();e.hasNext();){var f=e.next();if(a>=f.startIndex&&a<=f.endIndex){c=f.offsetX;for(var k=
0,m=a-f.startIndex;k<m;){var h=k++;c+=f.positions[h]}if(null!=d)return this.__getPosition(c,d)}if(f.lineIndex==b){d=f.offsetY+f.height/2;f=0;for(k=this.get_scrollV()-1;f<k;)m=f++,d-=this.__textEngine.lineHeights.get(m);if(null!=c)return this.__getPosition(c,d)}}return-1},__getCursor:function(){var a=this.__getGroup(this.get_mouseX(),this.get_mouseY(),!0);return null!=a&&""!=a.format.url?"button":this.__textEngine.selectable?"ibeam":null},__getGroup:function(a,b,c){null==c&&(c=!1);this.__updateLayout();
a+=this.get_scrollH();for(var d=0,e=this.get_scrollV()-1;d<e;){var f=d++;b+=this.__textEngine.lineHeights.get(f)}!c&&b>this.__textEngine.textHeight&&(b=this.__textEngine.textHeight);d=!0;f=0;for(var k=this.__textEngine.layoutGroups.get_length();f<k;){var m=f++;e=this.__textEngine.layoutGroups.get(m);m=m<this.__textEngine.layoutGroups.get_length()-1?this.__textEngine.layoutGroups.get(m+1):null;d&&(b<e.offsetY&&(b=e.offsetY),a<e.offsetX&&(a=e.offsetX),d=!1);if(b>=e.offsetY&&b<=e.offsetY+e.height||!c&&
null==m)if(a>=e.offsetX&&a<=e.offsetX+e.width||!c&&(null==m||m.lineIndex!=e.lineIndex))return e}return null},__getPosition:function(a,b){b=this.__getGroup(a,b);if(null==b)return this.__text.length;for(var c=0,d=0,e=b.positions.length;d<e;){var f=d++;c+=b.positions[f];if(a<=b.offsetX+c){if(a<=b.offsetX+(c-b.positions[f])+b.positions[f]/2)return b.startIndex+f;if(b.startIndex+f<b.endIndex)return b.startIndex+f+1;break}}return b.endIndex},__hitTest:function(a,b,c,d,e,f){if(!f.get_visible()||this.__isMask||
e&&!this.mouseEnabled||null!=this.get_mask()&&!this.get_mask().__hitTestMask(a,b))return!1;this.__getRenderTransform();this.__updateLayout();c=this.__renderTransform;e=c.a*c.d-c.b*c.c;var k=this.__renderTransform,m=k.a*k.d-k.b*k.c;return this.__textEngine.bounds.contains(0==e?-c.tx:1/e*(c.c*(c.ty-b)+c.d*(a-c.tx)),0==m?-k.ty:1/m*(k.a*(b-k.ty)+k.b*(k.tx-a)))?(null!=d&&d.push(f),!0):!1},__hitTestMask:function(a,b){this.__getRenderTransform();this.__updateLayout();var c=this.__renderTransform,d=c.a*c.d-
c.b*c.c,e=this.__renderTransform,f=e.a*e.d-e.b*e.c;return this.__textEngine.bounds.contains(0==d?-c.tx:1/d*(c.c*(c.ty-b)+c.d*(a-c.tx)),0==f?-e.ty:1/f*(e.a*(b-e.ty)+e.b*(e.tx-a)))?!0:!1},__renderCairo:function(a){},__renderCanvas:function(a){a.__isDOM&&!this.__renderedOnCanvasWhileOnDOM&&(this.__renderedOnCanvasWhileOnDOM=!0,1==this.get_type()&&this.replaceText(0,this.__text.length,this.__text),this.__isHTML&&this.__updateText(Oa.parse(this.__text,this.__textFormat,this.__textEngine.textFormatRanges)),
this.__layoutDirty=this.__dirty=!0,this.__renderDirty||(this.__renderDirty=!0,this.__setParentRenderDirty()));if(null==this.get_mask()||0<this.get_mask().get_width()&&0<this.get_mask().get_height())if(this.__updateCacheBitmap(a,!1),null==this.__cacheBitmap||this.__isCacheBitmapRender){var b=this.__textEngine,c=b.background||b.border?b.bounds:b.textBounds,d=this.__graphics;this.__dirty&&(this.__updateLayout(),null==d.__bounds&&(d.__bounds=new ya),d.__bounds.copyFrom(c));d.__update(a.__worldTransform);
if(this.__dirty||d.__softwareDirty){var e=d.__width,f=d.__height;if(!(null!=b.text&&""!=b.text||b.background||b.border||b.__hasFocus||1==b.type&&b.selectable)||(0>=b.width||0>=b.height)&&2!=b.autoSize)this.__graphics.__canvas=null,this.__graphics.__context=null,this.__graphics.__bitmap=null,this.__graphics.__softwareDirty=!1,this.__graphics.set___dirty(!1),this.__dirty=!1;else{null==this.__graphics.__canvas&&(this.__graphics.__canvas=window.document.createElement("canvas"),this.__graphics.__context=
this.__graphics.__canvas.getContext("2d"));V.context=d.__context;var k=d.__renderTransform;if(a.__isDOM){var m=a.pixelRatio;d.__canvas.width=e*m|0;d.__canvas.height=f*m|0;d.__canvas.style.width=e+"px";d.__canvas.style.height=f+"px";e=va.__pool.get();e.copyFrom(k);e.scale(m,m);a.setTransform(e,V.context);va.__pool.release(e)}else d.__canvas.width=e,d.__canvas.height=f,V.context.setTransform(k.a,k.b,k.c,k.d,k.tx,k.ty);null==V.clearRect&&(V.clearRect="undefined"!==typeof navigator&&"undefined"!==typeof navigator.isCocoonJS);
V.clearRect&&V.context.clearRect(0,0,d.__canvas.width,d.__canvas.height);if(null!=b.text&&""!=b.text||b.__hasFocus){k=b.text;d.__context.imageSmoothingEnabled=!a.__allowSmoothing||0==b.antiAliasType&&400==b.sharpness?!1:!0;if(b.border||b.background)V.context.rect(.5,.5,c.width-1,c.height-1),b.background&&(m=Y.hex(b.backgroundColor&16777215,6),V.context.fillStyle="#"+m,V.context.fill()),b.border&&(V.context.lineWidth=1,m=Y.hex(b.borderColor&16777215,6),V.context.strokeStyle="#"+m,V.context.stroke());
V.context.textBaseline="alphabetic";V.context.textAlign="start";m=-this.get_scrollH();f=e=0;for(var h=this.get_scrollV()-1;f<h;){var n=f++;e-=b.lineHeights.get(n)}var g;for(f=b.layoutGroups.iterator();f.hasNext();)if(h=f.next(),!(h.lineIndex<this.get_scrollV()-1)){if(h.lineIndex>b.get_bottomScrollV()-1)break;n="#"+Y.hex(h.format.color&16777215,6);V.context.font=jb.getFont(h.format);V.context.fillStyle=n;V.context.fillText(k.substring(h.startIndex,h.endIndex),h.offsetX+m-c.x,h.offsetY+h.ascent+e-c.y);
if(-1<this.__caretIndex&&b.selectable)if(this.__selectionIndex==this.__caretIndex){if(this.__showCursor&&h.startIndex<=this.__caretIndex&&h.endIndex>=this.__caretIndex){for(var l=g=0,p=this.__caretIndex-h.startIndex;l<p;){var y=l++;if(h.positions.length<=y)break;g+=h.positions[y]}l=0;p=this.get_scrollV();for(y=h.lineIndex+1;p<y;){var r=p++;l+=b.lineHeights.get(r-1)}V.context.beginPath();p=Y.hex(h.format.color&16777215,6);V.context.strokeStyle="#"+p;V.context.moveTo(h.offsetX+g-this.get_scrollH()-
c.x,l+2-c.y);V.context.lineWidth=1;V.context.lineTo(h.offsetX+g-this.get_scrollH()-c.x,l+jb.getFormatHeight(this.get_defaultTextFormat())-1-c.y);V.context.stroke();V.context.closePath()}}else if(h.startIndex<=this.__caretIndex&&h.endIndex>=this.__caretIndex||h.startIndex<=this.__selectionIndex&&h.endIndex>=this.__selectionIndex||h.startIndex>this.__caretIndex&&h.endIndex<this.__selectionIndex||h.startIndex>this.__selectionIndex&&h.endIndex<this.__caretIndex)g=Math.min(this.__selectionIndex,this.__caretIndex)|
0,l=Math.max(this.__selectionIndex,this.__caretIndex)|0,h.startIndex>g&&(g=h.startIndex),h.endIndex<l&&(l=h.endIndex),y=this.getCharBoundaries(g),l>=h.endIndex?(p=this.getCharBoundaries(h.endIndex-1),null!=p&&(p.x+=p.width+2)):p=this.getCharBoundaries(l),null!=y&&null!=p&&(V.context.fillStyle="#000000",V.context.fillRect(y.x+m,y.y+e,p.x-y.x,h.height),V.context.fillStyle="#FFFFFF",V.context.fillText(k.substring(g,l),m+y.x,h.offsetY+h.ascent+e));h.format.underline&&(V.context.beginPath(),V.context.strokeStyle=
n,V.context.lineWidth=1,n=h.offsetX+m-c.x,g=Math.floor(h.offsetY+e+h.ascent-c.y)+.5,V.context.moveTo(n,g),V.context.lineTo(n+h.width,g),V.context.stroke(),V.context.closePath())}}else{if(b.border||b.background)b.border?V.context.rect(.5,.5,c.width-1,c.height-1):V.context.rect(0,0,c.width,c.height),b.background&&(c=Y.hex(b.backgroundColor&16777215,6),V.context.fillStyle="#"+c,V.context.fill()),b.border&&(V.context.lineWidth=1,V.context.lineCap="square",c=Y.hex(b.borderColor&16777215,6),V.context.strokeStyle=
"#"+c,V.context.stroke());if(-1<this.__caretIndex&&b.selectable&&this.__showCursor){c=-this.get_scrollH();m=k=0;for(e=this.get_scrollV()-1;m<e;)f=m++,k+=b.lineHeights.get(f);V.context.beginPath();b=Y.hex(this.get_defaultTextFormat().color&16777215,6);V.context.strokeStyle="#"+b;V.context.moveTo(c+2.5,k+2.5);V.context.lineWidth=1;V.context.lineTo(c+2.5,k+jb.getFormatHeight(this.get_defaultTextFormat())-1);V.context.stroke();V.context.closePath()}}d.__bitmap=Mb.fromCanvas(this.__graphics.__canvas);
d.__visible=!0;this.__dirty=!1;d.__softwareDirty=!1;d.set___dirty(!1)}}d=!1;0==this.__textEngine.antiAliasType&&1==this.__textEngine.gridFitType&&(d=a.context.imageSmoothingEnabled)&&(a.context.imageSmoothingEnabled=!1);if(!(null==this.opaqueBackground&&null==this.__graphics||!this.__renderable||0>=a.__getAlpha(this.__worldAlpha))&&(null!=this.opaqueBackground&&!this.__isCacheBitmapRender&&0<this.get_width()&&0<this.get_height()&&(a.__setBlendMode(this.__worldBlendMode),a.__pushMaskObject(this),b=
a.context,a.setTransform(this.__renderTransform,b),c=this.opaqueBackground,b.fillStyle="rgb("+(c>>>16&255)+","+(c>>>8&255)+","+(c&255)+")",b.fillRect(0,0,this.get_width(),this.get_height()),a.__popMaskObject(this)),null!=this.__graphics&&this.__renderable&&(n=a.__getAlpha(this.__worldAlpha),!(0>=n)&&(h=this.__graphics,null!=h&&(A.render(h,a),k=h.__width,m=h.__height,b=h.__canvas,null!=b&&h.__visible&&1<=k&&1<=m&&(f=h.__worldTransform,c=a.context,g=this.__scrollRect,e=this.__worldScale9Grid,null==
g||0<g.width&&0<g.height)))))){a.__setBlendMode(this.__worldBlendMode);a.__pushMaskObject(this);c.globalAlpha=n;if(null!=e&&0==f.b&&0==f.c){c.setTransform(1,0,0,1,f.tx,f.ty);p=h.__bounds;l=h.__renderTransform.a;var q=h.__renderTransform.d;y=f.a;r=f.d;f=Math.max(1,Math.round(e.x*l));h=Math.round(e.y*q);n=Math.max(1,Math.round((p.get_right()-e.get_right())*l));g=Math.round((p.get_bottom()-e.get_bottom())*q);l=Math.round(e.width*l);q=Math.round(e.height*q);var t=Math.round(e.x*y),z=Math.round(e.y*r),
w=Math.round((p.get_right()-e.get_right())*y);e=Math.round((p.get_bottom()-e.get_bottom())*r);p=Math.round(k*y)-t-w;y=Math.round(m*r)-z-e;a.applySmoothing(c,!1);0!=l&&0!=q?(c.drawImage(b,0,0,f,h,0,0,t,z),c.drawImage(b,f,0,l,h,t,0,p,z),c.drawImage(b,f+l,0,n,h,t+p,0,w,z),c.drawImage(b,0,h,f,q,0,z,t,y),c.drawImage(b,f,h,l,q,t,z,p,y),c.drawImage(b,f+l,h,n,q,t+p,z,w,y),c.drawImage(b,0,h+q,f,g,0,z+y,t,e),c.drawImage(b,f,h+q,l,g,t,z+y,p,e),c.drawImage(b,f+l,h+q,n,g,t+p,z+y,w,e)):0==l&&0!=q?(m=t+p+w,c.drawImage(b,
0,0,k,h,0,0,m,z),c.drawImage(b,0,h,k,q,0,z,m,y),c.drawImage(b,0,h+q,k,g,0,z+y,m,e)):0==q&&0!=l&&(k=z+y+e,c.drawImage(b,0,0,f,m,0,0,t,k),c.drawImage(b,f,0,l,m,t,0,p,k),c.drawImage(b,f+l,0,n,m,t+p,0,w,k))}else a.setTransform(f,c),a.__isDOM&&(e=1/a.pixelRatio,c.scale(e,e)),c.drawImage(b,0,0,k,m);a.__popMaskObject(this)}d&&(a.context.imageSmoothingEnabled=!0)}else d=this.__cacheBitmap,d.__renderable&&(c=a.__getAlpha(d.__worldAlpha),0<c&&null!=d.__bitmapData&&d.__bitmapData.__isValid&&d.__bitmapData.readable&&
(b=a.context,a.__setBlendMode(d.__worldBlendMode),a.__pushMaskObject(d,!1),La.convertToCanvas(d.__bitmapData.image),b.globalAlpha=c,c=d.__scrollRect,a.setTransform(d.__renderTransform,b),a.__allowSmoothing&&d.smoothing||(b.imageSmoothingEnabled=!1),null==c?b.drawImage(d.__bitmapData.image.get_src(),0,0,d.__bitmapData.image.width,d.__bitmapData.image.height):b.drawImage(d.__bitmapData.image.get_src(),c.x,c.y,c.width,c.height),a.__allowSmoothing&&d.smoothing||(b.imageSmoothingEnabled=!0),a.__popMaskObject(d,
!1)))},__renderDOM:function(a){this.__domRender=!0;this.__updateCacheBitmap(a,this.__forceCachedBitmapUpdate);this.__domRender=this.__forceCachedBitmapUpdate=!1;if(null==this.__cacheBitmap||this.__isCacheBitmapRender){this.__renderedOnCanvasWhileOnDOM&&(this.__renderedOnCanvasWhileOnDOM=!1,this.__isHTML&&null!=this.__rawHtmlText&&(this.__updateText(this.__rawHtmlText),this.__layoutDirty=this.__dirty=!0,this.__renderDirty||(this.__renderDirty=!0,this.__setParentRenderDirty())));var b=this,c=b.__textEngine;
if(null!=b.stage&&b.__worldVisible&&b.__renderable){if(b.__dirty||b.__renderTransformChanged||null==b.__div)if(""!=c.text||c.background||c.border||1==c.type){null==b.__div&&(b.__div=window.document.createElement("div"),a.__initializeElement(b,b.__div),b.__style.setProperty("outline","none",null),b.__div.addEventListener("input",function(a){a.preventDefault();b.get_htmlText()!=b.__div.innerHTML&&(b.set_htmlText(b.__div.innerHTML),b.__dirty=!1)},!0));c.wordWrap?b.__style.setProperty("word-wrap","break-word",
null):b.__style.setProperty("white-space","nowrap",null);b.__style.setProperty("overflow","hidden",null);c.selectable?(b.__style.setProperty("cursor","text",null),b.__style.setProperty("-webkit-user-select","text",null),b.__style.setProperty("-moz-user-select","text",null),b.__style.setProperty("-ms-user-select","text",null),b.__style.setProperty("-o-user-select","text",null)):b.__style.setProperty("cursor","inherit",null);b.__div.contentEditable=1==c.type;var d=b.__style;c.background?d.setProperty("background-color",
"#"+Y.hex(c.backgroundColor&16777215,6),null):d.removeProperty("background-color");var e=c.width,f=c.height,k=1,m=b.__textFormat.size,h=m,n=b.__renderTransform;if(1!=n.a||1!=n.d)n.a==n.d?(k=n.a,n.a=n.d=1):n.a>n.d?(k=n.a,n.d/=n.a,n.a=1):(k=n.d,n.a/=n.d,n.d=1),h*=k,e=Math.ceil(e*k),f=Math.ceil(f*k);b.__textFormat.size=h;n=c.text;var g=0;if(b.__isHTML){for(var l=n;gb.__regexFont.match(l);){l=gb.__regexFont.matched(0);var p="";gb.__regexFace.match(l)&&(p+="font-family:'"+gb.__getAttributeMatch(gb.__regexFace)+
"';");gb.__regexColor.match(l)&&(p+="color:#"+gb.__getAttributeMatch(gb.__regexColor)+";");if(gb.__regexSize.match(l)){g=gb.__getAttributeMatch(gb.__regexSize);var y=ra.cca(g,0);g=parseFloat(g)*k;p+="font-size:"+(43==y||45==y?h+g:g)+"px;"}n=Y.replace(n,l,"<span style='"+p+"'>");l=gb.__regexFont.matchedRight()}n=n.replace(gb.__regexCloseFont.r,"</span>")}else n=Y.htmlEscape(n);n=Y.replace(n,"<p ","<p style='margin-top:0; margin-bottom:0;' ");k=b.__textFormat.leading;b.__textFormat.leading+=g|0;h=n.replace(/\r\n/g,
"<br>");b.__div.innerHTML=h;h=b.__div.innerHTML.replace(/\n/g,"<br>");b.__div.innerHTML=h;h=b.__div.innerHTML.replace(/\r/g,"<br>");b.__div.innerHTML=h;d.setProperty("font",jb.getFont(b.__textFormat),null);b.__textFormat.size=m;b.__textFormat.leading=k;d.setProperty("top","3px",null);c.border?(d.setProperty("border","solid 1px #"+Y.hex(c.borderColor&16777215,6),null),b.__renderTransform.translate(-1,-1),b.__renderTransformChanged=!0,b.__transformDirty=!0):""!=d.border&&(d.removeProperty("border"),
b.__renderTransformChanged=!0);d.setProperty("color","#"+Y.hex(b.__textFormat.color&16777215,6),null);d.setProperty("width",e+"px",null);d.setProperty("height",f+"px",null);switch(b.__textFormat.align){case 0:d.setProperty("text-align","center",null);break;case 4:d.setProperty("text-align","right",null);break;default:d.setProperty("text-align","left",null)}b.__dirty=!1}else null!=b.__div&&(a.element.removeChild(b.__div),b.__div=null);null!=b.__div&&(c=a.__roundPixels,a.__roundPixels=!0,a.__updateClip(b),
a.__applyStyle(b,!0,!0,!0),a.__roundPixels=c)}else gb.clear(b,a)}else this.__renderDOMClear(a),this.__cacheBitmap.stage=this.stage,c=this.__cacheBitmap,null!=c.stage&&c.__worldVisible&&c.__renderable&&null!=c.__bitmapData&&c.__bitmapData.__isValid&&c.__bitmapData.readable?(a.__pushMaskObject(c),null!=c.__bitmapData.image.buffer.__srcImage?Lb.renderImage(c,a):Lb.renderCanvas(c,a),a.__popMaskObject(c)):Lb.clear(c,a);this.__renderEvent(a)},__renderDOMClear:function(a){gb.clear(this,a)},__renderGL:function(a){this.__updateCacheBitmap(a,
!1);if(null==this.__cacheBitmap||this.__isCacheBitmapRender){if(ak.render(this,a),!(null==this.opaqueBackground&&null==this.__graphics||!this.__renderable||0>=this.__worldAlpha)){if(null!=this.opaqueBackground&&!this.__isCacheBitmapRender&&0<this.get_width()&&0<this.get_height()){a.__setBlendMode(this.__worldBlendMode);a.__pushMaskObject(this);var b=a.__context3D,c=ya.__pool.get();c.setTo(0,0,this.get_width(),this.get_height());a.__pushMaskRect(c,this.__renderTransform);var d=this.opaqueBackground;
b.clear((d>>>16&255)/255,(d>>>8&255)/255,(d&255)/255,1,0,0,1);a.__popMaskRect();a.__popMaskObject(this);ya.__pool.release(c)}null!=this.__graphics&&Te.render(this,a)}}else df.render(this.__cacheBitmap,a);this.__renderEvent(a)},__renderGLMask:function(a){ak.renderMask(this,a);fa.prototype.__renderGLMask.call(this,a)},__replaceSelectedText:function(a,b){null==b&&(b=!0);null==a&&(a="");if(""!=a||this.__selectionIndex!=this.__caretIndex){var c=this.__caretIndex<this.__selectionIndex?this.__caretIndex:
this.__selectionIndex,d=this.__caretIndex>this.__selectionIndex?this.__caretIndex:this.__selectionIndex;if(!(c==d&&0<this.__textEngine.maxChars&&this.__text.length==this.__textEngine.maxChars)){c>this.__text.length&&(c=this.__text.length);d>this.__text.length&&(d=this.__text.length);if(d<c){var e=d;d=c;c=e}0>c&&(c=0);this.__replaceText(c,d,a,b);a=c+Ka.__cast(a,String).length;a>this.__text.length&&(a=this.__text.length);this.setSelection(a,a);this.__updateScrollH()}}},__replaceText:function(a,b,c,
d){if(!(b<a||0>a||b>this.__text.length||null==c)){d&&(c=this.__textEngine.restrictText(c),0<this.__textEngine.maxChars&&(d=this.__textEngine.maxChars-this.__text.length+(b-a),0>=d?c="":d<c.length&&(c=ra.substr(c,0,d))));this.__updateText(this.__text.substring(0,a)+c+this.__text.substring(b));b>this.__text.length&&(b=this.__text.length);d=c.length-(b-a);for(var e=0,f;e<this.__textEngine.textFormatRanges.get_length();)f=this.__textEngine.textFormatRanges.get(e),f.start<=a&&f.end>=b?(f.end+=d,++e):f.start>=
a&&f.end<=b?(0<e?this.__textEngine.textFormatRanges.splice(e,1):(f.start=0,f.end=a+c.length,++e),d-=f.end-f.start):(f.start>a&&f.start<=b&&(f.start+=d),++e);this.__updateScrollV();this.__updateScrollH();this.__layoutDirty=this.__dirty=!0;this.__renderDirty||(this.__renderDirty=!0,this.__setParentRenderDirty())}},__shouldCacheHardware:function(a){return 1==a?!0:!1},__startCursorTimer:function(){this.__cursorTimer=Ne.delay(u(this,this.__startCursorTimer),600);this.__showCursor=!this.__showCursor;this.__dirty=
!0;this.__renderDirty||(this.__renderDirty=!0,this.__setParentRenderDirty())},__startTextInput:function(){0>this.__caretIndex&&(this.__selectionIndex=this.__caretIndex=this.__text.length);(ba.__supportDOM?this.__renderedOnCanvasWhileOnDOM:1)&&this.__enableInput()},__stopCursorTimer:function(){null!=this.__cursorTimer&&(this.__cursorTimer.stop(),this.__cursorTimer=null);this.__showCursor&&(this.__showCursor=!1,this.__dirty=!0,this.__renderDirty||(this.__renderDirty=!0,this.__setParentRenderDirty()))},
__stopTextInput:function(){(ba.__supportDOM?this.__renderedOnCanvasWhileOnDOM:1)&&this.__disableInput()},__updateCacheBitmap:function(a,b){return null!=this.__filters||"opengl"!=a.__type||null!=this.__cacheBitmap||this.__domRender?fa.prototype.__updateCacheBitmap.call(this,a,b||this.__dirty)?(null!=this.__cacheBitmap&&(this.__cacheBitmap.__renderTransform.tx-=this.__offsetX,this.__cacheBitmap.__renderTransform.ty-=this.__offsetY),!0):!1:!1},__updateLayout:function(){if(this.__layoutDirty){var a=this.__textEngine.width;
this.__textEngine.update();if(2!=this.__textEngine.autoSize){if(this.__textEngine.width!=a)switch(this.__textEngine.autoSize){case 0:this.set_x(this.get_x()+(a-this.__textEngine.width)/2);break;case 3:this.set_x(this.get_x()+(a-this.__textEngine.width))}this.__textEngine.getBounds()}this.__layoutDirty=!1}},__updateScrollH:function(){if(!this.get_multiline()&&1==this.get_type()){this.__layoutDirty=!0;this.__updateLayout();var a=this.__textEngine.textWidth-this.__textEngine.width+4;0<a?this.__caretIndex>=
this.get_text().length?this.set_scrollH(Math.ceil(a)):(a=ya.__pool.get(),this.__getCharBoundaries(this.__caretIndex,a),a.x<this.get_scrollH()?this.set_scrollH(Math.floor(a.x-2)):a.x>this.get_scrollH()+this.__textEngine.width&&this.set_scrollH(Math.ceil(a.x-this.__textEngine.width-2)),ya.__pool.release(a)):this.set_scrollH(0)}},__updateScrollV:function(){this.__layoutDirty=!0;this.__updateLayout();var a=this.getLineIndexOfChar(this.__caretIndex);-1==a&&0<this.__caretIndex&&(a=this.getLineIndexOfChar(this.__caretIndex-
1)+1);if(a+1<this.get_scrollV())this.set_scrollV(a+1);else if(a+1>this.get_bottomScrollV()){for(var b=0;0<=a;)if(b+this.__textEngine.lineHeights.get(a)<=this.get_height()-4)b+=this.__textEngine.lineHeights.get(a),--a;else break;this.set_scrollV(a+2)}else this.set_scrollV(this.get_scrollV())},__updateText:function(a){ba.__supportDOM&&this.__renderedOnCanvasWhileOnDOM&&(this.__forceCachedBitmapUpdate=this.__text!=a);this.__textEngine.set_text(a);this.__text=this.__textEngine.text;this.__text.length<
this.__caretIndex&&(this.__selectionIndex=this.__caretIndex=this.__text.length);if(!this.__displayAsPassword||ba.__supportDOM&&!this.__renderedOnCanvasWhileOnDOM)this.__textEngine.set_text(this.__text);else{a="";for(var b=0,c=this.get_text().length;b<c;)b++,a+="*";this.__textEngine.set_text(a)}},__updateTransforms:function(a){fa.prototype.__updateTransforms.call(this,a);a=this.__renderTransform;var b=this.__offsetX,c=this.__offsetY;a.tx=b*a.a+c*a.c+a.tx;a.ty=b*a.b+c*a.d+a.ty},set_background:function(a){a!=
this.__textEngine.background&&(this.__dirty=!0,this.__renderDirty||(this.__renderDirty=!0,this.__setParentRenderDirty()));return this.__textEngine.background=a},set_border:function(a){a!=this.__textEngine.border&&(this.__dirty=!0,this.__renderDirty||(this.__renderDirty=!0,this.__setParentRenderDirty()));return this.__textEngine.border=a},get_bottomScrollV:function(){this.__updateLayout();return this.__textEngine.get_bottomScrollV()},get_defaultTextFormat:function(){return this.__textFormat.clone()},
set_defaultTextFormat:function(a){this.__textFormat.__merge(a);this.__dirty=this.__layoutDirty=!0;this.__renderDirty||(this.__renderDirty=!0,this.__setParentRenderDirty());return a},set_displayAsPassword:function(a){a!=this.__displayAsPassword&&(this.__layoutDirty=this.__dirty=!0,this.__renderDirty||(this.__renderDirty=!0,this.__setParentRenderDirty()),this.__displayAsPassword=a,this.__updateText(this.__text));return a},set_embedFonts:function(a){return this.__textEngine.embedFonts=a},get_height:function(){this.__updateLayout();
return this.__textEngine.height*Math.abs(this.get_scaleY())},set_height:function(a){a!=this.__textEngine.height&&(this.__setTransformDirty(),this.__layoutDirty=this.__dirty=!0,this.__renderDirty||(this.__renderDirty=!0,this.__setParentRenderDirty()),this.__textEngine.height=a);return this.__textEngine.height*Math.abs(this.get_scaleY())},get_htmlText:function(){return this.__isHTML?this.__rawHtmlText:this.__text},set_htmlText:function(a){this.__isHTML&&this.__text==a||(this.__layoutDirty=this.__dirty=
!0,this.__renderDirty||(this.__renderDirty=!0,this.__setParentRenderDirty()));this.__isHTML=!0;this.__rawHtmlText=a;a=Oa.parse(a,this.__textFormat,this.__textEngine.textFormatRanges);if(ba.__supportDOM){1<this.__textEngine.textFormatRanges.get_length()&&this.__textEngine.textFormatRanges.splice(1,this.__textEngine.textFormatRanges.get_length()-1);var b=this.__textEngine.textFormatRanges.get(0);b.format=this.__textFormat;b.start=0;this.__renderedOnCanvasWhileOnDOM?(b.end=a.length,this.__updateText(a)):
(b.end=this.__rawHtmlText.length,this.__updateText(this.__rawHtmlText))}else this.__updateText(a);this.__updateScrollV();return a},get_mouseWheelEnabled:function(){return this.__mouseWheelEnabled},get_multiline:function(){return this.__textEngine.multiline},set_multiline:function(a){a!=this.__textEngine.multiline&&(this.__layoutDirty=this.__dirty=!0,this.__updateText(this.__text),this.__updateScrollH(),this.__renderDirty||(this.__renderDirty=!0,this.__setParentRenderDirty()));return this.__textEngine.multiline=
a},get_scrollH:function(){return this.__textEngine.scrollH},set_scrollH:function(a){this.__updateLayout();a>this.__textEngine.maxScrollH&&(a=this.__textEngine.maxScrollH);0>a&&(a=0);a!=this.__textEngine.scrollH&&(this.__dirty=!0,this.__renderDirty||(this.__renderDirty=!0,this.__setParentRenderDirty()),this.dispatchEvent(new R("scroll")));return this.__textEngine.scrollH=a},get_scrollV:function(){return this.__textEngine.get_scrollV()},set_scrollV:function(a){this.__updateLayout();a!=this.__textEngine.get_scrollV()&&
(this.__dirty=!0,this.__renderDirty||(this.__renderDirty=!0,this.__setParentRenderDirty()),this.dispatchEvent(new R("scroll")));return this.__textEngine.set_scrollV(a)},get_selectable:function(){return this.__textEngine.selectable},set_selectable:function(a){a!=this.__textEngine.selectable&&1==this.get_type()&&(null!=this.stage&&this.stage.get_focus()==this?this.__startTextInput():a||this.__stopTextInput());return this.__textEngine.selectable=a},get_tabEnabled:function(){return null==this.__tabEnabled?
1==this.__textEngine.type:this.__tabEnabled},get_text:function(){return this.__text},set_text:function(a){if(this.__isHTML||this.__text!=a)this.__layoutDirty=this.__dirty=!0,this.__renderDirty||(this.__renderDirty=!0,this.__setParentRenderDirty());else return a;1<this.__textEngine.textFormatRanges.get_length()&&this.__textEngine.textFormatRanges.splice(1,this.__textEngine.textFormatRanges.get_length()-1);var b=this.__textEngine.textFormatRanges.get(0);b.format=this.__textFormat;b.start=0;b.end=a.length;
this.__isHTML=!1;this.__updateText(a);this.__updateScrollV();return a},get_type:function(){return this.__textEngine.type},set_type:function(a){a!=this.__textEngine.type&&(1==a?(this.addEventListener("addedToStage",u(this,this.this_onAddedToStage)),this.this_onFocusIn(null),this.__textEngine.__useIntAdvances=!0):(this.removeEventListener("addedToStage",u(this,this.this_onAddedToStage)),this.__stopTextInput(),this.__textEngine.__useIntAdvances=null),this.__layoutDirty=this.__dirty=!0,this.__renderDirty||
(this.__renderDirty=!0,this.__setParentRenderDirty()));return this.__textEngine.type=a},get_width:function(){this.__updateLayout();return this.__textEngine.width*Math.abs(this.__scaleX)},set_width:function(a){a!=this.__textEngine.width&&(this.__setTransformDirty(),this.__layoutDirty=this.__dirty=!0,this.__renderDirty||(this.__renderDirty=!0,this.__setParentRenderDirty()),this.__textEngine.width=a);return this.__textEngine.width*Math.abs(this.__scaleX)},set_wordWrap:function(a){a!=this.__textEngine.wordWrap&&
(this.__layoutDirty=this.__dirty=!0,this.__renderDirty||(this.__renderDirty=!0,this.__setParentRenderDirty()));return this.__textEngine.wordWrap=a},get_x:function(){return this.__transform.tx+this.__offsetX},set_x:function(a){a!=this.__transform.tx+this.__offsetX&&this.__setTransformDirty();return this.__transform.tx=a-this.__offsetX},get_y:function(){return this.__transform.ty+this.__offsetY},set_y:function(a){a!=this.__transform.ty+this.__offsetY&&this.__setTransformDirty();return this.__transform.ty=
a-this.__offsetY},stage_onMouseMove:function(a){null!=this.stage&&this.__textEngine.selectable&&0<=this.__selectionIndex&&(this.__updateLayout(),a=this.__getPosition(this.get_mouseX()+this.get_scrollH(),this.get_mouseY()),a!=this.__caretIndex&&(this.__caretIndex=a,ba.__supportDOM?this.__renderedOnCanvasWhileOnDOM&&(this.__forceCachedBitmapUpdate=!0):(this.__dirty=!0,this.__renderDirty||(this.__renderDirty=!0,this.__setParentRenderDirty()))))},stage_onMouseUp:function(a){if(null!=this.stage&&(this.stage.removeEventListener("mouseMove",
u(this,this.stage_onMouseMove)),this.stage.removeEventListener("mouseUp",u(this,this.stage_onMouseUp)),this.stage.get_focus()==this)){this.__getWorldTransform();this.__updateLayout();a=this.__getPosition(this.get_mouseX()+this.get_scrollH(),this.get_mouseY());var b=Math.max(this.__selectionIndex,a)|0;this.__selectionIndex=Math.min(this.__selectionIndex,a)|0;this.__caretIndex=b;this.__inputEnabled&&(this.this_onFocusIn(null),this.__stopCursorTimer(),this.__startCursorTimer(),ba.__supportDOM&&this.__renderedOnCanvasWhileOnDOM&&
(this.__forceCachedBitmapUpdate=!0))}},this_onAddedToStage:function(a){this.this_onFocusIn(null)},this_onFocusIn:function(a){1==this.get_type()&&null!=this.stage&&this.stage.get_focus()==this&&this.__startTextInput()},this_onFocusOut:function(a){this.__stopCursorTimer();null!=a.relatedObject&&a.relatedObject instanceof rc?(null!=this.stage&&(this.stage.window.onTextInput.remove(u(this,this.window_onTextInput)),this.stage.window.onKeyDown.remove(u(this,this.window_onKeyDown))),this.__inputEnabled=
!1):this.__stopTextInput();this.__selectionIndex!=this.__caretIndex&&(this.__selectionIndex=this.__caretIndex,this.__dirty=!0,this.__renderDirty||(this.__renderDirty=!0,this.__setParentRenderDirty()))},this_onKeyDown:function(a){this.get_selectable()&&1!=this.get_type()&&67==a.keyCode&&(a.commandKey||a.ctrlKey)&&this.__caretIndex!=this.__selectionIndex&&Mc.set_text(this.__text.substring(this.__caretIndex,this.__selectionIndex))},this_onMouseDown:function(a){if(this.get_selectable()||1==this.get_type())this.__updateLayout(),
this.__selectionIndex=this.__caretIndex=this.__getPosition(this.get_mouseX()+this.get_scrollH(),this.get_mouseY()),ba.__supportDOM||(this.__dirty=!0,this.__renderDirty||(this.__renderDirty=!0,this.__setParentRenderDirty())),this.stage.addEventListener("mouseMove",u(this,this.stage_onMouseMove)),this.stage.addEventListener("mouseUp",u(this,this.stage_onMouseUp))},this_onMouseWheel:function(a){this.get_mouseWheelEnabled()&&this.set_scrollV(this.get_scrollV()-a.delta)},window_onKeyDown:function(a,b){switch(a){case 8:this.__selectionIndex==
this.__caretIndex&&0<this.__caretIndex&&(this.__selectionIndex=this.__caretIndex-1);this.__selectionIndex!=this.__caretIndex&&(this.replaceSelectedText(""),this.__selectionIndex=this.__caretIndex,this.dispatchEvent(new R("change",!0)));break;case 97:this.get_selectable()&&(fb.get_metaKey(b)||fb.get_ctrlKey(b))&&(this.__caretIndex=this.__text.length,this.__selectionIndex=0);break;case 99:(fb.get_metaKey(b)||fb.get_ctrlKey(b))&&this.__caretIndex!=this.__selectionIndex&&Mc.set_text(this.__text.substring(this.__caretIndex,
this.__selectionIndex));break;case 120:(fb.get_metaKey(b)||fb.get_ctrlKey(b))&&this.__caretIndex!=this.__selectionIndex&&(Mc.set_text(this.__text.substring(this.__caretIndex,this.__selectionIndex)),this.replaceSelectedText(""),this.dispatchEvent(new R("change",!0)));break;case 127:this.__selectionIndex==this.__caretIndex&&this.__caretIndex<this.__text.length&&(this.__selectionIndex=this.__caretIndex+1);this.__selectionIndex!=this.__caretIndex&&(this.replaceSelectedText(""),this.__selectionIndex=this.__caretIndex,
this.dispatchEvent(new R("change",!0)));break;case 1073741898:this.get_selectable()&&(this.__caretBeginningOfLine(),this.__stopCursorTimer(),this.__startCursorTimer());break;case 1073741901:this.get_selectable()&&(this.__caretEndOfLine(),this.__stopCursorTimer(),this.__startCursorTimer());break;case 1073741903:this.get_selectable()&&(fb.get_metaKey(b)?(this.__caretEndOfLine(),fb.get_shiftKey(b)||(this.__selectionIndex=this.__caretIndex)):fb.get_shiftKey(b)?this.__caretNextCharacter():(this.__selectionIndex==
this.__caretIndex?this.__caretNextCharacter():this.__caretIndex=Math.max(this.__caretIndex,this.__selectionIndex)|0,this.__selectionIndex=this.__caretIndex),this.__updateScrollH(),this.__updateScrollV(),this.__stopCursorTimer(),this.__startCursorTimer());break;case 1073741904:this.get_selectable()&&(fb.get_metaKey(b)?(this.__caretBeginningOfLine(),fb.get_shiftKey(b)||(this.__selectionIndex=this.__caretIndex)):fb.get_shiftKey(b)?this.__caretPreviousCharacter():(this.__selectionIndex==this.__caretIndex?
this.__caretPreviousCharacter():this.__caretIndex=Math.min(this.__caretIndex,this.__selectionIndex)|0,this.__selectionIndex=this.__caretIndex),this.__updateScrollH(),this.__updateScrollV(),this.__stopCursorTimer(),this.__startCursorTimer());break;case 1073741905:this.get_selectable()&&this.__textEngine.multiline&&(fb.get_shiftKey(b)?this.__caretNextLine():(this.__selectionIndex==this.__caretIndex?this.__caretNextLine():(a=this.getLineIndexOfChar(Math.max(this.__caretIndex,this.__selectionIndex)|0),
this.__caretNextLine(a,Math.min(this.__caretIndex,this.__selectionIndex)|0)),this.__selectionIndex=this.__caretIndex),this.__updateScrollV(),this.__stopCursorTimer(),this.__startCursorTimer());break;case 1073741906:this.get_selectable()&&this.__textEngine.multiline&&(fb.get_shiftKey(b)?this.__caretPreviousLine():(this.__selectionIndex==this.__caretIndex?this.__caretPreviousLine():(a=this.getLineIndexOfChar(Math.min(this.__caretIndex,this.__selectionIndex)|0),this.__caretPreviousLine(a,Math.min(this.__caretIndex,
this.__selectionIndex)|0)),this.__selectionIndex=this.__caretIndex),this.__updateScrollV(),this.__stopCursorTimer(),this.__startCursorTimer());break;case 13:case 1073741912:this.__textEngine.multiline&&(a=new td("textInput",!0,!0,"\n"),this.dispatchEvent(a),a.isDefaultPrevented()||(this.__replaceSelectedText("\n",!0),this.dispatchEvent(new R("change",!0))))}},window_onTextInput:function(a){this.__replaceSelectedText(a,!0);this.dispatchEvent(new R("change",!0))},__class__:rc});var gg=function(a,b,
c){null==c&&(c=0);null==b&&(b=10);null==a&&(a=10);rc.call(this);this.set_x(a);this.set_y(b);this.currentFPS=0;this.set_selectable(!1);this.mouseEnabled=!1;this.set_defaultTextFormat(new zh("_sans",12,c));this.set_text("FPS: ");this.currentTime=this.cacheCount=0;this.times=[]};g["openfl.display.FPS"]=gg;gg.__name__="openfl.display.FPS";gg.__super__=rc;gg.prototype=v(rc.prototype,{currentFPS:null,cacheCount:null,currentTime:null,times:null,__enterFrame:function(a){this.currentTime+=a;for(this.times.push(this.currentTime);this.times[0]<
this.currentTime-1E3;)this.times.shift();a=this.times.length;this.currentFPS=Math.round((a+this.cacheCount)/2);a!=this.cacheCount&&this.set_text("FPS: "+this.currentFPS);this.cacheCount=a},__class__:gg});var Zi=function(a,b){aa.call(this);this.__name=a;this.__frame=b};g["openfl.display.FrameLabel"]=Zi;Zi.__name__="openfl.display.FrameLabel";Zi.__super__=aa;Zi.prototype=v(aa.prototype,{__frame:null,__name:null,get_frame:function(){return this.__frame},get_name:function(){return this.__name},__class__:Zi});
var pc=function(a){this.__dirty=!0;this.__owner=a;this.__commands=new Yc;this.__positionY=this.__positionX=this.__strokePadding=0;this.__renderTransform=new va;this.__usedShaderBuffers=new ia;this.__worldTransform=new va;this.__height=this.__width=0;this.__shaderBufferPool=new ua(function(){return new Yj});this.moveTo(0,0)};g["openfl.display.Graphics"]=pc;pc.__name__="openfl.display.Graphics";pc.prototype={__bounds:null,__commands:null,__dirty:null,__hardwareDirty:null,__height:null,__positionX:null,
__positionY:null,__quadBuffer:null,__renderTransform:null,__shaderBufferPool:null,__softwareDirty:null,__strokePadding:null,__transformDirty:null,__triangleIndexBuffer:null,__triangleIndexBufferCount:null,__triangleIndexBufferData:null,__usedShaderBuffers:null,__vertexBuffer:null,__vertexBufferCount:null,__vertexBufferCountUVT:null,__vertexBufferData:null,__vertexBufferDataUVT:null,__vertexBufferUVT:null,__visible:null,__owner:null,__width:null,__worldTransform:null,__canvas:null,__context:null,__bitmap:null,
beginBitmapFill:function(a,b,c,d){null==d&&(d=!1);null==c&&(c=!0);this.__commands.beginBitmapFill(a,null!=b?b.clone():null,c,d);this.__visible=!0},beginFill:function(a,b){null==b&&(b=1);null==a&&(a=0);this.__commands.beginFill(a&16777215,b);0<b&&(this.__visible=!0)},beginGradientFill:function(a,b,c,d,e,f,k,m){null==m&&(m=0);null==k&&(k=1);null==f&&(f=0);if(null!=b&&0!=b.length){if(null==c){c=[];for(var h=0,n=b.length;h<n;)h++,c.push(1)}if(null==d)for(d=[],h=0,n=b.length;h<n;){var g=h++;d.push(Math.ceil(g/
b.length*255))}if(!(c.length<b.length||d.length<b.length))for(this.__commands.beginGradientFill(a,b,c,d,e,f,k,m),a=0;a<c.length;)if(b=c[a],++a,0<b){this.__visible=!0;break}}},clear:function(){for(var a=this.__usedShaderBuffers.h;null!=a;){var b=a.item;a=a.next;this.__shaderBufferPool.release(b)}this.__usedShaderBuffers.clear();this.__commands.clear();this.__strokePadding=0;null!=this.__bounds&&(this.set___dirty(!0),this.__transformDirty=!0,this.__bounds=null);this.__visible=!1;this.__positionY=this.__positionX=
0;this.moveTo(0,0)},copyFrom:function(a){this.__bounds=null!=a.__bounds?a.__bounds.clone():null;this.__commands=a.__commands.copy();this.set___dirty(!0);this.__strokePadding=a.__strokePadding;this.__positionX=a.__positionX;this.__positionY=a.__positionY;this.__transformDirty=!0;this.__visible=a.__visible},curveTo:function(a,b,c,d){this.__inflateBounds(this.__positionX-this.__strokePadding,this.__positionY-this.__strokePadding);this.__inflateBounds(this.__positionX+this.__strokePadding,this.__positionY+
this.__strokePadding);var e=a<c&&a>this.__positionX||a>c&&a<this.__positionX?c:this.__calculateBezierQuadPoint((this.__positionX-a)/(this.__positionX-2*a+c),this.__positionX,a,c);var f=b<d&&b>this.__positionY||b>d&&b<this.__positionY?d:this.__calculateBezierQuadPoint((this.__positionY-b)/(this.__positionY-2*b+d),this.__positionY,b,d);this.__inflateBounds(e-this.__strokePadding,f-this.__strokePadding);this.__inflateBounds(e+this.__strokePadding,f+this.__strokePadding);this.__positionX=c;this.__positionY=
d;this.__commands.curveTo(a,b,c,d);this.set___dirty(!0)},drawRect:function(a,b,c,d){if(0!=c||0!=d){var e=0>c?-1:1,f=0>d?-1:1;this.__inflateBounds(a-this.__strokePadding*e,b-this.__strokePadding*f);this.__inflateBounds(a+c+this.__strokePadding*e,b+d+this.__strokePadding*f);this.__commands.drawRect(a,b,c,d);this.set___dirty(!0)}},endFill:function(){this.__commands.endFill()},lineStyle:function(a,b,c,d,e,f,k,m){null==m&&(m=3);null==e&&(e=2);null==d&&(d=!1);null==c&&(c=1);null==b&&(b=0);null!=a&&(1==
k?a>this.__strokePadding&&(this.__strokePadding=a):a/2>this.__strokePadding&&(this.__strokePadding=a/2));this.__commands.lineStyle(a,b,c,d,e,f,k,m);null!=a&&(this.__visible=!0)},lineTo:function(a,b){isFinite(a)&&isFinite(b)&&(this.__inflateBounds(this.__positionX-this.__strokePadding,this.__positionY-this.__strokePadding),this.__inflateBounds(this.__positionX+this.__strokePadding,this.__positionY+this.__strokePadding),this.__positionX=a,this.__positionY=b,this.__inflateBounds(this.__positionX-this.__strokePadding,
this.__positionY-this.__strokePadding),this.__inflateBounds(this.__positionX+2*this.__strokePadding,this.__positionY+this.__strokePadding),this.__commands.lineTo(a,b),this.set___dirty(!0))},moveTo:function(a,b){this.__positionX=a;this.__positionY=b;this.__commands.moveTo(a,b)},__calculateBezierQuadPoint:function(a,b,c,d){var e=1-a;return e*e*b+2*e*a*c+a*a*d},__cleanup:function(){null!=this.__bounds&&null!=this.__canvas&&(this.set___dirty(!0),this.__transformDirty=!0);this.__context=this.__canvas=
this.__bitmap=null},__getBounds:function(a,b){if(null!=this.__bounds){var c=ya.__pool.get();this.__bounds.__transform(c,b);a.__expand(c.x,c.y,c.width,c.height);ya.__pool.release(c)}},__hitTest:function(a,b,c,d){if(null==this.__bounds)return!1;var e=d.a*d.d-d.b*d.c;e=0==e?-d.tx:1/e*(d.c*(d.ty-b)+d.d*(a-d.tx));var f=d.a*d.d-d.b*d.c;a=0==f?-d.ty:1/f*(d.a*(b-d.ty)+d.b*(d.tx-a));return e>this.__bounds.x&&a>this.__bounds.y&&this.__bounds.contains(e,a)?c?A.hitTest(this,e,a):!0:!1},__inflateBounds:function(a,
b){null==this.__bounds?(this.__bounds=new ya(a,b,0,0),this.__transformDirty=!0):(a<this.__bounds.x&&(this.__bounds.width+=this.__bounds.x-a,this.__bounds.x=a,this.__transformDirty=!0),b<this.__bounds.y&&(this.__bounds.height+=this.__bounds.y-b,this.__bounds.y=b,this.__transformDirty=!0),a>this.__bounds.x+this.__bounds.width&&(this.__bounds.width=a-this.__bounds.x),b>this.__bounds.y+this.__bounds.height&&(this.__bounds.height=b-this.__bounds.y))},__update:function(a){if(!(null==this.__bounds||0>=this.__bounds.width||
0>=this.__bounds.height)){var b=this.__owner.__renderTransform;if(null!=b){var c=0==b.b?Math.abs(b.a):Math.sqrt(b.a*b.a+b.b*b.b);var d=0==b.c?Math.abs(b.d):Math.sqrt(b.c*b.c+b.d*b.d);null!=a&&(c=0==a.b?c*a.a:c*Math.sqrt(a.a*a.a+a.b*a.b),d=0==a.c?d*a.d:d*Math.sqrt(a.c*a.c+a.d*a.d));a=this.__bounds.width*c;d*=this.__bounds.height;if(1>a||1>d)(1<=this.__width||1<=this.__height)&&this.set___dirty(!0),this.__height=this.__width=0;else{null!=pc.maxTextureWidth&&a>pc.maxTextureWidth&&(a=pc.maxTextureWidth);
null!=pc.maxTextureWidth&&d>pc.maxTextureHeight&&(d=pc.maxTextureHeight);this.__renderTransform.a=a/this.__bounds.width;this.__renderTransform.d=d/this.__bounds.height;c=1/this.__renderTransform.a;var e=1/this.__renderTransform.d;this.__worldTransform.a=c*b.a;this.__worldTransform.b=c*b.b;this.__worldTransform.c=e*b.c;this.__worldTransform.d=e*b.d;e=this.__bounds.x;var f=this.__bounds.y;c=e*b.a+f*b.c+b.tx;b=e*b.b+f*b.d+b.ty;this.__worldTransform.tx=Math.floor(c);this.__worldTransform.ty=Math.floor(b);
e=this.__worldTransform;f=e.a*e.d-e.b*e.c;this.__renderTransform.tx=0==f?-e.tx:1/f*(e.c*(e.ty-b)+e.d*(c-e.tx));e=this.__worldTransform;f=e.a*e.d-e.b*e.c;this.__renderTransform.ty=0==f?-e.ty:1/f*(e.a*(b-e.ty)+e.b*(e.tx-c));a=Math.ceil(a+1);d=Math.ceil(d+1);a==this.__width&&d==this.__height||this.set___dirty(!0);this.__width=a;this.__height=d}}}},set___dirty:function(a){if(a&&null!=this.__owner){var b=this.__owner;b.__renderDirty||(b.__renderDirty=!0,b.__setParentRenderDirty())}a&&(this.__hardwareDirty=
this.__softwareDirty=!0);return this.__dirty=a},__class__:pc};var Uk=function(a){null==this.__glFragmentSource&&(this.__glFragmentSource="varying float openfl_Alphav;\n\t\tvarying vec4 openfl_ColorMultiplierv;\n\t\tvarying vec4 openfl_ColorOffsetv;\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform bool openfl_HasColorTransform;\n\t\tuniform vec2 openfl_TextureSize;\n\t\tuniform sampler2D bitmap;\n\n\t\tvoid main(void) {\n\n\t\t\tvec4 color = texture2D (bitmap, openfl_TextureCoordv);\n\n\t\tif (color.a == 0.0) {\n\n\t\t\tgl_FragColor = vec4 (0.0, 0.0, 0.0, 0.0);\n\n\t\t} else if (openfl_HasColorTransform) {\n\n\t\t\tcolor = vec4 (color.rgb / color.a, color.a);\n\n\t\t\tmat4 colorMultiplier = mat4 (0);\n\t\t\tcolorMultiplier[0][0] = openfl_ColorMultiplierv.x;\n\t\t\tcolorMultiplier[1][1] = openfl_ColorMultiplierv.y;\n\t\t\tcolorMultiplier[2][2] = openfl_ColorMultiplierv.z;\n\t\t\tcolorMultiplier[3][3] = 1.0; // openfl_ColorMultiplierv.w;\n\n\t\t\tcolor = clamp (openfl_ColorOffsetv + (color * colorMultiplier), 0.0, 1.0);\n\n\t\t\tif (color.a > 0.0) {\n\n\t\t\t\tgl_FragColor = vec4 (color.rgb * color.a * openfl_Alphav, color.a * openfl_Alphav);\n\n\t\t\t} else {\n\n\t\t\t\tgl_FragColor = vec4 (0.0, 0.0, 0.0, 0.0);\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tgl_FragColor = color * openfl_Alphav;\n\n\t\t}\n\n\t\t}");
null==this.__glVertexSource&&(this.__glVertexSource="attribute float openfl_Alpha;\n\t\tattribute vec4 openfl_ColorMultiplier;\n\t\tattribute vec4 openfl_ColorOffset;\n\t\tattribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\n\t\tvarying float openfl_Alphav;\n\t\tvarying vec4 openfl_ColorMultiplierv;\n\t\tvarying vec4 openfl_ColorOffsetv;\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform bool openfl_HasColorTransform;\n\t\tuniform vec2 openfl_TextureSize;\n\n\t\tvoid main(void) {\n\n\t\t\topenfl_Alphav = openfl_Alpha;\n\t\topenfl_TextureCoordv = openfl_TextureCoord;\n\n\t\tif (openfl_HasColorTransform) {\n\n\t\t\topenfl_ColorMultiplierv = openfl_ColorMultiplier;\n\t\t\topenfl_ColorOffsetv = openfl_ColorOffset / 255.0;\n\n\t\t}\n\n\t\tgl_Position = openfl_Matrix * openfl_Position;\n\n\t\t}");
jd.call(this,a);this.__isGenerated=!0;this.__initGL()};g["openfl.display.GraphicsShader"]=Uk;Uk.__name__="openfl.display.GraphicsShader";Uk.__super__=jd;Uk.prototype=v(jd.prototype,{openfl_Alpha:null,openfl_ColorMultiplier:null,openfl_ColorOffset:null,openfl_Position:null,openfl_TextureCoord:null,openfl_Matrix:null,openfl_HasColorTransform:null,openfl_TextureSize:null,bitmap:null,__class__:Uk});var hm={};g["openfl.display._JointStyle.JointStyle_Impl_"]=hm;hm.__name__="openfl.display._JointStyle.JointStyle_Impl_";
hm.toString=function(a){switch(a){case 0:return"bevel";case 1:return"miter";case 2:return"round";default:return null}};var dk=function(){ma.call(this);this.contentLoaderInfo=Qd.create(this);this.uncaughtErrorEvents=this.contentLoaderInfo.uncaughtErrorEvents;this.__unloaded=!0};g["openfl.display.Loader"]=dk;dk.__name__="openfl.display.Loader";dk.__super__=ma;dk.prototype=v(ma.prototype,{contentLoaderInfo:null,uncaughtErrorEvents:null,__unloaded:null,__class__:dk});var Qd=function(){aa.call(this);this.applicationDomain=
Dg.currentDomain;this.bytesTotal=this.bytesLoaded=0;this.childAllowsParent=!0;this.parameters={}};g["openfl.display.LoaderInfo"]=Qd;Qd.__name__="openfl.display.LoaderInfo";Qd.create=function(a){var b=new Qd;b.uncaughtErrorEvents=new Vk;null!=a?b.loader=a:b.url=Qd.__rootURL;return b};Qd.__super__=aa;Qd.prototype=v(aa.prototype,{applicationDomain:null,bytesLoaded:null,bytesTotal:null,childAllowsParent:null,content:null,loader:null,parameters:null,uncaughtErrorEvents:null,url:null,__completed:null,__complete:function(){this.__completed||
(this.bytesLoaded<this.bytesTotal&&(this.bytesLoaded=this.bytesTotal),this.__update(this.bytesLoaded,this.bytesTotal),this.__completed=!0,this.dispatchEvent(new R("complete")))},__update:function(a,b){this.bytesLoaded=a;this.bytesTotal=b;this.dispatchEvent(new bf("progress",!1,!1,a,b))},__class__:Qd});var yd=function(){ka.call(this);this.__currentFrame=1;this.__currentLabels=[];this.__instanceFields=[];this.__totalFrames=0;this.__enabled=!0;null!=yd.__initSymbol&&(this.__swf=yd.__initSWF,this.__symbol=
yd.__initSymbol,yd.__initSWF=null,yd.__initSymbol=null,this.__fromSymbol(this.__swf,this.__symbol))};g["openfl.display.MovieClip"]=yd;yd.__name__="openfl.display.MovieClip";yd.__super__=ka;yd.prototype=v(ka.prototype,{__activeInstances:null,__activeInstancesByFrameObjectID:null,__currentFrame:null,__currentFrameLabel:null,__currentLabel:null,__currentLabels:null,__enabled:null,__frameScripts:null,__frameTime:null,__instanceFields:null,__lastFrameScriptEval:null,__lastFrameUpdate:null,__playing:null,
__swf:null,__symbol:null,__timeElapsed:null,__totalFrames:null,gotoAndPlay:function(a,b){this.play();this.__goto(this.__resolveFrameReference(a))},play:function(){null==this.__symbol||this.__playing||2>this.__totalFrames||(this.__playing=!0,this.__frameTime=1E3/this.__swf.frameRate|0,this.__timeElapsed=0)},__enterFrame:function(a){this.__updateFrameScript(a);this.__updateSymbol(this.__currentFrame);ka.prototype.__enterFrame.call(this,a)},__updateFrameScript:function(a){if(null!=this.__symbol&&this.__playing){var b=
this.__getNextFrame(a);if(this.__lastFrameScriptEval==b)ka.prototype.__enterFrame.call(this,a);else if(null!=this.__frameScripts){if(b<this.__currentFrame){if(!this.__evaluateFrameScripts(this.__totalFrames)){ka.prototype.__enterFrame.call(this,a);return}this.__currentFrame=1}this.__evaluateFrameScripts(b)||ka.prototype.__enterFrame.call(this,a)}else this.__currentFrame=b}},__updateSymbol:function(a){if(null!=this.__symbol&&this.__currentFrame!=this.__lastFrameUpdate){this.__updateFrameLabel();for(var b=
new Zb,c,d=0;d<a;)if(c=d++,c=this.__symbol.frames[c],null!=c.objects)for(var e=0,f=c.objects;e<f.length;){var k=f[e];++e;switch(k.type._hx_index){case 0:c=this.__activeInstancesByFrameObjectID.h[k.id];null!=c&&(b.h[k.id]=c,this.__updateDisplayObject(c.displayObject,k,!0));break;case 1:c=b.h[k.id];null!=c&&null!=c.displayObject&&this.__updateDisplayObject(c.displayObject,k);break;case 2:b.remove(k.id)}}a=[];d=[];for(c=b.iterator();c.hasNext();)b=c.next(),-1==a.indexOf(b)&&(a.push(b),0<b.clipDepth&&
d.push(b));a.sort(u(this,this.__sortDepths));e=0;for(f=a.length;e<f;){k=e++;var m=this.__children[k];c=a[k];b=c.depth;var h=c.displayObject;m!=h?(c=h,this.addChildAt(h,k)):c=this.__children[k];k=!1;for(m=0;m<d.length;)if(h=d[m],++m,b>h.depth&&b<=h.clipDepth){c.set_mask(h.displayObject);k=!0;break}0<d.length&&!k&&null!=c.get_mask()&&c.set_mask(null)}d=a.length;for(c=this.__children.length;d<c;){a=this.__children[d];b=0;for(e=this.__activeInstances;b<e.length;)f=e[b],++b,f.displayObject==a&&(a instanceof
yd&&a.gotoAndPlay(1),this.removeChild(a),--d,--c);++d}this.__lastFrameUpdate=this.__currentFrame;this.__updateInstanceFields()}},__evaluateFrameScripts:function(a){var b=this.__currentFrame;for(a+=1;b<a;){var c=b++;if(c!=this.__lastFrameScriptEval&&(this.__currentFrame=this.__lastFrameScriptEval=c,this.__frameScripts.h.hasOwnProperty(c)&&(this.__updateSymbol(c),(0,this.__frameScripts.h[c])(),this.__currentFrame!=c)||!this.__playing))return!1}return!0},__fromSymbol:function(a,b){var c=this;if(null==
this.__activeInstances){this.__swf=a;this.__symbol=b;this.__activeInstances=[];this.__activeInstancesByFrameObjectID=new Zb;this.__currentFrame=1;this.__lastFrameUpdate=this.__lastFrameScriptEval=-1;this.__totalFrames=this.__symbol.frames.length;for(var d=0,e=this.__symbol.frames.length;d<e;){var f=d++;a=f+1;b=this.__symbol.frames[f];null!=b.label&&this.__currentLabels.push(new Zi(b.label,f+1));if(null!=b.script)null==this.__frameScripts&&(this.__frameScripts=new Zb),this.__frameScripts.h[a]=b.script;
else if(null!=b.scriptSource){null==this.__frameScripts&&(this.__frameScripts=new Zb);try{var k=function(a){return function(){try{a[0].call(c)}catch(Kl){ab.lastException=Kl;for(var b=Kl instanceof W?Kl.val:Kl,d="Error evaluating frame script\n "+r.string(b)+"\n",e=ab.exceptionStack(),f=Array(e.length),h=0,k=e.length;h<k;){var l=h++;f[l]=e[l][2]}Ga.info(d+f.join("\n")+"\n"+r.string(b.stack)+"\n"+a[0].toString(),{fileName:"openfl/display/MovieClip.hx",lineNumber:654,className:"openfl.display.MovieClip",
methodName:"__fromSymbol"})}}}([eval("(function(){"+b.scriptSource+"})")]);this.__frameScripts.h[a]=k}catch(Bb){ab.lastException=Bb,null!=this.__symbol.className?Ga.warn('Unable to evaluate frame script source for symbol "'+this.__symbol.className+'" frame '+a+"\n"+b.scriptSource,{fileName:"openfl/display/MovieClip.hx",lineNumber:675,className:"openfl.display.MovieClip",methodName:"__fromSymbol"}):Ga.warn("Unable to evaluate frame script source:\n"+b.scriptSource,{fileName:"openfl/display/MovieClip.hx",
lineNumber:680,className:"openfl.display.MovieClip",methodName:"__fromSymbol"})}}}a=0;for(b=this.__totalFrames;a<b;)if(d=a++,k=d+1,e=this.__symbol.frames[d],null!=e.objects){d=0;for(var m=e.objects;d<m.length;){var h=m[d];++d;if(h.type==Pm.CREATE&&!this.__activeInstancesByFrameObjectID.h.hasOwnProperty(h.id)){e=null;f=!1;var n=0;for(var g=this.__activeInstances;n<g.length;){var l=g[n];++n;if(null!=l.displayObject&&l.characterID==h.symbol&&l.depth==h.depth){e=l;f=!0;break}}null==e&&(n=this.__swf.symbols.h[h.symbol],
null!=n&&(n=n.__createObject(this.__swf),null!=n&&(n.parent=this,n.stage=this.stage,null!=this.stage&&n.dispatchEvent(new R("addedToStage",!1,!1)),e=new ek(k,h.id,h.symbol,h.depth,n,h.clipDepth))));null!=e&&(this.__activeInstancesByFrameObjectID.h[h.id]=e,f||(this.__activeInstances.push(e),this.__updateDisplayObject(e.displayObject,h)))}}}1<this.__totalFrames&&this.play();this.__enterFrame(0);this.__instanceFields=L.getInstanceFields(Ka.getClass(this));this.__updateInstanceFields()}},__getNextFrame:function(a){this.__timeElapsed+=
a;a=this.__currentFrame+Math.floor(this.__timeElapsed/this.__frameTime);1>a&&(a=1);a>this.__totalFrames&&(a=Math.floor((a-1)%this.__totalFrames)+1);this.__timeElapsed%=this.__frameTime;return a},__goto:function(a){null!=this.__symbol&&(1>a?a=1:a>this.__totalFrames&&(a=this.__totalFrames),this.__currentFrame=a,this.__enterFrame(0))},__resolveFrameReference:function(a){if("number"==typeof a&&(a|0)===a)return a;if("string"==typeof a){for(var b=0,c=this.__currentLabels;b<c.length;){var d=c[b];++b;if(d.get_name()==
a)return d.get_frame()}throw new W(new Ig("Error #2109: Frame label "+a+" not found in scene."));}throw new W("Invalid type for frame "+a.__name__);},__sortDepths:function(a,b){return a.depth-b.depth},__tabTest:function(a){this.__enabled&&ka.prototype.__tabTest.call(this,a)},__updateDisplayObject:function(a,b,c){null==c&&(c=!1);if(null!=a){null!=b.name&&a.set_name(b.name);null!=b.matrix&&a.get_transform().set_matrix(b.matrix);null!=b.colorTransform?a.get_transform().set_colorTransform(b.colorTransform):
c&&!a.get_transform().get_colorTransform().__isDefault(!0)&&a.get_transform().set_colorTransform(new Nb);if(null!=b.filters){c=[];for(var d=0,e=b.filters;d<e.length;){var f=e[d];++d;switch(f._hx_index){case 0:c.push(new Rd(f.blurX,f.blurY,f.quality));break;case 1:c.push(new Ah(f.matrix));break;case 2:c.push(new Wk(f.distance,f.angle,f.color,f.alpha,f.blurX,f.blurY,f.strength,f.quality,f.inner,f.knockout,f.hideObject));break;case 3:c.push(new Id(f.color,f.alpha,f.blurX,f.blurY,f.strength,f.quality,
f.inner,f.knockout))}}a.set_filters(c)}else a.set_filters(null);null!=b.visible&&a.set_visible(b.visible);null!=b.blendMode&&a.set_blendMode(b.blendMode);null!=b.cacheAsBitmap&&a.set_cacheAsBitmap(b.cacheAsBitmap)}},__updateFrameLabel:function(){this.__currentFrameLabel=this.__symbol.frames[this.__currentFrame-1].label;if(null!=this.__currentFrameLabel)this.__currentLabel=this.__currentFrameLabel;else{this.__currentLabel=null;for(var a=0,b=this.__currentLabels;a<b.length;){var c=b[a];++a;if(c.get_frame()<
this.__currentFrame)this.__currentLabel=c.get_name();else break}}},__updateInstanceFields:function(){for(var a=0,b=this.__instanceFields;a<b.length;){var c=b[a];++a;for(var d=0,e=this.__children;d<e.length;){var f=e[d];++d;if(f.get_name()==c){this[c]=f;break}}}},__class__:yd});var ek=function(a,b,c,d,e,f){this.initFrame=a;this.initFrameObjectID=b;this.characterID=c;this.depth=d;this.displayObject=e;this.clipDepth=f};g["openfl.display._MovieClip.FrameSymbolInstance"]=ek;ek.__name__="openfl.display._MovieClip.FrameSymbolInstance";
ek.prototype={characterID:null,clipDepth:null,depth:null,displayObject:null,initFrame:null,initFrameObjectID:null,__class__:ek};var Ya=function(a,b){kd.call(this);this.__context3D=a;this.__context=a.__context;this.__gl=this.gl=a.__context.webgl;this.__defaultRenderTarget=b;this.__flipped=null==this.__defaultRenderTarget;null==pc.maxTextureWidth&&(pc.maxTextureWidth=pc.maxTextureHeight=this.__gl.getParameter(this.__gl.MAX_TEXTURE_SIZE));this.__matrix=Za._new();this.__values=[];this.__softwareRenderer=
new fe(null);this.__type="opengl";this.__setBlendMode(10);this.__context3D.__setGLBlend(!0);this.__clipRects=[];this.__maskObjects=[];this.__numClipRects=0;this.__projection=Za._new();this.__projectionFlipped=Za._new();this.__stencilReference=0;this.__tempRect=new ya;this.__defaultDisplayShader=new yh;this.__defaultGraphicsShader=new Uk;this.__defaultShader=this.__defaultDisplayShader;this.__initShader(this.__defaultShader);this.__scrollRectMasks=new ua(function(){return new Gf});this.__maskShader=
new Wi};g["openfl.display.OpenGLRenderer"]=Ya;Ya.__name__="openfl.display.OpenGLRenderer";Ya.__super__=kd;Ya.prototype=v(kd.prototype,{gl:null,__context3D:null,__clipRects:null,__currentDisplayShader:null,__currentGraphicsShader:null,__currentShader:null,__currentShaderBuffer:null,__defaultDisplayShader:null,__defaultGraphicsShader:null,__defaultRenderTarget:null,__defaultShader:null,__displayHeight:null,__displayWidth:null,__flipped:null,__gl:null,__height:null,__maskShader:null,__matrix:null,__maskObjects:null,
__numClipRects:null,__offsetX:null,__offsetY:null,__projection:null,__projectionFlipped:null,__scrollRectMasks:null,__softwareRenderer:null,__stencilReference:null,__tempRect:null,__updatedStencil:null,__upscaled:null,__values:null,__width:null,applyAlpha:function(a){Ya.__alphaValue[0]=a;null!=this.__currentShaderBuffer?this.__currentShaderBuffer.addFloatOverride("openfl_Alpha",Ya.__alphaValue):null!=this.__currentShader&&null!=this.__currentShader.__alpha&&(this.__currentShader.__alpha.value=Ya.__alphaValue)},
applyBitmapData:function(a,b,c){null==c&&(c=!1);null!=this.__currentShaderBuffer?null!=a&&(Ya.__textureSizeValue[0]=a.__textureWidth,Ya.__textureSizeValue[1]=a.__textureHeight,this.__currentShaderBuffer.addFloatOverride("openfl_TextureSize",Ya.__textureSizeValue)):null!=this.__currentShader&&(null!=this.__currentShader.__bitmap&&(this.__currentShader.__bitmap.input=a,this.__currentShader.__bitmap.filter=b&&this.__allowSmoothing?4:5,this.__currentShader.__bitmap.mipFilter=2,this.__currentShader.__bitmap.wrap=
c?2:0),null!=this.__currentShader.__texture&&(this.__currentShader.__texture.input=a,this.__currentShader.__texture.filter=b&&this.__allowSmoothing?4:5,this.__currentShader.__texture.mipFilter=2,this.__currentShader.__texture.wrap=c?2:0),null!=this.__currentShader.__textureSize&&(null!=a?(Ya.__textureSizeValue[0]=a.__textureWidth,Ya.__textureSizeValue[1]=a.__textureHeight,this.__currentShader.__textureSize.value=Ya.__textureSizeValue):this.__currentShader.__textureSize.value=null))},applyColorTransform:function(a){var b=
null!=a&&!a.__isDefault(!0);this.applyHasColorTransform(b);b?(a.__setArrays(Ya.__colorMultipliersValue,Ya.__colorOffsetsValue),null!=this.__currentShaderBuffer?(this.__currentShaderBuffer.addFloatOverride("openfl_ColorMultiplier",Ya.__colorMultipliersValue),this.__currentShaderBuffer.addFloatOverride("openfl_ColorOffset",Ya.__colorOffsetsValue)):null!=this.__currentShader&&(null!=this.__currentShader.__colorMultiplier&&(this.__currentShader.__colorMultiplier.value=Ya.__colorMultipliersValue),null!=
this.__currentShader.__colorOffset&&(this.__currentShader.__colorOffset.value=Ya.__colorOffsetsValue))):null!=this.__currentShaderBuffer?(this.__currentShaderBuffer.addFloatOverride("openfl_ColorMultiplier",Ya.__emptyColorValue),this.__currentShaderBuffer.addFloatOverride("openfl_ColorOffset",Ya.__emptyColorValue)):null!=this.__currentShader&&(null!=this.__currentShader.__colorMultiplier&&(this.__currentShader.__colorMultiplier.value=Ya.__emptyColorValue),null!=this.__currentShader.__colorOffset&&
(this.__currentShader.__colorOffset.value=Ya.__emptyColorValue))},applyHasColorTransform:function(a){Ya.__hasColorTransformValue[0]=a;null!=this.__currentShaderBuffer?this.__currentShaderBuffer.addBoolOverride("openfl_HasColorTransform",Ya.__hasColorTransformValue):null!=this.__currentShader&&null!=this.__currentShader.__hasColorTransform&&(this.__currentShader.__hasColorTransform.value=Ya.__hasColorTransformValue)},applyMatrix:function(a){null!=this.__currentShaderBuffer?this.__currentShaderBuffer.addFloatOverride("openfl_Matrix",
a):null!=this.__currentShader&&null!=this.__currentShader.__matrix&&(this.__currentShader.__matrix.value=a)},setShader:function(a){this.__currentShaderBuffer=null;this.__currentShader!=a&&(null==a?(this.__currentShader=null,this.__context3D.setProgram(null)):(this.__currentShader=a,this.__initShader(a),this.__context3D.setProgram(a.program),this.__context3D.__flushGLProgram(),this.__currentShader.__enable(),this.__context3D.__state.shader=a))},setViewport:function(){this.__gl.viewport(this.__offsetX,
this.__offsetY,this.__displayWidth,this.__displayHeight)},updateShader:function(){null!=this.__currentShader&&(null!=this.__currentShader.__position&&(this.__currentShader.__position.__useArray=!0),null!=this.__currentShader.__textureCoord&&(this.__currentShader.__textureCoord.__useArray=!0),this.__context3D.setProgram(this.__currentShader.program),this.__context3D.__flushGLProgram(),this.__context3D.__flushGLTextures(),this.__currentShader.__update())},__clear:function(){null==this.__stage||this.__stage.__transparent?
this.__context3D.clear(0,0,0,0,0,0,1):this.__context3D.clear(this.__stage.__colorSplit[0],this.__stage.__colorSplit[1],this.__stage.__colorSplit[2],1,0,0,1);this.__cleared=!0},__clearShader:function(){null!=this.__currentShader&&(null==this.__currentShaderBuffer?null!=this.__currentShader.__bitmap&&(this.__currentShader.__bitmap.input=null):this.__currentShaderBuffer.clearOverride(),null!=this.__currentShader.__texture&&(this.__currentShader.__texture.input=null),null!=this.__currentShader.__textureSize&&
(this.__currentShader.__textureSize.value=null),null!=this.__currentShader.__hasColorTransform&&(this.__currentShader.__hasColorTransform.value=null),null!=this.__currentShader.__position&&(this.__currentShader.__position.value=null),null!=this.__currentShader.__matrix&&(this.__currentShader.__matrix.value=null),this.__currentShader.__clearUseArray())},__copyShader:function(a){this.__currentShader=a.__currentShader;this.__currentShaderBuffer=a.__currentShaderBuffer;this.__currentDisplayShader=a.__currentDisplayShader;
this.__currentGraphicsShader=a.__currentGraphicsShader},__getMatrix:function(a,b){var c=va.__pool.get();c.copyFrom(a);c.concat(this.__worldTransform);if(0==b||1==b&&0==c.b&&0==c.c&&1.001>c.a&&.999<c.a&&1.001>c.d&&.999<c.d)c.tx=Math.round(c.tx),c.ty=Math.round(c.ty);Za.identity(this.__matrix);Za.set(this.__matrix,0,c.a);Za.set(this.__matrix,1,c.b);Za.set(this.__matrix,4,c.c);Za.set(this.__matrix,5,c.d);Za.set(this.__matrix,12,c.tx);Za.set(this.__matrix,13,c.ty);Za.append(this.__matrix,this.__flipped?
this.__projectionFlipped:this.__projection);this.__values[0]=Za.get(this.__matrix,0);this.__values[1]=Za.get(this.__matrix,1);this.__values[2]=Za.get(this.__matrix,2);this.__values[3]=Za.get(this.__matrix,3);this.__values[4]=Za.get(this.__matrix,4);this.__values[5]=Za.get(this.__matrix,5);this.__values[6]=Za.get(this.__matrix,6);this.__values[7]=Za.get(this.__matrix,7);this.__values[8]=Za.get(this.__matrix,8);this.__values[9]=Za.get(this.__matrix,9);this.__values[10]=Za.get(this.__matrix,10);this.__values[11]=
Za.get(this.__matrix,11);this.__values[12]=Za.get(this.__matrix,12);this.__values[13]=Za.get(this.__matrix,13);this.__values[14]=Za.get(this.__matrix,14);this.__values[15]=Za.get(this.__matrix,15);va.__pool.release(c);return this.__values},__initShader:function(a){return null!=a?(null==a.__context&&(a.__context=this.__context3D,a.__init()),a):this.__defaultShader},__initDisplayShader:function(a){return null!=a?(null==a.__context&&(a.__context=this.__context3D,a.__init()),a):this.__defaultDisplayShader},
__initGraphicsShader:function(a){return null!=a?(null==a.__context&&(a.__context=this.__context3D,a.__init()),a):this.__defaultGraphicsShader},__initShaderBuffer:function(a){return null!=a?this.__initGraphicsShader(a.shader):this.__defaultGraphicsShader},__popMask:function(){if(0!=this.__stencilReference){var a=this.__maskObjects.pop();1<this.__stencilReference?(this.__context3D.setStencilActions(2,1,0,0,5),this.__context3D.setStencilReferenceValue(this.__stencilReference,255,255),this.__context3D.setColorMask(!1,
!1,!1,!1),a.__renderGLMask(this),this.__stencilReference--,this.__context3D.setStencilActions(2,1,5,5,5),this.__context3D.setStencilReferenceValue(this.__stencilReference,255,0),this.__context3D.setColorMask(!0,!0,!0,!0)):(this.__stencilReference=0,this.__context3D.setStencilActions(),this.__context3D.setStencilReferenceValue(0,0,0))}},__popMaskObject:function(a,b){null==b&&(b=!0);null!=a.__mask&&this.__popMask();b&&null!=a.__scrollRect&&(0!=a.__renderTransform.b||0!=a.__renderTransform.c?(this.__scrollRectMasks.release(this.__maskObjects[this.__maskObjects.length-
1]),this.__popMask()):this.__popMaskRect())},__popMaskRect:function(){0<this.__numClipRects&&(this.__numClipRects--,0<this.__numClipRects?this.__scissorRect(this.__clipRects[this.__numClipRects-1]):this.__scissorRect())},__pushMask:function(a){0==this.__stencilReference&&(this.__context3D.clear(0,0,0,0,0,0,4),this.__updatedStencil=!0);this.__context3D.setStencilActions(2,1,2,5,5);this.__context3D.setStencilReferenceValue(this.__stencilReference,255,255);this.__context3D.setColorMask(!1,!1,!1,!1);
a.__renderGLMask(this);this.__maskObjects.push(a);this.__stencilReference++;this.__context3D.setStencilActions(2,1,5,5,5);this.__context3D.setStencilReferenceValue(this.__stencilReference,255,0);this.__context3D.setColorMask(!0,!0,!0,!0)},__pushMaskObject:function(a,b){null==b&&(b=!0);b&&null!=a.__scrollRect&&(0!=a.__renderTransform.b||0!=a.__renderTransform.c?(b=this.__scrollRectMasks.get(),b.get_graphics().clear(),b.get_graphics().beginFill(65280),b.get_graphics().drawRect(a.__scrollRect.x,a.__scrollRect.y,
a.__scrollRect.width,a.__scrollRect.height),b.__renderTransform.copyFrom(a.__renderTransform),this.__pushMask(b)):this.__pushMaskRect(a.__scrollRect,a.__renderTransform));null!=a.__mask&&this.__pushMask(a.__mask)},__pushMaskRect:function(a,b){this.__numClipRects==this.__clipRects.length&&(this.__clipRects[this.__numClipRects]=new ya);var c=va.__pool.get();c.copyFrom(b);c.concat(this.__worldTransform);b=this.__clipRects[this.__numClipRects];a.__transform(b,c);0<this.__numClipRects&&(a=this.__clipRects[this.__numClipRects-
1],b.__contract(a.x,a.y,a.width,a.height));0>b.height&&(b.height=0);0>b.width&&(b.width=0);va.__pool.release(c);this.__scissorRect(b);this.__numClipRects++},__render:function(a){this.__context3D.setColorMask(!0,!0,!0,!0);this.__context3D.setCulling(3);this.__context3D.setDepthTest(!1,0);this.__context3D.setStencilActions();this.__context3D.setStencilReferenceValue(0,0,0);this.__context3D.setScissorRectangle(null);this.__blendMode=null;this.__setBlendMode(10);if(null==this.__defaultRenderTarget){if(Ya.__scissorRectangle.setTo(this.__offsetX,
this.__offsetY,this.__displayWidth,this.__displayHeight),this.__context3D.setScissorRectangle(Ya.__scissorRectangle),this.__upscaled=1!=this.__worldTransform.a||1!=this.__worldTransform.d,a.__renderGL(this),0<this.__offsetX||0<this.__offsetY)0<this.__offsetX&&(Ya.__scissorRectangle.setTo(0,0,this.__offsetX,this.__height),this.__context3D.setScissorRectangle(Ya.__scissorRectangle),this.__context3D.__flushGL(),this.__gl.clearColor(0,0,0,1),this.__gl.clear(this.__gl.COLOR_BUFFER_BIT),Ya.__scissorRectangle.setTo(this.__offsetX+
this.__displayWidth,0,this.__width,this.__height),this.__context3D.setScissorRectangle(Ya.__scissorRectangle),this.__context3D.__flushGL(),this.__gl.clearColor(0,0,0,1),this.__gl.clear(this.__gl.COLOR_BUFFER_BIT)),0<this.__offsetY&&(Ya.__scissorRectangle.setTo(0,0,this.__width,this.__offsetY),this.__context3D.setScissorRectangle(Ya.__scissorRectangle),this.__context3D.__flushGL(),this.__gl.clearColor(0,0,0,1),this.__gl.clear(this.__gl.COLOR_BUFFER_BIT),Ya.__scissorRectangle.setTo(0,this.__offsetY+
this.__displayHeight,this.__width,this.__height),this.__context3D.setScissorRectangle(Ya.__scissorRectangle),this.__context3D.__flushGL(),this.__gl.clearColor(0,0,0,1),this.__gl.clear(this.__gl.COLOR_BUFFER_BIT)),this.__context3D.setScissorRectangle(null)}else{Ya.__scissorRectangle.setTo(this.__offsetX,this.__offsetY,this.__displayWidth,this.__displayHeight);this.__context3D.setScissorRectangle(Ya.__scissorRectangle);var b=a.__mask,c=a.__scrollRect;a.__mask=null;a.__scrollRect=null;a.__renderGL(this);
a.__mask=b;a.__scrollRect=c}this.__context3D.present()},__renderFilterPass:function(a,b,c,d){null==d&&(d=!0);if(null!=a&&null!=b&&null!=this.__defaultRenderTarget){var e=this.__context3D.__state.renderToTexture,f=this.__context3D.__state.renderToTextureDepthStencil,k=this.__context3D.__state.renderToTextureAntiAlias,m=this.__context3D.__state.renderToTextureSurfaceSelector;this.__context3D.setRenderToTexture(this.__defaultRenderTarget.getTexture(this.__context3D),!1);d&&this.__context3D.clear(0,0,
0,0,0,0,1);b=this.__initShader(b);this.setShader(b);this.applyAlpha(1);this.applyBitmapData(a,c);this.applyColorTransform(null);this.applyMatrix(this.__getMatrix(a.__renderTransform,1));this.updateShader();c=a.getVertexBuffer(this.__context3D);null!=b.__position&&this.__context3D.setVertexBufferAt(b.__position.index,c,0,3);null!=b.__textureCoord&&this.__context3D.setVertexBufferAt(b.__textureCoord.index,c,3,2);a=a.getIndexBuffer(this.__context3D);this.__context3D.drawTriangles(a);null!=e?this.__context3D.setRenderToTexture(e,
f,k,m):this.__context3D.setRenderToBackBuffer();this.__clearShader()}},__resize:function(a,b){this.__width=a;this.__height=b;b=null==this.__defaultRenderTarget?this.__stage.stageWidth:this.__defaultRenderTarget.width;a=null==this.__defaultRenderTarget?this.__stage.stageHeight:this.__defaultRenderTarget.height;if(null==this.__defaultRenderTarget){var c=this.__worldTransform;c=Math.round(0*c.a+0*c.c+c.tx)}else c=0;this.__offsetX=c;null==this.__defaultRenderTarget?(c=this.__worldTransform,c=Math.round(0*
c.b+0*c.d+c.ty)):c=0;this.__offsetY=c;null==this.__defaultRenderTarget&&(c=this.__worldTransform,b=Math.round(b*c.a+0*c.c+c.tx-this.__offsetX));this.__displayWidth=b;null==this.__defaultRenderTarget&&(b=this.__worldTransform,a=Math.round(0*b.b+a*b.d+b.ty-this.__offsetY));this.__displayHeight=a;Za.createOrtho(this.__projection,0,this.__displayWidth+2*this.__offsetX,0,this.__displayHeight+2*this.__offsetY,-1E3,1E3);Za.createOrtho(this.__projectionFlipped,0,this.__displayWidth+2*this.__offsetX,this.__displayHeight+
2*this.__offsetY,0,-1E3,1E3)},__resumeClipAndMask:function(a){0<this.__stencilReference?(this.__context3D.setStencilActions(2,1,5,5,5),this.__context3D.setStencilReferenceValue(this.__stencilReference,255,0)):(this.__context3D.setStencilActions(),this.__context3D.setStencilReferenceValue(0,0,0));0<this.__numClipRects?this.__scissorRect(this.__clipRects[this.__numClipRects-1]):this.__scissorRect()},__scissorRect:function(a){if(null!=a){var b=Math.floor(a.x),c=Math.floor(a.y),d=0<a.width?Math.ceil(a.get_right())-
b:0;a=0<a.height?Math.ceil(a.get_bottom())-c:0;0>d&&(d=0);0>a&&(a=0);Ya.__scissorRectangle.setTo(b,c,d,a);this.__context3D.setScissorRectangle(Ya.__scissorRectangle)}else this.__context3D.setScissorRectangle(null)},__setBlendMode:function(a){null!=this.__overrideBlendMode&&(a=this.__overrideBlendMode);if(this.__blendMode!=a)switch(this.__blendMode=a,a){case 0:this.__context3D.setBlendFactors(2,2);break;case 9:this.__context3D.setBlendFactors(1,5);break;case 12:this.__context3D.setBlendFactors(2,6);
break;case 14:this.__context3D.setBlendFactors(2,2);this.__context3D.__setGLBlendEquation(this.__gl.FUNC_REVERSE_SUBTRACT);break;default:this.__context3D.setBlendFactors(2,5)}},__setRenderTarget:function(a){this.__defaultRenderTarget=a;this.__flipped=null==a;null!=a&&this.__resize(a.width,a.height)},__setShaderBuffer:function(a){this.setShader(a.shader);this.__currentShaderBuffer=a},__suspendClipAndMask:function(){0<this.__stencilReference&&(this.__context3D.setStencilActions(),this.__context3D.setStencilReferenceValue(0,
0,0));0<this.__numClipRects&&this.__scissorRect()},__updateShaderBuffer:function(a){null!=this.__currentShader&&null!=this.__currentShaderBuffer&&this.__currentShader.__updateFromBuffer(this.__currentShaderBuffer,a)},__class__:Ya});var Mh=function(a){this.onComplete=new kc;this.display=a;null!=a&&(a.addEventListener("unload",u(this,this.display_onUnload)),Qb.get_current().addChild(a))};g["openfl.display.Preloader"]=Mh;Mh.__name__="openfl.display.Preloader";Mh.prototype={onComplete:null,complete:null,
display:null,ready:null,start:function(){this.ready=!0;Qb.get_current().get_loaderInfo().__complete();if(null!=this.display){var a=new R("complete",!0,!0);this.display.dispatchEvent(a);a.isDefaultPrevented()||this.display.dispatchEvent(new R("unload"))}else this.complete||(this.complete=!0,this.onComplete.dispatch())},update:function(a,b){Qb.get_current().get_loaderInfo().__update(a,b);null!=this.display&&this.display.dispatchEvent(new bf("progress",!0,!0,a,b))},display_onUnload:function(a){null!=
this.display&&(this.display.removeEventListener("unload",u(this,this.display_onUnload)),this.display.parent==Qb.get_current()&&Qb.get_current().removeChild(this.display),Qb.get_current().stage.set_focus(null),this.display=null);this.ready&&!this.complete&&(this.complete=!0,this.onComplete.dispatch())},__class__:Mh};var Nh=function(){ka.call(this);var a=this.getBackgroundColor(),b=0;70>.299*(a>>16&255)+.587*(a>>8&255)+.114*(a&255)&&(b=16777215);a=this.getHeight()/2-3.5;var c=this.getWidth()-60;this.outline=
new ka;this.outline.get_graphics().beginFill(b,.07);this.outline.get_graphics().drawRect(0,0,c,7);this.outline.set_x(30);this.outline.set_y(a);this.outline.set_alpha(0);this.addChild(this.outline);this.progress=new ka;this.progress.get_graphics().beginFill(b,.35);this.progress.get_graphics().drawRect(0,0,c-4,3);this.progress.set_x(32);this.progress.set_y(a+2);this.progress.set_scaleX(0);this.progress.set_alpha(0);this.addChild(this.progress);this.startAnimation=Qb.getTimer()+100;this.endAnimation=
this.startAnimation+1E3;this.addEventListener("addedToStage",u(this,this.this_onAddedToStage))};g["openfl.display.DefaultPreloader"]=Nh;Nh.__name__="openfl.display.DefaultPreloader";Nh.__super__=ka;Nh.prototype=v(ka.prototype,{endAnimation:null,outline:null,progress:null,startAnimation:null,getBackgroundColor:function(){var a=Qb.get_current().stage.window.context.attributes;return Object.prototype.hasOwnProperty.call(a,"background")&&null!=a.background?a.background:0},getHeight:function(){var a=Qb.get_current().stage.window.__height;
return 0<a?a:Qb.get_current().stage.stageHeight},getWidth:function(){var a=Qb.get_current().stage.window.__width;return 0<a?a:Qb.get_current().stage.stageWidth},onInit:function(){this.addEventListener("enterFrame",u(this,this.this_onEnterFrame))},onLoaded:function(){this.removeEventListener("enterFrame",u(this,this.this_onEnterFrame));this.dispatchEvent(new R("unload"))},onUpdate:function(a,b){var c=0;0<b&&(c=a/b,1<c&&(c=1));this.progress.set_scaleX(c)},this_onAddedToStage:function(a){this.removeEventListener("addedToStage",
u(this,this.this_onAddedToStage));this.onInit();this.onUpdate(this.get_loaderInfo().bytesLoaded,this.get_loaderInfo().bytesTotal);this.addEventListener("progress",u(this,this.this_onProgress));this.addEventListener("complete",u(this,this.this_onComplete))},this_onComplete:function(a){a.preventDefault();this.removeEventListener("progress",u(this,this.this_onProgress));this.removeEventListener("complete",u(this,this.this_onComplete));this.onLoaded()},this_onEnterFrame:function(a){a=(Qb.getTimer()-this.startAnimation)/
(this.endAnimation-this.startAnimation);0>a&&(a=0);1<a&&(a=1);this.outline.set_alpha(a);this.progress.set_alpha(a)},this_onProgress:function(a){this.onUpdate(a.bytesLoaded|0,a.bytesTotal|0)},__class__:Nh});var Zj={};g["openfl.display._ShaderData.ShaderData_Impl_"]=Zj;Zj.__name__="openfl.display._ShaderData.ShaderData_Impl_";Zj._new=function(a){return{}};var uh=function(){this.channels=0;this.filter=5;this.index=this.height=0;this.mipFilter=2;this.wrap=this.width=0};g["openfl.display.ShaderInput"]=
uh;uh.__name__="openfl.display.ShaderInput";uh.prototype={channels:null,filter:null,height:null,index:null,input:null,mipFilter:null,name:null,width:null,wrap:null,__isUniform:null,__disableGL:function(a,b){a.setTextureAt(b,null)},__updateGL:function(a,b,c,d,e,f){c=null!=c?c:this.input;d=null!=d?d:this.filter;e=null!=e?e:this.mipFilter;f=null!=f?f:this.wrap;null!=c?(a.setTextureAt(b,c.getTexture(a)),a.setSamplerStateAt(b,f,d,e)):a.setTextureAt(b,null)},__class__:uh};var Cg=function(){this.index=0};
g["openfl.display.ShaderParameter"]=Cg;Cg.__name__="openfl.display.ShaderParameter";Cg.prototype={index:null,name:null,type:null,value:null,__arrayLength:null,__internal:null,__isBool:null,__isFloat:null,__isInt:null,__isUniform:null,__length:null,__uniformMatrix:null,__useArray:null,__disableGL:function(a){a=a.gl;if(!this.__isUniform)for(var b=0,c=this.__arrayLength;b<c;){var d=b++;a.disableVertexAttribArray(this.index+d)}},__updateGL:function(a,b){a=a.gl;b=null!=b?b:this.value;var c=this.__isBool?
b:null,d=this.__isFloat?b:null,e=this.__isInt?b:null;if(this.__isUniform)if(null!=b&&b.length>=this.__length)switch(this.type){case 0:a.uniform1i(this.index,c[0]?1:0);break;case 1:a.uniform2i(this.index,c[0]?1:0,c[1]?1:0);break;case 2:a.uniform3i(this.index,c[0]?1:0,c[1]?1:0,c[2]?1:0);break;case 3:a.uniform4i(this.index,c[0]?1:0,c[1]?1:0,c[2]?1:0,c[3]?1:0);break;case 4:a.uniform1f(this.index,d[0]);break;case 5:a.uniform2f(this.index,d[0],d[1]);break;case 6:a.uniform3f(this.index,d[0],d[1],d[2]);break;
case 7:a.uniform4f(this.index,d[0],d[1],d[2],d[3]);break;case 8:a.uniform1i(this.index,e[0]);break;case 9:a.uniform2i(this.index,e[0],e[1]);break;case 10:a.uniform3i(this.index,e[0],e[1],e[2]);break;case 11:a.uniform4i(this.index,e[0],e[1],e[2],e[3]);break;case 12:this.__uniformMatrix[0]=d[0];this.__uniformMatrix[1]=d[1];this.__uniformMatrix[2]=d[2];this.__uniformMatrix[3]=d[3];sb.uniformMatrix2fv(a,this.index,!1,this.__uniformMatrix);break;case 16:this.__uniformMatrix[0]=d[0];this.__uniformMatrix[1]=
d[1];this.__uniformMatrix[2]=d[2];this.__uniformMatrix[3]=d[3];this.__uniformMatrix[4]=d[4];this.__uniformMatrix[5]=d[5];this.__uniformMatrix[6]=d[6];this.__uniformMatrix[7]=d[7];this.__uniformMatrix[8]=d[8];sb.uniformMatrix3fv(a,this.index,!1,this.__uniformMatrix);break;case 20:this.__uniformMatrix[0]=d[0],this.__uniformMatrix[1]=d[1],this.__uniformMatrix[2]=d[2],this.__uniformMatrix[3]=d[3],this.__uniformMatrix[4]=d[4],this.__uniformMatrix[5]=d[5],this.__uniformMatrix[6]=d[6],this.__uniformMatrix[7]=
d[7],this.__uniformMatrix[8]=d[8],this.__uniformMatrix[9]=d[9],this.__uniformMatrix[10]=d[10],this.__uniformMatrix[11]=d[11],this.__uniformMatrix[12]=d[12],this.__uniformMatrix[13]=d[13],this.__uniformMatrix[14]=d[14],this.__uniformMatrix[15]=d[15],sb.uniformMatrix4fv(a,this.index,!1,this.__uniformMatrix)}else switch(this.type){case 1:case 9:a.uniform2i(this.index,0,0);break;case 3:case 11:a.uniform4i(this.index,0,0,0,0);break;case 4:a.uniform1f(this.index,0);break;case 5:a.uniform2f(this.index,0,
0);break;case 6:a.uniform3f(this.index,0,0,0);break;case 7:a.uniform4f(this.index,0,0,0,0);break;case 0:case 8:a.uniform1i(this.index,0);break;case 2:case 10:a.uniform3i(this.index,0,0,0);break;case 12:this.__uniformMatrix[0]=0;this.__uniformMatrix[1]=0;this.__uniformMatrix[2]=0;this.__uniformMatrix[3]=0;sb.uniformMatrix2fv(a,this.index,!1,this.__uniformMatrix);break;case 16:this.__uniformMatrix[0]=0;this.__uniformMatrix[1]=0;this.__uniformMatrix[2]=0;this.__uniformMatrix[3]=0;this.__uniformMatrix[4]=
0;this.__uniformMatrix[5]=0;this.__uniformMatrix[6]=0;this.__uniformMatrix[7]=0;this.__uniformMatrix[8]=0;sb.uniformMatrix3fv(a,this.index,!1,this.__uniformMatrix);break;case 20:this.__uniformMatrix[0]=0,this.__uniformMatrix[1]=0,this.__uniformMatrix[2]=0,this.__uniformMatrix[3]=0,this.__uniformMatrix[4]=0,this.__uniformMatrix[5]=0,this.__uniformMatrix[6]=0,this.__uniformMatrix[7]=0,this.__uniformMatrix[8]=0,this.__uniformMatrix[9]=0,this.__uniformMatrix[10]=0,this.__uniformMatrix[11]=0,this.__uniformMatrix[12]=
0,this.__uniformMatrix[13]=0,this.__uniformMatrix[14]=0,this.__uniformMatrix[15]=0,sb.uniformMatrix4fv(a,this.index,!1,this.__uniformMatrix)}else if(this.__useArray||null!=b&&b.length!=this.__length)for(b=0,c=this.__arrayLength;b<c;)d=b++,a.enableVertexAttribArray(this.index+d);else{for(var f=0,k=this.__arrayLength;f<k;){var m=f++;a.disableVertexAttribArray(this.index+m)}if(null!=b)switch(this.type){case 0:a.vertexAttrib1f(this.index,c[0]?1:0);break;case 1:a.vertexAttrib2f(this.index,c[0]?1:0,c[1]?
1:0);break;case 2:a.vertexAttrib3f(this.index,c[0]?1:0,c[1]?1:0,c[2]?1:0);break;case 3:a.vertexAttrib4f(this.index,c[0]?1:0,c[1]?1:0,c[2]?1:0,c[3]?1:0);break;case 4:a.vertexAttrib1f(this.index,d[0]);break;case 5:a.vertexAttrib2f(this.index,d[0],d[1]);break;case 6:a.vertexAttrib3f(this.index,d[0],d[1],d[2]);break;case 7:a.vertexAttrib4f(this.index,d[0],d[1],d[2],d[3]);break;case 8:a.vertexAttrib1f(this.index,e[0]);break;case 9:a.vertexAttrib2f(this.index,e[0],e[1]);break;case 10:a.vertexAttrib3f(this.index,
e[0],e[1],e[2]);break;case 11:a.vertexAttrib4f(this.index,e[0],e[1],e[2],e[3]);break;case 12:a.vertexAttrib2f(this.index+0,d[0],d[1]);a.vertexAttrib2f(this.index+1,d[2],d[3]);break;case 16:a.vertexAttrib3f(this.index+0,d[0],d[1],d[2]);a.vertexAttrib3f(this.index+1,d[3],d[4],d[5]);a.vertexAttrib3f(this.index+2,d[6],d[7],d[8]);break;case 20:a.vertexAttrib4f(this.index+0,d[0],d[1],d[2],d[3]),a.vertexAttrib4f(this.index+1,d[4],d[5],d[6],d[7]),a.vertexAttrib4f(this.index+2,d[8],d[9],d[10],d[11]),a.vertexAttrib4f(this.index+
3,d[12],d[13],d[14],d[15])}else switch(this.type){case 1:case 5:case 9:a.vertexAttrib2f(this.index,0,0);break;case 3:case 7:case 11:a.vertexAttrib4f(this.index,0,0,0,0);break;case 0:case 4:case 8:a.vertexAttrib1f(this.index,0);break;case 2:case 6:case 10:a.vertexAttrib3f(this.index,0,0,0);break;case 12:a.vertexAttrib2f(this.index+0,0,0);a.vertexAttrib2f(this.index+1,0,0);break;case 16:a.vertexAttrib3f(this.index+0,0,0,0);a.vertexAttrib3f(this.index+1,0,0,0);a.vertexAttrib3f(this.index+2,0,0,0);break;
case 20:a.vertexAttrib4f(this.index+0,0,0,0,0),a.vertexAttrib4f(this.index+1,0,0,0,0),a.vertexAttrib4f(this.index+2,0,0,0,0),a.vertexAttrib4f(this.index+3,0,0,0,0)}}},__updateGLFromBuffer:function(a,b,c,d,e){a=a.gl;if(this.__isUniform){if(d>=this.__length)switch(this.type){case 1:case 9:a.uniform2i(this.index,b[c]|0,b[c+1]|0);break;case 3:case 11:a.uniform4i(this.index,b[c]|0,b[c+1]|0,b[c+2]|0,b[c+3]|0);break;case 4:a.uniform1f(this.index,b[c]);break;case 5:a.uniform2f(this.index,b[c],b[c+1]);break;
case 6:a.uniform3f(this.index,b[c],b[c+1],b[c+2]);break;case 7:a.uniform4f(this.index,b[c],b[c+1],b[c+2],b[c+3]);break;case 0:case 8:a.uniform1i(this.index,b[c]|0);break;case 2:case 10:a.uniform3i(this.index,b[c]|0,b[c+1]|0,b[c+2]|0);break;case 12:this.__uniformMatrix[0]=b[c];this.__uniformMatrix[1]=b[c+1];this.__uniformMatrix[2]=b[c+2];this.__uniformMatrix[3]=b[c+3];sb.uniformMatrix2fv(a,this.index,!1,this.__uniformMatrix);break;case 16:this.__uniformMatrix[0]=b[c];this.__uniformMatrix[1]=b[c+1];
this.__uniformMatrix[2]=b[c+2];this.__uniformMatrix[3]=b[c+3];this.__uniformMatrix[4]=b[c+4];this.__uniformMatrix[5]=b[c+5];this.__uniformMatrix[6]=b[c+6];this.__uniformMatrix[7]=b[c+7];this.__uniformMatrix[8]=b[c+8];sb.uniformMatrix3fv(a,this.index,!1,this.__uniformMatrix);break;case 20:this.__uniformMatrix[0]=b[c],this.__uniformMatrix[1]=b[c+1],this.__uniformMatrix[2]=b[c+2],this.__uniformMatrix[3]=b[c+3],this.__uniformMatrix[4]=b[c+4],this.__uniformMatrix[5]=b[c+5],this.__uniformMatrix[6]=b[c+
6],this.__uniformMatrix[7]=b[c+7],this.__uniformMatrix[8]=b[c+8],this.__uniformMatrix[9]=b[c+9],this.__uniformMatrix[10]=b[c+10],this.__uniformMatrix[11]=b[c+11],this.__uniformMatrix[12]=b[c+12],this.__uniformMatrix[13]=b[c+13],this.__uniformMatrix[14]=b[c+14],this.__uniformMatrix[15]=b[c+15],sb.uniformMatrix4fv(a,this.index,!1,this.__uniformMatrix)}}else if(this.__internal||0!=d&&d!=this.__length){b=a.FLOAT;this.__isBool?b=a.INT:this.__isInt&&(b=a.INT);for(var f=0,k=this.__arrayLength;f<k;){var m=
f++;a.enableVertexAttribArray(this.index+m)}if(0<d)for(d=0,f=this.__arrayLength;d<f;)k=d++,a.vertexAttribPointer(this.index+k,this.__length,b,!1,4*this.__length,4*(c+e*this.__length+k*this.__arrayLength))}else{e=0;for(f=this.__arrayLength;e<f;)k=e++,a.disableVertexAttribArray(this.index+k);if(0<d)switch(this.type){case 1:case 5:case 9:a.vertexAttrib2f(this.index,b[c],b[c+1]);break;case 3:case 7:case 11:a.vertexAttrib4f(this.index,b[c],b[c+1],b[c+2],b[c+3]);break;case 0:case 4:case 8:a.vertexAttrib1f(this.index,
b[c]);break;case 2:case 6:case 10:a.vertexAttrib3f(this.index,b[c],b[c+1],b[c+2]);break;case 12:a.vertexAttrib2f(this.index+0,b[c],b[c+1]);a.vertexAttrib2f(this.index+1,b[c+2],b[c+2+1]);break;case 16:a.vertexAttrib3f(this.index+0,b[c],b[c+1],b[c+2]);a.vertexAttrib3f(this.index+1,b[c+3],b[c+3+1],b[c+3+2]);a.vertexAttrib3f(this.index+2,b[c+6],b[c+6+1],b[c+6+2]);break;case 20:a.vertexAttrib4f(this.index+0,b[c],b[c+1],b[c+2],b[c+3]),a.vertexAttrib4f(this.index+1,b[c+4],b[c+4+1],b[c+4+2],b[c+4+3]),a.vertexAttrib4f(this.index+
2,b[c+8],b[c+8+1],b[c+8+2],b[c+8+3]),a.vertexAttrib4f(this.index+3,b[c+12],b[c+12+1],b[c+12+2],b[c+12+3])}else switch(this.type){case 1:case 5:case 9:a.vertexAttrib2f(this.index,0,0);break;case 3:case 7:case 11:a.vertexAttrib4f(this.index,0,0,0,0);break;case 0:case 4:case 8:a.vertexAttrib1f(this.index,0);break;case 2:case 6:case 10:a.vertexAttrib3f(this.index,0,0,0);break;case 12:a.vertexAttrib2f(this.index+0,0,0);a.vertexAttrib2f(this.index+1,0,0);break;case 16:a.vertexAttrib3f(this.index+0,0,0,
0);a.vertexAttrib3f(this.index+1,0,0,0);a.vertexAttrib3f(this.index+2,0,0,0);break;case 20:a.vertexAttrib4f(this.index+0,0,0,0,0),a.vertexAttrib4f(this.index+1,0,0,0,0),a.vertexAttrib4f(this.index+2,0,0,0,0),a.vertexAttrib4f(this.index+3,0,0,0,0)}}},set_name:function(a){this.__internal=Y.startsWith(a,"openfl_");return this.name=a},__class__:Cg};var Hd=function(a,b,c,d){fa.call(this);this.enabled=!0;this.trackAsMenu=!1;this.useHandCursor=!0;this.__upState=null!=a?a:new ba;this.__overState=b;this.__downState=
c;this.set_hitTestState(null!=d?d:new ba);this.addEventListener("mouseDown",u(this,this.__this_onMouseDown));this.addEventListener("mouseOut",u(this,this.__this_onMouseOut));this.addEventListener("mouseOver",u(this,this.__this_onMouseOver));this.addEventListener("mouseUp",u(this,this.__this_onMouseUp));this.__tabEnabled=!0;this.set___currentState(this.__upState);null!=Hd.__initSymbol&&(a=Hd.__initSWF,this.__symbol=Hd.__initSymbol,Hd.__initSWF=null,Hd.__initSymbol=null,this.__fromSymbol(a,this.__symbol))};
g["openfl.display.SimpleButton"]=Hd;Hd.__name__="openfl.display.SimpleButton";Hd.__super__=fa;Hd.prototype=v(fa.prototype,{enabled:null,trackAsMenu:null,useHandCursor:null,__currentState:null,__downState:null,__hitTestState:null,__ignoreEvent:null,__overState:null,__previousStates:null,__symbol:null,__upState:null,__fromSymbol:function(a,b){this.__symbol=b;null!=b.downState&&this.set_downState(b.downState.__createObject(a));null!=b.hitState&&this.set_hitTestState(b.hitState.__createObject(a));null!=
b.overState&&this.set_overState(b.overState.__createObject(a));null!=b.upState&&this.set_upState(b.upState.__createObject(a))},__getBounds:function(a,b){fa.prototype.__getBounds.call(this,a,b);var c=va.__pool.get(),d=this.__currentState.__transform;c.a=d.a*b.a+d.b*b.c;c.b=d.a*b.b+d.b*b.d;c.c=d.c*b.a+d.d*b.c;c.d=d.c*b.b+d.d*b.d;c.tx=d.tx*b.a+d.ty*b.c+b.tx;c.ty=d.tx*b.b+d.ty*b.d+b.ty;this.__currentState.__getBounds(a,c);va.__pool.release(c)},__getRenderBounds:function(a,b){if(null!=this.__scrollRect)fa.prototype.__getRenderBounds.call(this,
a,b);else{fa.prototype.__getBounds.call(this,a,b);var c=va.__pool.get(),d=this.__currentState.__transform;c.a=d.a*b.a+d.b*b.c;c.b=d.a*b.b+d.b*b.d;c.c=d.c*b.a+d.d*b.c;c.d=d.c*b.b+d.d*b.d;c.tx=d.tx*b.a+d.ty*b.c+b.tx;c.ty=d.tx*b.b+d.ty*b.d+b.ty;this.__currentState.__getRenderBounds(a,c);va.__pool.release(c)}},__getCursor:function(){return this.useHandCursor&&!this.__ignoreEvent&&this.enabled?"button":null},__hitTest:function(a,b,c,d,e,f){var k=!1;if(null!=this.get_hitTestState())this.get_hitTestState().__hitTest(a,
b,c,d,e,f)&&(null!=d&&(0==d.length?d[0]=f:d[d.length-1]=f),k=!e||this.mouseEnabled);else if(null!=this.__currentState){if(!f.get_visible()||this.__isMask||e&&!this.mouseEnabled||null!=this.get_mask()&&!this.get_mask().__hitTestMask(a,b))return!1;this.__currentState.__hitTest(a,b,c,d,e,f)&&(k=e)}if(null!=d)for(;1<d.length&&d[d.length-1]==d[d.length-2];)d.pop();return k},__hitTestMask:function(a,b){var c=!1;this.__currentState.__hitTestMask(a,b)&&(c=!0);return c},__renderCairo:function(a){!this.__renderable||
0>=this.__worldAlpha||null==this.__currentState||(a.__pushMaskObject(this),this.__currentState.__renderCairo(a),a.__popMaskObject(this),this.__renderEvent(a))},__renderCairoMask:function(a){this.__currentState.__renderCairoMask(a)},__renderCanvas:function(a){!this.__renderable||0>=this.__worldAlpha||null==this.__currentState||(a.__pushMaskObject(this),this.__currentState.__renderCanvas(a),a.__popMaskObject(this),this.__renderEvent(a))},__renderCanvasMask:function(a){this.__currentState.__renderCanvasMask(a)},
__renderDOM:function(a){a.__pushMaskObject(this);for(var b=this.__previousStates.iterator();b.hasNext();)b.next().__renderDOM(a);this.__previousStates.set_length(0);null!=this.__currentState&&(this.__currentState.stage!=this.stage&&this.__currentState.__setStageReference(this.stage),this.__currentState.__renderDOM(a));a.__popMaskObject(this);this.__renderEvent(a)},__renderGL:function(a){!this.__renderable||0>=this.__worldAlpha||null==this.__currentState||(a.__pushMaskObject(this),this.__currentState.__renderGL(a),
a.__popMaskObject(this),this.__renderEvent(a))},__renderGLMask:function(a){null!=this.__currentState&&this.__currentState.__renderGLMask(a)},__setStageReference:function(a){fa.prototype.__setStageReference.call(this,a);null!=this.__currentState&&this.__currentState.__setStageReference(a);null!=this.get_hitTestState()&&this.get_hitTestState()!=this.__currentState&&this.get_hitTestState().__setStageReference(a)},__setTransformDirty:function(){fa.prototype.__setTransformDirty.call(this);null!=this.__currentState&&
this.__currentState.__setTransformDirty();null!=this.get_hitTestState()&&this.get_hitTestState()!=this.__currentState&&this.get_hitTestState().__setTransformDirty()},__update:function(a,b){fa.prototype.__update.call(this,a,b);b&&(null!=this.__currentState&&this.__currentState.__update(a,!0),null!=this.get_hitTestState()&&this.get_hitTestState()!=this.__currentState&&this.get_hitTestState().__update(a,!0))},__updateTransforms:function(a){fa.prototype.__updateTransforms.call(this,a);null!=this.__currentState&&
this.__currentState.__updateTransforms();null!=this.get_hitTestState()&&this.get_hitTestState()!=this.__currentState&&this.get_hitTestState().__updateTransforms()},get_downState:function(){return this.__downState},set_downState:function(a){null!=this.__downState&&this.__currentState==this.__downState&&this.set___currentState(this.__downState);return this.__downState=a},get_hitTestState:function(){return this.__hitTestState},set_hitTestState:function(a){null!=this.__hitTestState&&this.__hitTestState!=
a&&this.__hitTestState!=this.get_downState()&&this.__hitTestState!=this.get_upState()&&this.__hitTestState!=this.get_overState()&&(this.__hitTestState.__renderParent=null);null!=a&&(a.__renderParent=this,a.__renderDirty||(a.__renderDirty=!0,a.__setParentRenderDirty()));return this.__hitTestState=a},get_overState:function(){return this.__overState},set_overState:function(a){null!=this.__overState&&this.__currentState==this.__overState&&this.set___currentState(a);return this.__overState=a},get_upState:function(){return this.__upState},
set_upState:function(a){null!=this.__upState&&this.__currentState==this.__upState&&this.set___currentState(a);return this.__upState=a},set___currentState:function(a){null!=this.__currentState&&this.__currentState!=this.get_hitTestState()&&(this.__currentState.__renderParent=null);null!=a&&null!=a.parent&&a.parent.removeChild(a);ba.__supportDOM&&null==this.__previousStates&&(this.__previousStates=M.toObjectVector(null));if(a!=this.__currentState){if(ba.__supportDOM){null!=this.__currentState&&(this.__currentState.__setStageReference(null),
this.__previousStates.push(this.__currentState));var b=this.__previousStates.indexOf(a,0);-1<b&&this.__previousStates.splice(b,1)}null!=a&&(a.__renderParent=this,a.__renderDirty||(a.__renderDirty=!0,a.__setParentRenderDirty()));this.__renderDirty||(this.__renderDirty=!0,this.__setParentRenderDirty())}return this.__currentState=a},__this_onMouseDown:function(a){this.enabled&&this.set___currentState(this.get_downState())},__this_onMouseOut:function(a){this.__ignoreEvent=!1;this.get_upState()!=this.__currentState&&
this.set___currentState(this.get_upState())},__this_onMouseOver:function(a){a.buttonDown&&(this.__ignoreEvent=!0);this.get_overState()!=this.__currentState&&null!=this.get_overState()&&!this.__ignoreEvent&&this.enabled&&this.set___currentState(this.get_overState())},__this_onMouseUp:function(a){this.__ignoreEvent=!1;this.enabled&&null!=this.get_overState()?this.set___currentState(this.get_overState()):this.set___currentState(this.get_upState())},__class__:Hd});var Eg=function(a,b){ma.call(this);this.set_name(null);
this.__color=-1;this.__colorSplit=[255,255,255];this.__colorString="#FFFFFF";this.__contentsScaleFactor=1;this.__deltaTime=this.__currentTabOrderIndex=0;this.__displayState=2;this.__logicalHeight=this.__logicalWidth=this.__lastClickTime=this.__mouseY=this.__mouseX=0;this.__displayMatrix=new va;this.__displayRect=new ya;this.__renderDirty=!0;this.stage3Ds=M.toObjectVector(null);this.stage3Ds.push(new Bh(this));this.stage3Ds.push(new Bh(this));this.stage3Ds.push(new Bh(this));this.stage3Ds.push(new Bh(this));
this.stage=this;this.align=6;this.allowsFullScreenInteractive=this.allowsFullScreen=!0;this.__quality=1;this.__scaleMode=2;this.showDefaultContextMenu=!0;this.softKeyboardRect=new ya;this.stageFocusRect=!0;this.__macKeyboard=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent)||/Mac/.test(navigator.platform);this.__clearBeforeRender=!0;this.__forceRender=!1;this.__stack=[];this.__rollOutStack=[];this.__mouseOutStack=[];this.__touchData=new Zb;this.application=a.application;
this.window=a;this.set_color(b);this.__contentsScaleFactor=a.__scale;this.__wasFullscreen=a.__fullscreen;this.__resize();null==Qb.get_current().stage&&this.stage.addChild(Qb.get_current())};g["openfl.display.Stage"]=Eg;Eg.__name__="openfl.display.Stage";Eg.__interfaces__=[qa];Eg.__super__=ma;Eg.prototype=v(ma.prototype,{align:null,allowsFullScreen:null,allowsFullScreenInteractive:null,application:null,context3D:null,showDefaultContextMenu:null,softKeyboardRect:null,stage3Ds:null,stageFocusRect:null,
stageHeight:null,stageWidth:null,window:null,__cacheFocus:null,__clearBeforeRender:null,__color:null,__colorSplit:null,__colorString:null,__contentsScaleFactor:null,__currentTabOrderIndex:null,__deltaTime:null,__displayMatrix:null,__displayRect:null,__displayState:null,__dragBounds:null,__dragObject:null,__dragOffsetX:null,__dragOffsetY:null,__focus:null,__forceRender:null,__fullScreenSourceRect:null,__invalidated:null,__lastClickTime:null,__logicalWidth:null,__logicalHeight:null,__macKeyboard:null,
__mouseDownLeft:null,__mouseDownMiddle:null,__mouseDownRight:null,__mouseOutStack:null,__mouseOverTarget:null,__mouseX:null,__mouseY:null,__pendingMouseEvent:null,__pendingMouseX:null,__pendingMouseY:null,__quality:null,__renderer:null,__rendering:null,__rollOutStack:null,__scaleMode:null,__stack:null,__touchData:null,__transparent:null,__wasDirty:null,__wasFullscreen:null,__primaryTouch:null,localToGlobal:function(a){return a.clone()},__broadcastEvent:function(a){var b=a.type,c=ba.__broadcastEvents;
if(null!=F[b]?c.existsReserved(b):c.h.hasOwnProperty(b))for(b=a.type,c=ba.__broadcastEvents,b=null!=F[b]?c.getReserved(b):c.h[b],c=0;c<b.length;){var d=b[c];++c;if(d.stage==this||null==d.stage)try{d.__dispatch(a)}catch(e){ab.lastException=e,this.__handleError(e instanceof W?e.val:e)}}},__createRenderer:function(){var a=1;1<this.window.__scale&&(a=this.window.devicePixelRatio||1);var b=this.window.__width*this.window.__scale|0,c=this.window.__height*this.window.__scale|0;switch(this.window.context.type){case "canvas":this.__renderer=
new fe(this.window.context.canvas2D);Ka.__cast(this.__renderer,fe).pixelRatio=a;break;case "dom":this.__renderer=new Yi(this.window.context.dom);Ka.__cast(this.__renderer,Yi).pixelRatio=a;break;case "opengl":case "opengles":case "webgl":this.context3D=new kb(this),this.context3D.configureBackBuffer(b,c,0,!0,!0,!0),this.context3D.present(),this.__renderer=new Ya(this.context3D)}null!=this.__renderer&&(a=this.get_quality(),this.__renderer.__allowSmoothing=2!=a,this.__renderer.__worldTransform=this.__displayMatrix,
this.__renderer.__stage=this,this.__renderer.__resize(b,c))},__dispatchEvent:function(a){try{return ma.prototype.__dispatchEvent.call(this,a)}catch(b){return ab.lastException=b,this.__handleError(b instanceof W?b.val:b),!1}},__dispatchPendingMouseEvent:function(){this.__pendingMouseEvent&&(this.__onMouse("mouseMove",this.__pendingMouseX,this.__pendingMouseY,0),this.__pendingMouseEvent=!1)},__dispatchStack:function(a,b){try{var c=b.length;if(0==c){a.eventPhase=2;var d=a.target;d.__dispatch(a)}else{a.eventPhase=
1;a.target=b[b.length-1];for(var e=0,f=c-1;e<f;){var k=e++;b[k].__dispatch(a);if(a.__isCanceled)return}a.eventPhase=2;d=a.target;d.__dispatch(a);if(!a.__isCanceled&&a.bubbles)for(a.eventPhase=3,d=c-2;0<=d;){b[d].__dispatch(a);if(a.__isCanceled)break;--d}}}catch(m){ab.lastException=m,this.__handleError(m instanceof W?m.val:m)}},__dispatchTarget:function(a,b){try{return a.__dispatchEvent(b)}catch(c){return ab.lastException=c,this.__handleError(c instanceof W?c.val:c),!1}},__drag:function(a){var b=this.__dragObject.parent;
if(null!=b){b=b.__getWorldTransform();var c=b.a*b.d-b.b*b.c;if(0==c)a.x=-b.tx,a.y=-b.ty;else{var d=1/c*(b.c*(b.ty-a.y)+b.d*(a.x-b.tx));a.y=1/c*(b.a*(a.y-b.ty)+b.b*(b.tx-a.x));a.x=d}}b=a.x+this.__dragOffsetX;a=a.y+this.__dragOffsetY;null!=this.__dragBounds&&(b<this.__dragBounds.x?b=this.__dragBounds.x:b>this.__dragBounds.get_right()&&(b=this.__dragBounds.get_right()),a<this.__dragBounds.y?a=this.__dragBounds.y:a>this.__dragBounds.get_bottom()&&(a=this.__dragBounds.get_bottom()));this.__dragObject.set_x(b);
this.__dragObject.set_y(a)},__getInteractive:function(a){null!=a&&a.push(this);return!0},__globalToLocal:function(a,b){a!=b&&b.copyFrom(a);return b},__handleError:function(a){var b=new $f("uncaughtError",!0,!0,a);try{Qb.get_current().__loaderInfo.uncaughtErrorEvents.dispatchEvent(b)}catch(e){ab.lastException=e}if(!b.__preventDefault){try{var c=ab.lastException;if(null!=c&&Object.prototype.hasOwnProperty.call(c,"stack")&&null!=c.stack&&""!=c.stack)console.log(c.stack),a.stack=c.stack;else{var d=ab.toString(ab.callStack());
console.log(d)}}catch(e){ab.lastException=e}throw a;}},__onKey:function(a,b,c){this.__dispatchPendingMouseEvent();Gb.__altKey=fb.get_altKey(c);Gb.__commandKey=fb.get_metaKey(c);Gb.__ctrlKey=fb.get_ctrlKey(c);Gb.__shiftKey=fb.get_shiftKey(c);var d=[];null==this.__focus?this.__getInteractive(d):this.__focus.__getInteractive(d);if(0<d.length){switch(b){case 1073741908:case 1073741909:case 1073741910:case 1073741911:case 1073741912:case 1073741913:case 1073741914:case 1073741915:case 1073741916:case 1073741917:case 1073741918:case 1073741919:case 1073741920:case 1073741921:case 1073741922:case 1073741923:case 1073742044:var e=
3;break;case 1073742048:case 1073742049:case 1073742050:case 1073742051:e=1;break;case 1073742052:case 1073742053:case 1073742054:case 1073742055:e=2;break;default:e=0}switch(b){case 8:b=8;break;case 9:b=9;break;case 13:b=13;break;case 27:b=27;break;case 32:b=32;break;case 33:b=49;break;case 34:b=222;break;case 35:b=51;break;case 36:b=52;break;case 37:b=53;break;case 38:b=55;break;case 39:b=222;break;case 40:b=57;break;case 41:b=48;break;case 42:b=56;break;case 44:b=188;break;case 45:b=189;break;
case 46:b=190;break;case 47:b=191;break;case 48:b=48;break;case 49:b=49;break;case 50:b=50;break;case 51:b=51;break;case 52:b=52;break;case 53:b=53;break;case 54:b=54;break;case 55:b=55;break;case 56:b=56;break;case 57:b=57;break;case 58:b=186;break;case 59:b=186;break;case 60:b=60;break;case 61:b=187;break;case 62:b=190;break;case 63:b=191;break;case 64:b=50;break;case 91:b=219;break;case 92:b=220;break;case 93:b=221;break;case 94:b=54;break;case 95:b=189;break;case 96:b=192;break;case 97:b=65;break;
case 98:b=66;break;case 99:b=67;break;case 100:b=68;break;case 101:b=69;break;case 102:b=70;break;case 103:b=71;break;case 104:b=72;break;case 105:b=73;break;case 106:b=74;break;case 107:b=75;break;case 108:b=76;break;case 109:b=77;break;case 110:b=78;break;case 111:b=79;break;case 112:b=80;break;case 113:b=81;break;case 114:b=82;break;case 115:b=83;break;case 116:b=84;break;case 117:b=85;break;case 118:b=86;break;case 119:b=87;break;case 120:b=88;break;case 121:b=89;break;case 122:b=90;break;case 127:b=
46;break;case 1073741881:b=20;break;case 1073741882:b=112;break;case 1073741883:b=113;break;case 1073741884:b=114;break;case 1073741885:b=115;break;case 1073741886:b=116;break;case 1073741887:b=117;break;case 1073741888:b=118;break;case 1073741889:b=119;break;case 1073741890:b=120;break;case 1073741891:b=121;break;case 1073741892:b=122;break;case 1073741893:b=123;break;case 1073741894:b=301;break;case 1073741895:b=145;break;case 1073741896:b=19;break;case 1073741897:b=45;break;case 1073741898:b=36;
break;case 1073741899:b=33;break;case 1073741901:b=35;break;case 1073741902:b=34;break;case 1073741903:b=39;break;case 1073741904:b=37;break;case 1073741905:b=40;break;case 1073741906:b=38;break;case 1073741907:b=144;break;case 1073741908:b=111;break;case 1073741909:b=106;break;case 1073741910:b=109;break;case 1073741911:b=107;break;case 1073741912:b=13;break;case 1073741913:b=97;break;case 1073741914:b=98;break;case 1073741915:b=99;break;case 1073741916:b=100;break;case 1073741917:b=101;break;case 1073741918:b=
102;break;case 1073741919:b=103;break;case 1073741920:b=104;break;case 1073741921:b=105;break;case 1073741922:b=96;break;case 1073741923:b=110;break;case 1073741925:b=302;break;case 1073741928:b=124;break;case 1073741929:b=125;break;case 1073741930:b=126;break;case 1073741982:b=13;break;case 1073742044:b=110;break;case 1073742048:b=17;break;case 1073742049:b=16;break;case 1073742050:b=18;break;case 1073742051:b=15;break;case 1073742052:b=17;break;case 1073742053:b=16;break;case 1073742054:b=18;break;
case 1073742055:b=15}var f=mm.__getCharCode(b,fb.get_shiftKey(c));e=new ag(a,!0,!0,f,b,e,this.__macKeyboard?fb.get_ctrlKey(c)||fb.get_metaKey(c):fb.get_ctrlKey(c),fb.get_altKey(c),fb.get_shiftKey(c),fb.get_ctrlKey(c),fb.get_metaKey(c));d.reverse();this.__dispatchStack(e,d);if(e.__preventDefault)"keyDown"==a?this.window.onKeyDown.cancel():this.window.onKeyUp.cancel();else if("keyDown"==a&&9==b){d=[];this.__tabTest(d);e=-1;a=null;b=fb.get_shiftKey(c)?-1:1;if(1<d.length)if(fc.sort(d,function(a,b){return a.get_tabIndex()-
b.get_tabIndex()}),-1==d[d.length-1].get_tabIndex())e=null!=this.get_focus()?0:this.__currentTabOrderIndex;else{for(e=0;e<d.length;){if(-1<d[e].get_tabIndex()){0<e&&d.splice(0,e);break}++e}null!=this.get_focus()?(e=d.indexOf(this.get_focus()),e=0>e?0:e+b):e=this.__currentTabOrderIndex}else 1==d.length&&(a=d[0],this.get_focus()==a&&(a=null));1==d.length||0==d.length&&null!=this.get_focus()?e=0:1<d.length&&(0>e&&(e+=d.length),e%=d.length,a=d[e],a==this.get_focus()&&(e+=b,0>e&&(e+=d.length),e%=d.length,
a=d[e]));b=null;null!=this.get_focus()&&(b=new Re("keyFocusChange",!0,!0,a,fb.get_shiftKey(c),0),d=[],this.get_focus().__getInteractive(d),d.reverse(),this.__dispatchStack(b,d));null!=b&&b.isDefaultPrevented()||(this.__currentTabOrderIndex=e,null!=a&&this.set_focus(a))}}},__onLimeCreateWindow:function(a){if(this.window==a){var b=u(this,this.__onLimeWindowActivate);a.onActivate.add(function(){b(a)});var c=u(this,this.__onLimeWindowClose);a.onClose.add(function(){c(a)},!1,-9E3);var d=u(this,this.__onLimeWindowDeactivate);
a.onDeactivate.add(function(){d(a)});var e=u(this,this.__onLimeWindowDropFile);a.onDropFile.add(function(b){e(a,b)});var f=u(this,this.__onLimeWindowEnter);a.onEnter.add(function(){f(a)});var k=u(this,this.__onLimeWindowExpose);a.onExpose.add(function(){k(a)});var m=u(this,this.__onLimeWindowFocusIn);a.onFocusIn.add(function(){m(a)});var h=u(this,this.__onLimeWindowFocusOut);a.onFocusOut.add(function(){h(a)});var n=u(this,this.__onLimeWindowFullscreen);a.onFullscreen.add(function(){n(a)});var g=u(this,
this.__onLimeKeyDown);a.onKeyDown.add(function(b,c){g(a,b,c)});var l=u(this,this.__onLimeKeyUp);a.onKeyUp.add(function(b,c){l(a,b,c)});var p=u(this,this.__onLimeWindowLeave);a.onLeave.add(function(){p(a)});var y=u(this,this.__onLimeWindowMinimize);a.onMinimize.add(function(){y(a)});var r=u(this,this.__onLimeMouseDown);a.onMouseDown.add(function(b,c,d){r(a,b,c,d)});var q=u(this,this.__onLimeMouseMove);a.onMouseMove.add(function(b,c){q(a,b,c)});var t=u(this,this.__onLimeMouseMoveRelative);a.onMouseMoveRelative.add(function(b,
c){t(a,b,c)});var z=u(this,this.__onLimeMouseUp);a.onMouseUp.add(function(b,c,d){z(a,b,c,d)});var w=u(this,this.__onLimeMouseWheel);a.onMouseWheel.add(function(b,c,d){w(a,b,c,d)});var O=u(this,this.__onLimeWindowMove);a.onMove.add(function(b,c){O(a,b,c)});a.onRender.add(u(this,this.__onLimeRender));a.onRenderContextLost.add(u(this,this.__onLimeRenderContextLost));a.onRenderContextRestored.add(u(this,this.__onLimeRenderContextRestored));var v=u(this,this.__onLimeWindowResize);a.onResize.add(function(b,
c){v(a,b,c)});var A=u(this,this.__onLimeWindowRestore);a.onRestore.add(function(){A(a)});var x=u(this,this.__onLimeTextEdit);a.onTextEdit.add(function(b,c,d){x(a,b,c,d)});var B=u(this,this.__onLimeTextInput);a.onTextInput.add(function(b){B(a,b)});this.__onLimeWindowCreate(a)}},__onLimeGamepadAxisMove:function(a,b,c){try{lb.__onGamepadAxisMove(a,b,c)}catch(d){ab.lastException=d,this.__handleError(d instanceof W?d.val:d)}},__onLimeGamepadButtonDown:function(a,b){try{lb.__onGamepadButtonDown(a,b)}catch(c){ab.lastException=
c,this.__handleError(c instanceof W?c.val:c)}},__onLimeGamepadButtonUp:function(a,b){try{lb.__onGamepadButtonUp(a,b)}catch(c){ab.lastException=c,this.__handleError(c instanceof W?c.val:c)}},__onLimeGamepadConnect:function(a){try{lb.__onGamepadConnect(a)}catch(f){ab.lastException=f,this.__handleError(f instanceof W?f.val:f)}var b=u(this,this.__onLimeGamepadAxisMove);a.onAxisMove.add(function(c,d){b(a,c,d)});var c=u(this,this.__onLimeGamepadButtonDown);a.onButtonDown.add(function(b){c(a,b)});var d=
u(this,this.__onLimeGamepadButtonUp);a.onButtonUp.add(function(b){d(a,b)});var e=u(this,this.__onLimeGamepadDisconnect);a.onDisconnect.add(function(){e(a)})},__onLimeGamepadDisconnect:function(a){try{lb.__onGamepadDisconnect(a)}catch(b){ab.lastException=b,this.__handleError(b instanceof W?b.val:b)}},__onLimeKeyDown:function(a,b,c){null!=this.window&&this.window==a&&this.__onKey("keyDown",b,c)},__onLimeKeyUp:function(a,b,c){null!=this.window&&this.window==a&&this.__onKey("keyUp",b,c)},__onLimeModuleExit:function(a){null!=
this.window&&(a=new R("deactivate"),this.__broadcastEvent(a))},__onLimeMouseDown:function(a,b,c,d){if(null!=this.window&&this.window==a){this.__dispatchPendingMouseEvent();switch(d){case 1:var e="middleMouseDown";break;case 2:e="rightMouseDown";break;default:e="mouseDown"}this.__onMouse(e,b*a.__scale|0,c*a.__scale|0,d);this.showDefaultContextMenu||2!=d||a.onMouseDown.cancel()}},__onLimeMouseMove:function(a,b,c){null!=this.window&&this.window==a&&(this.__pendingMouseEvent=!0,this.__pendingMouseX=b*
a.__scale|0,this.__pendingMouseY=c*a.__scale|0)},__onLimeMouseMoveRelative:function(a,b,c){},__onLimeMouseUp:function(a,b,c,d){if(null!=this.window&&this.window==a){this.__dispatchPendingMouseEvent();switch(d){case 1:var e="middleMouseUp";break;case 2:e="rightMouseUp";break;default:e="mouseUp"}this.__onMouse(e,b*a.__scale|0,c*a.__scale|0,d);this.showDefaultContextMenu||2!=d||a.onMouseUp.cancel()}},__onLimeMouseWheel:function(a,b,c,d){null!=this.window&&this.window==a&&(this.__dispatchPendingMouseEvent(),
d==ni.PIXELS?this.__onMouseWheel(b*a.__scale|0,c*a.__scale|0,d):this.__onMouseWheel(b|0,c|0,d))},__onLimeRender:function(a){if(!this.__rendering){this.__rendering=!0;this.__broadcastEvent(new R("enterFrame"));this.__broadcastEvent(new R("frameConstructed"));this.__broadcastEvent(new R("exitFrame"));this.__renderable=!0;this.__enterFrame(this.__deltaTime);this.__deltaTime=0;a=null!=this.__renderer&&(this.__renderDirty||this.__forceRender);if(this.__invalidated&&a){this.__invalidated=!1;var b=new R("render");
this.__broadcastEvent(b)}this.__update(!1,!0);if(null!=this.__renderer){if(null!=this.context3D){for(b=this.stage3Ds.iterator();b.hasNext();){var c=b.next();this.context3D.__renderStage3D(c)}this.context3D.__present&&(a=!0)}a?(null==this.context3D&&this.__renderer.__clear(),this.__renderer.__render(this)):null==this.context3D&&this.window.onRender.cancel();null!=this.context3D&&(this.context3D.__present?(this.__renderer.__cleared||this.__renderer.__clear(),this.context3D.__present=!1,this.context3D.__cleared=
!1):this.window.onRender.cancel());this.__renderer.__cleared=!1}this.__rendering=!1}},__onLimeRenderContextLost:function(){this.context3D=this.__renderer=null;for(var a=this.stage3Ds.iterator();a.hasNext();)a.next().__lostContext()},__onLimeRenderContextRestored:function(a){this.__createRenderer();for(a=this.stage3Ds.iterator();a.hasNext();)a.next().__restoreContext()},__onLimeTextEdit:function(a,b,c,d){},__onLimeTextInput:function(a,b){if(null!=this.window&&this.window==a){var c=[];null==this.__focus?
this.__getInteractive(c):this.__focus.__getInteractive(c);b=new td("textInput",!0,!0,b);0<c.length?(c.reverse(),this.__dispatchStack(b,c)):this.__dispatchEvent(b);b.isDefaultPrevented()&&a.onTextInput.cancel()}},__onLimeTouchCancel:function(a){this.__primaryTouch==a&&(this.__primaryTouch=null);this.__onTouch("touchEnd",a)},__onLimeTouchMove:function(a){this.__onTouch("touchMove",a)},__onLimeTouchEnd:function(a){this.__primaryTouch==a&&(this.__primaryTouch=null);this.__onTouch("touchEnd",a)},__onLimeTouchStart:function(a){null==
this.__primaryTouch&&(this.__primaryTouch=a);this.__onTouch("touchBegin",a)},__onLimeUpdate:function(a){this.__deltaTime=a;this.__dispatchPendingMouseEvent()},__onLimeWindowActivate:function(a){},__onLimeWindowClose:function(a){this.window==a&&(this.window=null);this.__primaryTouch=null;a=new R("deactivate");this.__broadcastEvent(a)},__onLimeWindowCreate:function(a){null!=this.window&&this.window==a&&null!=a.context&&this.__createRenderer()},__onLimeWindowDeactivate:function(a){},__onLimeWindowDropFile:function(a,
b){},__onLimeWindowEnter:function(a){},__onLimeWindowExpose:function(a){null!=this.window&&this.window==a&&(this.__renderDirty=!0)},__onLimeWindowFocusIn:function(a){null!=this.window&&this.window==a&&(this.__renderDirty=!0,a=new R("activate"),this.__broadcastEvent(a),this.set_focus(this.__cacheFocus))},__onLimeWindowFocusOut:function(a){null!=this.window&&this.window==a&&(this.__primaryTouch=null,a=new R("deactivate"),this.__broadcastEvent(a),a=this.get_focus(),this.set_focus(null),this.__cacheFocus=
a,Gb.__altKey=!1,Gb.__commandKey=!1,Gb.__ctrlKey=!1,Gb.__shiftKey=!1)},__onLimeWindowFullscreen:function(a){null!=this.window&&this.window==a&&(this.__resize(),this.__wasFullscreen||(this.__wasFullscreen=!0,2==this.__displayState&&(this.__displayState=1),this.__dispatchEvent(new Fe("fullScreen",!1,!1,!0,!0))))},__onLimeWindowLeave:function(a){null==this.window||this.window!=a||Gb.__buttonDown||(this.__dispatchPendingMouseEvent(),a=new R("mouseLeave"),this.__dispatchEvent(a))},__onLimeWindowMinimize:function(a){},
__onLimeWindowMove:function(a,b,c){},__onLimeWindowResize:function(a,b,c){null!=this.window&&this.window==a&&(this.__resize(),this.__wasFullscreen&&!a.__fullscreen&&(this.__wasFullscreen=!1,this.__displayState=2,this.__dispatchEvent(new Fe("fullScreen",!1,!1,!1,!0))))},__onLimeWindowRestore:function(a){null!=this.window&&this.window==a&&this.__wasFullscreen&&!a.__fullscreen&&(this.__wasFullscreen=!1,this.__displayState=2,this.__dispatchEvent(new Fe("fullScreen",!1,!1,!1,!0)))},__onMouse:function(a,
b,c,d){if(!(2<d)){var e=ob.__pool.get();e.setTo(b,c);b=this.__displayMatrix;c=b.a*b.d-b.b*b.c;if(0==c)e.x=-b.tx,e.y=-b.ty;else{var f=1/c*(b.c*(b.ty-e.y)+b.d*(e.x-b.tx));e.y=1/c*(b.a*(e.y-b.ty)+b.b*(b.tx-e.x));e.x=f}this.__mouseX=e.x;this.__mouseY=e.y;c=[];this.__hitTest(this.__mouseX,this.__mouseY,!0,c,!0,this)?f=c[c.length-1]:(f=this,c=[this]);null==f&&(f=this);var k=null;switch(a){case "middleMouseDown":this.__mouseDownMiddle=f;break;case "middleMouseUp":this.__mouseDownMiddle==f&&(k="middleClick");
this.__mouseDownMiddle=null;break;case "mouseDown":f.__allowMouseFocus()?null!=this.get_focus()?(b=new Re("mouseFocusChange",!0,!0,f,!1,0),this.__dispatchStack(b,c),b.isDefaultPrevented()||this.set_focus(f)):this.set_focus(f):this.set_focus(null);this.__mouseDownLeft=f;Gb.__buttonDown=!0;break;case "mouseUp":null!=this.__mouseDownLeft&&(Gb.__buttonDown=!1,this.__mouseDownLeft==f?k="click":(b=Gb.__create("releaseOutside",1,this.__mouseX,this.__mouseY,new ob(this.__mouseX,this.__mouseY),this),this.__mouseDownLeft.dispatchEvent(b)),
this.__mouseDownLeft=null);break;case "rightMouseDown":this.__mouseDownRight=f;break;case "rightMouseUp":this.__mouseDownRight==f&&(k="rightClick"),this.__mouseDownRight=null}b=ob.__pool.get();var m=Gb.__create(a,d,this.__mouseX,this.__mouseY,f.__globalToLocal(e,b),f);this.__dispatchStack(m,c);null!=k&&(m=Gb.__create(k,d,this.__mouseX,this.__mouseY,f.__globalToLocal(e,b),f),this.__dispatchStack(m,c),"mouseUp"==a&&Ka.__cast(f,fa).doubleClickEnabled&&(a=Qb.getTimer(),500>a-this.__lastClickTime?(m=Gb.__create("doubleClick",
d,this.__mouseX,this.__mouseY,f.__globalToLocal(e,b),f),this.__dispatchStack(m,c),this.__lastClickTime=0):this.__lastClickTime=a));if("auto"==Xk.__cursor&&!Xk.__hidden){k=null;if(null!=this.__mouseDownLeft)k=this.__mouseDownLeft.__getCursor();else for(a=0;a<c.length;)if(k=c[a],++a,k=k.__getCursor(),null!=k){this.window.set_cursor(nm.toLimeCursor(k));break}null==k&&this.window.set_cursor(dd.ARROW)}f!=this.__mouseOverTarget&&null!=this.__mouseOverTarget&&(a=Gb.__create("mouseOut",d,this.__mouseX,this.__mouseY,
this.__mouseOverTarget.__globalToLocal(e,b),this.__mouseOverTarget),this.__dispatchStack(a,this.__mouseOutStack));for(m=0;m<this.__rollOutStack.length;)k=this.__rollOutStack[m],-1==c.indexOf(k)?(ra.remove(this.__rollOutStack,k),a=Gb.__create("rollOut",d,this.__mouseX,this.__mouseY,this.__mouseOverTarget.__globalToLocal(e,b),this.__mouseOverTarget),a.bubbles=!1,this.__dispatchTarget(k,a)):++m;for(k=0;k<c.length;)m=c[k],++k,-1==this.__rollOutStack.indexOf(m)&&null!=this.__mouseOverTarget&&(m.hasEventListener("rollOver")&&
(a=Gb.__create("rollOver",d,this.__mouseX,this.__mouseY,this.__mouseOverTarget.__globalToLocal(e,b),m),a.bubbles=!1,this.__dispatchTarget(m,a)),(m.hasEventListener("rollOut")||m.hasEventListener("rollOver"))&&this.__rollOutStack.push(m));f!=this.__mouseOverTarget&&(null!=f&&(a=Gb.__create("mouseOver",d,this.__mouseX,this.__mouseY,f.__globalToLocal(e,b),f),this.__dispatchStack(a,c)),this.__mouseOverTarget=f,this.__mouseOutStack=c);null!=this.__dragObject&&(this.__drag(e),d=null,this.__mouseOverTarget==
this.__dragObject?(c=this.__dragObject.mouseEnabled,f=this.__dragObject.mouseChildren,this.__dragObject.mouseEnabled=!1,this.__dragObject.mouseChildren=!1,a=[],this.__hitTest(this.__mouseX,this.__mouseY,!0,a,!0,this)&&(d=a[a.length-1]),this.__dragObject.mouseEnabled=c,this.__dragObject.mouseChildren=f):this.__mouseOverTarget!=this&&(d=this.__mouseOverTarget),this.__dragObject.dropTarget=d);ob.__pool.release(e);ob.__pool.release(b)}},__onMouseWheel:function(a,b,c){var d=this.__mouseX,e=this.__mouseY;
a=[];if(this.__hitTest(this.__mouseX,this.__mouseY,!0,a,!0,this))var f=a[a.length-1];else f=this,a=[this];null==f&&(f=this);c=ob.__pool.get();c.setTo(d,e);d=this.__displayMatrix;e=d.a*d.d-d.b*d.c;if(0==e)c.x=-d.tx,c.y=-d.ty;else{var k=1/e*(d.c*(d.ty-c.y)+d.d*(c.x-d.tx));c.y=1/e*(d.a*(c.y-d.ty)+d.b*(d.tx-c.x));c.x=k}b|=0;b=Gb.__create("mouseWheel",0,this.__mouseX,this.__mouseY,f.__globalToLocal(c,c),f,b);b.cancelable=!0;this.__dispatchStack(b,a);b.isDefaultPrevented()&&this.window.onMouseWheel.cancel();
ob.__pool.release(c)},__onTouch:function(a,b){var c=ob.__pool.get();c.setTo(Math.round(b.x*this.window.__width*this.window.__scale),Math.round(b.y*this.window.__height*this.window.__scale));var d=this.__displayMatrix,e=d.a*d.d-d.b*d.c;if(0==e)c.x=-d.tx,c.y=-d.ty;else{var f=1/e*(d.c*(d.ty-c.y)+d.d*(c.x-d.tx));c.y=1/e*(d.a*(c.y-d.ty)+d.b*(d.tx-c.x));c.x=f}d=c.x;e=c.y;f=[];if(this.__hitTest(d,e,!1,f,!0,this))var k=f[f.length-1];else k=this,f=[this];null==k&&(k=this);var m=b.id;if(this.__touchData.h.hasOwnProperty(m))var h=
this.__touchData.h[m];else h=xh.__pool.get(),h.reset(),h.touch=b,this.__touchData.h[m]=h;var n=null,g=!1;switch(a){case "touchBegin":h.touchDownTarget=k;break;case "touchEnd":h.touchDownTarget==k&&(n="touchTap"),h.touchDownTarget=null,g=!0}var l=ob.__pool.get(),p=this.__primaryTouch==b;a=oc.__create(a,null,d,e,k.__globalToLocal(c,l),k);a.touchPointID=m;a.isPrimaryTouchPoint=p;a.pressure=b.pressure;this.__dispatchStack(a,f);null!=n&&(a=oc.__create(n,null,d,e,k.__globalToLocal(c,l),k),a.touchPointID=
m,a.isPrimaryTouchPoint=p,a.pressure=b.pressure,this.__dispatchStack(a,f));n=h.touchOverTarget;k!=n&&null!=n&&(a=oc.__create("touchOut",null,d,e,n.__globalToLocal(c,l),n),a.touchPointID=m,a.isPrimaryTouchPoint=p,a.pressure=b.pressure,this.__dispatchTarget(n,a));for(var y=h.rollOutStack,r,q=0;q<y.length;)r=y[q],-1==f.indexOf(r)?(ra.remove(y,r),a=oc.__create("touchRollOut",null,d,e,n.__globalToLocal(c,l),n),a.touchPointID=m,a.isPrimaryTouchPoint=p,a.bubbles=!1,a.pressure=b.pressure,this.__dispatchTarget(r,
a)):++q;for(r=0;r<f.length;)q=f[r],++r,-1==y.indexOf(q)&&(q.hasEventListener("touchRollOver")&&(a=oc.__create("touchRollOver",null,d,e,n.__globalToLocal(c,l),q),a.touchPointID=m,a.isPrimaryTouchPoint=p,a.bubbles=!1,a.pressure=b.pressure,this.__dispatchTarget(q,a)),q.hasEventListener("touchRollOut")&&y.push(q));k!=n&&(null!=k&&(a=oc.__create("touchOver",null,d,e,k.__globalToLocal(c,l),k),a.touchPointID=m,a.isPrimaryTouchPoint=p,a.bubbles=!0,a.pressure=b.pressure,this.__dispatchTarget(k,a)),h.touchOverTarget=
k);ob.__pool.release(c);ob.__pool.release(l);g&&(this.__touchData.remove(m),h.reset(),xh.__pool.release(h))},__registerLimeModule:function(a){a.onCreateWindow.add(u(this,this.__onLimeCreateWindow));a.onUpdate.add(u(this,this.__onLimeUpdate));a.onExit.add(u(this,this.__onLimeModuleExit),!1,0);for(a=lc.devices.iterator();a.hasNext();){var b=a.next();this.__onLimeGamepadConnect(b)}lc.onConnect.add(u(this,this.__onLimeGamepadConnect));Fc.onStart.add(u(this,this.__onLimeTouchStart));Fc.onMove.add(u(this,
this.__onLimeTouchMove));Fc.onEnd.add(u(this,this.__onLimeTouchEnd));Fc.onCancel.add(u(this,this.__onLimeTouchCancel))},__resize:function(){var a=this.stageWidth,b=this.stageHeight,c=this.window.__width*this.window.__scale|0,d=this.window.__height*this.window.__scale|0;this.__logicalWidth=c;this.__logicalHeight=d;this.__displayMatrix.identity();if(null!=this.get_fullScreenSourceRect()&&this.window.__fullscreen){this.stageWidth=this.get_fullScreenSourceRect().width|0;this.stageHeight=this.get_fullScreenSourceRect().height|
0;var e=c/this.stageWidth,f=d/this.stageHeight;this.__displayMatrix.translate(-this.get_fullScreenSourceRect().x,-this.get_fullScreenSourceRect().y);this.__displayMatrix.scale(e,f);this.__displayRect.setTo(this.get_fullScreenSourceRect().get_left(),this.get_fullScreenSourceRect().get_right(),this.get_fullScreenSourceRect().get_top(),this.get_fullScreenSourceRect().get_bottom())}else{if(0==this.__logicalWidth&&0==this.__logicalHeight)this.stageWidth=c,this.stageHeight=d;else{this.stageWidth=this.__logicalWidth;
this.stageHeight=this.__logicalHeight;e=Math.min(c/this.stageWidth,d/this.stageHeight);f=Math.round((c-this.stageWidth*e)/2);var k=Math.round((d-this.stageHeight*e)/2);this.__displayMatrix.scale(e,e);this.__displayMatrix.translate(f,k)}this.__displayRect.setTo(0,0,this.stageWidth,this.stageHeight)}null!=this.context3D&&this.context3D.configureBackBuffer(c,d,0,!0,!0,!0);for(e=this.stage3Ds.iterator();e.hasNext();)e.next().__resize(c,d);null!=this.__renderer&&this.__renderer.__resize(c,d);if(this.stageWidth!=
a||this.stageHeight!=b)this.__renderDirty=!0,this.__setTransformDirty(),a=new R("resize"),this.__dispatchEvent(a)},__setLogicalSize:function(a,b){this.__logicalWidth=a;this.__logicalHeight=b;this.__resize()},__update:function(a,b){a?this.__transformDirty&&(ma.prototype.__update.call(this,!0,b),b&&(this.__transformDirty=!1)):this.__transformDirty||this.__renderDirty?(ma.prototype.__update.call(this,!1,b),b&&ba.__supportDOM&&(this.__wasDirty=!0)):!this.__renderDirty&&this.__wasDirty&&(ma.prototype.__update.call(this,
!1,b),b&&(this.__wasDirty=!1))},set_color:function(a){null==a?(this.__transparent=!0,a=0):this.__transparent=!1;this.__color!=a&&(this.__colorSplit[0]=((a&16711680)>>>16)/255,this.__colorSplit[1]=((a&65280)>>>8)/255,this.__colorSplit[2]=(a&255)/255,this.__colorString="#"+Y.hex(a&16777215,6),this.__renderDirty=!0,this.__color=-16777216|a&16777215);return a},get_focus:function(){return this.__focus},set_focus:function(a){if(a!=this.__focus){var b=this.__focus;this.__cacheFocus=this.__focus=a;if(null!=
b){var c=new Re("focusOut",!0,!1,a,!1,0),d=[];b.__getInteractive(d);d.reverse();this.__dispatchStack(c,d)}null!=a&&(b=new Re("focusIn",!0,!1,b,!1,0),c=[],a.__getInteractive(c),c.reverse(),this.__dispatchStack(b,c))}return a},get_fullScreenSourceRect:function(){return null==this.__fullScreenSourceRect?null:this.__fullScreenSourceRect.clone()},set_height:function(a){return this.get_height()},get_mouseX:function(){return this.__mouseX},get_mouseY:function(){return this.__mouseY},get_quality:function(){return this.__quality},
set_rotation:function(a){return 0},set_scaleMode:function(a){return this.__scaleMode=a},set_scaleX:function(a){return 0},set_scaleY:function(a){return 0},get_tabEnabled:function(){return!1},get_tabIndex:function(){return-1},set_transform:function(a){return this.get_transform()},set_width:function(a){return this.get_width()},set_x:function(a){return 0},set_y:function(a){return 0},__class__:Eg});var Bh=function(a){aa.call(this);this.__stage=a;this.__height=0;this.__projectionTransform=new vc;this.__renderTransform=
new vc;this.__y=this.__x=this.__width=0;this.visible=!0;0<a.stageWidth&&0<a.stageHeight&&this.__resize(a.stageWidth,a.stageHeight)};g["openfl.display.Stage3D"]=Bh;Bh.__name__="openfl.display.Stage3D";Bh.__super__=aa;Bh.prototype=v(aa.prototype,{context3D:null,visible:null,__contextLost:null,__contextRequested:null,__height:null,__indexBuffer:null,__projectionTransform:null,__renderTransform:null,__stage:null,__vertexBuffer:null,__width:null,__x:null,__y:null,__canvas:null,__webgl:null,requestContext3D:function(a,
b){this.__contextLost?this.__contextRequested=!0:null!=this.context3D?(this.__contextRequested=!0,Ne.delay(u(this,this.__dispatchCreate),1)):this.__contextRequested||(this.__contextRequested=!0,Ne.delay(u(this,this.__createContext),1))},__createContext:function(){var a=this.__stage,b=a.__renderer;if("cairo"==b.__type||"canvas"==b.__type)this.__dispatchError();else if("opengl"==b.__type)this.context3D=new kb(a,a.context3D.__contextState,this),this.__dispatchCreate();else if("dom"==b.__type){this.__canvas=
window.document.createElement("canvas");this.__canvas.width=a.stageWidth;this.__canvas.height=a.stageHeight;var c=b.__context.attributes;a=Object.prototype.hasOwnProperty.call(c,"background")&&null==c.background;b=Object.prototype.hasOwnProperty.call(c,"colorDepth")?c.colorDepth:32;c=Object.prototype.hasOwnProperty.call(c,"antialiasing")&&0<c.antialiasing;this.__webgl=Tl.getContextWebGL(this.__canvas,{alpha:a||16<b,antialias:c,depth:!0,premultipliedAlpha:!0,stencil:!0,preserveDrawingBuffer:!1});this.__dispatchError()}},
__dispatchError:function(){this.__contextRequested=!1;this.dispatchEvent(new ud("error",!1,!1,"Context3D not available"))},__dispatchCreate:function(){this.__contextRequested&&(this.__contextRequested=!1,this.dispatchEvent(new R("context3DCreate")))},__lostContext:function(){this.__contextLost=!0;null!=this.context3D&&(this.context3D.__dispose(),this.__contextRequested=!0)},__resize:function(a,b){if(a!=this.__width||b!=this.__height)null!=this.__canvas&&(this.__canvas.width=a,this.__canvas.height=
b),this.__projectionTransform.copyRawDataFrom(M.toFloatVector(null,null,null,[2/(0<a?a:1),0,0,0,0,-2/(0<b?b:1),0,0,0,0,-.001,0,-1,1,0,1])),this.__renderTransform.identity(),this.__renderTransform.appendTranslation(this.__x,this.__y,0),this.__renderTransform.append(this.__projectionTransform),this.__width=a,this.__height=b},__restoreContext:function(){this.__contextLost=!1;this.__createContext()},get_x:function(){return this.__x},set_x:function(a){if(this.__x==a)return a;this.__x=a;this.__renderTransform.identity();
this.__renderTransform.appendTranslation(this.__x,this.__y,0);this.__renderTransform.append(this.__projectionTransform);return a},get_y:function(){return this.__y},set_y:function(a){if(this.__y==a)return a;this.__y=a;this.__renderTransform.identity();this.__renderTransform.appendTranslation(this.__x,this.__y,0);this.__renderTransform.append(this.__projectionTransform);return a},__class__:Bh});var Ee=function(a,b){zi.call(this,a,b);this.stage=new Eg(this,Object.prototype.hasOwnProperty.call(b.context,
"background")?b.context.background:16777215);if(Object.prototype.hasOwnProperty.call(b,"parameters"))try{this.stage.get_loaderInfo().parameters=b.parameters}catch(c){ab.lastException=c}Object.prototype.hasOwnProperty.call(b,"resizable")&&!b.resizable&&this.stage.__setLogicalSize(b.width,b.height);a.addModule(this.stage)};g["openfl.display.Window"]=Ee;Ee.__name__="openfl.display.Window";Ee.__super__=zi;Ee.prototype=v(zi.prototype,{__class__:Ee});var kb=function(a,b,c){this.driverInfo="OpenGL (Direct blitting)";
this.backBufferHeight=this.backBufferWidth=0;aa.call(this);this.__stage=a;this.__contextState=b;this.__stage3D=c;this.__context=a.window.context;this.gl=this.__context.webgl;null==this.__contextState&&(this.__contextState=new vh);this.__state=new vh;this.__vertexConstants=new Float32Array(512);this.__fragmentConstants=new Float32Array(512);a=[1,1,1,1];this.__positionScale=null!=a?new Float32Array(a):null;this.__programs=new Ra;-1==kb.__glMaxViewportDims&&(kb.__glMaxViewportDims=this.gl.getParameter(this.gl.MAX_VIEWPORT_DIMS));
this.maxBackBufferHeight=this.maxBackBufferWidth=kb.__glMaxViewportDims;-1==kb.__glMaxTextureMaxAnisotropy&&(a=this.gl.getExtension("EXT_texture_filter_anisotropic"),null!=a&&Object.prototype.hasOwnProperty.call(a,"MAX_TEXTURE_MAX_ANISOTROPY_EXT")||(a=this.gl.getExtension("MOZ_EXT_texture_filter_anisotropic")),null!=a&&Object.prototype.hasOwnProperty.call(a,"MAX_TEXTURE_MAX_ANISOTROPY_EXT")||(a=this.gl.getExtension("WEBKIT_EXT_texture_filter_anisotropic")),null!=a?(kb.__glTextureMaxAnisotropy=a.TEXTURE_MAX_ANISOTROPY_EXT,
kb.__glMaxTextureMaxAnisotropy=this.gl.getParameter(a.MAX_TEXTURE_MAX_ANISOTROPY_EXT)):(kb.__glTextureMaxAnisotropy=0,kb.__glMaxTextureMaxAnisotropy=0));-1==kb.__glDepthStencil&&(kb.__glDepthStencil=this.gl.DEPTH_STENCIL);-1==kb.__glMemoryTotalAvailable&&(a=this.gl.getExtension("NVX_gpu_memory_info"),null!=a&&(kb.__glMemoryTotalAvailable=a.GPU_MEMORY_INFO_DEDICATED_VIDMEM_NVX,kb.__glMemoryCurrentAvailable=a.GPU_MEMORY_INFO_CURRENT_AVAILABLE_VIDMEM_NVX));if(null==kb.__driverInfo){a=this.gl.getParameter(this.gl.VENDOR);
b=this.gl.getParameter(this.gl.VERSION);c=this.gl.getParameter(this.gl.RENDERER);var d=this.gl.getParameter(this.gl.SHADING_LANGUAGE_VERSION);kb.__driverInfo="OpenGL Vendor="+a+" Version="+b+" Renderer="+c+" GLSL="+d}this.driverInfo=kb.__driverInfo;this.__quadIndexBufferElements=16383;a=this.__quadIndexBufferCount=6*this.__quadIndexBufferElements;a=null!=a?new Uint16Array(a):null;d=c=b=0;for(var e=this.__quadIndexBufferElements;d<e;)d++,a[b]=c,a[b+1]=c+1,a[b+2]=c+2,a[b+3]=c+2,a[b+4]=c+1,a[b+5]=c+
3,b+=6,c+=4;this.__quadIndexBuffer=this.createIndexBuffer(this.__quadIndexBufferCount);this.__quadIndexBuffer.uploadFromTypedArray(a)};g["openfl.display3D.Context3D"]=kb;kb.__name__="openfl.display3D.Context3D";kb.__super__=aa;kb.prototype=v(aa.prototype,{backBufferHeight:null,backBufferWidth:null,driverInfo:null,maxBackBufferHeight:null,maxBackBufferWidth:null,gl:null,__backBufferAntiAlias:null,__backBufferTexture:null,__backBufferWantsBestResolution:null,__backBufferWantsBestResolutionOnBrowserZoom:null,
__cleared:null,__context:null,__contextState:null,__renderStage3DProgram:null,__enableErrorChecking:null,__fragmentConstants:null,__frontBufferTexture:null,__positionScale:null,__present:null,__programs:null,__quadIndexBuffer:null,__quadIndexBufferCount:null,__quadIndexBufferElements:null,__stage:null,__stage3D:null,__state:null,__vertexConstants:null,clear:function(a,b,c,d,e,f,k){null==k&&(k=7);null==f&&(f=0);null==e&&(e=1);null==d&&(d=1);null==c&&(c=0);null==b&&(b=0);null==a&&(a=0);this.__flushGLFramebuffer();
this.__flushGLViewport();var m=0;if(0!=(k&1)){null==this.__state.renderToTexture&&(this.__stage.context3D!=this||this.__stage.__renderer.__cleared||(this.__stage.__renderer.__cleared=!0),this.__cleared=!0);m|=this.gl.COLOR_BUFFER_BIT;if(1!=this.__contextState.colorMaskRed||1!=this.__contextState.colorMaskGreen||1!=this.__contextState.colorMaskBlue||1!=this.__contextState.colorMaskAlpha)this.gl.colorMask(!0,!0,!0,!0),this.__contextState.colorMaskRed=!0,this.__contextState.colorMaskGreen=!0,this.__contextState.colorMaskBlue=
!0,this.__contextState.colorMaskAlpha=!0;this.gl.clearColor(a,b,c,d)}0!=(k&2)&&(m|=this.gl.DEPTH_BUFFER_BIT,1!=this.__contextState.depthMask&&(this.gl.depthMask(!0),this.__contextState.depthMask=!0),this.gl.clearDepth(e));0!=(k&4)&&(m|=this.gl.STENCIL_BUFFER_BIT,255!=this.__contextState.stencilWriteMask&&(this.gl.stencilMask(255),this.__contextState.stencilWriteMask=255),this.gl.clearStencil(f),this.__contextState.stencilWriteMask=255);0!=m&&(this.__setGLScissorTest(!1),this.gl.clear(m))},configureBackBuffer:function(a,
b,c,d,e,f){null==f&&(f=!1);null==e&&(e=!1);null==d&&(d=!0);if(null==this.__stage3D)this.backBufferWidth=a,this.backBufferHeight=b,this.__backBufferAntiAlias=c,this.__state.backBufferEnableDepthAndStencil=d,this.__backBufferWantsBestResolution=e,this.__backBufferWantsBestResolutionOnBrowserZoom=f;else{if(null==this.__backBufferTexture||this.backBufferWidth!=a||this.backBufferHeight!=b){null!=this.__backBufferTexture&&this.__backBufferTexture.dispose();null!=this.__frontBufferTexture&&this.__frontBufferTexture.dispose();
this.__backBufferTexture=this.createRectangleTexture(a,b,1,!0);this.__frontBufferTexture=this.createRectangleTexture(a,b,1,!0);null==this.__stage3D.__vertexBuffer&&(this.__stage3D.__vertexBuffer=this.createVertexBuffer(4,5));var k=M.toFloatVector(null,null,null,[a,b,0,1,1,0,b,0,0,1,a,0,0,1,0,0,0,0,0,0]);this.__stage3D.__vertexBuffer.uploadFromVector(k,0,20);null==this.__stage3D.__indexBuffer&&(this.__stage3D.__indexBuffer=this.createIndexBuffer(6),k=M.toIntVector(null,null,null,[0,1,2,2,1,3]),this.__stage3D.__indexBuffer.uploadFromVector(k,
0,6))}this.backBufferWidth=a;this.backBufferHeight=b;this.__backBufferAntiAlias=c;this.__state.backBufferEnableDepthAndStencil=d;this.__backBufferWantsBestResolution=e;this.__backBufferWantsBestResolutionOnBrowserZoom=f;this.__state.__primaryGLFramebuffer=this.__backBufferTexture.__getGLFramebuffer(d,c,0);this.__frontBufferTexture.__getGLFramebuffer(d,c,0)}},createCubeTexture:function(a,b,c,d){null==d&&(d=0);return new $g(this,a,b,c,d)},createIndexBuffer:function(a,b){null==b&&(b=1);return new Ch(this,
a,b)},createProgram:function(a){null==a&&(a=0);return new fk(this,a)},createRectangleTexture:function(a,b,c,d){return new gk(this,a,b,om.toString(c),d)},createTexture:function(a,b,c,d,e){null==e&&(e=0);return new Nf(this,a,b,c,d,e)},createVertexBuffer:function(a,b,c){null==c&&(c=1);return new Yk(this,a,b,$i.toString(c))},drawToBitmapData:function(a,b,c){if(null!=a)if(b=null!=b?b.__toLimeRectangle():new od(0,0,this.backBufferWidth,this.backBufferHeight),c=null!=c?c.__toLimeVector2():new of,this.__stage.context3D==
this){if(null!=this.__stage.window){if(null!=this.__stage3D){var d=-this.__stage3D.get_x()|0,e=-this.__stage3D.get_y()|0;c.x=d;c.y=e}d=this.__stage.window.readPixels();a.image.copyPixels(d,b,c)}}else null!=this.__backBufferTexture&&(d=this.__state.renderToTexture,this.setRenderToBackBuffer(),this.__flushGLFramebuffer(),this.__flushGLViewport(),e=this.backBufferWidth*this.backBufferHeight*4,e=null!=e?new Uint8Array(e):null,this.gl.readPixels(0,0,this.backBufferWidth,this.backBufferHeight,this.__backBufferTexture.__format,
this.gl.UNSIGNED_BYTE,e),e=new wb(new Nd(e,this.backBufferWidth,this.backBufferHeight,32,2)),a.image.copyPixels(e,b,c),null!=d&&this.setRenderToTexture(d,this.__state.renderToTextureDepthStencil,this.__state.renderToTextureAntiAlias,this.__state.renderToTextureSurfaceSelector))},drawTriangles:function(a,b,c){null==c&&(c=-1);null==b&&(b=0);null==this.__state.renderToTexture&&(this.__stage.context3D!=this||this.__stage.__renderer.__cleared?this.__cleared||this.clear(0,0,0,0,1,0,1):this.__stage.__renderer.__clear());
this.__flushGL();null!=this.__state.program&&this.__state.program.__flush();c=-1==c?a.__numIndices:3*c;this.__bindGLElementArrayBuffer(a.__id);this.gl.drawElements(this.gl.TRIANGLES,c,this.gl.UNSIGNED_SHORT,2*b)},present:function(){this.setRenderToBackBuffer();if(null!=this.__stage3D&&null!=this.__backBufferTexture){this.__cleared||this.clear(0,0,0,0,1,0,1);var a=this.__backBufferTexture;this.__backBufferTexture=this.__frontBufferTexture;this.__frontBufferTexture=a;this.__state.__primaryGLFramebuffer=
this.__backBufferTexture.__getGLFramebuffer(this.__state.backBufferEnableDepthAndStencil,this.__backBufferAntiAlias,0);this.__cleared=!1}this.__present=!0},setBlendFactors:function(a,b){this.setBlendFactorsSeparate(a,b,a,b)},setBlendFactorsSeparate:function(a,b,c,d){this.__state.blendSourceRGBFactor=a;this.__state.blendDestinationRGBFactor=b;this.__state.blendSourceAlphaFactor=c;this.__state.blendDestinationAlphaFactor=d;this.__setGLBlendEquation(this.gl.FUNC_ADD)},setColorMask:function(a,b,c,d){this.__state.colorMaskRed=
a;this.__state.colorMaskGreen=b;this.__state.colorMaskBlue=c;this.__state.colorMaskAlpha=d},setCulling:function(a){this.__state.culling=a},setDepthTest:function(a,b){this.__state.depthMask=a;this.__state.depthCompareMode=b},setProgram:function(a){this.__state.program=a;this.__state.shader=null;if(null!=a)for(var b=0,c=a.__samplerStates.length;b<c;){var d=b++;null==this.__state.samplerStates[d]?this.__state.samplerStates[d]=a.__samplerStates[d].clone():this.__state.samplerStates[d].copyFrom(a.__samplerStates[d])}},
setProgramConstantsFromMatrix:function(a,b,c,d){null==d&&(d=!1);if(null!=this.__state.program&&1==this.__state.program.__format)this.__flushGLProgram(),a=new Float32Array(16),a[0]=c.rawData.get(0),a[1]=c.rawData.get(1),a[2]=c.rawData.get(2),a[3]=c.rawData.get(3),a[4]=c.rawData.get(4),a[5]=c.rawData.get(5),a[6]=c.rawData.get(6),a[7]=c.rawData.get(7),a[8]=c.rawData.get(8),a[9]=c.rawData.get(9),a[10]=c.rawData.get(10),a[11]=c.rawData.get(11),a[12]=c.rawData.get(12),a[13]=c.rawData.get(13),a[14]=c.rawData.get(14),
a[15]=c.rawData.get(15),sb.uniformMatrix4fv(this.gl,b,d,a);else{var e=(a=1==a)?this.__vertexConstants:this.__fragmentConstants;c=c.rawData;var f=4*b;d?(e[f++]=c.get(0),e[f++]=c.get(4),e[f++]=c.get(8),e[f++]=c.get(12),e[f++]=c.get(1),e[f++]=c.get(5),e[f++]=c.get(9),e[f++]=c.get(13),e[f++]=c.get(2),e[f++]=c.get(6),e[f++]=c.get(10),e[f++]=c.get(14),e[f++]=c.get(3),e[f++]=c.get(7),e[f++]=c.get(11)):(e[f++]=c.get(0),e[f++]=c.get(1),e[f++]=c.get(2),e[f++]=c.get(3),e[f++]=c.get(4),e[f++]=c.get(5),e[f++]=
c.get(6),e[f++]=c.get(7),e[f++]=c.get(8),e[f++]=c.get(9),e[f++]=c.get(10),e[f++]=c.get(11),e[f++]=c.get(12),e[f++]=c.get(13),e[f++]=c.get(14));e[f++]=c.get(15);null!=this.__state.program&&this.__state.program.__markDirty(a,b,4)}},setProgramConstantsFromVector:function(a,b,c,d){null==d&&(d=-1);if(0!=d&&(null==this.__state.program||1!=this.__state.program.__format)){-1==d&&(d=c.get_length()>>2);for(var e=(a=1==a)?this.__vertexConstants:this.__fragmentConstants,f=0,k=4*b,m=0,h=d;m<h;)m++,e[k++]=c.get(f++),
e[k++]=c.get(f++),e[k++]=c.get(f++),e[k++]=c.get(f++);null!=this.__state.program&&this.__state.program.__markDirty(a,b,d)}},setRenderToBackBuffer:function(){this.__state.renderToTexture=null},setRenderToTexture:function(a,b,c,d){null==d&&(d=0);null==c&&(c=0);null==b&&(b=!1);this.__state.renderToTexture=a;this.__state.renderToTextureDepthStencil=b;this.__state.renderToTextureAntiAlias=c;this.__state.renderToTextureSurfaceSelector=d},setSamplerStateAt:function(a,b,c,d){null==this.__state.samplerStates[a]&&
(this.__state.samplerStates[a]=new rh);a=this.__state.samplerStates[a];a.wrap=b;a.filter=c;a.mipfilter=d},setScissorRectangle:function(a){null!=a?(this.__state.scissorEnabled=!0,this.__state.scissorRectangle.copyFrom(a)):this.__state.scissorEnabled=!1},setStencilActions:function(a,b,c,d,e){null==e&&(e=5);null==d&&(d=5);null==c&&(c=5);null==b&&(b=0);null==a&&(a=2);this.__state.stencilTriangleFace=a;this.__state.stencilCompareMode=b;this.__state.stencilPass=c;this.__state.stencilDepthFail=d;this.__state.stencilFail=
e},setStencilReferenceValue:function(a,b,c){null==c&&(c=255);null==b&&(b=255);this.__state.stencilReferenceValue=a;this.__state.stencilReadMask=b;this.__state.stencilWriteMask=c},setTextureAt:function(a,b){this.__state.textures[a]=b},setVertexBufferAt:function(a,b,c,d){null==d&&(d=4);null==c&&(c=0);if(null==b)this.gl.disableVertexAttribArray(a),this.__bindGLArrayBuffer(null);else switch(this.__bindGLArrayBuffer(b.__id),this.gl.enableVertexAttribArray(a),c*=4,d){case 0:this.gl.vertexAttribPointer(a,
4,this.gl.UNSIGNED_BYTE,!0,b.__stride,c);break;case 1:this.gl.vertexAttribPointer(a,1,this.gl.FLOAT,!1,b.__stride,c);break;case 2:this.gl.vertexAttribPointer(a,2,this.gl.FLOAT,!1,b.__stride,c);break;case 3:this.gl.vertexAttribPointer(a,3,this.gl.FLOAT,!1,b.__stride,c);break;case 4:this.gl.vertexAttribPointer(a,4,this.gl.FLOAT,!1,b.__stride,c);break;default:throw new W(new Nc);}},__bindGLArrayBuffer:function(a){this.__contextState.__currentGLArrayBuffer!=a&&(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,
a),this.__contextState.__currentGLArrayBuffer=a)},__bindGLElementArrayBuffer:function(a){this.__contextState.__currentGLElementArrayBuffer!=a&&(this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,a),this.__contextState.__currentGLElementArrayBuffer=a)},__bindGLFramebuffer:function(a){this.__contextState.__currentGLFramebuffer!=a&&(this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,a),this.__contextState.__currentGLFramebuffer=a)},__bindGLTexture2D:function(a){this.gl.bindTexture(this.gl.TEXTURE_2D,a);this.__contextState.__currentGLTexture2D=
a},__bindGLTextureCubeMap:function(a){this.gl.bindTexture(this.gl.TEXTURE_CUBE_MAP,a);this.__contextState.__currentGLTextureCubeMap=a},__dispose:function(){this.driverInfo+=" (Disposed)";null!=this.__stage3D&&(this.__stage3D.__indexBuffer=null,this.__stage3D.__vertexBuffer=null,this.__stage3D=this.__stage3D.context3D=null);this.__positionScale=this.__frontBufferTexture=this.__fragmentConstants=this.__renderStage3DProgram=this.__context=this.__backBufferTexture=null;this.__present=!1;this.__vertexConstants=
this.__stage=this.__quadIndexBuffer=null},__drawTriangles:function(a,b){null==a&&(a=0);null==this.__state.renderToTexture&&(this.__stage.context3D!=this||this.__stage.__renderer.__cleared?this.__cleared||this.clear(0,0,0,0,1,0,1):this.__stage.__renderer.__clear());this.__flushGL();null!=this.__state.program&&this.__state.program.__flush();this.gl.drawArrays(this.gl.TRIANGLES,a,b)},__flushGL:function(){this.__flushGLProgram();this.__flushGLFramebuffer();this.__flushGLViewport();this.__flushGLBlend();
if(this.__contextState.colorMaskRed!=this.__state.colorMaskRed||this.__contextState.colorMaskGreen!=this.__state.colorMaskGreen||this.__contextState.colorMaskBlue!=this.__state.colorMaskBlue||this.__contextState.colorMaskAlpha!=this.__state.colorMaskAlpha)this.gl.colorMask(this.__state.colorMaskRed,this.__state.colorMaskGreen,this.__state.colorMaskBlue,this.__state.colorMaskAlpha),this.__contextState.colorMaskRed=this.__state.colorMaskRed,this.__contextState.colorMaskGreen=this.__state.colorMaskGreen,
this.__contextState.colorMaskBlue=this.__state.colorMaskBlue,this.__contextState.colorMaskAlpha=this.__state.colorMaskAlpha;this.__flushGLCulling();this.__flushGLDepth();this.__flushGLScissor();this.__flushGLStencil();this.__flushGLTextures()},__flushGLBlend:function(){if(this.__contextState.blendDestinationRGBFactor!=this.__state.blendDestinationRGBFactor||this.__contextState.blendSourceRGBFactor!=this.__state.blendSourceRGBFactor||this.__contextState.blendDestinationAlphaFactor!=this.__state.blendDestinationAlphaFactor||
this.__contextState.blendSourceAlphaFactor!=this.__state.blendSourceAlphaFactor)this.__setGLBlend(!0),this.__state.blendDestinationRGBFactor==this.__state.blendDestinationAlphaFactor&&this.__state.blendSourceRGBFactor==this.__state.blendSourceAlphaFactor?this.gl.blendFunc(this.__getGLBlend(this.__state.blendSourceRGBFactor),this.__getGLBlend(this.__state.blendDestinationRGBFactor)):this.gl.blendFuncSeparate(this.__getGLBlend(this.__state.blendSourceRGBFactor),this.__getGLBlend(this.__state.blendDestinationRGBFactor),
this.__getGLBlend(this.__state.blendSourceAlphaFactor),this.__getGLBlend(this.__state.blendDestinationAlphaFactor)),this.__contextState.blendDestinationRGBFactor=this.__state.blendDestinationRGBFactor,this.__contextState.blendSourceRGBFactor=this.__state.blendSourceRGBFactor,this.__contextState.blendDestinationAlphaFactor=this.__state.blendDestinationAlphaFactor,this.__contextState.blendSourceAlphaFactor=this.__state.blendSourceAlphaFactor},__flushGLCulling:function(){if(this.__contextState.culling!=
this.__state.culling){if(3==this.__state.culling)this.__setGLCullFace(!1);else switch(this.__setGLCullFace(!0),this.__state.culling){case 0:this.gl.cullFace(this.gl.BACK);break;case 1:this.gl.cullFace(this.gl.FRONT);break;case 2:this.gl.cullFace(this.gl.FRONT_AND_BACK);break;case 3:break;default:throw new W(new Nc);}this.__contextState.culling=this.__state.culling}},__flushGLDepth:function(){var a=this.__state.depthMask&&(null!=this.__state.renderToTexture?this.__state.renderToTextureDepthStencil:
this.__state.backBufferEnableDepthAndStencil);this.__contextState.depthMask!=a&&(this.gl.depthMask(a),this.__contextState.depthMask=a);if(this.__contextState.depthCompareMode!=this.__state.depthCompareMode){switch(this.__state.depthCompareMode){case 0:this.gl.depthFunc(this.gl.ALWAYS);break;case 1:this.gl.depthFunc(this.gl.EQUAL);break;case 2:this.gl.depthFunc(this.gl.GREATER);break;case 3:this.gl.depthFunc(this.gl.GEQUAL);break;case 4:this.gl.depthFunc(this.gl.LESS);break;case 5:this.gl.depthFunc(this.gl.LEQUAL);
break;case 6:this.gl.depthFunc(this.gl.NEVER);break;case 7:this.gl.depthFunc(this.gl.NOTEQUAL);break;default:throw new W(new Nc);}this.__contextState.depthCompareMode=this.__state.depthCompareMode}},__flushGLFramebuffer:function(){if(null!=this.__state.renderToTexture){if(this.__contextState.renderToTexture!=this.__state.renderToTexture||this.__contextState.renderToTextureSurfaceSelector!=this.__state.renderToTextureSurfaceSelector){var a=this.__state.renderToTexture.__getGLFramebuffer(this.__state.renderToTextureDepthStencil,
this.__state.renderToTextureAntiAlias,this.__state.renderToTextureSurfaceSelector);this.__bindGLFramebuffer(a);this.__contextState.renderToTexture=this.__state.renderToTexture;this.__contextState.renderToTextureAntiAlias=this.__state.renderToTextureAntiAlias;this.__contextState.renderToTextureDepthStencil=this.__state.renderToTextureDepthStencil;this.__contextState.renderToTextureSurfaceSelector=this.__state.renderToTextureSurfaceSelector}this.__setGLDepthTest(this.__state.renderToTextureDepthStencil);
this.__setGLStencilTest(this.__state.renderToTextureDepthStencil);this.__setGLFrontFace(!0)}else{if(null==this.__stage&&0==this.backBufferWidth&&0==this.backBufferHeight)throw new W(new cb("Context3D backbuffer has not been configured"));if(null!=this.__contextState.renderToTexture||this.__contextState.__currentGLFramebuffer!=this.__state.__primaryGLFramebuffer||this.__contextState.backBufferEnableDepthAndStencil!=this.__state.backBufferEnableDepthAndStencil)this.__bindGLFramebuffer(this.__state.__primaryGLFramebuffer),
this.__contextState.renderToTexture=null,this.__contextState.backBufferEnableDepthAndStencil=this.__state.backBufferEnableDepthAndStencil;this.__setGLDepthTest(this.__state.backBufferEnableDepthAndStencil);this.__setGLStencilTest(this.__state.backBufferEnableDepthAndStencil);this.__setGLFrontFace(this.__stage.context3D!=this)}},__flushGLProgram:function(){var a=this.__state.shader,b=this.__state.program;this.__contextState.shader!=a&&(null!=this.__contextState.shader&&this.__contextState.shader.__disable(),
null!=a&&a.__enable(),this.__contextState.shader=a);this.__contextState.program!=b&&(null!=this.__contextState.program&&this.__contextState.program.__disable(),null!=b&&b.__enable(),this.__contextState.program=b);null!=b&&0==b.__format&&(this.__positionScale[1]=this.__stage.context3D==this&&null==this.__state.renderToTexture?1:-1,b.__setPositionScale(this.__positionScale))},__flushGLScissor:function(){if(this.__state.scissorEnabled){this.__setGLScissorTest(!0);this.__contextState.scissorEnabled=!0;
var a=this.__state.scissorRectangle.x|0,b=this.__state.scissorRectangle.y|0,c=this.__state.scissorRectangle.width|0,d=this.__state.scissorRectangle.height|0;null==this.__state.renderToTexture&&null==this.__stage3D&&(b=(this.__stage.window.__height*this.__stage.window.__scale|0)-(this.__state.scissorRectangle.height|0)-b);if(this.__contextState.scissorRectangle.x!=a||this.__contextState.scissorRectangle.y!=b||this.__contextState.scissorRectangle.width!=c||this.__contextState.scissorRectangle.height!=
d)this.gl.scissor(a,b,c,d),this.__contextState.scissorRectangle.setTo(a,b,c,d)}else this.__contextState.scissorEnabled!=this.__state.scissorEnabled&&(this.__setGLScissorTest(!1),this.__contextState.scissorEnabled=!1)},__flushGLStencil:function(){if(this.__contextState.stencilTriangleFace!=this.__state.stencilTriangleFace||this.__contextState.stencilPass!=this.__state.stencilPass||this.__contextState.stencilDepthFail!=this.__state.stencilDepthFail||this.__contextState.stencilFail!=this.__state.stencilFail)this.gl.stencilOpSeparate(this.__getGLTriangleFace(this.__state.stencilTriangleFace),
this.__getGLStencilAction(this.__state.stencilFail),this.__getGLStencilAction(this.__state.stencilDepthFail),this.__getGLStencilAction(this.__state.stencilPass)),this.__contextState.stencilTriangleFace=this.__state.stencilTriangleFace,this.__contextState.stencilPass=this.__state.stencilPass,this.__contextState.stencilDepthFail=this.__state.stencilDepthFail,this.__contextState.stencilFail=this.__state.stencilFail;this.__contextState.stencilWriteMask!=this.__state.stencilWriteMask&&(this.gl.stencilMask(this.__state.stencilWriteMask),
this.__contextState.stencilWriteMask=this.__state.stencilWriteMask);if(this.__contextState.stencilCompareMode!=this.__state.stencilCompareMode||this.__contextState.stencilReferenceValue!=this.__state.stencilReferenceValue||this.__contextState.stencilReadMask!=this.__state.stencilReadMask)this.gl.stencilFunc(this.__getGLCompareMode(this.__state.stencilCompareMode),this.__state.stencilReferenceValue,this.__state.stencilReadMask),this.__contextState.stencilCompareMode=this.__state.stencilCompareMode,
this.__contextState.stencilReferenceValue=this.__state.stencilReferenceValue,this.__contextState.stencilReadMask=this.__state.stencilReadMask},__flushGLTextures:function(){for(var a=0,b,c,d=0,e=this.__state.textures.length;d<e;){var f=d++;b=this.__state.textures[f];c=this.__state.samplerStates[f];null==c&&(this.__state.samplerStates[f]=new rh,c=this.__state.samplerStates[f]);this.gl.activeTexture(this.gl.TEXTURE0+a);null!=b?(b.__textureTarget==this.gl.TEXTURE_2D?this.__bindGLTexture2D(b.__getTexture()):
this.__bindGLTextureCubeMap(b.__getTexture()),this.__contextState.textures[f]=b,b.__setSamplerState(c)):this.__bindGLTexture2D(null);null!=this.__state.program&&0==this.__state.program.__format&&c.textureAlpha&&(this.gl.activeTexture(this.gl.TEXTURE0+a+4),null!=b&&null!=b.__alphaTexture?(b.__alphaTexture.__textureTarget==this.gl.TEXTURE_2D?this.__bindGLTexture2D(b.__alphaTexture.__getTexture()):this.__bindGLTextureCubeMap(b.__alphaTexture.__getTexture()),b.__alphaTexture.__setSamplerState(c),this.gl.uniform1i(this.__state.program.__agalAlphaSamplerEnabled[a].location,
1)):(this.__bindGLTexture2D(null),null!=this.__state.program.__agalAlphaSamplerEnabled[a]&&this.gl.uniform1i(this.__state.program.__agalAlphaSamplerEnabled[a].location,0)));++a}},__flushGLViewport:function(){if(null==this.__state.renderToTexture)if(this.__stage.context3D==this){var a=null==this.__stage3D?0:this.__stage3D.get_x()|0,b=this.__stage.window.__height*this.__stage.window.__scale-this.backBufferHeight-(null==this.__stage3D?0:this.__stage3D.get_y())|0;this.gl.viewport(a,b,this.backBufferWidth,
this.backBufferHeight)}else this.gl.viewport(0,0,this.backBufferWidth,this.backBufferHeight);else b=a=0,this.__state.renderToTexture instanceof Nf?(b=this.__state.renderToTexture,a=b.__width,b=b.__height):this.__state.renderToTexture instanceof gk?(b=this.__state.renderToTexture,a=b.__width,b=b.__height):this.__state.renderToTexture instanceof $g&&(b=this.__state.renderToTexture,b=a=b.__size),this.gl.viewport(0,0,a,b)},__getGLBlend:function(a){switch(a){case 0:return this.gl.DST_ALPHA;case 1:return this.gl.DST_COLOR;
case 2:return this.gl.ONE;case 3:return this.gl.ONE_MINUS_DST_ALPHA;case 4:return this.gl.ONE_MINUS_DST_COLOR;case 5:return this.gl.ONE_MINUS_SRC_ALPHA;case 6:return this.gl.ONE_MINUS_SRC_COLOR;case 7:return this.gl.SRC_ALPHA;case 8:return this.gl.SRC_COLOR;case 9:return this.gl.ZERO;default:throw new W(new Nc);}},__getGLCompareMode:function(a){switch(a){case 0:return this.gl.ALWAYS;case 1:return this.gl.EQUAL;case 2:return this.gl.GREATER;case 3:return this.gl.GEQUAL;case 4:return this.gl.LESS;case 5:return this.gl.LEQUAL;
case 6:return this.gl.NEVER;case 7:return this.gl.NOTEQUAL;default:return this.gl.EQUAL}},__getGLStencilAction:function(a){switch(a){case 0:return this.gl.DECR;case 1:return this.gl.DECR_WRAP;case 2:return this.gl.INCR;case 3:return this.gl.INCR_WRAP;case 4:return this.gl.INVERT;case 5:return this.gl.KEEP;case 6:return this.gl.REPLACE;case 7:return this.gl.ZERO;default:return this.gl.KEEP}},__getGLTriangleFace:function(a){switch(a){case 0:return this.gl.BACK;case 1:return this.gl.FRONT;case 2:return this.gl.FRONT_AND_BACK;
case 3:return this.gl.NONE;default:return this.gl.FRONT_AND_BACK}},__renderStage3D:function(a){var b=a.context3D;if(null!=b&&b!=this&&null!=b.__frontBufferTexture&&a.visible&&0<this.backBufferHeight&&0<this.backBufferWidth){if(null==this.__renderStage3DProgram){var c=new na;c.assemble(Ye.toString(1),"m44 op, va0, vc0\nmov v0, va1");var d=new na;d.assemble(Ye.toString(0),"tex ft1, v0, fs0 <2d,nearest,nomip>\nmov oc, ft1");this.__renderStage3DProgram=this.createProgram();this.__renderStage3DProgram.upload(c.agalcode,
d.agalcode)}this.setProgram(this.__renderStage3DProgram);this.setBlendFactors(2,9);this.setColorMask(!0,!0,!0,!0);this.setCulling(3);this.setDepthTest(!1,0);this.setStencilActions();this.setStencilReferenceValue(0,0,0);this.setScissorRectangle(null);this.setTextureAt(0,b.__frontBufferTexture);this.setVertexBufferAt(0,a.__vertexBuffer,0,3);this.setVertexBufferAt(1,a.__vertexBuffer,3,2);this.setProgramConstantsFromMatrix(1,0,a.__renderTransform,!0);this.drawTriangles(a.__indexBuffer);this.__present=
!0}},__setGLBlend:function(a){this.__contextState.__enableGLBlend!=a&&(a?this.gl.enable(this.gl.BLEND):this.gl.disable(this.gl.BLEND),this.__contextState.__enableGLBlend=a)},__setGLBlendEquation:function(a){this.__contextState.__glBlendEquation!=a&&(this.gl.blendEquation(a),this.__contextState.__glBlendEquation=a)},__setGLCullFace:function(a){this.__contextState.__enableGLCullFace!=a&&(a?this.gl.enable(this.gl.CULL_FACE):this.gl.disable(this.gl.CULL_FACE),this.__contextState.__enableGLCullFace=a)},
__setGLDepthTest:function(a){this.__contextState.__enableGLDepthTest!=a&&(a?this.gl.enable(this.gl.DEPTH_TEST):this.gl.disable(this.gl.DEPTH_TEST),this.__contextState.__enableGLDepthTest=a)},__setGLFrontFace:function(a){this.__contextState.__frontFaceGLCCW!=a&&(this.gl.frontFace(a?this.gl.CCW:this.gl.CW),this.__contextState.__frontFaceGLCCW=a)},__setGLScissorTest:function(a){this.__contextState.__enableGLScissorTest!=a&&(a?this.gl.enable(this.gl.SCISSOR_TEST):this.gl.disable(this.gl.SCISSOR_TEST),
this.__contextState.__enableGLScissorTest=a)},__setGLStencilTest:function(a){this.__contextState.__enableGLStencilTest!=a&&(a?this.gl.enable(this.gl.STENCIL_TEST):this.gl.disable(this.gl.STENCIL_TEST),this.__contextState.__enableGLStencilTest=a)},set_enableErrorChecking:function(a){return this.__enableErrorChecking=a},__class__:kb});var $i={};g["openfl.display3D._Context3DBufferUsage.Context3DBufferUsage_Impl_"]=$i;$i.__name__="openfl.display3D._Context3DBufferUsage.Context3DBufferUsage_Impl_";$i.fromString=
function(a){switch(a){case "dynamicDraw":return 0;case "staticDraw":return 1;default:return null}};$i.toString=function(a){switch(a){case 0:return"dynamicDraw";case 1:return"staticDraw";default:return null}};var Ll={};g["openfl.display3D._Context3DProfile.Context3DProfile_Impl_"]=Ll;Ll.__name__="openfl.display3D._Context3DProfile.Context3DProfile_Impl_";Ll.fromString=function(a){switch(a){case "baseline":return 0;case "baselineConstrained":return 1;case "baselineExtended":return 2;case "standard":return 3;
case "standardConstrained":return 4;case "standardExtended":return 5;default:return null}};var Ye={};g["openfl.display3D._Context3DProgramType.Context3DProgramType_Impl_"]=Ye;Ye.__name__="openfl.display3D._Context3DProgramType.Context3DProgramType_Impl_";Ye.toString=function(a){switch(a){case 0:return"fragment";case 1:return"vertex";default:return null}};var om={};g["openfl.display3D._Context3DTextureFormat.Context3DTextureFormat_Impl_"]=om;om.__name__="openfl.display3D._Context3DTextureFormat.Context3DTextureFormat_Impl_";
om.toString=function(a){switch(a){case 0:return"bgrPacked565";case 1:return"bgra";case 2:return"bgraPacked4444";case 3:return"compressed";case 4:return"compressedAlpha";case 5:return"rgbaHalfFloat";default:return null}};var Ch=function(a,b,c){this.__context=a;this.__numIndices=b;a=this.__context.gl;this.__id=a.createBuffer();this.__usage=0==c?a.DYNAMIC_DRAW:a.STATIC_DRAW};g["openfl.display3D.IndexBuffer3D"]=Ch;Ch.__name__="openfl.display3D.IndexBuffer3D";Ch.prototype={__context:null,__id:null,__numIndices:null,
__tempUInt16Array:null,__usage:null,dispose:function(){this.__context.gl.deleteBuffer(this.__id)},uploadFromTypedArray:function(a,b){null!=a&&(b=this.__context.gl,this.__context.__bindGLElementArrayBuffer(this.__id),sb.bufferData(b,b.ELEMENT_ARRAY_BUFFER,a,this.__usage))},uploadFromVector:function(a,b,c){if(null!=a){var d=b+c,e=this.__tempUInt16Array;if(null==this.__tempUInt16Array||this.__tempUInt16Array.length<c)this.__tempUInt16Array=null!=c?new Uint16Array(c):null,null!=e&&this.__tempUInt16Array.set(e);
for(c=b;c<d;)e=c++,this.__tempUInt16Array[e-b]=a.get(e);this.uploadFromTypedArray(this.__tempUInt16Array)}},__class__:Ch};var fk=function(a,b){this.__context=a;this.__format=b;0==this.__format?(this.__agalSamplerUsageMask=0,this.__agalUniforms=new ia,this.__agalSamplerUniforms=new ia,this.__agalAlphaSamplerUniforms=new ia,this.__agalAlphaSamplerEnabled=[]):(this.__glslAttribNames=[],this.__glslAttribTypes=[],this.__glslSamplerNames=[],this.__glslUniformLocations=[],this.__glslUniformNames=[],this.__glslUniformTypes=
[]);this.__samplerStates=[]};g["openfl.display3D.Program3D"]=fk;fk.__name__="openfl.display3D.Program3D";fk.prototype={__agalAlphaSamplerEnabled:null,__agalAlphaSamplerUniforms:null,__agalFragmentUniformMap:null,__agalPositionScale:null,__agalSamplerUniforms:null,__agalSamplerUsageMask:null,__agalUniforms:null,__agalVertexUniformMap:null,__context:null,__format:null,__glFragmentShader:null,__glFragmentSource:null,__glProgram:null,__glslAttribNames:null,__glslAttribTypes:null,__glslSamplerNames:null,
__glslUniformLocations:null,__glslUniformNames:null,__glslUniformTypes:null,__glVertexShader:null,__glVertexSource:null,__samplerStates:null,dispose:function(){this.__deleteShaders()},upload:function(a,b){if(0==this.__format){var c=[];a=sd.convertToGLSL(a,null);b=sd.convertToGLSL(b,c);5==Ga.level&&(Ga.info(a,{fileName:"openfl/display3D/Program3D.hx",lineNumber:399,className:"openfl.display3D.Program3D",methodName:"upload"}),Ga.info(b,{fileName:"openfl/display3D/Program3D.hx",lineNumber:400,className:"openfl.display3D.Program3D",
methodName:"upload"}));this.__deleteShaders();this.__uploadFromGLSL(a,b);this.__buildAGALUniformList();b=0;for(a=c.length;b<a;){var d=b++;this.__samplerStates[d]=c[d]}}},__buildAGALUniformList:function(){if(1!=this.__format){var a=this.__context.gl;this.__agalUniforms.clear();this.__agalSamplerUniforms.clear();this.__agalAlphaSamplerUniforms.clear();this.__agalAlphaSamplerEnabled=[];this.__agalSamplerUsageMask=0;var b=a.getProgramParameter(this.__glProgram,a.ACTIVE_UNIFORMS);for(var c=new ia,d=new ia,
e=0;e<b;){var f=e++,k=a.getActiveUniform(this.__glProgram,f),m=k.name,h=k.size,n=k.type;k=new hk(this.__context);k.name=m;k.size=h;k.type=n;k.location=a.getUniformLocation(this.__glProgram,k.name);m=k.name.indexOf("[");0<=m&&(k.name=k.name.substring(0,m));switch(k.type){case 35674:k.regCount=2;break;case 35675:k.regCount=3;break;case 35676:k.regCount=4;break;default:k.regCount=1}k.regCount*=k.size;this.__agalUniforms.add(k);if("vcPositionScale"==k.name)this.__agalPositionScale=k;else if(Y.startsWith(k.name,
"vc"))k.regIndex=r.parseInt(k.name.substring(2)),k.regData=this.__context.__vertexConstants,c.add(k);else if(Y.startsWith(k.name,"fc"))k.regIndex=r.parseInt(k.name.substring(2)),k.regData=this.__context.__fragmentConstants,d.add(k);else if(Y.startsWith(k.name,"sampler")&&-1==k.name.indexOf("alpha"))for(k.regIndex=r.parseInt(k.name.substring(7)),this.__agalSamplerUniforms.add(k),m=0,h=k.regCount;m<h;)n=m++,this.__agalSamplerUsageMask|=1<<k.regIndex+n;else Y.startsWith(k.name,"sampler")&&Y.endsWith(k.name,
"_alpha")?(m=k.name.indexOf("_")-7,k.regIndex=r.parseInt(k.name.substring(7,7+m))+4,this.__agalAlphaSamplerUniforms.add(k)):Y.startsWith(k.name,"sampler")&&Y.endsWith(k.name,"_alphaEnabled")&&(k.regIndex=r.parseInt(k.name.substring(7)),this.__agalAlphaSamplerEnabled[k.regIndex]=k);5==Ga.level&&Ga.verbose(""+f+" name:"+k.name+" type:"+k.type+" size:"+k.size+" location:"+r.string(k.location),{fileName:"openfl/display3D/Program3D.hx",lineNumber:577,className:"openfl.display3D.Program3D",methodName:"__buildAGALUniformList"})}this.__agalVertexUniformMap=
new Dh(Ub.array(c));this.__agalFragmentUniformMap=new Dh(Ub.array(d))}},__deleteShaders:function(){var a=this.__context.gl;null!=this.__glProgram&&(this.__glProgram=null);null!=this.__glVertexShader&&(a.deleteShader(this.__glVertexShader),this.__glVertexShader=null);null!=this.__glFragmentShader&&(a.deleteShader(this.__glFragmentShader),this.__glFragmentShader=null)},__disable:function(){},__enable:function(){var a=this.__context.gl;a.useProgram(this.__glProgram);if(0==this.__format){this.__agalVertexUniformMap.markAllDirty();
this.__agalFragmentUniformMap.markAllDirty();for(var b=this.__agalSamplerUniforms.h;null!=b;){var c=b.item;b=b.next;if(1==c.regCount)a.uniform1i(c.location,c.regIndex);else throw new W(new Nc("!!! TODO: uniform location on webgl"));}for(b=this.__agalAlphaSamplerUniforms.h;null!=b;)if(c=b.item,b=b.next,1==c.regCount)a.uniform1i(c.location,c.regIndex);else throw new W(new Nc("!!! TODO: uniform location on webgl"));}},__flush:function(){0==this.__format&&(this.__agalVertexUniformMap.flush(),this.__agalFragmentUniformMap.flush())},
__markDirty:function(a,b,c){1!=this.__format&&(a?this.__agalVertexUniformMap.markDirty(b,c):this.__agalFragmentUniformMap.markDirty(b,c))},__setPositionScale:function(a){1!=this.__format&&null!=this.__agalPositionScale&&this.__context.gl.uniform4fv(this.__agalPositionScale.location,a)},__uploadFromGLSL:function(a,b){var c=this.__context.gl;this.__glVertexSource=a;this.__glFragmentSource=b;this.__glVertexShader=c.createShader(c.VERTEX_SHADER);c.shaderSource(this.__glVertexShader,a);c.compileShader(this.__glVertexShader);
if(0==c.getShaderParameter(this.__glVertexShader,c.COMPILE_STATUS)){var d="Error compiling vertex shader\n"+c.getShaderInfoLog(this.__glVertexShader);Ga.error(d+("\n"+a),{fileName:"openfl/display3D/Program3D.hx",lineNumber:869,className:"openfl.display3D.Program3D",methodName:"__uploadFromGLSL"})}this.__glFragmentShader=c.createShader(c.FRAGMENT_SHADER);c.shaderSource(this.__glFragmentShader,b);c.compileShader(this.__glFragmentShader);0==c.getShaderParameter(this.__glFragmentShader,c.COMPILE_STATUS)&&
(d="Error compiling fragment shader\n"+c.getShaderInfoLog(this.__glFragmentShader),Ga.error(d+("\n"+b),{fileName:"openfl/display3D/Program3D.hx",lineNumber:881,className:"openfl.display3D.Program3D",methodName:"__uploadFromGLSL"}));this.__glProgram=c.createProgram();if(0==this.__format)for(b=0;16>b;){d=b++;var e="va"+d;-1!=a.indexOf(" "+e)&&c.bindAttribLocation(this.__glProgram,d,e)}else for(a=0,b=this.__glslAttribNames;a<b.length;)if(d=b[a],++a,-1<d.indexOf("Position")&&Y.startsWith(d,"openfl_")){c.bindAttribLocation(this.__glProgram,
0,d);break}c.attachShader(this.__glProgram,this.__glVertexShader);c.attachShader(this.__glProgram,this.__glFragmentShader);c.linkProgram(this.__glProgram);0==c.getProgramParameter(this.__glProgram,c.LINK_STATUS)&&(c="Unable to initialize the shader program\n"+c.getProgramInfoLog(this.__glProgram),Ga.error(c,{fileName:"openfl/display3D/Program3D.hx",lineNumber:922,className:"openfl.display3D.Program3D",methodName:"__uploadFromGLSL"}))},__class__:fk};var hk=function(a){this.context=a;this.isDirty=!0;
this.regDataPointer=new Hk(null,0)};g["openfl.display3D.Uniform"]=hk;hk.__name__="openfl.display3D.Uniform";hk.prototype={name:null,location:null,type:null,size:null,regData:null,regIndex:null,regCount:null,isDirty:null,context:null,regDataPointer:null,flush:function(){var a=this.context.gl,b=4*this.regIndex;switch(this.type){case 35664:Yl.uniform2fv(a,this.location,this.regData.subarray(b,b+2*this.regCount));break;case 35665:var c=this.location;b=this.regData.subarray(b,b+3*this.regCount);a.uniform3fv(c,
b);break;case 35666:c=this.location;b=this.regData.subarray(b,b+4*this.regCount);a.uniform4fv(c,b);break;case 35674:sb.uniformMatrix2fv(a,this.location,!1,this.regData.subarray(b,b+4*this.size));break;case 35675:sb.uniformMatrix3fv(a,this.location,!1,this.regData.subarray(b,b+9*this.size));break;case 35676:sb.uniformMatrix4fv(a,this.location,!1,this.regData.subarray(b,b+16*this.size));break;default:c=this.location,b=this.regData.subarray(b,b+4*this.regCount),a.uniform4fv(c,b)}},__class__:hk};var Dh=
function(a){this.__uniforms=a;this.__uniforms.sort(function(a,b){return Na.compare(a.regIndex,b.regIndex)});for(var b=a=0,c=this.__uniforms;b<c.length;){var d=c[b];++b;d.regIndex+d.regCount>a&&(a=d.regIndex+d.regCount)}this.__registerLookup=M.toObjectVector(null,a);a=0;for(b=this.__uniforms;a<b.length;){c=b[a];++a;d=0;for(var e=c.regCount;d<e;){var f=d++;this.__registerLookup.set(c.regIndex+f,c)}}this.__anyDirty=this.__allDirty=!0};g["openfl.display3D.UniformMap"]=Dh;Dh.__name__="openfl.display3D.UniformMap";
Dh.prototype={__allDirty:null,__anyDirty:null,__registerLookup:null,__uniforms:null,flush:function(){if(this.__anyDirty){for(var a=0,b=this.__uniforms;a<b.length;){var c=b[a];++a;if(this.__allDirty||c.isDirty)c.flush(),c.isDirty=!1}this.__anyDirty=this.__allDirty=!1}},markAllDirty:function(){this.__anyDirty=this.__allDirty=!0},markDirty:function(a,b){if(!this.__allDirty)for(b=a+b,b>this.__registerLookup.get_length()&&(b=this.__registerLookup.get_length());a<b;){var c=this.__registerLookup.get(a);
null!=c?(this.__anyDirty=c.isDirty=!0,a=c.regIndex+c.regCount):++a}},__class__:Dh};var Yk=function(a,b,c,d){this.__context=a;this.__numVertices=b;this.__vertexSize=c;a=this.__context.gl;this.__id=a.createBuffer();this.__stride=4*this.__vertexSize;this.__usage=0==$i.fromString(d)?a.DYNAMIC_DRAW:a.STATIC_DRAW};g["openfl.display3D.VertexBuffer3D"]=Yk;Yk.__name__="openfl.display3D.VertexBuffer3D";Yk.prototype={__context:null,__id:null,__numVertices:null,__stride:null,__tempFloat32Array:null,__usage:null,
__vertexSize:null,dispose:function(){this.__context.gl.deleteBuffer(this.__id)},uploadFromTypedArray:function(a,b){null!=a&&(b=this.__context.gl,this.__context.__bindGLArrayBuffer(this.__id),sb.bufferData(b,b.ARRAY_BUFFER,a,this.__usage))},uploadFromVector:function(a,b,c){if(null!=a){b*=this.__vertexSize;var d=c*this.__vertexSize;c=b+d;var e=this.__tempFloat32Array;if(null==this.__tempFloat32Array||this.__tempFloat32Array.length<d)this.__tempFloat32Array=null!=d?new Float32Array(d):null,null!=e&&
this.__tempFloat32Array.set(e);for(d=b;d<c;)e=d++,this.__tempFloat32Array[e-b]=a.get(e);this.uploadFromTypedArray(this.__tempFloat32Array)}},__class__:Yk};var xb=function(a){aa.call(this);this.__context=a;var b=this.__context.gl;this.__textureID=b.createTexture();this.__textureContext=this.__context.__context;if(null==xb.__supportsBGRA){xb.__textureInternalFormat=b.RGBA;xb.__supportsBGRA=!1;xb.__textureFormat=b.RGBA;xb.__compressedFormats=new Zb;xb.__compressedFormatsAlpha=new Zb;a=b.getExtension("WEBGL_compressed_texture_s3tc");
var c=b.getExtension("WEBGL_compressed_texture_etc1");b=b.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");null!=a&&(xb.__compressedFormats.h[0]=a.COMPRESSED_RGBA_S3TC_DXT1_EXT,xb.__compressedFormatsAlpha.h[0]=a.COMPRESSED_RGBA_S3TC_DXT5_EXT);null!=c&&(xb.__compressedFormats.h[2]=c.COMPRESSED_RGB_ETC1_WEBGL,xb.__compressedFormatsAlpha.h[2]=c.COMPRESSED_RGB_ETC1_WEBGL);null!=b&&(xb.__compressedFormats.h[1]=b.COMPRESSED_RGB_PVRTC_4BPPV1_IMG,xb.__compressedFormatsAlpha.h[1]=b.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG)}this.__internalFormat=
xb.__textureInternalFormat;this.__format=xb.__textureFormat};g["openfl.display3D.textures.TextureBase"]=xb;xb.__name__="openfl.display3D.textures.TextureBase";xb.__super__=aa;xb.prototype=v(aa.prototype,{__alphaTexture:null,__context:null,__format:null,__glDepthRenderbuffer:null,__glFramebuffer:null,__glStencilRenderbuffer:null,__height:null,__internalFormat:null,__optimizeForRenderToTexture:null,__samplerState:null,__streamingLevels:null,__textureContext:null,__textureID:null,__textureTarget:null,
__width:null,dispose:function(){var a=this.__context.gl;null!=this.__alphaTexture&&(this.__alphaTexture.dispose(),this.__alphaTexture=null);null!=this.__textureID&&(a.deleteTexture(this.__textureID),this.__textureID=null);null!=this.__glFramebuffer&&(a.deleteFramebuffer(this.__glFramebuffer),this.__glFramebuffer=null);null!=this.__glDepthRenderbuffer&&(a.deleteRenderbuffer(this.__glDepthRenderbuffer),this.__glDepthRenderbuffer=null);null!=this.__glStencilRenderbuffer&&(a.deleteRenderbuffer(this.__glStencilRenderbuffer),
this.__glStencilRenderbuffer=null)},__getGLFramebuffer:function(a,b,c){b=this.__context.gl;null==this.__glFramebuffer&&(this.__glFramebuffer=b.createFramebuffer(),this.__context.__bindGLFramebuffer(this.__glFramebuffer),b.framebufferTexture2D(b.FRAMEBUFFER,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,this.__textureID,0),this.__context.__enableErrorChecking&&(c=b.checkFramebufferStatus(b.FRAMEBUFFER),c!=b.FRAMEBUFFER_COMPLETE&&Ga.warn("Error: Context3D.setRenderToTexture status:"+c+" width:"+this.__width+" height:"+
this.__height,{fileName:"openfl/display3D/textures/TextureBase.hx",lineNumber:201,className:"openfl.display3D.textures.TextureBase",methodName:"__getGLFramebuffer"})));a&&null==this.__glDepthRenderbuffer&&(this.__context.__bindGLFramebuffer(this.__glFramebuffer),0!=kb.__glDepthStencil?(this.__glStencilRenderbuffer=this.__glDepthRenderbuffer=b.createRenderbuffer(),b.bindRenderbuffer(b.RENDERBUFFER,this.__glDepthRenderbuffer),b.renderbufferStorage(b.RENDERBUFFER,kb.__glDepthStencil,this.__width,this.__height),
b.framebufferRenderbuffer(b.FRAMEBUFFER,b.DEPTH_STENCIL_ATTACHMENT,b.RENDERBUFFER,this.__glDepthRenderbuffer)):(this.__glDepthRenderbuffer=b.createRenderbuffer(),this.__glStencilRenderbuffer=b.createRenderbuffer(),b.bindRenderbuffer(b.RENDERBUFFER,this.__glDepthRenderbuffer),b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_COMPONENT16,this.__width,this.__height),b.bindRenderbuffer(b.RENDERBUFFER,this.__glStencilRenderbuffer),b.renderbufferStorage(b.RENDERBUFFER,b.STENCIL_INDEX8,this.__width,this.__height),
b.framebufferRenderbuffer(b.FRAMEBUFFER,b.DEPTH_ATTACHMENT,b.RENDERBUFFER,this.__glDepthRenderbuffer),b.framebufferRenderbuffer(b.FRAMEBUFFER,b.STENCIL_ATTACHMENT,b.RENDERBUFFER,this.__glStencilRenderbuffer)),this.__context.__enableErrorChecking&&(a=b.checkFramebufferStatus(b.FRAMEBUFFER),a!=b.FRAMEBUFFER_COMPLETE&&Ga.warn("Error: Context3D.setRenderToTexture status:"+a+" width:"+this.__width+" height:"+this.__height,{fileName:"openfl/display3D/textures/TextureBase.hx",lineNumber:239,className:"openfl.display3D.textures.TextureBase",
methodName:"__getGLFramebuffer"})),b.bindRenderbuffer(b.RENDERBUFFER,null));return this.__glFramebuffer},__getImage:function(a){var b=a.image;if(!a.__isValid||null==b)return null;La.sync(b,!1);a=this.__context.gl;b.type==Wc.DATA||b.get_premultiplied()?!b.get_premultiplied()&&b.get_transparent()&&(a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,0),b=b.clone(),b.set_premultiplied(!0)):a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,1);0!=b.get_format()&&(b=b.clone(),b.set_format(0),b.buffer.premultiplied=
!0);return b},__getTexture:function(){return this.__textureID},__setSamplerState:function(a){if(!a.equals(this.__samplerState)){var b=this.__context.gl;this.__textureTarget==this.__context.gl.TEXTURE_CUBE_MAP?this.__context.__bindGLTextureCubeMap(this.__textureID):this.__context.__bindGLTexture2D(this.__textureID);var c;switch(a.wrap){case 0:var d=c=b.CLAMP_TO_EDGE;break;case 1:c=b.CLAMP_TO_EDGE;d=b.REPEAT;break;case 2:d=c=b.REPEAT;break;case 3:c=b.REPEAT;d=b.CLAMP_TO_EDGE;break;default:throw new W(new cb("wrap bad enum"));
}var e=5==a.filter?b.NEAREST:b.LINEAR;switch(a.mipfilter){case 0:var f=5==a.filter?b.NEAREST_MIPMAP_LINEAR:b.LINEAR_MIPMAP_LINEAR;break;case 1:f=5==a.filter?b.NEAREST_MIPMAP_NEAREST:b.LINEAR_MIPMAP_NEAREST;break;case 2:f=5==a.filter?b.NEAREST:b.LINEAR;break;default:throw new W(new cb("mipfiter bad enum"));}b.texParameteri(this.__textureTarget,b.TEXTURE_MIN_FILTER,f);b.texParameteri(this.__textureTarget,b.TEXTURE_MAG_FILTER,e);b.texParameteri(this.__textureTarget,b.TEXTURE_WRAP_S,c);b.texParameteri(this.__textureTarget,
b.TEXTURE_WRAP_T,d);null==this.__samplerState&&(this.__samplerState=a.clone());this.__samplerState.copyFrom(a);return!0}return!1},__uploadFromImage:function(a){var b=this.__context.gl,c;if(this.__textureTarget==b.TEXTURE_2D){if(1==a.buffer.bitsPerPixel)var d=c=b.ALPHA;else c=xb.__textureInternalFormat,d=xb.__textureFormat;this.__context.__bindGLTexture2D(this.__textureID);a.type==Wc.DATA||a.get_premultiplied()?!a.get_premultiplied()&&a.get_transparent()&&b.pixelStorei(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL,
1):b.pixelStorei(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL,1);a.type==Wc.DATA?sb.texImage2D(b,b.TEXTURE_2D,0,c,a.buffer.width,a.buffer.height,0,d,b.UNSIGNED_BYTE,a.get_data()):sb.texImage2D(b,b.TEXTURE_2D,0,c,d,b.UNSIGNED_BYTE,a.get_src());this.__context.__bindGLTexture2D(null)}},__class__:xb});var $g=function(a,b,c,d,e){xb.call(this,a);this.__width=this.__height=this.__size=b;this.__optimizeForRenderToTexture=d;this.__streamingLevels=e;this.__textureTarget=this.__context.gl.TEXTURE_CUBE_MAP;this.__uploadedSides=
0};g["openfl.display3D.textures.CubeTexture"]=$g;$g.__name__="openfl.display3D.textures.CubeTexture";$g.__super__=xb;$g.prototype=v(xb.prototype,{__framebufferSurface:null,__size:null,__uploadedSides:null,uploadFromBitmapData:function(a,b,c,d){null==c&&(c=0);if(null!=a&&0!=this.__size>>c&&(a=this.__getImage(a),null!=a))if(0==c&&null!=a.buffer&&null==a.buffer.data&&null!=a.buffer.get_src()){if(d=this.__context.gl,0!=this.__size>>c){var e=this.__sideToTarget(b);this.__context.__bindGLTextureCubeMap(this.__textureID);
sb.texImage2D(d,e,c,this.__internalFormat,this.__format,d.UNSIGNED_BYTE,a.buffer.get_src());this.__context.__bindGLTextureCubeMap(null);this.__uploadedSides|=1<<b}}else this.uploadFromTypedArray(a.get_data(),b,c)},uploadFromTypedArray:function(a,b,c){null==c&&(c=0);if(null!=a){var d=this.__context.gl,e=this.__size>>c;if(0!=e){var f=this.__sideToTarget(b);this.__context.__bindGLTextureCubeMap(this.__textureID);sb.texImage2D(d,f,c,this.__internalFormat,e,e,0,this.__format,d.UNSIGNED_BYTE,a);this.__context.__bindGLTextureCubeMap(null);
this.__uploadedSides|=1<<b}}},__getGLFramebuffer:function(a,b,c){var d=this.__context.gl;null==this.__glFramebuffer&&(this.__glFramebuffer=d.createFramebuffer(),this.__framebufferSurface=-1);if(this.__framebufferSurface!=c&&(this.__framebufferSurface=c,this.__context.__bindGLFramebuffer(this.__glFramebuffer),d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_CUBE_MAP_POSITIVE_X+c,this.__textureID,0),this.__context.__enableErrorChecking)){var e=d.checkFramebufferStatus(d.FRAMEBUFFER);
e!=d.FRAMEBUFFER_COMPLETE&&Ga.error("Error: Context3D.setRenderToTexture status:"+e+" width:"+this.__width+" height:"+this.__height,{fileName:"openfl/display3D/textures/CubeTexture.hx",lineNumber:278,className:"openfl.display3D.textures.CubeTexture",methodName:"__getGLFramebuffer"})}return xb.prototype.__getGLFramebuffer.call(this,a,b,c)},__setSamplerState:function(a){if(xb.prototype.__setSamplerState.call(this,a)){var b=this.__context.gl;2==a.mipfilter||this.__samplerState.mipmapGenerated||(b.generateMipmap(b.TEXTURE_CUBE_MAP),
this.__samplerState.mipmapGenerated=!0);if(0!=kb.__glMaxTextureMaxAnisotropy){switch(a.filter){case 0:a=16;break;case 1:a=2;break;case 2:a=4;break;case 3:a=8;break;default:a=1}a>kb.__glMaxTextureMaxAnisotropy&&(a=kb.__glMaxTextureMaxAnisotropy);b.texParameterf(b.TEXTURE_CUBE_MAP,kb.__glTextureMaxAnisotropy,a)}return!0}return!1},__sideToTarget:function(a){var b=this.__context.gl;switch(a){case 0:return b.TEXTURE_CUBE_MAP_POSITIVE_X;case 1:return b.TEXTURE_CUBE_MAP_NEGATIVE_X;case 2:return b.TEXTURE_CUBE_MAP_POSITIVE_Y;
case 3:return b.TEXTURE_CUBE_MAP_NEGATIVE_Y;case 4:return b.TEXTURE_CUBE_MAP_POSITIVE_Z;case 5:return b.TEXTURE_CUBE_MAP_NEGATIVE_Z;default:throw new W(new Nc);}},__class__:$g});var gk=function(a,b,c,d,e){xb.call(this,a);this.__width=b;this.__height=c;this.__optimizeForRenderToTexture=e;this.__textureTarget=this.__context.gl.TEXTURE_2D;this.uploadFromTypedArray(null);e&&this.__getGLFramebuffer(!0,0,0)};g["openfl.display3D.textures.RectangleTexture"]=gk;gk.__name__="openfl.display3D.textures.RectangleTexture";
gk.__super__=xb;gk.prototype=v(xb.prototype,{uploadFromTypedArray:function(a){var b=this.__context.gl;this.__context.__bindGLTexture2D(this.__textureID);sb.texImage2D(b,this.__textureTarget,0,this.__internalFormat,this.__width,this.__height,0,this.__format,b.UNSIGNED_BYTE,a);this.__context.__bindGLTexture2D(null)},__setSamplerState:function(a){if(xb.prototype.__setSamplerState.call(this,a)){var b=this.__context.gl;if(0!=kb.__glMaxTextureMaxAnisotropy){switch(a.filter){case 0:a=16;break;case 1:a=2;
break;case 2:a=4;break;case 3:a=8;break;default:a=1}a>kb.__glMaxTextureMaxAnisotropy&&(a=kb.__glMaxTextureMaxAnisotropy);b.texParameterf(b.TEXTURE_2D,kb.__glTextureMaxAnisotropy,a)}return!0}return!1},__class__:gk});var Nf=function(a,b,c,d,e,f){xb.call(this,a);this.__width=b;this.__height=c;this.__optimizeForRenderToTexture=e;this.__streamingLevels=f;a=this.__context.gl;this.__textureTarget=a.TEXTURE_2D;this.__context.__bindGLTexture2D(this.__textureID);sb.texImage2D(a,this.__textureTarget,0,this.__internalFormat,
this.__width,this.__height,0,this.__format,a.UNSIGNED_BYTE,null);this.__context.__bindGLTexture2D(null);e&&this.__getGLFramebuffer(!0,0,0)};g["openfl.display3D.textures.Texture"]=Nf;Nf.__name__="openfl.display3D.textures.Texture";Nf.__super__=xb;Nf.prototype=v(xb.prototype,{uploadFromBitmapData:function(a,b,c){null==b&&(b=0);if(null!=a){c=this.__width>>b;var d=this.__height>>b;if(0!=c||0!=d){0==c&&(c=1);0==d&&(d=1);if(a.width!=c||a.height!=d)c=new Mb(c,d,!0,0),c.draw(a),a=c;a=this.__getImage(a);if(null!=
a)if(0==b&&null!=a.buffer&&null==a.buffer.data&&null!=a.buffer.get_src()){if(c=this.__context.gl,d=this.__height>>b,0!=this.__width>>b||0!=d)this.__context.__bindGLTexture2D(this.__textureID),sb.texImage2D(c,this.__textureTarget,b,this.__internalFormat,this.__format,c.UNSIGNED_BYTE,a.buffer.get_src()),this.__context.__bindGLTexture2D(null)}else this.uploadFromTypedArray(a.get_data(),b)}}},uploadFromTypedArray:function(a,b){null==b&&(b=0);if(null!=a){var c=this.__context.gl,d=this.__width>>b,e=this.__height>>
b;if(0!=d||0!=e)0==d&&(d=1),0==e&&(e=1),this.__context.__bindGLTexture2D(this.__textureID),sb.texImage2D(c,this.__textureTarget,b,this.__internalFormat,d,e,0,this.__format,c.UNSIGNED_BYTE,a),this.__context.__bindGLTexture2D(null)}},__setSamplerState:function(a){if(xb.prototype.__setSamplerState.call(this,a)){var b=this.__context.gl;2==a.mipfilter||this.__samplerState.mipmapGenerated||(b.generateMipmap(b.TEXTURE_2D),this.__samplerState.mipmapGenerated=!0);if(0!=kb.__glMaxTextureMaxAnisotropy){switch(a.filter){case 0:a=
16;break;case 1:a=2;break;case 2:a=4;break;case 3:a=8;break;default:a=1}a>kb.__glMaxTextureMaxAnisotropy&&(a=kb.__glMaxTextureMaxAnisotropy);b.texParameterf(b.TEXTURE_2D,kb.__glTextureMaxAnisotropy,a)}return!0}return!1},__class__:Nf});var ik=function(a){xb.call(this,a);this.__textureTarget=this.__context.gl.TEXTURE_2D};g["openfl.display3D.textures.VideoTexture"]=ik;ik.__name__="openfl.display3D.textures.VideoTexture";ik.__super__=xb;ik.prototype=v(xb.prototype,{__netStream:null,__getTexture:function(){if((!this.__netStream.__video.paused||
this.__netStream.get___seeking())&&0<this.__netStream.__video.readyState){this.__netStream.set___seeking(!1);var a=this.__context.gl;this.__context.__bindGLTexture2D(this.__textureID);sb.texImage2D(a,a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,this.__netStream.__video)}return this.__textureID},__class__:ik});var Ig=function(a){null==a&&(a="");cb.call(this,a);this.name="ArgumentError"};g["openfl.errors.ArgumentError"]=Ig;Ig.__name__="openfl.errors.ArgumentError";Ig.__super__=cb;Ig.prototype=v(cb.prototype,
{__class__:Ig});var bg=function(a){null==a&&(a="");cb.call(this,a);this.name="IOError"};g["openfl.errors.IOError"]=bg;bg.__name__="openfl.errors.IOError";bg.__super__=cb;bg.prototype=v(cb.prototype,{__class__:bg});var aj=function(a,b){bg.call(this,"End of file was encountered");this.name="EOFError";this.errorID=2030};g["openfl.errors.EOFError"]=aj;aj.__name__="openfl.errors.EOFError";aj.__super__=bg;aj.prototype=v(bg.prototype,{__class__:aj});var Nc=function(a){null==a&&(a="");cb.call(this,a,0);this.name=
"IllegalOperationError"};g["openfl.errors.IllegalOperationError"]=Nc;Nc.__name__="openfl.errors.IllegalOperationError";Nc.__super__=cb;Nc.prototype=v(cb.prototype,{__class__:Nc});var Hg=function(a){null==a&&(a="");cb.call(this,a,0);this.name="TypeError"};g["openfl.errors.TypeError"]=Hg;Hg.__name__="openfl.errors.TypeError";Hg.__super__=cb;Hg.prototype=v(cb.prototype,{__class__:Hg});var re=function(a,b,c,d){null==d&&(d=!1);null==c&&(c=!1);null==b&&(b=!1);R.call(this,a,b,c);this.activating=d};g["openfl.events.ActivityEvent"]=
re;re.__name__="openfl.events.ActivityEvent";re.__super__=R;re.prototype=v(R.prototype,{activating:null,__init:function(){R.prototype.__init.call(this);this.activating=!1},__class__:re});var td=function(a,b,c,d){null==d&&(d="");null==c&&(c=!1);null==b&&(b=!1);R.call(this,a,b,c);this.text=d};g["openfl.events.TextEvent"]=td;td.__name__="openfl.events.TextEvent";td.__super__=R;td.prototype=v(R.prototype,{text:null,__init:function(){R.prototype.__init.call(this);this.text=""},__class__:td});var ud=function(a,
b,c,d,e){null==e&&(e=0);null==d&&(d="");null==c&&(c=!1);null==b&&(b=!1);td.call(this,a,b,c,d);this.errorID=e};g["openfl.events.ErrorEvent"]=ud;ud.__name__="openfl.events.ErrorEvent";ud.__super__=td;ud.prototype=v(td.prototype,{errorID:null,__init:function(){td.prototype.__init.call(this);this.errorID=0},__class__:ud});var eg=function(a){this.active=!1;this.reset(a)};g["openfl.events._EventDispatcher.DispatchIterator"]=eg;eg.__name__="openfl.events._EventDispatcher.DispatchIterator";eg.prototype={active:null,
index:null,isCopy:null,list:null,copy:function(){this.isCopy||(this.list=this.list.slice(),this.isCopy=!0)},hasNext:function(){return this.index<this.list.length},next:function(){return this.list[this.index++]},remove:function(a,b){if(this.active)if(this.isCopy){b=this.index;for(var c=this.list.length;b<c;){var d=b++;if(this.list[d]==a){this.list.splice(d,1);break}}}else b<this.index&&this.index--},reset:function(a){this.list=a;this.isCopy=!1;this.index=0},start:function(){this.active=!0},stop:function(){this.active=
!1},__class__:eg};var dg=function(a,b,c){this.callback=a;this.useCapture=b;this.priority=c};g["openfl.events._EventDispatcher.Listener"]=dg;dg.__name__="openfl.events._EventDispatcher.Listener";dg.prototype={callback:null,priority:null,useCapture:null,match:function(a,b){return Na.compareMethods(this.callback,a)?this.useCapture==b:!1},__class__:dg};var Re=function(a,b,c,d,e,f){null==f&&(f=0);null==e&&(e=!1);null==c&&(c=!1);null==b&&(b=!1);R.call(this,a,b,c);this.keyCode=f;this.shiftKey=e;this.relatedObject=
d};g["openfl.events.FocusEvent"]=Re;Re.__name__="openfl.events.FocusEvent";Re.__super__=R;Re.prototype=v(R.prototype,{keyCode:null,relatedObject:null,shiftKey:null,__init:function(){R.prototype.__init.call(this);this.keyCode=0;this.shiftKey=!1;this.relatedObject=null},__class__:Re});var Fe=function(a,b,c,d,e){null==e&&(e=!1);null==d&&(d=!1);null==c&&(c=!1);null==b&&(b=!1);re.call(this,a,b,c);this.fullScreen=d;this.interactive=e};g["openfl.events.FullScreenEvent"]=Fe;Fe.__name__="openfl.events.FullScreenEvent";
Fe.__super__=re;Fe.prototype=v(re.prototype,{fullScreen:null,interactive:null,__init:function(){re.prototype.__init.call(this);this.interactive=this.fullScreen=!1},__class__:Fe});var wf=function(a,b,c,d){null==c&&(c=!1);null==b&&(b=!0);R.call(this,a,b,c);this.device=d};g["openfl.events.GameInputEvent"]=wf;wf.__name__="openfl.events.GameInputEvent";wf.__super__=R;wf.prototype=v(R.prototype,{device:null,__init:function(){R.prototype.__init.call(this);this.device=null},__class__:wf});var Fg=function(a,
b,c,d,e){null==e&&(e=!1);null==d&&(d=0);null==c&&(c=!1);null==b&&(b=!1);this.status=d;this.redirected=e;R.call(this,a,b,c)};g["openfl.events.HTTPStatusEvent"]=Fg;Fg.__name__="openfl.events.HTTPStatusEvent";Fg.__super__=R;Fg.prototype=v(R.prototype,{redirected:null,responseHeaders:null,responseURL:null,status:null,__init:function(){R.prototype.__init.call(this);this.status=0;this.redirected=!1},__class__:Fg});var Eh=function(a,b,c,d,e){null==e&&(e=0);null==d&&(d="");null==c&&(c=!1);null==b&&(b=!0);
ud.call(this,a,b,c,d,e)};g["openfl.events.IOErrorEvent"]=Eh;Eh.__name__="openfl.events.IOErrorEvent";Eh.__super__=ud;Eh.prototype=v(ud.prototype,{__class__:Eh});var ag=function(a,b,c,d,e,f,k,m,h,n,g){null==g&&(g=!1);null==n&&(n=!1);null==h&&(h=!1);null==m&&(m=!1);null==k&&(k=!1);null==e&&(e=0);null==d&&(d=0);null==c&&(c=!1);null==b&&(b=!1);R.call(this,a,b,c);this.charCode=d;this.keyCode=e;this.keyLocation=null!=f?f:0;this.ctrlKey=k;this.altKey=m;this.shiftKey=h;this.controlKey=n;this.commandKey=g};
g["openfl.events.KeyboardEvent"]=ag;ag.__name__="openfl.events.KeyboardEvent";ag.__super__=R;ag.prototype=v(R.prototype,{altKey:null,charCode:null,commandKey:null,controlKey:null,ctrlKey:null,keyCode:null,keyLocation:null,shiftKey:null,__init:function(){R.prototype.__init.call(this);this.keyLocation=this.keyCode=this.charCode=0;this.commandKey=this.controlKey=this.shiftKey=this.altKey=this.ctrlKey=!1},__class__:ag});var Gb=function(a,b,c,d,e,f,k,m,h,n,g,l,p){null==p&&(p=0);null==l&&(l=!1);null==g&&
(g=0);null==n&&(n=!1);null==h&&(h=!1);null==m&&(m=!1);null==k&&(k=!1);null==e&&(e=0);null==d&&(d=0);null==c&&(c=!1);null==b&&(b=!0);R.call(this,a,b,c);this.shiftKey=h;this.altKey=m;this.ctrlKey=k;this.bubbles=b;this.relatedObject=f;this.delta=g;this.localX=d;this.localY=e;this.buttonDown=n;this.commandKey=l;this.clickCount=p;this.isRelatedObjectInaccessible=!1;this.stageY=this.stageX=NaN};g["openfl.events.MouseEvent"]=Gb;Gb.__name__="openfl.events.MouseEvent";Gb.__create=function(a,b,c,d,e,f,k){null==
k&&(k=0);a=new Gb(a,!0,!1,e.x,e.y,null,Gb.__ctrlKey,Gb.__altKey,Gb.__shiftKey,Gb.__buttonDown,k,Gb.__commandKey);a.stageX=c;a.stageY=d;a.target=f;return a};Gb.__super__=R;Gb.prototype=v(R.prototype,{altKey:null,buttonDown:null,commandKey:null,clickCount:null,ctrlKey:null,delta:null,isRelatedObjectInaccessible:null,localX:null,localY:null,relatedObject:null,shiftKey:null,stageX:null,stageY:null,__init:function(){R.prototype.__init.call(this);this.bubbles=this.ctrlKey=this.altKey=this.shiftKey=!1;this.relatedObject=
null;this.localY=this.localX=this.delta=0;this.commandKey=this.buttonDown=!1;this.clickCount=0;this.isRelatedObjectInaccessible=!1;this.stageY=this.stageX=NaN},__class__:Gb});var Ce=function(a,b,c,d){null==c&&(c=!1);null==b&&(b=!1);this.info=d;R.call(this,a,b,c)};g["openfl.events.NetStatusEvent"]=Ce;Ce.__name__="openfl.events.NetStatusEvent";Ce.__super__=R;Ce.prototype=v(R.prototype,{info:null,__init:function(){R.prototype.__init.call(this);this.info=null},__class__:Ce});var bf=function(a,b,c,d,e){null==
e&&(e=0);null==d&&(d=0);null==c&&(c=!1);null==b&&(b=!1);R.call(this,a,b,c);this.bytesLoaded=d;this.bytesTotal=e};g["openfl.events.ProgressEvent"]=bf;bf.__name__="openfl.events.ProgressEvent";bf.__super__=R;bf.prototype=v(R.prototype,{bytesLoaded:null,bytesTotal:null,__init:function(){R.prototype.__init.call(this);this.bytesTotal=this.bytesLoaded=0},__class__:bf});var Ge=function(a,b,c,d,e,f){null==f&&(f=!0);null==c&&(c=!1);null==b&&(b=!1);R.call(this,a,b,c);this.objectMatrix=d;this.objectColorTransform=
e;this.allowSmoothing=f};g["openfl.events.RenderEvent"]=Ge;Ge.__name__="openfl.events.RenderEvent";Ge.__super__=R;Ge.prototype=v(R.prototype,{allowSmoothing:null,objectColorTransform:null,objectMatrix:null,renderer:null,__init:function(){R.prototype.__init.call(this);this.objectColorTransform=this.objectMatrix=null;this.allowSmoothing=!1;this.renderer=null},__class__:Ge});var Fh=function(a,b,c,d,e){null==e&&(e=0);null==d&&(d="");null==c&&(c=!1);null==b&&(b=!1);ud.call(this,a,b,c,d,e)};g["openfl.events.SecurityErrorEvent"]=
Fh;Fh.__name__="openfl.events.SecurityErrorEvent";Fh.__super__=ud;Fh.prototype=v(ud.prototype,{__class__:Fh});var oc=function(a,b,c,d,e,f,k,m,h,n,g,l,p,y,r,q,t,z,w,O){null==q&&(q=!1);null==r&&(r=!1);null==y&&(y=!1);null==p&&(p=!1);null==l&&(l=!1);null==n&&(n=0);null==h&&(h=0);null==m&&(m=0);null==k&&(k=0);null==f&&(f=0);null==e&&(e=!1);null==d&&(d=0);null==c&&(c=!1);null==b&&(b=!0);R.call(this,a,b,c);this.touchPointID=d;this.isPrimaryTouchPoint=e;this.localX=f;this.localY=k;this.sizeX=m;this.sizeY=
h;this.pressure=n;this.relatedObject=g;this.ctrlKey=l;this.altKey=p;this.shiftKey=y;this.commandKey=r;this.controlKey=q;this.stageY=this.stageX=NaN};g["openfl.events.TouchEvent"]=oc;oc.__name__="openfl.events.TouchEvent";oc.__create=function(a,b,c,d,e,f){a=new oc(a,!0,!1,0,!0,e.x,e.y,1,1,1);a.stageX=c;a.stageY=d;a.target=f;return a};oc.__super__=R;oc.prototype=v(R.prototype,{altKey:null,commandKey:null,controlKey:null,ctrlKey:null,isPrimaryTouchPoint:null,localX:null,localY:null,pressure:null,relatedObject:null,
shiftKey:null,sizeX:null,sizeY:null,stageX:null,stageY:null,touchPointID:null,__init:function(){R.prototype.__init.call(this);this.touchPointID=0;this.isPrimaryTouchPoint=!1;this.pressure=this.sizeY=this.sizeX=this.localY=this.localX=0;this.relatedObject=null;this.controlKey=this.commandKey=this.shiftKey=this.altKey=this.ctrlKey=!1;this.stageY=this.stageX=NaN},__class__:oc});var $f=function(a,b,c,d){null==c&&(c=!0);null==b&&(b=!0);ud.call(this,a,b,c);this.error=d};g["openfl.events.UncaughtErrorEvent"]=
$f;$f.__name__="openfl.events.UncaughtErrorEvent";$f.__super__=ud;$f.prototype=v(ud.prototype,{error:null,__init:function(){ud.prototype.__init.call(this);this.error=null},__class__:$f});var Vk=function(){aa.call(this)};g["openfl.events.UncaughtErrorEvents"]=Vk;Vk.__name__="openfl.events.UncaughtErrorEvents";Vk.__super__=aa;Vk.prototype=v(aa.prototype,{__class__:Vk});var ld=function(){this.__leftExtension=this.__bottomExtension=0;this.__needSecondBitmapData=!0;this.__numShaderPasses=0;this.__preserveObject=
!1;this.__rightExtension=0;this.__shaderBlendMode=10;this.__topExtension=0;this.__smooth=!0};g["openfl.filters.BitmapFilter"]=ld;ld.__name__="openfl.filters.BitmapFilter";ld.prototype={__bottomExtension:null,__leftExtension:null,__needSecondBitmapData:null,__numShaderPasses:null,__preserveObject:null,__renderDirty:null,__rightExtension:null,__shaderBlendMode:null,__smooth:null,__topExtension:null,__applyFilter:function(a,b,c,d){return b},__initShader:function(a,b){return null},__class__:ld};var Hc=
function(a){null==this.__glFragmentSource&&(this.__glFragmentSource="varying vec2 openfl_TextureCoordv;\n\n\t\tuniform sampler2D openfl_Texture;\n\t\tuniform vec2 openfl_TextureSize;\n\n\t\tvoid main(void) {\n\n\t\t\tgl_FragColor = texture2D (openfl_Texture, openfl_TextureCoordv);\n\n\t\t}");null==this.__glVertexSource&&(this.__glVertexSource="attribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform vec2 openfl_TextureSize;\n\n\t\tvoid main(void) {\n\n\t\t\topenfl_TextureCoordv = openfl_TextureCoord;\n\n\t\tgl_Position = openfl_Matrix * openfl_Position;\n\n\t\t}");
jd.call(this,a);this.__isGenerated=!0;this.__initGL()};g["openfl.filters.BitmapFilterShader"]=Hc;Hc.__name__="openfl.filters.BitmapFilterShader";Hc.__super__=jd;Hc.prototype=v(jd.prototype,{openfl_Position:null,openfl_TextureCoord:null,openfl_Matrix:null,openfl_TextureSize:null,openfl_Texture:null,__class__:Hc});var bj=function(){null==this.__glFragmentSource&&(this.__glFragmentSource="uniform sampler2D openfl_Texture;\n\n\t\tvarying vec2 vBlurCoords[7];\n\n\t\tvoid main(void) {\n\n\t\t\tvec4 sum = vec4(0.0);\n\t\t\tsum += texture2D(openfl_Texture, vBlurCoords[0]) * 0.00443;\n\t\t\tsum += texture2D(openfl_Texture, vBlurCoords[1]) * 0.05399;\n\t\t\tsum += texture2D(openfl_Texture, vBlurCoords[2]) * 0.24197;\n\t\t\tsum += texture2D(openfl_Texture, vBlurCoords[3]) * 0.39894;\n\t\t\tsum += texture2D(openfl_Texture, vBlurCoords[4]) * 0.24197;\n\t\t\tsum += texture2D(openfl_Texture, vBlurCoords[5]) * 0.05399;\n\t\t\tsum += texture2D(openfl_Texture, vBlurCoords[6]) * 0.00443;\n\n\t\t\tgl_FragColor = sum;\n\n\t\t}");
null==this.__glVertexSource&&(this.__glVertexSource="attribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\n\t\tuniform mat4 openfl_Matrix;\n\n\t\tuniform vec2 uRadius;\n\t\tvarying vec2 vBlurCoords[7];\n\t\tuniform vec2 uTextureSize;\n\n\t\tvoid main(void) {\n\n\t\t\tgl_Position = openfl_Matrix * openfl_Position;\n\n\t\t\tvec2 r = uRadius / uTextureSize;\n\t\t\tvBlurCoords[0] = openfl_TextureCoord - r * 1.0;\n\t\t\tvBlurCoords[1] = openfl_TextureCoord - r * 0.75;\n\t\t\tvBlurCoords[2] = openfl_TextureCoord - r * 0.5;\n\t\t\tvBlurCoords[3] = openfl_TextureCoord;\n\t\t\tvBlurCoords[4] = openfl_TextureCoord + r * 0.5;\n\t\t\tvBlurCoords[5] = openfl_TextureCoord + r * 0.75;\n\t\t\tvBlurCoords[6] = openfl_TextureCoord + r * 1.0;\n\n\t\t}");
Hc.call(this);this.uRadius.value=[0,0];this.__isGenerated=!0;this.__initGL()};g["openfl.filters._BlurFilter.BlurShader"]=bj;bj.__name__="openfl.filters._BlurFilter.BlurShader";bj.__super__=Hc;bj.prototype=v(Hc.prototype,{__update:function(){this.uTextureSize.value=[this.__texture.input.width,this.__texture.input.height];Hc.prototype.__update.call(this)},uRadius:null,uTextureSize:null,__class__:bj});var Rd=function(a,b,c){null==c&&(c=1);null==b&&(b=4);null==a&&(a=4);ld.call(this);this.set_blurX(a);
this.set_blurY(b);this.set_quality(c);this.__needSecondBitmapData=!0;this.__preserveObject=!1;this.__renderDirty=!0};g["openfl.filters.BlurFilter"]=Rd;Rd.__name__="openfl.filters.BlurFilter";Rd.__super__=ld;Rd.prototype=v(ld.prototype,{__blurX:null,__blurY:null,__horizontalPasses:null,__quality:null,__verticalPasses:null,__applyFilter:function(a,b,c,d){(new Date).getTime();c=Sb.gaussianBlur(a.image,b.image,c.__toLimeRectangle(),d.__toLimeVector2(),this.__blurX,this.__blurY,this.__quality);(new Date).getTime();
return c==a.image?a:b},__initShader:function(a,b){b<=this.__horizontalPasses?(a=Math.pow(.5,b>>1),Rd.__blurShader.uRadius.value[0]=this.get_blurX()*a,Rd.__blurShader.uRadius.value[1]=0):(a=Math.pow(.5,b-this.__horizontalPasses>>1),Rd.__blurShader.uRadius.value[0]=0,Rd.__blurShader.uRadius.value[1]=this.get_blurY()*a);return Rd.__blurShader},get_blurX:function(){return this.__blurX},set_blurX:function(a){a!=this.__blurX&&(this.__blurX=a,this.__renderDirty=!0,this.__rightExtension=this.__leftExtension=
0<a?Math.ceil(a):0);return a},get_blurY:function(){return this.__blurY},set_blurY:function(a){a!=this.__blurY&&(this.__blurY=a,this.__renderDirty=!0,this.__bottomExtension=this.__topExtension=0<a?Math.ceil(a):0);return a},set_quality:function(a){this.__horizontalPasses=0>=this.__blurX?0:Math.round(a/4*this.__blurX)+1;this.__verticalPasses=0>=this.__blurY?0:Math.round(a/4*this.__blurY)+1;this.__numShaderPasses=this.__horizontalPasses+this.__verticalPasses;a!=this.__quality&&(this.__renderDirty=!0);
return this.__quality=a},__class__:Rd});var Gh=function(){null==this.__glFragmentSource&&(this.__glFragmentSource="varying vec2 openfl_TextureCoordv;\n\t\tuniform sampler2D openfl_Texture;\n\n\t\tuniform mat4 uMultipliers;\n\t\tuniform vec4 uOffsets;\n\n\t\tvoid main(void) {\n\n\t\t\tvec4 color = texture2D (openfl_Texture, openfl_TextureCoordv);\n\n\t\t\tif (color.a == 0.0) {\n\n\t\t\t\tgl_FragColor = vec4 (0.0, 0.0, 0.0, 0.0);\n\n\t\t\t} else {\n\n\t\t\t\tcolor = vec4 (color.rgb / color.a, color.a);\n\t\t\t\tcolor = uOffsets + color * uMultipliers;\n\n\t\t\t\tgl_FragColor = vec4 (color.rgb * color.a, color.a);\n\n\t\t\t}\n\n\t\t}");
null==this.__glVertexSource&&(this.__glVertexSource="attribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform vec2 openfl_TextureSize;\n\n\n\t\tvoid main(void) {\n\n\t\t\topenfl_TextureCoordv = openfl_TextureCoord;\n\n\t\tgl_Position = openfl_Matrix * openfl_Position;\n\n\n\t\t}");Hc.call(this);this.uMultipliers.value=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];this.uOffsets.value=[0,0,0,0];this.__isGenerated=
!0;this.__initGL()};g["openfl.filters._ColorMatrixFilter.ColorMatrixShader"]=Gh;Gh.__name__="openfl.filters._ColorMatrixFilter.ColorMatrixShader";Gh.__super__=Hc;Gh.prototype=v(Hc.prototype,{init:function(a){var b=this.uMultipliers.value,c=this.uOffsets.value;b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[5];b[5]=a[6];b[6]=a[7];b[7]=a[8];b[8]=a[10];b[9]=a[11];b[10]=a[12];b[11]=a[13];b[12]=a[15];b[13]=a[16];b[14]=a[17];b[15]=a[18];c[0]=a[4]/255;c[1]=a[9]/255;c[2]=a[14]/255;c[3]=a[19]/255},uMultipliers:null,
uOffsets:null,__class__:Gh});var Ah=function(a){ld.call(this);this.set_matrix(a);this.__numShaderPasses=1;this.__needSecondBitmapData=!1};g["openfl.filters.ColorMatrixFilter"]=Ah;Ah.__name__="openfl.filters.ColorMatrixFilter";Ah.__super__=ld;Ah.prototype=v(ld.prototype,{__matrix:null,__applyFilter:function(a,b,c,d){var e=b.image,f=a.image;La.convertToData(e);La.convertToData(f);var k=e.get_data(),m=f.get_data(),h=d.x-c.x|0;d=d.y-c.y|0;b=4*b.width;var n=4*a.width,g=e.buffer.format,l=f.buffer.format;
e=e.buffer.premultiplied;f=f.buffer.premultiplied;for(var p,y=0,r,q,t=c.y|0,z=c.height|0;t<z;)for(var w=t++,O=c.x|0,v=c.width|0;O<v;){q=O++;r=w*b+4*q;q=(w+h)*n+4*(q+d);var u=g,A=e;null==A&&(A=!1);null==u&&(u=0);switch(u){case 0:p=(k[r]&255)<<24|(k[r+1]&255)<<16|(k[r+2]&255)<<8|k[r+3]&255;break;case 1:p=(k[r+1]&255)<<24|(k[r+2]&255)<<16|(k[r+3]&255)<<8|k[r]&255;break;case 2:p=(k[r+2]&255)<<24|(k[r+1]&255)<<16|(k[r]&255)<<8|k[r+3]&255}A&&0!=(p&255)&&255!=(p&255)&&(S.unmult=255/(p&255),p=(S.__clamp[Math.round((p>>>
24&255)*S.unmult)]&255)<<24|(S.__clamp[Math.round((p>>>16&255)*S.unmult)]&255)<<16|(S.__clamp[Math.round((p>>>8&255)*S.unmult)]&255)<<8|p&255);0==(p&255)?y=0:(y=((Math.max(0,Math.min(this.__matrix[0]*(p>>>24&255)+this.__matrix[1]*(p>>>16&255)+this.__matrix[2]*(p>>>8&255)+this.__matrix[3]*(p&255)+this.__matrix[4],255))|0)&255)<<24|(y>>>16&255)<<16|(y>>>8&255)<<8|y&255,y=(y>>>24&255)<<24|((Math.max(0,Math.min(this.__matrix[5]*(p>>>24&255)+this.__matrix[6]*(p>>>16&255)+this.__matrix[7]*(p>>>8&255)+this.__matrix[8]*
(p&255)+this.__matrix[9],255))|0)&255)<<16|(y>>>8&255)<<8|y&255,y=(y>>>24&255)<<24|(y>>>16&255)<<16|((Math.max(0,Math.min(this.__matrix[10]*(p>>>24&255)+this.__matrix[11]*(p>>>16&255)+this.__matrix[12]*(p>>>8&255)+this.__matrix[13]*(p&255)+this.__matrix[14],255))|0)&255)<<8|y&255,y=(y>>>24&255)<<24|(y>>>16&255)<<16|(y>>>8&255)<<8|(Math.max(0,Math.min(this.__matrix[15]*(p>>>24&255)+this.__matrix[16]*(p>>>16&255)+this.__matrix[17]*(p>>>8&255)+this.__matrix[18]*(p&255)+this.__matrix[19],255))|0)&255);
r=l;u=f;null==u&&(u=!1);null==r&&(r=0);u&&(0==(y&255)?0!=y&&(y=0):255!=(y&255)&&(S.a16=S.__alpha16[y&255],y=((y>>>24&255)*S.a16>>16&255)<<24|((y>>>16&255)*S.a16>>16&255)<<16|((y>>>8&255)*S.a16>>16&255)<<8|y&255));switch(r){case 0:m[q]=y>>>24&255;m[q+1]=y>>>16&255;m[q+2]=y>>>8&255;m[q+3]=y&255;break;case 1:m[q]=y&255;m[q+1]=y>>>24&255;m[q+2]=y>>>16&255;m[q+3]=y>>>8&255;break;case 2:m[q]=y>>>8&255,m[q+1]=y>>>16&255,m[q+2]=y>>>24&255,m[q+3]=y&255}}a.image.dirty=!0;return a},__initShader:function(a,b){Ah.__colorMatrixShader.init(this.get_matrix());
return Ah.__colorMatrixShader},get_matrix:function(){return this.__matrix},set_matrix:function(a){null==a&&(a=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]);return this.__matrix=a},__class__:Ah});var jk=function(){null==this.__glFragmentSource&&(this.__glFragmentSource="varying vec2 vBlurCoords[9];\n\n\t\tuniform sampler2D openfl_Texture;\n\n\t\tuniform float uBias;\n\t\tuniform mat3 uConvoMatrix;\n\t\tuniform float uDivisor;\n\t\tuniform bool uPreserveAlpha;\n\n\t\tvoid main(void) {\n\n\t\t\tvec4 tc = texture2D (openfl_Texture, vBlurCoords[4]);\n\t\t\tvec4 c = vec4 (0.0);\n\n\t\t\tc += texture2D (openfl_Texture, vBlurCoords[0]) * uConvoMatrix[0][0];\n\t\t\tc += texture2D (openfl_Texture, vBlurCoords[1]) * uConvoMatrix[0][1];\n\t\t\tc += texture2D (openfl_Texture, vBlurCoords[2]) * uConvoMatrix[0][2];\n\n\t\t\tc += texture2D (openfl_Texture, vBlurCoords[3]) * uConvoMatrix[1][0];\n\t\t\tc += tc * uConvoMatrix[1][1];\n\t\t\tc += texture2D (openfl_Texture, vBlurCoords[5]) * uConvoMatrix[1][2];\n\n\t\t\tc += texture2D (openfl_Texture, vBlurCoords[6]) * uConvoMatrix[2][0];\n\t\t\tc += texture2D (openfl_Texture, vBlurCoords[7]) * uConvoMatrix[2][1];\n\t\t\tc += texture2D (openfl_Texture, vBlurCoords[8]) * uConvoMatrix[2][2];\n\n\t\t\tif (uDivisor > 0.0) {\n\n\t\t\t\tc /= vec4 (uDivisor, uDivisor, uDivisor, uDivisor);\n\n\t\t\t}\n\n\t\t\tc += vec4 (uBias, uBias, uBias, uBias);\n\n\t\t\tif (uPreserveAlpha) {\n\n\t\t\t\tc.a = tc.a;\n\n\t\t\t}\n\n\t\t\tgl_FragColor = c;\n\n\t\t}");
null==this.__glVertexSource&&(this.__glVertexSource="attribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\n\t\tvarying vec2 vBlurCoords[9];\n\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform vec2 openfl_TextureSize;\n\n\t\tvoid main(void) {\n\n\t\t\tvec2 r = vec2 (1.0, 1.0) / openfl_TextureSize;\n\t\t\tvec2 t = openfl_TextureCoord;\n\n\t\t\tvBlurCoords[0] = t + r * vec2 (-1.0, -1.0);\n\t\t\tvBlurCoords[1] = t + r * vec2 (0.0, -1.0);\n\t\t\tvBlurCoords[2] = t + r * vec2 (1.0, -1.0);\n\n\t\t\tvBlurCoords[3] = t + r * vec2 (-1.0, 0.0);\n\t\t\tvBlurCoords[4] = t;\n\t\t\tvBlurCoords[5] = t + r * vec2 (1.0, 0.0);\n\n\t\t\tvBlurCoords[6] = t + r * vec2 (-1.0, 1.0);\n\t\t\tvBlurCoords[7] = t + r * vec2 (0.0, 1.0);\n\t\t\tvBlurCoords[8] = t + r * vec2 (1.0, 1.0);\n\n\t\t\tgl_Position = openfl_Matrix * openfl_Position;\n\n\t\t}");
Hc.call(this);this.uDivisor.value=[1];this.uBias.value=[0];this.uPreserveAlpha.value=[!0];this.__isGenerated=!0;this.__initGL()};g["openfl.filters._ConvolutionFilter.ConvolutionShader"]=jk;jk.__name__="openfl.filters._ConvolutionFilter.ConvolutionShader";jk.__super__=Hc;jk.prototype=v(Hc.prototype,{uBias:null,uConvoMatrix:null,uDivisor:null,uPreserveAlpha:null,__class__:jk});var Zk=function(){null==this.__glFragmentSource&&(this.__glFragmentSource="\n\n\t\tuniform sampler2D openfl_Texture;\n\t\tuniform sampler2D mapTexture;\n\n\t\tuniform mat4 openfl_Matrix;\n\n\t\tuniform vec4 uOffsets;\n\t\tuniform mat4 uDisplacements;\n\n\t\tvarying vec2 openfl_TextureCoordV;\n\t\tvarying vec2 mapTextureCoords;\n\n\t\tvoid main(void) {\n\n\t\t\tvec4 map_color = texture2D(mapTexture, mapTextureCoords);\n\t\t\tvec4 map_color_mod = map_color - uOffsets;\n\n\t\t\tmap_color_mod = map_color_mod * vec4(map_color.w, map_color.w, 1.0, 1.0);\n\n\t\t\tvec4 displacements_multiplied = map_color_mod * uDisplacements;\n\t\t\tvec4 result = vec4(openfl_TextureCoordV.x, openfl_TextureCoordV.y, 0.0, 1.0) + displacements_multiplied;\n\n\t\t\tgl_FragColor = texture2D(openfl_Texture, vec2(result));\n\n\t\t}\n\n\t");
null==this.__glVertexSource&&(this.__glVertexSource="\n\n\t\tuniform mat4 openfl_Matrix;\n\n\t\tuniform vec2 mapTextureCoordsOffset;\n\n\t\tattribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\n\t\tvarying vec2 openfl_TextureCoordV;\n\n\t\tvarying vec2 mapTextureCoords;\n\n\t\tvoid main(void) {\n\n\t\t\tgl_Position = openfl_Matrix * openfl_Position;\n\n\t\t\topenfl_TextureCoordV = openfl_TextureCoord;\n\t\t\tmapTextureCoords = openfl_TextureCoord - mapTextureCoordsOffset;\n\n\t\t}\n\n\t");
Hc.call(this);this.__isGenerated=!0;this.__initGL()};g["openfl.filters._DisplacementMapFilter.DisplacementMapShader"]=Zk;Zk.__name__="openfl.filters._DisplacementMapFilter.DisplacementMapShader";Zk.__super__=Hc;Zk.prototype=v(Hc.prototype,{mapTextureCoordsOffset:null,mapTexture:null,uOffsets:null,uDisplacements:null,__class__:Zk});var Wk=function(a,b,c,d,e,f,k,m,h,n,g){null==g&&(g=!1);null==n&&(n=!1);null==h&&(h=!1);null==m&&(m=1);null==k&&(k=1);null==f&&(f=4);null==e&&(e=4);null==d&&(d=1);null==
c&&(c=0);null==b&&(b=45);null==a&&(a=4);ld.call(this);this.__offsetY=this.__offsetX=0;this.__distance=a;this.__angle=b;this.__color=c;this.__alpha=d;this.__blurX=e;this.__blurY=f;this.__strength=k;this.__quality=m;this.__inner=h;this.__knockout=n;this.__hideObject=g;this.__updateSize();this.__needSecondBitmapData=!0;this.__preserveObject=!this.__hideObject;this.__renderDirty=!0};g["openfl.filters.DropShadowFilter"]=Wk;Wk.__name__="openfl.filters.DropShadowFilter";Wk.__super__=ld;Wk.prototype=v(ld.prototype,
{__alpha:null,__angle:null,__blurX:null,__blurY:null,__color:null,__distance:null,__hideObject:null,__inner:null,__knockout:null,__offsetX:null,__offsetY:null,__quality:null,__strength:null,__applyFilter:function(a,b,c,d){var e=this.__color>>16&255,f=this.__color>>8&255,k=this.__color&255;d=new ob(d.x+this.__offsetX,d.y+this.__offsetY);c=Sb.gaussianBlur(a.image,b.image,c.__toLimeRectangle(),d.__toLimeVector2(),this.__blurX,this.__blurY,this.__quality,this.__strength);c.colorTransform(c.get_rect(),
(new Nb(0,0,0,this.__alpha,e,f,k,0)).__toLimeColorMatrix());return c==a.image?a:b},__updateSize:function(){this.__offsetX=this.__distance*Math.cos(this.__angle*Math.PI/180)|0;this.__offsetY=this.__distance*Math.sin(this.__angle*Math.PI/180)|0;this.__topExtension=Math.ceil((0>this.__offsetY?-this.__offsetY:0)+this.__blurY);this.__bottomExtension=Math.ceil((0<this.__offsetY?this.__offsetY:0)+this.__blurY);this.__leftExtension=Math.ceil((0>this.__offsetX?-this.__offsetX:0)+this.__blurX);this.__rightExtension=
Math.ceil((0<this.__offsetX?this.__offsetX:0)+this.__blurX)},__class__:Wk});var cj=function(){null==this.__glFragmentSource&&(this.__glFragmentSource="uniform sampler2D openfl_Texture;\n\t\t\n\t\tuniform vec4 uColor;\n\t\t\n\t\tvarying vec2 vBlurCoords[7];\n\t\t\n\t\tvoid main(void) {\n\t\t\t\n\t\t\tfloat a = 0.0;\n\t\t\ta += texture2D(openfl_Texture, vBlurCoords[0]).a * 0.00443;\n\t\t\ta += texture2D(openfl_Texture, vBlurCoords[1]).a * 0.05399;\n\t\t\ta += texture2D(openfl_Texture, vBlurCoords[2]).a * 0.24197;\n\t\t\ta += texture2D(openfl_Texture, vBlurCoords[3]).a * 0.39894;\n\t\t\ta += texture2D(openfl_Texture, vBlurCoords[4]).a * 0.24197;\n\t\t\ta += texture2D(openfl_Texture, vBlurCoords[5]).a * 0.05399;\n\t\t\ta += texture2D(openfl_Texture, vBlurCoords[6]).a * 0.00443;\n\t\t\ta *= uColor.a;\n\t\t\t\n\t\t\tgl_FragColor = vec4(uColor.rgb * a, a);\n\t\t\t\n\t\t}");
null==this.__glVertexSource&&(this.__glVertexSource="attribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\t\t\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform vec2 openfl_TextureSize;\n\t\t\n\t\tuniform vec2 uRadius;\n\t\tvarying vec2 vBlurCoords[7];\n\t\t\n\t\tvoid main(void) {\n\t\t\t\n\t\t\tgl_Position = openfl_Matrix * openfl_Position;\n\t\t\t\n\t\t\tvec2 r = uRadius / openfl_TextureSize;\n\t\t\tvBlurCoords[0] = openfl_TextureCoord - r * 1.0;\n\t\t\tvBlurCoords[1] = openfl_TextureCoord - r * 0.75;\n\t\t\tvBlurCoords[2] = openfl_TextureCoord - r * 0.5;\n\t\t\tvBlurCoords[3] = openfl_TextureCoord;\n\t\t\tvBlurCoords[4] = openfl_TextureCoord + r * 0.5;\n\t\t\tvBlurCoords[5] = openfl_TextureCoord + r * 0.75;\n\t\t\tvBlurCoords[6] = openfl_TextureCoord + r * 1.0;\n\t\t\t\n\t\t}");
Hc.call(this);this.uRadius.value=[0,0];this.uColor.value=[0,0,0,0];this.__isGenerated=!0;this.__initGL()};g["openfl.filters._GlowFilter.GlowShader"]=cj;cj.__name__="openfl.filters._GlowFilter.GlowShader";cj.__super__=Hc;cj.prototype=v(Hc.prototype,{uRadius:null,uColor:null,__class__:cj});var Id=function(a,b,c,d,e,f,k,m){null==m&&(m=!1);null==k&&(k=!1);null==f&&(f=1);null==e&&(e=2);null==d&&(d=6);null==c&&(c=6);null==b&&(b=1);null==a&&(a=16711680);ld.call(this);this.__color=a;this.__alpha=b;this.set_blurX(c);
this.set_blurY(d);this.__strength=e;this.set_quality(f);this.__inner=k;this.__knockout=m;this.__renderDirty=this.__preserveObject=this.__needSecondBitmapData=!0};g["openfl.filters.GlowFilter"]=Id;Id.__name__="openfl.filters.GlowFilter";Id.__super__=ld;Id.prototype=v(ld.prototype,{__alpha:null,__blurX:null,__blurY:null,__color:null,__horizontalPasses:null,__inner:null,__knockout:null,__quality:null,__strength:null,__verticalPasses:null,__applyFilter:function(a,b,c,d){var e=this.__color>>16&255,f=this.__color>>
8&255,k=this.__color&255;c=Sb.gaussianBlur(a.image,b.image,c.__toLimeRectangle(),d.__toLimeVector2(),this.__blurX,this.__blurY,this.__quality,this.__strength);c.colorTransform(c.get_rect(),(new Nb(0,0,0,this.__alpha,e,f,k,0)).__toLimeColorMatrix());return c==a.image?a:b},__initShader:function(a,b){b<=this.__horizontalPasses?(a=Math.pow(.5,b>>1),Id.__glowShader.uRadius.value[0]=this.get_blurX()*a,Id.__glowShader.uRadius.value[1]=0):(a=Math.pow(.5,b-this.__horizontalPasses>>1),Id.__glowShader.uRadius.value[0]=
0,Id.__glowShader.uRadius.value[1]=this.get_blurY()*a);Id.__glowShader.uColor.value[0]=(this.get_color()>>16&255)/255;Id.__glowShader.uColor.value[1]=(this.get_color()>>8&255)/255;Id.__glowShader.uColor.value[2]=(this.get_color()&255)/255;Id.__glowShader.uColor.value[3]=this.get_alpha()*(this.__strength/this.__numShaderPasses);return Id.__glowShader},get_alpha:function(){return this.__alpha},get_blurX:function(){return this.__blurX},set_blurX:function(a){a!=this.__blurX&&(this.__blurX=a,this.__renderDirty=
!0,this.__rightExtension=this.__leftExtension=0<a?Math.ceil(1.5*a):0);return a},get_blurY:function(){return this.__blurY},set_blurY:function(a){a!=this.__blurY&&(this.__blurY=a,this.__renderDirty=!0,this.__bottomExtension=this.__topExtension=0<a?Math.ceil(1.5*a):0);return a},get_color:function(){return this.__color},set_quality:function(a){this.__horizontalPasses=0>=this.__blurX?0:Math.round(a/4*this.__blurX)+1;this.__verticalPasses=0>=this.__blurY?0:Math.round(a/4*this.__blurY)+1;this.__numShaderPasses=
this.__horizontalPasses+this.__verticalPasses;a!=this.__quality&&(this.__renderDirty=!0);return this.__quality=a},__class__:Id});var ob=function(a,b){null==b&&(b=0);null==a&&(a=0);this.x=a;this.y=b};g["openfl.geom.Point"]=ob;ob.__name__="openfl.geom.Point";ob.prototype={x:null,y:null,clone:function(){return new ob(this.x,this.y)},copyFrom:function(a){this.x=a.x;this.y=a.y},setTo:function(a,b){this.x=a;this.y=b},__toLimeVector2:function(){null==ob.__limeVector2&&(ob.__limeVector2=new of);var a=ob.__limeVector2;
a.x=this.x;a.y=this.y;return ob.__limeVector2},__class__:ob};var Af=function(a){this.__colorTransform=new Nb;this.concatenatedColorTransform=new Nb;this.pixelBounds=new ya;this.__displayObject=a;this.__hasMatrix=!0};g["openfl.geom.Transform"]=Af;Af.__name__="openfl.geom.Transform";Af.prototype={concatenatedColorTransform:null,pixelBounds:null,__colorTransform:null,__displayObject:null,__hasMatrix:null,__hasMatrix3D:null,get_colorTransform:function(){return this.__colorTransform},set_colorTransform:function(a){this.__colorTransform.__equals(a,
!1)||(this.__colorTransform.__copyFrom(a),null!=a&&this.__displayObject.set_alpha(a.alphaMultiplier),a=this.__displayObject,a.__renderDirty||(a.__renderDirty=!0,a.__setParentRenderDirty()));return this.__colorTransform},get_matrix:function(){return this.__hasMatrix?this.__displayObject.__transform.clone():null},set_matrix:function(a){if(null==a)return this.__hasMatrix=!1,null;this.__hasMatrix=!0;this.__hasMatrix3D=!1;null!=this.__displayObject&&this.__setTransform(a.a,a.b,a.c,a.d,a.tx,a.ty);return a},
__setTransform:function(a,b,c,d,e,f){if(null!=this.__displayObject){var k=this.__displayObject.__transform;if(k.a!=a||k.b!=b||k.c!=c||k.d!=d||k.tx!=e||k.ty!=f){var m=0==b?a:Math.sqrt(a*a+b*b);var h=0==c?d:Math.sqrt(c*c+d*d);this.__displayObject.__scaleX=m;this.__displayObject.__scaleY=h;m=180/Math.PI*Math.atan2(d,c)-90;m!=this.__displayObject.__rotation&&(this.__displayObject.__rotation=m,m*=Math.PI/180,this.__displayObject.__rotationSine=Math.sin(m),this.__displayObject.__rotationCosine=Math.cos(m));
k.a=a;k.b=b;k.c=c;k.d=d;k.tx=e;k.ty=f;this.__displayObject.__setTransformDirty()}}},__class__:Af};var Am=function(){};g["openfl.media.ID3Info"]=Am;Am.__name__="openfl.media.ID3Info";var Bl=function(a,b){aa.call(this,this);this.bytesTotal=this.bytesLoaded=0;this.isBuffering=!1;this.url=null;null!=a&&this.load(a,b)};g["openfl.media.Sound"]=Bl;Bl.__name__="openfl.media.Sound";Bl.__super__=aa;Bl.prototype=v(aa.prototype,{bytesLoaded:null,bytesTotal:null,isBuffering:null,url:null,__buffer:null,load:function(a,
b){var c=this;this.url=a.url;a=Da.getLibrary("default");if(null!=a){b=this.url;var d=a.cachedAudioBuffers;b=null!=F[b]?d.existsReserved(b):d.h.hasOwnProperty(b)}else b=!1;if(b)b=this.url,a=a.cachedAudioBuffers,this.AudioBuffer_onURLLoad(null!=F[b]?a.getReserved(b):a.h[b]);else zc.loadFromFile(this.url).onComplete(u(this,this.AudioBuffer_onURLLoad)).onError(function(a){c.AudioBuffer_onURLLoad(null)})},AudioBuffer_onURLLoad:function(a){null==a?this.dispatchEvent(new Eh("ioError")):(this.__buffer=a,
this.dispatchEvent(new R("complete")))},__class__:Bl});var Cl=function(a,b){aa.call(this,this);this.rightPeak=this.leftPeak=1;this.__soundTransform=null!=b?b:new Hh;null!=a&&(this.__source=a,this.__source.onComplete.add(u(this,this.source_onComplete)),this.__isValid=!0,this.__source.play());ee.__registerSoundChannel(this)};g["openfl.media.SoundChannel"]=Cl;Cl.__name__="openfl.media.SoundChannel";Cl.__super__=aa;Cl.prototype=v(aa.prototype,{leftPeak:null,rightPeak:null,__isValid:null,__soundTransform:null,
__source:null,stop:function(){ee.__unregisterSoundChannel(this);this.__isValid&&(this.__source.stop(),this.__dispose())},__dispose:function(){this.__isValid&&(this.__source.onComplete.remove(u(this,this.source_onComplete)),this.__source.dispose(),this.__source=null,this.__isValid=!1)},__updateTransform:function(){this.set_soundTransform(this.get_soundTransform())},get_position:function(){return this.__isValid?this.__source.get_currentTime()+this.__source.offset:0},set_position:function(a){if(!this.__isValid)return 0;
this.__source.set_currentTime((a|0)-this.__source.offset);return a},get_soundTransform:function(){return this.__soundTransform.clone()},set_soundTransform:function(a){if(null!=a){this.__soundTransform.pan=a.pan;this.__soundTransform.volume=a.volume;var b=ee.__soundTransform.pan+this.__soundTransform.pan;-1>b&&(b=-1);1<b&&(b=1);var c=ee.__soundTransform.volume*this.__soundTransform.volume;this.__isValid&&(this.__source.set_gain(c),c=this.__source.get_position(),c.x=b,c.z=-1*Math.sqrt(1-Math.pow(b,
2)),this.__source.set_position(c))}return a},source_onComplete:function(){ee.__unregisterSoundChannel(this);this.__dispose();this.dispatchEvent(new R("soundComplete"))},__class__:Cl});var Bm=function(){};g["openfl.media.SoundLoaderContext"]=Bm;Bm.__name__="openfl.media.SoundLoaderContext";var Hh=function(a,b){null==b&&(b=0);null==a&&(a=1);this.volume=a;this.pan=b;this.rightToRight=this.rightToLeft=this.leftToRight=this.leftToLeft=0};g["openfl.media.SoundTransform"]=Hh;Hh.__name__="openfl.media.SoundTransform";
Hh.prototype={leftToLeft:null,leftToRight:null,pan:null,rightToLeft:null,rightToRight:null,volume:null,clone:function(){return new Hh(this.volume,this.pan)},__class__:Hh};var ee=function(){};g["openfl.media.SoundMixer"]=ee;ee.__name__="openfl.media.SoundMixer";ee.__registerSoundChannel=function(a){ee.__soundChannels.push(a)};ee.__unregisterSoundChannel=function(a){ra.remove(ee.__soundChannels,a)};var dj=function(){aa.call(this)};g["openfl.net.NetConnection"]=dj;dj.__name__="openfl.net.NetConnection";
dj.__super__=aa;dj.prototype=v(aa.prototype,{__class__:dj});var ej=function(a,b){aa.call(this);this.__connection=a;this.__soundTransform=new Hh;this.__video=window.document.createElement("video");this.__video.setAttribute("playsinline","");this.__video.setAttribute("webkit-playsinline","");this.__video.setAttribute("crossorigin","anonymous");this.__video.addEventListener("error",u(this,this.video_onError),!1);this.__video.addEventListener("waiting",u(this,this.video_onWaiting),!1);this.__video.addEventListener("ended",
u(this,this.video_onEnd),!1);this.__video.addEventListener("pause",u(this,this.video_onPause),!1);this.__video.addEventListener("seeking",u(this,this.video_onSeeking),!1);this.__video.addEventListener("playing",u(this,this.video_onPlaying),!1);this.__video.addEventListener("timeupdate",u(this,this.video_onTimeUpdate),!1);this.__video.addEventListener("loadstart",u(this,this.video_onLoadStart),!1);this.__video.addEventListener("stalled",u(this,this.video_onStalled),!1);this.__video.addEventListener("durationchanged",
u(this,this.video_onDurationChanged),!1);this.__video.addEventListener("canplay",u(this,this.video_onCanPlay),!1);this.__video.addEventListener("canplaythrough",u(this,this.video_onCanPlayThrough),!1);this.__video.addEventListener("loadedmetadata",u(this,this.video_onLoadMetaData),!1)};g["openfl.net.NetStream"]=ej;ej.__name__="openfl.net.NetStream";ej.__super__=aa;ej.prototype=v(aa.prototype,{client:null,time:null,__connection:null,__soundTransform:null,__seeking:null,__video:null,__playStatus:function(a){if(null!=
this.__video&&null!=this.client)try{var b=this.client.onPlayStatus;b({code:a,duration:this.__video.duration,position:this.__video.currentTime,speed:this.__video.playbackRate,start:this.__video.startTime})}catch(c){ab.lastException=c}},video_onCanPlay:function(a){this.__playStatus("NetStream.Play.canplay")},video_onCanPlayThrough:function(a){this.__playStatus("NetStream.Play.canplaythrough")},video_onDurationChanged:function(a){this.__playStatus("NetStream.Play.durationchanged")},video_onEnd:function(a){this.__connection.dispatchEvent(new Ce("netStatus",
!1,!1,{code:"NetStream.Play.Stop"}));this.__connection.dispatchEvent(new Ce("netStatus",!1,!1,{code:"NetStream.Play.Complete"}));this.__playStatus("NetStream.Play.Complete")},video_onError:function(a){this.__connection.dispatchEvent(new Ce("netStatus",!1,!1,{code:"NetStream.Play.Stop"}));this.__playStatus("NetStream.Play.error")},video_onLoadMetaData:function(a){if(null!=this.__video&&null!=this.client)try{var b=this.client.onMetaData;b({width:this.__video.videoWidth,height:this.__video.videoHeight,
duration:this.__video.duration})}catch(c){ab.lastException=c}},video_onLoadStart:function(a){this.__playStatus("NetStream.Play.loadstart")},video_onPause:function(a){this.__playStatus("NetStream.Play.pause")},video_onPlaying:function(a){this.__connection.dispatchEvent(new Ce("netStatus",!1,!1,{code:"NetStream.Play.Start"}));this.__playStatus("NetStream.Play.playing")},video_onSeeking:function(a){this.__playStatus("NetStream.Play.seeking");this.__connection.dispatchEvent(new Ce("netStatus",!1,!1,{code:"NetStream.Seek.Complete"}))},
video_onStalled:function(a){this.__playStatus("NetStream.Play.stalled")},video_onTimeUpdate:function(a){null!=this.__video&&(this.time=this.__video.currentTime,this.__playStatus("NetStream.Play.timeupdate"))},video_onWaiting:function(a){this.__playStatus("NetStream.Play.waiting")},get___seeking:function(){return this.__seeking?!0:this.__video.seeking},set___seeking:function(a){return this.__seeking=a},__class__:ej});var Wj=function(a){aa.call(this);this.bytesTotal=this.bytesLoaded=0;this.dataFormat=
1;null!=a&&this.load(a)};g["openfl.net.URLLoader"]=Wj;Wj.__name__="openfl.net.URLLoader";Wj.__super__=aa;Wj.prototype=v(aa.prototype,{bytesLoaded:null,bytesTotal:null,data:null,dataFormat:null,__httpRequest:null,load:function(a){var b=this;if(0==this.dataFormat){var c=new Gk;this.__prepareRequest(c,a);c.load().onProgress(u(this,this.httpRequest_onProgress)).onError(u(this,this.httpRequest_onError)).onComplete(function(a){b.__dispatchStatus();b.data=a;a=new R("complete");b.dispatchEvent(a)})}else c=
new xi,this.__prepareRequest(c,a),c.load().onProgress(u(this,this.httpRequest_onProgress)).onError(u(this,this.httpRequest_onError)).onComplete(function(a){b.__dispatchStatus();b.data=a;a=new R("complete");b.dispatchEvent(a)})},__dispatchStatus:function(){var a=new Fg("httpStatus",!1,!1,this.__httpRequest.responseStatus);a.responseURL=this.__httpRequest.uri;var b=[];if(this.__httpRequest.enableResponseHeaders&&null!=this.__httpRequest.responseHeaders)for(var c=0,d=this.__httpRequest.responseHeaders;c<
d.length;){var e=d[c];++c;b.push(new kk(e.name,e.value))}a.responseHeaders=b;this.dispatchEvent(a)},__prepareRequest:function(a,b){this.__httpRequest=a;this.__httpRequest.uri=b.url;this.__httpRequest.method=b.method;if(null!=b.data)if(L.typeof(b.data)==U.TObject){a=Na.fields(b.data);for(var c=0;c<a.length;){var d=a[c];++c;var e=this.__httpRequest.formData,f=Na.field(b.data,d);null!=F[d]?e.setReserved(d,f):e.h[d]=f}}else this.__httpRequest.data=b.data instanceof vb?b.data:vb.ofString(r.string(b.data));
this.__httpRequest.contentType=b.contentType;if(null!=b.requestHeaders)for(a=0,c=b.requestHeaders;a<c.length;)d=c[a],++a,this.__httpRequest.headers.push(new eh(d.name,d.value));this.__httpRequest.followRedirects=b.followRedirects;this.__httpRequest.timeout=b.idleTimeout|0;this.__httpRequest.withCredentials=b.manageCookies;this.__httpRequest.userAgent=b.userAgent;this.__httpRequest.enableResponseHeaders=!0},httpRequest_onError:function(a){this.__dispatchStatus();var b=403==a?new Fh("securityError"):
new Eh("ioError");b.text=r.string(a);this.dispatchEvent(b)},httpRequest_onProgress:function(a,b){var c=new bf("progress");c.bytesLoaded=a;c.bytesTotal=b;this.dispatchEvent(c)},__class__:Wj});var Xj=function(a){null!=a&&(this.url=a);this.contentType=null;this.followRedirects=xf.followRedirects;this.idleTimeout=0<xf.idleTimeout?xf.idleTimeout:3E4;this.manageCookies=xf.manageCookies;this.method="GET";this.requestHeaders=[];this.userAgent=xf.userAgent};g["openfl.net.URLRequest"]=Xj;Xj.__name__="openfl.net.URLRequest";
Xj.prototype={contentType:null,data:null,followRedirects:null,idleTimeout:null,manageCookies:null,method:null,requestHeaders:null,url:null,userAgent:null,__class__:Xj};var xf=function(){};g["openfl.net.URLRequestDefaults"]=xf;xf.__name__="openfl.net.URLRequestDefaults";var kk=function(a,b){null==b&&(b="");null==a&&(a="");this.name=a;this.value=b};g["openfl.net.URLRequestHeader"]=kk;kk.__name__="openfl.net.URLRequestHeader";kk.prototype={name:null,value:null,__class__:kk};var Dg=function(a){this.parentDomain=
null!=a?a:Dg.currentDomain};g["openfl.system.ApplicationDomain"]=Dg;Dg.__name__="openfl.system.ApplicationDomain";Dg.prototype={parentDomain:null,__class__:Dg};var Ac=function(a){gd.call(this,a)};g["openfl.text.Font"]=Ac;Ac.__name__="openfl.text.Font";Ac.enumerateFonts=function(a){return Ac.__registeredFonts};Ac.fromFile=function(a){var b=new Ac;b.__fromFile(a);return b};Ac.loadFromName=function(a){return gd.loadFromName(a).then(function(a){var b=new Ac;b.__fromLimeFont(a);return nc.withValue(b)})};
Ac.__super__=gd;Ac.prototype=v(gd.prototype,{__fromLimeFont:function(a){this.__copyFrom(a)},__class__:Ac});var ck=function(){ba.call(this);this.__graphics=new pc(this)};g["openfl.text.StaticText"]=ck;ck.__name__="openfl.text.StaticText";ck.__super__=ba;ck.prototype=v(ba.prototype,{text:null,__class__:ck});var zh=function(a,b,c,d,e,f,k,m,h,n,g,l,p){this.font=a;this.size=b;this.color=c;this.bold=d;this.italic=e;this.underline=f;this.url=k;this.target=m;this.align=h;this.leftMargin=n;this.rightMargin=
g;this.indent=l;this.leading=p};g["openfl.text.TextFormat"]=zh;zh.__name__="openfl.text.TextFormat";zh.prototype={align:null,blockIndent:null,bold:null,bullet:null,color:null,font:null,indent:null,italic:null,kerning:null,leading:null,leftMargin:null,letterSpacing:null,rightMargin:null,size:null,tabStops:null,target:null,underline:null,url:null,__ascent:null,__descent:null,clone:function(){var a=new zh(this.font,this.size,this.color,this.bold,this.italic,this.underline,this.url,this.target);a.align=
this.align;a.leftMargin=this.leftMargin;a.rightMargin=this.rightMargin;a.indent=this.indent;a.leading=this.leading;a.blockIndent=this.blockIndent;a.bullet=this.bullet;a.kerning=this.kerning;a.letterSpacing=this.letterSpacing;a.tabStops=this.tabStops;a.__ascent=this.__ascent;a.__descent=this.__descent;return a},__merge:function(a){null!=a.font&&(this.font=a.font);null!=a.size&&(this.size=a.size);null!=a.color&&(this.color=a.color);null!=a.bold&&(this.bold=a.bold);null!=a.italic&&(this.italic=a.italic);
null!=a.underline&&(this.underline=a.underline);null!=a.url&&(this.url=a.url);null!=a.target&&(this.target=a.target);null!=a.align&&(this.align=a.align);null!=a.leftMargin&&(this.leftMargin=a.leftMargin);null!=a.rightMargin&&(this.rightMargin=a.rightMargin);null!=a.indent&&(this.indent=a.indent);null!=a.leading&&(this.leading=a.leading);null!=a.blockIndent&&(this.blockIndent=a.blockIndent);null!=a.bullet&&(this.bullet=a.bullet);null!=a.kerning&&(this.kerning=a.kerning);null!=a.letterSpacing&&(this.letterSpacing=
a.letterSpacing);null!=a.tabStops&&(this.tabStops=a.tabStops);null!=a.__ascent&&(this.__ascent=a.__ascent);null!=a.__descent&&(this.__descent=a.__descent)},__class__:zh};var gm={};g["openfl.text._TextFormatAlign.TextFormatAlign_Impl_"]=gm;gm.__name__="openfl.text._TextFormatAlign.TextFormatAlign_Impl_";gm.fromString=function(a){switch(a){case "center":return 0;case "end":return 1;case "justify":return 2;case "left":return 3;case "right":return 4;case "start":return 5;default:return null}};var lb=
function(){aa.call(this);lb.__instances.push(this)};g["openfl.ui.GameInput"]=lb;lb.__name__="openfl.ui.GameInput";lb.__getDevice=function(a){if(null==a)return null;if(null==lb.__devices.h.__keys__[a.__id__]){var b=sc.__getDeviceData()[a.id].id,c=sc.__getDeviceData();b=new lk(b,c[a.id].id);lb.__deviceList.push(b);lb.__devices.set(a,b);lb.numDevices=lb.__deviceList.length}return lb.__devices.h[a.__id__]};lb.__onGamepadAxisMove=function(a,b,c){a=lb.__getDevice(a);if(null!=a&&a.enabled){if(!a.__axis.h.hasOwnProperty(b)){switch(b){case 0:var d=
"LEFT_X";break;case 1:d="LEFT_Y";break;case 2:d="RIGHT_X";break;case 3:d="RIGHT_Y";break;case 4:d="TRIGGER_LEFT";break;case 5:d="TRIGGER_RIGHT";break;default:d="UNKNOWN ("+b+")"}d=new $c(a,"AXIS_"+d,-1,1);a.__axis.h[b]=d;a.__controls.push(d)}b=a.__axis.h[b];b.value=c;b.dispatchEvent(new R("change"))}};lb.__onGamepadButtonDown=function(a,b){a=lb.__getDevice(a);if(null!=a&&a.enabled){if(!a.__button.h.hasOwnProperty(b)){switch(b){case 0:var c="A";break;case 1:c="B";break;case 2:c="X";break;case 3:c=
"Y";break;case 4:c="BACK";break;case 5:c="GUIDE";break;case 6:c="START";break;case 7:c="LEFT_STICK";break;case 8:c="RIGHT_STICK";break;case 9:c="LEFT_SHOULDER";break;case 10:c="RIGHT_SHOULDER";break;case 11:c="DPAD_UP";break;case 12:c="DPAD_DOWN";break;case 13:c="DPAD_LEFT";break;case 14:c="DPAD_RIGHT";break;default:c="UNKNOWN ("+b+")"}c=new $c(a,"BUTTON_"+c,0,1);a.__button.h[b]=c;a.__controls.push(c)}b=a.__button.h[b];b.value=1;b.dispatchEvent(new R("change"))}};lb.__onGamepadButtonUp=function(a,
b){a=lb.__getDevice(a);if(null!=a&&a.enabled){if(!a.__button.h.hasOwnProperty(b)){switch(b){case 0:var c="A";break;case 1:c="B";break;case 2:c="X";break;case 3:c="Y";break;case 4:c="BACK";break;case 5:c="GUIDE";break;case 6:c="START";break;case 7:c="LEFT_STICK";break;case 8:c="RIGHT_STICK";break;case 9:c="LEFT_SHOULDER";break;case 10:c="RIGHT_SHOULDER";break;case 11:c="DPAD_UP";break;case 12:c="DPAD_DOWN";break;case 13:c="DPAD_LEFT";break;case 14:c="DPAD_RIGHT";break;default:c="UNKNOWN ("+b+")"}c=
new $c(a,"BUTTON_"+c,0,1);a.__button.h[b]=c;a.__controls.push(c)}b=a.__button.h[b];b.value=0;b.dispatchEvent(new R("change"))}};lb.__onGamepadConnect=function(a){a=lb.__getDevice(a);if(null!=a)for(var b=0,c=lb.__instances;b<c.length;){var d=c[b];++b;d.dispatchEvent(new wf("deviceAdded",!0,!1,a))}};lb.__onGamepadDisconnect=function(a){var b=lb.__devices.h[a.__id__];if(null!=b){null!=lb.__devices.h.__keys__[a.__id__]&&(ra.remove(lb.__deviceList,lb.__devices.h[a.__id__]),lb.__devices.remove(a));lb.numDevices=
lb.__deviceList.length;a=0;for(var c=lb.__instances;a<c.length;){var d=c[a];++a;d.dispatchEvent(new wf("deviceRemoved",!0,!1,b))}}};lb.__super__=aa;lb.prototype=v(aa.prototype,{addEventListener:function(a,b,c,d,e){null==e&&(e=!1);null==d&&(d=0);null==c&&(c=!1);aa.prototype.addEventListener.call(this,a,b,c,d,e);if("deviceAdded"==a)for(a=0,b=lb.__deviceList;a<b.length;)c=b[a],++a,this.dispatchEvent(new wf("deviceAdded",!0,!1,c))},__class__:lb});var $c=function(a,b,c,d,e){null==e&&(e=0);aa.call(this);
this.device=a;this.id=b;this.minValue=c;this.maxValue=d;this.value=e};g["openfl.ui.GameInputControl"]=$c;$c.__name__="openfl.ui.GameInputControl";$c.__super__=aa;$c.prototype=v(aa.prototype,{device:null,id:null,maxValue:null,minValue:null,value:null,__class__:$c});var lk=function(a,b){this.__controls=[];this.__button=new Zb;this.__axis=new Zb;this.id=a;this.name=b;a=new $c(this,"AXIS_0",-1,1);this.__axis.h[0]=a;this.__controls.push(a);a=new $c(this,"AXIS_1",-1,1);this.__axis.h[1]=a;this.__controls.push(a);
a=new $c(this,"AXIS_2",-1,1);this.__axis.h[2]=a;this.__controls.push(a);a=new $c(this,"AXIS_3",-1,1);this.__axis.h[3]=a;this.__controls.push(a);a=new $c(this,"AXIS_4",-1,1);this.__axis.h[4]=a;this.__controls.push(a);a=new $c(this,"AXIS_5",-1,1);this.__axis.h[5]=a;this.__controls.push(a);for(b=0;15>b;){var c=b++;a=new $c(this,"BUTTON_"+c,0,1);this.__button.h[c]=a;this.__controls.push(a)}};g["openfl.ui.GameInputDevice"]=lk;lk.__name__="openfl.ui.GameInputDevice";lk.prototype={enabled:null,id:null,name:null,
__axis:null,__button:null,__controls:null,__class__:lk};var mm=function(){};g["openfl.ui.Keyboard"]=mm;mm.__name__="openfl.ui.Keyboard";mm.__getCharCode=function(a,b){null==b&&(b=!1);if(b){switch(a){case 48:return 41;case 49:return 33;case 50:return 64;case 51:return 35;case 52:return 36;case 53:return 37;case 54:return 94;case 55:return 38;case 56:return 42;case 57:return 40;case 186:return 58;case 187:return 43;case 188:return 60;case 189:return 95;case 190:return 62;case 191:return 63;case 192:return 126;
case 219:return 123;case 220:return 124;case 221:return 125;case 222:return 34}if(65<=a&&90>=a)return a-65+65}else{switch(a){case 8:return 8;case 9:return 9;case 13:return 13;case 27:return 27;case 32:return 32;case 186:return 59;case 187:return 61;case 188:return 44;case 189:return 45;case 190:return 46;case 191:return 47;case 192:return 96;case 219:return 91;case 220:return 92;case 221:return 93;case 222:return 39}if(48<=a&&57>=a)return a-48+48;if(65<=a&&90>=a)return a-65+97}if(96<=a&&105>=a)return a-
96+48;switch(a){case 8:return 8;case 13:return 13;case 46:return 127;case 106:return 42;case 107:return 43;case 108:return 44;case 110:return 45;case 111:return 46}return 0};var Xk=function(){};g["openfl.ui.Mouse"]=Xk;Xk.__name__="openfl.ui.Mouse";var nm={};g["openfl.ui._MouseCursor.MouseCursor_Impl_"]=nm;nm.__name__="openfl.ui._MouseCursor.MouseCursor_Impl_";nm.toLimeCursor=function(a){switch(a){case "arrow":return dd.ARROW;case "auto":return dd.DEFAULT;case "button":return dd.POINTER;case "crosshair":return dd.CROSSHAIR;
case "custom":return dd.CUSTOM;case "hand":return dd.MOVE;case "ibeam":return dd.TEXT;case "resize_nesw":return dd.RESIZE_NESW;case "resize_ns":return dd.RESIZE_NS;case "resize_nwse":return dd.RESIZE_NWSE;case "resize_we":return dd.RESIZE_WE;case "wait":return dd.WAIT;case "waitarrow":return dd.WAIT_ARROW;default:return dd.DEFAULT}};var na=function(a){null==a&&(a=!1);this.debugEnabled=a;na.initialized||na.init()};g["openfl.utils.AGALMiniAssembler"]=na;na.__name__="openfl.utils.AGALMiniAssembler";
na.init=function(){na.initialized=!0;var a=na.OPMAP,b=new nb("mov",2,0,0);null!=F.mov?a.setReserved("mov",b):a.h.mov=b;var c=na.OPMAP,d=new nb("add",3,1,0);null!=F.add?c.setReserved("add",d):c.h.add=d;var e=na.OPMAP,f=new nb("sub",3,2,0);null!=F.sub?e.setReserved("sub",f):e.h.sub=f;var k=na.OPMAP,m=new nb("mul",3,3,0);null!=F.mul?k.setReserved("mul",m):k.h.mul=m;var h=na.OPMAP,n=new nb("div",3,4,0);null!=F.div?h.setReserved("div",n):h.h.div=n;var g=na.OPMAP,l=new nb("rcp",2,5,0);null!=F.rcp?g.setReserved("rcp",
l):g.h.rcp=l;var p=na.OPMAP,y=new nb("min",3,6,0);null!=F.min?p.setReserved("min",y):p.h.min=y;var r=na.OPMAP,q=new nb("max",3,7,0);null!=F.max?r.setReserved("max",q):r.h.max=q;var t=na.OPMAP,z=new nb("frc",2,8,0);null!=F.frc?t.setReserved("frc",z):t.h.frc=z;var w=na.OPMAP,O=new nb("sqt",2,9,0);null!=F.sqt?w.setReserved("sqt",O):w.h.sqt=O;var v=na.OPMAP,u=new nb("rsq",2,10,0);null!=F.rsq?v.setReserved("rsq",u):v.h.rsq=u;var A=na.OPMAP,x=new nb("pow",3,11,0);null!=F.pow?A.setReserved("pow",x):A.h.pow=
x;var B=na.OPMAP,qa=new nb("log",2,12,0);null!=F.log?B.setReserved("log",qa):B.h.log=qa;var L=na.OPMAP,M=new nb("exp",2,13,0);null!=F.exp?L.setReserved("exp",M):L.h.exp=M;var ja=na.OPMAP,D=new nb("nrm",2,14,0);null!=F.nrm?ja.setReserved("nrm",D):ja.h.nrm=D;var Ia=na.OPMAP,Ca=new nb("sin",2,15,0);null!=F.sin?Ia.setReserved("sin",Ca):Ia.h.sin=Ca;var ha=na.OPMAP,ba=new nb("cos",2,16,0);null!=F.cos?ha.setReserved("cos",ba):ha.h.cos=ba;var J=na.OPMAP,N=new nb("crs",3,17,0);null!=F.crs?J.setReserved("crs",
N):J.h.crs=N;var R=na.OPMAP,aa=new nb("dp3",3,18,0);null!=F.dp3?R.setReserved("dp3",aa):R.h.dp3=aa;var S=na.OPMAP,mb=new nb("dp4",3,19,0);null!=F.dp4?S.setReserved("dp4",mb):S.h.dp4=mb;var Ja=na.OPMAP,U=new nb("abs",2,20,0);null!=F.abs?Ja.setReserved("abs",U):Ja.h.abs=U;var ma=na.OPMAP,V=new nb("neg",2,21,0);null!=F.neg?ma.setReserved("neg",V):ma.h.neg=V;var W=na.OPMAP,fa=new nb("sat",2,22,0);null!=F.sat?W.setReserved("sat",fa):W.h.sat=fa;var ia=na.OPMAP,Q=new nb("m33",3,23,16);null!=F.m33?ia.setReserved("m33",
Q):ia.h.m33=Q;var Pa=na.OPMAP,Ma=new nb("m44",3,24,16);null!=F.m44?Pa.setReserved("m44",Ma):Pa.h.m44=Ma;var Y=na.OPMAP,Z=new nb("m34",3,25,16);null!=F.m34?Y.setReserved("m34",Z):Y.h.m34=Z;var X=na.OPMAP,T=new nb("ddx",2,26,288);null!=F.ddx?X.setReserved("ddx",T):X.h.ddx=T;var ka=na.OPMAP,Ta=new nb("ddy",2,27,288);null!=F.ddy?ka.setReserved("ddy",Ta):ka.h.ddy=Ta;var G=na.OPMAP,ea=new nb("ife",2,28,897);null!=F.ife?G.setReserved("ife",ea):G.h.ife=ea;var $a=na.OPMAP,pa=new nb("ine",2,29,897);null!=F.ine?
$a.setReserved("ine",pa):$a.h.ine=pa;var la=na.OPMAP,ra=new nb("ifg",2,30,897);null!=F.ifg?la.setReserved("ifg",ra):la.h.ifg=ra;var Ha=na.OPMAP,ua=new nb("ifl",2,31,897);null!=F.ifl?Ha.setReserved("ifl",ua):Ha.h.ifl=ua;var ta=na.OPMAP,va=new nb("els",0,32,1921);null!=F.els?ta.setReserved("els",va):ta.h.els=va;var Ba=na.OPMAP,sa=new nb("eif",0,33,1409);null!=F.eif?Ba.setReserved("eif",sa):Ba.h.eif=sa;var qb=na.OPMAP,wa=new nb("kil",1,39,160);null!=F.kil?qb.setReserved("kil",wa):qb.h.kil=wa;var da=
na.OPMAP,xa=new nb("tex",3,40,40);null!=F.tex?da.setReserved("tex",xa):da.h.tex=xa;var ya=na.OPMAP,Aa=new nb("sge",3,41,0);null!=F.sge?ya.setReserved("sge",Aa):ya.h.sge=Aa;var Da=na.OPMAP,Fa=new nb("slt",3,42,0);null!=F.slt?Da.setReserved("slt",Fa):Da.h.slt=Fa;var Ga=na.OPMAP,Ka=new nb("sgn",2,43,0);null!=F.sgn?Ga.setReserved("sgn",Ka):Ga.h.sgn=Ka;var La=na.OPMAP,Fb=new nb("seq",3,44,0);null!=F.seq?La.setReserved("seq",Fb):La.h.seq=Fb;var Na=na.OPMAP,Oa=new nb("sne",3,45,0);null!=F.sne?Na.setReserved("sne",
Oa):Na.h.sne=Oa;var Qa=na.SAMPLEMAP,Pb=new Ab("rgba",8,0);null!=F.rgba?Qa.setReserved("rgba",Pb):Qa.h.rgba=Pb;var Ra=na.SAMPLEMAP,Sa=new Ab("compressed",8,1);null!=F.compressed?Ra.setReserved("compressed",Sa):Ra.h.compressed=Sa;var Va=na.SAMPLEMAP,Xa=new Ab("compressedalpha",8,2);null!=F.compressedalpha?Va.setReserved("compressedalpha",Xa):Va.h.compressedalpha=Xa;var Ya=na.SAMPLEMAP,Za=new Ab("dxt1",8,1);null!=F.dxt1?Ya.setReserved("dxt1",Za):Ya.h.dxt1=Za;var ab=na.SAMPLEMAP,cb=new Ab("dxt5",8,2);
null!=F.dxt5?ab.setReserved("dxt5",cb):ab.h.dxt5=cb;var db=na.SAMPLEMAP,Ob=new Ab("video",8,3);null!=F.video?db.setReserved("video",Ob):db.h.video=Ob;var ca=na.SAMPLEMAP,eb=new Ab("2d",12,0);null!=F["2d"]?ca.setReserved("2d",eb):ca.h["2d"]=eb;var fb=na.SAMPLEMAP,gb=new Ab("3d",12,2);null!=F["3d"]?fb.setReserved("3d",gb):fb.h["3d"]=gb;var hb=na.SAMPLEMAP,ib=new Ab("cube",12,1);null!=F.cube?hb.setReserved("cube",ib):hb.h.cube=ib;var jb=na.SAMPLEMAP,kb=new Ab("mipnearest",24,1);null!=F.mipnearest?jb.setReserved("mipnearest",
kb):jb.h.mipnearest=kb;var lb=na.SAMPLEMAP,ob=new Ab("miplinear",24,2);null!=F.miplinear?lb.setReserved("miplinear",ob):lb.h.miplinear=ob;var P=na.SAMPLEMAP,pb=new Ab("mipnone",24,0);null!=F.mipnone?P.setReserved("mipnone",pb):P.h.mipnone=pb;var Kb=na.SAMPLEMAP,rb=new Ab("nomip",24,0);null!=F.nomip?Kb.setReserved("nomip",rb):Kb.h.nomip=rb;var sb=na.SAMPLEMAP,tb=new Ab("nearest",28,0);null!=F.nearest?sb.setReserved("nearest",tb):sb.h.nearest=tb;var E=na.SAMPLEMAP,Ea=new Ab("linear",28,1);null!=F.linear?
E.setReserved("linear",Ea):E.h.linear=Ea;var za=na.SAMPLEMAP,ub=new Ab("anisotropic2x",28,2);null!=F.anisotropic2x?za.setReserved("anisotropic2x",ub):za.h.anisotropic2x=ub;var bb=na.SAMPLEMAP,vb=new Ab("anisotropic4x",28,3);null!=F.anisotropic4x?bb.setReserved("anisotropic4x",vb):bb.h.anisotropic4x=vb;var wb=na.SAMPLEMAP,xb=new Ab("anisotropic8x",28,4);null!=F.anisotropic8x?wb.setReserved("anisotropic8x",xb):wb.h.anisotropic8x=xb;var Xb=na.SAMPLEMAP,Ub=new Ab("anisotropic16x",28,5);null!=F.anisotropic16x?
Xb.setReserved("anisotropic16x",Ub):Xb.h.anisotropic16x=Ub;var zb=na.SAMPLEMAP,Hb=new Ab("centroid",16,1);null!=F.centroid?zb.setReserved("centroid",Hb):zb.h.centroid=Hb;var Gb=na.SAMPLEMAP,$b=new Ab("single",16,2);null!=F.single?Gb.setReserved("single",$b):Gb.h.single=$b;var Ua=na.SAMPLEMAP,Cb=new Ab("ignoresampler",16,4);null!=F.ignoresampler?Ua.setReserved("ignoresampler",Cb):Ua.h.ignoresampler=Cb;var Jb=na.SAMPLEMAP,Wa=new Ab("repeat",20,1);null!=F.repeat?Jb.setReserved("repeat",Wa):Jb.h.repeat=
Wa;var Lb=na.SAMPLEMAP,Mb=new Ab("wrap",20,1);null!=F.wrap?Lb.setReserved("wrap",Mb):Lb.h.wrap=Mb;var Eb=na.SAMPLEMAP,Db=new Ab("clamp",20,0);null!=F.clamp?Eb.setReserved("clamp",Db):Eb.h.clamp=Db;var Nb=na.SAMPLEMAP,Qb=new Ab("clamp_u_repeat_v",20,2);null!=F.clamp_u_repeat_v?Nb.setReserved("clamp_u_repeat_v",Qb):Nb.h.clamp_u_repeat_v=Qb;var Rb=na.SAMPLEMAP,Sb=new Ab("repeat_u_clamp_v",20,3);null!=F.repeat_u_clamp_v?Rb.setReserved("repeat_u_clamp_v",Sb):Rb.h.repeat_u_clamp_v=Sb};na.prototype={agalcode:null,
error:null,verbose:null,debugEnabled:null,assemble:function(a,b,c,d){null==d&&(d=!1);null==c&&(c=1);var e=Qb.getTimer();this.agalcode=new wd(0);this.error="";var f=!1;"fragment"==a?f=!0:"vertex"!=a&&(this.error='ERROR: mode needs to be "fragment" or "vertex" but is "'+a+'".');this.agalcode.__endian=1;this.agalcode.writeByte(160);this.agalcode.writeUnsignedInt(c);this.agalcode.writeByte(161);this.agalcode.writeByte(f?1:0);this.initregmap(c,d);a=Y.replace(b,"\r","\n").split("\n");b=0;d=a.length;for(var k=
new Ba("<.*>","g"),m=new Ba("([\\w\\.\\-\\+]+)","gi"),h=new Ba("^\\w{3}","ig"),n=new Ba("vc\\[([vofi][acostdip]?[d]?)(\\d*)?(\\.[xyzw](\\+\\d{1,3})?)?\\](\\.[xyzw]{1,4})?|([vofi][acostdip]?[d]?)(\\d*)?(\\.[xyzw]{1,4})?","gi"),g=new Ba("\\[.*\\]","ig"),l=new Ba("^\\b[A-Za-z]{1,3}","ig"),p=new Ba("\\d+",""),y=new Ba("(\\.[xyzw]{1,4})",""),q=new Ba("[A-Za-z]{1,3}","ig"),t=new Ba("(\\.[xyzw]{1,1})",""),z=new Ba("\\+\\d{1,3}","ig"),w=0;w<d&&""==this.error;){var O=Y.trim(a[w]),v=O.indexOf("//");-1!=v&&
(O=ra.substr(O,0,v));var u=k.match(O)?k.matchedPos().pos:-1;v=null;-1!=u&&(v=this.match(ra.substr(O,u,null),m),O=ra.substr(O,0,u));u=null;if(h.match(O)){u=h.matched(0);var A=na.OPMAP;u=null!=F[u]?A.getReserved(u):A.h[u]}if(null==u)3<=O.length&&Ga.warn("warning: bad line "+w+": "+a[w],{fileName:"openfl/utils/AGALMiniAssembler.hx",lineNumber:262,className:"openfl.utils.AGALMiniAssembler",methodName:"assemble"});else if(this.debugEnabled&&Ga.info(u,{fileName:"openfl/utils/AGALMiniAssembler.hx",lineNumber:272,
className:"openfl.utils.AGALMiniAssembler",methodName:"assemble"}),null==u)3<=O.length&&Ga.warn("warning: bad line "+w+": "+a[w],{fileName:"openfl/utils/AGALMiniAssembler.hx",lineNumber:279,className:"openfl.utils.AGALMiniAssembler",methodName:"assemble"});else{O=ra.substr(O,O.indexOf(u.name)+u.name.length,null);if(0!=(u.flags&256)&&2>c){this.error="error: opcode requires version 2.";break}if(0!=(u.flags&64)&&f){this.error="error: opcode is only allowed in vertex programs.";break}if(0!=(u.flags&32)&&
!f){this.error="error: opcode is only allowed in fragment programs.";break}this.verbose&&Ga.info("emit opcode="+r.string(u),{fileName:"openfl/utils/AGALMiniAssembler.hx",lineNumber:308,className:"openfl.utils.AGALMiniAssembler",methodName:"assemble"});this.agalcode.writeUnsignedInt(u.emitCode);++b;if(4096<b){this.error="error: too many opcodes. maximum is 4096.";break}A=this.match(O,n);if(A.length!=u.numRegister){this.error="error: wrong number of operands. found "+A.length+" but expected "+u.numRegister+
".";break}var x=!1;O=160;for(var B=0,qa=A.length;B<qa;){var L=B++,M=!1,ja=this.match(A[L],g);0<ja.length&&(A[L]=Y.replace(A[L],ja[0],"0"),this.verbose&&Ga.info("IS REL",{fileName:"openfl/utils/AGALMiniAssembler.hx",lineNumber:344,className:"openfl.utils.AGALMiniAssembler",methodName:"assemble"}),M=!0);var D=this.match(A[L],l);if(0==D.length){this.error="error: could not parse operand "+L+" ("+A[L]+").";x=!0;break}var Ia=na.REGMAP;D=D[0];D=null!=F[D]?Ia.getReserved(D):Ia.h[D];this.debugEnabled&&Ga.info(D,
{fileName:"openfl/utils/AGALMiniAssembler.hx",lineNumber:363,className:"openfl.utils.AGALMiniAssembler",methodName:"assemble"});if(null==D){this.error="error: could not find register name for operand "+L+" ("+A[L]+").";x=!0;break}if(f){if(0==(D.flags&32)){this.error="error: register operand "+L+" ("+A[L]+") only allowed in vertex programs.";x=!0;break}if(M){this.error="error: register operand "+L+" ("+A[L]+") relative adressing not allowed in fragment programs.";x=!0;break}}else if(0==(D.flags&64)){this.error=
"error: register operand "+L+" ("+A[L]+") only allowed in fragment programs.";x=!0;break}A[L]=ra.substr(A[L],A[L].indexOf(D.name)+D.name.length,null);var Ca=M?this.match(ja[0],p):this.match(A[L],p);Ia=0;0<Ca.length&&(Ia=r.parseInt(Ca[0]));if(Xa.gt(Ia,D.range)){v=D.range+1;this.error="error: register operand "+L+" ("+A[L]+") index exceeds limit of "+r.string(null==v?null:Xa.toFloat(v))+".";x=!0;break}var ha=this.match(A[L],y),ba=0==L&&0==(u.flags&128),J=2==L&&0!=(u.flags&8),N=0,R=0,aa=0;if(ba&&M){this.error=
"error: relative can not be destination";x=!0;break}if(0<ha.length){for(var S=Ca=0,mb=ha[0].length,Ja=1;Ja<mb;)S=ra.cca(ha[0],Ja)-120,Xa.gt(S,2)&&(S=3),Ca=ba?Ca|1<<S:Ca|S<<(Ja-1<<1),++Ja;if(!ba)for(;4>=Ja;)Ca|=S<<(Ja-1<<1),++Ja}else Ca=ba?15:228;if(M){ha=this.match(ja[0],q);N=na.REGMAP;R=ha[0];N=null!=F[R]?N.getReserved(R):N.h[R];if(null==N){this.error="error: bad index register";x=!0;break}N=N.emitCode;S=this.match(ja[0],t);if(0==S.length){this.error="error: bad index register select";x=!0;break}R=
ra.cca(S[0],1)-120;Xa.gt(R,2)&&(R=3);ja=this.match(ja[0],z);0<ja.length&&(aa=r.parseInt(ja[0]));if(0>aa||255<aa){this.error="error: index offset "+aa+" out of bounds. [0..255]";x=!0;break}this.verbose&&Ga.info("RELATIVE: type="+N+"=="+ha[0]+" sel="+r.string(null==R?null:Xa.toFloat(R))+"=="+S[0]+" idx="+r.string(null==Ia?null:Xa.toFloat(Ia))+" offset="+aa,{fileName:"openfl/utils/AGALMiniAssembler.hx",lineNumber:518,className:"openfl.utils.AGALMiniAssembler",methodName:"assemble"})}this.verbose&&Ga.info("  emit argcode="+
r.string(D)+"["+r.string(null==Ia?null:Xa.toFloat(Ia))+"]["+Ca+"]",{fileName:"openfl/utils/AGALMiniAssembler.hx",lineNumber:525,className:"openfl.utils.AGALMiniAssembler",methodName:"assemble"});if(ba)this.agalcode.writeShort(Ia),this.agalcode.writeByte(Ca),this.agalcode.writeByte(D.emitCode),O-=32;else{if(J){this.verbose&&Ga.info("  emit sampler",{fileName:"openfl/utils/AGALMiniAssembler.hx",lineNumber:541,className:"openfl.utils.AGALMiniAssembler",methodName:"assemble"});L=5;ja=M=0;for(D=null==
v?0:v.length;ja<D;)Ca=ja++,this.verbose&&Ga.info("    opt: "+v[Ca],{fileName:"openfl/utils/AGALMiniAssembler.hx",lineNumber:552,className:"openfl.utils.AGALMiniAssembler",methodName:"assemble"}),ba=na.SAMPLEMAP,J=v[Ca],ba=null!=F[J]?ba.getReserved(J):ba.h[J],null==ba?(M=parseFloat(v[Ca]),this.verbose&&Ga.info("    bias: "+M,{fileName:"openfl/utils/AGALMiniAssembler.hx",lineNumber:565,className:"openfl.utils.AGALMiniAssembler",methodName:"assemble"})):(16!=ba.flag&&(L&=~(15<<ba.flag)),L|=ba.mask<<
ba.flag);this.agalcode.writeShort(Ia);this.agalcode.writeByte(8*M|0);this.agalcode.writeByte(0);this.agalcode.writeUnsignedInt(L);this.verbose&&Ga.info("    bits: "+(L-5),{fileName:"openfl/utils/AGALMiniAssembler.hx",lineNumber:586,className:"openfl.utils.AGALMiniAssembler",methodName:"assemble"})}else 0==L&&(this.agalcode.writeUnsignedInt(0),O-=32),this.agalcode.writeShort(Ia),this.agalcode.writeByte(aa),this.agalcode.writeByte(Ca),this.agalcode.writeByte(D.emitCode),this.agalcode.writeByte(N),this.agalcode.writeShort(M?
R|32768:0);O-=64}}for(v=0;v<O;)this.agalcode.writeByte(0),v+=8;if(x)break}++w}""!=this.error&&(this.error+="\n  at line "+w+" "+a[w],rf.set_length(this.agalcode,0),Ga.info(this.error,{fileName:"openfl/utils/AGALMiniAssembler.hx",lineNumber:631,className:"openfl.utils.AGALMiniAssembler",methodName:"assemble"}));if(this.debugEnabled){c="generated bytecode:";f=0;for(a=rf.get_length(this.agalcode);f<a;)b=f++,0==b%16&&(c+="\n"),0==b%4&&(c+=" "),b=Y.hex(this.agalcode.b[b],2),2>b.length&&(b="0"+b),c+=b;
Ga.info(c,{fileName:"openfl/utils/AGALMiniAssembler.hx",lineNumber:662,className:"openfl.utils.AGALMiniAssembler",methodName:"assemble"})}this.verbose&&Ga.info("AGALMiniAssembler.assemble time: "+(Qb.getTimer()-e)/1E3+"s",{fileName:"openfl/utils/AGALMiniAssembler.hx",lineNumber:667,className:"openfl.utils.AGALMiniAssembler",methodName:"assemble"});return this.agalcode},initregmap:function(a,b){var c=na.REGMAP,d=new xd("va","vertex attribute",0,b?1024:1==a||2==a?7:15,66);null!=F.va?c.setReserved("va",
d):c.h.va=d;c=na.REGMAP;d=new xd("vc","vertex constant",1,b?1024:1==a?127:249,66);null!=F.vc?c.setReserved("vc",d):c.h.vc=d;c=na.REGMAP;d=new xd("vt","vertex temporary",2,b?1024:1==a?7:25,67);null!=F.vt?c.setReserved("vt",d):c.h.vt=d;c=na.REGMAP;d=new xd("vo","vertex output",3,b?1024:0,65);null!=F.vo?c.setReserved("vo",d):c.h.vo=d;c=na.REGMAP;d=new xd("vi","varying",4,b?1024:1==a?7:9,99);null!=F.vi?c.setReserved("vi",d):c.h.vi=d;c=na.REGMAP;d=new xd("fc","fragment constant",1,b?1024:1==a?27:2==a?
63:199,34);null!=F.fc?c.setReserved("fc",d):c.h.fc=d;c=na.REGMAP;d=new xd("ft","fragment temporary",2,b?1024:1==a?7:25,35);null!=F.ft?c.setReserved("ft",d):c.h.ft=d;c=na.REGMAP;d=new xd("fs","texture sampler",5,b?1024:7,34);null!=F.fs?c.setReserved("fs",d):c.h.fs=d;c=na.REGMAP;d=new xd("fo","fragment output",3,b?1024:1==a?0:3,33);null!=F.fo?c.setReserved("fo",d):c.h.fo=d;c=na.REGMAP;a=new xd("fd","fragment depth output",6,b?1024:1==a?-1:0,33);null!=F.fd?c.setReserved("fd",a):c.h.fd=a;a=na.REGMAP;
b=new xd("iid","instance id",7,b?1024:0,66);null!=F.iid?a.setReserved("iid",b):a.h.iid=b;a=b=na.REGMAP;a=null!=F.vo?a.getReserved("vo"):a.h.vo;null!=F.op?b.setReserved("op",a):b.h.op=a;a=b=na.REGMAP;a=null!=F.vi?a.getReserved("vi"):a.h.vi;null!=F.i?b.setReserved("i",a):b.h.i=a;a=b=na.REGMAP;a=null!=F.vi?a.getReserved("vi"):a.h.vi;null!=F.v?b.setReserved("v",a):b.h.v=a;a=b=na.REGMAP;a=null!=F.fo?a.getReserved("fo"):a.h.fo;null!=F.oc?b.setReserved("oc",a):b.h.oc=a;a=b=na.REGMAP;a=null!=F.fd?a.getReserved("fd"):
a.h.fd;null!=F.od?b.setReserved("od",a):b.h.od=a;a=b=na.REGMAP;a=null!=F.vi?a.getReserved("vi"):a.h.vi;null!=F.fi?b.setReserved("fi",a):b.h.fi=a},match:function(a,b){for(var c=[],d=0;b.matchSub(a,d);)d=b.matched(0),c.push(d),d=b.matchedPos().pos+d.length;return c},__class__:na};var nb=function(a,b,c,d){this.name=a;this.numRegister=b;this.emitCode=c;this.flags=d};g["openfl.utils._AGALMiniAssembler.OpCode"]=nb;nb.__name__="openfl.utils._AGALMiniAssembler.OpCode";nb.prototype={emitCode:null,flags:null,
name:null,numRegister:null,__class__:nb};var xd=function(a,b,c,d,e){this.name=a;this.longName=b;this.emitCode=c;this.range=d;this.flags=e};g["openfl.utils._AGALMiniAssembler.Register"]=xd;xd.__name__="openfl.utils._AGALMiniAssembler.Register";xd.prototype={emitCode:null,name:null,longName:null,flags:null,range:null,toString:function(){var a=this.emitCode;a='[Register name="'+this.name+'", longName="'+this.longName+'", emitCode='+r.string(null==a?null:Xa.toFloat(a))+", range=";var b=this.range;a=a+
r.string(null==b?null:Xa.toFloat(b))+", flags=";b=this.flags;return a+r.string(null==b?null:Xa.toFloat(b))+"]"},__class__:xd};var Ab=function(a,b,c){this.name=a;this.flag=b;this.mask=c};g["openfl.utils._AGALMiniAssembler.Sampler"]=Ab;Ab.__name__="openfl.utils._AGALMiniAssembler.Sampler";Ab.prototype={flag:null,mask:null,name:null,__class__:Ab};var cg=function(){};g["openfl.utils.IAssetCache"]=cg;cg.__name__="openfl.utils.IAssetCache";cg.__isInterface__=!0;cg.prototype={get_enabled:null,getBitmapData:null,
hasBitmapData:null,removeBitmapData:null,setBitmapData:null,__class__:cg};var Gg=function(){this.__enabled=!0;this.bitmapData=new Ra;this.font=new Ra;this.sound=new Ra};g["openfl.utils.AssetCache"]=Gg;Gg.__name__="openfl.utils.AssetCache";Gg.__interfaces__=[cg];Gg.prototype={bitmapData:null,font:null,sound:null,__enabled:null,getBitmapData:function(a){var b=this.bitmapData;return null!=F[a]?b.getReserved(a):b.h[a]},hasBitmapData:function(a){var b=this.bitmapData;return null!=F[a]?b.existsReserved(a):
b.h.hasOwnProperty(a)},removeBitmapData:function(a){Da.cache.image.remove(a);return this.bitmapData.remove(a)},setBitmapData:function(a,b){var c=this.bitmapData;null!=F[a]?c.setReserved(a,b):c.h[a]=b},get_enabled:function(){return this.__enabled},__class__:Gg};var Rc=function(){};g["openfl.utils.Assets"]=Rc;Rc.__name__="openfl.utils.Assets";Rc.exists=function(a,b){return Da.exists(a,b)};Rc.getBitmapData=function(a,b){null==b&&(b=!0);if(b&&Rc.cache.get_enabled()&&Rc.cache.hasBitmapData(a)){var c=Rc.cache.getBitmapData(a);
if(Rc.isValidBitmapData(c))return c}c=Da.getImage(a,!1);return null!=c?(c=Mb.fromImage(c),b&&Rc.cache.get_enabled()&&Rc.cache.setBitmapData(a,c),c):null};Rc.isValidBitmapData=function(a){return null!=a&&null!=a.image};var rf={};g["openfl.utils._ByteArray.ByteArray_Impl_"]=rf;rf.__name__="openfl.utils._ByteArray.ByteArray_Impl_";rf.fromBytes=function(a){return null==a?null:a instanceof wd?a:wd.fromBytes(a)};rf.get_length=function(a){return null==a?0:a.length};rf.set_length=function(a,b){0<b&&(a.__resize(b),
b<a.position&&(a.position=b));return a.length=b};var fj=function(){};g["openfl.utils.IDataOutput"]=fj;fj.__name__="openfl.utils.IDataOutput";fj.__isInterface__=!0;fj.prototype={__class__:fj};var mk=function(){};g["openfl.utils.IDataInput"]=mk;mk.__name__="openfl.utils.IDataInput";mk.__isInterface__=!0;mk.prototype={__class__:mk};var wd=function(a){null==a&&(a=0);var b=new vb(new ArrayBuffer(a));vb.call(this,b.b.buffer);this.__length=a;null==wd.__defaultEndian&&(jc.get_endianness()==sm.LITTLE_ENDIAN?
wd.__defaultEndian=1:wd.__defaultEndian=0);this.__endian=wd.__defaultEndian;this.objectEncoding=wd.defaultObjectEncoding;this.position=0};g["openfl.utils.ByteArrayData"]=wd;wd.__name__="openfl.utils.ByteArrayData";wd.__interfaces__=[fj,mk];wd.fromBytes=function(a){var b=new wd;b.__fromBytes(a);return b};wd.__super__=vb;wd.prototype=v(vb.prototype,{objectEncoding:null,position:null,__endian:null,__length:null,readByte:function(){var a=this.readUnsignedByte();return 0!=(a&128)?a-256:a},readInt:function(){var a=
this.readUnsignedByte(),b=this.readUnsignedByte(),c=this.readUnsignedByte(),d=this.readUnsignedByte();return 1==this.__endian?d<<24|c<<16|b<<8|a:a<<24|b<<16|c<<8|d},readUnsignedByte:function(){if(this.position<this.length)return this.b[this.position++];throw new W(new aj);},readUnsignedInt:function(){var a=this.readUnsignedByte(),b=this.readUnsignedByte(),c=this.readUnsignedByte(),d=this.readUnsignedByte();return 1==this.__endian?d<<24|c<<16|b<<8|a:a<<24|b<<16|c<<8|d},readUnsignedShort:function(){var a=
this.readUnsignedByte(),b=this.readUnsignedByte();return 1==this.__endian?(b<<8)+a:a<<8|b},readUTF:function(){var a=this.readUnsignedShort();return this.readUTFBytes(a)},readUTFBytes:function(a){if(this.position+a>this.length)throw new W(new aj);this.position+=a;return this.getString(this.position-a,a)},writeByte:function(a){this.__resize(this.position+1);this.b[this.position++]=a&255},writeInt:function(a){this.__resize(this.position+4);1==this.__endian?(this.b[this.position++]=a&255,this.b[this.position++]=
a>>8&255,this.b[this.position++]=a>>16&255,this.b[this.position++]=a>>24&255):(this.b[this.position++]=a>>24&255,this.b[this.position++]=a>>16&255,this.b[this.position++]=a>>8&255,this.b[this.position++]=a&255)},writeShort:function(a){this.__resize(this.position+2);1==this.__endian?(this.b[this.position++]=a&255,this.b[this.position++]=a>>8&255):(this.b[this.position++]=a>>8&255,this.b[this.position++]=a&255)},writeUnsignedInt:function(a){this.writeInt(a)},__fromBytes:function(a){this.b=a.b;this.__length=
a.length;this.data=a.data;this.length=a.length},__resize:function(a){if(a>this.__length){var b=new vb(new ArrayBuffer(3*(a+1)>>1));if(0<this.__length){var c=this.length;this.length=this.__length;b.blit(0,this,0,this.__length);this.length=c}this.b=b.b;this.__length=b.length;this.data=b.data}this.length<a&&(this.length=a)},__class__:wd});var gj=function(){};g["haxe.lang.Iterator"]=gj;gj.__name__="haxe.lang.Iterator";gj.__isInterface__=!0;gj.prototype={hasNext:null,next:null,__class__:gj};var hj=function(){};
g["haxe.lang.Iterable"]=hj;hj.__name__="haxe.lang.Iterable";hj.__isInterface__=!0;hj.prototype={iterator:null,__class__:hj};var Dl=function(a,b){null==b&&(b=0);if(isNaN(a)||0>a)throw new W(new cb("The delay specified is negative or not a finite number"));aa.call(this);this.__delay=a;this.__repeatCount=b;this.running=!1;this.currentCount=0};g["openfl.utils.Timer"]=Dl;Dl.__name__="openfl.utils.Timer";Dl.__super__=aa;Dl.prototype=v(aa.prototype,{currentCount:null,running:null,__delay:null,__repeatCount:null,
__class__:Dl});D.$haxeUID|=0;ja.count=0;g.Math=Math;null==String.fromCodePoint&&(String.fromCodePoint=function(a){return 65536>a?String.fromCharCode(a):String.fromCharCode((a>>10)+55232)+String.fromCharCode((a&1023)+56320)});String.prototype.__class__=g.String=String;String.__name__="String";g.Array=Array;Array.__name__="Array";Date.prototype.__class__=g.Date=Date;Date.__name__="Date";var rm={},Lm={},Mm=Number,Km=Boolean,Rl={},tm={},F={};Object.defineProperty(W.prototype,"message",{get:function(){return String(this.val)}});
Ka.__toStr={}.toString;var Qm=new Uint32Array(256);S.__alpha16=Qm;for(var Cm=0;256>Cm;){var Dm=Cm++;S.__alpha16[Dm]=Math.ceil(257.00392156862745*Dm)}var Rm=new Uint8Array(511);S.__clamp=Rm;for(var Em=0;255>Em;){var Fm=Em++;S.__clamp[Fm]=Fm}for(var Gm=255;511>Gm;){var Sm=Gm++;S.__clamp[Sm]=255}Ga.level=3;"undefined"==typeof console&&(console={});null==console.log&&(console.log=function(){});A.hitTestCanvas="undefined"!=typeof window?window.document.createElement("canvas"):null;A.hitTestContext="undefined"!=
typeof window?A.hitTestCanvas.getContext("2d"):null;M.__meta__={statics:{toNullVector:{SuppressWarnings:["checkstyle:Dynamic"]}}};ba.__meta__={fields:{__cairo:{SuppressWarnings:["checkstyle:Dynamic"]},addEventListener:{SuppressWarnings:["checkstyle:Dynamic"]},removeEventListener:{SuppressWarnings:["checkstyle:Dynamic"]}}};ba.__broadcastEvents=new Ra;ba.__instanceCount=0;ba.__tempStack=new ua(function(){return M.toObjectVector(null)},function(a){a.set_length(0)});w.numCreations=0;B.tmpVec3_0=new w;
B.tmpVec3_1=new w;B.oimoStaticBodies=[];B.oimoDynamicBodies=[];B.oimoKinematicBodies=[];B.awayStaticBodies=[];B.awayDynamicBodies=[];B.awayKinematicBodies=[];dc._currentId=0;R.__pool=new ua(function(){return new R(null)},function(a){a.__init()});xa._viewCount=0;xa._queuedEvents=M.toObjectVector(null);xa._mouseUp=new he("mouseUp3d");xa._mouseClick=new he("click3d");xa._mouseOut=new he("mouseOut3d");xa._mouseDown=new he("mouseDown3d");xa._mouseMove=new he("mouseMove3d");xa._mouseOver=new he("mouseOver3d");
xa._mouseWheel=new he("mouseWheel3d");xa._mouseDoubleClick=new he("doubleClick3d");xa._previousCollidingView=-1;xa._collidingView=-1;cc._numStageProxies=0;va.__meta__={fields:{equals:{SuppressWarnings:["checkstyle:FieldDocComment"]}}};va.__pool=new ua(function(){return new va},function(a){a.identity()});Nb.__pool=new ua(function(){return new Nb},function(a){a.__identity()});eb._frameEventDriver=new Gf;Bc._queuedEvents=M.toObjectVector(null);kg.RADIANS_TO_DEGREES=180/Math.PI;kg.DEGREES_TO_RADIANS=
Math.PI/180;db.RAW_DATA_CONTAINER=M.toFloatVector(null,16);db.CALCULATION_MATRIX=new vc;db.CALCULATION_VECTOR3D=new hb;db.CALCULATION_DECOMPOSE=function(a){a=[new hb,new hb,new hb];for(var b=M.toObjectVector(null),c=0,d=a.length;c<d;){var e=c++;b.set(e,a[e])}return b}(this);If.tempRayPosition=new hb;If.tempRayDirection=new hb;ya.__pool=new ua(function(){return new ya},function(a){a.setTo(0,0,0,0)});ok.RAYCAST_FIRST_ENCOUNTERED=new If(!1);ae.RTT_PASSES=1;ae.SCREEN_PASSES=2;ae.ALL_PASSES=3;gf._collectionMark=
0;Me.active=!1;Oc.LIMIT=196605;Dd.MATERIAL_ID_COUNT=0;hc._regPool=new Ra;hc._regCompsPool=new Ra;Md.COMPONENTS=["x","y","z","w"];rb._previousUsedStreams=function(a){a=[0,0,0,0,0,0,0,0];for(var b=M.toIntVector(null),c=0,d=a.length;c<d;){var e=c++;b.set(e,a[e])}return b}(this);rb._previousUsedTexs=function(a){a=[0,0,0,0,0,0,0,0];for(var b=M.toIntVector(null),c=0,d=a.length;c<d;){var e=c++;b.set(e,a[e])}return b}(this);jf.ONE_VECTOR=function(a){a=[1,1,1,1];for(var b=M.toFloatVector(null),c=0,d=a.length;c<
d;){var e=c++;b.set(e,a[e])}return b}(this);jf.FRONT_VECTOR=function(a){a=[0,0,-1,0];for(var b=M.toFloatVector(null),c=0,d=a.length;c<d;){var e=c++;b.set(e,a[e])}return b}(this);Qc._matrix=new va;Qc._rect=new ya;Pc._mipMaps=[];Pc._mipMapUses=[];Sc.USE_CACHE=!1;Sc.USE_ENUM_INDEX=!1;Sc.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:";Tc.DEFAULT_RESOLVER=new Aj;Tc.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:";ic.LEN_EXTRA_BITS_TBL=[0,0,0,0,0,0,0,0,
1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,-1,-1];ic.LEN_BASE_VAL_TBL=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258];ic.DIST_EXTRA_BITS_TBL=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,-1,-1];ic.DIST_BASE_VAL_TBL=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];ic.CODE_LENGTHS_POS=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];ea.activeRequests=0;ea.requestLimit=17;ea.requestQueue=
new ia;Va.dummyCharacter="\u007f";Va.windowID=0;me.DICTIONARY="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");me.EXTENDED_DICTIONARY=function(a){a=[];for(var b=0,c=me.DICTIONARY;b<c.length;){var d=c[b];++b;for(var e=0,f=me.DICTIONARY;e<f.length;){var k=f[e];++e;a.push(d+k)}}return a}(this);ed.MUL_TABLE=[1,171,205,293,57,373,79,137,241,27,391,357,41,19,283,265,497,469,443,421,25,191,365,349,335,161,155,149,9,278,269,261,505,245,475,231,449,437,213,415,405,395,193,377,369,
361,353,345,169,331,325,319,313,307,301,37,145,285,281,69,271,267,263,259,509,501,493,243,479,118,465,459,113,446,55,435,429,423,209,413,51,403,199,393,97,3,379,375,371,367,363,359,355,351,347,43,85,337,333,165,327,323,5,317,157,311,77,305,303,75,297,294,73,289,287,71,141,279,277,275,68,135,67,133,33,262,260,129,511,507,503,499,495,491,61,121,481,477,237,235,467,232,115,457,227,451,7,445,221,439,218,433,215,427,425,211,419,417,207,411,409,203,202,401,399,396,197,49,389,387,385,383,95,189,47,187,93,
185,23,183,91,181,45,179,89,177,11,175,87,173,345,343,341,339,337,21,167,83,331,329,327,163,81,323,321,319,159,79,315,313,39,155,309,307,153,305,303,151,75,299,149,37,295,147,73,291,145,289,287,143,285,71,141,281,35,279,139,69,275,137,273,17,271,135,269,267,133,265,33,263,131,261,130,259,129,257,1];ed.SHG_TABLE=[0,9,10,11,9,12,10,11,12,9,13,13,10,9,13,13,14,14,14,14,10,13,14,14,14,13,13,13,9,14,14,14,15,14,15,14,15,15,14,15,15,15,14,15,15,15,15,15,14,15,15,15,15,15,15,12,14,15,15,13,15,15,15,15,16,
16,16,15,16,14,16,16,14,16,13,16,16,16,15,16,13,16,15,16,14,9,16,16,16,16,16,16,16,16,16,13,14,16,16,15,16,16,10,16,15,16,14,16,16,14,16,16,14,16,16,14,15,16,16,16,14,15,14,15,13,16,16,15,17,17,17,17,17,17,14,15,17,17,16,16,17,16,15,17,16,17,11,17,16,17,16,17,16,17,17,16,17,17,16,17,17,16,16,17,17,17,16,14,17,17,17,17,15,16,14,16,15,16,13,16,15,16,14,16,15,16,12,16,15,16,17,17,17,17,17,13,16,15,17,17,17,16,15,17,17,17,16,15,17,17,14,16,17,17,16,17,17,16,15,17,16,14,17,16,15,17,16,17,17,16,17,15,16,
17,14,17,16,15,17,16,17,13,17,16,17,17,16,17,14,17,16,17,16,17,16,17,9];Za.__identity=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Mc.onUpdate=new kc;De.sensorByID=new Zb;De.sensors=[];lc.devices=new Zb;lc.onConnect=new Ij;sc.devices=new Zb;sc.onConnect=new ui;Fc.onCancel=new rg;Fc.onEnd=new rg;Fc.onMove=new rg;Fc.onStart=new rg;Da.cache=new Jj;Da.onChange=new kc;Da.bundlePaths=new Ra;Da.libraries=new Ra;Da.libraryPaths=new Ra;Ga.throwErrors=!0;ta.defaultFriction=.2;ta.defaultRestitution=.2;ta.defaultDensity=
1;ta.defaultCollisionGroup=1;ta.defaultCollisionMask=1;ta.maxTranslationPerStep=20;ta.maxRotationPerStep=3.14159265358979;ta.bvhProxyPadding=.1;ta.bvhIncrementalCollisionThreshold=.45;ta.defaultGJKMargin=.05;ta.enableGJKCaching=!0;ta.maxEPAVertices=128;ta.contactEnableBounceThreshold=.5;ta.velocityBaumgarte=.2;ta.positionSplitImpulseBaumgarte=.4;ta.positionNgsBaumgarte=1;ta.contactUseAlternativePositionCorrectionAlgorithmDepthThreshold=.05;ta.defaultContactPositionCorrectionAlgorithm=0;ta.alternativeContactPositionCorrectionAlgorithm=
1;ta.contactPersistenceThreshold=.05;ta.maxManifoldPoints=4;ta.defaultJointConstraintSolverType=0;ta.defaultJointPositionCorrectionAlgorithm=0;ta.jointWarmStartingFactorForBaungarte=.8;ta.jointWarmStartingFactor=.95;ta.maxJacobianRows=6;ta.directMlcpSolverEps=1E-9;ta.islandInitialRigidBodyArraySize=128;ta.islandInitialConstraintArraySize=128;ta.sleepingVelocityThreshold=.2;ta.sleepingAngularVelocityThreshold=.5;ta.sleepingTimeThreshold=1;ta.disableSleeping=!1;ta.linearSlop=.005;mh.instance=new mh;
Pe.SUCCEEDED=0;Pe.EPA_FAILED_TO_INIT=257;Pe.EPA_FAILED_TO_ADD_VERTEX=258;Pe.EPA_DID_NOT_CONVERGE=259;Ef.numCreations=0;af.broadPhaseCollisionTime=0;af.narrowPhaseCollisionTime=0;af.dynamicsTime=0;af.totalTime=0;$e.BAUMGARTE=0;$e.SPLIT_IMPULSE=1;$e.NGS=2;ib.DYNAMIC=0;ib.STATIC=1;ib.KINEMATIC=2;Qe.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]}};fg.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]},fields:{toJSON:{SuppressWarnings:["checkstyle:Dynamic"]}}};cf.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]},
fields:{toJSON:{SuppressWarnings:["checkstyle:Dynamic"]},_:{SuppressWarnings:["checkstyle:Dynamic"]}}};ph.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]},fields:{toJSON:{SuppressWarnings:["checkstyle:Dynamic"]}}};Se.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]},fields:{toJSON:{SuppressWarnings:["checkstyle:Dynamic"]}}};Zd.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]},fields:{concat:{SuppressWarnings:["checkstyle:Dynamic"]},toJSON:{SuppressWarnings:["checkstyle:Dynamic"]},
_:{SuppressWarnings:["checkstyle:Dynamic"]}}};vd.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]}};sd.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]}};sd.limitedProfile=!0;Si.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]}};qh.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]}};Ti.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]}};Ag.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]}};Oa.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]}};
Oa.__regexAlign=new Ba("align\\s?=\\s?(\"([^\"]+)\"|'([^']+)')","i");Oa.__regexBreakTag=new Ba("<br\\s*/?>","gi");Oa.__regexBlockIndent=new Ba("blockindent\\s?=\\s?(\"([^\"]+)\"|'([^']+)')","i");Oa.__regexColor=new Ba("color\\s?=\\s?(\"#([^\"]+)\"|'#([^']+)')","i");Oa.__regexEntities=[new Ba("&quot;","g"),new Ba("&apos;","g"),new Ba("&amp;","g"),new Ba("&lt;","g"),new Ba("&gt;","g"),new Ba("&nbsp;","g")];Oa.__regexFace=new Ba("face\\s?=\\s?(\"([^\"]+)\"|'([^']+)')","i");Oa.__regexHTMLTag=new Ba("<.*?>",
"g");Oa.__regexHref=new Ba("href\\s?=\\s?(\"([^\"]+)\"|'([^']+)')","i");Oa.__regexIndent=new Ba(" indent\\s?=\\s?(\"([^\"]+)\"|'([^']+)')","i");Oa.__regexLeading=new Ba("leading\\s?=\\s?(\"([^\"]+)\"|'([^']+)')","i");Oa.__regexLeftMargin=new Ba("leftmargin\\s?=\\s?(\"([^\"]+)\"|'([^']+)')","i");Oa.__regexRightMargin=new Ba("rightmargin\\s?=\\s?(\"([^\"]+)\"|'([^']+)')","i");Oa.__regexSize=new Ba("size\\s?=\\s?(\"([^\"]+)\"|'([^']+)')","i");Oa.__regexTabStops=new Ba("tabstops\\s?=\\s?(\"([^\"]+)\"|'([^']+)')",
"i");Ad.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]},statics:{resolveClass:{SuppressWarnings:["checkstyle:Dynamic"]},resolveEnum:{SuppressWarnings:["checkstyle:Dynamic"]}}};Ad.instances=new Ra;Vi.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]}};Yc.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]},fields:{o:{SuppressWarnings:["checkstyle:Dynamic"]}}};Yc.empty=new Yc;de.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]}};rh.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]}};
Yj.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]},fields:{overrideIntValues:{SuppressWarnings:["checkstyle:Dynamic"]}}};A.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]},statics:{windingRule:{SuppressWarnings:["checkstyle:Dynamic"]},createBitmapFill:{SuppressWarnings:["checkstyle:Dynamic"]},createGradientPattern:{SuppressWarnings:["checkstyle:Dynamic"]}}};A.fillCommands=new Yc;A.strokeCommands=new Yc;V.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]}};
df.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]}};th.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]}};Mb.__meta__={fields:{image:{SuppressWarnings:["checkstyle:Dynamic"]},__framebufferContext:{SuppressWarnings:["checkstyle:Dynamic"]},__indexBufferContext:{SuppressWarnings:["checkstyle:Dynamic"]},__surface:{SuppressWarnings:["checkstyle:Dynamic"]},__textureContext:{SuppressWarnings:["checkstyle:Dynamic"]},__vertexBufferContext:{SuppressWarnings:["checkstyle:Dynamic"]},
__fromImage:{SuppressWarnings:["checkstyle:Dynamic"]}}};Mb.__tempVector=new of;ub.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]}};ub.blankBitmapData=new Mb(1,1,!1,0);ub.tempColorTransform=new Nb(1,1,1,1,0,0,0,0);jd.__meta__={fields:{glProgram:{SuppressWarnings:["checkstyle:Dynamic"]}}};Wi.opaqueBitmapData=new Mb(1,1,!1,0);Te.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]}};vh.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]}};ak.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]}};
Lb.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]}};kj.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]}};zf.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]}};gb.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]}};gb.__regexColor=new Ba("color=(\"#([^\"]+)\"|'#([^']+)')","i");gb.__regexFace=new Ba("face=(\"([^\"]+)\"|'([^']+)')","i");gb.__regexFont=new Ba("<font ([^>]+)>","gi");gb.__regexCloseFont=new Ba("</font>","gi");gb.__regexSize=new Ba("size=(\"([^\"]+)\"|'([^']+)')",
"i");jb.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]}};wh.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]}};xh.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]},fields:{touch:{SuppressWarnings:["checkstyle:Dynamic"]}}};xh.__pool=new ua(function(){return new xh},function(a){a.reset()});Lh.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]}};kd.__meta__={fields:{__context:{SuppressWarnings:["checkstyle:Dynamic"]},__type:{SuppressWarnings:["checkstyle:Dynamic"]}}};
Xi.__meta__={fields:{cairo:{SuppressWarnings:["checkstyle:Dynamic"]},__matrix3:{SuppressWarnings:["checkstyle:Dynamic"]},applyMatrix:{SuppressWarnings:["checkstyle:Dynamic"]},__setBlendModeCairo:{SuppressWarnings:["checkstyle:Dynamic"]},_:{SuppressWarnings:["checkstyle:Dynamic"]}}};fe.__meta__={fields:{context:{SuppressWarnings:["checkstyle:Dynamic"]},applySmoothing:{SuppressWarnings:["checkstyle:Dynamic"]},setTransform:{SuppressWarnings:["checkstyle:Dynamic"]},__setBlendModeContext:{SuppressWarnings:["checkstyle:Dynamic"]},
_:{SuppressWarnings:["checkstyle:Dynamic"]}}};Yi.__meta__={fields:{element:{SuppressWarnings:["checkstyle:Dynamic"]},_:{SuppressWarnings:["checkstyle:Dynamic"]}}};rc.__missingFontWarning=new Ra;Qd.__meta__={statics:{create:{SuppressWarnings:["checkstyle:FieldDocComment"]}},fields:{parameters:{SuppressWarnings:["checkstyle:Dynamic"]}}};Qd.__rootURL="undefined"!=typeof window?window.document.URL:"";Ya.__meta__={fields:{gl:{SuppressWarnings:["checkstyle:Dynamic"]},__gl:{SuppressWarnings:["checkstyle:Dynamic"]},
__matrix:{SuppressWarnings:["checkstyle:Dynamic"]},__projection:{SuppressWarnings:["checkstyle:Dynamic"]},__projectionFlipped:{SuppressWarnings:["checkstyle:Dynamic"]}}};Ya.__alphaValue=[1];Ya.__colorMultipliersValue=[0,0,0,0];Ya.__colorOffsetsValue=[0,0,0,0];Ya.__emptyColorValue=[0,0,0,0];Ya.__hasColorTransformValue=[!1];Ya.__scissorRectangle=new ya;Ya.__textureSizeValue=[0,0];Mh.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]},fields:{onComplete:{SuppressWarnings:["checkstyle:Dynamic"]}}};
Nh.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]}};uh.__meta__={fields:{index:{SuppressWarnings:["checkstyle:Dynamic"]},name:{SuppressWarnings:["checkstyle:FieldDocComment"]}}};Cg.__meta__={fields:{index:{SuppressWarnings:["checkstyle:Dynamic"]},name:{SuppressWarnings:["checkstyle:FieldDocComment"]}}};Eg.__meta__={fields:{__broadcastEvent:{SuppressWarnings:["checkstyle:Dynamic"]},__dispatchEvent:{SuppressWarnings:[["checkstyle:Dynamic","checkstyle:LeftCurly"]]},__dispatchStack:{SuppressWarnings:[["checkstyle:Dynamic",
"checkstyle:LeftCurly"]]},__dispatchTarget:{SuppressWarnings:["checkstyle:Dynamic"]},__handleError:{SuppressWarnings:["checkstyle:Dynamic"]}}};Ee.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]},fields:{_:{SuppressWarnings:["checkstyle:Dynamic"]}}};kb.__glDepthStencil=-1;kb.__glMaxTextureMaxAnisotropy=-1;kb.__glMaxViewportDims=-1;kb.__glMemoryCurrentAvailable=-1;kb.__glMemoryTotalAvailable=-1;kb.__glTextureMaxAnisotropy=-1;hk.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]}};
Dh.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]}};xb.__meta__={fields:{__textureContext:{SuppressWarnings:["checkstyle:Dynamic"]},__getGLFramebuffer:{SuppressWarnings:["checkstyle:Dynamic"]}}};re.__pool=new ua(function(){return new re(null)},function(a){a.__init()});td.__pool=new ua(function(){return new td(null)},function(a){a.__init()});ud.__pool=new ua(function(){return new ud(null)},function(a){a.__init()});eg.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]}};
dg.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]}};Re.__pool=new ua(function(){return new Re(null)},function(a){a.__init()});Fe.__pool=new ua(function(){return new Fe(null)},function(a){a.__init()});wf.__pool=new ua(function(){return new wf(null)},function(a){a.__init()});Fg.__pool=new ua(function(){return new Fg(null)},function(a){a.__init()});Eh.__pool=new ua(function(){return new Eh(null)},function(a){a.__init()});ag.__pool=new ua(function(){return new ag(null)},function(a){a.__init()});
Gb.__pool=new ua(function(){return new Gb(null)},function(a){a.__init()});Ce.__pool=new ua(function(){return new Ce(null)},function(a){a.__init()});bf.__pool=new ua(function(){return new bf(null)},function(a){a.__init()});Ge.__pool=new ua(function(){return new Ge(null)},function(a){a.__init()});Fh.__pool=new ua(function(){return new Fh(null)},function(a){a.__init()});oc.__pool=new ua(function(){return new oc(null)},function(a){a.__init()});$f.__pool=new ua(function(){return new $f(null)},function(a){a.__init()});
Rd.__blurShader=new bj;Gh.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]}};Ah.__colorMatrixShader=new Gh;Id.__glowShader=new cj;ob.__pool=new ua(function(){return new ob},function(a){a.setTo(0,0)});Hh.__meta__={fields:{clone:{SuppressWarnings:["checkstyle:FieldDocComment"]}}};ee.__soundChannels=[];ee.__soundTransform=new Hh;ej.__meta__={fields:{speed:{SuppressWarnings:["checkstyle:FieldDocComment"]}}};xf.followRedirects=!0;xf.idleTimeout=0;xf.manageCookies=!1;Dg.currentDomain=new Dg(null);
Ac.__fontByName=new Ra;Ac.__registeredFonts=[];zh.__meta__={fields:{clone:{SuppressWarnings:["checkstyle:FieldDocComment"]}}};lb.__meta__={fields:{addEventListener:{SuppressWarnings:["checkstyle:Dynamic"]}}};lb.numDevices=0;lb.__deviceList=[];lb.__instances=[];lb.__devices=new ja;Xk.__cursor="auto";na.__meta__={obj:{SuppressWarnings:[["checkstyle:ConstantName","checkstyle:FieldDocComment"]]}};na.OPMAP=new Ra;na.REGMAP=new Ra;na.SAMPLEMAP=new Ra;na.initialized=!1;nb.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]}};
xd.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]}};Ab.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]}};Rc.cache=new Gg;wd.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]}};wd.defaultObjectEncoding=10;gj.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]}};hj.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]}};J.main()})("undefined"!=typeof x?x:"undefined"!=typeof window?window:"undefined"!=typeof self?self:this,"undefined"!=
typeof window?window:"undefined"!=typeof D?D:"undefined"!=typeof self?self:this)};X.lime.embed=function(J){var D={},N=X.lime.$scripts[J];if(!N)throw Error('Cannot find project name "'+J+'"');N(D,x);for(var T in D)X[T]=X[T]||D[T];(N=D.lime||window.lime)&&N.embed&&this!=N.embed&&N.embed.apply(N,arguments);return D};"function"==typeof define&&define.amd&&(define([],function(){return X.lime}),define.__amd=define.amd,define.amd=null)})("undefined"!=typeof exports?exports:"function"==typeof define&&define.amd?
{}:"undefined"!=typeof window?window:"undefined"!=typeof self?self:this,"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this);
!function(){var X=function(){this.init()};X.prototype={init:function(){var g=this||x;return g._counter=1E3,g._html5AudioPool=[],g.html5PoolSize=10,g._codecs={},g._howls=[],g._muted=!1,g._volume=1,g._canPlayEvent="canplaythrough",g._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,g.masterGain=null,g.noAudio=!1,g.usingWebAudio=!0,g.autoSuspend=!0,g.ctx=null,g.autoUnlock=!0,g._setup(),g},volume:function(p){var t=this||x;if(p=parseFloat(p),t.ctx||g(),void 0!==p&&0<=p&&1>=
p){if(t._volume=p,t._muted)return t;t.usingWebAudio&&t.masterGain.gain.setValueAtTime(p,x.ctx.currentTime);for(var q=0;q<t._howls.length;q++)if(!t._howls[q]._webAudio)for(var u=t._howls[q]._getSoundIds(),v=0;v<u.length;v++){var D=t._howls[q]._soundById(u[v]);D&&D._node&&(D._node.volume=D._volume*p)}return t}return t._volume},mute:function(p){var t=this||x;t.ctx||g();t._muted=p;t.usingWebAudio&&t.masterGain.gain.setValueAtTime(p?0:t._volume,x.ctx.currentTime);for(var q=0;q<t._howls.length;q++)if(!t._howls[q]._webAudio)for(var u=
t._howls[q]._getSoundIds(),v=0;v<u.length;v++){var D=t._howls[q]._soundById(u[v]);D&&D._node&&(D._node.muted=!!p||D._muted)}return t},unload:function(){for(var p=this||x,t=p._howls.length-1;0<=t;t--)p._howls[t].unload();return p.usingWebAudio&&p.ctx&&void 0!==p.ctx.close&&(p.ctx.close(),p.ctx=null,g()),p},codecs:function(g){return(this||x)._codecs[g.replace(/^x-/,"")]},_setup:function(){var g=this||x;if(g.state=g.ctx?g.ctx.state||"suspended":"suspended",g._autoSuspend(),!g.usingWebAudio)if("undefined"!=
typeof Audio)try{var t=new Audio;void 0===t.oncanplaythrough&&(g._canPlayEvent="canplay")}catch(q){g.noAudio=!0}else g.noAudio=!0;try{t=new Audio,t.muted&&(g.noAudio=!0)}catch(q){}return g.noAudio||g._setupCodecs(),g},_setupCodecs:function(){var g=this||x,t=null;try{t="undefined"!=typeof Audio?new Audio:null}catch(Ca){return g}if(!t||"function"!=typeof t.canPlayType)return g;var q=t.canPlayType("audio/mpeg;").replace(/^no$/,""),u=g._navigator&&g._navigator.userAgent.match(/OPR\/([0-6].)/g);u=u&&33>
parseInt(u[0].split("/")[1],10);return g._codecs={mp3:!(u||!q&&!t.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!q,opus:!!t.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!t.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!t.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!t.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(t.canPlayType("audio/x-m4a;")||
t.canPlayType("audio/m4a;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(t.canPlayType("audio/x-mp4;")||t.canPlayType("audio/mp4;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),dolby:!!t.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(t.canPlayType("audio/x-flac;")||t.canPlayType("audio/flac;")).replace(/^no$/,"")},g},_unlockAudio:function(){var g=
this||x,t=/iPhone|iPad|iPod|Android|BlackBerry|BB10|Silk|Mobi|Chrome|Safari/i.test(g._navigator&&g._navigator.userAgent);if(!g._audioUnlocked&&g.ctx&&t){g._audioUnlocked=!1;g.autoUnlock=!1;g._mobileUnloaded||44100===g.ctx.sampleRate||(g._mobileUnloaded=!0,g.unload());g._scratchBuffer=g.ctx.createBuffer(1,1,22050);var q=function(p){for(p=0;p<g.html5PoolSize;p++){var t=new Audio;t._unlocked=!0;g._releaseHtml5Audio(t)}for(p=0;p<g._howls.length;p++)if(!g._howls[p]._webAudio){t=g._howls[p]._getSoundIds();
for(var u=0;u<t.length;u++){var v=g._howls[p]._soundById(t[u]);v&&v._node&&!v._node._unlocked&&(v._node._unlocked=!0,v._node.load())}}g._autoResume();var x=g.ctx.createBufferSource();x.buffer=g._scratchBuffer;x.connect(g.ctx.destination);void 0===x.start?x.noteOn(0):x.start(0);"function"==typeof g.ctx.resume&&g.ctx.resume();x.onended=function(){x.disconnect(0);g._audioUnlocked=!0;document.removeEventListener("touchstart",q,!0);document.removeEventListener("touchend",q,!0);document.removeEventListener("click",
q,!0);for(var p=0;p<g._howls.length;p++)g._howls[p]._emit("unlock")}};return document.addEventListener("touchstart",q,!0),document.addEventListener("touchend",q,!0),document.addEventListener("click",q,!0),g}},_obtainHtml5Audio:function(){var g=this||x;if(g._html5AudioPool.length)return g._html5AudioPool.pop();g=(new Audio).play();return g&&"undefined"!=typeof Promise&&(g instanceof Promise||"function"==typeof g.then)&&g.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),
new Audio},_releaseHtml5Audio:function(g){var p=this||x;return g._unlocked&&p._html5AudioPool.push(g),p},_autoSuspend:function(){var g=this;if(g.autoSuspend&&g.ctx&&void 0!==g.ctx.suspend&&x.usingWebAudio){for(var t=0;t<g._howls.length;t++)if(g._howls[t]._webAudio)for(var q=0;q<g._howls[t]._sounds.length;q++)if(!g._howls[t]._sounds[q]._paused)return g;return g._suspendTimer&&clearTimeout(g._suspendTimer),g._suspendTimer=setTimeout(function(){g.autoSuspend&&(g._suspendTimer=null,g.state="suspending",
g.ctx.suspend().then(function(){g.state="suspended";g._resumeAfterSuspend&&(delete g._resumeAfterSuspend,g._autoResume())}))},3E4),g}},_autoResume:function(){var g=this;if(g.ctx&&void 0!==g.ctx.resume&&x.usingWebAudio)return"running"===g.state&&g._suspendTimer?(clearTimeout(g._suspendTimer),g._suspendTimer=null):"suspended"===g.state?(g.ctx.resume().then(function(){g.state="running";for(var p=0;p<g._howls.length;p++)g._howls[p]._emit("resume")}),g._suspendTimer&&(clearTimeout(g._suspendTimer),g._suspendTimer=
null)):"suspending"===g.state&&(g._resumeAfterSuspend=!0),g}};var x=new X,J=function(g){if(!g.src||0===g.src.length)return void console.error("An array of source files must be passed with any new Howl.");this.init(g)};J.prototype={init:function(p){var t=this;return x.ctx||g(),t._autoplay=p.autoplay||!1,t._format="string"!=typeof p.format?p.format:[p.format],t._html5=p.html5||!1,t._muted=p.mute||!1,t._loop=p.loop||!1,t._pool=p.pool||5,t._preload="boolean"!=typeof p.preload||p.preload,t._rate=p.rate||
1,t._sprite=p.sprite||{},t._src="string"!=typeof p.src?p.src:[p.src],t._volume=void 0!==p.volume?p.volume:1,t._xhrWithCredentials=p.xhrWithCredentials||!1,t._duration=0,t._state="unloaded",t._sounds=[],t._endTimers={},t._queue=[],t._playLock=!1,t._onend=p.onend?[{fn:p.onend}]:[],t._onfade=p.onfade?[{fn:p.onfade}]:[],t._onload=p.onload?[{fn:p.onload}]:[],t._onloaderror=p.onloaderror?[{fn:p.onloaderror}]:[],t._onplayerror=p.onplayerror?[{fn:p.onplayerror}]:[],t._onpause=p.onpause?[{fn:p.onpause}]:[],
t._onplay=p.onplay?[{fn:p.onplay}]:[],t._onstop=p.onstop?[{fn:p.onstop}]:[],t._onmute=p.onmute?[{fn:p.onmute}]:[],t._onvolume=p.onvolume?[{fn:p.onvolume}]:[],t._onrate=p.onrate?[{fn:p.onrate}]:[],t._onseek=p.onseek?[{fn:p.onseek}]:[],t._onunlock=p.onunlock?[{fn:p.onunlock}]:[],t._onresume=[],t._webAudio=x.usingWebAudio&&!t._html5,void 0!==x.ctx&&x.ctx&&x.autoUnlock&&x._unlockAudio(),x._howls.push(t),t._autoplay&&t._queue.push({event:"play",action:function(){t.play()}}),t._preload&&t.load(),t},load:function(){var g=
null;if(x.noAudio)return void this._emit("loaderror",null,"No audio support.");"string"==typeof this._src&&(this._src=[this._src]);for(var t=0;t<this._src.length;t++){var q;if(this._format&&this._format[t])var u=this._format[t];else{if("string"!=typeof(q=this._src[t])){this._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(u=/^data:audio\/([^;,]+);/i.exec(q))||(u=/\.([^.]+)$/.exec(q.split("?",1)[0]));u&&(u=u[1].toLowerCase())}if(u||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),
u&&x.codecs(u)){g=this._src[t];break}}return g?(this._src=g,this._state="loading","https:"===window.location.protocol&&"http:"===g.slice(0,5)&&(this._html5=!0,this._webAudio=!1),new D(this),this._webAudio&&T(this),this):void this._emit("loaderror",null,"No codec support for selected audio sources.")},play:function(g,t){var p=this,u=null;if("number"==typeof g)u=g,g=null;else{if("string"==typeof g&&"loaded"===p._state&&!p._sprite[g])return null;if(void 0===g&&(g="__default",!p._playLock)){for(var v=
0,D=0;D<p._sounds.length;D++)p._sounds[D]._paused&&!p._sounds[D]._ended&&(v++,u=p._sounds[D]._id);1===v?g=null:u=null}}var ha=u?p._soundById(u):p._inactiveSound();if(!ha)return null;if(u&&!g&&(g=ha._sprite||"__default"),"loaded"!==p._state){ha._sprite=g;ha._ended=!1;var J=ha._id;return p._queue.push({event:"play",action:function(){p.play(J)}}),J}if(u&&!ha._paused)return t||p._loadQueue("play"),ha._id;p._webAudio&&x._autoResume();var N=Math.max(0,0<ha._seek?ha._seek:p._sprite[g][0]/1E3),aa=Math.max(0,
(p._sprite[g][0]+p._sprite[g][1])/1E3-N),X=1E3*aa/Math.abs(ha._rate),M=p._sprite[g][0]/1E3,T=(p._sprite[g][0]+p._sprite[g][1])/1E3,pa=!(!ha._loop&&!p._sprite[g][2]);ha._sprite=g;ha._ended=!1;var ja=function(){ha._paused=!1;ha._seek=N;ha._start=M;ha._stop=T;ha._loop=pa};if(N>=T)return void p._ended(ha);var ia=ha._node;if(p._webAudio)u=function(){p._playLock=!1;ja();p._refreshBuffer(ha);ia.gain.setValueAtTime(ha._muted||p._muted?0:ha._volume,x.ctx.currentTime);ha._playStart=x.ctx.currentTime;void 0===
ia.bufferSource.start?ha._loop?ia.bufferSource.noteGrainOn(0,N,86400):ia.bufferSource.noteGrainOn(0,N,aa):ha._loop?ia.bufferSource.start(0,N,86400):ia.bufferSource.start(0,N,aa);X!==1/0&&(p._endTimers[ha._id]=setTimeout(p._ended.bind(p,ha),X));t||setTimeout(function(){p._emit("play",ha._id);p._loadQueue()},0)},"running"===x.state?u():(p._playLock=!0,p.once("resume",u),p._clearTimer(ha._id));else{var ba=function(){ia.currentTime=N;ia.muted=ha._muted||p._muted||x._muted||ia.muted;ia.volume=ha._volume*
x.volume();ia.playbackRate=ha._rate;try{var q=ia.play();if(q&&"undefined"!=typeof Promise&&(q instanceof Promise||"function"==typeof q.then)?(p._playLock=!0,ja(),q.then(function(){p._playLock=!1;ia._unlocked=!0;t||(p._emit("play",ha._id),p._loadQueue())}).catch(function(){p._playLock=!1;p._emit("playerror",ha._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");ha._ended=!0;ha._paused=!0})):t||(p._playLock=
!1,ja(),p._emit("play",ha._id),p._loadQueue()),ia.playbackRate=ha._rate,ia.paused)return void p._emit("playerror",ha._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==g||ha._loop?p._endTimers[ha._id]=setTimeout(p._ended.bind(p,ha),X):(p._endTimers[ha._id]=function(){p._ended(ha);ia.removeEventListener("ended",p._endTimers[ha._id],!1)},ia.addEventListener("ended",p._endTimers[ha._id],!1))}catch(ka){p._emit("playerror",
ha._id,ka)}};u=window&&window.ejecta||!ia.readyState&&x._navigator.isCocoonJS;if(3<=ia.readyState||u)ba();else{p._playLock=!0;var fa=function(){ba();ia.removeEventListener(x._canPlayEvent,fa,!1)};ia.addEventListener(x._canPlayEvent,fa,!1);p._clearTimer(ha._id)}}return ha._id},pause:function(g,t){var p=this;if("loaded"!==p._state||p._playLock)return p._queue.push({event:"pause",action:function(){p.pause(g)}}),p;for(var u=p._getSoundIds(g),v=0;v<u.length;v++){p._clearTimer(u[v]);var x=p._soundById(u[v]);
if(x&&!x._paused&&(x._seek=p.seek(u[v]),x._rateSeek=0,x._paused=!0,p._stopFade(u[v]),x._node))if(p._webAudio){if(!x._node.bufferSource)continue;void 0===x._node.bufferSource.stop?x._node.bufferSource.noteOff(0):x._node.bufferSource.stop(0);p._cleanBuffer(x._node)}else isNaN(x._node.duration)&&x._node.duration!==1/0||x._node.pause();t||p._emit("pause",x?x._id:null)}return p},stop:function(g,t){var p=this;if("loaded"!==p._state||p._playLock)return p._queue.push({event:"stop",action:function(){p.stop(g)}}),
p;for(var u=p._getSoundIds(g),v=0;v<u.length;v++){p._clearTimer(u[v]);var x=p._soundById(u[v]);x&&(x._seek=x._start||0,x._rateSeek=0,x._paused=!0,x._ended=!0,p._stopFade(u[v]),x._node&&(p._webAudio?x._node.bufferSource&&(void 0===x._node.bufferSource.stop?x._node.bufferSource.noteOff(0):x._node.bufferSource.stop(0),p._cleanBuffer(x._node)):isNaN(x._node.duration)&&x._node.duration!==1/0||(x._node.currentTime=x._start||0,x._node.pause())),t||p._emit("stop",x._id))}return p},mute:function(g,t){var p=
this;if("loaded"!==p._state||p._playLock)return p._queue.push({event:"mute",action:function(){p.mute(g,t)}}),p;if(void 0===t){if("boolean"!=typeof g)return p._muted;p._muted=g}for(var u=p._getSoundIds(t),v=0;v<u.length;v++){var D=p._soundById(u[v]);D&&(D._muted=g,D._interval&&p._stopFade(D._id),p._webAudio&&D._node?D._node.gain.setValueAtTime(g?0:D._volume,x.ctx.currentTime):D._node&&(D._node.muted=!!x._muted||g),p._emit("mute",D._id))}return p},volume:function(){var g,t,q=this,u=arguments;if(0===
u.length)return q._volume;1===u.length||2===u.length&&void 0===u[1]?0<=q._getSoundIds().indexOf(u[0])?t=parseInt(u[0],10):g=parseFloat(u[0]):2<=u.length&&(g=parseFloat(u[0]),t=parseInt(u[1],10));var v;if(!(void 0!==g&&0<=g&&1>=g))return v=t?q._soundById(t):q._sounds[0],v?v._volume:0;if("loaded"!==q._state||q._playLock)return q._queue.push({event:"volume",action:function(){q.volume.apply(q,u)}}),q;void 0===t&&(q._volume=g);t=q._getSoundIds(t);for(var D=0;D<t.length;D++)(v=q._soundById(t[D]))&&(v._volume=
g,u[2]||q._stopFade(t[D]),q._webAudio&&v._node&&!v._muted?v._node.gain.setValueAtTime(g,x.ctx.currentTime):v._node&&!v._muted&&(v._node.volume=g*x.volume()),q._emit("volume",v._id));return q},fade:function(g,t,q,u){var p=this;if("loaded"!==p._state||p._playLock)return p._queue.push({event:"fade",action:function(){p.fade(g,t,q,u)}}),p;g=parseFloat(g);t=parseFloat(t);q=parseFloat(q);p.volume(g,u);for(var v=p._getSoundIds(u),D=0;D<v.length;D++){var J=p._soundById(v[D]);if(J){if(u||p._stopFade(v[D]),
p._webAudio&&!J._muted){var N=x.ctx.currentTime,qa=N+q/1E3;J._volume=g;J._node.gain.setValueAtTime(g,N);J._node.gain.linearRampToValueAtTime(t,qa)}p._startFadeInterval(J,g,t,q,v[D],void 0===u)}}return p},_startFadeInterval:function(g,t,q,u,v,x){var p=this,D=t,J=q-t;v=Math.abs(J/.01);v=Math.max(4,0<v?u/v:u);var N=Date.now();g._fadeTo=q;g._interval=setInterval(function(){var v=(Date.now()-N)/u;N=Date.now();D+=J*v;D=Math.max(0,D);D=Math.min(1,D);D=Math.round(100*D)/100;p._webAudio?g._volume=D:p.volume(D,
g._id,!0);x&&(p._volume=D);(q<t&&D<=q||q>t&&D>=q)&&(clearInterval(g._interval),g._interval=null,g._fadeTo=null,p.volume(q,g._id),p._emit("fade",g._id))},v)},_stopFade:function(g){var p=this._soundById(g);return p&&p._interval&&(this._webAudio&&p._node.gain.cancelScheduledValues(x.ctx.currentTime),clearInterval(p._interval),p._interval=null,this.volume(p._fadeTo,g),p._fadeTo=null,this._emit("fade",g)),this},loop:function(){var g,t,q,u=arguments;if(0===u.length)return this._loop;if(1===u.length){if("boolean"!=
typeof u[0])return!!(q=this._soundById(parseInt(u[0],10)))&&q._loop;this._loop=g=u[0]}else 2===u.length&&(g=u[0],t=parseInt(u[1],10));t=this._getSoundIds(t);for(u=0;u<t.length;u++)(q=this._soundById(t[u]))&&(q._loop=g,this._webAudio&&q._node&&q._node.bufferSource&&(q._node.bufferSource.loop=g,g&&(q._node.bufferSource.loopStart=q._start||0,q._node.bufferSource.loopEnd=q._stop)));return this},rate:function(){var g,t,q=this,u=arguments;0===u.length?t=q._sounds[0]._id:1===u.length?0<=q._getSoundIds().indexOf(u[0])?
t=parseInt(u[0],10):g=parseFloat(u[0]):2===u.length&&(g=parseFloat(u[0]),t=parseInt(u[1],10));var v;if("number"!=typeof g)return v=q._soundById(t),v?v._rate:q._rate;if("loaded"!==q._state||q._playLock)return q._queue.push({event:"rate",action:function(){q.rate.apply(q,u)}}),q;void 0===t&&(q._rate=g);t=q._getSoundIds(t);for(var D=0;D<t.length;D++)if(v=q._soundById(t[D])){q.playing(t[D])&&(v._rateSeek=q.seek(t[D]),v._playStart=q._webAudio?x.ctx.currentTime:v._playStart);v._rate=g;q._webAudio&&v._node&&
v._node.bufferSource?v._node.bufferSource.playbackRate.setValueAtTime(g,x.ctx.currentTime):v._node&&(v._node.playbackRate=g);var J=q.seek(t[D]);J=1E3*((q._sprite[v._sprite][0]+q._sprite[v._sprite][1])/1E3-J)/Math.abs(v._rate);!q._endTimers[t[D]]&&v._paused||(q._clearTimer(t[D]),q._endTimers[t[D]]=setTimeout(q._ended.bind(q,v),J));q._emit("rate",v._id)}return q},seek:function(){var g,t,q=this,u=arguments;0===u.length?t=q._sounds[0]._id:1===u.length?0<=q._getSoundIds().indexOf(u[0])?t=parseInt(u[0],
10):q._sounds.length&&(t=q._sounds[0]._id,g=parseFloat(u[0])):2===u.length&&(g=parseFloat(u[0]),t=parseInt(u[1],10));if(void 0===t)return q;if("loaded"!==q._state||q._playLock)return q._queue.push({event:"seek",action:function(){q.seek.apply(q,u)}}),q;var v=q._soundById(t);if(v){if(!("number"==typeof g&&0<=g))return q._webAudio?(g=q.playing(t)?x.ctx.currentTime-v._playStart:0,v._seek+((v._rateSeek?v._rateSeek-v._seek:0)+g*Math.abs(v._rate))):v._node.currentTime;var D=q.playing(t);D&&q.pause(t,!0);
v._seek=g;v._ended=!1;q._clearTimer(t);q._webAudio||!v._node||isNaN(v._node.duration)||(v._node.currentTime=g);var J=function(){q._emit("seek",t);D&&q.play(t,!0)};if(D&&!q._webAudio){var N=function(){q._playLock?setTimeout(N,0):J()};setTimeout(N,0)}else J()}return q},playing:function(g){if("number"==typeof g)return g=this._soundById(g),!!g&&!g._paused;for(g=0;g<this._sounds.length;g++)if(!this._sounds[g]._paused)return!0;return!1},duration:function(g){var p=this._duration;g=this._soundById(g);return g&&
(p=this._sprite[g._sprite][1]/1E3),p},state:function(){return this._state},unload:function(){for(var g=this._sounds,t=0;t<g.length;t++)(g[t]._paused||this.stop(g[t]._id),this._webAudio)||(/MSIE |Trident\//.test(x._navigator&&x._navigator.userAgent)||(g[t]._node.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"),g[t]._node.removeEventListener("error",g[t]._errorFn,!1),g[t]._node.removeEventListener(x._canPlayEvent,g[t]._loadFn,!1),x._releaseHtml5Audio(g[t]._node)),
delete g[t]._node,this._clearTimer(g[t]._id);t=x._howls.indexOf(this);0<=t&&x._howls.splice(t,1);g=!0;for(t=0;t<x._howls.length;t++)if(x._howls[t]._src===this._src||0<=this._src.indexOf(x._howls[t]._src)){g=!1;break}return N&&g&&delete N[this._src],x.noAudio=!1,this._state="unloaded",this._sounds=[],null},on:function(g,t,q,u){g=this["_on"+g];return"function"==typeof t&&g.push(u?{id:q,fn:t,once:u}:{id:q,fn:t}),this},off:function(g,t,q){var p=this["_on"+g];if("number"==typeof t&&(q=t,t=null),t||q)for(g=
0;g<p.length;g++){var u=q===p[g].id;if(t===p[g].fn&&u||!t&&u){p.splice(g,1);break}}else if(g)this["_on"+g]=[];else for(t=Object.keys(this),g=0;g<t.length;g++)0===t[g].indexOf("_on")&&Array.isArray(this[t[g]])&&(this[t[g]]=[]);return this},once:function(g,t,q){return this.on(g,t,q,1),this},_emit:function(g,t,q){for(var p=this["_on"+g],u=p.length-1;0<=u;u--)p[u].id&&p[u].id!==t&&"load"!==g||(setTimeout(function(g){g.call(this,t,q)}.bind(this,p[u].fn),0),p[u].once&&this.off(g,p[u].fn,p[u].id));return this._loadQueue(g),
this},_loadQueue:function(g){if(0<this._queue.length){var p=this._queue[0];p.event===g&&(this._queue.shift(),this._loadQueue());g||p.action()}return this},_ended:function(g){var p=g._sprite;if(!this._webAudio&&g._node&&!g._node.paused&&!g._node.ended&&g._node.currentTime<g._stop)return setTimeout(this._ended.bind(this,g),100),this;p=!(!g._loop&&!this._sprite[p][2]);if(this._emit("end",g._id),!this._webAudio&&p&&this.stop(g._id,!0).play(g._id),this._webAudio&&p){this._emit("play",g._id);g._seek=g._start||
0;g._rateSeek=0;g._playStart=x.ctx.currentTime;var q=1E3*(g._stop-g._start)/Math.abs(g._rate);this._endTimers[g._id]=setTimeout(this._ended.bind(this,g),q)}return this._webAudio&&!p&&(g._paused=!0,g._ended=!0,g._seek=g._start||0,g._rateSeek=0,this._clearTimer(g._id),this._cleanBuffer(g._node),x._autoSuspend()),this._webAudio||p||this.stop(g._id,!0),this},_clearTimer:function(g){if(this._endTimers[g]){if("function"!=typeof this._endTimers[g])clearTimeout(this._endTimers[g]);else{var p=this._soundById(g);
p&&p._node&&p._node.removeEventListener("ended",this._endTimers[g],!1)}delete this._endTimers[g]}return this},_soundById:function(g){for(var p=0;p<this._sounds.length;p++)if(g===this._sounds[p]._id)return this._sounds[p];return null},_inactiveSound:function(){this._drain();for(var g=0;g<this._sounds.length;g++)if(this._sounds[g]._ended)return this._sounds[g].reset();return new D(this)},_drain:function(){var g=this._pool,t=0,q;if(!(this._sounds.length<g)){for(q=0;q<this._sounds.length;q++)this._sounds[q]._ended&&
t++;for(q=this._sounds.length-1;0<=q&&!(t<=g);q--)this._sounds[q]._ended&&(this._webAudio&&this._sounds[q]._node&&this._sounds[q]._node.disconnect(0),this._sounds.splice(q,1),t--)}},_getSoundIds:function(g){if(void 0===g){g=[];for(var p=0;p<this._sounds.length;p++)g.push(this._sounds[p]._id);return g}return[g]},_refreshBuffer:function(g){return g._node.bufferSource=x.ctx.createBufferSource(),g._node.bufferSource.buffer=N[this._src],g._panner?g._node.bufferSource.connect(g._panner):g._node.bufferSource.connect(g._node),
g._node.bufferSource.loop=g._loop,g._loop&&(g._node.bufferSource.loopStart=g._start||0,g._node.bufferSource.loopEnd=g._stop||0),g._node.bufferSource.playbackRate.setValueAtTime(g._rate,x.ctx.currentTime),this},_cleanBuffer:function(g){var p=x._navigator&&0<=x._navigator.vendor.indexOf("Apple");if(x._scratchBuffer&&g.bufferSource&&(g.bufferSource.onended=null,g.bufferSource.disconnect(0),p))try{g.bufferSource.buffer=x._scratchBuffer}catch(q){}return g.bufferSource=null,this}};var D=function(g){this._parent=
g;this.init()};D.prototype={init:function(){var g=this._parent;return this._muted=g._muted,this._loop=g._loop,this._volume=g._volume,this._rate=g._rate,this._seek=0,this._paused=!0,this._ended=!0,this._sprite="__default",this._id=++x._counter,g._sounds.push(this),this.create(),this},create:function(){var g=this._parent,t=x._muted||this._muted||this._parent._muted?0:this._volume;return g._webAudio?(this._node=void 0===x.ctx.createGain?x.ctx.createGainNode():x.ctx.createGain(),this._node.gain.setValueAtTime(t,
x.ctx.currentTime),this._node.paused=!0,this._node.connect(x.masterGain)):(this._node=x._obtainHtml5Audio(),this._errorFn=this._errorListener.bind(this),this._node.addEventListener("error",this._errorFn,!1),this._loadFn=this._loadListener.bind(this),this._node.addEventListener(x._canPlayEvent,this._loadFn,!1),this._node.src=g._src,this._node.preload="auto",this._node.volume=t*x.volume(),this._node.load()),this},reset:function(){var g=this._parent;return this._muted=g._muted,this._loop=g._loop,this._volume=
g._volume,this._rate=g._rate,this._seek=0,this._rateSeek=0,this._paused=!0,this._ended=!0,this._sprite="__default",this._id=++x._counter,this},_errorListener:function(){this._parent._emit("loaderror",this._id,this._node.error?this._node.error.code:0);this._node.removeEventListener("error",this._errorFn,!1)},_loadListener:function(){var g=this._parent;g._duration=Math.ceil(10*this._node.duration)/10;0===Object.keys(g._sprite).length&&(g._sprite={__default:[0,1E3*g._duration]});"loaded"!==g._state&&
(g._state="loaded",g._emit("load"),g._loadQueue());this._node.removeEventListener(x._canPlayEvent,this._loadFn,!1)}};var N={},T=function(g){var p=g._src;if(N[p])return g._duration=N[p].duration,void u(g);if(/^data:[^;]+;base64,/.test(p)){for(var q=atob(p.split(",")[1]),x=new Uint8Array(q.length),D=0;D<q.length;++D)x[D]=q.charCodeAt(D);pa(x.buffer,g)}else{var J=new XMLHttpRequest;J.open("GET",p,!0);J.withCredentials=g._xhrWithCredentials;J.responseType="arraybuffer";J.onload=function(){var p=(J.status+
"")[0];if("0"!==p&&"2"!==p&&"3"!==p)return void g._emit("loaderror",null,"Failed loading audio file with status: "+J.status+".");pa(J.response,g)};J.onerror=function(){g._webAudio&&(g._html5=!0,g._webAudio=!1,g._sounds=[],delete N[p],g.load())};v(J)}},v=function(g){try{g.send()}catch(t){g.onerror()}},pa=function(g,t){var p=function(){t._emit("loaderror",null,"Decoding audio data failed.")},v=function(g){g&&0<t._sounds.length?(N[t._src]=g,u(t,g)):p()};"undefined"!=typeof Promise&&1===x.ctx.decodeAudioData.length?
x.ctx.decodeAudioData(g).then(v).catch(p):x.ctx.decodeAudioData(g,v,p)},u=function(g,t){t&&!g._duration&&(g._duration=t.duration);0===Object.keys(g._sprite).length&&(g._sprite={__default:[0,1E3*g._duration]});"loaded"!==g._state&&(g._state="loaded",g._emit("load"),g._loadQueue())},g=function(){if(x.usingWebAudio){try{"undefined"!=typeof AudioContext?x.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?x.ctx=new webkitAudioContext:x.usingWebAudio=!1}catch(q){x.usingWebAudio=!1}x.ctx||(x.usingWebAudio=
!1);var g=/iP(hone|od|ad)/.test(x._navigator&&x._navigator.platform),t=x._navigator&&x._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);t=t?parseInt(t[1],10):null;g&&t&&9>t&&(g=/safari/.test(x._navigator&&x._navigator.userAgent.toLowerCase()),(x._navigator&&x._navigator.standalone&&!g||x._navigator&&!x._navigator.standalone&&!g)&&(x.usingWebAudio=!1));x.usingWebAudio&&(x.masterGain=void 0===x.ctx.createGain?x.ctx.createGainNode():x.ctx.createGain(),x.masterGain.gain.setValueAtTime(x._muted?0:
1,x.ctx.currentTime),x.masterGain.connect(x.ctx.destination));x._setup()}};"function"==typeof define&&define.amd&&define([],function(){return{Howler:x,Howl:J}});"undefined"!=typeof exports&&(exports.Howler=x,exports.Howl=J);"undefined"!=typeof window?(window.HowlerGlobal=X,window.Howler=x,window.Howl=J,window.Sound=D):"undefined"!=typeof global&&(global.HowlerGlobal=X,global.Howler=x,global.Howl=J,global.Sound=D)}();
!function(){HowlerGlobal.prototype._pos=[0,0,0];HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0];HowlerGlobal.prototype.stereo=function(x){if(!this.ctx||!this.ctx.listener)return this;for(var J=this._howls.length-1;0<=J;J--)this._howls[J].stereo(x);return this};HowlerGlobal.prototype.pos=function(x,J,D){return this.ctx&&this.ctx.listener?(J="number"!=typeof J?this._pos[1]:J,D="number"!=typeof D?this._pos[2]:D,"number"!=typeof x?this._pos:(this._pos=[x,J,D],void 0!==this.ctx.listener.positionX?(this.ctx.listener.positionX.setTargetAtTime(this._pos[0],
Howler.ctx.currentTime,.1),this.ctx.listener.positionY.setTargetAtTime(this._pos[1],Howler.ctx.currentTime,.1),this.ctx.listener.positionZ.setTargetAtTime(this._pos[2],Howler.ctx.currentTime,.1)):this.ctx.listener.setPosition(this._pos[0],this._pos[1],this._pos[2]),this)):this};HowlerGlobal.prototype.orientation=function(x,J,D,N,X,v){if(!this.ctx||!this.ctx.listener)return this;var T=this._orientation;return J="number"!=typeof J?T[1]:J,D="number"!=typeof D?T[2]:D,N="number"!=typeof N?T[3]:N,X="number"!=
typeof X?T[4]:X,v="number"!=typeof v?T[5]:v,"number"!=typeof x?T:(this._orientation=[x,J,D,N,X,v],void 0!==this.ctx.listener.forwardX?(this.ctx.listener.forwardX.setTargetAtTime(x,Howler.ctx.currentTime,.1),this.ctx.listener.forwardY.setTargetAtTime(J,Howler.ctx.currentTime,.1),this.ctx.listener.forwardZ.setTargetAtTime(D,Howler.ctx.currentTime,.1),this.ctx.listener.upX.setTargetAtTime(x,Howler.ctx.currentTime,.1),this.ctx.listener.upY.setTargetAtTime(J,Howler.ctx.currentTime,.1),this.ctx.listener.upZ.setTargetAtTime(D,
Howler.ctx.currentTime,.1)):this.ctx.listener.setOrientation(x,J,D,N,X,v),this)};Howl.prototype.init=function(x){return function(J){return this._orientation=J.orientation||[1,0,0],this._stereo=J.stereo||null,this._pos=J.pos||null,this._pannerAttr={coneInnerAngle:void 0!==J.coneInnerAngle?J.coneInnerAngle:360,coneOuterAngle:void 0!==J.coneOuterAngle?J.coneOuterAngle:360,coneOuterGain:void 0!==J.coneOuterGain?J.coneOuterGain:0,distanceModel:void 0!==J.distanceModel?J.distanceModel:"inverse",maxDistance:void 0!==
J.maxDistance?J.maxDistance:1E4,panningModel:void 0!==J.panningModel?J.panningModel:"HRTF",refDistance:void 0!==J.refDistance?J.refDistance:1,rolloffFactor:void 0!==J.rolloffFactor?J.rolloffFactor:1},this._onstereo=J.onstereo?[{fn:J.onstereo}]:[],this._onpos=J.onpos?[{fn:J.onpos}]:[],this._onorientation=J.onorientation?[{fn:J.onorientation}]:[],x.call(this,J)}}(Howl.prototype.init);Howl.prototype.stereo=function(x,J){var D=this;if(!D._webAudio)return D;if("loaded"!==D._state)return D._queue.push({event:"stereo",
action:function(){D.stereo(x,J)}}),D;var N=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===J){if("number"!=typeof x)return D._stereo;D._stereo=x;D._pos=[x,0,0]}for(var T=D._getSoundIds(J),v=0;v<T.length;v++){var pa=D._soundById(T[v]);if(pa){if("number"!=typeof x)return pa._stereo;pa._stereo=x;pa._pos=[x,0,0];pa._node&&(pa._pannerAttr.panningModel="equalpower",pa._panner&&pa._panner.pan||X(pa,N),"spatial"===N?void 0!==pa._panner.positionX?(pa._panner.positionX.setValueAtTime(x,
Howler.ctx.currentTime),pa._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),pa._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):pa._panner.setPosition(x,0,0):pa._panner.pan.setValueAtTime(x,Howler.ctx.currentTime));D._emit("stereo",pa._id)}}return D};Howl.prototype.pos=function(x,J,D,N){var T=this;if(!T._webAudio)return T;if("loaded"!==T._state)return T._queue.push({event:"pos",action:function(){T.pos(x,J,D,N)}}),T;if(J="number"!=typeof J?0:J,D="number"!=typeof D?-.5:D,void 0===
N){if("number"!=typeof x)return T._pos;T._pos=[x,J,D]}for(var v=T._getSoundIds(N),pa=0;pa<v.length;pa++){var u=T._soundById(v[pa]);if(u){if("number"!=typeof x)return u._pos;u._pos=[x,J,D];u._node&&(u._panner&&!u._panner.pan||X(u,"spatial"),void 0!==u._panner.positionX?(u._panner.positionX.setValueAtTime(x,Howler.ctx.currentTime),u._panner.positionY.setValueAtTime(J,Howler.ctx.currentTime),u._panner.positionZ.setValueAtTime(D,Howler.ctx.currentTime)):u._panner.setPosition(x,J,D));T._emit("pos",u._id)}}return T};
Howl.prototype.orientation=function(x,J,D,N){var T=this;if(!T._webAudio)return T;if("loaded"!==T._state)return T._queue.push({event:"orientation",action:function(){T.orientation(x,J,D,N)}}),T;if(J="number"!=typeof J?T._orientation[1]:J,D="number"!=typeof D?T._orientation[2]:D,void 0===N){if("number"!=typeof x)return T._orientation;T._orientation=[x,J,D]}for(var v=T._getSoundIds(N),pa=0;pa<v.length;pa++){var u=T._soundById(v[pa]);if(u){if("number"!=typeof x)return u._orientation;u._orientation=[x,
J,D];u._node&&(u._panner||(u._pos||(u._pos=T._pos||[0,0,-.5]),X(u,"spatial")),void 0!==u._panner.orientationX?(u._panner.orientationX.setValueAtTime(x,Howler.ctx.currentTime),u._panner.orientationY.setValueAtTime(J,Howler.ctx.currentTime),u._panner.orientationZ.setValueAtTime(D,Howler.ctx.currentTime)):u._panner.setOrientation(x,J,D));T._emit("orientation",u._id)}}return T};Howl.prototype.pannerAttr=function(){var x,J,D=arguments;if(!this._webAudio)return this;if(0===D.length)return this._pannerAttr;
if(1===D.length){if("object"!=typeof D[0])return J=this._soundById(parseInt(D[0],10)),J?J._pannerAttr:this._pannerAttr;var N=D[0];void 0===x&&(N.pannerAttr||(N.pannerAttr={coneInnerAngle:N.coneInnerAngle,coneOuterAngle:N.coneOuterAngle,coneOuterGain:N.coneOuterGain,distanceModel:N.distanceModel,maxDistance:N.maxDistance,refDistance:N.refDistance,rolloffFactor:N.rolloffFactor,panningModel:N.panningModel}),this._pannerAttr={coneInnerAngle:void 0!==N.pannerAttr.coneInnerAngle?N.pannerAttr.coneInnerAngle:
this._coneInnerAngle,coneOuterAngle:void 0!==N.pannerAttr.coneOuterAngle?N.pannerAttr.coneOuterAngle:this._coneOuterAngle,coneOuterGain:void 0!==N.pannerAttr.coneOuterGain?N.pannerAttr.coneOuterGain:this._coneOuterGain,distanceModel:void 0!==N.pannerAttr.distanceModel?N.pannerAttr.distanceModel:this._distanceModel,maxDistance:void 0!==N.pannerAttr.maxDistance?N.pannerAttr.maxDistance:this._maxDistance,refDistance:void 0!==N.pannerAttr.refDistance?N.pannerAttr.refDistance:this._refDistance,rolloffFactor:void 0!==
N.pannerAttr.rolloffFactor?N.pannerAttr.rolloffFactor:this._rolloffFactor,panningModel:void 0!==N.pannerAttr.panningModel?N.pannerAttr.panningModel:this._panningModel})}else 2===D.length&&(N=D[0],x=parseInt(D[1],10));x=this._getSoundIds(x);for(D=0;D<x.length;D++)if(J=this._soundById(x[D])){var T=J._pannerAttr;T={coneInnerAngle:void 0!==N.coneInnerAngle?N.coneInnerAngle:T.coneInnerAngle,coneOuterAngle:void 0!==N.coneOuterAngle?N.coneOuterAngle:T.coneOuterAngle,coneOuterGain:void 0!==N.coneOuterGain?
N.coneOuterGain:T.coneOuterGain,distanceModel:void 0!==N.distanceModel?N.distanceModel:T.distanceModel,maxDistance:void 0!==N.maxDistance?N.maxDistance:T.maxDistance,refDistance:void 0!==N.refDistance?N.refDistance:T.refDistance,rolloffFactor:void 0!==N.rolloffFactor?N.rolloffFactor:T.rolloffFactor,panningModel:void 0!==N.panningModel?N.panningModel:T.panningModel};var v=J._panner;v?(v.coneInnerAngle=T.coneInnerAngle,v.coneOuterAngle=T.coneOuterAngle,v.coneOuterGain=T.coneOuterGain,v.distanceModel=
T.distanceModel,v.maxDistance=T.maxDistance,v.refDistance=T.refDistance,v.rolloffFactor=T.rolloffFactor,v.panningModel=T.panningModel):(J._pos||(J._pos=this._pos||[0,0,-.5]),X(J,"spatial"))}return this};Sound.prototype.init=function(x){return function(){var J=this._parent;this._orientation=J._orientation;this._stereo=J._stereo;this._pos=J._pos;this._pannerAttr=J._pannerAttr;x.call(this);this._stereo?J.stereo(this._stereo):this._pos&&J.pos(this._pos[0],this._pos[1],this._pos[2],this._id)}}(Sound.prototype.init);
Sound.prototype.reset=function(x){return function(){var J=this._parent;return this._orientation=J._orientation,this._stereo=J._stereo,this._pos=J._pos,this._pannerAttr=J._pannerAttr,this._stereo?J.stereo(this._stereo):this._pos?J.pos(this._pos[0],this._pos[1],this._pos[2],this._id):this._panner&&(this._panner.disconnect(0),this._panner=void 0,J._refreshBuffer(this)),x.call(this)}}(Sound.prototype.reset);var X=function(x,J){"spatial"===(J||"spatial")?(x._panner=Howler.ctx.createPanner(),x._panner.coneInnerAngle=
x._pannerAttr.coneInnerAngle,x._panner.coneOuterAngle=x._pannerAttr.coneOuterAngle,x._panner.coneOuterGain=x._pannerAttr.coneOuterGain,x._panner.distanceModel=x._pannerAttr.distanceModel,x._panner.maxDistance=x._pannerAttr.maxDistance,x._panner.refDistance=x._pannerAttr.refDistance,x._panner.rolloffFactor=x._pannerAttr.rolloffFactor,x._panner.panningModel=x._pannerAttr.panningModel,void 0!==x._panner.positionX?(x._panner.positionX.setValueAtTime(x._pos[0],Howler.ctx.currentTime),x._panner.positionY.setValueAtTime(x._pos[1],
Howler.ctx.currentTime),x._panner.positionZ.setValueAtTime(x._pos[2],Howler.ctx.currentTime)):x._panner.setPosition(x._pos[0],x._pos[1],x._pos[2]),void 0!==x._panner.orientationX?(x._panner.orientationX.setValueAtTime(x._orientation[0],Howler.ctx.currentTime),x._panner.orientationY.setValueAtTime(x._orientation[1],Howler.ctx.currentTime),x._panner.orientationZ.setValueAtTime(x._orientation[2],Howler.ctx.currentTime)):x._panner.setOrientation(x._orientation[0],x._orientation[1],x._orientation[2])):
(x._panner=Howler.ctx.createStereoPanner(),x._panner.pan.setValueAtTime(x._stereo,Howler.ctx.currentTime));x._panner.connect(x._node);x._paused||x._parent.pause(x._id,!0).play(x._id,!0)}}();
!function(X){"object"==typeof exports&&"undefined"!=typeof module?module.exports=X():"function"==typeof define&&define.amd?define([],X):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).pako=X()}(function(){return function x(J,D,N){function T(u,g){if(!D[u]){if(!J[u]){var p="function"==typeof require&&require;if(!g&&p)return p(u,!0);if(v)return v(u,!0);g=Error("Cannot find module '"+u+"'");throw g.code="MODULE_NOT_FOUND",g;}g=D[u]={exports:{}};
J[u][0].call(g.exports,function(g){var p=J[u][1][g];return T(p?p:g)},g,g.exports,x,J,D,N)}return D[u].exports}for(var v="function"==typeof require&&require,pa=0;pa<N.length;pa++)T(N[pa]);return T}({1:[function(x,J,D){function N(x){if(!(this instanceof N))return new N(x);x=this.options=pa.assign({level:qa,method:Ia,chunkSize:16384,windowBits:15,memLevel:8,strategy:Ca,to:""},x||{});x.raw&&0<x.windowBits?x.windowBits=-x.windowBits:x.gzip&&0<x.windowBits&&16>x.windowBits&&(x.windowBits+=16);this.err=
0;this.msg="";this.ended=!1;this.chunks=[];this.strm=new p;this.strm.avail_out=0;var D=v.deflateInit2(this.strm,x.level,x.method,x.windowBits,x.memLevel,x.strategy);if(D!==q)throw Error(g[D]);if(x.header&&v.deflateSetHeader(this.strm,x.header),x.dictionary){var J;if(J="string"==typeof x.dictionary?u.string2buf(x.dictionary):"[object ArrayBuffer]"===t.call(x.dictionary)?new Uint8Array(x.dictionary):x.dictionary,D=v.deflateSetDictionary(this.strm,J),D!==q)throw Error(g[D]);this._dict_set=!0}}function T(g,
p){p=new N(p);if(p.push(g,!0),p.err)throw p.msg;return p.result}var v=x("./zlib/deflate"),pa=x("./utils/common"),u=x("./utils/strings"),g=x("./zlib/messages"),p=x("./zlib/zstream"),t=Object.prototype.toString,q=0,qa=-1,Ca=0,Ia=8;N.prototype.push=function(g,p){var x,D=this.strm,J=this.options.chunkSize;if(this.ended)return!1;p=p===~~p?p:!0===p?4:0;"string"==typeof g?D.input=u.string2buf(g):"[object ArrayBuffer]"===t.call(g)?D.input=new Uint8Array(g):D.input=g;D.next_in=0;D.avail_in=D.input.length;
do{if(0===D.avail_out&&(D.output=new pa.Buf8(J),D.next_out=0,D.avail_out=J),x=v.deflate(D,p),1!==x&&x!==q)return this.onEnd(x),this.ended=!0,!1;0!==D.avail_out&&(0!==D.avail_in||4!==p&&2!==p)||("string"===this.options.to?this.onData(u.buf2binstring(pa.shrinkBuf(D.output,D.next_out))):this.onData(pa.shrinkBuf(D.output,D.next_out)))}while((0<D.avail_in||0===D.avail_out)&&1!==x);return 4===p?(x=v.deflateEnd(this.strm),this.onEnd(x),this.ended=!0,x===q):2!==p||(this.onEnd(q),D.avail_out=0,!0)};N.prototype.onData=
function(g){this.chunks.push(g)};N.prototype.onEnd=function(g){g===q&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=pa.flattenChunks(this.chunks));this.chunks=[];this.err=g;this.msg=this.strm.msg};D.Deflate=N;D.deflate=T;D.deflateRaw=function(g,p){return p=p||{},p.raw=!0,T(g,p)};D.gzip=function(g,p){return p=p||{},p.gzip=!0,T(g,p)}},{"./utils/common":3,"./utils/strings":4,"./zlib/deflate":8,"./zlib/messages":13,"./zlib/zstream":15}],2:[function(x,J,D){function N(u){if(!(this instanceof
N))return new N(u);var x=this.options=pa.assign({chunkSize:16384,windowBits:0,to:""},u||{});x.raw&&0<=x.windowBits&&16>x.windowBits&&(x.windowBits=-x.windowBits,0===x.windowBits&&(x.windowBits=-15));!(0<=x.windowBits&&16>x.windowBits)||u&&u.windowBits||(x.windowBits+=32);15<x.windowBits&&48>x.windowBits&&0===(15&x.windowBits)&&(x.windowBits|=15);this.err=0;this.msg="";this.ended=!1;this.chunks=[];this.strm=new t;this.strm.avail_out=0;u=v.inflateInit2(this.strm,x.windowBits);if(u!==g.Z_OK)throw Error(p[u]);
this.header=new q;v.inflateGetHeader(this.strm,this.header)}function T(g,p){p=new N(p);if(p.push(g,!0),p.err)throw p.msg;return p.result}var v=x("./zlib/inflate"),pa=x("./utils/common"),u=x("./utils/strings"),g=x("./zlib/constants"),p=x("./zlib/messages"),t=x("./zlib/zstream"),q=x("./zlib/gzheader"),qa=Object.prototype.toString;N.prototype.push=function(p,t){var q,x,D,J,N,M=this.strm,T=this.options.chunkSize,Ca=this.options.dictionary,ja=!1;if(this.ended)return!1;t=t===~~t?t:!0===t?g.Z_FINISH:g.Z_NO_FLUSH;
"string"==typeof p?M.input=u.binstring2buf(p):"[object ArrayBuffer]"===qa.call(p)?M.input=new Uint8Array(p):M.input=p;M.next_in=0;M.avail_in=M.input.length;do{if(0===M.avail_out&&(M.output=new pa.Buf8(T),M.next_out=0,M.avail_out=T),q=v.inflate(M,g.Z_NO_FLUSH),q===g.Z_NEED_DICT&&Ca&&(N="string"==typeof Ca?u.string2buf(Ca):"[object ArrayBuffer]"===qa.call(Ca)?new Uint8Array(Ca):Ca,q=v.inflateSetDictionary(this.strm,N)),q===g.Z_BUF_ERROR&&!0===ja&&(q=g.Z_OK,ja=!1),q!==g.Z_STREAM_END&&q!==g.Z_OK)return this.onEnd(q),
this.ended=!0,!1;M.next_out&&(0!==M.avail_out&&q!==g.Z_STREAM_END&&(0!==M.avail_in||t!==g.Z_FINISH&&t!==g.Z_SYNC_FLUSH)||("string"===this.options.to?(x=u.utf8border(M.output,M.next_out),D=M.next_out-x,J=u.buf2string(M.output,x),M.next_out=D,M.avail_out=T-D,D&&pa.arraySet(M.output,M.output,x,D,0),this.onData(J)):this.onData(pa.shrinkBuf(M.output,M.next_out))));0===M.avail_in&&0===M.avail_out&&(ja=!0)}while((0<M.avail_in||0===M.avail_out)&&q!==g.Z_STREAM_END);return q===g.Z_STREAM_END&&(t=g.Z_FINISH),
t===g.Z_FINISH?(q=v.inflateEnd(this.strm),this.onEnd(q),this.ended=!0,q===g.Z_OK):t!==g.Z_SYNC_FLUSH||(this.onEnd(g.Z_OK),M.avail_out=0,!0)};N.prototype.onData=function(g){this.chunks.push(g)};N.prototype.onEnd=function(p){p===g.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=pa.flattenChunks(this.chunks));this.chunks=[];this.err=p;this.msg=this.strm.msg};D.Inflate=N;D.inflate=T;D.inflateRaw=function(g,p){return p=p||{},p.raw=!0,T(g,p)};D.ungzip=T},{"./utils/common":3,
"./utils/strings":4,"./zlib/constants":6,"./zlib/gzheader":9,"./zlib/inflate":11,"./zlib/messages":13,"./zlib/zstream":15}],3:[function(x,J,D){x="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;D.assign=function(v){for(var x=Array.prototype.slice.call(arguments,1);x.length;){var u=x.shift();if(u){if("object"!=typeof u)throw new TypeError(u+"must be non-object");for(var g in u)u.hasOwnProperty(g)&&(v[g]=u[g])}}return v};D.shrinkBuf=function(v,x){return v.length===
x?v:v.subarray?v.subarray(0,x):(v.length=x,v)};var N={arraySet:function(v,x,u,g,p){if(x.subarray&&v.subarray)return void v.set(x.subarray(u,u+g),p);for(var t=0;t<g;t++)v[p+t]=x[u+t]},flattenChunks:function(v){var x,u;var g=u=0;for(x=v.length;g<x;g++)u+=v[g].length;var p=new Uint8Array(u);g=u=0;for(x=v.length;g<x;g++){var t=v[g];p.set(t,u);u+=t.length}return p}},T={arraySet:function(v,x,u,g,p){for(var t=0;t<g;t++)v[p+t]=x[u+t]},flattenChunks:function(v){return[].concat.apply([],v)}};D.setTyped=function(v){v?
(D.Buf8=Uint8Array,D.Buf16=Uint16Array,D.Buf32=Int32Array,D.assign(D,N)):(D.Buf8=Array,D.Buf16=Array,D.Buf32=Array,D.assign(D,T))};D.setTyped(x)},{}],4:[function(x,J,D){function N(g,p){if(65537>p&&(g.subarray&&pa||!g.subarray&&v))return String.fromCharCode.apply(null,T.shrinkBuf(g,p));for(var t="",q=0;q<p;q++)t+=String.fromCharCode(g[q]);return t}var T=x("./common"),v=!0,pa=!0;try{String.fromCharCode.apply(null,[0])}catch(g){v=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(g){pa=!1}var u=
new T.Buf8(256);for(x=0;256>x;x++)u[x]=252<=x?6:248<=x?5:240<=x?4:224<=x?3:192<=x?2:1;u[254]=u[254]=1;D.string2buf=function(g){var p,t,q,u=g.length,v=0;for(t=0;t<u;t++){var x=g.charCodeAt(t);55296===(64512&x)&&t+1<u&&(p=g.charCodeAt(t+1),56320===(64512&p)&&(x=65536+(x-55296<<10)+(p-56320),t++));v+=128>x?1:2048>x?2:65536>x?3:4}var D=new T.Buf8(v);for(t=q=0;q<v;t++)x=g.charCodeAt(t),55296===(64512&x)&&t+1<u&&(p=g.charCodeAt(t+1),56320===(64512&p)&&(x=65536+(x-55296<<10)+(p-56320),t++)),128>x?D[q++]=
x:2048>x?(D[q++]=192|x>>>6,D[q++]=128|63&x):65536>x?(D[q++]=224|x>>>12,D[q++]=128|x>>>6&63,D[q++]=128|63&x):(D[q++]=240|x>>>18,D[q++]=128|x>>>12&63,D[q++]=128|x>>>6&63,D[q++]=128|63&x);return D};D.buf2binstring=function(g){return N(g,g.length)};D.binstring2buf=function(g){for(var p=new T.Buf8(g.length),t=0,q=p.length;t<q;t++)p[t]=g.charCodeAt(t);return p};D.buf2string=function(g,p){var t,q,v,x=p||g.length,D=Array(2*x);for(p=t=0;p<x;)if(q=g[p++],128>q)D[t++]=q;else if(v=u[q],4<v)D[t++]=65533,p+=v-
1;else{for(q&=2===v?31:3===v?15:7;1<v&&p<x;)q=q<<6|63&g[p++],v--;1<v?D[t++]=65533:65536>q?D[t++]=q:(q-=65536,D[t++]=55296|q>>10&1023,D[t++]=56320|1023&q)}return N(D,t)};D.utf8border=function(g,p){var t;p=p||g.length;p>g.length&&(p=g.length);for(t=p-1;0<=t&&128===(192&g[t]);)t--;return 0>t?p:0===t?p:t+u[g[t]]>p?t:p}},{"./common":3}],5:[function(x,J,D){J.exports=function(x,D,v,J){var u=65535&x|0;x=x>>>16&65535|0;for(var g;0!==v;){g=2E3<v?2E3:v;v-=g;do u=u+D[J++]|0,x=x+u|0;while(--g);u%=65521;x%=65521}return u|
x<<16|0}},{}],6:[function(x,J,D){J.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],7:[function(x,J,D){var N=function(){for(var x,v=[],D=0;256>D;D++){x=D;
for(var u=0;8>u;u++)x=1&x?3988292384^x>>>1:x>>>1;v[D]=x}return v}();J.exports=function(x,v,D,u){D=u+D;for(x^=-1;u<D;u++)x=x>>>8^N[255&(x^v[u])];return x^-1}},{}],8:[function(x,J,D){function N(g,p){return g.msg=$b[p],p}function T(g){for(var p=g.length;0<=--p;)g[p]=0}function v(g){var p=g.state,y=p.pending;y>g.avail_out&&(y=g.avail_out);0!==y&&(aa.arraySet(g.output,p.pending_buf,p.pending_out,y,g.next_out),g.next_out+=y,p.pending_out+=y,g.total_out+=y,g.avail_out-=y,p.pending-=y,0===p.pending&&(p.pending_out=
0))}function pa(g,p){Kb._tr_flush_block(g,0<=g.block_start?g.block_start:-1,g.strstart-g.block_start,p);g.block_start=g.strstart;v(g.strm)}function u(g,p){g.pending_buf[g.pending++]=p}function g(g,p){g.pending_buf[g.pending++]=p>>>8&255;g.pending_buf[g.pending++]=255&p}function p(g,p){var y,r,t=g.max_chain_length,q=g.strstart,u=g.prev_length,v=g.nice_match,x=g.strstart>g.w_size-Qa?g.strstart-(g.w_size-Qa):0,w=g.window,B=g.w_mask,D=g.prev,L=g.strstart+Sa,J=w[q+u-1],M=w[q+u];g.prev_length>=g.good_match&&
(t>>=2);v>g.lookahead&&(v=g.lookahead);do if(y=p,w[y+u]===M&&w[y+u-1]===J&&w[y]===w[q]&&w[++y]===w[q+1]){q+=2;for(y++;w[++q]===w[++y]&&w[++q]===w[++y]&&w[++q]===w[++y]&&w[++q]===w[++y]&&w[++q]===w[++y]&&w[++q]===w[++y]&&w[++q]===w[++y]&&w[++q]===w[++y]&&q<L;);if(r=Sa-(L-q),q=L-Sa,r>u){if(g.match_start=p,u=r,r>=v)break;J=w[q+u-1];M=w[q+u]}}while((p=D[p&B])>x&&0!==--t);return u<=g.lookahead?u:g.lookahead}function t(g){var p,y,z=g.w_size;do{if(y=g.window_size-g.lookahead-g.strstart,g.strstart>=z+(z-
Qa)){aa.arraySet(g.window,g.window,z,z,0);g.match_start-=z;g.strstart-=z;g.block_start-=z;var t=p=g.hash_size;do{var q=g.head[--t];g.head[t]=q>=z?q-z:0}while(--p);t=p=z;do q=g.prev[--t],g.prev[t]=q>=z?q-z:0;while(--p);y+=z}if(0===g.strm.avail_in)break;t=g.strm;q=g.window;var u=g.strstart+g.lookahead,v=t.avail_in;if(p=(v>y&&(v=y),0===v?0:(t.avail_in-=v,aa.arraySet(q,t.input,t.next_in,v,u),1===t.state.wrap?t.adler=M(t.adler,q,v,u):2===t.state.wrap&&(t.adler=ua(t.adler,q,v,u)),t.next_in+=v,t.total_in+=
v,v)),g.lookahead+=p,g.lookahead+g.insert>=r)for(y=g.strstart-g.insert,g.ins_h=g.window[y],g.ins_h=(g.ins_h<<g.hash_shift^g.window[y+1])&g.hash_mask;g.insert&&(g.ins_h=(g.ins_h<<g.hash_shift^g.window[y+r-1])&g.hash_mask,g.prev[y&g.w_mask]=g.head[g.ins_h],g.head[g.ins_h]=y,y++,g.insert--,!(g.lookahead+g.insert<r)););}while(g.lookahead<Qa&&0!==g.strm.avail_in)}function q(g,q){for(var y,z;;){if(g.lookahead<Qa){if(t(g),g.lookahead<Qa&&q===ja)return L;if(0===g.lookahead)break}if(y=0,g.lookahead>=r&&(g.ins_h=
(g.ins_h<<g.hash_shift^g.window[g.strstart+r-1])&g.hash_mask,y=g.prev[g.strstart&g.w_mask]=g.head[g.ins_h],g.head[g.ins_h]=g.strstart),0!==y&&g.strstart-y<=g.w_size-Qa&&(g.match_length=p(g,y)),g.match_length>=r)if(z=Kb._tr_tally(g,g.strstart-g.match_start,g.match_length-r),g.lookahead-=g.match_length,g.match_length<=g.max_lazy_match&&g.lookahead>=r){g.match_length--;do g.strstart++,g.ins_h=(g.ins_h<<g.hash_shift^g.window[g.strstart+r-1])&g.hash_mask,y=g.prev[g.strstart&g.w_mask]=g.head[g.ins_h],g.head[g.ins_h]=
g.strstart;while(0!==--g.match_length);g.strstart++}else g.strstart+=g.match_length,g.match_length=0,g.ins_h=g.window[g.strstart],g.ins_h=(g.ins_h<<g.hash_shift^g.window[g.strstart+1])&g.hash_mask;else z=Kb._tr_tally(g,0,g.window[g.strstart]),g.lookahead--,g.strstart++;if(z&&(pa(g,!1),0===g.strm.avail_out))return L}return g.insert=g.strstart<r-1?g.strstart:r-1,q===ia?(pa(g,!0),0===g.strm.avail_out?wa:zb):g.last_lit&&(pa(g,!1),0===g.strm.avail_out)?L:Xa}function qa(g,q){for(var y,z,u;;){if(g.lookahead<
Qa){if(t(g),g.lookahead<Qa&&q===ja)return L;if(0===g.lookahead)break}if(y=0,g.lookahead>=r&&(g.ins_h=(g.ins_h<<g.hash_shift^g.window[g.strstart+r-1])&g.hash_mask,y=g.prev[g.strstart&g.w_mask]=g.head[g.ins_h],g.head[g.ins_h]=g.strstart),g.prev_length=g.match_length,g.prev_match=g.match_start,g.match_length=r-1,0!==y&&g.prev_length<g.max_lazy_match&&g.strstart-y<=g.w_size-Qa&&(g.match_length=p(g,y),5>=g.match_length&&(g.strategy===ka||g.match_length===r&&4096<g.strstart-g.match_start)&&(g.match_length=
r-1)),g.prev_length>=r&&g.match_length<=g.prev_length){u=g.strstart+g.lookahead-r;z=Kb._tr_tally(g,g.strstart-1-g.prev_match,g.prev_length-r);g.lookahead-=g.prev_length-1;g.prev_length-=2;do++g.strstart<=u&&(g.ins_h=(g.ins_h<<g.hash_shift^g.window[g.strstart+r-1])&g.hash_mask,y=g.prev[g.strstart&g.w_mask]=g.head[g.ins_h],g.head[g.ins_h]=g.strstart);while(0!==--g.prev_length);if(g.match_available=0,g.match_length=r-1,g.strstart++,z&&(pa(g,!1),0===g.strm.avail_out))return L}else if(g.match_available){if(z=
Kb._tr_tally(g,0,g.window[g.strstart-1]),z&&pa(g,!1),g.strstart++,g.lookahead--,0===g.strm.avail_out)return L}else g.match_available=1,g.strstart++,g.lookahead--}return g.match_available&&(Kb._tr_tally(g,0,g.window[g.strstart-1]),g.match_available=0),g.insert=g.strstart<r-1?g.strstart:r-1,q===ia?(pa(g,!0),0===g.strm.avail_out?wa:zb):g.last_lit&&(pa(g,!1),0===g.strm.avail_out)?L:Xa}function Ca(g,p,r,t,q){this.good_length=g;this.max_lazy=p;this.nice_length=r;this.max_chain=t;this.func=q}function Ia(){this.strm=
null;this.status=0;this.pending_buf=null;this.wrap=this.pending=this.pending_out=this.pending_buf_size=0;this.gzhead=null;this.gzindex=0;this.method=Ba;this.last_flush=-1;this.w_mask=this.w_bits=this.w_size=0;this.window=null;this.window_size=0;this.head=this.prev=null;this.nice_match=this.good_match=this.strategy=this.level=this.max_lazy_match=this.max_chain_length=this.prev_length=this.lookahead=this.match_start=this.strstart=this.match_available=this.prev_match=this.match_length=this.block_start=
this.hash_shift=this.hash_mask=this.hash_bits=this.hash_size=this.ins_h=0;this.dyn_ltree=new aa.Buf16(2*B);this.dyn_dtree=new aa.Buf16(2*(2*tc+1));this.bl_tree=new aa.Buf16(2*(2*w+1));T(this.dyn_ltree);T(this.dyn_dtree);T(this.bl_tree);this.bl_desc=this.d_desc=this.l_desc=null;this.bl_count=new aa.Buf16(Na+1);this.heap=new aa.Buf16(2*Ub+1);T(this.heap);this.heap_max=this.heap_len=0;this.depth=new aa.Buf16(2*Ub+1);T(this.depth);this.bi_valid=this.bi_buf=this.insert=this.matches=this.static_len=this.opt_len=
this.d_buf=this.last_lit=this.lit_bufsize=this.l_buf=0}function ha(g){var p;return g&&g.state?(g.total_in=g.total_out=0,g.data_type=Xb,p=g.state,p.pending=0,p.pending_out=0,0>p.wrap&&(p.wrap=-p.wrap),p.status=p.wrap?Y:U,g.adler=2===p.wrap?0:1,p.last_flush=ja,Kb._tr_init(p),ba):N(g,fa)}function $a(g){var p=ha(g);p===ba&&(g=g.state,g.window_size=2*g.w_size,T(g.head),g.max_lazy_match=pb[g.level].max_lazy,g.good_match=pb[g.level].good_length,g.nice_match=pb[g.level].nice_length,g.max_chain_length=pb[g.level].max_chain,
g.strstart=0,g.block_start=0,g.lookahead=0,g.insert=0,g.match_length=g.prev_length=r-1,g.match_available=0,g.ins_h=0);return p}function Pb(g,p,t,q,u,v){if(!g)return fa;var z=1;if(p===ma&&(p=6),0>q?(z=0,q=-q):15<q&&(z=2,q-=16),1>u||u>ra||t!==Ba||8>q||15<q||0>p||9<p||0>v||v>uc)return N(g,fa);8===q&&(q=9);var y=new Ia;return g.state=y,y.strm=g,y.wrap=z,y.gzhead=null,y.w_bits=q,y.w_size=1<<y.w_bits,y.w_mask=y.w_size-1,y.hash_bits=u+7,y.hash_size=1<<y.hash_bits,y.hash_mask=y.hash_size-1,y.hash_shift=~~((y.hash_bits+
r-1)/r),y.window=new aa.Buf8(2*y.w_size),y.head=new aa.Buf16(y.hash_size),y.prev=new aa.Buf16(y.w_size),y.lit_bufsize=1<<u+6,y.pending_buf_size=4*y.lit_bufsize,y.pending_buf=new aa.Buf8(y.pending_buf_size),y.d_buf=1*y.lit_bufsize,y.l_buf=3*y.lit_bufsize,y.level=p,y.strategy=v,y.method=t,$a(g)}var aa=x("../utils/common"),Kb=x("./trees"),M=x("./adler32"),ua=x("./crc32"),$b=x("./messages"),ja=0,ia=4,ba=0,fa=-2,ma=-1,ka=1,uc=4,Xb=2,Ba=8,ra=9,Ub=286,tc=30,w=19,B=2*Ub+1,Na=15,r=3,Sa=258,Qa=Sa+r+1,Y=42,
U=113,L=1,Xa=2,wa=3,zb=4;var pb=[new Ca(0,0,0,0,function(g,p){var r=65535;for(r>g.pending_buf_size-5&&(r=g.pending_buf_size-5);;){if(1>=g.lookahead){if(t(g),0===g.lookahead&&p===ja)return L;if(0===g.lookahead)break}g.strstart+=g.lookahead;g.lookahead=0;var q=g.block_start+r;if((0===g.strstart||g.strstart>=q)&&(g.lookahead=g.strstart-q,g.strstart=q,pa(g,!1),0===g.strm.avail_out)||g.strstart-g.block_start>=g.w_size-Qa&&(pa(g,!1),0===g.strm.avail_out))return L}return g.insert=0,p===ia?(pa(g,!0),0===
g.strm.avail_out?wa:zb):(g.strstart>g.block_start&&pa(g,!1),L)}),new Ca(4,4,8,4,q),new Ca(4,5,16,8,q),new Ca(4,6,32,32,q),new Ca(4,4,16,16,qa),new Ca(8,16,32,32,qa),new Ca(8,16,128,128,qa),new Ca(8,32,128,256,qa),new Ca(32,128,258,1024,qa),new Ca(32,258,258,4096,qa)];D.deflateInit=function(g,p){return Pb(g,p,Ba,15,8,0)};D.deflateInit2=Pb;D.deflateReset=$a;D.deflateResetKeep=ha;D.deflateSetHeader=function(g,p){return g&&g.state?2!==g.state.wrap?fa:(g.state.gzhead=p,ba):fa};D.deflate=function(p,q){var y,
z;if(!p||!p.state||5<q||0>q)return p?N(p,fa):fa;if(z=p.state,!p.output||!p.input&&0!==p.avail_in||666===z.status&&q!==ia)return N(p,0===p.avail_out?-5:fa);if(z.strm=p,y=z.last_flush,z.last_flush=q,z.status===Y)if(2===z.wrap)p.adler=0,u(z,31),u(z,139),u(z,8),z.gzhead?(u(z,(z.gzhead.text?1:0)+(z.gzhead.hcrc?2:0)+(z.gzhead.extra?4:0)+(z.gzhead.name?8:0)+(z.gzhead.comment?16:0)),u(z,255&z.gzhead.time),u(z,z.gzhead.time>>8&255),u(z,z.gzhead.time>>16&255),u(z,z.gzhead.time>>24&255),u(z,9===z.level?2:2<=
z.strategy||2>z.level?4:0),u(z,255&z.gzhead.os),z.gzhead.extra&&z.gzhead.extra.length&&(u(z,255&z.gzhead.extra.length),u(z,z.gzhead.extra.length>>8&255)),z.gzhead.hcrc&&(p.adler=ua(p.adler,z.pending_buf,z.pending,0)),z.gzindex=0,z.status=69):(u(z,0),u(z,0),u(z,0),u(z,0),u(z,0),u(z,9===z.level?2:2<=z.strategy||2>z.level?4:0),u(z,3),z.status=U);else{var w=Ba+(z.w_bits-8<<4)<<8;w|=(2<=z.strategy||2>z.level?0:6>z.level?1:6===z.level?2:3)<<6;0!==z.strstart&&(w|=32);z.status=U;g(z,w+(31-w%31));0!==z.strstart&&
(g(z,p.adler>>>16),g(z,65535&p.adler));p.adler=1}if(69===z.status)if(z.gzhead.extra){for(w=z.pending;z.gzindex<(65535&z.gzhead.extra.length)&&(z.pending!==z.pending_buf_size||(z.gzhead.hcrc&&z.pending>w&&(p.adler=ua(p.adler,z.pending_buf,z.pending-w,w)),v(p),w=z.pending,z.pending!==z.pending_buf_size));)u(z,255&z.gzhead.extra[z.gzindex]),z.gzindex++;z.gzhead.hcrc&&z.pending>w&&(p.adler=ua(p.adler,z.pending_buf,z.pending-w,w));z.gzindex===z.gzhead.extra.length&&(z.gzindex=0,z.status=73)}else z.status=
73;if(73===z.status)if(z.gzhead.name){w=z.pending;do{if(z.pending===z.pending_buf_size&&(z.gzhead.hcrc&&z.pending>w&&(p.adler=ua(p.adler,z.pending_buf,z.pending-w,w)),v(p),w=z.pending,z.pending===z.pending_buf_size)){var x=1;break}x=z.gzindex<z.gzhead.name.length?255&z.gzhead.name.charCodeAt(z.gzindex++):0;u(z,x)}while(0!==x);z.gzhead.hcrc&&z.pending>w&&(p.adler=ua(p.adler,z.pending_buf,z.pending-w,w));0===x&&(z.gzindex=0,z.status=91)}else z.status=91;if(91===z.status)if(z.gzhead.comment){w=z.pending;
do{if(z.pending===z.pending_buf_size&&(z.gzhead.hcrc&&z.pending>w&&(p.adler=ua(p.adler,z.pending_buf,z.pending-w,w)),v(p),w=z.pending,z.pending===z.pending_buf_size)){x=1;break}x=z.gzindex<z.gzhead.comment.length?255&z.gzhead.comment.charCodeAt(z.gzindex++):0;u(z,x)}while(0!==x);z.gzhead.hcrc&&z.pending>w&&(p.adler=ua(p.adler,z.pending_buf,z.pending-w,w));0===x&&(z.status=103)}else z.status=103;if(103===z.status&&(z.gzhead.hcrc?(z.pending+2>z.pending_buf_size&&v(p),z.pending+2<=z.pending_buf_size&&
(u(z,255&p.adler),u(z,p.adler>>8&255),p.adler=0,z.status=U)):z.status=U),0!==z.pending){if(v(p),0===p.avail_out)return z.last_flush=-1,ba}else if(0===p.avail_in&&(q<<1)-(4<q?9:0)<=(y<<1)-(4<y?9:0)&&q!==ia)return N(p,-5);if(666===z.status&&0!==p.avail_in)return N(p,-5);if(0!==p.avail_in||0!==z.lookahead||q!==ja&&666!==z.status){if(2===z.strategy)a:{for(var B;;){if(0===z.lookahead&&(t(z),0===z.lookahead)){if(q===ja){var D=L;break a}break}if(z.match_length=0,B=Kb._tr_tally(z,0,z.window[z.strstart]),
z.lookahead--,z.strstart++,B&&(pa(z,!1),0===z.strm.avail_out)){D=L;break a}}D=(z.insert=0,q===ia?(pa(z,!0),0===z.strm.avail_out?wa:zb):z.last_lit&&(pa(z,!1),0===z.strm.avail_out)?L:Xa)}else if(3===z.strategy)a:{var J,M;for(B=z.window;;){if(z.lookahead<=Sa){if(t(z),z.lookahead<=Sa&&q===ja){D=L;break a}if(0===z.lookahead)break}if(z.match_length=0,z.lookahead>=r&&0<z.strstart&&(M=z.strstart-1,J=B[M],J===B[++M]&&J===B[++M]&&J===B[++M])){for(y=z.strstart+Sa;J===B[++M]&&J===B[++M]&&J===B[++M]&&J===B[++M]&&
J===B[++M]&&J===B[++M]&&J===B[++M]&&J===B[++M]&&M<y;);z.match_length=Sa-(y-M);z.match_length>z.lookahead&&(z.match_length=z.lookahead)}if(z.match_length>=r?(D=Kb._tr_tally(z,1,z.match_length-r),z.lookahead-=z.match_length,z.strstart+=z.match_length,z.match_length=0):(D=Kb._tr_tally(z,0,z.window[z.strstart]),z.lookahead--,z.strstart++),D&&(pa(z,!1),0===z.strm.avail_out)){D=L;break a}}D=(z.insert=0,q===ia?(pa(z,!0),0===z.strm.avail_out?wa:zb):z.last_lit&&(pa(z,!1),0===z.strm.avail_out)?L:Xa)}else D=
pb[z.level].func(z,q);if(D!==wa&&D!==zb||(z.status=666),D===L||D===wa)return 0===p.avail_out&&(z.last_flush=-1),ba;if(D===Xa&&(1===q?Kb._tr_align(z):5!==q&&(Kb._tr_stored_block(z,0,0,!1),3===q&&(T(z.head),0===z.lookahead&&(z.strstart=0,z.block_start=0,z.insert=0))),v(p),0===p.avail_out))return z.last_flush=-1,ba}return q!==ia?ba:0>=z.wrap?1:(2===z.wrap?(u(z,255&p.adler),u(z,p.adler>>8&255),u(z,p.adler>>16&255),u(z,p.adler>>24&255),u(z,255&p.total_in),u(z,p.total_in>>8&255),u(z,p.total_in>>16&255),
u(z,p.total_in>>24&255)):(g(z,p.adler>>>16),g(z,65535&p.adler)),v(p),0<z.wrap&&(z.wrap=-z.wrap),0!==z.pending?ba:1)};D.deflateEnd=function(g){var p;return g&&g.state?(p=g.state.status,p!==Y&&69!==p&&73!==p&&91!==p&&103!==p&&p!==U&&666!==p?N(g,fa):(g.state=null,p===U?N(g,-3):ba)):fa};D.deflateSetDictionary=function(g,p){var q,z,u;var w=p.length;if(!g||!g.state||(q=g.state,z=q.wrap,2===z||1===z&&q.status!==Y||q.lookahead))return fa;1===z&&(g.adler=M(g.adler,p,w,0));q.wrap=0;w>=q.w_size&&(0===z&&(T(q.head),
q.strstart=0,q.block_start=0,q.insert=0),u=new aa.Buf8(q.w_size),aa.arraySet(u,p,w-q.w_size,q.w_size,0),p=u,w=q.w_size);u=g.avail_in;var v=g.next_in;var y=g.input;g.avail_in=w;g.next_in=0;g.input=p;for(t(q);q.lookahead>=r;){p=q.strstart;w=q.lookahead-(r-1);do q.ins_h=(q.ins_h<<q.hash_shift^q.window[p+r-1])&q.hash_mask,q.prev[p&q.w_mask]=q.head[q.ins_h],q.head[q.ins_h]=p,p++;while(--w);q.strstart=p;q.lookahead=r-1;t(q)}return q.strstart+=q.lookahead,q.block_start=q.strstart,q.insert=q.lookahead,q.lookahead=
0,q.match_length=q.prev_length=r-1,q.match_available=0,g.next_in=v,g.input=y,g.avail_in=u,q.wrap=z,ba};D.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":3,"./adler32":5,"./crc32":7,"./messages":13,"./trees":14}],9:[function(x,J,D){J.exports=function(){this.os=this.xflags=this.time=this.text=0;this.extra=null;this.extra_len=0;this.comment=this.name="";this.hcrc=0;this.done=!1}},{}],10:[function(x,J,D){J.exports=function(x,D){var v,J,u;var g=x.state;var p=x.next_in;var t=x.input;
var q=p+(x.avail_in-5);var N=x.next_out;var T=x.output;D=N-(D-x.avail_out);var Ia=N+(x.avail_out-257);var ha=g.dmax;var $a=g.wsize;var Pb=g.whave;var aa=g.wnext;var Kb=g.window;var M=g.hold;var ua=g.bits;var $b=g.lencode;var ja=g.distcode;var ia=(1<<g.lenbits)-1;var ba=(1<<g.distbits)-1;a:do{15>ua&&(M+=t[p++]<<ua,ua+=8,M+=t[p++]<<ua,ua+=8);var fa=$b[M&ia];b:for(;;){if(v=fa>>>24,M>>>=v,ua-=v,v=fa>>>16&255,0===v)T[N++]=65535&fa;else{if(!(16&v)){if(0===(64&v)){fa=$b[(65535&fa)+(M&(1<<v)-1)];continue b}if(32&
v){g.mode=12;break a}x.msg="invalid literal/length code";g.mode=30;break a}var ma=65535&fa;(v&=15)&&(ua<v&&(M+=t[p++]<<ua,ua+=8),ma+=M&(1<<v)-1,M>>>=v,ua-=v);15>ua&&(M+=t[p++]<<ua,ua+=8,M+=t[p++]<<ua,ua+=8);fa=ja[M&ba];c:for(;;){if(v=fa>>>24,M>>>=v,ua-=v,v=fa>>>16&255,!(16&v)){if(0===(64&v)){fa=ja[(65535&fa)+(M&(1<<v)-1)];continue c}x.msg="invalid distance code";g.mode=30;break a}if(J=65535&fa,v&=15,ua<v&&(M+=t[p++]<<ua,ua+=8,ua<v&&(M+=t[p++]<<ua,ua+=8)),J+=M&(1<<v)-1,J>ha){x.msg="invalid distance too far back";
g.mode=30;break a}if(M>>>=v,ua-=v,v=N-D,J>v){if(v=J-v,v>Pb&&g.sane){x.msg="invalid distance too far back";g.mode=30;break a}if(fa=0,u=Kb,0===aa){if(fa+=$a-v,v<ma){ma-=v;do T[N++]=Kb[fa++];while(--v);fa=N-J;u=T}}else if(aa<v){if(fa+=$a+aa-v,v-=aa,v<ma){ma-=v;do T[N++]=Kb[fa++];while(--v);if(fa=0,aa<ma){v=aa;ma-=v;do T[N++]=Kb[fa++];while(--v);fa=N-J;u=T}}}else if(fa+=aa-v,v<ma){ma-=v;do T[N++]=Kb[fa++];while(--v);fa=N-J;u=T}for(;2<ma;)T[N++]=u[fa++],T[N++]=u[fa++],T[N++]=u[fa++],ma-=3;ma&&(T[N++]=
u[fa++],1<ma&&(T[N++]=u[fa++]))}else{fa=N-J;do T[N++]=T[fa++],T[N++]=T[fa++],T[N++]=T[fa++],ma-=3;while(2<ma);ma&&(T[N++]=T[fa++],1<ma&&(T[N++]=T[fa++]))}break}}break}}while(p<q&&N<Ia);ma=ua>>3;p-=ma;ua-=ma<<3;x.next_in=p;x.next_out=N;x.avail_in=p<q?5+(q-p):5-(p-q);x.avail_out=N<Ia?257+(Ia-N):257-(N-Ia);g.hold=M&(1<<ua)-1;g.bits=ua}},{}],11:[function(x,J,D){function N(g){return(g>>>24&255)+(g>>>8&65280)+((65280&g)<<8)+((255&g)<<24)}function T(){this.mode=0;this.last=!1;this.wrap=0;this.havedict=!1;
this.total=this.check=this.dmax=this.flags=0;this.head=null;this.wnext=this.whave=this.wsize=this.wbits=0;this.window=null;this.extra=this.offset=this.length=this.bits=this.hold=0;this.distcode=this.lencode=null;this.have=this.ndist=this.nlen=this.ncode=this.distbits=this.lenbits=0;this.next=null;this.lens=new qa.Buf16(320);this.work=new qa.Buf16(288);this.distdyn=this.lendyn=null;this.was=this.back=this.sane=0}function v(g){var p;return g&&g.state?(p=g.state,g.total_in=g.total_out=p.total=0,g.msg=
"",p.wrap&&(g.adler=1&p.wrap),p.mode=Kb,p.last=0,p.havedict=0,p.dmax=32768,p.head=null,p.hold=0,p.bits=0,p.lencode=p.lendyn=new qa.Buf32(M),p.distcode=p.distdyn=new qa.Buf32(ua),p.sane=1,p.back=-1,Pb):aa}function pa(g){var p;return g&&g.state?(p=g.state,p.wsize=0,p.whave=0,p.wnext=0,v(g)):aa}function u(g,p){var q,t;return g&&g.state?(t=g.state,0>p?(q=0,p=-p):(q=(p>>4)+1,48>p&&(p&=15)),p&&(8>p||15<p)?aa:(null!==t.window&&t.wbits!==p&&(t.window=null),t.wrap=q,t.wbits=p,pa(g))):aa}function g(g,p){var q,
t;return g?(t=new T,g.state=t,t.window=null,q=u(g,p),q!==Pb&&(g.state=null),q):aa}function p(g,p,q,t){var u;g=g.state;return null===g.window&&(g.wsize=1<<g.wbits,g.wnext=0,g.whave=0,g.window=new qa.Buf8(g.wsize)),t>=g.wsize?(qa.arraySet(g.window,p,q-g.wsize,g.wsize,0),g.wnext=0,g.whave=g.wsize):(u=g.wsize-g.wnext,u>t&&(u=t),qa.arraySet(g.window,p,q-t,u,g.wnext),t-=u,t?(qa.arraySet(g.window,p,q-t,t,0),g.wnext=t,g.whave=g.wsize):(g.wnext+=u,g.wnext===g.wsize&&(g.wnext=0),g.whave<g.wsize&&(g.whave+=
u))),0}var t,q,qa=x("../utils/common"),Ca=x("./adler32"),Ia=x("./crc32"),ha=x("./inffast"),$a=x("./inftrees"),Pb=0,aa=-2,Kb=1,M=852,ua=592,$b=!0;D.inflateReset=pa;D.inflateReset2=u;D.inflateResetKeep=v;D.inflateInit=function(p){return g(p,15)};D.inflateInit2=g;D.inflate=function(g,u){var v,x,D,J,M,T,ia,ja=0,pa=new qa.Buf8(4),ua=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!g||!g.state||!g.output||!g.input&&0!==g.avail_in)return aa;var w=g.state;12===w.mode&&(w.mode=13);var B=g.next_out;var Na=
g.output;var r=g.avail_out;var Sa=g.next_in;var Qa=g.input;var Y=g.avail_in;var U=w.hold;var L=w.bits;var Xa=Y;var wa=r;var zb=Pb;a:for(;;)switch(w.mode){case Kb:if(0===w.wrap){w.mode=13;break}for(;16>L;){if(0===Y)break a;Y--;U+=Qa[Sa++]<<L;L+=8}if(2&w.wrap&&35615===U){w.check=0;pa[0]=255&U;pa[1]=U>>>8&255;w.check=Ia(w.check,pa,2,0);L=U=0;w.mode=2;break}if(w.flags=0,w.head&&(w.head.done=!1),!(1&w.wrap)||(((255&U)<<8)+(U>>8))%31){g.msg="incorrect header check";w.mode=30;break}if(8!==(15&U)){g.msg=
"unknown compression method";w.mode=30;break}if(U>>>=4,L-=4,T=(15&U)+8,0===w.wbits)w.wbits=T;else if(T>w.wbits){g.msg="invalid window size";w.mode=30;break}w.dmax=1<<T;g.adler=w.check=1;w.mode=512&U?10:12;L=U=0;break;case 2:for(;16>L;){if(0===Y)break a;Y--;U+=Qa[Sa++]<<L;L+=8}if(w.flags=U,8!==(255&w.flags)){g.msg="unknown compression method";w.mode=30;break}if(57344&w.flags){g.msg="unknown header flags set";w.mode=30;break}w.head&&(w.head.text=U>>8&1);512&w.flags&&(pa[0]=255&U,pa[1]=U>>>8&255,w.check=
Ia(w.check,pa,2,0));L=U=0;w.mode=3;case 3:for(;32>L;){if(0===Y)break a;Y--;U+=Qa[Sa++]<<L;L+=8}w.head&&(w.head.time=U);512&w.flags&&(pa[0]=255&U,pa[1]=U>>>8&255,pa[2]=U>>>16&255,pa[3]=U>>>24&255,w.check=Ia(w.check,pa,4,0));L=U=0;w.mode=4;case 4:for(;16>L;){if(0===Y)break a;Y--;U+=Qa[Sa++]<<L;L+=8}w.head&&(w.head.xflags=255&U,w.head.os=U>>8);512&w.flags&&(pa[0]=255&U,pa[1]=U>>>8&255,w.check=Ia(w.check,pa,2,0));L=U=0;w.mode=5;case 5:if(1024&w.flags){for(;16>L;){if(0===Y)break a;Y--;U+=Qa[Sa++]<<L;L+=
8}w.length=U;w.head&&(w.head.extra_len=U);512&w.flags&&(pa[0]=255&U,pa[1]=U>>>8&255,w.check=Ia(w.check,pa,2,0));L=U=0}else w.head&&(w.head.extra=null);w.mode=6;case 6:if(1024&w.flags&&(v=w.length,v>Y&&(v=Y),v&&(w.head&&(T=w.head.extra_len-w.length,w.head.extra||(w.head.extra=Array(w.head.extra_len)),qa.arraySet(w.head.extra,Qa,Sa,v,T)),512&w.flags&&(w.check=Ia(w.check,Qa,v,Sa)),Y-=v,Sa+=v,w.length-=v),w.length))break a;w.length=0;w.mode=7;case 7:if(2048&w.flags){if(0===Y)break a;v=0;do T=Qa[Sa+v++],
w.head&&T&&65536>w.length&&(w.head.name+=String.fromCharCode(T));while(T&&v<Y);if(512&w.flags&&(w.check=Ia(w.check,Qa,v,Sa)),Y-=v,Sa+=v,T)break a}else w.head&&(w.head.name=null);w.length=0;w.mode=8;case 8:if(4096&w.flags){if(0===Y)break a;v=0;do T=Qa[Sa+v++],w.head&&T&&65536>w.length&&(w.head.comment+=String.fromCharCode(T));while(T&&v<Y);if(512&w.flags&&(w.check=Ia(w.check,Qa,v,Sa)),Y-=v,Sa+=v,T)break a}else w.head&&(w.head.comment=null);w.mode=9;case 9:if(512&w.flags){for(;16>L;){if(0===Y)break a;
Y--;U+=Qa[Sa++]<<L;L+=8}if(U!==(65535&w.check)){g.msg="header crc mismatch";w.mode=30;break}L=U=0}w.head&&(w.head.hcrc=w.flags>>9&1,w.head.done=!0);g.adler=w.check=0;w.mode=12;break;case 10:for(;32>L;){if(0===Y)break a;Y--;U+=Qa[Sa++]<<L;L+=8}g.adler=w.check=N(U);L=U=0;w.mode=11;case 11:if(0===w.havedict)return g.next_out=B,g.avail_out=r,g.next_in=Sa,g.avail_in=Y,w.hold=U,w.bits=L,2;g.adler=w.check=1;w.mode=12;case 12:if(5===u||6===u)break a;case 13:if(w.last){U>>>=7&L;L-=7&L;w.mode=27;break}for(;3>
L;){if(0===Y)break a;Y--;U+=Qa[Sa++]<<L;L+=8}switch(w.last=1&U,U>>>=1,--L,3&U){case 0:w.mode=14;break;case 1:var pb=w;if($b){t=new qa.Buf32(512);q=new qa.Buf32(32);for(D=0;144>D;)pb.lens[D++]=8;for(;256>D;)pb.lens[D++]=9;for(;280>D;)pb.lens[D++]=7;for(;288>D;)pb.lens[D++]=8;$a(1,pb.lens,0,288,t,0,pb.work,{bits:9});for(D=0;32>D;)pb.lens[D++]=5;$a(2,pb.lens,0,32,q,0,pb.work,{bits:5});$b=!1}pb.lencode=t;pb.lenbits=9;pb.distcode=q;pb.distbits=5;if(w.mode=20,6===u){U>>>=2;L-=2;break a}break;case 2:w.mode=
17;break;case 3:g.msg="invalid block type",w.mode=30}U>>>=2;L-=2;break;case 14:U>>>=7&L;for(L-=7&L;32>L;){if(0===Y)break a;Y--;U+=Qa[Sa++]<<L;L+=8}if((65535&U)!==(U>>>16^65535)){g.msg="invalid stored block lengths";w.mode=30;break}if(w.length=65535&U,U=0,L=0,w.mode=15,6===u)break a;case 15:w.mode=16;case 16:if(v=w.length){if(v>Y&&(v=Y),v>r&&(v=r),0===v)break a;qa.arraySet(Na,Qa,Sa,v,B);Y-=v;Sa+=v;r-=v;B+=v;w.length-=v;break}w.mode=12;break;case 17:for(;14>L;){if(0===Y)break a;Y--;U+=Qa[Sa++]<<L;L+=
8}if(w.nlen=(31&U)+257,U>>>=5,L-=5,w.ndist=(31&U)+1,U>>>=5,L-=5,w.ncode=(15&U)+4,U>>>=4,L-=4,286<w.nlen||30<w.ndist){g.msg="too many length or distance symbols";w.mode=30;break}w.have=0;w.mode=18;case 18:for(;w.have<w.ncode;){for(;3>L;){if(0===Y)break a;Y--;U+=Qa[Sa++]<<L;L+=8}w.lens[ua[w.have++]]=7&U;U>>>=3;L-=3}for(;19>w.have;)w.lens[ua[w.have++]]=0;if(w.lencode=w.lendyn,w.lenbits=7,ia={bits:w.lenbits},zb=$a(0,w.lens,0,19,w.lencode,0,w.work,ia),w.lenbits=ia.bits,zb){g.msg="invalid code lengths set";
w.mode=30;break}w.have=0;w.mode=19;case 19:for(;w.have<w.nlen+w.ndist;){for(;ja=w.lencode[U&(1<<w.lenbits)-1],J=ja>>>24,pb=65535&ja,!(J<=L);){if(0===Y)break a;Y--;U+=Qa[Sa++]<<L;L+=8}if(16>pb)U>>>=J,L-=J,w.lens[w.have++]=pb;else{if(16===pb){for(D=J+2;L<D;){if(0===Y)break a;Y--;U+=Qa[Sa++]<<L;L+=8}if(U>>>=J,L-=J,0===w.have){g.msg="invalid bit length repeat";w.mode=30;break}T=w.lens[w.have-1];v=3+(3&U);U>>>=2;L-=2}else if(17===pb){for(D=J+3;L<D;){if(0===Y)break a;Y--;U+=Qa[Sa++]<<L;L+=8}U>>>=J;L-=J;
T=0;v=3+(7&U);U>>>=3;L-=3}else{for(D=J+7;L<D;){if(0===Y)break a;Y--;U+=Qa[Sa++]<<L;L+=8}U>>>=J;L-=J;T=0;v=11+(127&U);U>>>=7;L-=7}if(w.have+v>w.nlen+w.ndist){g.msg="invalid bit length repeat";w.mode=30;break}for(;v--;)w.lens[w.have++]=T}}if(30===w.mode)break;if(0===w.lens[256]){g.msg="invalid code -- missing end-of-block";w.mode=30;break}if(w.lenbits=9,ia={bits:w.lenbits},zb=$a(1,w.lens,0,w.nlen,w.lencode,0,w.work,ia),w.lenbits=ia.bits,zb){g.msg="invalid literal/lengths set";w.mode=30;break}if(w.distbits=
6,w.distcode=w.distdyn,ia={bits:w.distbits},zb=$a(2,w.lens,w.nlen,w.ndist,w.distcode,0,w.work,ia),w.distbits=ia.bits,zb){g.msg="invalid distances set";w.mode=30;break}if(w.mode=20,6===u)break a;case 20:w.mode=21;case 21:if(6<=Y&&258<=r){g.next_out=B;g.avail_out=r;g.next_in=Sa;g.avail_in=Y;w.hold=U;w.bits=L;ha(g,wa);B=g.next_out;Na=g.output;r=g.avail_out;Sa=g.next_in;Qa=g.input;Y=g.avail_in;U=w.hold;L=w.bits;12===w.mode&&(w.back=-1);break}for(w.back=0;ja=w.lencode[U&(1<<w.lenbits)-1],J=ja>>>24,D=ja>>>
16&255,pb=65535&ja,!(J<=L);){if(0===Y)break a;Y--;U+=Qa[Sa++]<<L;L+=8}if(D&&0===(240&D)){var y=J;var Ma=D;for(M=pb;ja=w.lencode[M+((U&(1<<y+Ma)-1)>>y)],J=ja>>>24,D=ja>>>16&255,pb=65535&ja,!(y+J<=L);){if(0===Y)break a;Y--;U+=Qa[Sa++]<<L;L+=8}U>>>=y;L-=y;w.back+=y}if(U>>>=J,L-=J,w.back+=J,w.length=pb,0===D){w.mode=26;break}if(32&D){w.back=-1;w.mode=12;break}if(64&D){g.msg="invalid literal/length code";w.mode=30;break}w.extra=15&D;w.mode=22;case 22:if(w.extra){for(D=w.extra;L<D;){if(0===Y)break a;Y--;
U+=Qa[Sa++]<<L;L+=8}w.length+=U&(1<<w.extra)-1;U>>>=w.extra;L-=w.extra;w.back+=w.extra}w.was=w.length;w.mode=23;case 23:for(;ja=w.distcode[U&(1<<w.distbits)-1],J=ja>>>24,D=ja>>>16&255,pb=65535&ja,!(J<=L);){if(0===Y)break a;Y--;U+=Qa[Sa++]<<L;L+=8}if(0===(240&D)){y=J;Ma=D;for(M=pb;ja=w.distcode[M+((U&(1<<y+Ma)-1)>>y)],J=ja>>>24,D=ja>>>16&255,pb=65535&ja,!(y+J<=L);){if(0===Y)break a;Y--;U+=Qa[Sa++]<<L;L+=8}U>>>=y;L-=y;w.back+=y}if(U>>>=J,L-=J,w.back+=J,64&D){g.msg="invalid distance code";w.mode=30;
break}w.offset=pb;w.extra=15&D;w.mode=24;case 24:if(w.extra){for(D=w.extra;L<D;){if(0===Y)break a;Y--;U+=Qa[Sa++]<<L;L+=8}w.offset+=U&(1<<w.extra)-1;U>>>=w.extra;L-=w.extra;w.back+=w.extra}if(w.offset>w.dmax){g.msg="invalid distance too far back";w.mode=30;break}w.mode=25;case 25:if(0===r)break a;if(v=wa-r,w.offset>v){if(v=w.offset-v,v>w.whave&&w.sane){g.msg="invalid distance too far back";w.mode=30;break}v>w.wnext?(v-=w.wnext,x=w.wsize-v):x=w.wnext-v;v>w.length&&(v=w.length);D=w.window}else D=Na,
x=B-w.offset,v=w.length;v>r&&(v=r);r-=v;w.length-=v;do Na[B++]=D[x++];while(--v);0===w.length&&(w.mode=21);break;case 26:if(0===r)break a;Na[B++]=w.length;r--;w.mode=21;break;case 27:if(w.wrap){for(;32>L;){if(0===Y)break a;Y--;U|=Qa[Sa++]<<L;L+=8}if(wa-=r,g.total_out+=wa,w.total+=wa,wa&&(g.adler=w.check=w.flags?Ia(w.check,Na,wa,B-wa):Ca(w.check,Na,wa,B-wa)),wa=r,(w.flags?U:N(U))!==w.check){g.msg="incorrect data check";w.mode=30;break}L=U=0}w.mode=28;case 28:if(w.wrap&&w.flags){for(;32>L;){if(0===
Y)break a;Y--;U+=Qa[Sa++]<<L;L+=8}if(U!==(4294967295&w.total)){g.msg="incorrect length check";w.mode=30;break}L=U=0}w.mode=29;case 29:zb=1;break a;case 30:zb=-3;break a;case 31:return-4;default:return aa}return g.next_out=B,g.avail_out=r,g.next_in=Sa,g.avail_in=Y,w.hold=U,w.bits=L,(w.wsize||wa!==g.avail_out&&30>w.mode&&(27>w.mode||4!==u))&&p(g,g.output,g.next_out,wa-g.avail_out)?(w.mode=31,-4):(Xa-=g.avail_in,wa-=g.avail_out,g.total_in+=Xa,g.total_out+=wa,w.total+=wa,w.wrap&&wa&&(g.adler=w.check=
w.flags?Ia(w.check,Na,wa,g.next_out-wa):Ca(w.check,Na,wa,g.next_out-wa)),g.data_type=w.bits+(w.last?64:0)+(12===w.mode?128:0)+(20===w.mode||15===w.mode?256:0),(0===Xa&&0===wa||4===u)&&zb===Pb&&(zb=-5),zb)};D.inflateEnd=function(g){if(!g||!g.state)return aa;var p=g.state;return p.window&&(p.window=null),g.state=null,Pb};D.inflateGetHeader=function(g,p){var q;return g&&g.state?(q=g.state,0===(2&q.wrap)?aa:(q.head=p,p.done=!1,Pb)):aa};D.inflateSetDictionary=function(g,q){var t,v,u=q.length;return g&&
g.state?(t=g.state,0!==t.wrap&&11!==t.mode?aa:11===t.mode&&(v=1,v=Ca(v,q,u,0),v!==t.check)?-3:p(g,q,u,u)?(t.mode=31,-4):(t.havedict=1,Pb)):aa};D.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":3,"./adler32":5,"./crc32":7,"./inffast":10,"./inftrees":12}],12:[function(x,J,D){var N=x("../utils/common"),T=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],v=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,
16,72,78],pa=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];J.exports=function(g,p,t,q,x,D,J,ha){var qa,Ca,aa,Ia,M,ua,$b=ha.bits,ja,ia,ba,fa,ma,ka=0,uc,Xb=null,Ba=0,ra=new N.Buf16(16);var Ub=new N.Buf16(16);var tc=null,w=0;for(ja=0;15>=ja;ja++)ra[ja]=0;for(ia=0;ia<q;ia++)ra[p[t+ia]]++;var B=$b;for(ba=15;1<=ba&&0===ra[ba];ba--);if(B>
ba&&(B=ba),0===ba)return x[D++]=20971520,x[D++]=20971520,ha.bits=1,0;for($b=1;$b<ba&&0===ra[$b];$b++);B<$b&&(B=$b);for(ja=qa=1;15>=ja;ja++)if(qa<<=1,qa-=ra[ja],0>qa)return-1;if(0<qa&&(0===g||1!==ba))return-1;Ub[1]=0;for(ja=1;15>ja;ja++)Ub[ja+1]=Ub[ja]+ra[ja];for(ia=0;ia<q;ia++)0!==p[t+ia]&&(J[Ub[p[t+ia]]++]=ia);if(0===g?(Xb=tc=J,Ia=19):1===g?(Xb=T,Ba-=257,tc=v,w-=257,Ia=256):(Xb=pa,tc=u,Ia=-1),uc=0,ia=0,ja=$b,Ub=D,fa=B,ma=0,aa=-1,ka=1<<B,q=ka-1,1===g&&852<ka||2===g&&592<ka)return 1;for(var Na=0;;){Na++;
var r=ja-ma;J[ia]<Ia?(M=0,ua=J[ia]):J[ia]>Ia?(M=tc[w+J[ia]],ua=Xb[Ba+J[ia]]):(M=96,ua=0);qa=1<<ja-ma;$b=Ca=1<<fa;do Ca-=qa,x[Ub+(uc>>ma)+Ca]=r<<24|M<<16|ua|0;while(0!==Ca);for(qa=1<<ja-1;uc&qa;)qa>>=1;if(0!==qa?(uc&=qa-1,uc+=qa):uc=0,ia++,0===--ra[ja]){if(ja===ba)break;ja=p[t+J[ia]]}if(ja>B&&(uc&q)!==aa){0===ma&&(ma=B);Ub+=$b;fa=ja-ma;for(qa=1<<fa;fa+ma<ba&&(qa-=ra[fa+ma],!(0>=qa));)fa++,qa<<=1;if(ka+=1<<fa,1===g&&852<ka||2===g&&592<ka)return 1;aa=uc&q;x[aa]=B<<24|fa<<16|Ub-D|0}}return 0!==uc&&(x[Ub+
uc]=ja-ma<<24|4194304),ha.bits=B,0}},{"../utils/common":3}],13:[function(x,J,D){J.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],14:[function(x,J,D){function N(g){for(var p=g.length;0<=--p;)g[p]=0}function T(g,p,q,r,t){this.static_tree=g;this.extra_bits=p;this.extra_base=q;this.elems=r;this.max_length=t;this.has_stree=g&&g.length}function v(g,p){this.dyn_tree=
g;this.max_code=0;this.stat_desc=p}function pa(g,p){g.pending_buf[g.pending++]=255&p;g.pending_buf[g.pending++]=p>>>8&255}function u(g,p,q){g.bi_valid>Ba-q?(g.bi_buf|=p<<g.bi_valid&65535,pa(g,g.bi_buf),g.bi_buf=p>>Ba-g.bi_valid,g.bi_valid+=q-Ba):(g.bi_buf|=p<<g.bi_valid&65535,g.bi_valid+=q)}function g(g,p,q){u(g,q[2*p],q[2*p+1])}function p(g,p){var q=0;do q|=1&g,g>>>=1,q<<=1;while(0<--p);return q>>>1}function t(g,q,r){var t,v=Array(Xb+1),z=0;for(t=1;t<=Xb;t++)v[t]=z=z+r[t-1]<<1;for(r=0;r<=q;r++)t=
g[2*r+1],0!==t&&(g[2*r]=p(v[t]++,t))}function q(g){var p;for(p=0;p<fa;p++)g.dyn_ltree[2*p]=0;for(p=0;p<ma;p++)g.dyn_dtree[2*p]=0;for(p=0;p<ka;p++)g.bl_tree[2*p]=0;g.dyn_ltree[2*ra]=1;g.opt_len=g.static_len=0;g.last_lit=g.matches=0}function qa(g){8<g.bi_valid?pa(g,g.bi_buf):0<g.bi_valid&&(g.pending_buf[g.pending++]=g.bi_buf);g.bi_buf=0;g.bi_valid=0}function Ca(g,p,q,r){var t=2*p,v=2*q;return g[t]<g[v]||g[t]===g[v]&&r[p]<=r[q]}function Ia(g,p,q){for(var r=g.heap[q],t=q<<1;t<=g.heap_len&&(t<g.heap_len&&
Ca(p,g.heap[t+1],g.heap[t],g.depth)&&t++,!Ca(p,r,g.heap[t],g.depth));)g.heap[q]=g.heap[t],q=t,t<<=1;g.heap[q]=r}function ha(p,q,r){var t,v,z=0;if(0!==p.last_lit){do{var w=p.pending_buf[p.d_buf+2*z]<<8|p.pending_buf[p.d_buf+2*z+1];var x=p.pending_buf[p.l_buf+z];z++;0===w?g(p,x,q):(t=L[x],g(p,t+ba+1,q),v=B[t],0!==v&&(x-=Xa[t],u(p,x,v)),w--,t=256>w?U[w]:U[256+(w>>>7)],g(p,t,r),v=Na[t],0!==v&&(w-=wa[t],u(p,w,v)))}while(z<p.last_lit)}g(p,ra,q)}function $a(g,p){var q,r=p.dyn_tree;var v=p.stat_desc.static_tree;
var u=p.stat_desc.has_stree,z=p.stat_desc.elems,w=-1;g.heap_len=0;g.heap_max=uc;for(q=0;q<z;q++)0!==r[2*q]?(g.heap[++g.heap_len]=w=q,g.depth[q]=0):r[2*q+1]=0;for(;2>g.heap_len;){var x=g.heap[++g.heap_len]=2>w?++w:0;r[2*x]=1;g.depth[x]=0;g.opt_len--;u&&(g.static_len-=v[2*x+1])}p.max_code=w;for(q=g.heap_len>>1;1<=q;q--)Ia(g,r,q);x=z;do q=g.heap[1],g.heap[1]=g.heap[g.heap_len--],Ia(g,r,1),v=g.heap[1],g.heap[--g.heap_max]=q,g.heap[--g.heap_max]=v,r[2*x]=r[2*q]+r[2*v],g.depth[x]=(g.depth[q]>=g.depth[v]?
g.depth[q]:g.depth[v])+1,r[2*q+1]=r[2*v+1]=x,g.heap[1]=x++,Ia(g,r,1);while(2<=g.heap_len);g.heap[--g.heap_max]=g.heap[1];var y,B;q=p.dyn_tree;x=p.max_code;z=p.stat_desc.static_tree;var D=p.stat_desc.has_stree,O=p.stat_desc.extra_bits,J=p.stat_desc.extra_base,L=p.stat_desc.max_length,M=0;for(u=0;u<=Xb;u++)g.bl_count[u]=0;q[2*g.heap[g.heap_max]+1]=0;for(p=g.heap_max+1;p<uc;p++)v=g.heap[p],u=q[2*q[2*v+1]+1]+1,u>L&&(u=L,M++),q[2*v+1]=u,v>x||(g.bl_count[u]++,y=0,v>=J&&(y=O[v-J]),B=q[2*v],g.opt_len+=B*
(u+y),D&&(g.static_len+=B*(z[2*v+1]+y)));if(0!==M){do{for(u=L-1;0===g.bl_count[u];)u--;g.bl_count[u]--;g.bl_count[u+1]+=2;g.bl_count[L]--;M-=2}while(0<M);for(u=L;0!==u;u--)for(v=g.bl_count[u];0!==v;)y=g.heap[--p],y>x||(q[2*y+1]!==u&&(g.opt_len+=(u-q[2*y+1])*q[2*y],q[2*y+1]=u),v--)}t(r,w,g.bl_count)}function Pb(g,p,q){var r,t=-1,v=p[1],u=0,z=7,x=4;0===v&&(z=138,x=3);p[2*(q+1)+1]=65535;for(r=0;r<=q;r++){var y=v;v=p[2*(r+1)+1];++u<z&&y===v||(u<x?g.bl_tree[2*y]+=u:0!==y?(y!==t&&g.bl_tree[2*y]++,g.bl_tree[2*
Ub]++):10>=u?g.bl_tree[2*tc]++:g.bl_tree[2*w]++,u=0,t=y,0===v?(z=138,x=3):y===v?(z=6,x=3):(z=7,x=4))}}function aa(p,q,r){var t,v,z=-1,x=q[1],y=0,B=7,D=4;0===x&&(B=138,D=3);for(t=0;t<=r;t++)if(v=x,x=q[2*(t+1)+1],!(++y<B&&v===x)){if(y<D){do g(p,v,p.bl_tree);while(0!==--y)}else 0!==v?(v!==z&&(g(p,v,p.bl_tree),y--),g(p,Ub,p.bl_tree),u(p,y-3,2)):10>=y?(g(p,tc,p.bl_tree),u(p,y-3,3)):(g(p,w,p.bl_tree),u(p,y-11,7));y=0;z=v;0===x?(B=138,D=3):v===x?(B=6,D=3):(B=7,D=4)}}function Kb(g){var p,q=4093624447;for(p=
0;31>=p;p++,q>>>=1)if(1&q&&0!==g.dyn_ltree[2*p])return $b;if(0!==g.dyn_ltree[18]||0!==g.dyn_ltree[20]||0!==g.dyn_ltree[26])return ja;for(p=32;p<ba;p++)if(0!==g.dyn_ltree[2*p])return ja;return $b}function M(g,p,q,r){u(g,(ia<<1)+(r?1:0),3);qa(g);pa(g,q);pa(g,~q);ua.arraySet(g.pending_buf,g.window,p,q,g.pending);g.pending+=q}var ua=x("../utils/common"),$b=0,ja=1,ia=0,ba=256,fa=ba+1+29,ma=30,ka=19,uc=2*fa+1,Xb=15,Ba=16,ra=256,Ub=16,tc=17,w=18,B=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,
0],Na=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Sa=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Qa=Array(2*(fa+2));N(Qa);var Y=Array(2*ma);N(Y);var U=Array(512);N(U);var L=Array(256);N(L);var Xa=Array(29);N(Xa);var wa=Array(ma);N(wa);var zb,pb,y,Ma=!1;D._tr_init=function(g){if(!Ma){var u,x,w,D=Array(Xb+1);for(w=x=0;28>w;w++)for(Xa[w]=x,u=0;u<1<<B[w];u++)L[x++]=w;L[x-1]=w;for(w=x=0;16>w;w++)for(wa[w]=x,u=0;u<1<<Na[w];u++)U[x++]=
w;for(x>>=7;w<ma;w++)for(wa[w]=x<<7,u=0;u<1<<Na[w]-7;u++)U[256+x++]=w;for(u=0;u<=Xb;u++)D[u]=0;for(u=0;143>=u;)Qa[2*u+1]=8,u++,D[8]++;for(;255>=u;)Qa[2*u+1]=9,u++,D[9]++;for(;279>=u;)Qa[2*u+1]=7,u++,D[7]++;for(;287>=u;)Qa[2*u+1]=8,u++,D[8]++;t(Qa,fa+1,D);for(u=0;u<ma;u++)Y[2*u+1]=5,Y[2*u]=p(u,5);zb=new T(Qa,B,ba+1,fa,Xb);pb=new T(Y,Na,0,ma,Xb);y=new T([],r,0,ka,7);Ma=!0}g.l_desc=new v(g.dyn_ltree,zb);g.d_desc=new v(g.dyn_dtree,pb);g.bl_desc=new v(g.bl_tree,y);g.bi_buf=0;g.bi_valid=0;q(g)};D._tr_stored_block=
M;D._tr_flush_block=function(g,p,r,t){var v=0;if(0<g.level){2===g.strm.data_type&&(g.strm.data_type=Kb(g));$a(g,g.l_desc);$a(g,g.d_desc);Pb(g,g.dyn_ltree,g.l_desc.max_code);Pb(g,g.dyn_dtree,g.d_desc.max_code);$a(g,g.bl_desc);for(v=ka-1;3<=v&&0===g.bl_tree[2*Sa[v]+1];v--);v=(g.opt_len+=3*(v+1)+14,v);var w=g.opt_len+3+7>>>3;var x=g.static_len+3+7>>>3;x<=w&&(w=x)}else w=x=r+5;if(r+4<=w&&-1!==p)M(g,p,r,t);else if(4===g.strategy||x===w)u(g,2+(t?1:0),3),ha(g,Qa,Y);else{u(g,4+(t?1:0),3);p=g.l_desc.max_code+
1;r=g.d_desc.max_code+1;v+=1;u(g,p-257,5);u(g,r-1,5);u(g,v-4,4);for(w=0;w<v;w++)u(g,g.bl_tree[2*Sa[w]+1],3);aa(g,g.dyn_ltree,p-1);aa(g,g.dyn_dtree,r-1);ha(g,g.dyn_ltree,g.dyn_dtree)}q(g);t&&qa(g)};D._tr_tally=function(g,p,q){return g.pending_buf[g.d_buf+2*g.last_lit]=p>>>8&255,g.pending_buf[g.d_buf+2*g.last_lit+1]=255&p,g.pending_buf[g.l_buf+g.last_lit]=255&q,g.last_lit++,0===p?g.dyn_ltree[2*q]++:(g.matches++,p--,g.dyn_ltree[2*(L[q]+ba+1)]++,g.dyn_dtree[2*(256>p?U[p]:U[256+(p>>>7)])]++),g.last_lit===
g.lit_bufsize-1};D._tr_align=function(p){u(p,2,3);g(p,ra,Qa);16===p.bi_valid?(pa(p,p.bi_buf),p.bi_buf=0,p.bi_valid=0):8<=p.bi_valid&&(p.pending_buf[p.pending++]=255&p.bi_buf,p.bi_buf>>=8,p.bi_valid-=8)}},{"../utils/common":3}],15:[function(x,J,D){J.exports=function(){this.input=null;this.total_in=this.avail_in=this.next_in=0;this.output=null;this.total_out=this.avail_out=this.next_out=0;this.msg="";this.state=null;this.data_type=2;this.adler=0}},{}],"/":[function(x,J,D){D=x("./lib/utils/common").assign;
var N=x("./lib/deflate"),T=x("./lib/inflate");x=x("./lib/zlib/constants");var v={};D(v,N,T,x);J.exports=v},{"./lib/deflate":1,"./lib/inflate":2,"./lib/utils/common":3,"./lib/zlib/constants":6}]},{},[])("/")});
var saveAs=saveAs||function(X){if(!("undefined"===typeof X||"undefined"!==typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var x=X.document.createElementNS("http://www.w3.org/1999/xhtml","a"),J="download"in x,D=/constructor/i.test(X.HTMLElement)||X.safari,N=/CriOS\/[\d]+/.test(navigator.userAgent),T=function(g){(X.setImmediate||X.setTimeout)(function(){throw g;},0)},v=function(g){setTimeout(function(){"string"===typeof g?(X.URL||X.webkitURL||X).revokeObjectURL(g):g.remove()},4E4)},pa=
function(g){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(g.type)?new Blob([String.fromCharCode(65279),g],{type:g.type}):g},u=function(g,t,q){q||(g=pa(g));var p=this,u="application/octet-stream"===g.type,Ia=function(){var g=["writestart","progress","write","writeend"];g=[].concat(g);for(var q=g.length;q--;){var t=p["on"+g[q]];if("function"===typeof t)try{t.call(p,p)}catch(Kb){T(Kb)}}};p.readyState=p.INIT;if(J){var ha=(X.URL||X.webkitURL||X).createObjectURL(g);
setTimeout(function(){x.href=ha;x.download=t;var g=new MouseEvent("click");x.dispatchEvent(g);Ia();v(ha);p.readyState=p.DONE})}else(function(){if((N||u&&D)&&X.FileReader){var q=new FileReader;q.onloadend=function(){var g=N?q.result:q.result.replace(/^data:[^;]*;/,"data:attachment/file;");X.open(g,"_blank")||(X.location.href=g);p.readyState=p.DONE;Ia()};q.readAsDataURL(g);p.readyState=p.INIT}else ha||(ha=(X.URL||X.webkitURL||X).createObjectURL(g)),u?X.location.href=ha:X.open(ha,"_blank")||(X.location.href=
ha),p.readyState=p.DONE,Ia(),v(ha)})()},g=u.prototype;if("undefined"!==typeof navigator&&navigator.msSaveOrOpenBlob)return function(g,t,q){t=t||g.name||"download";q||(g=pa(g));return navigator.msSaveOrOpenBlob(g,t)};g.abort=function(){};g.readyState=g.INIT=0;g.WRITING=1;g.DONE=2;g.error=g.onwritestart=g.onprogress=g.onwrite=g.onabort=g.onerror=g.onwriteend=null;return function(g,t,q){return new u(g,t||g.name||"download",q)}}}("undefined"!==typeof self&&self||"undefined"!==typeof window&&window||this.content);
"undefined"!==typeof module&&module.exports?module.exports.saveAs=saveAs:"undefined"!==typeof define&&null!==define&&null!==define.amd&&define("FileSaver.js",function(){return saveAs});"function"==typeof define&&define.__amd&&(define.amd=define.__amd,delete define.__amd);
